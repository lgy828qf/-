!function (a, b) {
  'function' == typeof define && (define.amd || define.cmd) ? define(function () {
    return b(a)
  }) : b(a, !0)
}(this, function (a, b) {
  function c (b, c, d) {
    a.WeixinJSBridge ? WeixinJSBridge.invoke(b, e(c), function (a) {
      g(b, a, d)
    }) : j(b, d)
  }

  function d (b, c, d) {
    a.WeixinJSBridge ? WeixinJSBridge.on(b, function (a) {
      d && d.trigger && d.trigger(a), g(b, a, c)
    }) : d ? j(b, d) : j(b, c)
  }

  function e (a) {
    return a = a || {}, a.appId = E.appId, a.verifyAppId = E.appId, a.verifySignType = 'sha1', a.verifyTimestamp = E.timestamp + '', a.verifyNonceStr = E.nonceStr, a.verifySignature = E.signature, a
  }

  function f (a) {
    return {
      timeStamp: a.timestamp + '',
      nonceStr: a.nonceStr,
      'package': a.package,
      paySign: a.paySign,
      signType: a.signType || 'SHA1'
    }
  }

  function g (a, b, c) {
    var d, e, f
    switch (delete b.err_code, delete b.err_desc, delete b.err_detail, d = b.errMsg, d || (d = b.err_msg, delete b.err_msg, d = h(a, d), b.errMsg = d), c = c || {}, c._complete && (c._complete(b), delete c._complete), d = b.errMsg || '', E.debug && !c.isInnerInvoke && alert(JSON.stringify(b)), e = d.indexOf(':'), f = d.substring(e + 1)) {
      case'ok':
        c.success && c.success(b)
        break
      case'cancel':
        c.cancel && c.cancel(b)
        break
      default:
        c.fail && c.fail(b)
    }
    c.complete && c.complete(b)
  }

  function h (a, b) {
    var e, f, c = a, d = p[c]
    return d && (c = d), e = 'ok', b && (f = b.indexOf(':'), e = b.substring(f + 1), 'confirm' == e && (e = 'ok'), 'failed' == e && (e = 'fail'), -1 != e.indexOf('failed_') && (e = e.substring(7)), -1 != e.indexOf('fail_') && (e = e.substring(5)), e = e.replace(/_/g, ' '), e = e.toLowerCase(), ('access denied' == e || 'no permission to execute' == e) && (e = 'permission denied'), 'config' == c && 'function not exist' == e && (e = 'ok'), '' == e && (e = 'fail')), b = c + ':' + e
  }

  function i (a) {
    var b, c, d, e
    if (a) {
      for (b = 0, c = a.length; c > b; ++b) d = a[b], e = o[d], e && (a[b] = e)
      return a
    }
  }

  function j (a, b) {
    if (!(!E.debug || b && b.isInnerInvoke)) {
      var c = p[a]
      c && (a = c), b && b._complete && delete b._complete, console.log('"' + a + '",', b || '')
    }
  }

  function k () {
    0 != D.preVerifyState && (u || v || E.debug || '6.0.2' > z || D.systemType < 0 || A || (A = !0, D.appId = E.appId, D.initTime = C.initEndTime - C.initStartTime, D.preVerifyTime = C.preVerifyEndTime - C.preVerifyStartTime, H.getNetworkType({
      isInnerInvoke: !0,
      success: function (a) {
        var b, c
        D.networkType = a.networkType, b = 'http://open.weixin.qq.com/sdk/report?v=' + D.version + '&o=' + D.preVerifyState + '&s=' + D.systemType + '&c=' + D.clientVersion + '&a=' + D.appId + '&n=' + D.networkType + '&i=' + D.initTime + '&p=' + D.preVerifyTime + '&u=' + D.url, c = new Image, c.src = b
      }
    })))
  }

  function l () {
    return (new Date).getTime()
  }

  function m (b) {
    w && (a.WeixinJSBridge ? b() : q.addEventListener && q.addEventListener('WeixinJSBridgeReady', b, !1))
  }

  function n () {
    H.invoke || (H.invoke = function (b, c, d) {
      a.WeixinJSBridge && WeixinJSBridge.invoke(b, e(c), d)
    }, H.on = function (b, c) {
      a.WeixinJSBridge && WeixinJSBridge.on(b, c)
    })
  }

  var o, p, q, r, s, t, u, v, w, x, y, z, A, B, C, D, E, F, G, H
  if (!a.jWeixin) {
    return o = {
      config: 'preVerifyJSAPI',
      onMenuShareTimeline: 'menu:share:timeline',
      onMenuShareAppMessage: 'menu:share:appmessage',
      onMenuShareQQ: 'menu:share:qq',
      onMenuShareWeibo: 'menu:share:weiboApp',
      onMenuShareQZone: 'menu:share:QZone',
      previewImage: 'imagePreview',
      getLocation: 'geoLocation',
      openProductSpecificView: 'openProductViewWithPid',
      addCard: 'batchAddCard',
      openCard: 'batchViewCard',
      chooseWXPay: 'getBrandWCPayRequest'
    }, p = function () {
      var b, a = {}
      for (b in o) a[o[b]] = b
      return a
    }(), q = a.document, r = q.title, s = navigator.userAgent.toLowerCase(), t = navigator.platform.toLowerCase(), u = !(!t.match('mac') && !t.match('win')), v = -1 != s.indexOf('wxdebugger'), w = -1 != s.indexOf('micromessenger'), x = -1 != s.indexOf('android'), y = -1 != s.indexOf('iphone') || -1 != s.indexOf('ipad'), z = function () {
      var a = s.match(/micromessenger\/(\d+\.\d+\.\d+)/) || s.match(/micromessenger\/(\d+\.\d+)/)
      return a ? a[1] : ''
    }(), A = !1, B = !1, C = {
      initStartTime: l(),
      initEndTime: 0,
      preVerifyStartTime: 0,
      preVerifyEndTime: 0
    }, D = {
      version: 1,
      appId: '',
      initTime: 0,
      preVerifyTime: 0,
      networkType: '',
      preVerifyState: 1,
      systemType: y ? 1 : x ? 2 : -1,
      clientVersion: z,
      url: encodeURIComponent(location.href)
    }, E = {}, F = {_completes: []}, G = {state: 0, data: {}}, m(function () {
      C.initEndTime = l()
    }), H = {
      config: function (a) {
        E = a, j('config', a)
        var b = E.check === !1 ? !1 : !0
        m(function () {
          var a, d, e
          if (b) {
            c(o.config, {verifyJsApiList: i(E.jsApiList)}, function () {
              F._complete = function (a) {
                C.preVerifyEndTime = l(), G.state = 1, G.data = a
              }, F.success = function () {
                D.preVerifyState = 0
              }, F.fail = function (a) {
                F._fail ? F._fail(a) : G.state = -1
              }
              var a = F._completes
              return a.push(function () {
                k()
              }), F.complete = function () {
                for (var c = 0, d = a.length; d > c; ++c) a[c]()
                F._completes = []
              }, F
            }()), C.preVerifyStartTime = l()
          } else {
            for (G.state = 1, a = F._completes, d = 0, e = a.length; e > d; ++d) a[d]()
            F._completes = []
          }
        }), E.beta && n()
      }, ready: function (a) {
        0 != G.state ? a() : (F._completes.push(a), !w && E.debug && a())
      }, error: function (a) {
        '6.0.2' > z || B || (B = !0, -1 == G.state ? a(G.data) : F._fail = a)
      }, checkJsApi: function (a) {
        var b = function (a) {
          var c, d, b = a.checkResult
          for (c in b) d = p[c], d && (b[d] = b[c], delete b[c])
          return a
        }
        c('checkJsApi', {jsApiList: i(a.jsApiList)}, function () {
          return a._complete = function (a) {
            if (x) {
              var c = a.checkResult
              c && (a.checkResult = JSON.parse(c))
            }
            a = b(a)
          }, a
        }())
      }, onMenuShareTimeline: function (a) {
        d(o.onMenuShareTimeline, {
          complete: function () {
            c('shareTimeline', {
              title: a.title || r,
              desc: a.title || r,
              img_url: a.imgUrl || '',
              link: a.link || location.href,
              type: a.type || 'link',
              data_url: a.dataUrl || ''
            }, a)
          }
        }, a)
      }, onMenuShareAppMessage: function (a) {
        d(o.onMenuShareAppMessage, {
          complete: function () {
            c('sendAppMessage', {
              title: a.title || r,
              desc: a.desc || '',
              link: a.link || location.href,
              img_url: a.imgUrl || '',
              type: a.type || 'link',
              data_url: a.dataUrl || ''
            }, a)
          }
        }, a)
      }, onMenuShareQQ: function (a) {
        d(o.onMenuShareQQ, {
          complete: function () {
            c('shareQQ', {
              title: a.title || r,
              desc: a.desc || '',
              img_url: a.imgUrl || '',
              link: a.link || location.href
            }, a)
          }
        }, a)
      }, onMenuShareWeibo: function (a) {
        d(o.onMenuShareWeibo, {
          complete: function () {
            c('shareWeiboApp', {
              title: a.title || r,
              desc: a.desc || '',
              img_url: a.imgUrl || '',
              link: a.link || location.href
            }, a)
          }
        }, a)
      }, onMenuShareQZone: function (a) {
        d(o.onMenuShareQZone, {
          complete: function () {
            c('shareQZone', {
              title: a.title || r,
              desc: a.desc || '',
              img_url: a.imgUrl || '',
              link: a.link || location.href
            }, a)
          }
        }, a)
      }, startRecord: function (a) {
        c('startRecord', {}, a)
      }, stopRecord: function (a) {
        c('stopRecord', {}, a)
      }, onVoiceRecordEnd: function (a) {
        d('onVoiceRecordEnd', a)
      }, playVoice: function (a) {
        c('playVoice', {localId: a.localId}, a)
      }, pauseVoice: function (a) {
        c('pauseVoice', {localId: a.localId}, a)
      }, stopVoice: function (a) {
        c('stopVoice', {localId: a.localId}, a)
      }, onVoicePlayEnd: function (a) {
        d('onVoicePlayEnd', a)
      }, uploadVoice: function (a) {
        c('uploadVoice', {localId: a.localId, isShowProgressTips: 0 == a.isShowProgressTips ? 0 : 1}, a)
      }, downloadVoice: function (a) {
        c('downloadVoice', {serverId: a.serverId, isShowProgressTips: 0 == a.isShowProgressTips ? 0 : 1}, a)
      }, translateVoice: function (a) {
        c('translateVoice', {localId: a.localId, isShowProgressTips: 0 == a.isShowProgressTips ? 0 : 1}, a)
      }, chooseImage: function (a) {
        c('chooseImage', {
          scene: '1|2',
          count: a.count || 9,
          sizeType: a.sizeType || ['original', 'compressed'],
          sourceType: a.sourceType || ['album', 'camera']
        }, function () {
          return a._complete = function (a) {
            if (x) {
              var b = a.localIds
              b && (a.localIds = JSON.parse(b))
            }
          }, a
        }())
      }, previewImage: function (a) {
        c(o.previewImage, {current: a.current, urls: a.urls}, a)
      }, uploadImage: function (a) {
        c('uploadImage', {localId: a.localId, isShowProgressTips: 0 == a.isShowProgressTips ? 0 : 1}, a)
      }, downloadImage: function (a) {
        c('downloadImage', {serverId: a.serverId, isShowProgressTips: 0 == a.isShowProgressTips ? 0 : 1}, a)
      }, getNetworkType: function (a) {
        var b = function (a) {
          var c, d, e, b = a.errMsg
          if (a.errMsg = 'getNetworkType:ok', c = a.subtype, delete a.subtype, c) {
            a.networkType = c
          } else {
            switch (d = b.indexOf(':'), e = b.substring(d + 1)) {
              case'wifi':
              case'edge':
              case'wwan':
                a.networkType = e
                break
              default:
                a.errMsg = 'getNetworkType:fail'
            }
          }
          return a
        }
        c('getNetworkType', {}, function () {
          return a._complete = function (a) {
            a = b(a)
          }, a
        }())
      }, openLocation: function (a) {
        c('openLocation', {
          latitude: a.latitude,
          longitude: a.longitude,
          name: a.name || '',
          address: a.address || '',
          scale: a.scale || 28,
          infoUrl: a.infoUrl || ''
        }, a)
      }, getLocation: function (a) {
        a = a || {}, c(o.getLocation, {type: a.type || 'wgs84'}, function () {
          return a._complete = function (a) {
            delete a.type
          }, a
        }())
      }, hideOptionMenu: function (a) {
        c('hideOptionMenu', {}, a)
      }, showOptionMenu: function (a) {
        c('showOptionMenu', {}, a)
      }, closeWindow: function (a) {
        a = a || {}, c('closeWindow', {}, a)
      }, hideMenuItems: function (a) {
        c('hideMenuItems', {menuList: a.menuList}, a)
      }, showMenuItems: function (a) {
        c('showMenuItems', {menuList: a.menuList}, a)
      }, hideAllNonBaseMenuItem: function (a) {
        c('hideAllNonBaseMenuItem', {}, a)
      }, showAllNonBaseMenuItem: function (a) {
        c('showAllNonBaseMenuItem', {}, a)
      }, scanQRCode: function (a) {
        a = a || {}, c('scanQRCode', {
          needResult: a.needResult || 0,
          scanType: a.scanType || ['qrCode', 'barCode']
        }, function () {
          return a._complete = function (a) {
            var b, c
            y && (b = a.resultStr, b && (c = JSON.parse(b), a.resultStr = c && c.scan_code && c.scan_code.scan_result))
          }, a
        }())
      }, openProductSpecificView: function (a) {
        c(o.openProductSpecificView, {pid: a.productId, view_type: a.viewType || 0, ext_info: a.extInfo}, a)
      }, addCard: function (a) {
        var e, f, g, h, b = a.cardList, d = []
        for (e = 0, f = b.length; f > e; ++e) g = b[e], h = {card_id: g.cardId, card_ext: g.cardExt}, d.push(h)
        c(o.addCard, {card_list: d}, function () {
          return a._complete = function (a) {
            var c, d, e, b = a.card_list
            if (b) {
              for (b = JSON.parse(b), c = 0, d = b.length; d > c; ++c) e = b[c], e.cardId = e.card_id, e.cardExt = e.card_ext, e.isSuccess = e.is_succ ? !0 : !1, delete e.card_id, delete e.card_ext, delete e.is_succ
              a.cardList = b, delete a.card_list
            }
          }, a
        }())
      }, chooseCard: function (a) {
        c('chooseCard', {
          app_id: E.appId,
          location_id: a.shopId || '',
          sign_type: a.signType || 'SHA1',
          card_id: a.cardId || '',
          card_type: a.cardType || '',
          card_sign: a.cardSign,
          time_stamp: a.timestamp + '',
          nonce_str: a.nonceStr
        }, function () {
          return a._complete = function (a) {
            a.cardList = a.choose_card_info, delete a.choose_card_info
          }, a
        }())
      }, openCard: function (a) {
        var e, f, g, h, b = a.cardList, d = []
        for (e = 0, f = b.length; f > e; ++e) g = b[e], h = {card_id: g.cardId, code: g.code}, d.push(h)
        c(o.openCard, {card_list: d}, a)
      }, chooseWXPay: function (a) {
        c(o.chooseWXPay, f(a), a)
      }
    }, b && (a.wx = a.jWeixin = H), H
  }
})/* Zepto 1.2.0 - zepto event ajax form fx fx_methods touch selector detect - zeptojs.com/license */
!function (t, e) {
  'function' == typeof define && define.amd ? define(function () {
    return e(t)
  }) : e(t)
}(window, function (t) {
  var e = function () {
    function L (t) {
      return null == t ? String(t) : S[j.call(t)] || 'object'
    }

    function k (t) {
      return 'function' == L(t)
    }

    function A (t) {
      return null != t && t == t.window
    }

    function $ (t) {
      return null != t && t.nodeType == t.DOCUMENT_NODE
    }

    function F (t) {
      return 'object' == L(t)
    }

    function _ (t) {
      return F(t) && !A(t) && Object.getPrototypeOf(t) == Object.prototype
    }

    function R (t) {
      var e = !!t && 'length' in t && t.length, n = i.type(t)
      return 'function' != n && !A(t) && ('array' == n || 0 === e || 'number' == typeof e && e > 0 && e - 1 in t)
    }

    function Z (t) {
      return a.call(t, function (t) {
        return null != t
      })
    }

    function q (t) {
      return t.length > 0 ? i.fn.concat.apply([], t) : t
    }

    function z (t) {
      return t.replace(/::/g, '/').replace(/([A-Z]+)([A-Z][a-z])/g, '$1_$2').replace(/([a-z\d])([A-Z])/g, '$1_$2').replace(/_/g, '-').toLowerCase()
    }

    function I (t) {
      return t in l ? l[t] : l[t] = new RegExp('(^|\\s)' + t + '(\\s|$)')
    }

    function B (t, e) {
      return 'number' != typeof e || h[z(t)] ? e : e + 'px'
    }

    function V (t) {
      var e, n
      return c[t] || (e = f.createElement(t), f.body.appendChild(e), n = getComputedStyle(e, '').getPropertyValue('display'), e.parentNode.removeChild(e), 'none' == n && (n = 'block'), c[t] = n), c[t]
    }

    function X (t) {
      return 'children' in t ? u.call(t.children) : i.map(t.childNodes, function (t) {
        return 1 == t.nodeType ? t : void 0
      })
    }

    function H (t, e) {
      var n, i = t ? t.length : 0
      for (n = 0; i > n; n++) this[n] = t[n]
      this.length = i, this.selector = e || ''
    }

    function U (t, i, r) {
      for (n in i) r && (_(i[n]) || D(i[n])) ? (_(i[n]) && !_(t[n]) && (t[n] = {}), D(i[n]) && !D(t[n]) && (t[n] = []), U(t[n], i[n], r)) : i[n] !== e && (t[n] = i[n])
    }

    function W (t, e) {
      return null == e ? i(t) : i(t).filter(e)
    }

    function Y (t, e, n, i) {
      return k(e) ? e.call(t, n, i) : e
    }

    function J (t, e, n) {
      null == n ? t.removeAttribute(e) : t.setAttribute(e, n)
    }

    function G (t, n) {
      var i = t.className || '', r = i && i.baseVal !== e
      return n === e ? r ? i.baseVal : i : void (r ? i.baseVal = n : t.className = n)
    }

    function K (t) {
      try {
        return t ? 'true' == t || ('false' == t ? !1 : 'null' == t ? null : +t + '' == t ? +t : /^[\[\{]/.test(t) ? i.parseJSON(t) : t) : t
      } catch (e) {
        return t
      }
    }

    function Q (t, e) {
      e(t)
      for (var n = 0, i = t.childNodes.length; i > n; n++) Q(t.childNodes[n], e)
    }

    var e, n, i, r, C, N, o = [], s = o.concat, a = o.filter, u = o.slice, f = t.document, c = {}, l = {},
      h = {'column-count': 1, columns: 1, 'font-weight': 1, 'line-height': 1, opacity: 1, 'z-index': 1, zoom: 1},
      p = /^\s*<(\w+|!)[^>]*>/, d = /^<(\w+)\s*\/?>(?:<\/\1>|)$/,
      m = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi, g = /^(?:body|html)$/i,
      v = /([A-Z])/g, y = ['val', 'css', 'html', 'text', 'data', 'width', 'height', 'offset'],
      b = ['after', 'prepend', 'before', 'append'], x = f.createElement('table'), w = f.createElement('tr'),
      E = {tr: f.createElement('tbody'), tbody: x, thead: x, tfoot: x, td: w, th: w, '*': f.createElement('div')},
      T = /^[\w-]*$/, S = {}, j = S.toString, P = {}, O = f.createElement('div'), M = {
        tabindex: 'tabIndex',
        readonly: 'readOnly',
        'for': 'htmlFor',
        'class': 'className',
        maxlength: 'maxLength',
        cellspacing: 'cellSpacing',
        cellpadding: 'cellPadding',
        rowspan: 'rowSpan',
        colspan: 'colSpan',
        usemap: 'useMap',
        frameborder: 'frameBorder',
        contenteditable: 'contentEditable'
      }, D = Array.isArray || function (t) {
        return t instanceof Array
      }
    return P.matches = function (t, e) {
      if (!e || !t || 1 !== t.nodeType) return !1
      var n = t.matches || t.webkitMatchesSelector || t.mozMatchesSelector || t.oMatchesSelector || t.matchesSelector
      if (n) return n.call(t, e)
      var i, r = t.parentNode, o = !r
      return o && (r = O).appendChild(t), i = ~P.qsa(r, e).indexOf(t), o && O.removeChild(t), i
    }, C = function (t) {
      return t.replace(/-+(.)?/g, function (t, e) {
        return e ? e.toUpperCase() : ''
      })
    }, N = function (t) {
      return a.call(t, function (e, n) {
        return t.indexOf(e) == n
      })
    }, P.fragment = function (t, n, r) {
      var o, s, a
      return d.test(t) && (o = i(f.createElement(RegExp.$1))), o || (t.replace && (t = t.replace(m, '<$1></$2>')), n === e && (n = p.test(t) && RegExp.$1), n in E || (n = '*'), a = E[n], a.innerHTML = '' + t, o = i.each(u.call(a.childNodes), function () {
        a.removeChild(this)
      })), _(r) && (s = i(o), i.each(r, function (t, e) {
        y.indexOf(t) > -1 ? s[t](e) : s.attr(t, e)
      })), o
    }, P.Z = function (t, e) {
      return new H(t, e)
    }, P.isZ = function (t) {
      return t instanceof P.Z
    }, P.init = function (t, n) {
      var r
      if (!t) return P.Z()
      if ('string' == typeof t) {
        if (t = t.trim(), '<' == t[0] && p.test(t)) {
          r = P.fragment(t, RegExp.$1, n), t = null
        } else {
          if (n !== e) return i(n).find(t)
          r = P.qsa(f, t)
        }
      } else {
        if (k(t)) return i(f).ready(t)
        if (P.isZ(t)) return t
        if (D(t)) {
          r = Z(t)
        } else if (F(t)) {
          r = [t], t = null
        } else if (p.test(t)) {
          r = P.fragment(t.trim(), RegExp.$1, n), t = null
        } else {
          if (n !== e) return i(n).find(t)
          r = P.qsa(f, t)
        }
      }
      return P.Z(r, t)
    }, i = function (t, e) {
      return P.init(t, e)
    }, i.extend = function (t) {
      var e, n = u.call(arguments, 1)
      return 'boolean' == typeof t && (e = t, t = n.shift()), n.forEach(function (n) {
        U(t, n, e)
      }), t
    }, P.qsa = function (t, e) {
      var n, i = '#' == e[0], r = !i && '.' == e[0], o = i || r ? e.slice(1) : e, s = T.test(o)
      return t.getElementById && s && i ? (n = t.getElementById(o)) ? [n] : [] : 1 !== t.nodeType && 9 !== t.nodeType && 11 !== t.nodeType ? [] : u.call(s && !i && t.getElementsByClassName ? r ? t.getElementsByClassName(o) : t.getElementsByTagName(e) : t.querySelectorAll(e))
    }, i.contains = f.documentElement.contains ? function (t, e) {
      return t !== e && t.contains(e)
    } : function (t, e) {
      for (; e && (e = e.parentNode);) if (e === t) return !0
      return !1
    }, i.type = L, i.isFunction = k, i.isWindow = A, i.isArray = D, i.isPlainObject = _, i.isEmptyObject = function (t) {
      var e
      for (e in t) return !1
      return !0
    }, i.isNumeric = function (t) {
      var e = Number(t), n = typeof t
      return null != t && 'boolean' != n && ('string' != n || t.length) && !isNaN(e) && isFinite(e) || !1
    }, i.inArray = function (t, e, n) {
      return o.indexOf.call(e, t, n)
    }, i.camelCase = C, i.trim = function (t) {
      return null == t ? '' : String.prototype.trim.call(t)
    }, i.uuid = 0, i.support = {}, i.expr = {}, i.noop = function () {
    }, i.map = function (t, e) {
      var n, r, o, i = []
      if (R(t)) for (r = 0; r < t.length; r++) n = e(t[r], r), null != n && i.push(n) else for (o in t) n = e(t[o], o), null != n && i.push(n)
      return q(i)
    }, i.each = function (t, e) {
      var n, i
      if (R(t)) {
        for (n = 0; n < t.length; n++) if (e.call(t[n], n, t[n]) === !1) return t
      } else {
        for (i in t) if (e.call(t[i], i, t[i]) === !1) return t
      }
      return t
    }, i.grep = function (t, e) {
      return a.call(t, e)
    }, t.JSON && (i.parseJSON = JSON.parse), i.each('Boolean Number String Function Array Date RegExp Object Error'.split(' '), function (t, e) {
      S['[object ' + e + ']'] = e.toLowerCase()
    }), i.fn = {
      constructor: P.Z,
      length: 0,
      forEach: o.forEach,
      reduce: o.reduce,
      push: o.push,
      sort: o.sort,
      splice: o.splice,
      indexOf: o.indexOf,
      concat: function () {
        var t, e, n = []
        for (t = 0; t < arguments.length; t++) e = arguments[t], n[t] = P.isZ(e) ? e.toArray() : e
        return s.apply(P.isZ(this) ? this.toArray() : this, n)
      },
      map: function (t) {
        return i(i.map(this, function (e, n) {
          return t.call(e, n, e)
        }))
      },
      slice: function () {
        return i(u.apply(this, arguments))
      },
      ready: function (e) {
        if ('complete' === f.readyState || 'loading' !== f.readyState && !f.documentElement.doScroll) {
          setTimeout(function () {
            e(i)
          }, 0)
        } else {
          var n = function () {
            f.removeEventListener('DOMContentLoaded', n, !1), t.removeEventListener('load', n, !1), e(i)
          }
          f.addEventListener('DOMContentLoaded', n, !1), t.addEventListener('load', n, !1)
        }
        return this
      },
      get: function (t) {
        return t === e ? u.call(this) : this[t >= 0 ? t : t + this.length]
      },
      toArray: function () {
        return this.get()
      },
      size: function () {
        return this.length
      },
      remove: function () {
        return this.each(function () {
          null != this.parentNode && this.parentNode.removeChild(this)
        })
      },
      each: function (t) {
        return o.every.call(this, function (e, n) {
          return t.call(e, n, e) !== !1
        }), this
      },
      filter: function (t) {
        return k(t) ? this.not(this.not(t)) : i(a.call(this, function (e) {
          return P.matches(e, t)
        }))
      },
      add: function (t, e) {
        return i(N(this.concat(i(t, e))))
      },
      is: function (t) {
        return 'string' == typeof t ? this.length > 0 && P.matches(this[0], t) : t && this.selector == t.selector
      },
      not: function (t) {
        var n = []
        if (k(t) && t.call !== e) {
          this.each(function (e) {
            t.call(this, e) || n.push(this)
          })
        } else {
          var r = 'string' == typeof t ? this.filter(t) : R(t) && k(t.item) ? u.call(t) : i(t)
          this.forEach(function (t) {
            r.indexOf(t) < 0 && n.push(t)
          })
        }
        return i(n)
      },
      has: function (t) {
        return this.filter(function () {
          return F(t) ? i.contains(this, t) : i(this).find(t).size()
        })
      },
      eq: function (t) {
        return -1 === t ? this.slice(t) : this.slice(t, +t + 1)
      },
      first: function () {
        var t = this[0]
        return t && !F(t) ? t : i(t)
      },
      last: function () {
        var t = this[this.length - 1]
        return t && !F(t) ? t : i(t)
      },
      find: function (t) {
        var e, n = this
        return e = t ? 'object' == typeof t ? i(t).filter(function () {
          var t = this
          return o.some.call(n, function (e) {
            return i.contains(e, t)
          })
        }) : 1 == this.length ? i(P.qsa(this[0], t)) : this.map(function () {
          return P.qsa(this, t)
        }) : i()
      },
      closest: function (t, e) {
        var n = [], r = 'object' == typeof t && i(t)
        return this.each(function (i, o) {
          for (; o && !(r ? r.indexOf(o) >= 0 : P.matches(o, t));) o = o !== e && !$(o) && o.parentNode
          o && n.indexOf(o) < 0 && n.push(o)
        }), i(n)
      },
      parents: function (t) {
        for (var e = [], n = this; n.length > 0;) {
          n = i.map(n, function (t) {
            return (t = t.parentNode) && !$(t) && e.indexOf(t) < 0 ? (e.push(t), t) : void 0
          })
        }
        return W(e, t)
      },
      parent: function (t) {
        return W(N(this.pluck('parentNode')), t)
      },
      children: function (t) {
        return W(this.map(function () {
          return X(this)
        }), t)
      },
      contents: function () {
        return this.map(function () {
          return this.contentDocument || u.call(this.childNodes)
        })
      },
      siblings: function (t) {
        return W(this.map(function (t, e) {
          return a.call(X(e.parentNode), function (t) {
            return t !== e
          })
        }), t)
      },
      empty: function () {
        return this.each(function () {
          this.innerHTML = ''
        })
      },
      pluck: function (t) {
        return i.map(this, function (e) {
          return e[t]
        })
      },
      show: function () {
        return this.each(function () {
          'none' == this.style.display && (this.style.display = ''), 'none' == getComputedStyle(this, '').getPropertyValue('display') && (this.style.display = V(this.nodeName))
        })
      },
      replaceWith: function (t) {
        return this.before(t).remove()
      },
      wrap: function (t) {
        var e = k(t)
        if (this[0] && !e) var n = i(t).get(0), r = n.parentNode || this.length > 1
        return this.each(function (o) {
          i(this).wrapAll(e ? t.call(this, o) : r ? n.cloneNode(!0) : n)
        })
      },
      wrapAll: function (t) {
        if (this[0]) {
          i(this[0]).before(t = i(t))
          for (var e; (e = t.children()).length;) t = e.first()
          i(t).append(this)
        }
        return this
      },
      wrapInner: function (t) {
        var e = k(t)
        return this.each(function (n) {
          var r = i(this), o = r.contents(), s = e ? t.call(this, n) : t
          o.length ? o.wrapAll(s) : r.append(s)
        })
      },
      unwrap: function () {
        return this.parent().each(function () {
          i(this).replaceWith(i(this).children())
        }), this
      },
      clone: function () {
        return this.map(function () {
          return this.cloneNode(!0)
        })
      },
      hide: function () {
        return this.css('display', 'none')
      },
      toggle: function (t) {
        return this.each(function () {
          var n = i(this);
          (t === e ? 'none' == n.css('display') : t) ? n.show() : n.hide()
        })
      },
      prev: function (t) {
        return i(this.pluck('previousElementSibling')).filter(t || '*')
      },
      next: function (t) {
        return i(this.pluck('nextElementSibling')).filter(t || '*')
      },
      html: function (t) {
        return 0 in arguments ? this.each(function (e) {
          var n = this.innerHTML
          i(this).empty().append(Y(this, t, e, n))
        }) : 0 in this ? this[0].innerHTML : null
      },
      text: function (t) {
        return 0 in arguments ? this.each(function (e) {
          var n = Y(this, t, e, this.textContent)
          this.textContent = null == n ? '' : '' + n
        }) : 0 in this ? this.pluck('textContent').join('') : null
      },
      attr: function (t, i) {
        var r
        return 'string' != typeof t || 1 in arguments ? this.each(function (e) {
          if (1 === this.nodeType) if (F(t)) for (n in t) J(this, n, t[n]) else J(this, t, Y(this, i, e, this.getAttribute(t)))
        }) : 0 in this && 1 == this[0].nodeType && null != (r = this[0].getAttribute(t)) ? r : e
      },
      removeAttr: function (t) {
        return this.each(function () {
          1 === this.nodeType && t.split(' ').forEach(function (t) {
            J(this, t)
          }, this)
        })
      },
      prop: function (t, e) {
        return t = M[t] || t, 'string' != typeof t || 1 in arguments ? this.each(function (i) {
          if (F(t)) for (n in t) this[M[n] || n] = t[n] else this[t] = Y(this, e, i, this[t])
        }) : this[0] && this[0][t]
      },
      removeProp: function (t) {
        return t = M[t] || t, this.each(function () {
          delete this[t]
        })
      },
      data: function (t, n) {
        var i = 'data-' + t.replace(v, '-$1').toLowerCase(), r = 1 in arguments ? this.attr(i, n) : this.attr(i)
        return null !== r ? K(r) : e
      },
      val: function (t) {
        return 0 in arguments ? (null == t && (t = ''), this.each(function (e) {
          this.value = Y(this, t, e, this.value)
        })) : this[0] && (this[0].multiple ? i(this[0]).find('option').filter(function () {
          return this.selected
        }).pluck('value') : this[0].value)
      },
      offset: function (e) {
        if (e) {
          return this.each(function (t) {
            var n = i(this), r = Y(this, e, t, n.offset()), o = n.offsetParent().offset(),
              s = {top: r.top - o.top, left: r.left - o.left}
            'static' == n.css('position') && (s.position = 'relative'), n.css(s)
          })
        }
        if (!this.length) return null
        if (f.documentElement !== this[0] && !i.contains(f.documentElement, this[0])) return {top: 0, left: 0}
        var n = this[0].getBoundingClientRect()
        return {
          left: n.left + t.pageXOffset,
          top: n.top + t.pageYOffset,
          width: Math.round(n.width),
          height: Math.round(n.height)
        }
      },
      css: function (t, e) {
        if (arguments.length < 2) {
          var r = this[0]
          if ('string' == typeof t) {
            if (!r) return
            return r.style[C(t)] || getComputedStyle(r, '').getPropertyValue(t)
          }
          if (D(t)) {
            if (!r) return
            var o = {}, s = getComputedStyle(r, '')
            return i.each(t, function (t, e) {
              o[e] = r.style[C(e)] || s.getPropertyValue(e)
            }), o
          }
        }
        var a = ''
        if ('string' == L(t)) {
          e || 0 === e ? a = z(t) + ':' + B(t, e) : this.each(function () {
            this.style.removeProperty(z(t))
          })
        } else {
          for (n in t) {
            t[n] || 0 === t[n] ? a += z(n) + ':' + B(n, t[n]) + ';' : this.each(function () {
              this.style.removeProperty(z(n))
            })
          }
        }
        return this.each(function () {
          this.style.cssText += ';' + a
        })
      },
      index: function (t) {
        return t ? this.indexOf(i(t)[0]) : this.parent().children().indexOf(this[0])
      },
      hasClass: function (t) {
        return t ? o.some.call(this, function (t) {
          return this.test(G(t))
        }, I(t)) : !1
      },
      addClass: function (t) {
        return t ? this.each(function (e) {
          if ('className' in this) {
            r = []
            var n = G(this), o = Y(this, t, e, n)
            o.split(/\s+/g).forEach(function (t) {
              i(this).hasClass(t) || r.push(t)
            }, this), r.length && G(this, n + (n ? ' ' : '') + r.join(' '))
          }
        }) : this
      },
      removeClass: function (t) {
        return this.each(function (n) {
          if ('className' in this) {
            if (t === e) return G(this, '')
            r = G(this), Y(this, t, n, r).split(/\s+/g).forEach(function (t) {
              r = r.replace(I(t), ' ')
            }), G(this, r.trim())
          }
        })
      },
      toggleClass: function (t, n) {
        return t ? this.each(function (r) {
          var o = i(this), s = Y(this, t, r, G(this))
          s.split(/\s+/g).forEach(function (t) {
            (n === e ? !o.hasClass(t) : n) ? o.addClass(t) : o.removeClass(t)
          })
        }) : this
      },
      scrollTop: function (t) {
        if (this.length) {
          var n = 'scrollTop' in this[0]
          return t === e ? n ? this[0].scrollTop : this[0].pageYOffset : this.each(n ? function () {
            this.scrollTop = t
          } : function () {
            this.scrollTo(this.scrollX, t)
          })
        }
      },
      scrollLeft: function (t) {
        if (this.length) {
          var n = 'scrollLeft' in this[0]
          return t === e ? n ? this[0].scrollLeft : this[0].pageXOffset : this.each(n ? function () {
            this.scrollLeft = t
          } : function () {
            this.scrollTo(t, this.scrollY)
          })
        }
      },
      position: function () {
        if (this.length) {
          var t = this[0], e = this.offsetParent(), n = this.offset(),
            r = g.test(e[0].nodeName) ? {top: 0, left: 0} : e.offset()
          return n.top -= parseFloat(i(t).css('margin-top')) || 0, n.left -= parseFloat(i(t).css('margin-left')) || 0, r.top += parseFloat(i(e[0]).css('border-top-width')) || 0, r.left += parseFloat(i(e[0]).css('border-left-width')) || 0, {
            top: n.top - r.top,
            left: n.left - r.left
          }
        }
      },
      offsetParent: function () {
        return this.map(function () {
          for (var t = this.offsetParent || f.body; t && !g.test(t.nodeName) && "static" == i(t).css("position");) t = t.offsetParent
          return t
        })
      }
    }, i.fn.detach = i.fn.remove, ['width', 'height'].forEach(function (t) {
      var n = t.replace(/./, function (t) {
        return t[0].toUpperCase()
      })
      i.fn[t] = function (r) {
        var o, s = this[0]
        return r === e ? A(s) ? s['inner' + n] : $(s) ? s.documentElement['scroll' + n] : (o = this.offset()) && o[t] : this.each(function (e) {
          s = i(this), s.css(t, Y(this, r, e, s[t]()))
        })
      }
    }), b.forEach(function (n, r) {
      var o = r % 2
      i.fn[n] = function () {
        var n, a, s = i.map(arguments, function (t) {
          var r = []
          return n = L(t), 'array' == n ? (t.forEach(function (t) {
            return t.nodeType !== e ? r.push(t) : i.zepto.isZ(t) ? r = r.concat(t.get()) : void (r = r.concat(P.fragment(t)))
          }), r) : 'object' == n || null == t ? t : P.fragment(t)
        }), u = this.length > 1
        return s.length < 1 ? this : this.each(function (e, n) {
          a = o ? n : n.parentNode, n = 0 == r ? n.nextSibling : 1 == r ? n.firstChild : 2 == r ? n : null
          var c = i.contains(f.documentElement, a)
          s.forEach(function (e) {
            if (u) e = e.cloneNode(!0) else if (!a) return i(e).remove()
            a.insertBefore(e, n), c && Q(e, function (e) {
              if (!(null == e.nodeName || 'SCRIPT' !== e.nodeName.toUpperCase() || e.type && 'text/javascript' !== e.type || e.src)) {
                var n = e.ownerDocument ? e.ownerDocument.defaultView : t
                n.eval.call(n, e.innerHTML)
              }
            })
          })
        })
      }, i.fn[o ? n + 'To' : 'insert' + (r ? 'Before' : 'After')] = function (t) {
        return i(t)[n](this), this
      }
    }), P.Z.prototype = H.prototype = i.fn, P.uniq = N, P.deserializeValue = K, i.zepto = P, i
  }()
  return t.Zepto = e, void 0 === t.$ && (t.$ = e), function (e) {
    function h (t) {
      return t._zid || (t._zid = n++)
    }

    function p (t, e, n, i) {
      if (e = d(e), e.ns) var r = m(e.ns)
      return (a[h(t)] || []).filter(function (t) {
        return t && (!e.e || t.e == e.e) && (!e.ns || r.test(t.ns)) && (!n || h(t.fn) === h(n)) && (!i || t.sel == i)
      })
    }

    function d (t) {
      var e = ('' + t).split('.')
      return {e: e[0], ns: e.slice(1).sort().join(' ')}
    }

    function m (t) {
      return new RegExp('(?:^| )' + t.replace(' ', ' .* ?') + '(?: |$)')
    }

    function g (t, e) {
      return t.del && !f && t.e in c || !!e
    }

    function v (t) {
      return l[t] || f && c[t] || t
    }

    function y (t, n, r, o, s, u, f) {
      var c = h(t), p = a[c] || (a[c] = [])
      n.split(/\s/).forEach(function (n) {
        if ('ready' == n) return e(document).ready(r)
        var a = d(n)
        a.fn = r, a.sel = s, a.e in l && (r = function (t) {
          var n = t.relatedTarget
          return !n || n !== this && !e.contains(this, n) ? a.fn.apply(this, arguments) : void 0
        }), a.del = u
        var c = u || r
        a.proxy = function (e) {
          if (e = S(e), !e.isImmediatePropagationStopped()) {
            e.data = o
            var n = c.apply(t, e._args == i ? [e] : [e].concat(e._args))
            return n === !1 && (e.preventDefault(), e.stopPropagation()), n
          }
        }, a.i = p.length, p.push(a), 'addEventListener' in t && t.addEventListener(v(a.e), a.proxy, g(a, f))
      })
    }

    function b (t, e, n, i, r) {
      var o = h(t);
      (e || '').split(/\s/).forEach(function (e) {
        p(t, e, n, i).forEach(function (e) {
          delete a[o][e.i], 'removeEventListener' in t && t.removeEventListener(v(e.e), e.proxy, g(e, r))
        })
      })
    }

    function S (t, n) {
      if (n || !t.isDefaultPrevented) {
        n || (n = t), e.each(T, function (e, i) {
          var r = n[e]
          t[e] = function () {
            return this[i] = x, r && r.apply(n, arguments)
          }, t[i] = w
        })
        try {
          t.timeStamp || (t.timeStamp = Date.now())
        } catch (r) {
        }
        (n.defaultPrevented !== i ? n.defaultPrevented : 'returnValue' in n ? n.returnValue === !1 : n.getPreventDefault && n.getPreventDefault()) && (t.isDefaultPrevented = x)
      }
      return t
    }

    function j (t) {
      var e, n = {originalEvent: t}
      for (e in t) E.test(e) || t[e] === i || (n[e] = t[e])
      return S(n, t)
    }

    var i, n = 1, r = Array.prototype.slice, o = e.isFunction, s = function (t) {
        return 'string' == typeof t
      }, a = {}, u = {}, f = 'onfocusin' in t, c = {focus: 'focusin', blur: 'focusout'},
      l = {mouseenter: 'mouseover', mouseleave: 'mouseout'}
    u.click = u.mousedown = u.mouseup = u.mousemove = 'MouseEvents', e.event = {
      add: y,
      remove: b
    }, e.proxy = function (t, n) {
      var i = 2 in arguments && r.call(arguments, 2)
      if (o(t)) {
        var a = function () {
          return t.apply(n, i ? i.concat(r.call(arguments)) : arguments)
        }
        return a._zid = h(t), a
      }
      if (s(n)) return i ? (i.unshift(t[n], t), e.proxy.apply(null, i)) : e.proxy(t[n], t)
      throw new TypeError('expected function')
    }, e.fn.bind = function (t, e, n) {
      return this.on(t, e, n)
    }, e.fn.unbind = function (t, e) {
      return this.off(t, e)
    }, e.fn.one = function (t, e, n, i) {
      return this.on(t, e, n, i, 1)
    }
    var x = function () {
      return !0
    }, w = function () {
      return !1
    }, E = /^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/, T = {
      preventDefault: 'isDefaultPrevented',
      stopImmediatePropagation: 'isImmediatePropagationStopped',
      stopPropagation: 'isPropagationStopped'
    }
    e.fn.delegate = function (t, e, n) {
      return this.on(e, t, n)
    }, e.fn.undelegate = function (t, e, n) {
      return this.off(e, t, n)
    }, e.fn.live = function (t, n) {
      return e(document.body).delegate(this.selector, t, n), this
    }, e.fn.die = function (t, n) {
      return e(document.body).undelegate(this.selector, t, n), this
    }, e.fn.on = function (t, n, a, u, f) {
      var c, l, h = this
      return t && !s(t) ? (e.each(t, function (t, e) {
        h.on(t, n, a, e, f)
      }), h) : (s(n) || o(u) || u === !1 || (u = a, a = n, n = i), (u === i || a === !1) && (u = a, a = i), u === !1 && (u = w), h.each(function (i, o) {
        f && (c = function (t) {
          return b(o, t.type, u), u.apply(this, arguments)
        }), n && (l = function (t) {
          var i, s = e(t.target).closest(n, o).get(0)
          return s && s !== o ? (i = e.extend(j(t), {
            currentTarget: s,
            liveFired: o
          }), (c || u).apply(s, [i].concat(r.call(arguments, 1)))) : void 0
        }), y(o, t, u, a, n, l || c)
      }))
    }, e.fn.off = function (t, n, r) {
      var a = this
      return t && !s(t) ? (e.each(t, function (t, e) {
        a.off(t, n, e)
      }), a) : (s(n) || o(r) || r === !1 || (r = n, n = i), r === !1 && (r = w), a.each(function () {
        b(this, t, r, n)
      }))
    }, e.fn.trigger = function (t, n) {
      return t = s(t) || e.isPlainObject(t) ? e.Event(t) : S(t), t._args = n, this.each(function () {
        t.type in c && 'function' == typeof this[t.type] ? this[t.type]() : 'dispatchEvent' in this ? this.dispatchEvent(t) : e(this).triggerHandler(t, n)
      })
    }, e.fn.triggerHandler = function (t, n) {
      var i, r
      return this.each(function (o, a) {
        i = j(s(t) ? e.Event(t) : t), i._args = n, i.target = a, e.each(p(a, t.type || t), function (t, e) {
          return r = e.proxy(i), i.isImmediatePropagationStopped() ? !1 : void 0
        })
      }), r
    }, 'focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error'.split(' ').forEach(function (t) {
      e.fn[t] = function (e) {
        return 0 in arguments ? this.bind(t, e) : this.trigger(t)
      }
    }), e.Event = function (t, e) {
      s(t) || (e = t, t = e.type)
      var n = document.createEvent(u[t] || 'Events'), i = !0
      if (e) for (var r in e) 'bubbles' == r ? i = !!e[r] : n[r] = e[r]
      return n.initEvent(t, i, !0), S(n)
    }
  }(e), function (e) {
    function p (t, n, i) {
      var r = e.Event(n)
      return e(t).trigger(r, i), !r.isDefaultPrevented()
    }

    function d (t, e, n, r) {
      return t.global ? p(e || i, n, r) : void 0
    }

    function m (t) {
      t.global && 0 === e.active++ && d(t, null, 'ajaxStart')
    }

    function g (t) {
      t.global && !--e.active && d(t, null, 'ajaxStop')
    }

    function v (t, e) {
      var n = e.context
      return e.beforeSend.call(n, t, e) === !1 || d(e, n, 'ajaxBeforeSend', [t, e]) === !1 ? !1 : void d(e, n, 'ajaxSend', [t, e])
    }

    function y (t, e, n, i) {
      var r = n.context, o = 'success'
      n.success.call(r, t, o, e), i && i.resolveWith(r, [t, o, e]), d(n, r, 'ajaxSuccess', [e, n, t]), x(o, e, n)
    }

    function b (t, e, n, i, r) {
      var o = i.context
      i.error.call(o, n, e, t), r && r.rejectWith(o, [n, e, t]), d(i, o, 'ajaxError', [n, i, t || e]), x(e, n, i)
    }

    function x (t, e, n) {
      var i = n.context
      n.complete.call(i, e, t), d(n, i, 'ajaxComplete', [e, n]), g(n)
    }

    function w (t, e, n) {
      if (n.dataFilter == E) return t
      var i = n.context
      return n.dataFilter.call(i, t, e)
    }

    function E () {
    }

    function T (t) {
      return t && (t = t.split(';', 2)[0]), t && (t == c ? 'html' : t == f ? 'json' : a.test(t) ? 'script' : u.test(t) && 'xml') || 'text'
    }

    function S (t, e) {
      return '' == e ? t : (t + '&' + e).replace(/[&?]{1,2}/, '?')
    }

    function j (t) {
      t.processData && t.data && 'string' != e.type(t.data) && (t.data = e.param(t.data, t.traditional)), !t.data || t.type && 'GET' != t.type.toUpperCase() && 'jsonp' != t.dataType || (t.url = S(t.url, t.data), t.data = void 0)
    }

    function P (t, n, i, r) {
      return e.isFunction(n) && (r = i, i = n, n = void 0), e.isFunction(i) || (r = i, i = void 0), {
        url: t,
        data: n,
        success: i,
        dataType: r
      }
    }

    function N (t, n, i, r) {
      var o, s = e.isArray(n), a = e.isPlainObject(n)
      e.each(n, function (n, u) {
        o = e.type(u), r && (n = i ? r : r + '[' + (a || 'object' == o || 'array' == o ? n : '') + ']'), !r && s ? t.add(u.name, u.value) : 'array' == o || !i && 'object' == o ? N(t, u, i, n) : t.add(n, u)
      })
    }

    var r, o, n = +new Date, i = t.document, s = /<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,
      a = /^(?:text|application)\/javascript/i, u = /^(?:text|application)\/xml/i, f = 'application/json',
      c = 'text/html', l = /^\s*$/, h = i.createElement('a')
    h.href = t.location.href, e.active = 0, e.ajaxJSONP = function (r, o) {
      if (!('type' in r)) return e.ajax(r)
      var c, p, s = r.jsonpCallback, a = (e.isFunction(s) ? s() : s) || 'Zepto' + n++, u = i.createElement('script'),
        f = t[a], l = function (t) {
          e(u).triggerHandler('error', t || 'abort')
        }, h = {abort: l}
      return o && o.promise(h), e(u).on('load error', function (n, i) {
        clearTimeout(p), e(u).off().remove(), 'error' != n.type && c ? y(c[0], h, r, o) : b(null, i || 'error', h, r, o), t[a] = f, c && e.isFunction(f) && f(c[0]), f = c = void 0
      }), v(h, r) === !1 ? (l('abort'), h) : (t[a] = function () {
        c = arguments
      }, u.src = r.url.replace(/\?(.+)=\?/, '?$1=' + a), i.head.appendChild(u), r.timeout > 0 && (p = setTimeout(function () {
        l('timeout')
      }, r.timeout)), h)
    }, e.ajaxSettings = {
      type: 'GET',
      beforeSend: E,
      success: E,
      error: E,
      complete: E,
      context: null,
      global: !0,
      xhr: function () {
        return new t.XMLHttpRequest
      },
      accepts: {
        script: 'text/javascript, application/javascript, application/x-javascript',
        json: f,
        xml: 'application/xml, text/xml',
        html: c,
        text: 'text/plain'
      },
      crossDomain: !1,
      timeout: 0,
      processData: !0,
      cache: !0,
      dataFilter: E
    }, e.ajax = function (n) {
      var u, f, s = e.extend({}, n || {}), a = e.Deferred && e.Deferred()
      for (r in e.ajaxSettings) void 0 === s[r] && (s[r] = e.ajaxSettings[r])
      m(s), s.crossDomain || (u = i.createElement('a'), u.href = s.url, u.href = u.href, s.crossDomain = h.protocol + '//' + h.host != u.protocol + '//' + u.host), s.url || (s.url = t.location.toString()), (f = s.url.indexOf('#')) > -1 && (s.url = s.url.slice(0, f)), j(s)
      var c = s.dataType, p = /\?.+=\?/.test(s.url)
      if (p && (c = 'jsonp'), s.cache !== !1 && (n && n.cache === !0 || 'script' != c && 'jsonp' != c) || (s.url = S(s.url, '_=' + Date.now())), 'jsonp' == c) return p || (s.url = S(s.url, s.jsonp ? s.jsonp + '=?' : s.jsonp === !1 ? '' : 'callback=?')), e.ajaxJSONP(s, a)
      var O, d = s.accepts[c], g = {}, x = function (t, e) {
        g[t.toLowerCase()] = [t, e]
      }, P = /^([\w-]+:)\/\//.test(s.url) ? RegExp.$1 : t.location.protocol, C = s.xhr(), N = C.setRequestHeader
      if (a && a.promise(C), s.crossDomain || x('X-Requested-With', 'XMLHttpRequest'), x('Accept', d || '*/*'), (d = s.mimeType || d) && (d.indexOf(',') > -1 && (d = d.split(',', 2)[0]), C.overrideMimeType && C.overrideMimeType(d)), (s.contentType || s.contentType !== !1 && s.data && 'GET' != s.type.toUpperCase()) && x('Content-Type', s.contentType || 'application/x-www-form-urlencoded'), s.headers) for (o in s.headers) x(o, s.headers[o])
      if (C.setRequestHeader = x, C.onreadystatechange = function () {
        if (4 == C.readyState) {
          C.onreadystatechange = E, clearTimeout(O)
          var t, n = !1
          if (C.status >= 200 && C.status < 300 || 304 == C.status || 0 == C.status && 'file:' == P) {
            if (c = c || T(s.mimeType || C.getResponseHeader('content-type')), 'arraybuffer' == C.responseType || 'blob' == C.responseType) {
              t = C.response
            } else {
              t = C.responseText
              try {
                t = w(t, c, s), 'script' == c ? (1, eval)(t) : 'xml' == c ? t = C.responseXML : 'json' == c && (t = l.test(t) ? null : e.parseJSON(t))
              } catch (i) {
                n = i
              }
              if (n) return b(n, 'parsererror', C, s, a)
            }
            y(t, C, s, a)
          } else {
            b(C.statusText || null, C.status ? 'error' : 'abort', C, s, a)
          }
        }
      }, v(C, s) === !1) {
        return C.abort(), b(null, 'abort', C, s, a), C
      }
      var M = 'async' in s ? s.async : !0
      if (C.open(s.type, s.url, M, s.username, s.password), s.xhrFields) for (o in s.xhrFields) C[o] = s.xhrFields[o]
      for (o in g) N.apply(C, g[o])
      return s.timeout > 0 && (O = setTimeout(function () {
        C.onreadystatechange = E, C.abort(), b(null, 'timeout', C, s, a)
      }, s.timeout)), C.send(s.data ? s.data : null), C
    }, e.get = function () {
      return e.ajax(P.apply(null, arguments))
    }, e.post = function () {
      var t = P.apply(null, arguments)
      return t.type = 'POST', e.ajax(t)
    }, e.getJSON = function () {
      var t = P.apply(null, arguments)
      return t.dataType = 'json', e.ajax(t)
    }, e.fn.load = function (t, n, i) {
      if (!this.length) return this
      var a, r = this, o = t.split(/\s/), u = P(t, n, i), f = u.success
      return o.length > 1 && (u.url = o[0], a = o[1]), u.success = function (t) {
        r.html(a ? e('<div>').html(t.replace(s, '')).find(a) : t), f && f.apply(r, arguments)
      }, e.ajax(u), this
    }
    var C = encodeURIComponent
    e.param = function (t, n) {
      var i = []
      return i.add = function (t, n) {
        e.isFunction(n) && (n = n()), null == n && (n = ''), this.push(C(t) + '=' + C(n))
      }, N(i, t, n), i.join('&').replace(/%20/g, '+')
    }
  }(e), function (t) {
    t.fn.serializeArray = function () {
      var e, n, i = [], r = function (t) {
        return t.forEach ? t.forEach(r) : void i.push({name: e, value: t})
      }
      return this[0] && t.each(this[0].elements, function (i, o) {
        n = o.type, e = o.name, e && 'fieldset' != o.nodeName.toLowerCase() && !o.disabled && 'submit' != n && 'reset' != n && 'button' != n && 'file' != n && ('radio' != n && 'checkbox' != n || o.checked) && r(t(o).val())
      }), i
    }, t.fn.serialize = function () {
      var t = []
      return this.serializeArray().forEach(function (e) {
        t.push(encodeURIComponent(e.name) + '=' + encodeURIComponent(e.value))
      }), t.join('&')
    }, t.fn.submit = function (e) {
      if (0 in arguments) {
        this.bind('submit', e)
      } else if (this.length) {
        var n = t.Event('submit')
        this.eq(0).trigger(n), n.isDefaultPrevented() || this.get(0).submit()
      }
      return this
    }
  }(e), function (t, e) {
    function v (t) {
      return t.replace(/([A-Z])/g, '-$1').toLowerCase()
    }

    function y (t) {
      return i ? i + t : t.toLowerCase()
    }

    var i, a, u, f, c, l, h, p, d, m, n = '', r = {Webkit: 'webkit', Moz: '', O: 'o'},
      o = document.createElement('div'),
      s = /^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i, g = {}
    o.style.transform === e && t.each(r, function (t, r) {
      return o.style[t + 'TransitionProperty'] !== e ? (n = '-' + t.toLowerCase() + '-', i = r, !1) : void 0
    }), a = n + 'transform', g[u = n + 'transition-property'] = g[f = n + 'transition-duration'] = g[l = n + 'transition-delay'] = g[c = n + 'transition-timing-function'] = g[h = n + 'animation-name'] = g[p = n + 'animation-duration'] = g[m = n + 'animation-delay'] = g[d = n + 'animation-timing-function'] = '', t.fx = {
      off: i === e && o.style.transitionProperty === e,
      speeds: {_default: 400, fast: 200, slow: 600},
      cssPrefix: n,
      transitionEnd: y('TransitionEnd'),
      animationEnd: y('AnimationEnd')
    }, t.fn.animate = function (n, i, r, o, s) {
      return t.isFunction(i) && (o = i, r = e, i = e), t.isFunction(r) && (o = r, r = e), t.isPlainObject(i) && (r = i.easing, o = i.complete, s = i.delay, i = i.duration), i && (i = ('number' == typeof i ? i : t.fx.speeds[i] || t.fx.speeds._default) / 1e3), s && (s = parseFloat(s) / 1e3), this.anim(n, i, r, o, s)
    }, t.fn.anim = function (n, i, r, o, y) {
      var b, w, S, x = {}, E = '', T = this, j = t.fx.transitionEnd, P = !1
      if (i === e && (i = t.fx.speeds._default / 1e3), y === e && (y = 0), t.fx.off && (i = 0), 'string' == typeof n) {
        x[h] = n, x[p] = i + 's', x[m] = y + 's', x[d] = r || 'linear', j = t.fx.animationEnd
      } else {
        w = []
        for (b in n) s.test(b) ? E += b + '(' + n[b] + ') ' : (x[b] = n[b], w.push(v(b)))
        E && (x[a] = E, w.push(a)), i > 0 && 'object' == typeof n && (x[u] = w.join(', '), x[f] = i + 's', x[l] = y + 's', x[c] = r || 'linear')
      }
      return S = function (e) {
        if ('undefined' != typeof e) {
          if (e.target !== e.currentTarget) return
          t(e.target).unbind(j, S)
        } else {
          t(this).unbind(j, S)
        }
        P = !0, t(this).css(g), o && o.call(this)
      }, i > 0 && (this.bind(j, S), setTimeout(function () {
        P || S.call(T)
      }, 1e3 * (i + y) + 25)), this.size() && this.get(0).clientLeft, this.css(x), 0 >= i && setTimeout(function () {
        T.each(function () {
          S.call(this)
        })
      }, 0), this
    }, o = null
  }(e), function (e, n) {
    function a (t, i, r, o, s) {
      'function' != typeof i || s || (s = i, i = n)
      var a = {opacity: r}
      return o && (a.scale = o, t.css(e.fx.cssPrefix + 'transform-origin', '0 0')), t.animate(a, i, null, s)
    }

    function u (t, n, i, r) {
      return a(t, n, 0, i, function () {
        o.call(e(this)), r && r.call(this)
      })
    }

    var r = (t.document, e.fn.show), o = e.fn.hide, s = e.fn.toggle
    e.fn.show = function (t, e) {
      return r.call(this), t === n ? t = 0 : this.css('opacity', 0), a(this, t, 1, '1,1', e)
    }, e.fn.hide = function (t, e) {
      return t === n ? o.call(this) : u(this, t, '0,0', e)
    }, e.fn.toggle = function (t, i) {
      return t === n || 'boolean' == typeof t ? s.call(this, t) : this.each(function () {
        var n = e(this)
        n['none' == n.css('display') ? 'show' : 'hide'](t, i)
      })
    }, e.fn.fadeTo = function (t, e, n) {
      return a(this, t, e, null, n)
    }, e.fn.fadeIn = function (t, e) {
      var n = this.css('opacity')
      return n > 0 ? this.css('opacity', 0) : n = 1, r.call(this).fadeTo(t, n, e)
    }, e.fn.fadeOut = function (t, e) {
      return u(this, t, null, e)
    }, e.fn.fadeToggle = function (t, n) {
      return this.each(function () {
        var i = e(this)
        i[0 == i.css('opacity') || 'none' == i.css('display') ? 'fadeIn' : 'fadeOut'](t, n)
      })
    }
  }(e), function (e) {
    function d (t, e, n, i) {
      return Math.abs(t - e) >= Math.abs(n - i) ? t - e > 0 ? 'Left' : 'Right' : n - i > 0 ? 'Up' : 'Down'
    }

    function m () {
      s = null, n.last && (n.el.trigger('longTap'), n = {})
    }

    function g () {
      s && clearTimeout(s), s = null
    }

    function v () {
      i && clearTimeout(i), r && clearTimeout(r), o && clearTimeout(o), s && clearTimeout(s), i = r = o = s = null, n = {}
    }

    function y (t) {
      return ('touch' == t.pointerType || t.pointerType == t.MSPOINTER_TYPE_TOUCH) && t.isPrimary
    }

    function b (t, e) {
      return t.type == 'pointer' + e || t.type.toLowerCase() == 'mspointer' + e
    }

    function x () {
      p && (e(document).off(h.down, f).off(h.up, c).off(h.move, l).off(h.cancel, v), e(t).off('scroll', v), v(), p = !1)
    }

    function w (w) {
      var E, T, P, C, S = 0, j = 0
      x(), h = w && 'down' in w ? w : 'ontouchstart' in document ? {
        down: 'touchstart',
        up: 'touchend',
        move: 'touchmove',
        cancel: 'touchcancel'
      } : 'onpointerdown' in document ? {
        down: 'pointerdown',
        up: 'pointerup',
        move: 'pointermove',
        cancel: 'pointercancel'
      } : 'onmspointerdown' in document ? {
        down: 'MSPointerDown',
        up: 'MSPointerUp',
        move: 'MSPointerMove',
        cancel: 'MSPointerCancel'
      } : !1, h && ('MSGesture' in t && (u = new MSGesture, u.target = document.body, e(document).bind('MSGestureEnd', function (t) {
        var e = t.velocityX > 1 ? 'Right' : t.velocityX < -1 ? 'Left' : t.velocityY > 1 ? 'Down' : t.velocityY < -1 ? 'Up' : null
        e && (n.el.trigger('swipe'), n.el.trigger('swipe' + e))
      })), f = function (t) {
        (!(C = b(t, 'down')) || y(t)) && (P = C ? t : t.touches[0], t.touches && 1 === t.touches.length && n.x2 && (n.x2 = void 0, n.y2 = void 0), E = Date.now(), T = E - (n.last || E), n.el = e('tagName' in P.target ? P.target : P.target.parentNode), i && clearTimeout(i), n.x1 = P.pageX, n.y1 = P.pageY, T > 0 && 250 >= T && (n.isDoubleTap = !0), n.last = E, s = setTimeout(m, a), u && C && u.addPointer(t.pointerId))
      }, l = function (t) {
        (!(C = b(t, 'move')) || y(t)) && (P = C ? t : t.touches[0], g(), n.x2 = P.pageX, n.y2 = P.pageY, S += Math.abs(n.x1 - n.x2), j += Math.abs(n.y1 - n.y2))
      }, c = function (t) {
        (!(C = b(t, 'up')) || y(t)) && (g(), n.x2 && Math.abs(n.x1 - n.x2) > 30 || n.y2 && Math.abs(n.y1 - n.y2) > 30 ? o = setTimeout(function () {
          n.el && (n.el.trigger('swipe'), n.el.trigger('swipe' + d(n.x1, n.x2, n.y1, n.y2))), n = {}
        }, 0) : 'last' in n && (30 > S && 30 > j ? r = setTimeout(function () {
          var t = e.Event('tap')
          t.cancelTouch = v, n.el && n.el.trigger(t), n.isDoubleTap ? (n.el && n.el.trigger('doubleTap'), n = {}) : i = setTimeout(function () {
            i = null, n.el && n.el.trigger('singleTap'), n = {}
          }, 250)
        }, 0) : n = {}), S = j = 0)
      }, e(document).on(h.up, c).on(h.down, f).on(h.move, l), e(document).on(h.cancel, v), e(t).on('scroll', v), p = !0)
    }

    var i, r, o, s, u, f, c, l, h, n = {}, a = 750, p = !1;
    ['swipe', 'swipeLeft', 'swipeRight', 'swipeUp', 'swipeDown', 'doubleTap', 'tap', 'singleTap', 'longTap'].forEach(function (t) {
      e.fn[t] = function (e) {
        return this.on(t, e)
      }
    }), e.touch = {setup: w}, e(document).ready(w)
  }(e), function (t) {
    function r (e) {
      return e = t(e), !(!e.width() && !e.height()) && 'none' !== e.css('display')
    }

    function f (t, e) {
      t = t.replace(/=#\]/g, '="#"]')
      var n, i, r = s.exec(t)
      if (r && r[2] in o && (n = o[r[2]], i = r[3], t = r[1], i)) {
        var a = Number(i)
        i = isNaN(a) ? i.replace(/^["']|["']$/g, '') : a
      }
      return e(t, n, i)
    }

    var e = t.zepto, n = e.qsa, i = e.matches, o = t.expr[':'] = {
      visible: function () {
        return r(this) ? this : void 0
      }, hidden: function () {
        return r(this) ? void 0 : this
      }, selected: function () {
        return this.selected ? this : void 0
      }, checked: function () {
        return this.checked ? this : void 0
      }, parent: function () {
        return this.parentNode
      }, first: function (t) {
        return 0 === t ? this : void 0
      }, last: function (t, e) {
        return t === e.length - 1 ? this : void 0
      }, eq: function (t, e, n) {
        return t === n ? this : void 0
      }, contains: function (e, n, i) {
        return t(this).text().indexOf(i) > -1 ? this : void 0
      }, has: function (t, n, i) {
        return e.qsa(this, i).length ? this : void 0
      }
    }, s = new RegExp('(.*):(\\w+)(?:\\(([^)]+)\\))?$\\s*'), a = /^\s*>/, u = 'Zepto' + +new Date
    e.qsa = function (i, r) {
      return f(r, function (o, s, f) {
        try {
          var c
          !o && s ? o = '*' : a.test(o) && (c = t(i).addClass(u), o = '.' + u + ' ' + o)
          var l = n(i, o)
        } catch (h) {
          throw console.error('error performing selector: %o', r), h
        } finally {
          c && c.removeClass(u)
        }
        return s ? e.uniq(t.map(l, function (t, e) {
          return s.call(t, e, l, f)
        })) : l
      })
    }, e.matches = function (t, e) {
      return f(e, function (e, n, r) {
        return (!e || i(t, e)) && (!n || n.call(t, null, r) === t)
      })
    }
  }(e), function (t) {
    function e (t, e) {
      var n = this.os = {}, i = this.browser = {}, r = t.match(/Web[kK]it[\/]{0,1}([\d.]+)/),
        o = t.match(/(Android);?[\s\/]+([\d.]+)?/), s = !!t.match(/\(Macintosh\; Intel /),
        a = t.match(/(iPad).*OS\s([\d_]+)/), u = t.match(/(iPod)(.*OS\s([\d_]+))?/),
        f = !a && t.match(/(iPhone\sOS)\s([\d_]+)/), c = t.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),
        l = /Win\d{2}|Windows/.test(e), h = t.match(/Windows Phone ([\d.]+)/), p = c && t.match(/TouchPad/),
        d = t.match(/Kindle\/([\d.]+)/), m = t.match(/Silk\/([\d._]+)/), g = t.match(/(BlackBerry).*Version\/([\d.]+)/),
        v = t.match(/(BB10).*Version\/([\d.]+)/), y = t.match(/(RIM\sTablet\sOS)\s([\d.]+)/), b = t.match(/PlayBook/),
        x = t.match(/Chrome\/([\d.]+)/) || t.match(/CriOS\/([\d.]+)/), w = t.match(/Firefox\/([\d.]+)/),
        E = t.match(/\((?:Mobile|Tablet); rv:([\d.]+)\).*Firefox\/[\d.]+/),
        T = t.match(/MSIE\s([\d.]+)/) || t.match(/Trident\/[\d](?=[^\?]+).*rv:([0-9.].)/),
        S = !x && t.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/),
        j = S || t.match(/Version\/([\d.]+)([^S](Safari)|[^M]*(Mobile)[^S]*(Safari))/);
      (i.webkit = !!r) && (i.version = r[1]), o && (n.android = !0, n.version = o[2]), f && !u && (n.ios = n.iphone = !0, n.version = f[2].replace(/_/g, '.')), a && (n.ios = n.ipad = !0, n.version = a[2].replace(/_/g, '.')), u && (n.ios = n.ipod = !0, n.version = u[3] ? u[3].replace(/_/g, '.') : null), h && (n.wp = !0, n.version = h[1]), c && (n.webos = !0, n.version = c[2]), p && (n.touchpad = !0), g && (n.blackberry = !0, n.version = g[2]), v && (n.bb10 = !0, n.version = v[2]), y && (n.rimtabletos = !0, n.version = y[2]), b && (i.playbook = !0), d && (n.kindle = !0, n.version = d[1]), m && (i.silk = !0, i.version = m[1]), !m && n.android && t.match(/Kindle Fire/) && (i.silk = !0), x && (i.chrome = !0, i.version = x[1]), w && (i.firefox = !0, i.version = w[1]), E && (n.firefoxos = !0, n.version = E[1]), T && (i.ie = !0, i.version = T[1]), j && (s || n.ios || l) && (i.safari = !0, n.ios || (i.version = j[1])), S && (i.webview = !0), n.tablet = !!(a || b || o && !t.match(/Mobile/) || w && t.match(/Tablet/) || T && !t.match(/Phone/) && t.match(/Touch/)), n.phone = !(n.tablet || n.ipod || !(o || f || c || g || v || x && t.match(/Android/) || x && t.match(/CriOS\/([\d.]+)/) || w && t.match(/Mobile/) || T && t.match(/Touch/)))
    }

    e.call(t, navigator.userAgent, navigator.platform), t.__detect = e
  }(e), e
})/* crc32.js (C) 2014-present SheetJS -- http://sheetjs.com */
/* vim: set ts=2: */
/*exported CRC32 */
var CRC32;
(function (factory) {
  /*jshint ignore:start */
  if (typeof DO_NOT_EXPORT_CRC === 'undefined') {
    if ('object' === typeof exports) {
      factory(exports)
    } else if ('function' === typeof define && define.amd) {
      define(function () {
        var module = {}
        factory(module)
        return module
      })
    } else {
      factory(CRC32 = {})
    }
  } else {
    factory(CRC32 = {})
  }
  /*jshint ignore:end */
}(function (CRC32) {
  CRC32.version = '1.0.1'
  /* see perf/crc32table.js */

  /*global Int32Array */
  function signed_crc_table () {
    var c = 0, table = new Array(256)

    for (var n = 0; n != 256; ++n) {
      c = n
      c = ((c & 1) ? (-306674912 ^ (c >>> 1)) : (c >>> 1))
      c = ((c & 1) ? (-306674912 ^ (c >>> 1)) : (c >>> 1))
      c = ((c & 1) ? (-306674912 ^ (c >>> 1)) : (c >>> 1))
      c = ((c & 1) ? (-306674912 ^ (c >>> 1)) : (c >>> 1))
      c = ((c & 1) ? (-306674912 ^ (c >>> 1)) : (c >>> 1))
      c = ((c & 1) ? (-306674912 ^ (c >>> 1)) : (c >>> 1))
      c = ((c & 1) ? (-306674912 ^ (c >>> 1)) : (c >>> 1))
      c = ((c & 1) ? (-306674912 ^ (c >>> 1)) : (c >>> 1))
      table[n] = c
    }

    return typeof Int32Array !== 'undefined' ? new Int32Array(table) : table
  }

  var T = signed_crc_table()

  function crc32_bstr (bstr, seed) {
    var C = seed ^ -1, L = bstr.length - 1
    for (var i = 0; i < L;) {
      C = (C >>> 8) ^ T[(C ^ bstr.charCodeAt(i++)) & 0xFF]
      C = (C >>> 8) ^ T[(C ^ bstr.charCodeAt(i++)) & 0xFF]
    }
    if (i === L) C = (C >>> 8) ^ T[(C ^ bstr.charCodeAt(i)) & 0xFF]
    return C ^ -1
  }

  function crc32_buf (buf, seed) {
    if (buf.length > 10000) return crc32_buf_8(buf, seed)
    var C = seed ^ -1, L = buf.length - 3
    for (var i = 0; i < L;) {
      C = (C >>> 8) ^ T[(C ^ buf[i++]) & 0xFF]
      C = (C >>> 8) ^ T[(C ^ buf[i++]) & 0xFF]
      C = (C >>> 8) ^ T[(C ^ buf[i++]) & 0xFF]
      C = (C >>> 8) ^ T[(C ^ buf[i++]) & 0xFF]
    }
    while (i < L + 3) C = (C >>> 8) ^ T[(C ^ buf[i++]) & 0xFF]
    return C ^ -1
  }

  function crc32_buf_8 (buf, seed) {
    var C = seed ^ -1, L = buf.length - 7
    for (var i = 0; i < L;) {
      C = (C >>> 8) ^ T[(C ^ buf[i++]) & 0xFF]
      C = (C >>> 8) ^ T[(C ^ buf[i++]) & 0xFF]
      C = (C >>> 8) ^ T[(C ^ buf[i++]) & 0xFF]
      C = (C >>> 8) ^ T[(C ^ buf[i++]) & 0xFF]
      C = (C >>> 8) ^ T[(C ^ buf[i++]) & 0xFF]
      C = (C >>> 8) ^ T[(C ^ buf[i++]) & 0xFF]
      C = (C >>> 8) ^ T[(C ^ buf[i++]) & 0xFF]
      C = (C >>> 8) ^ T[(C ^ buf[i++]) & 0xFF]
    }
    while (i < L + 7) C = (C >>> 8) ^ T[(C ^ buf[i++]) & 0xFF]
    return C ^ -1
  }

  function crc32_str (str, seed) {
    var C = seed ^ -1
    for (var i = 0, L = str.length, c, d; i < L;) {
      c = str.charCodeAt(i++)
      if (c < 0x80) {
        C = (C >>> 8) ^ T[(C ^ c) & 0xFF]
      } else if (c < 0x800) {
        C = (C >>> 8) ^ T[(C ^ (192 | ((c >> 6) & 31))) & 0xFF]
        C = (C >>> 8) ^ T[(C ^ (128 | (c & 63))) & 0xFF]
      } else if (c >= 0xD800 && c < 0xE000) {
        c = (c & 1023) + 64
        d = str.charCodeAt(i++) & 1023
        C = (C >>> 8) ^ T[(C ^ (240 | ((c >> 8) & 7))) & 0xFF]
        C = (C >>> 8) ^ T[(C ^ (128 | ((c >> 2) & 63))) & 0xFF]
        C = (C >>> 8) ^ T[(C ^ (128 | ((d >> 6) & 15) | ((c & 3) << 4))) & 0xFF]
        C = (C >>> 8) ^ T[(C ^ (128 | (d & 63))) & 0xFF]
      } else {
        C = (C >>> 8) ^ T[(C ^ (224 | ((c >> 12) & 15))) & 0xFF]
        C = (C >>> 8) ^ T[(C ^ (128 | ((c >> 6) & 63))) & 0xFF]
        C = (C >>> 8) ^ T[(C ^ (128 | (c & 63))) & 0xFF]
      }
    }
    return C ^ -1
  }

  CRC32.table = T
  CRC32.bstr = crc32_bstr
  CRC32.buf = crc32_buf
  CRC32.str = crc32_str
}))
!function (t, e) {
  'object' == typeof exports && 'undefined' != typeof module ? module.exports = e() : 'function' == typeof define && define.amd ? define(e) : (t = 'undefined' != typeof globalThis ? globalThis : t || self).uuidv4 = e()
}(this, (function () {
  'use strict'
  var t, e = new Uint8Array(16)

  function o () {
    if (!t && !(t = 'undefined' != typeof crypto && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || 'undefined' != typeof msCrypto && 'function' == typeof msCrypto.getRandomValues && msCrypto.getRandomValues.bind(msCrypto))) throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported')
    return t(e)
  }

  var n = /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i

  function r (t) {
    return 'string' == typeof t && n.test(t)
  }

  for (var i = [], u = 0; u < 256; ++u) i.push((u + 256).toString(16).substr(1))
  return function (t, e, n) {
    var u = (t = t || {}).random || (t.rng || o)()
    if (u[6] = 15 & u[6] | 64, u[8] = 63 & u[8] | 128, e) {
      n = n || 0
      for (var f = 0; f < 16; ++f) e[n + f] = u[f]
      return e
    }
    return function (t) {
      var e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0,
        o = (i[t[e + 0]] + i[t[e + 1]] + i[t[e + 2]] + i[t[e + 3]] + '-' + i[t[e + 4]] + i[t[e + 5]] + '-' + i[t[e + 6]] + i[t[e + 7]] + '-' + i[t[e + 8]] + i[t[e + 9]] + '-' + i[t[e + 10]] + i[t[e + 11]] + i[t[e + 12]] + i[t[e + 13]] + i[t[e + 14]] + i[t[e + 15]]).toLowerCase()
      if (!r(o)) throw TypeError('Stringified UUID is invalid')
      return o
    }(u)
  }
}))
var wgAPI = {};
(function () {
  function maybeCallback (cb) {
    return (typeof cb === 'function') ? cb : null
  }

  function URLVar (url) {
    if (url) {
      URLVar.parse(url, this)
    }
  }

  URLVar.prototype.toURL = function () {
    return URLVar.stringify(this)
  }
  URLVar.parse = function (url, data) {
    if (!data) {
      data = new URLVar()
    }
    data.beforeQueryURL = url.split('?')[0]
    data.query = url.split('?')[1]
    if (!data.query) {
      data.query = ''
    }
    data.query = data.query.split('#')[0]
    data.anchor = data.query.split('#')[1]
    if (!data.anchor) {
      data.anchor = ''
    }
    var params = {}
    var query = url.split('?')[1]
    var result = url.split('?')[0] + '?'
    if (query) {
      query = query.split('#')[0]
      query = query.split('&')
      for (var i in query) {
        var vars = query[i].split('=')
        params[vars[0]] = vars[1]
      }
    }
    data.params = params
    return data
  }

  URLVar.stringify = function (data) {
    var params = data.params
    var query = ''
    var keys = []
    for (var key in params) {
      keys.push(key)
    }
    keys.sort()
    for (var i = 0; i < keys.length; i++) {
      key = keys[i]
      query += (i === 0) ? '?' : '&'
      query += key + '=' + params[key]
    }
    data.query = query
    return data.beforeQueryURL + query
  }

  wgAPI.debug = false
  wgAPI.apiURL = 'https://splan-open-api.61.com'
  if (location.href.indexOf('s.test.61.com') != -1) {
    wgAPI.apiURL = 'https://splan-open-api.61.com'
  }
  wgAPI.loginURL = 'https://s.61.com'
  wgAPI.token = null
  wgAPI.uid
  wgAPI.mimiId
  wgAPI.signPackage = {
    appId: 'wx13d1a4d8ce138140',
    timestamp: 0,
    nonceStr: '',
    signature: ''
  }
  wgAPI.ShareType = {
    Timeline: 'Timeline',
    AppMessage: 'AppMessage',
    QQ: 'QQ',
    Weibo: 'Weibo',
    QQZone: 'QQZone'
  }
  wgAPI.shareParams = {}
  wgAPI.shareDatas = {}
  wgAPI.isWXReady = false
  wgAPI.readyListeners = []
  wgAPI.shareListeners = []
  wgAPI.leaveListeners = []
  wgAPI.gameId = ''


  var wg_app_call_js = {}
  wgAPI.wg_app_call_js = wg_app_call_js

  var SITE_TITLE = '51'
  var GAME_URL = GAME_URL || window.location.href
  var PLAY_URL = PLAY_URL || ''
  var GAME_ICON = PLAY_URL + 'icon.png'
  var SHARE_TITLE = '51'
  var SHARE_DESC = ''

  wgAPI.shareParams.desc = SHARE_DESC
  wgAPI.shareParams.title = SHARE_TITLE
  wgAPI.shareParams.imgUrl = GAME_ICON

  wgAPI.getUID = function () {
    return wgAPI.getItem('uid')
  }
  wgAPI.getMimiID = function () {
    return wgAPI.getItem('mimiId')
  }
  wgAPI.init = function () {
    if (wgAPI.getURLVar('platform') != 'egret') {
      var t = wgAPI.getURLVar('token')
      if (t) {
        wgAPI.token = t
        wgAPI.setItem('token', t)
      } else {
        wgAPI.token = wgAPI.getItem('token')
        wgAPI.token = wgAPI.token ? wgAPI.token : null
      }
      var uid = wgAPI.getURLVar('uid')
      if (uid) {
        wgAPI.uid = uid
        wgAPI.setItem('uid', uid)
      } else {
        wgAPI.uid = wgAPI.getItem('uid')
        wgAPI.uid = wgAPI.uid ? wgAPI.uid : null
      }
    }

    checkSaveURLVar('channel')
    checkSaveURLVar('from')
    checkSaveURLVar('svrId')
    checkSaveURLVar('uid')

    function checkSaveURLVar (key) {
      if (wgAPI.getURLVar(key) && wgAPI.getURLVar(key) != 'undefined') {
        wgAPI.setItem(key, wgAPI.getURLVar(key))
      }
    }

    wgAPI.checkInitQQWanBa()
    /** */
    if (typeof wgAPI.gameId == 'number' && wgAPI.gameId != 1001 && wgAPI.gameId != 1002 && wgAPI.gameId != 1003 && wgAPI.gameId != 1004) { //
      var cancelFlag = wgAPI.getItem('cancelLeaveConfirmFlag')
      if (!cancelFlag || new Date(cancelFlag * 1000).toDateString() != new Date().toDateString()) { //
        pushHistory()
        var popstateFlag = false
        setTimeout(function () {
          popstateFlag = true
        }, 2000)
        window.addEventListener('popstate', function (e) {
          if (popstateFlag) {
            wgAPI.createLeaveConfirmHtml()
          }
        }, false)
      }
    }
  }

  function pushHistory () {
    var state = {
      title: document.title,
      url: location.href
    }
    window.history.pushState(state, document.title, location.href)
  }

  wgAPI.initToShortURL = function () {
    wgAPI.init()
    var uri = URLVar.parse(window.location.href)
    localStorage.setItem('_originURL', location.href)
    localStorage.setItem('_setOriginURLTime', Date.now())
    window.location.href = uri.toURL().split('?')[0]
  }
  wgAPI.setItem = function (key, value) {
    if (value && value !== 'undefined') {
      if (window.localStorage) {
        window.localStorage.setItem('wg_' + key, value)
      } else {
        var exp = new Date()
        exp.setTime(exp.getTime() + 365 * 24 * 60 * 60 * 1000)
        document.cookie = 'wg_' + key + '=' + escape(value) + ';expires=' + exp.toGMTString()
      }
    } else {
      wgAPI.removeItem(key)
    }
  }
  wgAPI.getItem = function (key) {
    var result
    if (window.localStorage) {
      result = window.localStorage.getItem('wg_' + key)
    } else {
      var arr = document.cookie.match(new RegExp('(^| )wg_' + key + '=([^;]*)(;|$)'))
      if (arr != null) {
        result = unescape(arr[2])
      }
    }
    if (result && result !== 'undefined') {
      return result
    }
    return undefined
  }
  wgAPI.removeItem = function (key) {
    if (window.localStorage) {
      window.localStorage.removeItem('wg_' + key)
    } else {
      var exp = new Date()
      exp.setTime(exp.getTime() - 1)
      var value = wgAPI.getItem(key)
      if (value != null) {
        document.cookie = 'wg_' + key + '=' + value + ';expires=' + exp.toGMTString()
      }
    }
  }

  wgAPI.clearToken = function () {
    wgAPI.setItem('token', undefined)
  }

  wgAPI.getParam = function (name) {
    return wgAPI.getItem(name)
  }

  wgAPI.getURLVar = function (name) {
    var urlVar = URLVar.parse(window.location.href)
    return urlVar.params[name]
  }

  wgAPI.setURLVar = function (url, key, value) {
    var urlVar = URLVar.parse(url)
    urlVar.params[key] = value
    return urlVar.toURL()
  }

  wgAPI.removeURLVar = function (name) {
    var urlVar = URLVar.parse(window.location.href)
    delete urlVar.params[name]
    return urlVar.toURL()
  }

  // 
  function isWeiXin () {
    return (navigator.userAgent.toLowerCase().match(/MicroMessenger/i) == 'micromessenger')
  }

  wgAPI.isWeiXin = isWeiXin

  function isApp () {
    return (!!window.wg_js_call_app)
  }

  wgAPI.isApp = isApp

  function isMobile () {
    return navigator.userAgent.match(/android|iphone|ipad|ipod|blackberry|meego|symbianos|windowsphone|ucbrowser/i)
  }

  wgAPI.isMobile = isMobile

  wgAPI.goPay = function (uid, token, gameId, back_url, productId, channel, svrId) {
    if (!token) {
      token = wgAPI.getItem('token')
    }
    if (!channel) {
      channel = wgAPI.getItem('channel')
    }
    if (!gameId) {
      gameId = wgAPI.gameId
    }
    if (!back_url) {
      back_url = window.location.href
    }
    if (parseInt(gameId) > 0) {
      var url = wgAPI.apiURL + '/pay/shop?' +
        'uid=' + uid +
        '&token=' + token +
        '&game_id=' + gameId +
        '&back_url=' + encodeURIComponent(back_url)
      if (channel) {
        url += '&channel=' + encodeURIComponent(channel)
      }
      if (!svrId) {
        url += '&svrId=' + svrId
      }
      if (productId) {
        url += '&pid=' + productId
      }
      url += '&time=' + Date.now()
      window.location.href = url
    } else {
      alert('gameid0')
    }
  }

  wgAPI.jiaThis_shareCallback = function (evt) {
    //if(evt && evt.data && evt.data.service){
    //
    //}
  }

  wg_app_call_js.share = function () {
    wgAPI.share({
      title: wgAPI.shareParams.title,
      desc: wgAPI.shareParams.desc,
      link: wgAPI.shareParams.link,
      imgUrl: wgAPI.shareParams.imgUrl
    })
  }
  wg_app_call_js.shareComplete = function (data) {
    if (data.action === 'complete') {
      switch (data.platform) {
        case 'WEIXIN_CIRCLE':
          wgAPI.callShareCallback.call(wgAPI, {type: wgAPI.ShareType.Timeline})
          break
        case 'WEIXIN':
          wgAPI.callShareCallback.call(wgAPI, {type: wgAPI.ShareType.AppMessage})
          break
        case 'QQ':
          wgAPI.callShareCallback.call(wgAPI, {type: wgAPI.ShareType.QQ})
          break
        case 'QZONE':
          wgAPI.callShareCallback.call(wgAPI, {type: wgAPI.ShareType.QQZone})
          break
        case 'SINA':
          wgAPI.callShareCallback.call(wgAPI, {type: wgAPI.ShareType.Weibo})
          break
        default:
          document.writeln(data.platform + ' share not supply!')
      }
    }
    wgAPI.logDebug(JSON.stringify(data))
  }

  function wxShareCallback_success_Timeline (res) {
    wgAPI.callShareCallback.call(wgAPI, {type: wgAPI.ShareType.Timeline})
    wgAPI.logDebug(res)
  }

  function wxShareCallback_success_AppMessage (res) {
    wgAPI.callShareCallback.call(wgAPI, {type: wgAPI.ShareType.AppMessage})
    wgAPI.logDebug(res)
  }

  function wxShareCallback_success_QQ (res) {
    wgAPI.callShareCallback.call(wgAPI, {type: wgAPI.ShareType.QQ})
    wgAPI.logDebug(res)
  }

  function wxShareCallback_success_Weibo (res) {
    wgAPI.callShareCallback.call(wgAPI, {type: wgAPI.ShareType.Weibo})
    wgAPI.logDebug(res)
  }

  function wxShareCallback_trigger (res) {
    wgAPI.logDebug(res)
  }

  function wxShareCallback_cancel (res) {
    wgAPI.logDebug(res)
  }

  function wxShareCallback_fail (res) {
    wgAPI.logDebug(res)
  }

  var _wxInit = false
  var _wxIniting = false
  // 
  wgAPI.wxInit = function (params) {
    var gameId = params.gameId
    var shareTitle = params.shareTitle
    var shareDesc = params.shareDesc
    var shareImg = params.shareImg
    var shareCallback = params.shareCallback
    wgAPI.shareDomain = window.location.href.split('#')[0]
    var shareLink = wgAPI.shareDomain
    wgAPI.gameId = gameId
    wgAPI.shareParams.desc = shareDesc
    wgAPI.shareParams.title = shareTitle
    wgAPI.shareParams.imgUrl = shareImg
    wgAPI.shareParams.link = shareLink
    wgAPI.shareParams.callback = shareCallback
    if (wgAPI.isWeiXin()) {
      if (_wxInit || wgAPI.isWXReady) {
        wgAPI.setShare(wgAPI.shareParams)
      } else if (_wxIniting) {
        wgAPI.addReadyListener(function () {
          wgAPI.setShare(wgAPI.shareParams)
        })
      } else {
        _wxIniting = true
        if (window.wx != null) {
          if (window.$) {
            function wxSign () {
              wgAPI.shareParams.desc = shareDesc
              wgAPI.shareParams.title = shareTitle
              wgAPI.shareParams.imgUrl = shareImg
              wgAPI.shareParams.link = shareLink
              wgAPI.shareParams.callback = shareCallback
              $.get(wgAPI.apiURL + '/common/wxsign?url=' + encodeURIComponent(wgAPI.shareDomain) + '&t=' + Date.now(), function (data) {
                wgAPI.signPackage = JSON.parse(data)['body']
                wx.config({
                  debug: wgAPI.debug, // ,apialertpclogpc
                  appId: wgAPI.signPackage.appId,
                  timestamp: wgAPI.signPackage.timestamp,
                  nonceStr: wgAPI.signPackage.nonceStr,
                  signature: wgAPI.signPackage.signature,
                  jsApiList: [
                    'onMenuShareTimeline',
                    'onMenuShareAppMessage',
                    'onMenuShareQQ',
                    'onMenuShareWeibo',
                    'hideOptionMenu',
                    'showOptionMenu'
                  ]
                })
                try {
                  wgAPI.setShare(wgAPI.shareParams)
                } catch (err) {
                }
                wx.ready(function () {
                  _wxInit = true
                  wgAPI.setShare(wgAPI.shareParams)
                  wgAPI.callReady()
                })
              })
            }

            if (gameId) {
              $.get(wgAPI.apiURL + '/common/share?gameId=' + wgAPI.gameId + '&t=' + Date.now(), function (data) {
                // var body = JSON.parse(data)["body"];
                // shareTitle = body.shareTitle;
                // shareDesc = body.shareDesc;
                // shareImg = body.shareImg;
                wxSign()
              })
            } else {
              wxSign()
            }
          } else {
            wgAPI.logDebug('AJAX')
          }
        } else {
          wgAPI.logDebug('WXJSSDK')
        }
      }
    } else {
      $.get(wgAPI.apiURL + '/common/share?gameId=' + wgAPI.gameId + '&t=' + Date.now(), function (data) {
        var body = JSON.parse(data)['body']
        wgAPI.shareParams.desc = shareDesc
        wgAPI.shareParams.title = shareTitle
        wgAPI.shareParams.imgUrl = shareImg
        wgAPI.shareParams.link = shareLink
        wgAPI.setShare(wgAPI.shareParams)
      })
    }
  }

  wgAPI.canVisibleFollow = function () {
    if (wgAPI.getItem('channel') === 'yybagua' && wgAPI.getURLVar('from') && wgAPI.getURLVar('from').indexOf('mp_yybagua') === 0) {
      return false
    }
    return true
  }
  wgAPI.callShareCallback = function (params) {
    if (wgAPI.shareParams.callback != null && typeof wgAPI.shareParams.callback === 'function') {
      // alert("!");
      wgAPI.shareParams.callback(params)
    }
    var listeners = wgAPI.shareListeners.concat()
    for (var i = 0, len = listeners.length; i < len; i++) {
      var func = listeners[i]['func']
      var funcObj = listeners[i]['funcObj']
      var args = listeners[i]['args']
      if (func) {
        if (!funcObj) {
          funcObj = this
        }
        if (!args) {
          args = [params]
        } else {
          args.unshift(params)
        }
        func.apply(funcObj, args)
      }
    }
  }
  wgAPI.addShareListener = function (listener, listenerObj, args) {
    wgAPI.shareListeners.push({func: listener, funcObj: listenerObj, args: args})
  }
  wgAPI.removeShareListener = function (func) {
    for (var i = 0; i < wgAPI.shareListeners.length; i++) {
      var listener = wgAPI.shareListeners[i]
      if (listener.func === func) {
        wgAPI.shareListeners.splice(i, 1)
        break
      }
    }
  }
  wgAPI.setShare = function (shareData) {
    var shareDesc = wgAPI.shareParams.desc = shareData.desc ? shareData.desc : wgAPI.shareParams.desc
    var shareTitle = wgAPI.shareParams.title = shareData.title ? shareData.title : wgAPI.shareParams.title
    var shareImg = wgAPI.shareParams.imgUrl = shareData.imgUrl ? shareData.imgUrl : wgAPI.shareParams.imgUrl
    var shareLink = wgAPI.shareParams.link = shareData.link ? shareData.link : wgAPI.shareDomain
    if (!shareTitle) {
      shareTitle = SHARE_TITLE
    }
    if (!shareDesc) {
      shareDesc = SHARE_DESC
    }
    if (!shareImg) {
      shareImg = GAME_ICON
    }

    if (wgAPI.isWeiXin()) {
      wgAPI.shareDatas['ShareTimeline'] = {
        title: shareTitle,
        link: shareLink,
        imgUrl: shareImg,
        trigger: wxShareCallback_trigger,
        success: wxShareCallback_success_Timeline,
        cancel: wxShareCallback_cancel,
        fail: wxShareCallback_fail
      }

      wgAPI.shareDatas['ShareAppMessage'] = {
        title: shareTitle,
        desc: shareDesc,
        link: shareLink,
        imgUrl: shareImg,
        trigger: wxShareCallback_trigger,
        success: wxShareCallback_success_AppMessage,
        cancel: wxShareCallback_cancel,
        fail: wxShareCallback_fail
      }

      wgAPI.shareDatas['ShareQQ'] = {
        title: shareTitle,
        desc: shareDesc,
        link: shareLink,
        imgUrl: shareImg,
        trigger: wxShareCallback_trigger,
        success: wxShareCallback_success_QQ,
        cancel: wxShareCallback_cancel,
        fail: wxShareCallback_fail
      }

      wgAPI.shareDatas['ShareWeibo'] = {
        title: shareTitle,
        desc: shareDesc,
        link: shareLink,
        imgUrl: shareImg,
        trigger: wxShareCallback_trigger,
        success: wxShareCallback_success_Weibo,
        cancel: wxShareCallback_cancel,
        fail: wxShareCallback_fail
      }
      wx.onMenuShareTimeline(wgAPI.shareDatas['ShareTimeline'])
      wx.onMenuShareAppMessage(wgAPI.shareDatas['ShareAppMessage'])
      wx.onMenuShareQQ(wgAPI.shareDatas['ShareQQ'])
      wx.onMenuShareWeibo(wgAPI.shareDatas['ShareWeibo'])
    } else if (wgAPI.isApp()) {
      window.wg_js_call_app.setShareContent(JSON.stringify({
        title: shareTitle,
        desc: shareDesc,
        link: shareLink,
        imgUrl: shareImg
      }))
    }
  }
  wgAPI.more = function () {
    wgAPI.showShareMP()
  }
  wgAPI.share = function (shareData, callback) {
    wgAPI.setShare(shareData)
    callback = maybeCallback(arguments[arguments.length - 1])
    if (callback != null) {
      wgAPI.addShareListener(callback)
    }
    wgAPI.showShare()
  }
  wgAPI.randomString = function (len) {
    len = len || 32
    var allChars = 'ABCDEFGHIJKLMNOPQRSTVUWXYZabcdefghijklmnopqrstuvwxyz0123456789'
    var count = allChars.length
    var str = ''
    for (var i = 0; i < len; i++) {
      str += allChars.charAt(Math.floor(Math.random() * count))
    }
    return str
  }
  wgAPI.showShare = function (callback) {
    if (wgAPI.isApp()) {
      window.wg_js_call_app.showShare()
    } else {
      if (window.$) {
        $('body').append('<div id="share"><img width="100%" src="http://s.61.com/static/image/share.png" style="position: fixed; z-index: 9999; top: 0; left: 0"/></div>')
        document.getElementById('share').onclick = function () {
          $('#share').remove()
          if (callback != null) {
            callback()
          }
        }
      }
    }
  }
  wgAPI.showShareMP = function (callback) {
    if (window.$) {
      window.location.href = 'http://mp.weixin.qq.com/s?__biz=MzA5NzU4NTk2OA==&mid=206932964&idx=1&sn=009651c9267efcf91b8efd84366eaeca'
    }
  }
  wgAPI.enableOptionMenu = function (value) {
    if (wgAPI.isWeiXin()) {
      if (window.wx != null) {
        if (wgAPI.isWXReady) {
          if (value) {
            wx.showOptionMenu()
          } else {
            wx.hideOptionMenu()
          }
        } else {
          wgAPI.readyListeners.push({'func': wgAPI.enableOptionMenu, 'args': arguments})
        }
      }
    }
  }
  wgAPI.callReady = function () {
    wgAPI.isWXReady = true
    for (var i in wgAPI.readyListeners) {
      var func = wgAPI.readyListeners[i]['func']
      var args = wgAPI.readyListeners[i]['args']
      var funcObj = wgAPI.readyListeners[i]['funcObj']
      if (!args) {
        args = []
      }
      func.apply(funcObj ? funcObj : this, args)
    }
    wgAPI.readyListeners.length = 0
  }
  wgAPI.addReadyListener = function (listener, listenerObj, args) {
    wgAPI.readyListeners.push({func: listener, funcObj: listenerObj, args: args})
  }
  wgAPI.removeReadyListener = function (func) {
    for (var i = 0; i < wgAPI.readyListeners.length; i++) {
      var listener = wgAPI.readyListeners[i]
      if (listener.func === func) {
        wgAPI.readyListeners.splice(i, 1)
        break
      }
    }
  }
  wgAPI.logDebug = function (msg) {
    if (wgAPI.debug) {
      if (typeof msg === 'object') {
        msg = JSON.stringify(msg)
      }
      console.log(msg)
    }
  }
  wgAPI.login = function (state, redirectURL, scope) {
    var appId = wgAPI.signPackage.appId
    var gameId
    scope = scope || 'snsapi_userinfo'
    if (state) {
      gameId = state
      state = '&game_id=' + state
    } else {
      if (wgAPI.gameId) {
        gameId = wgAPI.gameId
        state = '&game_id=' + wgAPI.gameId
      } else {
        state = ''
      }
    }
    if (wgAPI.getURLVar('from')) {
      state += '&from=' + wgAPI.getURLVar('from')
    }
    if (wgAPI.getParam('from_award')) {
      state += '&from_award=' + wgAPI.getParam('from_award')
    }
    if (wgAPI.getURLVar('reference')) {
      state += '&reference=' + wgAPI.getURLVar('reference')
    }
    if (wgAPI.getParam('channel')) {
      state += '&channel=' + wgAPI.getParam('channel')
    }
    if (redirectURL) {
      redirectURL = redirectURL.split('#')[0]
      var urlVar = URLVar.parse(redirectURL)
      if (urlVar.params['token'] !== undefined) {
        delete urlVar.params['token']
      }
      if (urlVar.params['uid'] !== undefined) {
        delete urlVar.params['uid']
      }
      if (urlVar.params['from'] !== undefined) {
        delete urlVar.params['from']
      }
      if (urlVar.params['from_award'] !== undefined) {
        delete urlVar.params['from_award']
      }
      if (urlVar.params['reference'] !== undefined) {
        delete urlVar.params['reference']
      }
      if (urlVar.params['gReference'] !== undefined) {
        delete urlVar.params['gReference']
      }
      if (urlVar.params['timespan'] !== undefined) {
        delete urlVar.params['timespan']
      }
      redirectURL = urlVar.toURL()
      state += '&to_url=' + encodeURIComponent(redirectURL)
    }
    if (state) {
      state = encodeURIComponent(state)
    }
    var url = ''
    if (wgAPI.isWeiXin()) {
      url += 'https://open.weixin.qq.com/connect/oauth2/authorize?appid=' + appId + '&redirect_uri='
      var loginType = 1
      if (wgAPI.isApp()) loginType = 7
      url += encodeURIComponent(wgAPI.apiURL + '/login?login_type=' + loginType)
      url += ('&response_type=code&scope=' + scope + '&state=' + state + '#wechat_redirect')
    } else {
      url = wgAPI.loginURL
      var qstring = ''
      if (gameId) {
        qstring += '&gameid=' + gameId
      }
      if (redirectURL) {
        qstring += '&redirect_uri=' + encodeURIComponent(redirectURL)
      }
      qstring += '&state=' + state
      qstring += '&time=' + Date.now()
      if (qstring != '') {
        if (url.indexOf('?') == -1) {
          url += '?' + qstring.substr(1)
        } else {
          url += qstring
        }
      }
    }
    window.location.href = url
  }
  wgAPI.loginByQQ = function (state, redirectURL, scope) {
    scope = scope || 'get_user_info'
    var url = ''
    url += 'https://graph.qq.com/oauth2.0/authorize?response_type=code&client_id=' + wgAPI.signPackage.qqAppId + '&redirect_uri='
    url += encodeURIComponent(wgAPI.apiURL + '/qqLogin?login_type=1')
    url += ('&response_type=code&scope=' + scope + '&state=' + state + '#qq_redirect') //&display=mobile
    window.location.href = url
  }
  wgAPI.logout = function (reload) {
    wgAPI.token = null
    wgAPI.removeItem('token')
    if (reload) {
      if (wgAPI.getURLVar('token')) {
        window.location.href = wgAPI.setURLVar(window.location.href, 'token', '')
      } else {
        window.location.reload()
      }
    }
  }
  wgAPI.genTimeStamp = function (time) {
    if (!time) {
      time = Date.now()
    }
    if (time instanceof Date) {
      time = time.getTime()
    } else if (typeof time === 'number') {
      //do nothing
    } else {
      throw new Error('time type not support ' + typeof (time))
    }
    return Math.floor(time / 1000)
  }
  wgAPI.getNetworkType = function (callback) {
    if (wgAPI.isWeiXin()) {
      function onBridgeReady () {
        WeixinJSBridge.invoke('getNetworkType', {},
          function (e) {
            callback(e.err_msg)
          })
      }

      if (typeof WeixinJSBridge == 'undefined') {
        callback(null)
      } else {
        onBridgeReady()
      }
    } else {
      callback(null)
    }
  }
  wgAPI.hideLoading = function () {
    var elements = document.getElementsByName('loading')
    if (elements) {
      for (var i = 0, len = elements.length; i < len; i++) {
        var ele = elements[i]
        ele.style.display = 'none'
      }
    }
  }
  window.onunload = onunload_handler

  function onunload_handler () {
    var listeners = wgAPI.leaveListeners.concat()
    for (var i = 0, len = listeners.length; i < len; i++) {
      var func = listeners[i]['func']
      var args = listeners[i]['args']
      if (func) {
        if (!args) {
          args = []
        }
        func.apply(this, args)
      }
    }
    wgAPI.leaveListeners.length = 0
  }

  wgAPI.addLeaveListener = function (listener, listenerObj, args) {
    wgAPI.leaveListeners.push({func: listener, funcObj: listenerObj, args: args})
  }
  wgAPI.removeLeaveListener = function (func) {
    for (var i = 0; i < wgAPI.leaveListeners.length; i++) {
      var listener = wgAPI.leaveListeners[i]
      if (listener.func === func) {
        wgAPI.leaveListeners.splice(i, 1)
        break
      }
    }
  }

  var typeCallListeners = {}

  function getCallListeners (type) {
    var callListeners = typeCallListeners[type]
    if (!callListeners) {
      callListeners = []
      typeCallListeners[type] = callListeners
    }
    return callListeners
  }

  wgAPI.addCallListener = function (type, listener, listenerObj, args) {
    var callListeners = getCallListeners(type)
    callListeners.push({func: listener, funcObj: listenerObj, args: args})
  }
  wgAPI.removeCallListener = function (type, func) {
    var callListeners = typeCallListeners[type]
    for (var i = 0; i < callListeners.length; i++) {
      var listener = callListeners[i]
      if (listener.func === func) {
        callListeners.splice(i, 1)
        break
      }
    }
  }

  function dispatchCall (type, data) {
    var callListeners = getCallListeners(type)
    if (callListeners) {
      for (var i = 0; i < callListeners.length; i++) {
        var listener = callListeners[i]
        if (listener.func) {
          listener.func.apply(listener.funcObj, data, listener.args)
        }
      }
    }
  }

  function __paySuccess_WanBa () {
    alert('__paySuccess_WanBa')
    dispatchCall('__paySuccess_WanBa')
  }

  function __payError_WanBa () {
    alert('__payError_WanBa')
    dispatchCall('__payError_WanBa')
  }

  function __payClose_WanBa () {
    alert('__payClose_WanBa')
    dispatchCall('__payClose_WanBa')
  }

  function initByQQWanBa () {
    window.__paySuccess = __paySuccess_WanBa
    window.__payError = __payError_WanBa
    window.__payClose = __payClose_WanBa
  }

  wgAPI.payByQQWanBa = function (param) {
    alert('payByQQWanBa : ' + JSON.stringify(param))
    window.popPayTips(param)
    alert('payByQQWanBa end')
  }
  wgAPI.checkInitQQWanBa = function () {
    if (window.popPayTips != null) {
      initByQQWanBa()
    }
  }
  wgAPI.showSubscribe = function (callback) {
    if (window.$) {
      $('body').append('<div id="subscribe" class="modal-backdrop-trans modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><h4 class="modal-title" id="barcodeModalLabel">51</h4></div><div class="modal-body"><img class="qrcode" src="http://game6.51weiyouxi.com/static/image/shareMP.png"></div><div class="modal-footer"><h4 class="modal-title"></h4></div></div></div>')
      document.getElementById('subscribe').onclick = function () {
        $('#subscribe').remove()
        if (callback != null) {
          callback()
        }
      }
    }
  }

  /****** new share *******/
  function setShareIcon (data) {
    if (data.shareIcon) {
      GAME_ICON = data.shareIcon
    } else if (data.imgUrl) {
      GAME_ICON = data.imgUrl
    }
  }

  function setShareUrl (data) {
    if (data.shareUrl) {
      GAME_URL = data.shareUrl
    } else if (data.link) {
      GAME_URL = data.link
    }
  }

  function setShareInfo (data) {
    SHARE_DESC = data.desc || SHARE_DESC
    SHARE_TITLE = data.title || SHARE_TITLE
    setShareIcon(data)
    setShareUrl(data)
    //document.title = SHARE_TITLE;
    if (SHARE_DESC.indexOf('-51') > 0) {

    } else {
      SHARE_DESC = SHARE_DESC + '-51'
    }
    var _t = Number(data.showShareTime)
    if (_t != 'NaN' && _t == 0) {
      showSharePage()
    } else if (_t != 'NaN' && _t > 0) {
      setTimeout(function () {
        showSharePage()
      }, _t)
    }
  }

  wgAPI.setShareInfo = setShareInfo

  window.click_share = false

  function showSharePage () {
    window.click_share = true
    setTimeout(function () {
      window.click_share = false
    }, 2000)
    if (isWeiXin()) {
      addShareWX_WG()
      JiaThis_Button()
    } else {
      addWXQR_WG()
      JiaThis_Button()
    }
    showShareInfo()
  }

  wgAPI.showSharePage = function (data) {
    if (data) {
      var _t = Number(data.showShareTime)
      setShareInfo(data)
      if (!_t || isNaN(_t)) {
        showSharePage()
      }
    } else {
      showSharePage()
    }
  }

  function closeShare () {
    //if($('div').is('.chaoyue')){
    //    $('.chaoyue').css('display','block');
    //}
    document.getElementById('share-wx').style.display = 'none'
    //if($("#s1").is(":hidden")){
    //    $("#xiaz").hide();
    //}else{
    //    $("#xiaz").show().removeClass("b");
    //}
  }

  function closeShareWX () {
    //if($('div').is('.chaoyue')){
    //    $('.chaoyue').css('display','block');
    //}
    document.getElementById('wx-qr').style.display = 'none'
    //if($("#s1").is(":hidden")){
    //    $("#xiaz").hide();
    //}else{
    //    $("#xiaz").show().removeClass("b");
    //}
  }

  var wgShareRCode

  function showShareInfo () {
    var data = {}
    $('#wg_share_headimg img').attr('src', data.headimg)
    $('#wg_share_msg').text(',')
    $('#wg_share_words').text(SHARE_TITLE)
    if (!wgShareRCode) {
      wgShareRCode = new QRCode(document.getElementById('wg_share_url'), {
        width: 196, //
        height: 196
      })
      wgShareRCode.makeCode(GAME_URL)
    }
    if (isWeiXin() == true) {
      document.getElementById('share-wx').style.display = 'block'
    } else {
      document.getElementById('wx-qr').style.display = 'block'
    }
  }

  //
  function addShareWX_WG () {
    var wxqrDiv = document.createElement('div')
    wxqrDiv.style.cssText = 'background:rgba(0,0,0,0.8); position:fixed;top:0px; left:0px; width:100%; height:' + document.documentElement.clientHeight + 'px; z-index:10000; display:none;'
    wxqrDiv.id = 'share-wx'
    wxqrDiv.className = 'wg_fenxiang'
    wxqrDiv.onclick = closeShare
    document.body.appendChild(wxqrDiv)
    wxqrP1 = document.createElement('div')
    wxqrP1.className = 'fenxiang1'
    wxqrP1.innerHTML = '<div style=\'max-width:640px;width:100%; margin:auto;\'><div class=\'yaoqing\' ><img src=\'http://s.61.com/static/image/wg_share.png\'></div><div class=\'wg_content\'><div class=\'wg_content_1\'><div class=\'wg_content_1_a\' id=\'wg_share_headimg\'><img  width=\'92\' height=\'92\'></div><div class=\'wg_content_1_b\'><p id=\'wg_share_msg\'style=\'color: rgb(255, 255, 255)\'></p></div><div class=\'guanbi1\'><img src=\'http://game6.51weiyouxi.com/static/image/wg_close.png\' width=\'64\' height=\'64\'></div><p class=\'clear\'></p></div><div class=\'wg_content_2\' id=\'wg_share_url\'><img  ></div><div  class=\'wg_content_3\'><p id=\'wg_share_words\' style=\'text-align: center;color: rgb(255, 255, 255)\'></p></div></div></div>'
    wxqrDiv.appendChild(wxqrP1)

    wxqrP4 = document.createElement('div')
    if (!isMobile()) {
      wxqrP4.style.cssText = 'text-align:center;width:265px;padding-top:20px;margin:0 auto;font: bold 20px Arial, Helvetica, sans-serif'
    } else {
      wxqrP4.style.cssText = 'text-align:center;width:212px;padding-top:20px;margin:0 auto;font: bold 20px Arial, Helvetica, sans-serif'
    }
    wxqrP1.appendChild(wxqrP4)
  }

  //
  function addWXQR_WG () {
    wxqrDiv = document.createElement('div')
    wxqrDiv.style.cssText = 'background:rgba(0,0,0,0.8); position:fixed;top:0px; left:0px; width:100%; height:' + document.documentElement.clientHeight + 'px; z-index:10000; display:none;'
    wxqrDiv.id = 'wx-qr'
    wxqrDiv.className = 'wg_fenxiang'
    wxqrDiv.onclick = closeShareWX
    document.body.appendChild(wxqrDiv)

    wxqrP1 = document.createElement('div')
    wxqrP1.className = 'fenxiang1'
    wxqrP1.innerHTML = '<div style=\' max-width:640px;width:100%; margin:auto;\'><div class=\'yaoqing\' style=\'visibility:hidden;\'><img src=\'http://s.61.com/static/image/wg_share.png\'></div><div class=\'wg_content\'><div class=\'wg_content_1\'><div class=\'wg_content_1_a\' id=\'wg_share_headimg\'><img  width=\'92\' height=\'92\'></div><div class=\'wg_content_1_b\'><p id=\'wg_share_msg\'style=\'color: rgb(255, 255, 255)\'></p></div><div class=\'guanbi1\'><img src=\'http://game6.51weiyouxi.com/static/image/wg_close.png\' width=\'64\' height=\'64\'></div><p class=\'clear\'></p></div><div class=\'wg_content_2\' id=\'wg_share_url\'><img  ></div><div  class=\'wg_content_3\'><p id=\'wg_share_words\' style=\'text-align: center;color: rgb(255, 255, 255)\'></p></div></div></div>'
    wxqrDiv.appendChild(wxqrP1)

    wxqrP4 = document.createElement('div')
    if (!isMobile()) {
      wxqrP4.style.cssText = 'text-align:center;width:265px;padding-top:20px;margin:0 auto;font: bold 20px Arial, Helvetica, sans-serif'
    } else {
      wxqrP4.style.cssText = 'text-align:center;width:212px;padding-top:20px;margin:0 auto;font: bold 20px Arial, Helvetica, sans-serif'
    }
    wxqrP1.appendChild(wxqrP4)
  }

  function JiaThis_Button () {
    if (window.wg_changeshareimg) {

    } else {
      //JiaThis Button BEGIN
      var jiathisDiv = document.createElement('div')
      jiathisDiv.className = 'jiathis_style_32x32'
      wxqrP4.appendChild(jiathisDiv)
      if (!isMobile()) {
        var sharelink1 = document.createElement('a')
        sharelink1.className = 'jiathis_button_weixin'
        sharelink1.innerHTML = '&nbsp'
        jiathisDiv.appendChild(sharelink1)
      }
      var sharelink2 = document.createElement('a')

      sharelink2.className = 'jiathis_button_tsina'
      sharelink2.innerHTML = '&nbsp'
      jiathisDiv.appendChild(sharelink2)

      var sharelink3 = document.createElement('a')
      sharelink3.className = 'jiathis_button_qzone'
      sharelink3.innerHTML = '&nbsp'
      jiathisDiv.appendChild(sharelink3)

      var sharelink4 = document.createElement('a')
      sharelink4.className = 'jiathis_button_tqq'
      sharelink4.innerHTML = '&nbsp'
      jiathisDiv.appendChild(sharelink4)

      var sharelink5 = document.createElement('a')
      sharelink5.className = 'jiathis_button_cqq'
      sharelink5.innerHTML = '&nbsp'
      jiathisDiv.appendChild(sharelink5)

      var jiathisJS = document.createElement('script')
      jiathisJS.type = 'text/javascript'
      jiathisJS.src = 'http://v3.jiathis.com/code_mini/jia.js?uid=2095335'
      jiathisJS.charset = 'utf-8'
      document.body.appendChild(jiathisJS)
    }
    setJiathisConfig()
  }

  function setJiathisConfig () {
    jiathis_config = {
      evt: {'share': 'wgAPI.jiaThis_shareCallback'},
      summary: SHARE_DESC,
      title: SHARE_TITLE + ' #' + SITE_TITLE + '#',
      url: GAME_URL,
      pic: GAME_ICON,
      shortUrl: false,
      hideMore: true
    }
  }

  /****** new share ********/
  wgAPI.showFriendFrame = function (uid, token) {
    if (!token) {
      token = wgAPI.getItem('token')
    }
    if (!uid) {
      uid = wgAPI.getItem('uid')
    }
    var friendURL = 'http://m.51weiyouxi.com/friends.html'
    document.domain = '51weiyouxi.com'
    window.$ && $('body').append('<div id="friendFrameDiv" style="width: 100%; height: 100%; position: absolute; top: 0px; left: 0px;"><iframe id="friendFrame" name="gameIframe" src="' + friendURL + '?v=' + Date.now() + '&token=' + token + '&uid=' + uid + '" frameborder="no" border="0px" marginwidth="0px" marginheight="0px" scrolling="auto" style="width: 100%; height: 100%;"></iframe></div>')
  }
  wgAPI.hideFriendFrame = function () {
    window.$ && $('#friendFrameDiv').remove()
  }
  wgAPI.goFriend = function (uid, token) {
    wgAPI.showFriendFrame(uid, token)
  }
  wgAPI.isOurAPP = function () {
    return false
  }
  /** */
  wgAPI.createLeaveConfirmHtml = function () {
    if ($('#leaveConfirm').length > 0) {
      return
    }
    var html = ''
    html += '<div id="leaveConfirm" style="position:absolute; font-family: Microsoft YaHei; top: 50%; left: 50%; width: 320px; height: 180px; margin-top: -90px; margin-left: -160px; background: #fff; border-radius: 10px; text-align: center; color: #666; box-shadow: 1px 1px 3px #000; z-index: 101;">'
    html += '<div onclick="wgAPI.removeLeaveConfirmHtml();" style="position: absolute; right: 10px; cursor: pointer; font-size: 30px; line-height: 30px;"></div>'
    html += '<p style="text-align: center; font-size: 0.9em; color: #000; margin-top: 14px;"></p>'
    html += '<div id="leaveConfirm-games" style="width: 280px; height: 70px; margin: 0 auto; margin-top: 16px !important;"></div>'
    html += '<div onclick="wgAPI.leaveGame();" style="width: 120px; height: 30px; font-size: 0.8em; line-height: 30px; border-radius: 5px; background: #0099FF; margin: 0 auto; margin-top: 17px !important; color: #fff;"></div>'
    html += '<div id="cancelLeaveConfirm" onclick="wgAPI.cancelLeaveConfirm()" style="position: absolute; top: 143px; right: 1px; width: 96px; height: 16px;">'
    html += '<div style="width: 14px; height: 14px; border: 1px solid #e0e0e0; border-radius: 50%; float: left;"></div>'
    html += '<div style="font-size: 12px; color: #666; height: 16px; line-height: 16px;"></div>'
    html += '</div>'
    html += '</div>'
    $('body').append(html)
    getRecentPopularGames(function (recentPopularGames) {
      if (recentPopularGames) {
        var htmlStr = ''
        for (var i in recentPopularGames) {
          if (i >= 3) break
          var recentPopularGame = recentPopularGames[i]
          htmlStr += '<div style="position: relative; text-align: center; width: 70px; height: 70px; float: left; ">'
          htmlStr += '<a href="' + recentPopularGame.game_url + '"><img src="' + recentPopularGame.icon + '" style="width: 50px; height: 50px; border: 0;"/></a>'
          htmlStr += '<p style="font-size: 0.8em; margin-top: 0; ">' + recentPopularGame.title + '</p>'
          htmlStr += '</div>'
        }
        htmlStr += '<div style="position: relative; text-align: center; width: 70px; height: 70px; float: left; ">'
        htmlStr += '<img onclick="wgAPI.moreGame();" src="http://s.61.com/static/image/logo.png" style="width: 50px; height: 50px;" alt=""/>'
        htmlStr += '<p style="font-size: 0.8em; margin-top: 0; "></p>'
        htmlStr += '</div>'
        $('#leaveConfirm-games').append(htmlStr)
      }
    })
  }
  wgAPI.removeLeaveConfirmHtml = function () {
    $('#leaveConfirm').remove()
  }
  wgAPI.moreGame = function () {
    location.href = 'https://s.61.com'
  }
  wgAPI.cancelLeaveConfirm = function () {
    var $cancelDiv = $('#cancelLeaveConfirm div').eq(0)
    if ($('.cancelFlag').length) {
      wgAPI.removeItem('cancelLeaveConfirmFlag')
      $cancelDiv.css('background', '#fff').removeClass('cancelFlag')
    } else {
      wgAPI.setItem('cancelLeaveConfirmFlag', Math.floor(new Date().getTime() / 1000))
      $cancelDiv.css('background', '#0099FF').addClass('cancelFlag')
    }
  }
  wgAPI.leaveGame = function () {
    if (wgAPI.isWeiXin && typeof WeixinJSBridge != 'undefined') {
      WeixinJSBridge.call('closeWindow')
    } else {
      var userAgent = navigator.userAgent
      if (userAgent.indexOf('Firefox') != -1 || userAgent.indexOf('Chrome') != -1) {
        window.location.href = 'about:blank'
      } else {
        window.opener = null
        window.open('', '_self')
        window.close()
      }
    }
  }

  function getRecentPopularGames (callback) {
    $.ajax({
      url: 'http://game-api.51weiyouxi.com/api/getRecentPopularGames',
      type: 'get',
      dataType: 'json',
      error: function () {
        console.log('')
      },
      success: function (data) {
        if (!data.err) {
          data = data.body
          callback(data)
        }
      }
    })
  }

  /** */

  //  payType 1 ==   2 ==   3 ==   4 ==   5 ==  mimiId
  wgAPI.seerPay = function (uid, token, gameId, back_url, productId, channel, payType, card_id, card_psd, mimiId, vflag) {
    if (!token) {
      token = wgAPI.getItem('token')
    }
    if (!channel) {
      channel = wgAPI.getItem('channel')
    }
    if (!gameId) {
      gameId = wgAPI.gameId
    }
    if (!back_url) {
      back_url = window.location.href
    }
    if (!payType) {
      alert('')
      return
    }
    if (!productId) {
      alert('')
      return
    }
    var url = ''
    if (1 == payType) {
      url = wgAPI.apiURL + '/pay/wxpaySeer?' +
        'uid=' + uid +
        '&mimi_id=' + mimiId +
        '&svrId=' + 1 +
        '&token=' + token +
        '&game_id=' + gameId +
        '&timeSpan=' + Date.now() +
        '&product_id=' + productId +
        '&channel=' + encodeURIComponent(channel) +
        '&back_url=' + encodeURIComponent(back_url) +
        '&time=' + Date.now()
    } else if (2 == payType) {
      url = wgAPI.apiURL + '/pay/alipaySeer?' +
        'game_id=' + gameId +
        '&uid=' + uid +
        '&mimi_id=' + mimiId +
        '&svrId=' + 1 +
        '&token=' + token +
        '&product_id=' + productId +
        '&back_url=' + encodeURIComponent(back_url) +
        '&channel=' + encodeURIComponent(channel) +
        '&timeSpan=' + Date.now()
    } else if (3 == payType) {
      url = wgAPI.apiURL + '/pay/iapppaySeer?' +
        'game_id=' + gameId +
        '&uid=' + uid +
        '&mimi_id=' + mimiId +
        '&svrId=' + 1 +
        '&token=' + token +
        '&product_id=' + productId +
        '&back_url=' + encodeURIComponent(back_url) +
        '&channel=' + encodeURIComponent(channel) +
        '&timeSpan=' + Date.now()
    } else if (4 == payType) {
      if (!card_id) {
        alert('')
        return
      }
      if (!card_psd) {
        alert('')
        return
      }
      url = wgAPI.apiURL + '/pay/taomeepaySeer?' +
        'game_id=' + gameId +
        '&uid=' + uid +
        '&mimi_id=' + mimiId +
        '&svrId=' + 1 +
        '&token=' + token +
        '&product_id=' + productId +
        '&back_url=' + encodeURIComponent(back_url) +
        '&channel=' + encodeURIComponent(channel) +
        '&card_id=' + card_id +
        '&card_passwd=' + card_psd +
        '&timeSpan=' + Date.now()
    } else if (5 == payType) {
      var nowTs
      if (MFC && MFC.serverTimer) {
        nowTs = MFC.serverTimer.getTime()
        console.log('ts:' + nowTs)
      }
      if (!nowTs) {
        nowTs = Date.now()
      }
      url = wgAPI.apiURL + '/pay/consumetaomeecoin?' +
        'game_id=' + gameId +
        '&uid=' + uid +
        '&svrId=' + 1 +
        '&token=' + token +
        '&product_id=' + productId +
        '&back_url=' + encodeURIComponent(back_url) +
        '&channel=' + encodeURIComponent(channel) +
        '&mimi_id=' + mimiId +
        '&pwd=' + card_psd +
        '&timeSpan=' + nowTs
    } else if (6 == payType) {
      url = wgAPI.apiURL + '/pay/wxapppaySeer?' +
        'uid=' + uid +
        '&mimi_id=' + mimiId +
        '&svrId=' + 1 +
        '&token=' + token +
        '&game_id=' + gameId +
        '&timeSpan=' + Date.now() +
        '&product_id=' + productId +
        '&channel=' + encodeURIComponent(channel) +
        '&back_url=' + encodeURIComponent(back_url) +
        '&vflag=' + vflag +
        '&time=' + Date.now()
    } else if (9 == payType) {
      url = wgAPI.apiURL + '/pay/AppStorePaySeer?' +
        'uid=' + uid +
        '&mimi_id=' + mimiId +
        '&svrId=' + 1 +
        '&token=' + token +
        '&game_id=' + gameId +
        '&timeSpan=' + Date.now() +
        '&product_id=' + productId +
        '&channel=' + encodeURIComponent(channel) +
        '&back_url=' + encodeURIComponent(back_url) +
        '&time=' + Date.now()
    } else {
      alert('')
      return
    }
    return url
  }

  // 
  wgAPI.queryTaomeeCoin = function (mimiId, mimiPwd) {
    if (!mimiId) {
      alert('')
    }

    var url = wgAPI.apiURL + '/pay/querytaomeecoin?' +
      '&mimiId=' + mimiId +
      '&mimiPwd=' + mimiPwd +
      '&timeSpan=' + Date.now()
    return url
  }

  // 
  //       
  wgAPI.addTaomeeCoin = function (mimiId, cardId, cardPwd, cardValue, amt) {
    if (!mimiId) {
      alert('')
    }
    if (!cardPwd) {
      alert('')
    }

    var url = wgAPI.apiURL + '/pay/addtaomeecoin?' +
      'mimiId=' + mimiId +
      '&cardId=' + cardId +
      '&cardPwd=' + cardPwd +
      '&cardValue=' + cardValue +
      '&amt=' + amt +
      '&timeSpan=' + Date.now()
    return url
  }

  // mimiId-1
  // token token  accountId  session tad 
  wgAPI.wechatUidBindTaomeeUid = function (token, accountId, session, tad) {
    if (!token) {
      alert('token')
    }
    if (!accountId) {
      alert('')
    }
    var taomeeGameId = MFC.entryInfo.platformGameId
    var gameId = MFC.entryInfo.platformGameFlag
    var url = wgAPI.apiURL + '/login/wechat_bind_taomee_account?' +
      'token=' + token +
      '&taomeeGameId=' + taomeeGameId +
      '&gameId=' + gameId +
      '&accountId=' + accountId +
      '&session=' + session +
      '&tad=' + tad +
      '&timeSpan=' + Date.now()
    return url
  }
})()
wgAPI.init()
window.wgAPI = wgAPI/*!

JSZip v3.1.2 - A Javascript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/master/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/master/LICENSE
*/
!function (a) {
  if ('object' == typeof exports && 'undefined' != typeof module) {
    module.exports = a()
  } else if ('function' == typeof define && define.amd) {
    define([], a)
  } else {
    var b
    b = 'undefined' != typeof window ? window : 'undefined' != typeof global ? global : 'undefined' != typeof self ? self : this, b.JSZip = a()
  }
}(function () {
  return function a (b, c, d) {
    function e (g, h) {
      if (!c[g]) {
        if (!b[g]) {
          var i = 'function' == typeof require && require
          if (!h && i) return i(g, !0)
          if (f) return f(g, !0)
          var j = new Error('Cannot find module \'' + g + '\'')
          throw j.code = 'MODULE_NOT_FOUND', j
        }
        var k = c[g] = {exports: {}}
        b[g][0].call(k.exports, function (a) {
          var c = b[g][1][a]
          return e(c ? c : a)
        }, k, k.exports, a, b, c, d)
      }
      return c[g].exports
    }

    for (var f = 'function' == typeof require && require, g = 0; g < d.length; g++) e(d[g])
    return e
  }({
    1: [function (a, b, c) {
      var d = a('./utils'), e = a('./support'), f = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/='
      c.encode = function (a) {
        for (var b, c, e, g, h, i, j, k = [], l = 0, m = a.length, n = m, o = 'string' !== d.getTypeOf(a); l < a.length;) n = m - l, o ? (b = a[l++], c = l < m ? a[l++] : 0, e = l < m ? a[l++] : 0) : (b = a.charCodeAt(l++), c = l < m ? a.charCodeAt(l++) : 0, e = l < m ? a.charCodeAt(l++) : 0), g = b >> 2, h = (3 & b) << 4 | c >> 4, i = n > 1 ? (15 & c) << 2 | e >> 6 : 64, j = n > 2 ? 63 & e : 64, k.push(f.charAt(g) + f.charAt(h) + f.charAt(i) + f.charAt(j))
        return k.join('')
      }, c.decode = function (a) {
        var b, c, d, g, h, i, j, k = 0, l = 0, m = 'data:'
        if (a.substr(m.length) === m) throw new Error('Invalid base64 input, it looks like a data url.')
        a = a.replace(/[^A-Za-z0-9\+\/\=]/g, '')
        var n = 3 * a.length / 4
        if (a.charAt(a.length - 1) === f.charAt(64) && n--, a.charAt(a.length - 2) === f.charAt(64) && n--, n % 1 !== 0) throw new Error('Invalid base64 input, bad content length.')
        var o
        for (o = e.uint8array ? new Uint8Array(0 | n) : new Array(0 | n); k < a.length;) g = f.indexOf(a.charAt(k++)), h = f.indexOf(a.charAt(k++)), i = f.indexOf(a.charAt(k++)), j = f.indexOf(a.charAt(k++)), b = g << 2 | h >> 4, c = (15 & h) << 4 | i >> 2, d = (3 & i) << 6 | j, o[l++] = b, 64 !== i && (o[l++] = c), 64 !== j && (o[l++] = d)
        return o
      }
    }, {'./support': 30, './utils': 32}],
    2: [function (a, b, c) {
      function d (a, b, c, d, e) {
        this.compressedSize = a, this.uncompressedSize = b, this.crc32 = c, this.compression = d, this.compressedContent = e
      }

      var e = a('./external'), f = a('./stream/DataWorker'), g = a('./stream/DataLengthProbe'),
        h = a('./stream/Crc32Probe'), g = a('./stream/DataLengthProbe')
      d.prototype = {
        getContentWorker: function () {
          var a = new f(e.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new g('data_length')),
            b = this
          return a.on('end', function () {
            if (this.streamInfo.data_length !== b.uncompressedSize) throw new Error('Bug : uncompressed data size mismatch')
          }), a
        }, getCompressedWorker: function () {
          return new f(e.Promise.resolve(this.compressedContent)).withStreamInfo('compressedSize', this.compressedSize).withStreamInfo('uncompressedSize', this.uncompressedSize).withStreamInfo('crc32', this.crc32).withStreamInfo('compression', this.compression)
        }
      }, d.createWorkerFrom = function (a, b, c) {
        return a.pipe(new h).pipe(new g('uncompressedSize')).pipe(b.compressWorker(c)).pipe(new g('compressedSize')).withStreamInfo('compression', b)
      }, b.exports = d
    }, {'./external': 6, './stream/Crc32Probe': 25, './stream/DataLengthProbe': 26, './stream/DataWorker': 27}],
    3: [function (a, b, c) {
      var d = a('./stream/GenericWorker')
      c.STORE = {
        magic: '\0\0', compressWorker: function (a) {
          return new d('STORE compression')
        }, uncompressWorker: function () {
          return new d('STORE decompression')
        }
      }, c.DEFLATE = a('./flate')
    }, {'./flate': 7, './stream/GenericWorker': 28}],
    4: [function (a, b, c) {
      function d () {
        for (var a, b = [], c = 0; c < 256; c++) {
          a = c
          for (var d = 0; d < 8; d++) a = 1 & a ? 3988292384 ^ a >>> 1 : a >>> 1
          b[c] = a
        }
        return b
      }

      function e (a, b, c, d) {
        var e = h, f = d + c
        a ^= -1
        for (var g = d; g < f; g++) a = a >>> 8 ^ e[255 & (a ^ b[g])]
        return a ^ -1
      }

      function f (a, b, c, d) {
        var e = h, f = d + c
        a ^= -1
        for (var g = d; g < f; g++) a = a >>> 8 ^ e[255 & (a ^ b.charCodeAt(g))]
        return a ^ -1
      }

      var g = a('./utils'), h = d()
      b.exports = function (a, b) {
        if ('undefined' == typeof a || !a.length) return 0
        var c = 'string' !== g.getTypeOf(a)
        return c ? e(0 | b, a, a.length, 0) : f(0 | b, a, a.length, 0)
      }
    }, {'./utils': 32}],
    5: [function (a, b, c) {
      c.base64 = !1, c.binary = !1, c.dir = !1, c.createFolders = !0, c.date = null, c.compression = null, c.compressionOptions = null, c.comment = null, c.unixPermissions = null, c.dosPermissions = null
    }, {}],
    6: [function (a, b, c) {
      var d = null
      d = 'undefined' != typeof Promise ? Promise : a('lie'), b.exports = {Promise: d}
    }, {lie: 58}],
    7: [function (a, b, c) {
      function d (a, b) {
        h.call(this, 'FlateWorker/' + a), this._pako = new f[a]({raw: !0, level: b.level || -1}), this.meta = {}
        var c = this
        this._pako.onData = function (a) {
          c.push({data: a, meta: c.meta})
        }
      }

      var e = 'undefined' != typeof Uint8Array && 'undefined' != typeof Uint16Array && 'undefined' != typeof Uint32Array,
        f = a('pako'), g = a('./utils'), h = a('./stream/GenericWorker'), i = e ? 'uint8array' : 'array'
      c.magic = '\b\0', g.inherits(d, h), d.prototype.processChunk = function (a) {
        this.meta = a.meta, this._pako.push(g.transformTo(i, a.data), !1)
      }, d.prototype.flush = function () {
        h.prototype.flush.call(this), this._pako.push([], !0)
      }, d.prototype.cleanUp = function () {
        h.prototype.cleanUp.call(this), this._pako = null
      }, c.compressWorker = function (a) {
        return new d('Deflate', a)
      }, c.uncompressWorker = function () {
        return new d('Inflate', {})
      }
    }, {'./stream/GenericWorker': 28, './utils': 32, pako: 59}],
    8: [function (a, b, c) {
      function d (a, b, c, d) {
        f.call(this, 'ZipFileWorker'), this.bytesWritten = 0, this.zipComment = b, this.zipPlatform = c, this.encodeFileName = d, this.streamFiles = a, this.accumulate = !1, this.contentBuffer = [], this.dirRecords = [], this.currentSourceOffset = 0, this.entriesCount = 0, this.currentFile = null, this._sources = []
      }

      var e = a('../utils'), f = a('../stream/GenericWorker'), g = a('../utf8'), h = a('../crc32'),
        i = a('../signature'), j = function (a, b) {
          var c, d = ''
          for (c = 0; c < b; c++) d += String.fromCharCode(255 & a), a >>>= 8
          return d
        }, k = function (a, b) {
          var c = a
          return a || (c = b ? 16893 : 33204), (65535 & c) << 16
        }, l = function (a, b) {
          return 63 & (a || 0)
        }, m = function (a, b, c, d, f, m) {
          var n, o, p = a.file, q = a.compression, r = m !== g.utf8encode, s = e.transformTo('string', m(p.name)),
            t = e.transformTo('string', g.utf8encode(p.name)), u = p.comment, v = e.transformTo('string', m(u)),
            w = e.transformTo('string', g.utf8encode(u)), x = t.length !== p.name.length, y = w.length !== u.length,
            z = '', A = '', B = '', C = p.dir, D = p.date, E = {crc32: 0, compressedSize: 0, uncompressedSize: 0}
          b && !c || (E.crc32 = a.crc32, E.compressedSize = a.compressedSize, E.uncompressedSize = a.uncompressedSize)
          var F = 0
          b && (F |= 8), r || !x && !y || (F |= 2048)
          var G = 0, H = 0
          C && (G |= 16), 'UNIX' === f ? (H = 798, G |= k(p.unixPermissions, C)) : (H = 20, G |= l(p.dosPermissions, C)), n = D.getUTCHours(), n <<= 6, n |= D.getUTCMinutes(), n <<= 5, n |= D.getUTCSeconds() / 2, o = D.getUTCFullYear() - 1980, o <<= 4, o |= D.getUTCMonth() + 1, o <<= 5, o |= D.getUTCDate(), x && (A = j(1, 1) + j(h(s), 4) + t, z += 'up' + j(A.length, 2) + A), y && (B = j(1, 1) + j(h(v), 4) + w, z += 'uc' + j(B.length, 2) + B)
          var I = ''
          I += '\n\0', I += j(F, 2), I += q.magic, I += j(n, 2), I += j(o, 2), I += j(E.crc32, 4), I += j(E.compressedSize, 4), I += j(E.uncompressedSize, 4), I += j(s.length, 2), I += j(z.length, 2)
          var J = i.LOCAL_FILE_HEADER + I + s + z,
            K = i.CENTRAL_FILE_HEADER + j(H, 2) + I + j(v.length, 2) + '\0\0\0\0' + j(G, 4) + j(d, 4) + s + z + v
          return {fileRecord: J, dirRecord: K}
        }, n = function (a, b, c, d, f) {
          var g = '', h = e.transformTo('string', f(d))
          return g = i.CENTRAL_DIRECTORY_END + '\0\0\0\0' + j(a, 2) + j(a, 2) + j(b, 4) + j(c, 4) + j(h.length, 2) + h
        }, o = function (a) {
          var b = ''
          return b = i.DATA_DESCRIPTOR + j(a.crc32, 4) + j(a.compressedSize, 4) + j(a.uncompressedSize, 4)
        }
      e.inherits(d, f), d.prototype.push = function (a) {
        var b = a.meta.percent || 0, c = this.entriesCount, d = this._sources.length
        this.accumulate ? this.contentBuffer.push(a) : (this.bytesWritten += a.data.length, f.prototype.push.call(this, {
          data: a.data,
          meta: {currentFile: this.currentFile, percent: c ? (b + 100 * (c - d - 1)) / c : 100}
        }))
      }, d.prototype.openedSource = function (a) {
        this.currentSourceOffset = this.bytesWritten, this.currentFile = a.file.name
        var b = this.streamFiles && !a.file.dir
        if (b) {
          var c = m(a, b, !1, this.currentSourceOffset, this.zipPlatform, this.encodeFileName)
          this.push({data: c.fileRecord, meta: {percent: 0}})
        } else {
          this.accumulate = !0
        }
      }, d.prototype.closedSource = function (a) {
        this.accumulate = !1
        var b = this.streamFiles && !a.file.dir,
          c = m(a, b, !0, this.currentSourceOffset, this.zipPlatform, this.encodeFileName)
        if (this.dirRecords.push(c.dirRecord), b) {
          this.push({
            data: o(a),
            meta: {percent: 100}
          })
        } else {
          for (this.push({
            data: c.fileRecord,
            meta: {percent: 0}
          }); this.contentBuffer.length;) {
            this.push(this.contentBuffer.shift())
          }
        }
        this.currentFile = null
      }, d.prototype.flush = function () {
        for (var a = this.bytesWritten, b = 0; b < this.dirRecords.length; b++) {
          this.push({
            data: this.dirRecords[b],
            meta: {percent: 100}
          })
        }
        var c = this.bytesWritten - a, d = n(this.dirRecords.length, c, a, this.zipComment, this.encodeFileName)
        this.push({data: d, meta: {percent: 100}})
      }, d.prototype.prepareNextSource = function () {
        this.previous = this._sources.shift(), this.openedSource(this.previous.streamInfo), this.isPaused ? this.previous.pause() : this.previous.resume()
      }, d.prototype.registerPrevious = function (a) {
        this._sources.push(a)
        var b = this
        return a.on('data', function (a) {
          b.processChunk(a)
        }), a.on('end', function () {
          b.closedSource(b.previous.streamInfo), b._sources.length ? b.prepareNextSource() : b.end()
        }), a.on('error', function (a) {
          b.error(a)
        }), this
      }, d.prototype.resume = function () {
        return !!f.prototype.resume.call(this) && (!this.previous && this._sources.length ? (this.prepareNextSource(), !0) : this.previous || this._sources.length || this.generatedError ? void 0 : (this.end(), !0))
      }, d.prototype.error = function (a) {
        var b = this._sources
        if (!f.prototype.error.call(this, a)) return !1
        for (var c = 0; c < b.length; c++) {
          try {
            b[c].error(a)
          } catch (a) {
          }
        }
        return !0
      }, d.prototype.lock = function () {
        f.prototype.lock.call(this)
        for (var a = this._sources, b = 0; b < a.length; b++) a[b].lock()
      }, b.exports = d
    }, {'../crc32': 4, '../signature': 23, '../stream/GenericWorker': 28, '../utf8': 31, '../utils': 32}],
    9: [function (a, b, c) {
      var d = a('../compressions'), e = a('./ZipFileWorker'), f = function (a, b) {
        var c = a || b, e = d[c]
        if (!e) throw new Error(c + ' is not a valid compression method !')
        return e
      }
      c.generateWorker = function (a, b, c) {
        var d = new e(b.streamFiles, c, b.platform, b.encodeFileName), g = 0
        try {
          a.forEach(function (a, c) {
            g++
            var e = f(c.options.compression, b.compression),
              h = c.options.compressionOptions || b.compressionOptions || {}, i = c.dir, j = c.date
            c._compressWorker(e, h).withStreamInfo('file', {
              name: a,
              dir: i,
              date: j,
              comment: c.comment || '',
              unixPermissions: c.unixPermissions,
              dosPermissions: c.dosPermissions
            }).pipe(d)
          }), d.entriesCount = g
        } catch (h) {
          d.error(h)
        }
        return d
      }
    }, {'../compressions': 3, './ZipFileWorker': 8}],
    10: [function (a, b, c) {
      function d () {
        if (!(this instanceof d)) return new d
        if (arguments.length) throw new Error('The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.')
        this.files = {}, this.comment = null, this.root = '', this.clone = function () {
          var a = new d
          for (var b in this) 'function' != typeof this[b] && (a[b] = this[b])
          return a
        }
      }

      d.prototype = a('./object'), d.prototype.loadAsync = a('./load'), d.support = a('./support'), d.defaults = a('./defaults'), d.version = '3.1.2', d.loadAsync = function (a, b) {
        return (new d).loadAsync(a, b)
      }, d.external = a('./external'), b.exports = d
    }, {'./defaults': 5, './external': 6, './load': 11, './object': 15, './support': 30}],
    11: [function (a, b, c) {
      function d (a) {
        return new f.Promise(function (b, c) {
          var d = a.decompressed.getContentWorker().pipe(new i)
          d.on('error', function (a) {
            c(a)
          }).on('end', function () {
            d.streamInfo.crc32 !== a.decompressed.crc32 ? c(new Error('Corrupted zip : CRC32 mismatch')) : b()
          }).resume()
        })
      }

      var e = a('./utils'), f = a('./external'), g = a('./utf8'), e = a('./utils'), h = a('./zipEntries'),
        i = a('./stream/Crc32Probe'), j = a('./nodejsUtils')
      b.exports = function (a, b) {
        var c = this
        return b = e.extend(b || {}, {
          base64: !1,
          checkCRC32: !1,
          optimizedBinaryString: !1,
          createFolders: !1,
          decodeFileName: g.utf8decode
        }), j.isNode && j.isStream(a) ? f.Promise.reject(new Error('JSZip can\'t accept a stream when loading a zip file.')) : e.prepareContent('the loaded zip file', a, !0, b.optimizedBinaryString, b.base64).then(function (a) {
          var c = new h(b)
          return c.load(a), c
        }).then(function (a) {
          var c = [f.Promise.resolve(a)], e = a.files
          if (b.checkCRC32) for (var g = 0; g < e.length; g++) c.push(d(e[g]))
          return f.Promise.all(c)
        }).then(function (a) {
          for (var d = a.shift(), e = d.files, f = 0; f < e.length; f++) {
            var g = e[f]
            c.file(g.fileNameStr, g.decompressed, {
              binary: !0,
              optimizedBinaryString: !0,
              date: g.date,
              dir: g.dir,
              comment: g.fileCommentStr.length ? g.fileCommentStr : null,
              unixPermissions: g.unixPermissions,
              dosPermissions: g.dosPermissions,
              createFolders: b.createFolders
            })
          }
          return d.zipComment.length && (c.comment = d.zipComment), c
        })
      }
    }, {
      './external': 6,
      './nodejsUtils': 14,
      './stream/Crc32Probe': 25,
      './utf8': 31,
      './utils': 32,
      './zipEntries': 33
    }],
    12: [function (a, b, c) {
      function d (a, b) {
        f.call(this, 'Nodejs stream input adapter for ' + a), this._upstreamEnded = !1, this._bindStream(b)
      }

      var e = a('../utils'), f = a('../stream/GenericWorker')
      e.inherits(d, f), d.prototype._bindStream = function (a) {
        var b = this
        this._stream = a, a.pause(), a.on('data', function (a) {
          b.push({data: a, meta: {percent: 0}})
        }).on('error', function (a) {
          b.isPaused ? this.generatedError = a : b.error(a)
        }).on('end', function () {
          b.isPaused ? b._upstreamEnded = !0 : b.end()
        })
      }, d.prototype.pause = function () {
        return !!f.prototype.pause.call(this) && (this._stream.pause(), !0)
      }, d.prototype.resume = function () {
        return !!f.prototype.resume.call(this) && (this._upstreamEnded ? this.end() : this._stream.resume(), !0)
      }, b.exports = d
    }, {'../stream/GenericWorker': 28, '../utils': 32}],
    13: [function (a, b, c) {
      function d (a, b, c) {
        e.call(this, b), this._helper = a
        var d = this
        a.on('data', function (a, b) {
          d.push(a) || d._helper.pause(), c && c(b)
        }).on('error', function (a) {
          d.emit('error', a)
        }).on('end', function () {
          d.push(null)
        })
      }

      var e = a('readable-stream').Readable, f = a('util')
      f.inherits(d, e), d.prototype._read = function () {
        this._helper.resume()
      }, b.exports = d
    }, {'readable-stream': 16, util: void 0}],
    14: [function (a, b, c) {
      b.exports = {
        isNode: 'undefined' != typeof Buffer, newBuffer: function (a, b) {
          return new Buffer(a, b)
        }, isBuffer: function (a) {
          return Buffer.isBuffer(a)
        }, isStream: function (a) {
          return a && 'function' == typeof a.on && 'function' == typeof a.pause && 'function' == typeof a.resume
        }
      }
    }, {}],
    15: [function (a, b, c) {
      function d (a) {
        return '[object RegExp]' === Object.prototype.toString.call(a)
      }

      var e = a('./utf8'), f = a('./utils'), g = a('./stream/GenericWorker'), h = a('./stream/StreamHelper'),
        i = a('./defaults'), j = a('./compressedObject'), k = a('./zipObject'), l = a('./generate'),
        m = a('./nodejsUtils'), n = a('./nodejs/NodejsStreamInputAdapter'), o = function (a, b, c) {
          var d, e = f.getTypeOf(b), h = f.extend(c || {}, i)
          h.date = h.date || new Date, null !== h.compression && (h.compression = h.compression.toUpperCase()), 'string' == typeof h.unixPermissions && (h.unixPermissions = parseInt(h.unixPermissions, 8)), h.unixPermissions && 16384 & h.unixPermissions && (h.dir = !0), h.dosPermissions && 16 & h.dosPermissions && (h.dir = !0), h.dir && (a = q(a)), h.createFolders && (d = p(a)) && r.call(this, d, !0)
          var l = 'string' === e && h.binary === !1 && h.base64 === !1
          c && 'undefined' != typeof c.binary || (h.binary = !l)
          var o = b instanceof j && 0 === b.uncompressedSize;
          (o || h.dir || !b || 0 === b.length) && (h.base64 = !1, h.binary = !0, b = '', h.compression = 'STORE', e = 'string')
          var s = null
          s = b instanceof j || b instanceof g ? b : m.isNode && m.isStream(b) ? new n(a, b) : f.prepareContent(a, b, h.binary, h.optimizedBinaryString, h.base64)
          var t = new k(a, s, h)
          this.files[a] = t
        }, p = function (a) {
          '/' === a.slice(-1) && (a = a.substring(0, a.length - 1))
          var b = a.lastIndexOf('/')
          return b > 0 ? a.substring(0, b) : ''
        }, q = function (a) {
          return '/' !== a.slice(-1) && (a += '/'), a
        }, r = function (a, b) {
          return b = 'undefined' != typeof b ? b : i.createFolders, a = q(a), this.files[a] || o.call(this, a, null, {
            dir: !0,
            createFolders: b
          }), this.files[a]
        }, s = {
          load: function () {
            throw new Error('This method has been removed in JSZip 3.0, please check the upgrade guide.')
          }, forEach: function (a) {
            var b, c, d
            for (b in this.files) this.files.hasOwnProperty(b) && (d = this.files[b], c = b.slice(this.root.length, b.length), c && b.slice(0, this.root.length) === this.root && a(c, d))
          }, filter: function (a) {
            var b = []
            return this.forEach(function (c, d) {
              a(c, d) && b.push(d)
            }), b
          }, file: function (a, b, c) {
            if (1 === arguments.length) {
              if (d(a)) {
                var e = a
                return this.filter(function (a, b) {
                  return !b.dir && e.test(a)
                })
              }
              var f = this.files[this.root + a]
              return f && !f.dir ? f : null
            }
            return a = this.root + a, o.call(this, a, b, c), this
          }, folder: function (a) {
            if (!a) return this
            if (d(a)) {
              return this.filter(function (b, c) {
                return c.dir && a.test(b)
              })
            }
            var b = this.root + a, c = r.call(this, b), e = this.clone()
            return e.root = c.name, e
          }, remove: function (a) {
            a = this.root + a
            var b = this.files[a]
            if (b || ('/' !== a.slice(-1) && (a += '/'), b = this.files[a]), b && !b.dir) {
              delete this.files[a]
            } else {
              for (var c = this.filter(function (b, c) {
                return c.name.slice(0, a.length) === a
              }), d = 0; d < c.length; d++) {
                delete this.files[c[d].name]
              }
            }
            return this
          }, generate: function (a) {
            throw new Error('This method has been removed in JSZip 3.0, please check the upgrade guide.')
          }, generateInternalStream: function (a) {
            var b, c = {}
            try {
              if (c = f.extend(a || {}, {
                streamFiles: !1,
                compression: 'STORE',
                compressionOptions: null,
                type: '',
                platform: 'DOS',
                comment: null,
                mimeType: 'application/zip',
                encodeFileName: e.utf8encode
              }), c.type = c.type.toLowerCase(), c.compression = c.compression.toUpperCase(), 'binarystring' === c.type && (c.type = 'string'), !c.type) {
                throw new Error('No output type specified.')
              }
              f.checkSupport(c.type), 'darwin' !== c.platform && 'freebsd' !== c.platform && 'linux' !== c.platform && 'sunos' !== c.platform || (c.platform = 'UNIX'), 'win32' === c.platform && (c.platform = 'DOS')
              var d = c.comment || this.comment || ''
              b = l.generateWorker(this, c, d)
            } catch (i) {
              b = new g('error'), b.error(i)
            }
            return new h(b, c.type || 'string', c.mimeType)
          }, generateAsync: function (a, b) {
            return this.generateInternalStream(a).accumulate(b)
          }, generateNodeStream: function (a, b) {
            return a = a || {}, a.type || (a.type = 'nodebuffer'), this.generateInternalStream(a).toNodejsStream(b)
          }
        }
      b.exports = s
    }, {
      './compressedObject': 2,
      './defaults': 5,
      './generate': 9,
      './nodejs/NodejsStreamInputAdapter': 12,
      './nodejsUtils': 14,
      './stream/GenericWorker': 28,
      './stream/StreamHelper': 29,
      './utf8': 31,
      './utils': 32,
      './zipObject': 35
    }],
    16: [function (a, b, c) {
      b.exports = a('stream')
    }, {stream: void 0}],
    17: [function (a, b, c) {
      function d (a) {
        e.call(this, a)
        for (var b = 0; b < this.data.length; b++) a[b] = 255 & a[b]
      }

      var e = a('./DataReader'), f = a('../utils')
      f.inherits(d, e), d.prototype.byteAt = function (a) {
        return this.data[this.zero + a]
      }, d.prototype.lastIndexOfSignature = function (a) {
        for (var b = a.charCodeAt(0), c = a.charCodeAt(1), d = a.charCodeAt(2), e = a.charCodeAt(3), f = this.length - 4; f >= 0; --f) if (this.data[f] === b && this.data[f + 1] === c && this.data[f + 2] === d && this.data[f + 3] === e) return f - this.zero
        return -1
      }, d.prototype.readAndCheckSignature = function (a) {
        var b = a.charCodeAt(0), c = a.charCodeAt(1), d = a.charCodeAt(2), e = a.charCodeAt(3), f = this.readData(4)
        return b === f[0] && c === f[1] && d === f[2] && e === f[3]
      }, d.prototype.readData = function (a) {
        if (this.checkOffset(a), 0 === a) return []
        var b = this.data.slice(this.zero + this.index, this.zero + this.index + a)
        return this.index += a, b
      }, b.exports = d
    }, {'../utils': 32, './DataReader': 18}],
    18: [function (a, b, c) {
      function d (a) {
        this.data = a, this.length = a.length, this.index = 0, this.zero = 0
      }

      var e = a('../utils')
      d.prototype = {
        checkOffset: function (a) {
          this.checkIndex(this.index + a)
        }, checkIndex: function (a) {
          if (this.length < this.zero + a || a < 0) throw new Error('End of data reached (data length = ' + this.length + ', asked index = ' + a + '). Corrupted zip ?')
        }, setIndex: function (a) {
          this.checkIndex(a), this.index = a
        }, skip: function (a) {
          this.setIndex(this.index + a)
        }, byteAt: function (a) {
        }, readInt: function (a) {
          var b, c = 0
          for (this.checkOffset(a), b = this.index + a - 1; b >= this.index; b--) c = (c << 8) + this.byteAt(b)
          return this.index += a, c
        }, readString: function (a) {
          return e.transformTo('string', this.readData(a))
        }, readData: function (a) {
        }, lastIndexOfSignature: function (a) {
        }, readAndCheckSignature: function (a) {
        }, readDate: function () {
          var a = this.readInt(4)
          return new Date(Date.UTC((a >> 25 & 127) + 1980, (a >> 21 & 15) - 1, a >> 16 & 31, a >> 11 & 31, a >> 5 & 63, (31 & a) << 1))
        }
      }, b.exports = d
    }, {'../utils': 32}],
    19: [function (a, b, c) {
      function d (a) {
        e.call(this, a)
      }

      var e = a('./Uint8ArrayReader'), f = a('../utils')
      f.inherits(d, e), d.prototype.readData = function (a) {
        this.checkOffset(a)
        var b = this.data.slice(this.zero + this.index, this.zero + this.index + a)
        return this.index += a, b
      }, b.exports = d
    }, {'../utils': 32, './Uint8ArrayReader': 21}],
    20: [function (a, b, c) {
      function d (a) {
        e.call(this, a)
      }

      var e = a('./DataReader'), f = a('../utils')
      f.inherits(d, e), d.prototype.byteAt = function (a) {
        return this.data.charCodeAt(this.zero + a)
      }, d.prototype.lastIndexOfSignature = function (a) {
        return this.data.lastIndexOf(a) - this.zero
      }, d.prototype.readAndCheckSignature = function (a) {
        var b = this.readData(4)
        return a === b
      }, d.prototype.readData = function (a) {
        this.checkOffset(a)
        var b = this.data.slice(this.zero + this.index, this.zero + this.index + a)
        return this.index += a, b
      }, b.exports = d
    }, {'../utils': 32, './DataReader': 18}],
    21: [function (a, b, c) {
      function d (a) {
        e.call(this, a)
      }

      var e = a('./ArrayReader'), f = a('../utils')
      f.inherits(d, e), d.prototype.readData = function (a) {
        if (this.checkOffset(a), 0 === a) return new Uint8Array(0)
        var b = this.data.subarray(this.zero + this.index, this.zero + this.index + a)
        return this.index += a, b
      }, b.exports = d
    }, {'../utils': 32, './ArrayReader': 17}],
    22: [function (a, b, c) {
      var d = a('../utils'), e = a('../support'), f = a('./ArrayReader'), g = a('./StringReader'),
        h = a('./NodeBufferReader'), i = a('./Uint8ArrayReader')
      b.exports = function (a) {
        var b = d.getTypeOf(a)
        return d.checkSupport(b), 'string' !== b || e.uint8array ? 'nodebuffer' === b ? new h(a) : e.uint8array ? new i(d.transformTo('uint8array', a)) : new f(d.transformTo('array', a)) : new g(a)
      }
    }, {
      '../support': 30,
      '../utils': 32,
      './ArrayReader': 17,
      './NodeBufferReader': 19,
      './StringReader': 20,
      './Uint8ArrayReader': 21
    }],
    23: [function (a, b, c) {
      c.LOCAL_FILE_HEADER = 'PK', c.CENTRAL_FILE_HEADER = 'PK', c.CENTRAL_DIRECTORY_END = 'PK', c.ZIP64_CENTRAL_DIRECTORY_LOCATOR = 'PK', c.ZIP64_CENTRAL_DIRECTORY_END = 'PK', c.DATA_DESCRIPTOR = 'PK\b'
    }, {}],
    24: [function (a, b, c) {
      function d (a) {
        e.call(this, 'ConvertWorker to ' + a), this.destType = a
      }

      var e = a('./GenericWorker'), f = a('../utils')
      f.inherits(d, e), d.prototype.processChunk = function (a) {
        this.push({data: f.transformTo(this.destType, a.data), meta: a.meta})
      }, b.exports = d
    }, {'../utils': 32, './GenericWorker': 28}],
    25: [function (a, b, c) {
      function d () {
        e.call(this, 'Crc32Probe')
      }

      var e = a('./GenericWorker'), f = a('../crc32'), g = a('../utils')
      g.inherits(d, e), d.prototype.processChunk = function (a) {
        this.streamInfo.crc32 = f(a.data, this.streamInfo.crc32 || 0), this.push(a)
      }, b.exports = d
    }, {'../crc32': 4, '../utils': 32, './GenericWorker': 28}],
    26: [function (a, b, c) {
      function d (a) {
        f.call(this, 'DataLengthProbe for ' + a), this.propName = a, this.withStreamInfo(a, 0)
      }

      var e = a('../utils'), f = a('./GenericWorker')
      e.inherits(d, f), d.prototype.processChunk = function (a) {
        if (a) {
          var b = this.streamInfo[this.propName] || 0
          this.streamInfo[this.propName] = b + a.data.length
        }
        f.prototype.processChunk.call(this, a)
      }, b.exports = d
    }, {'../utils': 32, './GenericWorker': 28}],
    27: [function (a, b, c) {
      function d (a) {
        f.call(this, 'DataWorker')
        var b = this
        this.dataIsReady = !1, this.index = 0, this.max = 0, this.data = null, this.type = '', this._tickScheduled = !1, a.then(function (a) {
          b.dataIsReady = !0, b.data = a, b.max = a && a.length || 0, b.type = e.getTypeOf(a), b.isPaused || b._tickAndRepeat()
        }, function (a) {
          b.error(a)
        })
      }

      var e = a('../utils'), f = a('./GenericWorker'), g = 16384
      e.inherits(d, f), d.prototype.cleanUp = function () {
        f.prototype.cleanUp.call(this), this.data = null
      }, d.prototype.resume = function () {
        return !!f.prototype.resume.call(this) && (!this._tickScheduled && this.dataIsReady && (this._tickScheduled = !0, e.delay(this._tickAndRepeat, [], this)), !0)
      }, d.prototype._tickAndRepeat = function () {
        this._tickScheduled = !1, this.isPaused || this.isFinished || (this._tick(), this.isFinished || (e.delay(this._tickAndRepeat, [], this), this._tickScheduled = !0))
      }, d.prototype._tick = function () {
        if (this.isPaused || this.isFinished) return !1
        var a = g, b = null, c = Math.min(this.max, this.index + a)
        if (this.index >= this.max) return this.end()
        switch (this.type) {
          case'string':
            b = this.data.substring(this.index, c)
            break
          case'uint8array':
            b = this.data.subarray(this.index, c)
            break
          case'array':
          case'nodebuffer':
            b = this.data.slice(this.index, c)
        }
        return this.index = c, this.push({data: b, meta: {percent: this.max ? this.index / this.max * 100 : 0}})
      }, b.exports = d
    }, {'../utils': 32, './GenericWorker': 28}],
    28: [function (a, b, c) {
      function d (a) {
        this.name = a || 'default', this.streamInfo = {}, this.generatedError = null, this.extraStreamInfo = {}, this.isPaused = !0, this.isFinished = !1, this.isLocked = !1, this._listeners = {
          data: [],
          end: [],
          error: []
        }, this.previous = null
      }

      d.prototype = {
        push: function (a) {
          this.emit('data', a)
        }, end: function () {
          if (this.isFinished) return !1
          this.flush()
          try {
            this.emit('end'), this.cleanUp(), this.isFinished = !0
          } catch (a) {
            this.emit('error', a)
          }
          return !0
        }, error: function (a) {
          return !this.isFinished && (this.isPaused ? this.generatedError = a : (this.isFinished = !0, this.emit('error', a), this.previous && this.previous.error(a), this.cleanUp()), !0)
        }, on: function (a, b) {
          return this._listeners[a].push(b), this
        }, cleanUp: function () {
          this.streamInfo = this.generatedError = this.extraStreamInfo = null, this._listeners = []
        }, emit: function (a, b) {
          if (this._listeners[a]) for (var c = 0; c < this._listeners[a].length; c++) this._listeners[a][c].call(this, b)
        }, pipe: function (a) {
          return a.registerPrevious(this)
        }, registerPrevious: function (a) {
          if (this.isLocked) throw new Error('The stream \'' + this + '\' has already been used.')
          this.streamInfo = a.streamInfo, this.mergeStreamInfo(), this.previous = a
          var b = this
          return a.on('data', function (a) {
            b.processChunk(a)
          }), a.on('end', function () {
            b.end()
          }), a.on('error', function (a) {
            b.error(a)
          }), this
        }, pause: function () {
          return !this.isPaused && !this.isFinished && (this.isPaused = !0, this.previous && this.previous.pause(), !0)
        }, resume: function () {
          if (!this.isPaused || this.isFinished) return !1
          this.isPaused = !1
          var a = !1
          return this.generatedError && (this.error(this.generatedError), a = !0), this.previous && this.previous.resume(), !a
        }, flush: function () {
        }, processChunk: function (a) {
          this.push(a)
        }, withStreamInfo: function (a, b) {
          return this.extraStreamInfo[a] = b, this.mergeStreamInfo(), this
        }, mergeStreamInfo: function () {
          for (var a in this.extraStreamInfo) this.extraStreamInfo.hasOwnProperty(a) && (this.streamInfo[a] = this.extraStreamInfo[a])
        }, lock: function () {
          if (this.isLocked) throw new Error('The stream \'' + this + '\' has already been used.')
          this.isLocked = !0, this.previous && this.previous.lock()
        }, toString: function () {
          var a = 'Worker ' + this.name
          return this.previous ? this.previous + ' -> ' + a : a
        }
      }, b.exports = d
    }, {}],
    29: [function (a, b, c) {
      function d (a, b, c) {
        switch (a) {
          case'blob':
            return h.newBlob(h.transformTo('arraybuffer', b), c)
          case'base64':
            return k.encode(b)
          default:
            return h.transformTo(a, b)
        }
      }

      function e (a, b) {
        var c, d = 0, e = null, f = 0
        for (c = 0; c < b.length; c++) f += b[c].length
        switch (a) {
          case'string':
            return b.join('')
          case'array':
            return Array.prototype.concat.apply([], b)
          case'uint8array':
            for (e = new Uint8Array(f), c = 0; c < b.length; c++) e.set(b[c], d), d += b[c].length
            return e
          case'nodebuffer':
            return Buffer.concat(b)
          default:
            throw new Error('concat : unsupported type \'' + a + '\'')
        }
      }

      function f (a, b) {
        return new m.Promise(function (c, f) {
          var g = [], h = a._internalType, i = a._outputType, j = a._mimeType
          a.on('data', function (a, c) {
            g.push(a), b && b(c)
          }).on('error', function (a) {
            g = [], f(a)
          }).on('end', function () {
            try {
              var a = d(i, e(h, g), j)
              c(a)
            } catch (b) {
              f(b)
            }
            g = []
          }).resume()
        })
      }

      function g (a, b, c) {
        var d = b
        switch (b) {
          case'blob':
          case'arraybuffer':
            d = 'uint8array'
            break
          case'base64':
            d = 'string'
        }
        try {
          this._internalType = d, this._outputType = b, this._mimeType = c, h.checkSupport(d), this._worker = a.pipe(new i(d)), a.lock()
        } catch (e) {
          this._worker = new j('error'), this._worker.error(e)
        }
      }

      var h = a('../utils'), i = a('./ConvertWorker'), j = a('./GenericWorker'), k = a('../base64'),
        l = a('../support'), m = a('../external'), n = null
      if (l.nodestream) {
        try {
          n = a('../nodejs/NodejsStreamOutputAdapter')
        } catch (o) {
        }
      }
      g.prototype = {
        accumulate: function (a) {
          return f(this, a)
        }, on: function (a, b) {
          var c = this
          return 'data' === a ? this._worker.on(a, function (a) {
            b.call(c, a.data, a.meta)
          }) : this._worker.on(a, function () {
            h.delay(b, arguments, c)
          }), this
        }, resume: function () {
          return h.delay(this._worker.resume, [], this._worker), this
        }, pause: function () {
          return this._worker.pause(), this
        }, toNodejsStream: function (a) {
          if (h.checkSupport('nodestream'), 'nodebuffer' !== this._outputType) throw new Error(this._outputType + ' is not supported by this method')
          return new n(this, {objectMode: 'nodebuffer' !== this._outputType}, a)
        }
      }, b.exports = g
    }, {
      '../base64': 1,
      '../external': 6,
      '../nodejs/NodejsStreamOutputAdapter': 13,
      '../support': 30,
      '../utils': 32,
      './ConvertWorker': 24,
      './GenericWorker': 28
    }],
    30: [function (a, b, c) {
      if (c.base64 = !0, c.array = !0, c.string = !0, c.arraybuffer = 'undefined' != typeof ArrayBuffer && 'undefined' != typeof Uint8Array, c.nodebuffer = 'undefined' != typeof Buffer, c.uint8array = 'undefined' != typeof Uint8Array, 'undefined' == typeof ArrayBuffer) {
        c.blob = !1
      } else {
        var d = new ArrayBuffer(0)
        try {
          c.blob = 0 === new Blob([d], {type: 'application/zip'}).size
        } catch (e) {
          try {
            var f = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder,
              g = new f
            g.append(d), c.blob = 0 === g.getBlob('application/zip').size
          } catch (e) {
            c.blob = !1
          }
        }
      }
      try {
        c.nodestream = !!a('readable-stream').Readable
      } catch (e) {
        c.nodestream = !1
      }
    }, {'readable-stream': 16}],
    31: [function (a, b, c) {
      function d () {
        i.call(this, 'utf-8 decode'), this.leftOver = null
      }

      function e () {
        i.call(this, 'utf-8 encode')
      }

      for (var f = a('./utils'), g = a('./support'), h = a('./nodejsUtils'), i = a('./stream/GenericWorker'), j = new Array(256), k = 0; k < 256; k++) j[k] = k >= 252 ? 6 : k >= 248 ? 5 : k >= 240 ? 4 : k >= 224 ? 3 : k >= 192 ? 2 : 1
      j[254] = j[254] = 1
      var l = function (a) {
        var b, c, d, e, f, h = a.length, i = 0
        for (e = 0; e < h; e++) c = a.charCodeAt(e), 55296 === (64512 & c) && e + 1 < h && (d = a.charCodeAt(e + 1), 56320 === (64512 & d) && (c = 65536 + (c - 55296 << 10) + (d - 56320), e++)), i += c < 128 ? 1 : c < 2048 ? 2 : c < 65536 ? 3 : 4
        for (b = g.uint8array ? new Uint8Array(i) : new Array(i), f = 0, e = 0; f < i; e++) c = a.charCodeAt(e), 55296 === (64512 & c) && e + 1 < h && (d = a.charCodeAt(e + 1), 56320 === (64512 & d) && (c = 65536 + (c - 55296 << 10) + (d - 56320), e++)), c < 128 ? b[f++] = c : c < 2048 ? (b[f++] = 192 | c >>> 6, b[f++] = 128 | 63 & c) : c < 65536 ? (b[f++] = 224 | c >>> 12, b[f++] = 128 | c >>> 6 & 63, b[f++] = 128 | 63 & c) : (b[f++] = 240 | c >>> 18, b[f++] = 128 | c >>> 12 & 63, b[f++] = 128 | c >>> 6 & 63, b[f++] = 128 | 63 & c)
        return b
      }, m = function (a, b) {
        var c
        for (b = b || a.length, b > a.length && (b = a.length), c = b - 1; c >= 0 && 128 === (192 & a[c]);) c--
        return c < 0 ? b : 0 === c ? b : c + j[a[c]] > b ? c : b
      }, n = function (a) {
        var b, c, d, e, g = a.length, h = new Array(2 * g)
        for (c = 0, b = 0; b < g;) {
          if (d = a[b++], d < 128) {
            h[c++] = d
          } else if (e = j[d], e > 4) {
            h[c++] = 65533, b += e - 1
          } else {
            for (d &= 2 === e ? 31 : 3 === e ? 15 : 7; e > 1 && b < g;) d = d << 6 | 63 & a[b++], e--
            e > 1 ? h[c++] = 65533 : d < 65536 ? h[c++] = d : (d -= 65536, h[c++] = 55296 | d >> 10 & 1023, h[c++] = 56320 | 1023 & d)
          }
        }
        return h.length !== c && (h.subarray ? h = h.subarray(0, c) : h.length = c), f.applyFromCharCode(h)
      }
      c.utf8encode = function (a) {
        return g.nodebuffer ? h.newBuffer(a, 'utf-8') : l(a)
      }, c.utf8decode = function (a) {
        return g.nodebuffer ? f.transformTo('nodebuffer', a).toString('utf-8') : (a = f.transformTo(g.uint8array ? 'uint8array' : 'array', a), n(a))
      }, f.inherits(d, i), d.prototype.processChunk = function (a) {
        var b = f.transformTo(g.uint8array ? 'uint8array' : 'array', a.data)
        if (this.leftOver && this.leftOver.length) {
          if (g.uint8array) {
            var d = b
            b = new Uint8Array(d.length + this.leftOver.length), b.set(this.leftOver, 0), b.set(d, this.leftOver.length)
          } else {
            b = this.leftOver.concat(b)
          }
          this.leftOver = null
        }
        var e = m(b), h = b
        e !== b.length && (g.uint8array ? (h = b.subarray(0, e), this.leftOver = b.subarray(e, b.length)) : (h = b.slice(0, e), this.leftOver = b.slice(e, b.length))), this.push({
          data: c.utf8decode(h),
          meta: a.meta
        })
      }, d.prototype.flush = function () {
        this.leftOver && this.leftOver.length && (this.push({
          data: c.utf8decode(this.leftOver),
          meta: {}
        }), this.leftOver = null)
      }, c.Utf8DecodeWorker = d, f.inherits(e, i), e.prototype.processChunk = function (a) {
        this.push({data: c.utf8encode(a.data), meta: a.meta})
      }, c.Utf8EncodeWorker = e
    }, {'./nodejsUtils': 14, './stream/GenericWorker': 28, './support': 30, './utils': 32}],
    32: [function (a, b, c) {
      function d (a) {
        var b = null
        return b = i.uint8array ? new Uint8Array(a.length) : new Array(a.length), f(a, b)
      }

      function e (a) {
        return a
      }

      function f (a, b) {
        for (var c = 0; c < a.length; ++c) b[c] = 255 & a.charCodeAt(c)
        return b
      }

      function g (a) {
        var b = 65536, d = c.getTypeOf(a), e = !0
        if ('uint8array' === d ? e = n.applyCanBeUsed.uint8array : 'nodebuffer' === d && (e = n.applyCanBeUsed.nodebuffer), e) {
          for (; b > 1;) {
            try {
              return n.stringifyByChunk(a, d, b)
            } catch (f) {
              b = Math.floor(b / 2)
            }
          }
        }
        return n.stringifyByChar(a)
      }

      function h (a, b) {
        for (var c = 0; c < a.length; c++) b[c] = a[c]
        return b
      }

      var i = a('./support'), j = a('./base64'), k = a('./nodejsUtils'), l = a('core-js/library/fn/set-immediate'),
        m = a('./external')
      c.newBlob = function (a, b) {
        c.checkSupport('blob')
        try {
          return new Blob([a], {type: b})
        } catch (d) {
          try {
            var e = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder,
              f = new e
            return f.append(a), f.getBlob(b)
          } catch (d) {
            throw new Error('Bug : can\'t construct the Blob.')
          }
        }
      }
      var n = {
        stringifyByChunk: function (a, b, c) {
          var d = [], e = 0, f = a.length
          if (f <= c) return String.fromCharCode.apply(null, a)
          for (; e < f;) 'array' === b || 'nodebuffer' === b ? d.push(String.fromCharCode.apply(null, a.slice(e, Math.min(e + c, f)))) : d.push(String.fromCharCode.apply(null, a.subarray(e, Math.min(e + c, f)))), e += c
          return d.join('')
        }, stringifyByChar: function (a) {
          for (var b = '', c = 0; c < a.length; c++) b += String.fromCharCode(a[c])
          return b
        }, applyCanBeUsed: {
          uint8array: function () {
            try {
              return i.uint8array && 1 === String.fromCharCode.apply(null, new Uint8Array(1)).length
            } catch (a) {
              return !1
            }
          }(), nodebuffer: function () {
            try {
              return i.nodebuffer && 1 === String.fromCharCode.apply(null, k.newBuffer(1)).length
            } catch (a) {
              return !1
            }
          }()
        }
      }
      c.applyFromCharCode = g
      var o = {}
      o.string = {
        string: e, array: function (a) {
          return f(a, new Array(a.length))
        }, arraybuffer: function (a) {
          return o.string.uint8array(a).buffer
        }, uint8array: function (a) {
          return f(a, new Uint8Array(a.length))
        }, nodebuffer: function (a) {
          return f(a, k.newBuffer(a.length))
        }
      }, o.array = {
        string: g, array: e, arraybuffer: function (a) {
          return new Uint8Array(a).buffer
        }, uint8array: function (a) {
          return new Uint8Array(a)
        }, nodebuffer: function (a) {
          return k.newBuffer(a)
        }
      }, o.arraybuffer = {
        string: function (a) {
          return g(new Uint8Array(a))
        }, array: function (a) {
          return h(new Uint8Array(a), new Array(a.byteLength))
        }, arraybuffer: e, uint8array: function (a) {
          return new Uint8Array(a)
        }, nodebuffer: function (a) {
          return k.newBuffer(new Uint8Array(a))
        }
      }, o.uint8array = {
        string: g, array: function (a) {
          return h(a, new Array(a.length))
        }, arraybuffer: function (a) {
          return a.buffer
        }, uint8array: e, nodebuffer: function (a) {
          return k.newBuffer(a)
        }
      }, o.nodebuffer = {
        string: g, array: function (a) {
          return h(a, new Array(a.length))
        }, arraybuffer: function (a) {
          return o.nodebuffer.uint8array(a).buffer
        }, uint8array: function (a) {
          return h(a, new Uint8Array(a.length))
        }, nodebuffer: e
      }, c.transformTo = function (a, b) {
        if (b || (b = ''), !a) return b
        c.checkSupport(a)
        var d = c.getTypeOf(b), e = o[d][a](b)
        return e
      }, c.getTypeOf = function (a) {
        return 'string' == typeof a ? 'string' : '[object Array]' === Object.prototype.toString.call(a) ? 'array' : i.nodebuffer && k.isBuffer(a) ? 'nodebuffer' : i.uint8array && a instanceof Uint8Array ? 'uint8array' : i.arraybuffer && a instanceof ArrayBuffer ? 'arraybuffer' : void 0
      }, c.checkSupport = function (a) {
        var b = i[a.toLowerCase()]
        if (!b) throw new Error(a + ' is not supported by this platform')
      }, c.MAX_VALUE_16BITS = 65535, c.MAX_VALUE_32BITS = -1, c.pretty = function (a) {
        var b, c, d = ''
        for (c = 0; c < (a || "").length; c++) b = a.charCodeAt(c), d += '\\x' + (b < 16 ? '0' : '') + b.toString(16).toUpperCase()
        return d
      }, c.delay = function (a, b, c) {
        l(function () {
          a.apply(c || null, b || [])
        })
      }, c.inherits = function (a, b) {
        var c = function () {
        }
        c.prototype = b.prototype, a.prototype = new c
      }, c.extend = function () {
        var a, b, c = {}
        for (a = 0; a < arguments.length; a++) for (b in arguments[a]) arguments[a].hasOwnProperty(b) && 'undefined' == typeof c[b] && (c[b] = arguments[a][b])
        return c
      }, c.prepareContent = function (a, b, e, f, g) {
        var h = m.Promise.resolve(b).then(function (a) {
          return i.blob && a instanceof Blob && 'undefined' != typeof FileReader ? new m.Promise(function (b, c) {
            var d = new FileReader
            d.onload = function (a) {
              b(a.target.result)
            }, d.onerror = function (a) {
              c(a.target.error)
            }, d.readAsArrayBuffer(a)
          }) : a
        })
        return h.then(function (b) {
          var h = c.getTypeOf(b)
          return h ? ('arraybuffer' === h ? b = c.transformTo('uint8array', b) : 'string' === h && (g ? b = j.decode(b) : e && f !== !0 && (b = d(b))), b) : m.Promise.reject(new Error('The data of \'' + a + '\' is in an unsupported format !'))
        })
      }
    }, {'./base64': 1, './external': 6, './nodejsUtils': 14, './support': 30, 'core-js/library/fn/set-immediate': 36}],
    33: [function (a, b, c) {
      function d (a) {
        this.files = [], this.loadOptions = a
      }

      var e = a('./reader/readerFor'), f = a('./utils'), g = a('./signature'), h = a('./zipEntry'),
        i = (a('./utf8'), a('./support'))
      d.prototype = {
        checkSignature: function (a) {
          if (!this.reader.readAndCheckSignature(a)) {
            this.reader.index -= 4
            var b = this.reader.readString(4)
            throw new Error('Corrupted zip or bug : unexpected signature (' + f.pretty(b) + ', expected ' + f.pretty(a) + ')')
          }
        }, isSignature: function (a, b) {
          var c = this.reader.index
          this.reader.setIndex(a)
          var d = this.reader.readString(4), e = d === b
          return this.reader.setIndex(c), e
        }, readBlockEndOfCentral: function () {
          this.diskNumber = this.reader.readInt(2), this.diskWithCentralDirStart = this.reader.readInt(2), this.centralDirRecordsOnThisDisk = this.reader.readInt(2), this.centralDirRecords = this.reader.readInt(2), this.centralDirSize = this.reader.readInt(4), this.centralDirOffset = this.reader.readInt(4), this.zipCommentLength = this.reader.readInt(2)
          var a = this.reader.readData(this.zipCommentLength), b = i.uint8array ? 'uint8array' : 'array',
            c = f.transformTo(b, a)
          this.zipComment = this.loadOptions.decodeFileName(c)
        }, readBlockZip64EndOfCentral: function () {
          this.zip64EndOfCentralSize = this.reader.readInt(8), this.reader.skip(4), this.diskNumber = this.reader.readInt(4), this.diskWithCentralDirStart = this.reader.readInt(4), this.centralDirRecordsOnThisDisk = this.reader.readInt(8), this.centralDirRecords = this.reader.readInt(8), this.centralDirSize = this.reader.readInt(8), this.centralDirOffset = this.reader.readInt(8), this.zip64ExtensibleData = {}
          for (var a, b, c, d = this.zip64EndOfCentralSize - 44, e = 0; e < d;) {
            a = this.reader.readInt(2), b = this.reader.readInt(4), c = this.reader.readData(b), this.zip64ExtensibleData[a] = {
              id: a,
              length: b,
              value: c
            }
          }
        }, readBlockZip64EndOfCentralLocator: function () {
          if (this.diskWithZip64CentralDirStart = this.reader.readInt(4), this.relativeOffsetEndOfZip64CentralDir = this.reader.readInt(8), this.disksCount = this.reader.readInt(4), this.disksCount > 1) throw new Error('Multi-volumes zip are not supported')
        }, readLocalFiles: function () {
          var a, b
          for (a = 0; a < this.files.length; a++) b = this.files[a], this.reader.setIndex(b.localHeaderOffset), this.checkSignature(g.LOCAL_FILE_HEADER), b.readLocalPart(this.reader), b.handleUTF8(), b.processAttributes()
        }, readCentralDir: function () {
          var a
          for (this.reader.setIndex(this.centralDirOffset); this.reader.readAndCheckSignature(g.CENTRAL_FILE_HEADER);) a = new h({zip64: this.zip64}, this.loadOptions), a.readCentralPart(this.reader), this.files.push(a)
          if (this.centralDirRecords !== this.files.length && 0 !== this.centralDirRecords && 0 === this.files.length) throw new Error('Corrupted zip or bug: expected ' + this.centralDirRecords + ' records in central dir, got ' + this.files.length)
        }, readEndOfCentral: function () {
          var a = this.reader.lastIndexOfSignature(g.CENTRAL_DIRECTORY_END)
          if (a < 0) {
            var b = !this.isSignature(0, g.LOCAL_FILE_HEADER)
            throw b ? new Error('Can\'t find end of central directory : is this a zip file ? If it is, see http://stuk.github.io/jszip/documentation/howto/read_zip.html') : new Error('Corrupted zip : can\'t find end of central directory')
          }
          this.reader.setIndex(a)
          var c = a
          if (this.checkSignature(g.CENTRAL_DIRECTORY_END), this.readBlockEndOfCentral(), this.diskNumber === f.MAX_VALUE_16BITS || this.diskWithCentralDirStart === f.MAX_VALUE_16BITS || this.centralDirRecordsOnThisDisk === f.MAX_VALUE_16BITS || this.centralDirRecords === f.MAX_VALUE_16BITS || this.centralDirSize === f.MAX_VALUE_32BITS || this.centralDirOffset === f.MAX_VALUE_32BITS) {
            if (this.zip64 = !0, a = this.reader.lastIndexOfSignature(g.ZIP64_CENTRAL_DIRECTORY_LOCATOR), a < 0) throw new Error('Corrupted zip : can\'t find the ZIP64 end of central directory locator')
            if (this.reader.setIndex(a), this.checkSignature(g.ZIP64_CENTRAL_DIRECTORY_LOCATOR), this.readBlockZip64EndOfCentralLocator(), !this.isSignature(this.relativeOffsetEndOfZip64CentralDir, g.ZIP64_CENTRAL_DIRECTORY_END) && (this.relativeOffsetEndOfZip64CentralDir = this.reader.lastIndexOfSignature(g.ZIP64_CENTRAL_DIRECTORY_END), this.relativeOffsetEndOfZip64CentralDir < 0)) throw new Error('Corrupted zip : can\'t find the ZIP64 end of central directory')
            this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir), this.checkSignature(g.ZIP64_CENTRAL_DIRECTORY_END), this.readBlockZip64EndOfCentral()
          }
          var d = this.centralDirOffset + this.centralDirSize
          this.zip64 && (d += 20, d += 12 + this.zip64EndOfCentralSize)
          var e = c - d
          if (e > 0) this.isSignature(c, g.CENTRAL_FILE_HEADER) || (this.reader.zero = e) else if (e < 0) throw new Error('Corrupted zip: missing ' + Math.abs(e) + ' bytes.')
        }, prepareReader: function (a) {
          this.reader = e(a)
        }, load: function (a) {
          this.prepareReader(a), this.readEndOfCentral(), this.readCentralDir(), this.readLocalFiles()
        }
      }, b.exports = d
    }, {'./reader/readerFor': 22, './signature': 23, './support': 30, './utf8': 31, './utils': 32, './zipEntry': 34}],
    34: [function (a, b, c) {
      function d (a, b) {
        this.options = a, this.loadOptions = b
      }

      var e = a('./reader/readerFor'), f = a('./utils'), g = a('./compressedObject'), h = a('./crc32'), i = a('./utf8'),
        j = a('./compressions'), k = a('./support'), l = 0, m = 3, n = function (a) {
          for (var b in j) if (j.hasOwnProperty(b) && j[b].magic === a) return j[b]
          return null
        }
      d.prototype = {
        isEncrypted: function () {
          return 1 === (1 & this.bitFlag)
        }, useUTF8: function () {
          return 2048 === (2048 & this.bitFlag)
        }, readLocalPart: function (a) {
          var b, c
          if (a.skip(22), this.fileNameLength = a.readInt(2), c = a.readInt(2), this.fileName = a.readData(this.fileNameLength), a.skip(c), this.compressedSize === -1 || this.uncompressedSize === -1) throw new Error('Bug or corrupted zip : didn\'t get enough informations from the central directory (compressedSize === -1 || uncompressedSize === -1)')
          if (b = n(this.compressionMethod), null === b) throw new Error('Corrupted zip : compression ' + f.pretty(this.compressionMethod) + ' unknown (inner file : ' + f.transformTo('string', this.fileName) + ')')
          this.decompressed = new g(this.compressedSize, this.uncompressedSize, this.crc32, b, a.readData(this.compressedSize))
        }, readCentralPart: function (a) {
          this.versionMadeBy = a.readInt(2), a.skip(2), this.bitFlag = a.readInt(2), this.compressionMethod = a.readString(2), this.date = a.readDate(), this.crc32 = a.readInt(4), this.compressedSize = a.readInt(4), this.uncompressedSize = a.readInt(4)
          var b = a.readInt(2)
          if (this.extraFieldsLength = a.readInt(2), this.fileCommentLength = a.readInt(2), this.diskNumberStart = a.readInt(2), this.internalFileAttributes = a.readInt(2), this.externalFileAttributes = a.readInt(4), this.localHeaderOffset = a.readInt(4), this.isEncrypted()) throw new Error('Encrypted zip are not supported')
          a.skip(b), this.readExtraFields(a), this.parseZIP64ExtraField(a), this.fileComment = a.readData(this.fileCommentLength)
        }, processAttributes: function () {
          this.unixPermissions = null, this.dosPermissions = null
          var a = this.versionMadeBy >> 8
          this.dir = !!(16 & this.externalFileAttributes), a === l && (this.dosPermissions = 63 & this.externalFileAttributes), a === m && (this.unixPermissions = this.externalFileAttributes >> 16 & 65535), this.dir || '/' !== this.fileNameStr.slice(-1) || (this.dir = !0)
        }, parseZIP64ExtraField: function (a) {
          if (this.extraFields[1]) {
            var b = e(this.extraFields[1].value)
            this.uncompressedSize === f.MAX_VALUE_32BITS && (this.uncompressedSize = b.readInt(8)), this.compressedSize === f.MAX_VALUE_32BITS && (this.compressedSize = b.readInt(8)), this.localHeaderOffset === f.MAX_VALUE_32BITS && (this.localHeaderOffset = b.readInt(8)), this.diskNumberStart === f.MAX_VALUE_32BITS && (this.diskNumberStart = b.readInt(4))
          }
        }, readExtraFields: function (a) {
          var b, c, d, e = a.index + this.extraFieldsLength
          for (this.extraFields || (this.extraFields = {}); a.index < e;) {
            b = a.readInt(2), c = a.readInt(2), d = a.readData(c), this.extraFields[b] = {
              id: b,
              length: c,
              value: d
            }
          }
        }, handleUTF8: function () {
          var a = k.uint8array ? 'uint8array' : 'array'
          if (this.useUTF8()) {
            this.fileNameStr = i.utf8decode(this.fileName), this.fileCommentStr = i.utf8decode(this.fileComment)
          } else {
            var b = this.findExtraFieldUnicodePath()
            if (null !== b) {
              this.fileNameStr = b
            } else {
              var c = f.transformTo(a, this.fileName)
              this.fileNameStr = this.loadOptions.decodeFileName(c)
            }
            var d = this.findExtraFieldUnicodeComment()
            if (null !== d) {
              this.fileCommentStr = d
            } else {
              var e = f.transformTo(a, this.fileComment)
              this.fileCommentStr = this.loadOptions.decodeFileName(e)
            }
          }
        }, findExtraFieldUnicodePath: function () {
          var a = this.extraFields[28789]
          if (a) {
            var b = e(a.value)
            return 1 !== b.readInt(1) ? null : h(this.fileName) !== b.readInt(4) ? null : i.utf8decode(b.readData(a.length - 5))
          }
          return null
        }, findExtraFieldUnicodeComment: function () {
          var a = this.extraFields[25461]
          if (a) {
            var b = e(a.value)
            return 1 !== b.readInt(1) ? null : h(this.fileComment) !== b.readInt(4) ? null : i.utf8decode(b.readData(a.length - 5))
          }
          return null
        }
      }, b.exports = d
    }, {
      './compressedObject': 2,
      './compressions': 3,
      './crc32': 4,
      './reader/readerFor': 22,
      './support': 30,
      './utf8': 31,
      './utils': 32
    }],
    35: [function (a, b, c) {
      var d = a('./stream/StreamHelper'), e = a('./stream/DataWorker'), f = a('./utf8'), g = a('./compressedObject'),
        h = a('./stream/GenericWorker'), i = function (a, b, c) {
          this.name = a, this.dir = c.dir, this.date = c.date, this.comment = c.comment, this.unixPermissions = c.unixPermissions, this.dosPermissions = c.dosPermissions, this._data = b, this._dataBinary = c.binary, this.options = {
            compression: c.compression,
            compressionOptions: c.compressionOptions
          }
        }
      i.prototype = {
        internalStream: function (a) {
          var b = a.toLowerCase(), c = 'string' === b || 'text' === b
          'binarystring' !== b && 'text' !== b || (b = 'string')
          var e = this._decompressWorker(), g = !this._dataBinary
          return g && !c && (e = e.pipe(new f.Utf8EncodeWorker)), !g && c && (e = e.pipe(new f.Utf8DecodeWorker)), new d(e, b, '')
        }, async: function (a, b) {
          return this.internalStream(a).accumulate(b)
        }, nodeStream: function (a, b) {
          return this.internalStream(a || 'nodebuffer').toNodejsStream(b)
        }, _compressWorker: function (a, b) {
          if (this._data instanceof g && this._data.compression.magic === a.magic) return this._data.getCompressedWorker()
          var c = this._decompressWorker()
          return this._dataBinary || (c = c.pipe(new f.Utf8EncodeWorker)), g.createWorkerFrom(c, a, b)
        }, _decompressWorker: function () {
          return this._data instanceof g ? this._data.getContentWorker() : this._data instanceof h ? this._data : new e(this._data)
        }
      }
      for (var j = ['asText', 'asBinary', 'asNodeBuffer', 'asUint8Array', 'asArrayBuffer'], k = function () {
        throw new Error('This method has been removed in JSZip 3.0, please check the upgrade guide.')
      }, l = 0; l < j.length; l++) {
        i.prototype[j[l]] = k
      }
      b.exports = i
    }, {
      './compressedObject': 2,
      './stream/DataWorker': 27,
      './stream/GenericWorker': 28,
      './stream/StreamHelper': 29,
      './utf8': 31
    }],
    36: [function (a, b, c) {
      a('../modules/web.immediate'), b.exports = a('../modules/_core').setImmediate
    }, {'../modules/_core': 40, '../modules/web.immediate': 56}],
    37: [function (a, b, c) {
      b.exports = function (a) {
        if ('function' != typeof a) throw TypeError(a + ' is not a function!')
        return a
      }
    }, {}],
    38: [function (a, b, c) {
      var d = a('./_is-object')
      b.exports = function (a) {
        if (!d(a)) throw TypeError(a + ' is not an object!')
        return a
      }
    }, {'./_is-object': 51}],
    39: [function (a, b, c) {
      var d = {}.toString
      b.exports = function (a) {
        return d.call(a).slice(8, -1)
      }
    }, {}],
    40: [function (a, b, c) {
      var d = b.exports = {version: '2.3.0'}
      'number' == typeof __e && (__e = d)
    }, {}],
    41: [function (a, b, c) {
      var d = a('./_a-function')
      b.exports = function (a, b, c) {
        if (d(a), void 0 === b) return a
        switch (c) {
          case 1:
            return function (c) {
              return a.call(b, c)
            }
          case 2:
            return function (c, d) {
              return a.call(b, c, d)
            }
          case 3:
            return function (c, d, e) {
              return a.call(b, c, d, e)
            }
        }
        return function () {
          return a.apply(b, arguments)
        }
      }
    }, {'./_a-function': 37}],
    42: [function (a, b, c) {
      b.exports = !a('./_fails')(function () {
        return 7 != Object.defineProperty({}, 'a', {
          get: function () {
            return 7
          }
        }).a
      })
    }, {'./_fails': 45}],
    43: [function (a, b, c) {
      var d = a('./_is-object'), e = a('./_global').document, f = d(e) && d(e.createElement)
      b.exports = function (a) {
        return f ? e.createElement(a) : {}
      }
    }, {'./_global': 46, './_is-object': 51}],
    44: [function (a, b, c) {
      var d = a('./_global'), e = a('./_core'), f = a('./_ctx'), g = a('./_hide'), h = 'prototype',
        i = function (a, b, c) {
          var j, k, l, m = a & i.F, n = a & i.G, o = a & i.S, p = a & i.P, q = a & i.B, r = a & i.W,
            s = n ? e : e[b] || (e[b] = {}), t = s[h], u = n ? d : o ? d[b] : (d[b] || {})[h]
          n && (c = b)
          for (j in c) {
            k = !m && u && void 0 !== u[j], k && j in s || (l = k ? u[j] : c[j], s[j] = n && 'function' != typeof u[j] ? c[j] : q && k ? f(l, d) : r && u[j] == l ? function (a) {
              var b = function (b, c, d) {
                if (this instanceof a) {
                  switch (arguments.length) {
                    case 0:
                      return new a
                    case 1:
                      return new a(b)
                    case 2:
                      return new a(b, c)
                  }
                  return new a(b, c, d)
                }
                return a.apply(this, arguments)
              }
              return b[h] = a[h], b
            }(l) : p && 'function' == typeof l ? f(Function.call, l) : l, p && ((s.virtual || (s.virtual = {}))[j] = l, a & i.R && t && !t[j] && g(t, j, l)))
          }
        }
      i.F = 1, i.G = 2, i.S = 4, i.P = 8, i.B = 16, i.W = 32, i.U = 64, i.R = 128, b.exports = i
    }, {'./_core': 40, './_ctx': 41, './_global': 46, './_hide': 47}],
    45: [function (a, b, c) {
      b.exports = function (a) {
        try {
          return !!a()
        } catch (b) {
          return !0
        }
      }
    }, {}],
    46: [function (a, b, c) {
      var d = b.exports = 'undefined' != typeof window && window.Math == Math ? window : 'undefined' != typeof self && self.Math == Math ? self : Function('return this')()
      'number' == typeof __g && (__g = d)
    }, {}],
    47: [function (a, b, c) {
      var d = a('./_object-dp'), e = a('./_property-desc')
      b.exports = a('./_descriptors') ? function (a, b, c) {
        return d.f(a, b, e(1, c))
      } : function (a, b, c) {
        return a[b] = c, a
      }
    }, {'./_descriptors': 42, './_object-dp': 52, './_property-desc': 53}],
    48: [function (a, b, c) {
      b.exports = a('./_global').document && document.documentElement
    }, {'./_global': 46}],
    49: [function (a, b, c) {
      b.exports = !a('./_descriptors') && !a('./_fails')(function () {
        return 7 != Object.defineProperty(a('./_dom-create')('div'), 'a', {
          get: function () {
            return 7
          }
        }).a
      })
    }, {'./_descriptors': 42, './_dom-create': 43, './_fails': 45}],
    50: [function (a, b, c) {
      b.exports = function (a, b, c) {
        var d = void 0 === c
        switch (b.length) {
          case 0:
            return d ? a() : a.call(c)
          case 1:
            return d ? a(b[0]) : a.call(c, b[0])
          case 2:
            return d ? a(b[0], b[1]) : a.call(c, b[0], b[1])
          case 3:
            return d ? a(b[0], b[1], b[2]) : a.call(c, b[0], b[1], b[2])
          case 4:
            return d ? a(b[0], b[1], b[2], b[3]) : a.call(c, b[0], b[1], b[2], b[3])
        }
        return a.apply(c, b)
      }
    }, {}],
    51: [function (a, b, c) {
      b.exports = function (a) {
        return 'object' == typeof a ? null !== a : 'function' == typeof a
      }
    }, {}],
    52: [function (a, b, c) {
      var d = a('./_an-object'), e = a('./_ie8-dom-define'), f = a('./_to-primitive'), g = Object.defineProperty
      c.f = a('./_descriptors') ? Object.defineProperty : function (a, b, c) {
        if (d(a), b = f(b, !0), d(c), e) {
          try {
            return g(a, b, c)
          } catch (h) {
          }
        }
        if ('get' in c || 'set' in c) throw TypeError('Accessors not supported!')
        return 'value' in c && (a[b] = c.value), a
      }
    }, {'./_an-object': 38, './_descriptors': 42, './_ie8-dom-define': 49, './_to-primitive': 55}],
    53: [function (a, b, c) {
      b.exports = function (a, b) {
        return {enumerable: !(1 & a), configurable: !(2 & a), writable: !(4 & a), value: b}
      }
    }, {}],
    54: [function (a, b, c) {
      var d, e, f, g = a('./_ctx'), h = a('./_invoke'), i = a('./_html'), j = a('./_dom-create'), k = a('./_global'),
        l = k.process, m = k.setImmediate, n = k.clearImmediate, o = k.MessageChannel, p = 0, q = {},
        r = 'onreadystatechange', s = function () {
          var a = +this
          if (q.hasOwnProperty(a)) {
            var b = q[a]
            delete q[a], b()
          }
        }, t = function (a) {
          s.call(a.data)
        }
      m && n || (m = function (a) {
        for (var b = [], c = 1; arguments.length > c;) b.push(arguments[c++])
        return q[++p] = function () {
          h('function' == typeof a ? a : Function(a), b)
        }, d(p), p
      }, n = function (a) {
        delete q[a]
      }, 'process' == a('./_cof')(l) ? d = function (a) {
        l.nextTick(g(s, a, 1))
      } : o ? (e = new o, f = e.port2, e.port1.onmessage = t, d = g(f.postMessage, f, 1)) : k.addEventListener && 'function' == typeof postMessage && !k.importScripts ? (d = function (a) {
        k.postMessage(a + '', '*')
      }, k.addEventListener('message', t, !1)) : d = r in j('script') ? function (a) {
        i.appendChild(j('script'))[r] = function () {
          i.removeChild(this), s.call(a)
        }
      } : function (a) {
        setTimeout(g(s, a, 1), 0)
      }), b.exports = {set: m, clear: n}
    }, {'./_cof': 39, './_ctx': 41, './_dom-create': 43, './_global': 46, './_html': 48, './_invoke': 50}],
    55: [function (a, b, c) {
      var d = a('./_is-object')
      b.exports = function (a, b) {
        if (!d(a)) return a
        var c, e
        if (b && 'function' == typeof (c = a.toString) && !d(e = c.call(a))) return e
        if ('function' == typeof (c = a.valueOf) && !d(e = c.call(a))) return e
        if (!b && 'function' == typeof (c = a.toString) && !d(e = c.call(a))) return e
        throw TypeError('Can\'t convert object to primitive value')
      }
    }, {'./_is-object': 51}],
    56: [function (a, b, c) {
      var d = a('./_export'), e = a('./_task')
      d(d.G + d.B, {setImmediate: e.set, clearImmediate: e.clear})
    }, {'./_export': 44, './_task': 54}],
    57: [function (a, b, c) {
      (function (a) {
        function c () {
          k = !0
          for (var a, b, c = l.length; c;) {
            for (b = l, l = [], a = -1; ++a < c;) b[a]()
            c = l.length
          }
          k = !1
        }

        function d (a) {
          1 !== l.push(a) || k || e()
        }

        var e, f = a.MutationObserver || a.WebKitMutationObserver
        if (f) {
          var g = 0, h = new f(c), i = a.document.createTextNode('')
          h.observe(i, {characterData: !0}), e = function () {
            i.data = g = ++g % 2
          }
        } else if (a.setImmediate || 'undefined' == typeof a.MessageChannel) {
          e = 'document' in a && 'onreadystatechange' in a.document.createElement('script') ? function () {
            var b = a.document.createElement('script')
            b.onreadystatechange = function () {
              c(), b.onreadystatechange = null, b.parentNode.removeChild(b), b = null
            }, a.document.documentElement.appendChild(b)
          } : function () {
            setTimeout(c, 0)
          }
        } else {
          var j = new a.MessageChannel
          j.port1.onmessage = c, e = function () {
            j.port2.postMessage(0)
          }
        }
        var k, l = []
        b.exports = d
      }).call(this, 'undefined' != typeof global ? global : 'undefined' != typeof self ? self : 'undefined' != typeof window ? window : {})
    }, {}],
    58: [function (a, b, c) {
      function d () {
      }

      function e (a) {
        if ('function' != typeof a) throw new TypeError('resolver must be a function')
        this.state = s, this.queue = [], this.outcome = void 0, a !== d && i(this, a)
      }

      function f (a, b, c) {
        this.promise = a, 'function' == typeof b && (this.onFulfilled = b, this.callFulfilled = this.otherCallFulfilled), 'function' == typeof c && (this.onRejected = c, this.callRejected = this.otherCallRejected)
      }

      function g (a, b, c) {
        o(function () {
          var d
          try {
            d = b(c)
          } catch (e) {
            return p.reject(a, e)
          }
          d === a ? p.reject(a, new TypeError('Cannot resolve promise with itself')) : p.resolve(a, d)
        })
      }

      function h (a) {
        var b = a && a.then
        if (a && 'object' == typeof a && 'function' == typeof b) {
          return function () {
            b.apply(a, arguments)
          }
        }
      }

      function i (a, b) {
        function c (b) {
          f || (f = !0, p.reject(a, b))
        }

        function d (b) {
          f || (f = !0, p.resolve(a, b))
        }

        function e () {
          b(d, c)
        }

        var f = !1, g = j(e)
        'error' === g.status && c(g.value)
      }

      function j (a, b) {
        var c = {}
        try {
          c.value = a(b), c.status = 'success'
        } catch (d) {
          c.status = 'error', c.value = d
        }
        return c
      }

      function k (a) {
        return a instanceof this ? a : p.resolve(new this(d), a)
      }

      function l (a) {
        var b = new this(d)
        return p.reject(b, a)
      }

      function m (a) {
        function b (a, b) {
          function d (a) {
            g[b] = a, ++h !== e || f || (f = !0, p.resolve(j, g))
          }

          c.resolve(a).then(d, function (a) {
            f || (f = !0, p.reject(j, a))
          })
        }

        var c = this
        if ('[object Array]' !== Object.prototype.toString.call(a)) return this.reject(new TypeError('must be an array'))
        var e = a.length, f = !1
        if (!e) return this.resolve([])
        for (var g = new Array(e), h = 0, i = -1, j = new this(d); ++i < e;) b(a[i], i)
        return j
      }

      function n (a) {
        function b (a) {
          c.resolve(a).then(function (a) {
            f || (f = !0, p.resolve(h, a))
          }, function (a) {
            f || (f = !0, p.reject(h, a))
          })
        }

        var c = this
        if ('[object Array]' !== Object.prototype.toString.call(a)) return this.reject(new TypeError('must be an array'))
        var e = a.length, f = !1
        if (!e) return this.resolve([])
        for (var g = -1, h = new this(d); ++g < e;) b(a[g])
        return h
      }

      var o = a('immediate'), p = {}, q = ['REJECTED'], r = ['FULFILLED'], s = ['PENDING']
      b.exports = e, e.prototype['catch'] = function (a) {
        return this.then(null, a)
      }, e.prototype.then = function (a, b) {
        if ('function' != typeof a && this.state === r || 'function' != typeof b && this.state === q) return this
        var c = new this.constructor(d)
        if (this.state !== s) {
          var e = this.state === r ? a : b
          g(c, e, this.outcome)
        } else {
          this.queue.push(new f(c, a, b))
        }
        return c
      }, f.prototype.callFulfilled = function (a) {
        p.resolve(this.promise, a)
      }, f.prototype.otherCallFulfilled = function (a) {
        g(this.promise, this.onFulfilled, a)
      }, f.prototype.callRejected = function (a) {
        p.reject(this.promise, a)
      }, f.prototype.otherCallRejected = function (a) {
        g(this.promise, this.onRejected, a)
      }, p.resolve = function (a, b) {
        var c = j(h, b)
        if ('error' === c.status) return p.reject(a, c.value)
        var d = c.value
        if (d) {
          i(a, d)
        } else {
          a.state = r, a.outcome = b
          for (var e = -1, f = a.queue.length; ++e < f;) a.queue[e].callFulfilled(b)
        }
        return a
      }, p.reject = function (a, b) {
        a.state = q, a.outcome = b
        for (var c = -1, d = a.queue.length; ++c < d;) a.queue[c].callRejected(b)
        return a
      }, e.resolve = k, e.reject = l, e.all = m, e.race = n
    }, {immediate: 57}],
    59: [function (a, b, c) {
      var d = a('./lib/utils/common').assign, e = a('./lib/deflate'), f = a('./lib/inflate'),
        g = a('./lib/zlib/constants'), h = {}
      d(h, e, f, g), b.exports = h
    }, {'./lib/deflate': 60, './lib/inflate': 61, './lib/utils/common': 62, './lib/zlib/constants': 65}],
    60: [function (a, b, c) {
      function d (a) {
        if (!(this instanceof d)) return new d(a)
        this.options = i.assign({
          level: s,
          method: u,
          chunkSize: 16384,
          windowBits: 15,
          memLevel: 8,
          strategy: t,
          to: ''
        }, a || {})
        var b = this.options
        b.raw && b.windowBits > 0 ? b.windowBits = -b.windowBits : b.gzip && b.windowBits > 0 && b.windowBits < 16 && (b.windowBits += 16), this.err = 0, this.msg = '', this.ended = !1, this.chunks = [], this.strm = new l, this.strm.avail_out = 0
        var c = h.deflateInit2(this.strm, b.level, b.method, b.windowBits, b.memLevel, b.strategy)
        if (c !== p) throw new Error(k[c])
        if (b.header && h.deflateSetHeader(this.strm, b.header), b.dictionary) {
          var e
          if (e = 'string' == typeof b.dictionary ? j.string2buf(b.dictionary) : '[object ArrayBuffer]' === m.call(b.dictionary) ? new Uint8Array(b.dictionary) : b.dictionary, c = h.deflateSetDictionary(this.strm, e), c !== p) throw new Error(k[c])
          this._dict_set = !0
        }
      }

      function e (a, b) {
        var c = new d(b)
        if (c.push(a, !0), c.err) throw c.msg
        return c.result
      }

      function f (a, b) {
        return b = b || {}, b.raw = !0, e(a, b)
      }

      function g (a, b) {
        return b = b || {}, b.gzip = !0, e(a, b)
      }

      var h = a('./zlib/deflate'), i = a('./utils/common'), j = a('./utils/strings'), k = a('./zlib/messages'),
        l = a('./zlib/zstream'), m = Object.prototype.toString, n = 0, o = 4, p = 0, q = 1, r = 2, s = -1, t = 0, u = 8
      d.prototype.push = function (a, b) {
        var c, d, e = this.strm, f = this.options.chunkSize
        if (this.ended) return !1
        d = b === ~~b ? b : b === !0 ? o : n, 'string' == typeof a ? e.input = j.string2buf(a) : '[object ArrayBuffer]' === m.call(a) ? e.input = new Uint8Array(a) : e.input = a, e.next_in = 0, e.avail_in = e.input.length
        do {
          if (0 === e.avail_out && (e.output = new i.Buf8(f), e.next_out = 0, e.avail_out = f), c = h.deflate(e, d), c !== q && c !== p) return this.onEnd(c), this.ended = !0, !1
          0 !== e.avail_out && (0 !== e.avail_in || d !== o && d !== r) || ('string' === this.options.to ? this.onData(j.buf2binstring(i.shrinkBuf(e.output, e.next_out))) : this.onData(i.shrinkBuf(e.output, e.next_out)))
        } while ((e.avail_in > 0 || 0 === e.avail_out) && c !== q)
        return d === o ? (c = h.deflateEnd(this.strm), this.onEnd(c), this.ended = !0, c === p) : d !== r || (this.onEnd(p), e.avail_out = 0, !0)
      }, d.prototype.onData = function (a) {
        this.chunks.push(a)
      }, d.prototype.onEnd = function (a) {
        a === p && ('string' === this.options.to ? this.result = this.chunks.join('') : this.result = i.flattenChunks(this.chunks)), this.chunks = [], this.err = a, this.msg = this.strm.msg
      }, c.Deflate = d, c.deflate = e, c.deflateRaw = f, c.gzip = g
    }, {
      './utils/common': 62,
      './utils/strings': 63,
      './zlib/deflate': 67,
      './zlib/messages': 72,
      './zlib/zstream': 74
    }],
    61: [function (a, b, c) {
      function d (a) {
        if (!(this instanceof d)) return new d(a)
        this.options = h.assign({chunkSize: 16384, windowBits: 0, to: ''}, a || {})
        var b = this.options
        b.raw && b.windowBits >= 0 && b.windowBits < 16 && (b.windowBits = -b.windowBits, 0 === b.windowBits && (b.windowBits = -15)), !(b.windowBits >= 0 && b.windowBits < 16) || a && a.windowBits || (b.windowBits += 32), b.windowBits > 15 && b.windowBits < 48 && 0 === (15 & b.windowBits) && (b.windowBits |= 15), this.err = 0, this.msg = '', this.ended = !1, this.chunks = [], this.strm = new l, this.strm.avail_out = 0
        var c = g.inflateInit2(this.strm, b.windowBits)
        if (c !== j.Z_OK) throw new Error(k[c])
        this.header = new m, g.inflateGetHeader(this.strm, this.header)
      }

      function e (a, b) {
        var c = new d(b)
        if (c.push(a, !0), c.err) throw c.msg
        return c.result
      }

      function f (a, b) {
        return b = b || {}, b.raw = !0, e(a, b)
      }

      var g = a('./zlib/inflate'), h = a('./utils/common'), i = a('./utils/strings'), j = a('./zlib/constants'),
        k = a('./zlib/messages'), l = a('./zlib/zstream'), m = a('./zlib/gzheader'), n = Object.prototype.toString
      d.prototype.push = function (a, b) {
        var c, d, e, f, k, l, m = this.strm, o = this.options.chunkSize, p = this.options.dictionary, q = !1
        if (this.ended) return !1
        d = b === ~~b ? b : b === !0 ? j.Z_FINISH : j.Z_NO_FLUSH, 'string' == typeof a ? m.input = i.binstring2buf(a) : '[object ArrayBuffer]' === n.call(a) ? m.input = new Uint8Array(a) : m.input = a, m.next_in = 0, m.avail_in = m.input.length
        do {
          if (0 === m.avail_out && (m.output = new h.Buf8(o), m.next_out = 0, m.avail_out = o), c = g.inflate(m, j.Z_NO_FLUSH), c === j.Z_NEED_DICT && p && (l = 'string' == typeof p ? i.string2buf(p) : '[object ArrayBuffer]' === n.call(p) ? new Uint8Array(p) : p, c = g.inflateSetDictionary(this.strm, l)), c === j.Z_BUF_ERROR && q === !0 && (c = j.Z_OK, q = !1), c !== j.Z_STREAM_END && c !== j.Z_OK) return this.onEnd(c), this.ended = !0, !1
          m.next_out && (0 !== m.avail_out && c !== j.Z_STREAM_END && (0 !== m.avail_in || d !== j.Z_FINISH && d !== j.Z_SYNC_FLUSH) || ('string' === this.options.to ? (e = i.utf8border(m.output, m.next_out), f = m.next_out - e, k = i.buf2string(m.output, e), m.next_out = f, m.avail_out = o - f, f && h.arraySet(m.output, m.output, e, f, 0), this.onData(k)) : this.onData(h.shrinkBuf(m.output, m.next_out)))), 0 === m.avail_in && 0 === m.avail_out && (q = !0)
        } while ((m.avail_in > 0 || 0 === m.avail_out) && c !== j.Z_STREAM_END)
        return c === j.Z_STREAM_END && (d = j.Z_FINISH), d === j.Z_FINISH ? (c = g.inflateEnd(this.strm), this.onEnd(c), this.ended = !0, c === j.Z_OK) : d !== j.Z_SYNC_FLUSH || (this.onEnd(j.Z_OK), m.avail_out = 0, !0)
      }, d.prototype.onData = function (a) {
        this.chunks.push(a)
      }, d.prototype.onEnd = function (a) {
        a === j.Z_OK && ('string' === this.options.to ? this.result = this.chunks.join('') : this.result = h.flattenChunks(this.chunks)), this.chunks = [], this.err = a, this.msg = this.strm.msg
      }, c.Inflate = d, c.inflate = e, c.inflateRaw = f, c.ungzip = e
    }, {
      './utils/common': 62,
      './utils/strings': 63,
      './zlib/constants': 65,
      './zlib/gzheader': 68,
      './zlib/inflate': 70,
      './zlib/messages': 72,
      './zlib/zstream': 74
    }],
    62: [function (a, b, c) {
      var d = 'undefined' != typeof Uint8Array && 'undefined' != typeof Uint16Array && 'undefined' != typeof Int32Array
      c.assign = function (a) {
        for (var b = Array.prototype.slice.call(arguments, 1); b.length;) {
          var c = b.shift()
          if (c) {
            if ('object' != typeof c) throw new TypeError(c + 'must be non-object')
            for (var d in c) c.hasOwnProperty(d) && (a[d] = c[d])
          }
        }
        return a
      }, c.shrinkBuf = function (a, b) {
        return a.length === b ? a : a.subarray ? a.subarray(0, b) : (a.length = b, a)
      }
      var e = {
        arraySet: function (a, b, c, d, e) {
          if (b.subarray && a.subarray) return void a.set(b.subarray(c, c + d), e)
          for (var f = 0; f < d; f++) a[e + f] = b[c + f]
        }, flattenChunks: function (a) {
          var b, c, d, e, f, g
          for (d = 0, b = 0, c = a.length; b < c; b++) d += a[b].length
          for (g = new Uint8Array(d), e = 0, b = 0, c = a.length; b < c; b++) f = a[b], g.set(f, e), e += f.length
          return g
        }
      }, f = {
        arraySet: function (a, b, c, d, e) {
          for (var f = 0; f < d; f++) a[e + f] = b[c + f]
        }, flattenChunks: function (a) {
          return [].concat.apply([], a)
        }
      }
      c.setTyped = function (a) {
        a ? (c.Buf8 = Uint8Array, c.Buf16 = Uint16Array, c.Buf32 = Int32Array, c.assign(c, e)) : (c.Buf8 = Array, c.Buf16 = Array, c.Buf32 = Array, c.assign(c, f))
      }, c.setTyped(d)
    }, {}],
    63: [function (a, b, c) {
      function d (a, b) {
        if (b < 65537 && (a.subarray && g || !a.subarray && f)) return String.fromCharCode.apply(null, e.shrinkBuf(a, b))
        for (var c = '', d = 0; d < b; d++) c += String.fromCharCode(a[d])
        return c
      }

      var e = a('./common'), f = !0, g = !0
      try {
        String.fromCharCode.apply(null, [0])
      } catch (h) {
        f = !1
      }
      try {
        String.fromCharCode.apply(null, new Uint8Array(1))
      } catch (h) {
        g = !1
      }
      for (var i = new e.Buf8(256), j = 0; j < 256; j++) i[j] = j >= 252 ? 6 : j >= 248 ? 5 : j >= 240 ? 4 : j >= 224 ? 3 : j >= 192 ? 2 : 1
      i[254] = i[254] = 1, c.string2buf = function (a) {
        var b, c, d, f, g, h = a.length, i = 0
        for (f = 0; f < h; f++) c = a.charCodeAt(f), 55296 === (64512 & c) && f + 1 < h && (d = a.charCodeAt(f + 1), 56320 === (64512 & d) && (c = 65536 + (c - 55296 << 10) + (d - 56320), f++)), i += c < 128 ? 1 : c < 2048 ? 2 : c < 65536 ? 3 : 4
        for (b = new e.Buf8(i), g = 0, f = 0; g < i; f++) c = a.charCodeAt(f), 55296 === (64512 & c) && f + 1 < h && (d = a.charCodeAt(f + 1), 56320 === (64512 & d) && (c = 65536 + (c - 55296 << 10) + (d - 56320), f++)), c < 128 ? b[g++] = c : c < 2048 ? (b[g++] = 192 | c >>> 6, b[g++] = 128 | 63 & c) : c < 65536 ? (b[g++] = 224 | c >>> 12, b[g++] = 128 | c >>> 6 & 63, b[g++] = 128 | 63 & c) : (b[g++] = 240 | c >>> 18, b[g++] = 128 | c >>> 12 & 63, b[g++] = 128 | c >>> 6 & 63, b[g++] = 128 | 63 & c)
        return b
      }, c.buf2binstring = function (a) {
        return d(a, a.length)
      }, c.binstring2buf = function (a) {
        for (var b = new e.Buf8(a.length), c = 0, d = b.length; c < d; c++) b[c] = a.charCodeAt(c)
        return b
      }, c.buf2string = function (a, b) {
        var c, e, f, g, h = b || a.length, j = new Array(2 * h)
        for (e = 0, c = 0; c < h;) {
          if (f = a[c++], f < 128) {
            j[e++] = f
          } else if (g = i[f], g > 4) {
            j[e++] = 65533, c += g - 1
          } else {
            for (f &= 2 === g ? 31 : 3 === g ? 15 : 7; g > 1 && c < h;) f = f << 6 | 63 & a[c++], g--
            g > 1 ? j[e++] = 65533 : f < 65536 ? j[e++] = f : (f -= 65536, j[e++] = 55296 | f >> 10 & 1023, j[e++] = 56320 | 1023 & f)
          }
        }
        return d(j, e)
      }, c.utf8border = function (a, b) {
        var c
        for (b = b || a.length, b > a.length && (b = a.length), c = b - 1; c >= 0 && 128 === (192 & a[c]);) c--
        return c < 0 ? b : 0 === c ? b : c + i[a[c]] > b ? c : b
      }
    }, {'./common': 62}],
    64: [function (a, b, c) {
      function d (a, b, c, d) {
        for (var e = 65535 & a | 0, f = a >>> 16 & 65535 | 0, g = 0; 0 !== c;) {
          g = c > 2e3 ? 2e3 : c, c -= g
          do e = e + b[d++] | 0, f = f + e | 0 while (--g)
          e %= 65521, f %= 65521
        }
        return e | f << 16 | 0
      }

      b.exports = d
    }, {}],
    65: [function (a, b, c) {
      b.exports = {
        Z_NO_FLUSH: 0,
        Z_PARTIAL_FLUSH: 1,
        Z_SYNC_FLUSH: 2,
        Z_FULL_FLUSH: 3,
        Z_FINISH: 4,
        Z_BLOCK: 5,
        Z_TREES: 6,
        Z_OK: 0,
        Z_STREAM_END: 1,
        Z_NEED_DICT: 2,
        Z_ERRNO: -1,
        Z_STREAM_ERROR: -2,
        Z_DATA_ERROR: -3,
        Z_BUF_ERROR: -5,
        Z_NO_COMPRESSION: 0,
        Z_BEST_SPEED: 1,
        Z_BEST_COMPRESSION: 9,
        Z_DEFAULT_COMPRESSION: -1,
        Z_FILTERED: 1,
        Z_HUFFMAN_ONLY: 2,
        Z_RLE: 3,
        Z_FIXED: 4,
        Z_DEFAULT_STRATEGY: 0,
        Z_BINARY: 0,
        Z_TEXT: 1,
        Z_UNKNOWN: 2,
        Z_DEFLATED: 8
      }
    }, {}],
    66: [function (a, b, c) {
      function d () {
        for (var a, b = [], c = 0; c < 256; c++) {
          a = c
          for (var d = 0; d < 8; d++) a = 1 & a ? 3988292384 ^ a >>> 1 : a >>> 1
          b[c] = a
        }
        return b
      }

      function e (a, b, c, d) {
        var e = f, g = d + c
        a ^= -1
        for (var h = d; h < g; h++) a = a >>> 8 ^ e[255 & (a ^ b[h])]
        return a ^ -1
      }

      var f = d()
      b.exports = e
    }, {}],
    67: [function (a, b, c) {
      function d (a, b) {
        return a.msg = I[b], b
      }

      function e (a) {
        return (a << 1) - (a > 4 ? 9 : 0)
      }

      function f (a) {
        for (var b = a.length; --b >= 0;) a[b] = 0
      }

      function g (a) {
        var b = a.state, c = b.pending
        c > a.avail_out && (c = a.avail_out), 0 !== c && (E.arraySet(a.output, b.pending_buf, b.pending_out, c, a.next_out), a.next_out += c, b.pending_out += c, a.total_out += c, a.avail_out -= c, b.pending -= c, 0 === b.pending && (b.pending_out = 0))
      }

      function h (a, b) {
        F._tr_flush_block(a, a.block_start >= 0 ? a.block_start : -1, a.strstart - a.block_start, b), a.block_start = a.strstart, g(a.strm)
      }

      function i (a, b) {
        a.pending_buf[a.pending++] = b
      }

      function j (a, b) {
        a.pending_buf[a.pending++] = b >>> 8 & 255, a.pending_buf[a.pending++] = 255 & b
      }

      function k (a, b, c, d) {
        var e = a.avail_in
        return e > d && (e = d), 0 === e ? 0 : (a.avail_in -= e, E.arraySet(b, a.input, a.next_in, e, c), 1 === a.state.wrap ? a.adler = G(a.adler, b, e, c) : 2 === a.state.wrap && (a.adler = H(a.adler, b, e, c)), a.next_in += e, a.total_in += e, e)
      }

      function l (a, b) {
        var c, d, e = a.max_chain_length, f = a.strstart, g = a.prev_length, h = a.nice_match,
          i = a.strstart > a.w_size - la ? a.strstart - (a.w_size - la) : 0, j = a.window, k = a.w_mask, l = a.prev,
          m = a.strstart + ka, n = j[f + g - 1], o = j[f + g]
        a.prev_length >= a.good_match && (e >>= 2), h > a.lookahead && (h = a.lookahead)
        do {
          if (c = b, j[c + g] === o && j[c + g - 1] === n && j[c] === j[f] && j[++c] === j[f + 1]) {
            f += 2, c++
            do  while (j[++f] === j[++c] && j[++f] === j[++c] && j[++f] === j[++c] && j[++f] === j[++c] && j[++f] === j[++c] && j[++f] === j[++c] && j[++f] === j[++c] && j[++f] === j[++c] && f < m)
            if (d = ka - (m - f), f = m - ka, d > g) {
              if (a.match_start = b, g = d, d >= h) break
              n = j[f + g - 1], o = j[f + g]
            }
          }
        } while ((b = l[b & k]) > i && 0 !== --e)
        return g <= a.lookahead ? g : a.lookahead
      }

      function m (a) {
        var b, c, d, e, f, g = a.w_size
        do {
          if (e = a.window_size - a.lookahead - a.strstart, a.strstart >= g + (g - la)) {
            E.arraySet(a.window, a.window, g, g, 0), a.match_start -= g, a.strstart -= g, a.block_start -= g, c = a.hash_size, b = c
            do d = a.head[--b], a.head[b] = d >= g ? d - g : 0 while (--c)
            c = g, b = c
            do d = a.prev[--b], a.prev[b] = d >= g ? d - g : 0 while (--c)
            e += g
          }
          if (0 === a.strm.avail_in) break
          if (c = k(a.strm, a.window, a.strstart + a.lookahead, e), a.lookahead += c, a.lookahead + a.insert >= ja) for (f = a.strstart - a.insert, a.ins_h = a.window[f], a.ins_h = (a.ins_h << a.hash_shift ^ a.window[f + 1]) & a.hash_mask; a.insert && (a.ins_h = (a.ins_h << a.hash_shift ^ a.window[f + ja - 1]) & a.hash_mask, a.prev[f & a.w_mask] = a.head[a.ins_h], a.head[a.ins_h] = f, f++, a.insert--, !(a.lookahead + a.insert < ja));)
        } while (a.lookahead < la && 0 !== a.strm.avail_in)
      }

      function n (a, b) {
        var c = 65535
        for (c > a.pending_buf_size - 5 && (c = a.pending_buf_size - 5); ;) {
          if (a.lookahead <= 1) {
            if (m(a), 0 === a.lookahead && b === J) return ua
            if (0 === a.lookahead) break
          }
          a.strstart += a.lookahead, a.lookahead = 0
          var d = a.block_start + c
          if ((0 === a.strstart || a.strstart >= d) && (a.lookahead = a.strstart - d, a.strstart = d, h(a, !1), 0 === a.strm.avail_out)) return ua
          if (a.strstart - a.block_start >= a.w_size - la && (h(a, !1), 0 === a.strm.avail_out)) return ua
        }
        return a.insert = 0, b === M ? (h(a, !0), 0 === a.strm.avail_out ? wa : xa) : a.strstart > a.block_start && (h(a, !1), 0 === a.strm.avail_out) ? ua : ua
      }

      function o (a, b) {
        for (var c, d; ;) {
          if (a.lookahead < la) {
            if (m(a), a.lookahead < la && b === J) return ua
            if (0 === a.lookahead) break
          }
          if (c = 0, a.lookahead >= ja && (a.ins_h = (a.ins_h << a.hash_shift ^ a.window[a.strstart + ja - 1]) & a.hash_mask, c = a.prev[a.strstart & a.w_mask] = a.head[a.ins_h], a.head[a.ins_h] = a.strstart), 0 !== c && a.strstart - c <= a.w_size - la && (a.match_length = l(a, c)), a.match_length >= ja) {
            if (d = F._tr_tally(a, a.strstart - a.match_start, a.match_length - ja), a.lookahead -= a.match_length, a.match_length <= a.max_lazy_match && a.lookahead >= ja) {
              a.match_length--
              do a.strstart++, a.ins_h = (a.ins_h << a.hash_shift ^ a.window[a.strstart + ja - 1]) & a.hash_mask, c = a.prev[a.strstart & a.w_mask] = a.head[a.ins_h], a.head[a.ins_h] = a.strstart while (0 !== --a.match_length)
              a.strstart++
            } else {
              a.strstart += a.match_length, a.match_length = 0, a.ins_h = a.window[a.strstart], a.ins_h = (a.ins_h << a.hash_shift ^ a.window[a.strstart + 1]) & a.hash_mask
            }
          } else {
            d = F._tr_tally(a, 0, a.window[a.strstart]), a.lookahead--, a.strstart++
          }
          if (d && (h(a, !1), 0 === a.strm.avail_out)) return ua
        }
        return a.insert = a.strstart < ja - 1 ? a.strstart : ja - 1, b === M ? (h(a, !0), 0 === a.strm.avail_out ? wa : xa) : a.last_lit && (h(a, !1), 0 === a.strm.avail_out) ? ua : va
      }

      function p (a, b) {
        for (var c, d, e; ;) {
          if (a.lookahead < la) {
            if (m(a), a.lookahead < la && b === J) return ua
            if (0 === a.lookahead) break
          }
          if (c = 0, a.lookahead >= ja && (a.ins_h = (a.ins_h << a.hash_shift ^ a.window[a.strstart + ja - 1]) & a.hash_mask, c = a.prev[a.strstart & a.w_mask] = a.head[a.ins_h], a.head[a.ins_h] = a.strstart), a.prev_length = a.match_length, a.prev_match = a.match_start, a.match_length = ja - 1, 0 !== c && a.prev_length < a.max_lazy_match && a.strstart - c <= a.w_size - la && (a.match_length = l(a, c), a.match_length <= 5 && (a.strategy === U || a.match_length === ja && a.strstart - a.match_start > 4096) && (a.match_length = ja - 1)), a.prev_length >= ja && a.match_length <= a.prev_length) {
            e = a.strstart + a.lookahead - ja, d = F._tr_tally(a, a.strstart - 1 - a.prev_match, a.prev_length - ja), a.lookahead -= a.prev_length - 1, a.prev_length -= 2
            do ++a.strstart <= e && (a.ins_h = (a.ins_h << a.hash_shift ^ a.window[a.strstart + ja - 1]) & a.hash_mask, c = a.prev[a.strstart & a.w_mask] = a.head[a.ins_h], a.head[a.ins_h] = a.strstart) while (0 !== --a.prev_length)
            if (a.match_available = 0, a.match_length = ja - 1, a.strstart++, d && (h(a, !1), 0 === a.strm.avail_out)) return ua
          } else if (a.match_available) {
            if (d = F._tr_tally(a, 0, a.window[a.strstart - 1]), d && h(a, !1), a.strstart++, a.lookahead--, 0 === a.strm.avail_out) return ua
          } else {
            a.match_available = 1, a.strstart++, a.lookahead--
          }
        }
        return a.match_available && (d = F._tr_tally(a, 0, a.window[a.strstart - 1]), a.match_available = 0), a.insert = a.strstart < ja - 1 ? a.strstart : ja - 1, b === M ? (h(a, !0), 0 === a.strm.avail_out ? wa : xa) : a.last_lit && (h(a, !1), 0 === a.strm.avail_out) ? ua : va
      }

      function q (a, b) {
        for (var c, d, e, f, g = a.window; ;) {
          if (a.lookahead <= ka) {
            if (m(a), a.lookahead <= ka && b === J) return ua
            if (0 === a.lookahead) break
          }
          if (a.match_length = 0, a.lookahead >= ja && a.strstart > 0 && (e = a.strstart - 1, d = g[e], d === g[++e] && d === g[++e] && d === g[++e])) {
            f = a.strstart + ka
            do  while (d === g[++e] && d === g[++e] && d === g[++e] && d === g[++e] && d === g[++e] && d === g[++e] && d === g[++e] && d === g[++e] && e < f)
            a.match_length = ka - (f - e), a.match_length > a.lookahead && (a.match_length = a.lookahead)
          }
          if (a.match_length >= ja ? (c = F._tr_tally(a, 1, a.match_length - ja), a.lookahead -= a.match_length, a.strstart += a.match_length, a.match_length = 0) : (c = F._tr_tally(a, 0, a.window[a.strstart]), a.lookahead--, a.strstart++), c && (h(a, !1), 0 === a.strm.avail_out)) return ua
        }
        return a.insert = 0, b === M ? (h(a, !0), 0 === a.strm.avail_out ? wa : xa) : a.last_lit && (h(a, !1), 0 === a.strm.avail_out) ? ua : va
      }

      function r (a, b) {
        for (var c; ;) {
          if (0 === a.lookahead && (m(a), 0 === a.lookahead)) {
            if (b === J) return ua
            break
          }
          if (a.match_length = 0, c = F._tr_tally(a, 0, a.window[a.strstart]), a.lookahead--, a.strstart++, c && (h(a, !1), 0 === a.strm.avail_out)) return ua
        }
        return a.insert = 0, b === M ? (h(a, !0), 0 === a.strm.avail_out ? wa : xa) : a.last_lit && (h(a, !1), 0 === a.strm.avail_out) ? ua : va
      }

      function s (a, b, c, d, e) {
        this.good_length = a, this.max_lazy = b, this.nice_length = c, this.max_chain = d, this.func = e
      }

      function t (a) {
        a.window_size = 2 * a.w_size, f(a.head), a.max_lazy_match = D[a.level].max_lazy, a.good_match = D[a.level].good_length, a.nice_match = D[a.level].nice_length, a.max_chain_length = D[a.level].max_chain, a.strstart = 0, a.block_start = 0, a.lookahead = 0, a.insert = 0, a.match_length = a.prev_length = ja - 1, a.match_available = 0, a.ins_h = 0
      }

      function u () {
        this.strm = null, this.status = 0, this.pending_buf = null, this.pending_buf_size = 0, this.pending_out = 0, this.pending = 0, this.wrap = 0, this.gzhead = null, this.gzindex = 0, this.method = $, this.last_flush = -1, this.w_size = 0, this.w_bits = 0, this.w_mask = 0, this.window = null, this.window_size = 0, this.prev = null, this.head = null, this.ins_h = 0, this.hash_size = 0, this.hash_bits = 0, this.hash_mask = 0, this.hash_shift = 0, this.block_start = 0, this.match_length = 0, this.prev_match = 0, this.match_available = 0, this.strstart = 0, this.match_start = 0, this.lookahead = 0, this.prev_length = 0, this.max_chain_length = 0, this.max_lazy_match = 0, this.level = 0, this.strategy = 0, this.good_match = 0, this.nice_match = 0, this.dyn_ltree = new E.Buf16(2 * ha), this.dyn_dtree = new E.Buf16(2 * (2 * fa + 1)), this.bl_tree = new E.Buf16(2 * (2 * ga + 1)), f(this.dyn_ltree), f(this.dyn_dtree), f(this.bl_tree), this.l_desc = null, this.d_desc = null, this.bl_desc = null, this.bl_count = new E.Buf16(ia + 1), this.heap = new E.Buf16(2 * ea + 1), f(this.heap), this.heap_len = 0, this.heap_max = 0, this.depth = new E.Buf16(2 * ea + 1), f(this.depth), this.l_buf = 0, this.lit_bufsize = 0, this.last_lit = 0, this.d_buf = 0, this.opt_len = 0, this.static_len = 0, this.matches = 0, this.insert = 0, this.bi_buf = 0, this.bi_valid = 0
      }

      function v (a) {
        var b
        return a && a.state ? (a.total_in = a.total_out = 0, a.data_type = Z, b = a.state, b.pending = 0, b.pending_out = 0, b.wrap < 0 && (b.wrap = -b.wrap), b.status = b.wrap ? na : sa, a.adler = 2 === b.wrap ? 0 : 1, b.last_flush = J, F._tr_init(b), O) : d(a, Q)
      }

      function w (a) {
        var b = v(a)
        return b === O && t(a.state), b
      }

      function x (a, b) {
        return a && a.state ? 2 !== a.state.wrap ? Q : (a.state.gzhead = b, O) : Q
      }

      function y (a, b, c, e, f, g) {
        if (!a) return Q
        var h = 1
        if (b === T && (b = 6), e < 0 ? (h = 0, e = -e) : e > 15 && (h = 2, e -= 16), f < 1 || f > _ || c !== $ || e < 8 || e > 15 || b < 0 || b > 9 || g < 0 || g > X) return d(a, Q)
        8 === e && (e = 9)
        var i = new u
        return a.state = i, i.strm = a, i.wrap = h, i.gzhead = null, i.w_bits = e, i.w_size = 1 << i.w_bits, i.w_mask = i.w_size - 1, i.hash_bits = f + 7, i.hash_size = 1 << i.hash_bits, i.hash_mask = i.hash_size - 1, i.hash_shift = ~~((i.hash_bits + ja - 1) / ja), i.window = new E.Buf8(2 * i.w_size), i.head = new E.Buf16(i.hash_size), i.prev = new E.Buf16(i.w_size), i.lit_bufsize = 1 << f + 6, i.pending_buf_size = 4 * i.lit_bufsize, i.pending_buf = new E.Buf8(i.pending_buf_size), i.d_buf = 1 * i.lit_bufsize, i.l_buf = 3 * i.lit_bufsize, i.level = b, i.strategy = g, i.method = c, w(a)
      }

      function z (a, b) {
        return y(a, b, $, aa, ba, Y)
      }

      function A (a, b) {
        var c, h, k, l
        if (!a || !a.state || b > N || b < 0) return a ? d(a, Q) : Q
        if (h = a.state, !a.output || !a.input && 0 !== a.avail_in || h.status === ta && b !== M) return d(a, 0 === a.avail_out ? S : Q)
        if (h.strm = a, c = h.last_flush, h.last_flush = b, h.status === na) {
          if (2 === h.wrap) {
            a.adler = 0, i(h, 31), i(h, 139), i(h, 8), h.gzhead ? (i(h, (h.gzhead.text ? 1 : 0) + (h.gzhead.hcrc ? 2 : 0) + (h.gzhead.extra ? 4 : 0) + (h.gzhead.name ? 8 : 0) + (h.gzhead.comment ? 16 : 0)), i(h, 255 & h.gzhead.time), i(h, h.gzhead.time >> 8 & 255), i(h, h.gzhead.time >> 16 & 255), i(h, h.gzhead.time >> 24 & 255), i(h, 9 === h.level ? 2 : h.strategy >= V || h.level < 2 ? 4 : 0), i(h, 255 & h.gzhead.os), h.gzhead.extra && h.gzhead.extra.length && (i(h, 255 & h.gzhead.extra.length), i(h, h.gzhead.extra.length >> 8 & 255)), h.gzhead.hcrc && (a.adler = H(a.adler, h.pending_buf, h.pending, 0)), h.gzindex = 0, h.status = oa) : (i(h, 0), i(h, 0), i(h, 0), i(h, 0), i(h, 0), i(h, 9 === h.level ? 2 : h.strategy >= V || h.level < 2 ? 4 : 0), i(h, ya), h.status = sa)
          } else {
            var m = $ + (h.w_bits - 8 << 4) << 8, n = -1
            n = h.strategy >= V || h.level < 2 ? 0 : h.level < 6 ? 1 : 6 === h.level ? 2 : 3, m |= n << 6, 0 !== h.strstart && (m |= ma), m += 31 - m % 31, h.status = sa, j(h, m), 0 !== h.strstart && (j(h, a.adler >>> 16), j(h, 65535 & a.adler)), a.adler = 1
          }
        }
        if (h.status === oa) {
          if (h.gzhead.extra) {
            for (k = h.pending; h.gzindex < (65535 & h.gzhead.extra.length) && (h.pending !== h.pending_buf_size || (h.gzhead.hcrc && h.pending > k && (a.adler = H(a.adler, h.pending_buf, h.pending - k, k)), g(a), k = h.pending, h.pending !== h.pending_buf_size));) i(h, 255 & h.gzhead.extra[h.gzindex]), h.gzindex++
            h.gzhead.hcrc && h.pending > k && (a.adler = H(a.adler, h.pending_buf, h.pending - k, k)), h.gzindex === h.gzhead.extra.length && (h.gzindex = 0, h.status = pa)
          } else {
            h.status = pa
          }
        }
        if (h.status === pa) {
          if (h.gzhead.name) {
            k = h.pending
            do {
              if (h.pending === h.pending_buf_size && (h.gzhead.hcrc && h.pending > k && (a.adler = H(a.adler, h.pending_buf, h.pending - k, k)), g(a), k = h.pending, h.pending === h.pending_buf_size)) {
                l = 1
                break
              }
              l = h.gzindex < h.gzhead.name.length ? 255 & h.gzhead.name.charCodeAt(h.gzindex++) : 0, i(h, l)
            } while (0 !== l)
            h.gzhead.hcrc && h.pending > k && (a.adler = H(a.adler, h.pending_buf, h.pending - k, k)), 0 === l && (h.gzindex = 0, h.status = qa)
          } else {
            h.status = qa
          }
        }
        if (h.status === qa) {
          if (h.gzhead.comment) {
            k = h.pending
            do {
              if (h.pending === h.pending_buf_size && (h.gzhead.hcrc && h.pending > k && (a.adler = H(a.adler, h.pending_buf, h.pending - k, k)), g(a), k = h.pending, h.pending === h.pending_buf_size)) {
                l = 1
                break
              }
              l = h.gzindex < h.gzhead.comment.length ? 255 & h.gzhead.comment.charCodeAt(h.gzindex++) : 0, i(h, l)
            } while (0 !== l)
            h.gzhead.hcrc && h.pending > k && (a.adler = H(a.adler, h.pending_buf, h.pending - k, k)), 0 === l && (h.status = ra)
          } else {
            h.status = ra
          }
        }
        if (h.status === ra && (h.gzhead.hcrc ? (h.pending + 2 > h.pending_buf_size && g(a), h.pending + 2 <= h.pending_buf_size && (i(h, 255 & a.adler), i(h, a.adler >> 8 & 255), a.adler = 0, h.status = sa)) : h.status = sa), 0 !== h.pending) {
          if (g(a), 0 === a.avail_out) return h.last_flush = -1, O
        } else if (0 === a.avail_in && e(b) <= e(c) && b !== M) return d(a, S)
        if (h.status === ta && 0 !== a.avail_in) return d(a, S)
        if (0 !== a.avail_in || 0 !== h.lookahead || b !== J && h.status !== ta) {
          var o = h.strategy === V ? r(h, b) : h.strategy === W ? q(h, b) : D[h.level].func(h, b)
          if (o !== wa && o !== xa || (h.status = ta), o === ua || o === wa) return 0 === a.avail_out && (h.last_flush = -1), O
          if (o === va && (b === K ? F._tr_align(h) : b !== N && (F._tr_stored_block(h, 0, 0, !1), b === L && (f(h.head), 0 === h.lookahead && (h.strstart = 0, h.block_start = 0, h.insert = 0))), g(a), 0 === a.avail_out)) return h.last_flush = -1, O
        }
        return b !== M ? O : h.wrap <= 0 ? P : (2 === h.wrap ? (i(h, 255 & a.adler), i(h, a.adler >> 8 & 255), i(h, a.adler >> 16 & 255), i(h, a.adler >> 24 & 255), i(h, 255 & a.total_in), i(h, a.total_in >> 8 & 255), i(h, a.total_in >> 16 & 255), i(h, a.total_in >> 24 & 255)) : (j(h, a.adler >>> 16), j(h, 65535 & a.adler)), g(a), h.wrap > 0 && (h.wrap = -h.wrap), 0 !== h.pending ? O : P)
      }

      function B (a) {
        var b
        return a && a.state ? (b = a.state.status, b !== na && b !== oa && b !== pa && b !== qa && b !== ra && b !== sa && b !== ta ? d(a, Q) : (a.state = null, b === sa ? d(a, R) : O)) : Q
      }

      function C (a, b) {
        var c, d, e, g, h, i, j, k, l = b.length
        if (!a || !a.state) return Q
        if (c = a.state, g = c.wrap, 2 === g || 1 === g && c.status !== na || c.lookahead) return Q
        for (1 === g && (a.adler = G(a.adler, b, l, 0)), c.wrap = 0, l >= c.w_size && (0 === g && (f(c.head), c.strstart = 0, c.block_start = 0, c.insert = 0), k = new E.Buf8(c.w_size), E.arraySet(k, b, l - c.w_size, c.w_size, 0), b = k, l = c.w_size), h = a.avail_in, i = a.next_in, j = a.input, a.avail_in = l, a.next_in = 0, a.input = b, m(c); c.lookahead >= ja;) {
          d = c.strstart, e = c.lookahead - (ja - 1)
          do c.ins_h = (c.ins_h << c.hash_shift ^ c.window[d + ja - 1]) & c.hash_mask, c.prev[d & c.w_mask] = c.head[c.ins_h], c.head[c.ins_h] = d, d++ while (--e)
          c.strstart = d, c.lookahead = ja - 1, m(c)
        }
        return c.strstart += c.lookahead, c.block_start = c.strstart, c.insert = c.lookahead, c.lookahead = 0, c.match_length = c.prev_length = ja - 1, c.match_available = 0, a.next_in = i, a.input = j, a.avail_in = h, c.wrap = g, O
      }

      var D, E = a('../utils/common'), F = a('./trees'), G = a('./adler32'), H = a('./crc32'), I = a('./messages'),
        J = 0, K = 1, L = 3, M = 4, N = 5, O = 0, P = 1, Q = -2, R = -3, S = -5, T = -1, U = 1, V = 2, W = 3, X = 4,
        Y = 0, Z = 2, $ = 8, _ = 9, aa = 15, ba = 8, ca = 29, da = 256, ea = da + 1 + ca, fa = 30, ga = 19,
        ha = 2 * ea + 1, ia = 15, ja = 3, ka = 258, la = ka + ja + 1, ma = 32, na = 42, oa = 69, pa = 73, qa = 91,
        ra = 103, sa = 113, ta = 666, ua = 1, va = 2, wa = 3, xa = 4, ya = 3
      D = [new s(0, 0, 0, 0, n), new s(4, 4, 8, 4, o), new s(4, 5, 16, 8, o), new s(4, 6, 32, 32, o), new s(4, 4, 16, 16, p), new s(8, 16, 32, 32, p), new s(8, 16, 128, 128, p), new s(8, 32, 128, 256, p), new s(32, 128, 258, 1024, p), new s(32, 258, 258, 4096, p)], c.deflateInit = z, c.deflateInit2 = y, c.deflateReset = w, c.deflateResetKeep = v, c.deflateSetHeader = x, c.deflate = A, c.deflateEnd = B, c.deflateSetDictionary = C, c.deflateInfo = 'pako deflate (from Nodeca project)'
    }, {'../utils/common': 62, './adler32': 64, './crc32': 66, './messages': 72, './trees': 73}],
    68: [function (a, b, c) {
      function d () {
        this.text = 0, this.time = 0, this.xflags = 0, this.os = 0, this.extra = null, this.extra_len = 0, this.name = '', this.comment = '', this.hcrc = 0, this.done = !1
      }

      b.exports = d
    }, {}],
    69: [function (a, b, c) {
      var d = 30, e = 12
      b.exports = function (a, b) {
        var c, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t, u, v, w, x, y, z, A, B, C
        c = a.state, f = a.next_in, B = a.input, g = f + (a.avail_in - 5), h = a.next_out, C = a.output, i = h - (b - a.avail_out), j = h + (a.avail_out - 257), k = c.dmax, l = c.wsize, m = c.whave, n = c.wnext, o = c.window, p = c.hold, q = c.bits, r = c.lencode, s = c.distcode, t = (1 << c.lenbits) - 1, u = (1 << c.distbits) - 1
        a:do {
          q < 15 && (p += B[f++] << q, q += 8, p += B[f++] << q, q += 8), v = r[p & t]
          b:for (; ;) {
            if (w = v >>> 24, p >>>= w, q -= w, w = v >>> 16 & 255, 0 === w) {
              C[h++] = 65535 & v
            } else {
              if (!(16 & w)) {
                if (0 === (64 & w)) {
                  v = r[(65535 & v) + (p & (1 << w) - 1)]
                  continue b
                }
                if (32 & w) {
                  c.mode = e
                  break a
                }
                a.msg = 'invalid literal/length code', c.mode = d
                break a
              }
              x = 65535 & v, w &= 15, w && (q < w && (p += B[f++] << q, q += 8), x += p & (1 << w) - 1, p >>>= w, q -= w), q < 15 && (p += B[f++] << q, q += 8, p += B[f++] << q, q += 8), v = s[p & u]
              c:for (; ;) {
                if (w = v >>> 24, p >>>= w, q -= w, w = v >>> 16 & 255, !(16 & w)) {
                  if (0 === (64 & w)) {
                    v = s[(65535 & v) + (p & (1 << w) - 1)]
                    continue c
                  }
                  a.msg = 'invalid distance code', c.mode = d
                  break a
                }
                if (y = 65535 & v, w &= 15, q < w && (p += B[f++] << q, q += 8, q < w && (p += B[f++] << q, q += 8)), y += p & (1 << w) - 1, y > k) {
                  a.msg = 'invalid distance too far back', c.mode = d
                  break a
                }
                if (p >>>= w, q -= w, w = h - i, y > w) {
                  if (w = y - w, w > m && c.sane) {
                    a.msg = 'invalid distance too far back', c.mode = d
                    break a
                  }
                  if (z = 0, A = o, 0 === n) {
                    if (z += l - w, w < x) {
                      x -= w
                      do C[h++] = o[z++] while (--w)
                      z = h - y, A = C
                    }
                  } else if (n < w) {
                    if (z += l + n - w, w -= n, w < x) {
                      x -= w
                      do C[h++] = o[z++] while (--w)
                      if (z = 0, n < x) {
                        w = n, x -= w
                        do C[h++] = o[z++] while (--w)
                        z = h - y, A = C
                      }
                    }
                  } else if (z += n - w, w < x) {
                    x -= w
                    do C[h++] = o[z++] while (--w)
                    z = h - y, A = C
                  }
                  for (; x > 2;) C[h++] = A[z++], C[h++] = A[z++], C[h++] = A[z++], x -= 3
                  x && (C[h++] = A[z++], x > 1 && (C[h++] = A[z++]))
                } else {
                  z = h - y
                  do C[h++] = C[z++], C[h++] = C[z++], C[h++] = C[z++], x -= 3 while (x > 2)
                  x && (C[h++] = C[z++], x > 1 && (C[h++] = C[z++]))
                }
                break
              }
            }
            break
          }
        } while (f < g && h < j)
        x = q >> 3, f -= x, q -= x << 3, p &= (1 << q) - 1, a.next_in = f, a.next_out = h, a.avail_in = f < g ? 5 + (g - f) : 5 - (f - g), a.avail_out = h < j ? 257 + (j - h) : 257 - (h - j), c.hold = p, c.bits = q
      }
    }, {}],
    70: [function (a, b, c) {
      function d (a) {
        return (a >>> 24 & 255) + (a >>> 8 & 65280) + ((65280 & a) << 8) + ((255 & a) << 24)
      }

      function e () {
        this.mode = 0, this.last = !1, this.wrap = 0, this.havedict = !1, this.flags = 0, this.dmax = 0, this.check = 0, this.total = 0, this.head = null, this.wbits = 0, this.wsize = 0, this.whave = 0, this.wnext = 0, this.window = null, this.hold = 0, this.bits = 0, this.length = 0, this.offset = 0, this.extra = 0, this.lencode = null, this.distcode = null, this.lenbits = 0, this.distbits = 0, this.ncode = 0, this.nlen = 0, this.ndist = 0, this.have = 0, this.next = null, this.lens = new s.Buf16(320), this.work = new s.Buf16(288), this.lendyn = null, this.distdyn = null, this.sane = 0, this.back = 0, this.was = 0
      }

      function f (a) {
        var b
        return a && a.state ? (b = a.state, a.total_in = a.total_out = b.total = 0, a.msg = '', b.wrap && (a.adler = 1 & b.wrap), b.mode = L, b.last = 0, b.havedict = 0, b.dmax = 32768, b.head = null, b.hold = 0, b.bits = 0, b.lencode = b.lendyn = new s.Buf32(pa), b.distcode = b.distdyn = new s.Buf32(qa), b.sane = 1, b.back = -1, D) : G
      }

      function g (a) {
        var b
        return a && a.state ? (b = a.state, b.wsize = 0, b.whave = 0, b.wnext = 0, f(a)) : G
      }

      function h (a, b) {
        var c, d
        return a && a.state ? (d = a.state, b < 0 ? (c = 0, b = -b) : (c = (b >> 4) + 1, b < 48 && (b &= 15)), b && (b < 8 || b > 15) ? G : (null !== d.window && d.wbits !== b && (d.window = null), d.wrap = c, d.wbits = b, g(a))) : G
      }

      function i (a, b) {
        var c, d
        return a ? (d = new e, a.state = d, d.window = null, c = h(a, b), c !== D && (a.state = null), c) : G
      }

      function j (a) {
        return i(a, sa)
      }

      function k (a) {
        if (ta) {
          var b
          for (q = new s.Buf32(512), r = new s.Buf32(32), b = 0; b < 144;) a.lens[b++] = 8
          for (; b < 256;) a.lens[b++] = 9
          for (; b < 280;) a.lens[b++] = 7
          for (; b < 288;) a.lens[b++] = 8
          for (w(y, a.lens, 0, 288, q, 0, a.work, {bits: 9}), b = 0; b < 32;) a.lens[b++] = 5
          w(z, a.lens, 0, 32, r, 0, a.work, {bits: 5}), ta = !1
        }
        a.lencode = q, a.lenbits = 9, a.distcode = r, a.distbits = 5
      }

      function l (a, b, c, d) {
        var e, f = a.state
        return null === f.window && (f.wsize = 1 << f.wbits, f.wnext = 0, f.whave = 0, f.window = new s.Buf8(f.wsize)), d >= f.wsize ? (s.arraySet(f.window, b, c - f.wsize, f.wsize, 0), f.wnext = 0, f.whave = f.wsize) : (e = f.wsize - f.wnext, e > d && (e = d), s.arraySet(f.window, b, c - d, e, f.wnext), d -= e, d ? (s.arraySet(f.window, b, c - d, d, 0), f.wnext = d, f.whave = f.wsize) : (f.wnext += e, f.wnext === f.wsize && (f.wnext = 0), f.whave < f.wsize && (f.whave += e))), 0
      }

      function m (a, b) {
        var c, e, f, g, h, i, j, m, n, o, p, q, r, pa, qa, ra, sa, ta, ua, va, wa, xa, ya, za, Aa = 0,
          Ba = new s.Buf8(4), Ca = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]
        if (!a || !a.state || !a.output || !a.input && 0 !== a.avail_in) return G
        c = a.state, c.mode === W && (c.mode = X), h = a.next_out, f = a.output, j = a.avail_out, g = a.next_in, e = a.input, i = a.avail_in, m = c.hold, n = c.bits, o = i, p = j, xa = D
        a:for (; ;) {
          switch (c.mode) {
            case L:
              if (0 === c.wrap) {
                c.mode = X
                break
              }
              for (; n < 16;) {
                if (0 === i) break a
                i--, m += e[g++] << n, n += 8
              }
              if (2 & c.wrap && 35615 === m) {
                c.check = 0, Ba[0] = 255 & m, Ba[1] = m >>> 8 & 255, c.check = u(c.check, Ba, 2, 0), m = 0, n = 0, c.mode = M
                break
              }
              if (c.flags = 0, c.head && (c.head.done = !1), !(1 & c.wrap) || (((255 & m) << 8) + (m >> 8)) % 31) {
                a.msg = 'incorrect header check', c.mode = ma
                break
              }
              if ((15 & m) !== K) {
                a.msg = 'unknown compression method', c.mode = ma
                break
              }
              if (m >>>= 4, n -= 4, wa = (15 & m) + 8, 0 === c.wbits) {
                c.wbits = wa
              } else if (wa > c.wbits) {
                a.msg = 'invalid window size', c.mode = ma
                break
              }
              c.dmax = 1 << wa, a.adler = c.check = 1, c.mode = 512 & m ? U : W, m = 0, n = 0
              break
            case M:
              for (; n < 16;) {
                if (0 === i) break a
                i--, m += e[g++] << n, n += 8
              }
              if (c.flags = m, (255 & c.flags) !== K) {
                a.msg = 'unknown compression method', c.mode = ma
                break
              }
              if (57344 & c.flags) {
                a.msg = 'unknown header flags set', c.mode = ma
                break
              }
              c.head && (c.head.text = m >> 8 & 1), 512 & c.flags && (Ba[0] = 255 & m, Ba[1] = m >>> 8 & 255, c.check = u(c.check, Ba, 2, 0)), m = 0, n = 0, c.mode = N
            case N:
              for (; n < 32;) {
                if (0 === i) break a
                i--, m += e[g++] << n, n += 8
              }
              c.head && (c.head.time = m), 512 & c.flags && (Ba[0] = 255 & m, Ba[1] = m >>> 8 & 255, Ba[2] = m >>> 16 & 255, Ba[3] = m >>> 24 & 255, c.check = u(c.check, Ba, 4, 0)), m = 0, n = 0, c.mode = O
            case O:
              for (; n < 16;) {
                if (0 === i) break a
                i--, m += e[g++] << n, n += 8
              }
              c.head && (c.head.xflags = 255 & m, c.head.os = m >> 8), 512 & c.flags && (Ba[0] = 255 & m, Ba[1] = m >>> 8 & 255, c.check = u(c.check, Ba, 2, 0)), m = 0, n = 0, c.mode = P
            case P:
              if (1024 & c.flags) {
                for (; n < 16;) {
                  if (0 === i) break a
                  i--, m += e[g++] << n, n += 8
                }
                c.length = m, c.head && (c.head.extra_len = m), 512 & c.flags && (Ba[0] = 255 & m, Ba[1] = m >>> 8 & 255, c.check = u(c.check, Ba, 2, 0)), m = 0, n = 0
              } else {
                c.head && (c.head.extra = null)
              }
              c.mode = Q
            case Q:
              if (1024 & c.flags && (q = c.length, q > i && (q = i), q && (c.head && (wa = c.head.extra_len - c.length, c.head.extra || (c.head.extra = new Array(c.head.extra_len)), s.arraySet(c.head.extra, e, g, q, wa)), 512 & c.flags && (c.check = u(c.check, e, q, g)), i -= q, g += q, c.length -= q), c.length)) break a
              c.length = 0, c.mode = R
            case R:
              if (2048 & c.flags) {
                if (0 === i) break a
                q = 0
                do wa = e[g + q++], c.head && wa && c.length < 65536 && (c.head.name += String.fromCharCode(wa)) while (wa && q < i)
                if (512 & c.flags && (c.check = u(c.check, e, q, g)), i -= q, g += q, wa) break a
              } else {
                c.head && (c.head.name = null)
              }
              c.length = 0, c.mode = S
            case S:
              if (4096 & c.flags) {
                if (0 === i) break a
                q = 0
                do wa = e[g + q++], c.head && wa && c.length < 65536 && (c.head.comment += String.fromCharCode(wa)) while (wa && q < i)
                if (512 & c.flags && (c.check = u(c.check, e, q, g)), i -= q, g += q, wa) break a
              } else {
                c.head && (c.head.comment = null)
              }
              c.mode = T
            case T:
              if (512 & c.flags) {
                for (; n < 16;) {
                  if (0 === i) break a
                  i--, m += e[g++] << n, n += 8
                }
                if (m !== (65535 & c.check)) {
                  a.msg = 'header crc mismatch', c.mode = ma
                  break
                }
                m = 0, n = 0
              }
              c.head && (c.head.hcrc = c.flags >> 9 & 1, c.head.done = !0), a.adler = c.check = 0, c.mode = W
              break
            case U:
              for (; n < 32;) {
                if (0 === i) break a
                i--, m += e[g++] << n, n += 8
              }
              a.adler = c.check = d(m), m = 0, n = 0, c.mode = V
            case V:
              if (0 === c.havedict) return a.next_out = h, a.avail_out = j, a.next_in = g, a.avail_in = i, c.hold = m, c.bits = n, F
              a.adler = c.check = 1, c.mode = W
            case W:
              if (b === B || b === C) break a
            case X:
              if (c.last) {
                m >>>= 7 & n, n -= 7 & n, c.mode = ja
                break
              }
              for (; n < 3;) {
                if (0 === i) break a
                i--, m += e[g++] << n, n += 8
              }
              switch (c.last = 1 & m, m >>>= 1, n -= 1, 3 & m) {
                case 0:
                  c.mode = Y
                  break
                case 1:
                  if (k(c), c.mode = ca, b === C) {
                    m >>>= 2, n -= 2
                    break a
                  }
                  break
                case 2:
                  c.mode = _
                  break
                case 3:
                  a.msg = 'invalid block type', c.mode = ma
              }
              m >>>= 2, n -= 2
              break
            case Y:
              for (m >>>= 7 & n, n -= 7 & n; n < 32;) {
                if (0 === i) break a
                i--, m += e[g++] << n, n += 8
              }
              if ((65535 & m) !== (m >>> 16 ^ 65535)) {
                a.msg = 'invalid stored block lengths', c.mode = ma
                break
              }
              if (c.length = 65535 & m, m = 0, n = 0, c.mode = Z, b === C) break a
            case Z:
              c.mode = $
            case $:
              if (q = c.length) {
                if (q > i && (q = i), q > j && (q = j), 0 === q) break a
                s.arraySet(f, e, g, q, h), i -= q, g += q, j -= q, h += q, c.length -= q
                break
              }
              c.mode = W
              break
            case _:
              for (; n < 14;) {
                if (0 === i) break a
                i--, m += e[g++] << n, n += 8
              }
              if (c.nlen = (31 & m) + 257, m >>>= 5, n -= 5, c.ndist = (31 & m) + 1, m >>>= 5, n -= 5, c.ncode = (15 & m) + 4, m >>>= 4, n -= 4, c.nlen > 286 || c.ndist > 30) {
                a.msg = 'too many length or distance symbols', c.mode = ma
                break
              }
              c.have = 0, c.mode = aa
            case aa:
              for (; c.have < c.ncode;) {
                for (; n < 3;) {
                  if (0 === i) break a
                  i--, m += e[g++] << n, n += 8
                }
                c.lens[Ca[c.have++]] = 7 & m, m >>>= 3, n -= 3
              }
              for (; c.have < 19;) c.lens[Ca[c.have++]] = 0
              if (c.lencode = c.lendyn, c.lenbits = 7, ya = {bits: c.lenbits}, xa = w(x, c.lens, 0, 19, c.lencode, 0, c.work, ya), c.lenbits = ya.bits, xa) {
                a.msg = 'invalid code lengths set', c.mode = ma
                break
              }
              c.have = 0, c.mode = ba
            case ba:
              for (; c.have < c.nlen + c.ndist;) {
                for (; Aa = c.lencode[m & (1 << c.lenbits) - 1], qa = Aa >>> 24, ra = Aa >>> 16 & 255, sa = 65535 & Aa, !(qa <= n);) {
                  if (0 === i) break a
                  i--, m += e[g++] << n, n += 8
                }
                if (sa < 16) {
                  m >>>= qa, n -= qa, c.lens[c.have++] = sa
                } else {
                  if (16 === sa) {
                    for (za = qa + 2; n < za;) {
                      if (0 === i) break a
                      i--, m += e[g++] << n, n += 8
                    }
                    if (m >>>= qa, n -= qa, 0 === c.have) {
                      a.msg = 'invalid bit length repeat', c.mode = ma
                      break
                    }
                    wa = c.lens[c.have - 1], q = 3 + (3 & m), m >>>= 2, n -= 2
                  } else if (17 === sa) {
                    for (za = qa + 3; n < za;) {
                      if (0 === i) break a
                      i--, m += e[g++] << n, n += 8
                    }
                    m >>>= qa, n -= qa, wa = 0, q = 3 + (7 & m), m >>>= 3, n -= 3
                  } else {
                    for (za = qa + 7; n < za;) {
                      if (0 === i) break a
                      i--, m += e[g++] << n, n += 8
                    }
                    m >>>= qa, n -= qa, wa = 0, q = 11 + (127 & m), m >>>= 7, n -= 7
                  }
                  if (c.have + q > c.nlen + c.ndist) {
                    a.msg = 'invalid bit length repeat', c.mode = ma
                    break
                  }
                  for (; q--;) c.lens[c.have++] = wa
                }
              }
              if (c.mode === ma) break
              if (0 === c.lens[256]) {
                a.msg = 'invalid code -- missing end-of-block', c.mode = ma
                break
              }
              if (c.lenbits = 9, ya = {bits: c.lenbits}, xa = w(y, c.lens, 0, c.nlen, c.lencode, 0, c.work, ya), c.lenbits = ya.bits, xa) {
                a.msg = 'invalid literal/lengths set', c.mode = ma
                break
              }
              if (c.distbits = 6, c.distcode = c.distdyn, ya = {bits: c.distbits}, xa = w(z, c.lens, c.nlen, c.ndist, c.distcode, 0, c.work, ya), c.distbits = ya.bits, xa) {
                a.msg = 'invalid distances set', c.mode = ma
                break
              }
              if (c.mode = ca, b === C) break a
            case ca:
              c.mode = da
            case da:
              if (i >= 6 && j >= 258) {
                a.next_out = h, a.avail_out = j, a.next_in = g, a.avail_in = i, c.hold = m, c.bits = n, v(a, p), h = a.next_out, f = a.output, j = a.avail_out, g = a.next_in, e = a.input, i = a.avail_in, m = c.hold, n = c.bits, c.mode === W && (c.back = -1)
                break
              }
              for (c.back = 0; Aa = c.lencode[m & (1 << c.lenbits) - 1], qa = Aa >>> 24, ra = Aa >>> 16 & 255, sa = 65535 & Aa, !(qa <= n);) {
                if (0 === i) break a
                i--, m += e[g++] << n, n += 8
              }
              if (ra && 0 === (240 & ra)) {
                for (ta = qa, ua = ra, va = sa; Aa = c.lencode[va + ((m & (1 << ta + ua) - 1) >> ta)], qa = Aa >>> 24, ra = Aa >>> 16 & 255, sa = 65535 & Aa, !(ta + qa <= n);) {
                  if (0 === i) break a
                  i--, m += e[g++] << n, n += 8
                }
                m >>>= ta, n -= ta, c.back += ta
              }
              if (m >>>= qa, n -= qa, c.back += qa, c.length = sa, 0 === ra) {
                c.mode = ia
                break
              }
              if (32 & ra) {
                c.back = -1, c.mode = W
                break
              }
              if (64 & ra) {
                a.msg = 'invalid literal/length code', c.mode = ma
                break
              }
              c.extra = 15 & ra, c.mode = ea
            case ea:
              if (c.extra) {
                for (za = c.extra; n < za;) {
                  if (0 === i) break a
                  i--, m += e[g++] << n, n += 8
                }
                c.length += m & (1 << c.extra) - 1, m >>>= c.extra, n -= c.extra, c.back += c.extra
              }
              c.was = c.length, c.mode = fa
            case fa:
              for (; Aa = c.distcode[m & (1 << c.distbits) - 1], qa = Aa >>> 24, ra = Aa >>> 16 & 255, sa = 65535 & Aa, !(qa <= n);) {
                if (0 === i) break a
                i--, m += e[g++] << n, n += 8
              }
              if (0 === (240 & ra)) {
                for (ta = qa, ua = ra, va = sa; Aa = c.distcode[va + ((m & (1 << ta + ua) - 1) >> ta)], qa = Aa >>> 24, ra = Aa >>> 16 & 255, sa = 65535 & Aa, !(ta + qa <= n);) {
                  if (0 === i) break a
                  i--, m += e[g++] << n, n += 8
                }
                m >>>= ta, n -= ta, c.back += ta
              }
              if (m >>>= qa, n -= qa, c.back += qa, 64 & ra) {
                a.msg = 'invalid distance code', c.mode = ma
                break
              }
              c.offset = sa, c.extra = 15 & ra, c.mode = ga
            case ga:
              if (c.extra) {
                for (za = c.extra; n < za;) {
                  if (0 === i) break a
                  i--, m += e[g++] << n, n += 8
                }
                c.offset += m & (1 << c.extra) - 1, m >>>= c.extra, n -= c.extra, c.back += c.extra
              }
              if (c.offset > c.dmax) {
                a.msg = 'invalid distance too far back', c.mode = ma
                break
              }
              c.mode = ha
            case ha:
              if (0 === j) break a
              if (q = p - j, c.offset > q) {
                if (q = c.offset - q, q > c.whave && c.sane) {
                  a.msg = 'invalid distance too far back', c.mode = ma
                  break
                }
                q > c.wnext ? (q -= c.wnext, r = c.wsize - q) : r = c.wnext - q, q > c.length && (q = c.length), pa = c.window
              } else {
                pa = f, r = h - c.offset, q = c.length
              }
              q > j && (q = j), j -= q, c.length -= q
              do f[h++] = pa[r++] while (--q)
              0 === c.length && (c.mode = da)
              break
            case ia:
              if (0 === j) break a
              f[h++] = c.length, j--, c.mode = da
              break
            case ja:
              if (c.wrap) {
                for (; n < 32;) {
                  if (0 === i) break a
                  i--, m |= e[g++] << n, n += 8
                }
                if (p -= j, a.total_out += p, c.total += p, p && (a.adler = c.check = c.flags ? u(c.check, f, p, h - p) : t(c.check, f, p, h - p)), p = j, (c.flags ? m : d(m)) !== c.check) {
                  a.msg = 'incorrect data check', c.mode = ma
                  break
                }
                m = 0, n = 0
              }
              c.mode = ka
            case ka:
              if (c.wrap && c.flags) {
                for (; n < 32;) {
                  if (0 === i) break a
                  i--, m += e[g++] << n, n += 8
                }
                if (m !== (4294967295 & c.total)) {
                  a.msg = 'incorrect length check', c.mode = ma
                  break
                }
                m = 0, n = 0
              }
              c.mode = la
            case la:
              xa = E
              break a
            case ma:
              xa = H
              break a
            case na:
              return I
            case oa:
            default:
              return G
          }
        }
        return a.next_out = h, a.avail_out = j, a.next_in = g, a.avail_in = i, c.hold = m, c.bits = n, (c.wsize || p !== a.avail_out && c.mode < ma && (c.mode < ja || b !== A)) && l(a, a.output, a.next_out, p - a.avail_out) ? (c.mode = na, I) : (o -= a.avail_in, p -= a.avail_out, a.total_in += o, a.total_out += p, c.total += p, c.wrap && p && (a.adler = c.check = c.flags ? u(c.check, f, p, a.next_out - p) : t(c.check, f, p, a.next_out - p)), a.data_type = c.bits + (c.last ? 64 : 0) + (c.mode === W ? 128 : 0) + (c.mode === ca || c.mode === Z ? 256 : 0), (0 === o && 0 === p || b === A) && xa === D && (xa = J), xa)
      }

      function n (a) {
        if (!a || !a.state) return G
        var b = a.state
        return b.window && (b.window = null), a.state = null, D
      }

      function o (a, b) {
        var c
        return a && a.state ? (c = a.state, 0 === (2 & c.wrap) ? G : (c.head = b, b.done = !1, D)) : G
      }

      function p (a, b) {
        var c, d, e, f = b.length
        return a && a.state ? (c = a.state, 0 !== c.wrap && c.mode !== V ? G : c.mode === V && (d = 1, d = t(d, b, f, 0), d !== c.check) ? H : (e = l(a, b, f, f)) ? (c.mode = na, I) : (c.havedict = 1, D)) : G
      }

      var q, r, s = a('../utils/common'), t = a('./adler32'), u = a('./crc32'), v = a('./inffast'), w = a('./inftrees'),
        x = 0, y = 1, z = 2, A = 4, B = 5, C = 6, D = 0, E = 1, F = 2, G = -2, H = -3, I = -4, J = -5, K = 8, L = 1,
        M = 2, N = 3, O = 4, P = 5, Q = 6, R = 7, S = 8, T = 9, U = 10, V = 11, W = 12, X = 13, Y = 14, Z = 15, $ = 16,
        _ = 17, aa = 18, ba = 19, ca = 20, da = 21, ea = 22, fa = 23, ga = 24, ha = 25, ia = 26, ja = 27, ka = 28,
        la = 29, ma = 30, na = 31, oa = 32, pa = 852, qa = 592, ra = 15, sa = ra, ta = !0
      c.inflateReset = g, c.inflateReset2 = h, c.inflateResetKeep = f, c.inflateInit = j, c.inflateInit2 = i, c.inflate = m, c.inflateEnd = n, c.inflateGetHeader = o, c.inflateSetDictionary = p, c.inflateInfo = 'pako inflate (from Nodeca project)'
    }, {'../utils/common': 62, './adler32': 64, './crc32': 66, './inffast': 69, './inftrees': 71}],
    71: [function (a, b, c) {
      var d = a('../utils/common'), e = 15, f = 852, g = 592, h = 0, i = 1, j = 2,
        k = [3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31, 35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 0, 0],
        l = [16, 16, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 18, 18, 18, 18, 19, 19, 19, 19, 20, 20, 20, 20, 21, 21, 21, 21, 16, 72, 78],
        m = [1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193, 257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145, 8193, 12289, 16385, 24577, 0, 0],
        n = [16, 16, 16, 16, 17, 17, 18, 18, 19, 19, 20, 20, 21, 21, 22, 22, 23, 23, 24, 24, 25, 25, 26, 26, 27, 27, 28, 28, 29, 29, 64, 64]
      b.exports = function (a, b, c, o, p, q, r, s) {
        var t, u, v, w, x, y, z, A, B, C = s.bits, D = 0, E = 0, F = 0, G = 0, H = 0, I = 0, J = 0, K = 0, L = 0, M = 0,
          N = null, O = 0, P = new d.Buf16(e + 1), Q = new d.Buf16(e + 1), R = null, S = 0
        for (D = 0; D <= e; D++) P[D] = 0
        for (E = 0; E < o; E++) P[b[c + E]]++
        for (H = C, G = e; G >= 1 && 0 === P[G]; G--)
        if (H > G && (H = G), 0 === G) return p[q++] = 20971520, p[q++] = 20971520, s.bits = 1, 0
        for (F = 1; F < G && 0 === P[F]; F++)
        for (H < F && (H = F), K = 1, D = 1; D <= e; D++) if (K <<= 1, K -= P[D], K < 0) return -1
        if (K > 0 && (a === h || 1 !== G)) return -1
        for (Q[1] = 0, D = 1; D < e; D++) Q[D + 1] = Q[D] + P[D]
        for (E = 0; E < o; E++) 0 !== b[c + E] && (r[Q[b[c + E]]++] = E)
        if (a === h ? (N = R = r, y = 19) : a === i ? (N = k, O -= 257, R = l, S -= 257, y = 256) : (N = m, R = n, y = -1), M = 0, E = 0, D = F, x = q, I = H, J = 0, v = -1, L = 1 << H, w = L - 1, a === i && L > f || a === j && L > g) return 1
        for (var T = 0; ;) {
          T++, z = D - J, r[E] < y ? (A = 0, B = r[E]) : r[E] > y ? (A = R[S + r[E]], B = N[O + r[E]]) : (A = 96, B = 0), t = 1 << D - J, u = 1 << I, F = u
          do u -= t, p[x + (M >> J) + u] = z << 24 | A << 16 | B | 0 while (0 !== u)
          for (t = 1 << D - 1; M & t;) t >>= 1
          if (0 !== t ? (M &= t - 1, M += t) : M = 0, E++, 0 === --P[D]) {
            if (D === G) break
            D = b[c + r[E]]
          }
          if (D > H && (M & w) !== v) {
            for (0 === J && (J = H), x += F, I = D - J, K = 1 << I; I + J < G && (K -= P[I + J], !(K <= 0));) I++, K <<= 1
            if (L += 1 << I, a === i && L > f || a === j && L > g) return 1
            v = M & w, p[v] = H << 24 | I << 16 | x - q | 0
          }
        }
        return 0 !== M && (p[x + M] = D - J << 24 | 64 << 16 | 0), s.bits = H, 0
      }
    }, {'../utils/common': 62}],
    72: [function (a, b, c) {
      b.exports = {
        2: 'need dictionary',
        1: 'stream end',
        0: '',
        '-1': 'file error',
        '-2': 'stream error',
        '-3': 'data error',
        '-4': 'insufficient memory',
        '-5': 'buffer error',
        '-6': 'incompatible version'
      }
    }, {}],
    73: [function (a, b, c) {
      function d (a) {
        for (var b = a.length; --b >= 0;) a[b] = 0
      }

      function e (a, b, c, d, e) {
        this.static_tree = a, this.extra_bits = b, this.extra_base = c, this.elems = d, this.max_length = e, this.has_stree = a && a.length
      }

      function f (a, b) {
        this.dyn_tree = a, this.max_code = 0, this.stat_desc = b
      }

      function g (a) {
        return a < 256 ? ia[a] : ia[256 + (a >>> 7)]
      }

      function h (a, b) {
        a.pending_buf[a.pending++] = 255 & b, a.pending_buf[a.pending++] = b >>> 8 & 255
      }

      function i (a, b, c) {
        a.bi_valid > X - c ? (a.bi_buf |= b << a.bi_valid & 65535, h(a, a.bi_buf), a.bi_buf = b >> X - a.bi_valid, a.bi_valid += c - X) : (a.bi_buf |= b << a.bi_valid & 65535, a.bi_valid += c)
      }

      function j (a, b, c) {
        i(a, c[2 * b], c[2 * b + 1])
      }

      function k (a, b) {
        var c = 0
        do c |= 1 & a, a >>>= 1, c <<= 1 while (--b > 0)
        return c >>> 1
      }

      function l (a) {
        16 === a.bi_valid ? (h(a, a.bi_buf), a.bi_buf = 0, a.bi_valid = 0) : a.bi_valid >= 8 && (a.pending_buf[a.pending++] = 255 & a.bi_buf, a.bi_buf >>= 8, a.bi_valid -= 8)
      }

      function m (a, b) {
        var c, d, e, f, g, h, i = b.dyn_tree, j = b.max_code, k = b.stat_desc.static_tree, l = b.stat_desc.has_stree,
          m = b.stat_desc.extra_bits, n = b.stat_desc.extra_base, o = b.stat_desc.max_length, p = 0
        for (f = 0; f <= W; f++) a.bl_count[f] = 0
        for (i[2 * a.heap[a.heap_max] + 1] = 0, c = a.heap_max + 1; c < V; c++) d = a.heap[c], f = i[2 * i[2 * d + 1] + 1] + 1, f > o && (f = o, p++), i[2 * d + 1] = f, d > j || (a.bl_count[f]++, g = 0, d >= n && (g = m[d - n]), h = i[2 * d], a.opt_len += h * (f + g), l && (a.static_len += h * (k[2 * d + 1] + g)))
        if (0 !== p) {
          do {
            for (f = o - 1; 0 === a.bl_count[f];) f--
            a.bl_count[f]--, a.bl_count[f + 1] += 2, a.bl_count[o]--, p -= 2
          } while (p > 0)
          for (f = o; 0 !== f; f--) for (d = a.bl_count[f]; 0 !== d;) e = a.heap[--c], e > j || (i[2 * e + 1] !== f && (a.opt_len += (f - i[2 * e + 1]) * i[2 * e], i[2 * e + 1] = f), d--)
        }
      }

      function n (a, b, c) {
        var d, e, f = new Array(W + 1), g = 0
        for (d = 1; d <= W; d++) f[d] = g = g + c[d - 1] << 1
        for (e = 0; e <= b; e++) {
          var h = a[2 * e + 1]
          0 !== h && (a[2 * e] = k(f[h]++, h))
        }
      }

      function o () {
        var a, b, c, d, f, g = new Array(W + 1)
        for (c = 0, d = 0; d < Q - 1; d++) for (ka[d] = c, a = 0; a < 1 << ba[d]; a++) ja[c++] = d
        for (ja[c - 1] = d, f = 0, d = 0; d < 16; d++) for (la[d] = f, a = 0; a < 1 << ca[d]; a++) ia[f++] = d
        for (f >>= 7; d < T; d++) for (la[d] = f << 7, a = 0; a < 1 << ca[d] - 7; a++) ia[256 + f++] = d
        for (b = 0; b <= W; b++) g[b] = 0
        for (a = 0; a <= 143;) ga[2 * a + 1] = 8, a++, g[8]++
        for (; a <= 255;) ga[2 * a + 1] = 9, a++, g[9]++
        for (; a <= 279;) ga[2 * a + 1] = 7, a++, g[7]++
        for (; a <= 287;) ga[2 * a + 1] = 8, a++, g[8]++
        for (n(ga, S + 1, g), a = 0; a < T; a++) ha[2 * a + 1] = 5, ha[2 * a] = k(a, 5)
        ma = new e(ga, ba, R + 1, S, W), na = new e(ha, ca, 0, T, W), oa = new e(new Array(0), da, 0, U, Y)
      }

      function p (a) {
        var b
        for (b = 0; b < S; b++) a.dyn_ltree[2 * b] = 0
        for (b = 0; b < T; b++) a.dyn_dtree[2 * b] = 0
        for (b = 0; b < U; b++) a.bl_tree[2 * b] = 0
        a.dyn_ltree[2 * Z] = 1, a.opt_len = a.static_len = 0, a.last_lit = a.matches = 0
      }

      function q (a) {
        a.bi_valid > 8 ? h(a, a.bi_buf) : a.bi_valid > 0 && (a.pending_buf[a.pending++] = a.bi_buf), a.bi_buf = 0, a.bi_valid = 0
      }

      function r (a, b, c, d) {
        q(a), d && (h(a, c), h(a, ~c)), G.arraySet(a.pending_buf, a.window, b, c, a.pending), a.pending += c
      }

      function s (a, b, c, d) {
        var e = 2 * b, f = 2 * c
        return a[e] < a[f] || a[e] === a[f] && d[b] <= d[c]
      }

      function t (a, b, c) {
        for (var d = a.heap[c], e = c << 1; e <= a.heap_len && (e < a.heap_len && s(b, a.heap[e + 1], a.heap[e], a.depth) && e++, !s(b, d, a.heap[e], a.depth));) a.heap[c] = a.heap[e], c = e, e <<= 1
        a.heap[c] = d
      }

      function u (a, b, c) {
        var d, e, f, h, k = 0
        if (0 !== a.last_lit) do d = a.pending_buf[a.d_buf + 2 * k] << 8 | a.pending_buf[a.d_buf + 2 * k + 1], e = a.pending_buf[a.l_buf + k], k++, 0 === d ? j(a, e, b) : (f = ja[e], j(a, f + R + 1, b), h = ba[f], 0 !== h && (e -= ka[f], i(a, e, h)), d--, f = g(d), j(a, f, c), h = ca[f], 0 !== h && (d -= la[f], i(a, d, h))) while (k < a.last_lit)
        j(a, Z, b)
      }

      function v (a, b) {
        var c, d, e, f = b.dyn_tree, g = b.stat_desc.static_tree, h = b.stat_desc.has_stree, i = b.stat_desc.elems,
          j = -1
        for (a.heap_len = 0, a.heap_max = V, c = 0; c < i; c++) 0 !== f[2 * c] ? (a.heap[++a.heap_len] = j = c, a.depth[c] = 0) : f[2 * c + 1] = 0
        for (; a.heap_len < 2;) e = a.heap[++a.heap_len] = j < 2 ? ++j : 0, f[2 * e] = 1, a.depth[e] = 0, a.opt_len--, h && (a.static_len -= g[2 * e + 1])
        for (b.max_code = j, c = a.heap_len >> 1; c >= 1; c--) t(a, f, c)
        e = i
        do c = a.heap[1], a.heap[1] = a.heap[a.heap_len--], t(a, f, 1), d = a.heap[1], a.heap[--a.heap_max] = c, a.heap[--a.heap_max] = d, f[2 * e] = f[2 * c] + f[2 * d], a.depth[e] = (a.depth[c] >= a.depth[d] ? a.depth[c] : a.depth[d]) + 1, f[2 * c + 1] = f[2 * d + 1] = e, a.heap[1] = e++, t(a, f, 1) while (a.heap_len >= 2)
        a.heap[--a.heap_max] = a.heap[1], m(a, b), n(f, j, a.bl_count)
      }

      function w (a, b, c) {
        var d, e, f = -1, g = b[1], h = 0, i = 7, j = 4
        for (0 === g && (i = 138, j = 3), b[2 * (c + 1) + 1] = 65535, d = 0; d <= c; d++) e = g, g = b[2 * (d + 1) + 1], ++h < i && e === g || (h < j ? a.bl_tree[2 * e] += h : 0 !== e ? (e !== f && a.bl_tree[2 * e]++, a.bl_tree[2 * $]++) : h <= 10 ? a.bl_tree[2 * _]++ : a.bl_tree[2 * aa]++, h = 0, f = e, 0 === g ? (i = 138, j = 3) : e === g ? (i = 6, j = 3) : (i = 7, j = 4))
      }

      function x (a, b, c) {
        var d, e, f = -1, g = b[1], h = 0, k = 7, l = 4
        for (0 === g && (k = 138, l = 3), d = 0; d <= c; d++) {
          if (e = g, g = b[2 * (d + 1) + 1], !(++h < k && e === g)) {
            if (h < l) {
              do j(a, e, a.bl_tree) while (0 !== --h)
            } else {
              0 !== e ? (e !== f && (j(a, e, a.bl_tree), h--), j(a, $, a.bl_tree), i(a, h - 3, 2)) : h <= 10 ? (j(a, _, a.bl_tree), i(a, h - 3, 3)) : (j(a, aa, a.bl_tree), i(a, h - 11, 7))
            }
            h = 0, f = e, 0 === g ? (k = 138, l = 3) : e === g ? (k = 6, l = 3) : (k = 7, l = 4)
          }
        }
      }

      function y (a) {
        var b
        for (w(a, a.dyn_ltree, a.l_desc.max_code), w(a, a.dyn_dtree, a.d_desc.max_code), v(a, a.bl_desc), b = U - 1; b >= 3 && 0 === a.bl_tree[2 * ea[b] + 1]; b--)
        return a.opt_len += 3 * (b + 1) + 5 + 5 + 4, b
      }

      function z (a, b, c, d) {
        var e
        for (i(a, b - 257, 5), i(a, c - 1, 5), i(a, d - 4, 4), e = 0; e < d; e++) i(a, a.bl_tree[2 * ea[e] + 1], 3)
        x(a, a.dyn_ltree, b - 1), x(a, a.dyn_dtree, c - 1)
      }

      function A (a) {
        var b, c = 4093624447
        for (b = 0; b <= 31; b++, c >>>= 1) if (1 & c && 0 !== a.dyn_ltree[2 * b]) return I
        if (0 !== a.dyn_ltree[18] || 0 !== a.dyn_ltree[20] || 0 !== a.dyn_ltree[26]) return J
        for (b = 32; b < R; b++) if (0 !== a.dyn_ltree[2 * b]) return J
        return I
      }

      function B (a) {
        pa || (o(), pa = !0), a.l_desc = new f(a.dyn_ltree, ma), a.d_desc = new f(a.dyn_dtree, na), a.bl_desc = new f(a.bl_tree, oa), a.bi_buf = 0, a.bi_valid = 0, p(a)
      }

      function C (a, b, c, d) {
        i(a, (L << 1) + (d ? 1 : 0), 3), r(a, b, c, !0)
      }

      function D (a) {
        i(a, M << 1, 3), j(a, Z, ga), l(a)
      }

      function E (a, b, c, d) {
        var e, f, g = 0
        a.level > 0 ? (a.strm.data_type === K && (a.strm.data_type = A(a)), v(a, a.l_desc), v(a, a.d_desc), g = y(a), e = a.opt_len + 3 + 7 >>> 3, f = a.static_len + 3 + 7 >>> 3, f <= e && (e = f)) : e = f = c + 5, c + 4 <= e && b !== -1 ? C(a, b, c, d) : a.strategy === H || f === e ? (i(a, (M << 1) + (d ? 1 : 0), 3), u(a, ga, ha)) : (i(a, (N << 1) + (d ? 1 : 0), 3), z(a, a.l_desc.max_code + 1, a.d_desc.max_code + 1, g + 1), u(a, a.dyn_ltree, a.dyn_dtree)), p(a), d && q(a)
      }

      function F (a, b, c) {
        return a.pending_buf[a.d_buf + 2 * a.last_lit] = b >>> 8 & 255, a.pending_buf[a.d_buf + 2 * a.last_lit + 1] = 255 & b, a.pending_buf[a.l_buf + a.last_lit] = 255 & c, a.last_lit++, 0 === b ? a.dyn_ltree[2 * c]++ : (a.matches++, b--, a.dyn_ltree[2 * (ja[c] + R + 1)]++, a.dyn_dtree[2 * g(b)]++), a.last_lit === a.lit_bufsize - 1
      }

      var G = a('../utils/common'), H = 4, I = 0, J = 1, K = 2, L = 0, M = 1, N = 2, O = 3, P = 258, Q = 29, R = 256,
        S = R + 1 + Q, T = 30, U = 19, V = 2 * S + 1, W = 15, X = 16, Y = 7, Z = 256, $ = 16, _ = 17, aa = 18,
        ba = [0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0],
        ca = [0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13],
        da = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 3, 7],
        ea = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15], fa = 512, ga = new Array(2 * (S + 2))
      d(ga)
      var ha = new Array(2 * T)
      d(ha)
      var ia = new Array(fa)
      d(ia)
      var ja = new Array(P - O + 1)
      d(ja)
      var ka = new Array(Q)
      d(ka)
      var la = new Array(T)
      d(la)
      var ma, na, oa, pa = !1
      c._tr_init = B, c._tr_stored_block = C, c._tr_flush_block = E, c._tr_tally = F, c._tr_align = D
    }, {'../utils/common': 62}],
    74: [function (a, b, c) {
      function d () {
        this.input = null, this.next_in = 0, this.avail_in = 0, this.total_in = 0, this.output = null, this.next_out = 0, this.avail_out = 0, this.total_out = 0, this.msg = '', this.state = null, this.data_type = 2, this.adler = 0
      }

      b.exports = d
    }, {}]
  }, {}, [10])(10)
})
var md5 = function () {
  function t () {
    this.hexcase = 0, this.b64pad = ''
  }

  var r = (__define, t), h = r.prototype
  return h.hex_md5 = function (t) {
    return this.rstr2hex(this.rstr_md5(this.str2rstr_utf8(t)))
  }, h.b64_md5 = function (t) {
    return this.rstr2b64(this.rstr_md5(this.str2rstr_utf8(t)))
  }, h.any_md5 = function (t, r) {
    return this.rstr2any(this.rstr_md5(this.str2rstr_utf8(t)), r)
  }, h.hex_hmac_md5 = function (t, r) {
    return this.rstr2hex(this.rstr_hmac_md5(this.str2rstr_utf8(t), this.str2rstr_utf8(r)))
  }, h.b64_hmac_md5 = function (t, r) {
    return this.rstr2b64(this.rstr_hmac_md5(this.str2rstr_utf8(t), this.str2rstr_utf8(r)))
  }, h.any_hmac_md5 = function (t, r, h) {
    return this.rstr2any(this.rstr_hmac_md5(this.str2rstr_utf8(t), this.str2rstr_utf8(r)), h)
  }, h.md5_vm_test = function () {
    return '900150983cd24fb0d6963f7d28e17f72' == this.hex_md5('abc').toLowerCase()
  }, h.rstr_md5 = function (t) {
    return this.binl2rstr(this.binl_md5(this.rstr2binl(t), 8 * t.length))
  }, h.rstr_hmac_md5 = function (t, r) {
    var h = this.rstr2binl(t)
    h.length > 16 && (h = this.binl_md5(h, 8 * t.length))
    for (var i = Array(16), s = Array(16), d = 0; 16 > d; d++) i[d] = 909522486 ^ h[d], s[d] = 1549556828 ^ h[d]
    var n = this.binl_md5(i.concat(this.rstr2binl(r)), 512 + 8 * r.length)
    return this.binl2rstr(this.binl_md5(s.concat(n), 640))
  }, h.rstr2hex = function (t) {
    try {
      this.hexcase
    } catch (r) {
      this.hexcase = 0
    }
    for (var h, i = this.hexcase ? '0123456789ABCDEF' : '0123456789abcdef', s = '', d = 0; d < t.length; d++) h = t.charCodeAt(d), s += i.charAt(h >>> 4 & 15) + i.charAt(15 & h)
    return s
  }, h.rstr2b64 = function (t) {
    try {
      this.b64pad
    } catch (r) {
      this.b64pad = ''
    }
    for (var h = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/', i = '', s = t.length, d = 0; s > d; d += 3) for (var n = t.charCodeAt(d) << 16 | (s > d + 1 ? t.charCodeAt(d + 1) << 8 : 0) | (s > d + 2 ? t.charCodeAt(d + 2) : 0), _ = 0; 4 > _; _++) i += 8 * d + 6 * _ > 8 * t.length ? this.b64pad : h.charAt(n >>> 6 * (3 - _) & 63)
    return i
  }, h.rstr2any = function (t, r) {
    var h, i, s, d, n, _ = r.length, m = Array(Math.ceil(t.length / 2))
    for (h = 0; h < m.length; h++) m[h] = t.charCodeAt(2 * h) << 8 | t.charCodeAt(2 * h + 1)
    var e = Math.ceil(8 * t.length / (Math.log(r.length) / Math.log(2))), f = Array(e)
    for (i = 0; e > i; i++) {
      for (n = Array(), d = 0, h = 0; h < m.length; h++) d = (d << 16) + m[h], s = Math.floor(d / _), d -= s * _, (n.length > 0 || s > 0) && (n[n.length] = s)
      f[i] = d, m = n
    }
    var a = ''
    for (h = f.length - 1; h >= 0; h--) a += r.charAt(f[h])
    return a
  }, h.str2rstr_utf8 = function (t) {
    for (var r, h, i = '', s = -1; ++s < t.length;) r = t.charCodeAt(s), h = s + 1 < t.length ? t.charCodeAt(s + 1) : 0, r >= 55296 && 56319 >= r && h >= 56320 && 57343 >= h && (r = 65536 + ((1023 & r) << 10) + (1023 & h), s++), 127 >= r ? i += String.fromCharCode(r) : 2047 >= r ? i += String.fromCharCode(192 | r >>> 6 & 31, 128 | 63 & r) : 65535 >= r ? i += String.fromCharCode(224 | r >>> 12 & 15, 128 | r >>> 6 & 63, 128 | 63 & r) : 2097151 >= r && (i += String.fromCharCode(240 | r >>> 18 & 7, 128 | r >>> 12 & 63, 128 | r >>> 6 & 63, 128 | 63 & r))
    return i
  }, h.str2rstr_utf16le = function (t) {
    for (var r = '', h = 0; h < t.length; h++) r += String.fromCharCode(255 & t.charCodeAt(h), t.charCodeAt(h) >>> 8 & 255)
    return r
  }, h.str2rstr_utf16be = function (t) {
    for (var r = '', h = 0; h < t.length; h++) r += String.fromCharCode(t.charCodeAt(h) >>> 8 & 255, 255 & t.charCodeAt(h))
    return r
  }, h.rstr2binl = function (t) {
    for (var r = Array(t.length >> 2), h = 0; h < r.length; h++) r[h] = 0
    for (var h = 0; h < 8 * t.length; h += 8) r[h >> 5] |= (255 & t.charCodeAt(h / 8)) << h % 32
    return r
  }, h.binl2rstr = function (t) {
    for (var r = '', h = 0; h < 32 * t.length; h += 8) r += String.fromCharCode(t[h >> 5] >>> h % 32 & 255)
    return r
  }, h.binl_md5 = function (t, r) {
    t[r >> 5] |= 128 << r % 32, t[(r + 64 >>> 9 << 4) + 14] = r
    for (var h = 1732584193, i = -271733879, s = -1732584194, d = 271733878, n = 0; n < t.length; n += 16) {
      var _ = h, m = i, e = s, f = d
      h = this.md5_ff(h, i, s, d, t[n + 0], 7, -680876936), d = this.md5_ff(d, h, i, s, t[n + 1], 12, -389564586), s = this.md5_ff(s, d, h, i, t[n + 2], 17, 606105819), i = this.md5_ff(i, s, d, h, t[n + 3], 22, -1044525330), h = this.md5_ff(h, i, s, d, t[n + 4], 7, -176418897), d = this.md5_ff(d, h, i, s, t[n + 5], 12, 1200080426), s = this.md5_ff(s, d, h, i, t[n + 6], 17, -1473231341), i = this.md5_ff(i, s, d, h, t[n + 7], 22, -45705983), h = this.md5_ff(h, i, s, d, t[n + 8], 7, 1770035416), d = this.md5_ff(d, h, i, s, t[n + 9], 12, -1958414417), s = this.md5_ff(s, d, h, i, t[n + 10], 17, -42063), i = this.md5_ff(i, s, d, h, t[n + 11], 22, -1990404162), h = this.md5_ff(h, i, s, d, t[n + 12], 7, 1804603682), d = this.md5_ff(d, h, i, s, t[n + 13], 12, -40341101), s = this.md5_ff(s, d, h, i, t[n + 14], 17, -1502002290), i = this.md5_ff(i, s, d, h, t[n + 15], 22, 1236535329), h = this.md5_gg(h, i, s, d, t[n + 1], 5, -165796510), d = this.md5_gg(d, h, i, s, t[n + 6], 9, -1069501632), s = this.md5_gg(s, d, h, i, t[n + 11], 14, 643717713), i = this.md5_gg(i, s, d, h, t[n + 0], 20, -373897302), h = this.md5_gg(h, i, s, d, t[n + 5], 5, -701558691), d = this.md5_gg(d, h, i, s, t[n + 10], 9, 38016083), s = this.md5_gg(s, d, h, i, t[n + 15], 14, -660478335), i = this.md5_gg(i, s, d, h, t[n + 4], 20, -405537848), h = this.md5_gg(h, i, s, d, t[n + 9], 5, 568446438), d = this.md5_gg(d, h, i, s, t[n + 14], 9, -1019803690), s = this.md5_gg(s, d, h, i, t[n + 3], 14, -187363961), i = this.md5_gg(i, s, d, h, t[n + 8], 20, 1163531501), h = this.md5_gg(h, i, s, d, t[n + 13], 5, -1444681467), d = this.md5_gg(d, h, i, s, t[n + 2], 9, -51403784), s = this.md5_gg(s, d, h, i, t[n + 7], 14, 1735328473), i = this.md5_gg(i, s, d, h, t[n + 12], 20, -1926607734), h = this.md5_hh(h, i, s, d, t[n + 5], 4, -378558), d = this.md5_hh(d, h, i, s, t[n + 8], 11, -2022574463), s = this.md5_hh(s, d, h, i, t[n + 11], 16, 1839030562), i = this.md5_hh(i, s, d, h, t[n + 14], 23, -35309556), h = this.md5_hh(h, i, s, d, t[n + 1], 4, -1530992060), d = this.md5_hh(d, h, i, s, t[n + 4], 11, 1272893353), s = this.md5_hh(s, d, h, i, t[n + 7], 16, -155497632), i = this.md5_hh(i, s, d, h, t[n + 10], 23, -1094730640), h = this.md5_hh(h, i, s, d, t[n + 13], 4, 681279174), d = this.md5_hh(d, h, i, s, t[n + 0], 11, -358537222), s = this.md5_hh(s, d, h, i, t[n + 3], 16, -722521979), i = this.md5_hh(i, s, d, h, t[n + 6], 23, 76029189), h = this.md5_hh(h, i, s, d, t[n + 9], 4, -640364487), d = this.md5_hh(d, h, i, s, t[n + 12], 11, -421815835), s = this.md5_hh(s, d, h, i, t[n + 15], 16, 530742520), i = this.md5_hh(i, s, d, h, t[n + 2], 23, -995338651), h = this.md5_ii(h, i, s, d, t[n + 0], 6, -198630844), d = this.md5_ii(d, h, i, s, t[n + 7], 10, 1126891415), s = this.md5_ii(s, d, h, i, t[n + 14], 15, -1416354905), i = this.md5_ii(i, s, d, h, t[n + 5], 21, -57434055), h = this.md5_ii(h, i, s, d, t[n + 12], 6, 1700485571), d = this.md5_ii(d, h, i, s, t[n + 3], 10, -1894986606), s = this.md5_ii(s, d, h, i, t[n + 10], 15, -1051523), i = this.md5_ii(i, s, d, h, t[n + 1], 21, -2054922799), h = this.md5_ii(h, i, s, d, t[n + 8], 6, 1873313359), d = this.md5_ii(d, h, i, s, t[n + 15], 10, -30611744), s = this.md5_ii(s, d, h, i, t[n + 6], 15, -1560198380), i = this.md5_ii(i, s, d, h, t[n + 13], 21, 1309151649), h = this.md5_ii(h, i, s, d, t[n + 4], 6, -145523070), d = this.md5_ii(d, h, i, s, t[n + 11], 10, -1120210379), s = this.md5_ii(s, d, h, i, t[n + 2], 15, 718787259), i = this.md5_ii(i, s, d, h, t[n + 9], 21, -343485551), h = this.safe_add(h, _), i = this.safe_add(i, m), s = this.safe_add(s, e), d = this.safe_add(d, f)
    }
    return [h, i, s, d]
  }, h.md5_cmn = function (t, r, h, i, s, d) {
    return this.safe_add(this.bit_rol(this.safe_add(this.safe_add(r, t), this.safe_add(i, d)), s), h)
  }, h.md5_ff = function (t, r, h, i, s, d, n) {
    return this.md5_cmn(r & h | ~r & i, t, r, s, d, n)
  }, h.md5_gg = function (t, r, h, i, s, d, n) {
    return this.md5_cmn(r & i | h & ~i, t, r, s, d, n)
  }, h.md5_hh = function (t, r, h, i, s, d, n) {
    return this.md5_cmn(r ^ h ^ i, t, r, s, d, n)
  }, h.md5_ii = function (t, r, h, i, s, d, n) {
    return this.md5_cmn(h ^ (r | ~i), t, r, s, d, n)
  }, h.safe_add = function (t, r) {
    var h = (65535 & t) + (65535 & r), i = (t >> 16) + (r >> 16) + (h >> 16)
    return i << 16 | 65535 & h
  }, h.bit_rol = function (t, r) {
    return t << r | t >>> 32 - r
  }, t
}()
egret.registerClass(md5, 'md5')
window.fgui = {}, window.fairygui = window.fgui, window.__extends = this && this.__extends || function () {
  var t = Object.setPrototypeOf || {__proto__: []} instanceof Array && function (t, e) {
    t.__proto__ = e
  } || function (t, e) {
    for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
  }
  return function (e, i) {
    function n () {
      this.constructor = e
    }

    t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n)
  }
}()
var __awaiter = this && this.__awaiter || function (t, e, i, n) {
  return new (i || (i = Promise))(function (o, r) {
    function s (t) {
      try {
        h(n.next(t))
      } catch (t) {
        r(t)
      }
    }

    function a (t) {
      try {
        h(n.throw(t))
      } catch (t) {
        r(t)
      }
    }

    function h (t) {
      t.done ? o(t.value) : new i(function (e) {
        e(t.value)
      }).then(s, a)
    }

    h((n = n.apply(t, e || [])).next())
  })
}, __generator = this && this.__generator || function (t, e) {
  var i, n, o, r, s = {
    label: 0, sent: function () {
      if (1 & o[0]) throw o[1]
      return o[1]
    }, trys: [], ops: []
  }
  return r = {next: a(0), throw: a(1), return: a(2)}, 'function' == typeof Symbol && (r[Symbol.iterator] = function () {
    return this
  }), r

  function a (r) {
    return function (a) {
      return function (r) {
        if (i) throw new TypeError('Generator is already executing.')
        for (; s;) {
          try {
            if (i = 1, n && (o = 2 & r[0] ? n.return : r[0] ? n.throw || ((o = n.return) && o.call(n), 0) : n.next) && !(o = o.call(n, r[1])).done) return o
            switch (n = 0, o && (r = [2 & r[0], o.value]), r[0]) {
              case 0:
              case 1:
                o = r
                break
              case 4:
                return s.label++, {value: r[1], done: !1}
              case 5:
                s.label++, n = r[1], r = [0]
                continue
              case 7:
                r = s.ops.pop(), s.trys.pop()
                continue
              default:
                if (!(o = (o = s.trys).length > 0 && o[o.length - 1]) && (6 === r[0] || 2 === r[0])) {
                  s = 0
                  continue
                }
                if (3 === r[0] && (!o || r[1] > o[0] && r[1] < o[3])) {
                  s.label = r[1]
                  break
                }
                if (6 === r[0] && s.label < o[1]) {
                  s.label = o[1], o = r
                  break
                }
                if (o && s.label < o[2]) {
                  s.label = o[2], s.ops.push(r)
                  break
                }
                o[2] && s.ops.pop(), s.trys.pop()
                continue
            }
            r = e.call(t, s)
          } catch (t) {
            r = [6, t], n = 0
          } finally {
            i = o = 0
          }
        }
        if (5 & r[0]) throw r[1]
        return {value: r[0] ? r[1] : void 0, done: !0}
      }([r, a])
    }
  }
}
!function (t) {
  var e = function () {
    function e () {
      this._itemList = new Array, this._objectPool = new Array
    }

    return e.prototype.createObject = function (e, i) {
      var n = t.UIPackage.getByName(e)
      if (!n) throw new Error('package not found: ' + e)
      var o = n.getItemByName(i)
      if (!o) throw new Error('resource not found: ' + i)
      this.internalCreateObject(o)
    }, e.prototype.createObjectFromURL = function (e) {
      var i = t.UIPackage.getItemByURL(e)
      if (!i) throw new Error('resource not found: ' + e)
      this.internalCreateObject(i)
    }, e.prototype.cancel = function () {
      t.GTimers.inst.remove(this.run, this), this._itemList.length = 0
      var e = this._objectPool.length
      if (e > 0) {
        for (var i = 0; i < e; i++) this._objectPool[i].dispose()
        this._objectPool.length = 0
      }
    }, e.prototype.internalCreateObject = function (e) {
      this._itemList.length = 0, this._objectPool.length = 0
      var i = {pi: e, type: e.objectType}
      i.childCount = this.collectComponentChildren(e), this._itemList.push(i), this._index = 0, t.GTimers.inst.add(1, 0, this.run, this)
    }, e.prototype.collectComponentChildren = function (e) {
      var i, n, o, r, s, a, h = e.rawData
      h.seek(0, 2)
      var l = h.readShort()
      for (o = 0; o < l; o++) {
        r = h.readShort(), s = h.position, h.seek(s, 0)
        var c = h.readByte(), u = h.readS(), _ = h.readS()
        h.position = s, null != u ? (i = {
          pi: n = null != (a = null != _ ? t.UIPackage.getById(_) : e.owner) ? a.getItemById(u) : null,
          type: c
        }, null != n && n.type == t.PackageItemType.Component && (i.childCount = this.collectComponentChildren(n))) : (i = {type: c}, c == t.ObjectType.List && (i.listItemCount = this.collectListChildren(h))), this._itemList.push(i), h.position = s + r
      }
      return l
    }, e.prototype.collectListChildren = function (e) {
      e.seek(e.position, 8)
      var i, n, o, r, s, a = 0, h = e.readS(), l = e.readShort()
      for (i = 0; i < l; i++) {
        n = e.readShort(), n += e.position, null == (o = e.readS()) && (o = h), o && (r = t.UIPackage.getItemByURL(o)) && (s = {
          pi: r,
          type: r.objectType
        }, r.type == t.PackageItemType.Component && (s.childCount = this.collectComponentChildren(r)), this._itemList.push(s), a++), e.position = n
      }
      return a
    }, e.prototype.run = function () {
      for (var e, i, n, o, r = egret.getTimer(), s = t.UIConfig.frameTimeForAsyncUIConstruction, a = this._itemList.length; this._index < a;) {
        if ((i = this._itemList[this._index]).pi) {
          e = t.UIObjectFactory.newObject(i.pi), this._objectPool.push(e), t.UIPackage._constructing++, i.pi.type == t.PackageItemType.Component ? (n = this._objectPool.length - i.childCount - 1, e.constructFromResource2(this._objectPool, n), this._objectPool.splice(n, i.childCount)) : e.constructFromResource(), t.UIPackage._constructing--
        } else if (e = t.UIObjectFactory.newObject(i.type), this._objectPool.push(e), i.type == t.ObjectType.List && i.listItemCount > 0) {
          for (n = this._objectPool.length - i.listItemCount - 1, o = 0; o < i.listItemCount; o++) e.itemPool.returnObject(this._objectPool[o + n])
          this._objectPool.splice(n, i.listItemCount)
        }
        if (this._index++, this._index % 5 == 0 && egret.getTimer() - r >= s) return
      }
      t.GTimers.inst.remove(this.run, this)
      var h = this._objectPool[0]
      this._itemList.length = 0, this._objectPool.length = 0, null != this.callback && this.callback.call(this.callbackObj, h)
    }, e
  }()
  t.AsyncOperation = e
}(fgui || (fgui = {})), function (t) {
  var e = 0, i = function (i) {
    function n () {
      var t = i.call(this) || this
      return t._pageIds = [], t._pageNames = [], t._selectedIndex = -1, t._previousIndex = -1, t
    }

    return __extends(n, i), n.prototype.dispose = function () {
    }, Object.defineProperty(n.prototype, 'selectedIndex', {
      get: function () {
        return this._selectedIndex
      }, set: function (e) {
        if (this._selectedIndex != e) {
          if (e > this._pageIds.length - 1) throw 'index out of bounds: ' + e
          this.changing = !0, this._previousIndex = this._selectedIndex, this._selectedIndex = e, this.parent.applyController(this), this.dispatchEvent(new t.StateChangeEvent(t.StateChangeEvent.CHANGED)), this.changing = !1
        }
      }, enumerable: !0, configurable: !0
    }), n.prototype.setSelectedIndex = function (t) {
      if (this._selectedIndex != t) {
        if (t > this._pageIds.length - 1) throw 'index out of bounds: ' + t
        this.changing = !0, this._previousIndex = this._selectedIndex, this._selectedIndex = t, this.parent.applyController(this), this.changing = !1
      }
    }, Object.defineProperty(n.prototype, 'previsousIndex', {
      get: function () {
        return this._previousIndex
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(n.prototype, 'selectedPage', {
      get: function () {
        return -1 == this._selectedIndex ? null : this._pageNames[this._selectedIndex]
      }, set: function (t) {
        var e = this._pageNames.indexOf(t);
        -1 == e && (e = 0), this.selectedIndex = e
      }, enumerable: !0, configurable: !0
    }), n.prototype.setSelectedPage = function (t) {
      var e = this._pageNames.indexOf(t);
      -1 == e && (e = 0), this.setSelectedIndex(e)
    }, Object.defineProperty(n.prototype, 'previousPage', {
      get: function () {
        return -1 == this._previousIndex ? null : this._pageNames[this._previousIndex]
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(n.prototype, 'pageCount', {
      get: function () {
        return this._pageIds.length
      }, enumerable: !0, configurable: !0
    }), n.prototype.getPageName = function (t) {
      return this._pageNames[t]
    }, n.prototype.addPage = function (t) {
      this.addPageAt(t || '', this._pageIds.length)
    }, n.prototype.addPageAt = function (t, i) {
      var n = '' + e++
      i == this._pageIds.length ? (this._pageIds.push(n), this._pageNames.push(t)) : (this._pageIds.splice(i, 0, n), this._pageNames.splice(i, 0, t))
    }, n.prototype.removePage = function (t) {
      var e = this._pageNames.indexOf(t);
      -1 != e && (this._pageIds.splice(e, 1), this._pageNames.splice(e, 1), this._selectedIndex >= this._pageIds.length ? this.selectedIndex = this._selectedIndex - 1 : this.parent.applyController(this))
    }, n.prototype.removePageAt = function (t) {
      void 0 === t && (t = 0), this._pageIds.splice(t, 1), this._pageNames.splice(t, 1), this._selectedIndex >= this._pageIds.length ? this.selectedIndex = this._selectedIndex - 1 : this.parent.applyController(this)
    }, n.prototype.clearPages = function () {
      this._pageIds.length = 0, this._pageNames.length = 0, -1 != this._selectedIndex ? this.selectedIndex = -1 : this.parent.applyController(this)
    }, n.prototype.hasPage = function (t) {
      return -1 != this._pageNames.indexOf(t)
    }, n.prototype.getPageIndexById = function (t) {
      return this._pageIds.indexOf(t)
    }, n.prototype.getPageIdByName = function (t) {
      var e = this._pageNames.indexOf(t)
      return -1 != e ? this._pageIds[e] : null
    }, n.prototype.getPageNameById = function (t) {
      var e = this._pageIds.indexOf(t)
      return -1 != e ? this._pageNames[e] : null
    }, n.prototype.getPageId = function (t) {
      return void 0 === t && (t = 0), this._pageIds[t]
    }, Object.defineProperty(n.prototype, 'selectedPageId', {
      get: function () {
        return -1 == this._selectedIndex ? null : this._pageIds[this._selectedIndex]
      }, set: function (t) {
        var e = this._pageIds.indexOf(t)
        this.selectedIndex = e
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(n.prototype, 'oppositePageId', {
      set: function (t) {
        this._pageIds.indexOf(t) > 0 ? this.selectedIndex = 0 : this._pageIds.length > 1 && (this.selectedIndex = 1)
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(n.prototype, 'previousPageId', {
      get: function () {
        return -1 == this._previousIndex ? null : this._pageIds[this._previousIndex]
      }, enumerable: !0, configurable: !0
    }), n.prototype.runActions = function () {
      if (this._actions) for (var t = this._actions.length, e = 0; e < t; e++) this._actions[e].run(this, this.previousPageId, this.selectedPageId)
    }, n.prototype.setup = function (e) {
      var i, n, o = e.position
      e.seek(o, 0), this.name = e.readS(), e.readBool() && (this.autoRadioGroupDepth = !0), e.seek(o, 1)
      var r = e.readShort()
      for (i = 0; i < r; i++) this._pageIds.push(e.readS()), this._pageNames.push(e.readS())
      var s = 0
      if (e.version >= 2) {
        switch (e.readByte()) {
          case 1:
            s = e.readShort()
            break
          case 2:
            -1 == (s = this._pageNames.indexOf(t.UIPackage.branch)) && (s = 0)
            break
          case 3:
            -1 == (s = this._pageNames.indexOf(t.UIPackage.getVar(e.readS()))) && (s = 0)
        }
      }
      if (e.seek(o, 2), (r = e.readShort()) > 0) {
        for (this._actions || (this._actions = new Array), i = 0; i < r; i++) {
          n = e.readShort(), n += e.position
          var a = t.ControllerAction.createAction(e.readByte())
          a.setup(e), this._actions.push(a), e.position = n
        }
      }
      this.parent && this._pageIds.length > 0 ? this._selectedIndex = s : this._selectedIndex = -1
    }, n
  }(egret.EventDispatcher)
  t.Controller = i
}(fgui || (fgui = {})), function (t) {
  var e = function () {
    function e () {
      this._agent = new t.GLoader, this._agent.draggable = !0, this._agent.touchable = !1, this._agent.setSize(100, 100), this._agent.setPivot(.5, .5, !0), this._agent.align = t.AlignType.Center, this._agent.verticalAlign = t.VertAlignType.Middle, this._agent.sortingOrder = 1e6, this._agent.addEventListener(t.DragEvent.DRAG_END, this.__dragEnd, this)
    }

    return Object.defineProperty(e, 'inst', {
      get: function () {
        return null == e._inst && (e._inst = new e), e._inst
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(e.prototype, 'dragAgent', {
      get: function () {
        return this._agent
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(e.prototype, 'dragging', {
      get: function () {
        return null != this._agent.parent
      }, enumerable: !0, configurable: !0
    }), e.prototype.startDrag = function (e, i, n, o) {
      if (!this._agent.parent) {
        this._sourceData = n, this._agent.url = i, t.GRoot.inst.addChild(this._agent)
        var r = t.GRoot.inst.globalToLocal(t.GRoot.mouseX, t.GRoot.mouseY)
        this._agent.setXY(r.x, r.y), this._agent.startDrag(o)
      }
    }, e.prototype.cancel = function () {
      this._agent.parent && (this._agent.stopDrag(), t.GRoot.inst.removeChild(this._agent), this._sourceData = null)
    }, e.prototype.__dragEnd = function (e) {
      if (null != this._agent.parent) {
        t.GRoot.inst.removeChild(this._agent)
        var i = this._sourceData
        this._sourceData = null
        for (var n = t.GRoot.inst.getObjectUnderPoint(e.stageX, e.stageY); n;) {
          if (n.hasEventListener(t.DropEvent.DROP)) {
            var o = new t.DropEvent(t.DropEvent.DROP, i)
            return n.requestFocus(), void n.dispatchEvent(o)
          }
          n = n.parent
        }
      }
    }, e
  }()
  t.DragDropManager = e
}(fgui || (fgui = {})), function (t) {
  !function (t) {
    t[t.Common = 0] = 'Common', t[t.Check = 1] = 'Check', t[t.Radio = 2] = 'Radio'
  }(t.ButtonMode || (t.ButtonMode = {})), function (t) {
    t[t.None = 0] = 'None', t[t.Both = 1] = 'Both', t[t.Height = 2] = 'Height'
  }(t.AutoSizeType || (t.AutoSizeType = {})), function (t) {
    t[t.Left = 0] = 'Left', t[t.Center = 1] = 'Center', t[t.Right = 2] = 'Right'
  }(t.AlignType || (t.AlignType = {})), function (t) {
    t[t.Top = 0] = 'Top', t[t.Middle = 1] = 'Middle', t[t.Bottom = 2] = 'Bottom'
  }(t.VertAlignType || (t.VertAlignType = {})), function (t) {
    t[t.None = 0] = 'None', t[t.Scale = 1] = 'Scale', t[t.ScaleMatchHeight = 2] = 'ScaleMatchHeight', t[t.ScaleMatchWidth = 3] = 'ScaleMatchWidth', t[t.ScaleFree = 4] = 'ScaleFree', t[t.ScaleNoBorder = 5] = 'ScaleNoBorder'
  }(t.LoaderFillType || (t.LoaderFillType = {})), function (t) {
    t[t.SingleColumn = 0] = 'SingleColumn', t[t.SingleRow = 1] = 'SingleRow', t[t.FlowHorizontal = 2] = 'FlowHorizontal', t[t.FlowVertical = 3] = 'FlowVertical', t[t.Pagination = 4] = 'Pagination'
  }(t.ListLayoutType || (t.ListLayoutType = {})), function (t) {
    t[t.Single = 0] = 'Single', t[t.Multiple = 1] = 'Multiple', t[t.Multiple_SingleClick = 2] = 'Multiple_SingleClick', t[t.None = 3] = 'None'
  }(t.ListSelectionMode || (t.ListSelectionMode = {})), function (t) {
    t[t.Visible = 0] = 'Visible', t[t.Hidden = 1] = 'Hidden', t[t.Scroll = 2] = 'Scroll'
  }(t.OverflowType || (t.OverflowType = {})), function (t) {
    t[t.Image = 0] = 'Image', t[t.MovieClip = 1] = 'MovieClip', t[t.Sound = 2] = 'Sound', t[t.Component = 3] = 'Component', t[t.Atlas = 4] = 'Atlas', t[t.Font = 5] = 'Font', t[t.Swf = 6] = 'Swf', t[t.Misc = 7] = 'Misc', t[t.Unknown = 8] = 'Unknown', t[t.Spine = 9] = 'Spine', t[t.DragonBones = 10] = 'DragonBones'
  }(t.PackageItemType || (t.PackageItemType = {})), function (t) {
    t[t.Image = 0] = 'Image', t[t.MovieClip = 1] = 'MovieClip', t[t.Swf = 2] = 'Swf', t[t.Graph = 3] = 'Graph', t[t.Loader = 4] = 'Loader', t[t.Group = 5] = 'Group', t[t.Text = 6] = 'Text', t[t.RichText = 7] = 'RichText', t[t.InputText = 8] = 'InputText', t[t.Component = 9] = 'Component', t[t.List = 10] = 'List', t[t.Label = 11] = 'Label', t[t.Button = 12] = 'Button', t[t.ComboBox = 13] = 'ComboBox', t[t.ProgressBar = 14] = 'ProgressBar', t[t.Slider = 15] = 'Slider', t[t.ScrollBar = 16] = 'ScrollBar', t[t.Tree = 17] = 'Tree', t[t.Loader3D = 18] = 'Loader3D'
  }(t.ObjectType || (t.ObjectType = {})), function (t) {
    t[t.Percent = 0] = 'Percent', t[t.ValueAndMax = 1] = 'ValueAndMax', t[t.Value = 2] = 'Value', t[t.Max = 3] = 'Max'
  }(t.ProgressTitleType || (t.ProgressTitleType = {})), function (t) {
    t[t.Default = 0] = 'Default', t[t.Visible = 1] = 'Visible', t[t.Auto = 2] = 'Auto', t[t.Hidden = 3] = 'Hidden'
  }(t.ScrollBarDisplayType || (t.ScrollBarDisplayType = {})), function (t) {
    t[t.Horizontal = 0] = 'Horizontal', t[t.Vertical = 1] = 'Vertical', t[t.Both = 2] = 'Both'
  }(t.ScrollType || (t.ScrollType = {})), function (t) {
    t[t.None = 0] = 'None', t[t.Horizontal = 1] = 'Horizontal', t[t.Vertical = 2] = 'Vertical', t[t.Both = 3] = 'Both'
  }(t.FlipType || (t.FlipType = {})), function (t) {
    t[t.Ascent = 0] = 'Ascent', t[t.Descent = 1] = 'Descent', t[t.Arch = 2] = 'Arch'
  }(t.ChildrenRenderOrder || (t.ChildrenRenderOrder = {})), function (t) {
    t[t.None = 0] = 'None', t[t.Horizontal = 1] = 'Horizontal', t[t.Vertical = 2] = 'Vertical'
  }(t.GroupLayoutType || (t.GroupLayoutType = {})), function (t) {
    t[t.Auto = 0] = 'Auto', t[t.Up = 1] = 'Up', t[t.Down = 2] = 'Down'
  }(t.PopupDirection || (t.PopupDirection = {})), function (t) {
    t[t.Left_Left = 0] = 'Left_Left', t[t.Left_Center = 1] = 'Left_Center', t[t.Left_Right = 2] = 'Left_Right', t[t.Center_Center = 3] = 'Center_Center', t[t.Right_Left = 4] = 'Right_Left', t[t.Right_Center = 5] = 'Right_Center', t[t.Right_Right = 6] = 'Right_Right', t[t.Top_Top = 7] = 'Top_Top', t[t.Top_Middle = 8] = 'Top_Middle', t[t.Top_Bottom = 9] = 'Top_Bottom', t[t.Middle_Middle = 10] = 'Middle_Middle', t[t.Bottom_Top = 11] = 'Bottom_Top', t[t.Bottom_Middle = 12] = 'Bottom_Middle', t[t.Bottom_Bottom = 13] = 'Bottom_Bottom', t[t.Width = 14] = 'Width', t[t.Height = 15] = 'Height', t[t.LeftExt_Left = 16] = 'LeftExt_Left', t[t.LeftExt_Right = 17] = 'LeftExt_Right', t[t.RightExt_Left = 18] = 'RightExt_Left', t[t.RightExt_Right = 19] = 'RightExt_Right', t[t.TopExt_Top = 20] = 'TopExt_Top', t[t.TopExt_Bottom = 21] = 'TopExt_Bottom', t[t.BottomExt_Top = 22] = 'BottomExt_Top', t[t.BottomExt_Bottom = 23] = 'BottomExt_Bottom', t[t.Size = 24] = 'Size'
  }(t.RelationType || (t.RelationType = {})), function (t) {
    t[t.None = 0] = 'None', t[t.Horizontal = 1] = 'Horizontal', t[t.Vertical = 2] = 'Vertical', t[t.Radial90 = 3] = 'Radial90', t[t.Radial180 = 4] = 'Radial180', t[t.Radial360 = 5] = 'Radial360'
  }(t.FillMethod || (t.FillMethod = {})), function (t) {
    t[t.Top = 0] = 'Top', t[t.Bottom = 1] = 'Bottom', t[t.Left = 2] = 'Left', t[t.Right = 3] = 'Right', t[t.TopLeft = 0] = 'TopLeft', t[t.TopRight = 1] = 'TopRight', t[t.BottomLeft = 2] = 'BottomLeft', t[t.BottomRight = 3] = 'BottomRight'
  }(t.FillOrigin || (t.FillOrigin = {})), function (t) {
    t[t.TopLeft = 0] = 'TopLeft', t[t.TopRight = 1] = 'TopRight', t[t.BottomLeft = 2] = 'BottomLeft', t[t.BottomRight = 3] = 'BottomRight'
  }(t.FillOrigin90 || (t.FillOrigin90 = {})), function (t) {
    t[t.Text = 0] = 'Text', t[t.Icon = 1] = 'Icon', t[t.Color = 2] = 'Color', t[t.OutlineColor = 3] = 'OutlineColor', t[t.Playing = 4] = 'Playing', t[t.Frame = 5] = 'Frame', t[t.DeltaTime = 6] = 'DeltaTime', t[t.TimeScale = 7] = 'TimeScale', t[t.FontSize = 8] = 'FontSize', t[t.Selected = 9] = 'Selected'
  }(t.ObjectPropID || (t.ObjectPropID = {}))
}(fgui || (fgui = {})), function (t) {
  var e = function (e) {
    function h () {
      var i = e.call(this) || this
      return i._x = 0, i._y = 0, i._alpha = 1, i._rotation = 0, i._visible = !0, i._touchable = !0, i._scaleX = 1, i._scaleY = 1, i._skewX = 0, i._skewY = 0, i._pivotX = 0, i._pivotY = 0, i._pivotOffsetX = 0, i._pivotOffsetY = 0, i._sortingOrder = 0, i._internalVisible = !0, i._disposed = !1, i.sourceWidth = 0, i.sourceHeight = 0, i.initWidth = 0, i.initHeight = 0, i.minWidth = 0, i.minHeight = 0, i.maxWidth = 0, i.maxHeight = 0, i._width = 0, i._height = 0, i._rawWidth = 0, i._rawHeight = 0, i._sizePercentInGroup = 0, i._id = '' + n++, i._name = '', i.createDisplayObject(), i._relations = new t.Relations(i), i._gears = new Array(10), i
    }

    return __extends(h, e), Object.defineProperty(h.prototype, 'id', {
      get: function () {
        return this._id
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(h.prototype, 'name', {
      get: function () {
        return this._name
      }, set: function (t) {
        this._name = t
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(h.prototype, 'x', {
      get: function () {
        return this._x
      }, set: function (t) {
        this.setXY(t, this._y)
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(h.prototype, 'y', {
      get: function () {
        return this._y
      }, set: function (t) {
        this.setXY(this._x, t)
      }, enumerable: !0, configurable: !0
    }), h.prototype.setXY = function (e, n) {
      if (this._x != e || this._y != n) {
        var o = e - this._x, s = n - this._y
        this._x = e, this._y = n, this.handleXYChanged(), this instanceof t.GGroup && this.moveChildren(o, s), this.updateGear(1), !this._parent || this._parent instanceof t.GList || (this._parent.setBoundsChangedFlag(), this._group && this._group.setBoundsChangedFlag(!0), this.dispatchEventWith(h.XY_CHANGED)), h.draggingObject != this || i || this.localToGlobalRect(0, 0, this._width, this._height, r)
      }
    }, Object.defineProperty(h.prototype, 'xMin', {
      get: function () {
        return this._pivotAsAnchor ? this._x - this._width * this._pivotX : this._x
      }, set: function (t) {
        this._pivotAsAnchor ? this.setXY(t + this._width * this._pivotX, this._y) : this.setXY(t, this._y)
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(h.prototype, 'yMin', {
      get: function () {
        return this._pivotAsAnchor ? this._y - this._height * this._pivotY : this._y
      }, set: function (t) {
        this._pivotAsAnchor ? this.setXY(this._x, t + this._height * this._pivotY) : this.setXY(this._x, t)
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(h.prototype, 'pixelSnapping', {
      get: function () {
        return this._pixelSnapping
      }, set: function (t) {
        this._pixelSnapping != t && (this._pixelSnapping = t, this.handleXYChanged())
      }, enumerable: !0, configurable: !0
    }), h.prototype.center = function (e) {
      var i
      i = this._parent ? this.parent : this.root, this.setXY((i.width - this._width) / 2, (i.height - this._height) / 2), e && (this.addRelation(i, t.RelationType.Center_Center), this.addRelation(i, t.RelationType.Middle_Middle))
    }, Object.defineProperty(h.prototype, 'width', {
      get: function () {
        return this.ensureSizeCorrect(), this._relations.sizeDirty && this._relations.ensureRelationsSizeCorrect(), this._width
      }, set: function (t) {
        this.setSize(t, this._rawHeight)
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(h.prototype, 'height', {
      get: function () {
        return this.ensureSizeCorrect(), this._relations.sizeDirty && this._relations.ensureRelationsSizeCorrect(), this._height
      }, set: function (t) {
        this.setSize(this._rawWidth, t)
      }, enumerable: !0, configurable: !0
    }), h.prototype.setSize = function (e, i, n) {
      if (this._rawWidth != e || this._rawHeight != i) {
        this._rawWidth = e, this._rawHeight = i, e < this.minWidth && (e = this.minWidth), i < this.minHeight && (i = this.minHeight), this.maxWidth > 0 && e > this.maxWidth && (e = this.maxWidth), this.maxHeight > 0 && i > this.maxHeight && (i = this.maxHeight)
        var o = e - this._width, r = i - this._height
        this._width = e, this._height = i, this.handleSizeChanged(), 0 == this._pivotX && 0 == this._pivotY || (this._pivotAsAnchor ? this.applyPivot() : (n || this.setXY(this.x - this._pivotX * o, this.y - this._pivotY * r), this.updatePivotOffset())), this instanceof t.GGroup && this.resizeChildren(o, r), this.updateGear(2), this._parent && (this._relations.onOwnerSizeChanged(o, r, this._pivotAsAnchor || !n), this._parent.setBoundsChangedFlag(), this._group && this._group.setBoundsChangedFlag()), this.dispatchEventWith(h.SIZE_CHANGED)
      }
    }, h.prototype.makeFullScreen = function () {
      this.setSize(t.GRoot.inst.width, t.GRoot.inst.height)
    }, h.prototype.ensureSizeCorrect = function () {
    }, Object.defineProperty(h.prototype, 'actualWidth', {
      get: function () {
        return this.width * Math.abs(this._scaleX)
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(h.prototype, 'actualHeight', {
      get: function () {
        return this.height * Math.abs(this._scaleY)
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(h.prototype, 'scaleX', {
      get: function () {
        return this._scaleX
      }, set: function (t) {
        this.setScale(t, this._scaleY)
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(h.prototype, 'scaleY', {
      get: function () {
        return this._scaleY
      }, set: function (t) {
        this.setScale(this._scaleX, t)
      }, enumerable: !0, configurable: !0
    }), h.prototype.setScale = function (t, e) {
      this._scaleX == t && this._scaleY == e || (this._scaleX = t, this._scaleY = e, this.handleScaleChanged(), this.applyPivot(), this.updateGear(2))
    }, Object.defineProperty(h.prototype, 'skewX', {
      get: function () {
        return this._skewX
      }, set: function (t) {
        this.setSkew(t, this._skewY)
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(h.prototype, 'skewY', {
      get: function () {
        return this._skewY
      }, set: function (t) {
        this.setSkew(this._skewX, t)
      }, enumerable: !0, configurable: !0
    }), h.prototype.setSkew = function (t, e) {
      this._skewX == t && this._skewY == e || (this._skewX = t, this._skewY = e, this._displayObject && (this._displayObject.skewX = t, this._displayObject.skewY = e), this.applyPivot())
    }, Object.defineProperty(h.prototype, 'pivotX', {
      get: function () {
        return this._pivotX
      }, set: function (t) {
        this.setPivot(t, this._pivotY)
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(h.prototype, 'pivotY', {
      get: function () {
        return this._pivotY
      }, set: function (t) {
        this.setPivot(this._pivotX, t)
      }, enumerable: !0, configurable: !0
    }), h.prototype.setPivot = function (t, e, i) {
      this._pivotX == t && this._pivotY == e && this._pivotAsAnchor == i || (this._pivotX = t, this._pivotY = e, this._pivotAsAnchor = i, this.updatePivotOffset(), this.handleXYChanged())
    }, Object.defineProperty(h.prototype, 'pivotAsAnchor', {
      get: function () {
        return this._pivotAsAnchor
      }, enumerable: !0, configurable: !0
    }), h.prototype.internalSetPivot = function (t, e, i) {
      this._pivotX = t, this._pivotY = e, this._pivotAsAnchor = i, i && this.handleXYChanged()
    }, h.prototype.updatePivotOffset = function () {
      if (this._displayObject) {
        if (0 != this._pivotX || 0 != this._pivotY) {
          var t = this._pivotX * this._width, e = this._pivotY * this._height,
            i = this._displayObject.matrix.transformPoint(t, e, s)
          this._pivotOffsetX = this._pivotX * this._width - (i.x - this._displayObject.x), this._pivotOffsetY = this._pivotY * this._height - (i.y - this._displayObject.y)
        } else {
          this._pivotOffsetX = 0, this._pivotOffsetY = 0
        }
      }
    }, h.prototype.applyPivot = function () {
      0 == this._pivotX && 0 == this._pivotY || (this.updatePivotOffset(), this.handleXYChanged())
    }, Object.defineProperty(h.prototype, 'touchable', {
      get: function () {
        return this._touchable
      }, set: function (e) {
        if (this._touchable != e) {
          if (this._touchable = e, this.updateGear(3), this instanceof t.GImage || this instanceof t.GMovieClip || this instanceof t.GTextField && !(this instanceof t.GTextInput) && !(this instanceof t.GRichTextField)) return
          this._displayObject && (this._displayObject.touchEnabled = this._touchable, this._displayObject instanceof egret.DisplayObjectContainer && (this._displayObject.touchChildren = this._touchable))
        }
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(h.prototype, 'grayed', {
      get: function () {
        return this._grayed
      }, set: function (t) {
        this._grayed != t && (this._grayed = t, this.handleGrayedChanged(), this.updateGear(3))
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(h.prototype, 'enabled', {
      get: function () {
        return !this._grayed && this._touchable
      }, set: function (t) {
        this.grayed = !t, this.touchable = t
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(h.prototype, 'rotation', {
      get: function () {
        return this._rotation
      }, set: function (t) {
        this._rotation != t && (this._rotation = t, this._displayObject && (this._displayObject.rotation = this.normalizeRotation), this.applyPivot(), this.updateGear(3))
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(h.prototype, 'normalizeRotation', {
      get: function () {
        var t = this._rotation % 360
        return t > 180 ? t -= 360 : t < -180 && (t += 360), t
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(h.prototype, 'alpha', {
      get: function () {
        return this._alpha
      }, set: function (t) {
        this._alpha != t && (this._alpha = t, this.handleAlphaChanged(), this.updateGear(3))
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(h.prototype, 'visible', {
      get: function () {
        return this._visible
      }, set: function (t) {
        this._visible != t && (this._visible = t, this.handleVisibleChanged(), this._parent && this._parent.setBoundsChangedFlag(), this._group && this._group.excludeInvisibles && this._group.setBoundsChangedFlag())
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(h.prototype, 'internalVisible', {
      get: function () {
        return this._internalVisible && (!this._group || this._group.internalVisible)
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(h.prototype, 'internalVisible2', {
      get: function () {
        return this._visible && (!this._group || this._group.internalVisible2)
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(h.prototype, 'internalVisible3', {
      get: function () {
        return this._visible && this._internalVisible
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(h.prototype, 'sortingOrder', {
      get: function () {
        return this._sortingOrder
      }, set: function (t) {
        if (t < 0 && (t = 0), this._sortingOrder != t) {
          var e = this._sortingOrder
          this._sortingOrder = t, this._parent && this._parent.childSortingOrderChanged(this, e, this._sortingOrder)
        }
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(h.prototype, 'focused', {
      get: function () {
        return this.root.focus == this
      }, enumerable: !0, configurable: !0
    }), h.prototype.requestFocus = function () {
      this.root.focus = this
    }, Object.defineProperty(h.prototype, 'tooltips', {
      get: function () {
        return this._tooltips
      }, set: function (t) {
        this._tooltips = t
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(h.prototype, 'blendMode', {
      get: function () {
        return this._displayObject.blendMode
      }, set: function (t) {
        this._displayObject.blendMode = t
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(h.prototype, 'filters', {
      get: function () {
        return this._displayObject.filters
      }, set: function (t) {
        this._displayObject.filters = t
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(h.prototype, 'inContainer', {
      get: function () {
        return null != this._displayObject && null != this._displayObject.parent
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(h.prototype, 'onStage', {
      get: function () {
        return null != this._displayObject && null != this._displayObject.stage
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(h.prototype, 'resourceURL', {
      get: function () {
        return this.packageItem ? 'ui://' + this.packageItem.owner.id + this.packageItem.id : null
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(h.prototype, 'group', {
      get: function () {
        return this._group
      }, set: function (t) {
        this._group != t && (this._group && this._group.setBoundsChangedFlag(), this._group = t, this._group && this._group.setBoundsChangedFlag())
      }, enumerable: !0, configurable: !0
    }), h.prototype.getGear = function (e) {
      var i = this._gears[e]
      return null == i && (this._gears[e] = i = t.GearBase.create(this, e)), i
    }, h.prototype.updateGear = function (t) {
      if (!this._underConstruct && !this._gearLocked) {
        var e = this._gears[t]
        e && e.controller && e.updateState()
      }
    }, h.prototype.checkGearController = function (t, e) {
      return null != this._gears[t] && this._gears[t].controller == e
    }, h.prototype.updateGearFromRelations = function (t, e, i) {
      this._gears[t] && this._gears[t].updateFromRelations(e, i)
    }, h.prototype.addDisplayLock = function () {
      var t = this._gears[0]
      if (t && t.controller) {
        var e = t.addLock()
        return this.checkGearDisplay(), e
      }
      return 0
    }, h.prototype.releaseDisplayLock = function (t) {
      var e = this._gears[0]
      e && e.controller && (e.releaseLock(t), this.checkGearDisplay())
    }, h.prototype.checkGearDisplay = function () {
      if (!this._handlingController) {
        var t = null == this._gears[0] || this._gears[0].connected
        this._gears[8] && (t = this._gears[8].evaluate(t)), t != this._internalVisible && (this._internalVisible = t, this._parent && this._parent.childStateChanged(this), this._group && this._group.excludeInvisibles && this._group.setBoundsChangedFlag())
      }
    }, Object.defineProperty(h.prototype, 'gearXY', {
      get: function () {
        return this.getGear(1)
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(h.prototype, 'gearSize', {
      get: function () {
        return this.getGear(2)
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(h.prototype, 'gearLook', {
      get: function () {
        return this.getGear(3)
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(h.prototype, 'relations', {
      get: function () {
        return this._relations
      }, enumerable: !0, configurable: !0
    }), h.prototype.addRelation = function (t, e, i) {
      this._relations.add(t, e, i)
    }, h.prototype.removeRelation = function (t, e) {
      this._relations.remove(t, e || 0)
    }, Object.defineProperty(h.prototype, 'displayObject', {
      get: function () {
        return this._displayObject
      }, enumerable: !0, configurable: !0
    }), h.prototype.setDisplayObject = function (t) {
      this._displayObject != t && (this._displayObject && delete this._displayObject.$owner, this._displayObject = t, this._displayObject.$owner = this)
    }, Object.defineProperty(h.prototype, 'parent', {
      get: function () {
        return this._parent
      }, set: function (t) {
        this._parent = t
      }, enumerable: !0, configurable: !0
    }), h.prototype.removeFromParent = function () {
      this._parent && this._parent.removeChild(this)
    }, Object.defineProperty(h.prototype, 'root', {
      get: function () {
        if (this instanceof t.GRoot) return this
        for (var e = this._parent; e;) {
          if (e instanceof t.GRoot) return e
          e = e.parent
        }
        return t.GRoot.inst
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(h.prototype, 'asCom', {
      get: function () {
        return this
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(h.prototype, 'asButton', {
      get: function () {
        return this
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(h.prototype, 'asLabel', {
      get: function () {
        return this
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(h.prototype, 'asProgress', {
      get: function () {
        return this
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(h.prototype, 'asTextField', {
      get: function () {
        return this
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(h.prototype, 'asRichTextField', {
      get: function () {
        return this
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(h.prototype, 'asTextInput', {
      get: function () {
        return this
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(h.prototype, 'asLoader', {
      get: function () {
        return this
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(h.prototype, 'asList', {
      get: function () {
        return this
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(h.prototype, 'asTree', {
      get: function () {
        return this
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(h.prototype, 'asGraph', {
      get: function () {
        return this
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(h.prototype, 'asGroup', {
      get: function () {
        return this
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(h.prototype, 'asSlider', {
      get: function () {
        return this
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(h.prototype, 'asComboBox', {
      get: function () {
        return this
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(h.prototype, 'asImage', {
      get: function () {
        return this
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(h.prototype, 'asMovieClip', {
      get: function () {
        return this
      }, enumerable: !0, configurable: !0
    }), h.cast = function (t) {
      return t.$owner
    }, Object.defineProperty(h.prototype, 'text', {
      get: function () {
        return null
      }, set: function (t) {
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(h.prototype, 'icon', {
      get: function () {
        return null
      }, set: function (t) {
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(h.prototype, 'isDisposed', {
      get: function () {
        return this._disposed
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(h.prototype, 'treeNode', {
      get: function () {
        return this._treeNode
      }, enumerable: !0, configurable: !0
    }), h.prototype.dispose = function () {
      if (!this._disposed) {
        this._disposed = !0, this.removeFromParent(), this._relations.dispose(), this._displayObject = null
        for (var t = 0; t < 10; t++) {
          var e = this._gears[t]
          e && e.dispose()
        }
      }
    }, h.prototype.addClickListener = function (t, e) {
      this.addEventListener(egret.TouchEvent.TOUCH_TAP, t, e)
    }, h.prototype.removeClickListener = function (t, e) {
      this.removeEventListener(egret.TouchEvent.TOUCH_TAP, t, e)
    }, h.prototype.hasClickListener = function () {
      return this.hasEventListener(egret.TouchEvent.TOUCH_TAP)
    }, h.prototype.addEventListener = function (t, i, n) {
      e.prototype.addEventListener.call(this, t, i, n), this._displayObject && this._displayObject.addEventListener(t, this._reDispatch, this)
    }, h.prototype.removeEventListener = function (t, i, n) {
      e.prototype.removeEventListener.call(this, t, i, n), this._displayObject && !this.hasEventListener(t) && this._displayObject.removeEventListener(t, this._reDispatch, this)
    }, h.prototype._reDispatch = function (t) {
      this.dispatchEvent(t)
    }, Object.defineProperty(h.prototype, 'draggable', {
      get: function () {
        return this._draggable
      }, set: function (t) {
        this._draggable != t && (this._draggable = t, this.initDrag())
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(h.prototype, 'dragBounds', {
      get: function () {
        return this._dragBounds
      }, set: function (t) {
        this._dragBounds = t
      }, enumerable: !0, configurable: !0
    }), h.prototype.startDrag = function (t, e, i) {
      null != this._displayObject.stage && this.dragBegin(t, e, i)
    }, h.prototype.stopDrag = function () {
      this.dragEnd()
    }, Object.defineProperty(h.prototype, 'dragging', {
      get: function () {
        return h.draggingObject == this
      }, enumerable: !0, configurable: !0
    }),h.prototype.localToGlobal = function (t, e, i) {
      return t = t || 0, e = e || 0, this._pivotAsAnchor && (t += this._pivotX * this._width, e += this._pivotY * this._height), this._displayObject.localToGlobal(t, e, i)
    },h.prototype.globalToLocal = function (t, e, i) {
      t = t || 0, e = e || 0
      var n = this._displayObject.globalToLocal(t, e, i)
      return this._pivotAsAnchor && (n.x -= this._pivotX * this._width, n.y -= this._pivotY * this._height), n
    },h.prototype.localToRoot = function (e, i, n) {
      e = e || 0, i = i || 0
      var o = this._displayObject.localToGlobal(e, i, n)
      return o.x /= t.GRoot.contentScaleFactor, o.y /= t.GRoot.contentScaleFactor, o
    },h.prototype.rootToLocal = function (e, i, n) {
      return e = e || 0, i = i || 0, e *= t.GRoot.contentScaleFactor, i *= t.GRoot.contentScaleFactor, this._displayObject.globalToLocal(e, i, n)
    },h.prototype.localToGlobalRect = function (t, e, i, n, o) {
      t = t || 0, e = e || 0, i = i || 0, n = n || 0, o = o || new egret.Rectangle
      var r = this.localToGlobal(t, e)
      return o.x = r.x, o.y = r.y, r = this.localToGlobal(t + i, e + n), o.right = r.x, o.bottom = r.y, o
    },h.prototype.globalToLocalRect = function (t, e, i, n, o) {
      t = t || 0, e = e || 0, i = i || 0, n = n || 0, o = o || new egret.Rectangle
      var r = this.globalToLocal(t, e)
      return o.x = r.x, o.y = r.y, r = this.globalToLocal(t + i, e + n), o.right = r.x, o.bottom = r.y, o
    },h.prototype.handleControllerChanged = function (t) {
      this._handlingController = !0
      for (var e = 0; e < 10; e++) {
        var i = this._gears[e]
        i && i.controller == t && i.apply()
      }
      this._handlingController = !1, this.checkGearDisplay()
    },h.prototype.createDisplayObject = function () {
    },h.prototype.switchDisplayObject = function (e) {
      if (e != this._displayObject) {
        var i = this._displayObject
        if (this._displayObject && this._displayObject.parent) {
          var n = this._displayObject.parent.getChildIndex(this._displayObject)
          this._displayObject.parent.addChildAt(e, n), this._displayObject.parent.removeChild(this._displayObject)
        }
        this._displayObject = e, this._displayObject.x = i.x, this._displayObject.y = i.y, this._displayObject.rotation = i.rotation, this._displayObject.alpha = i.alpha, this._displayObject.visible = i.visible, this._displayObject.touchEnabled = i.touchEnabled, this._displayObject.scaleX = i.scaleX, this._displayObject.scaleY = i.scaleY, t.ToolSet.setColorFilter(this._displayObject, this._grayed), this._displayObject instanceof egret.DisplayObjectContainer && (this._displayObject.touchChildren = this._touchable)
      }
    },h.prototype.handleXYChanged = function () {
      if (this._displayObject) {
        var t = this._x, e = this._y
        this._pivotAsAnchor && (t -= this._pivotX * this._width, e -= this._pivotY * this._height), this._pixelSnapping && (t = Math.round(t), e = Math.round(e)), this._displayObject.x = t + this._pivotOffsetX, this._displayObject.y = e + this._pivotOffsetY
      }
    },h.prototype.handleSizeChanged = function () {
      this._displayObject && (this._displayObject.width = this._width, this._displayObject.height = this._height)
    },h.prototype.handleScaleChanged = function () {
      this._displayObject && (this._displayObject.scaleX = this._scaleX, this._displayObject.scaleY = this._scaleY)
    },h.prototype.handleGrayedChanged = function () {
      this._displayObject && t.ToolSet.setColorFilter(this._displayObject, this._grayed)
    },h.prototype.handleAlphaChanged = function () {
      this._displayObject && (this._displayObject.alpha = this._alpha)
    },h.prototype.handleVisibleChanged = function () {
      this._displayObject && (this._displayObject.visible = this.internalVisible2), this instanceof t.GGroup && this.handleVisibleChanged()
    },h.prototype.getProp = function (e) {
      switch (e) {
        case t.ObjectPropID.Text:
          return this.text
        case t.ObjectPropID.Icon:
          return this.icon
        case t.ObjectPropID.Color:
        case t.ObjectPropID.OutlineColor:
          return NaN
        case t.ObjectPropID.Playing:
          return !1
        case t.ObjectPropID.Frame:
        case t.ObjectPropID.DeltaTime:
          return 0
        case t.ObjectPropID.TimeScale:
          return 1
        case t.ObjectPropID.FontSize:
          return 0
        case t.ObjectPropID.Selected:
          return !1
        default:
          return
      }
    },h.prototype.setProp = function (e, i) {
      switch (e) {
        case t.ObjectPropID.Text:
          this.text = i
          break
        case t.ObjectPropID.Icon:
          this.icon = i
      }
    },h.prototype.constructFromResource = function () {
    },h.prototype.setup_beforeAdd = function (e, i) {
      var n, o
      e.seek(i, 0), e.skip(5), this._id = e.readS(), this._name = e.readS(), n = e.readInt(), o = e.readInt(), this.setXY(n, o), e.readBool() && (this.initWidth = e.readInt(), this.initHeight = e.readInt(), this.setSize(this.initWidth, this.initHeight, !0)), e.readBool() && (this.minWidth = e.readInt(), this.maxWidth = e.readInt(), this.minHeight = e.readInt(), this.maxHeight = e.readInt()), e.readBool() && (n = e.readFloat(), o = e.readFloat(), this.setScale(n, o)), e.readBool() && (n = e.readFloat(), o = e.readFloat(), this.setSkew(n, o)), e.readBool() && (n = e.readFloat(), o = e.readFloat(), this.setPivot(n, o, e.readBool())), 1 != (n = e.readFloat()) && (this.alpha = n), 0 != (n = e.readFloat()) && (this.rotation = n), e.readBool() || (this.visible = !1), e.readBool() || (this.touchable = !1), e.readBool() && (this.grayed = !0)
      var r = e.readByte()
      2 == r ? this.blendMode = egret.BlendMode.ADD : 5 == r && (this.blendMode = egret.BlendMode.ERASE), 1 == e.readByte() && this._displayObject && t.ToolSet.setColorFilter(this._displayObject, [e.readFloat(), e.readFloat(), e.readFloat(), e.readFloat()])
      var s = e.readS()
      null != s && (this.data = s)
    },h.prototype.setup_afterAdd = function (t, e) {
      t.seek(e, 1)
      var i = t.readS()
      null != i && (this.tooltips = i)
      var n = t.readShort()
      n >= 0 && (this.group = this.parent.getChildAt(n)), t.seek(e, 2)
      for (var o = t.readShort(), r = 0; r < o; r++) {
        var s = t.readShort()
        s += t.position, this.getGear(t.readByte()).setup(t), t.position = s
      }
    },h.prototype.initDrag = function () {
      this._draggable ? this.addEventListener(egret.TouchEvent.TOUCH_BEGIN, this.__begin, this) : this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN, this.__begin, this)
    },h.prototype.dragBegin = function (e, i, n) {
      if (h.draggingObject) {
        var s = h.draggingObject
        s.stopDrag(), h.draggingObject = null
        var a = new t.DragEvent(t.DragEvent.DRAG_END)
        a.stageX = i || t.GRoot.mouseX, a.stageY = n || t.GRoot.mouseY, a.touchPointID = e || 0, s.dispatchEvent(a)
      }
      o.x = i || t.GRoot.mouseX, o.y = n || t.GRoot.mouseY, this.localToGlobalRect(0, 0, this._width, this._height, r), this._dragTesting = !0, h.draggingObject = this, t.GRoot.inst.nativeStage.addEventListener(egret.TouchEvent.TOUCH_MOVE, this.__moving, this), t.GRoot.inst.nativeStage.addEventListener(egret.TouchEvent.TOUCH_END, this.__end, this)
    },h.prototype.dragEnd = function () {
      h.draggingObject == this && (this.reset(), this._dragTesting = !1, h.draggingObject = null)
    },h.prototype.reset = function () {
      t.GRoot.inst.nativeStage.removeEventListener(egret.TouchEvent.TOUCH_MOVE, this.__moving, this), t.GRoot.inst.nativeStage.removeEventListener(egret.TouchEvent.TOUCH_END, this.__end, this)
    },h.prototype.__begin = function (e) {
      null == this._dragStartPos && (this._dragStartPos = new egret.Point), this._dragStartPos.x = e.stageX, this._dragStartPos.y = e.stageY, this._dragTesting = !0, t.GRoot.inst.nativeStage.addEventListener(egret.TouchEvent.TOUCH_MOVE, this.__moving, this), t.GRoot.inst.nativeStage.addEventListener(egret.TouchEvent.TOUCH_END, this.__end, this)
    },h.prototype.__moving = function (e) {
      if (h.draggingObject != this && this._draggable && this._dragTesting) {
        var n = t.UIConfig.touchDragSensitivity
        if (this._dragStartPos && Math.abs(this._dragStartPos.x - e.stageX) < n && Math.abs(this._dragStartPos.y - e.stageY) < n) return
        this._dragTesting = !1, (_ = new t.DragEvent(t.DragEvent.DRAG_START)).stageX = e.stageX, _.stageY = e.stageY, _.touchPointID = e.touchPointID, this.dispatchEvent(_), _.isDefaultPrevented() || this.dragBegin(e.touchPointID, e.stageX, e.stageY)
      }
      if (h.draggingObject == this) {
        var l = e.stageX - o.x + r.x, c = e.stageY - o.y + r.y
        if (this._dragBounds) {
          var u = t.GRoot.inst.localToGlobalRect(this._dragBounds.x, this._dragBounds.y, this._dragBounds.width, this._dragBounds.height, a)
          l < u.x ? l = u.x : l + r.width > u.right && (l = u.right - r.width) < u.x && (l = u.x), c < u.y ? c = u.y : c + r.height > u.bottom && (c = u.bottom - r.height) < u.y && (c = u.y)
        }
        i = !0
        var _, p = this.parent.globalToLocal(l, c, s)
        this.setXY(Math.round(p.x), Math.round(p.y)), i = !1, (_ = new t.DragEvent(t.DragEvent.DRAG_MOVING)).stageX = e.stageX, _.stageY = e.stageY, _.touchPointID = e.touchPointID, this.dispatchEvent(_)
      }
    },h.prototype.__end = function (e) {
      if (h.draggingObject == this) {
        h.draggingObject = null, this.reset()
        var i = new t.DragEvent(t.DragEvent.DRAG_END)
        i.stageX = e.stageX, i.stageY = e.stageY, i.touchPointID = e.touchPointID, this.dispatchEvent(i)
      }
    },h.XY_CHANGED = '__xyChanged',h.SIZE_CHANGED = '__sizeChanged',h.SIZE_DELAY_CHANGE = '__sizeDelayChange',h.GEAR_STOP = 'gearStop',h
  }(egret.EventDispatcher)
  t.GObject = e
  var i, n = 0, o = new egret.Point, r = new egret.Rectangle, s = new egret.Point, a = new egret.Rectangle
}(fgui || (fgui = {})), function (t) {
  var e = function (e) {
    function i () {
      var i = e.call(this) || this
      return i._sortingChildCount = 0, i._childrenRenderOrder = t.ChildrenRenderOrder.Ascent, i._apexIndex = 0, i._children = new Array, i._controllers = new Array, i._transitions = new Array, i._margin = new t.Margin, i._alignOffset = new egret.Point, i
    }

    return __extends(i, e), i.prototype.createDisplayObject = function () {
      this._rootContainer = new t.UIContainer, this.setDisplayObject(this._rootContainer), this._container = this._rootContainer
    }, i.prototype.dispose = function () {
      var t, i
      for (i = this._transitions.length, t = 0; t < i; ++t) {
        this._transitions[t].dispose()
      }
      for (i = this._controllers.length, t = 0; t < i; ++t) {
        this._controllers[t].dispose()
      }
      for (this._scrollPane && this._scrollPane.dispose(), t = (i = this._children.length) - 1; t >= 0; --t) {
        var n = this._children[t]
        n.parent = null, n.dispose()
      }
      this._boundsChanged = !1, e.prototype.dispose.call(this)
    }, Object.defineProperty(i.prototype, 'displayListContainer', {
      get: function () {
        return this._container
      }, enumerable: !0, configurable: !0
    }), i.prototype.addChild = function (t) {
      return this.addChildAt(t, this._children.length), t
    }, i.prototype.addChildAt = function (t, e) {
      if (void 0 === e && (e = 0), !t) throw 'child is null'
      var i = this._children.length
      if (e >= 0 && e <= i) {
        if (t.parent == this) {
          this.setChildIndex(t, e)
        } else {
          t.removeFromParent(), t.parent = this
          var n = this._children.length
          0 != t.sortingOrder ? (this._sortingChildCount++, e = this.getInsertPosForSortingChild(t)) : this._sortingChildCount > 0 && e > n - this._sortingChildCount && (e = n - this._sortingChildCount), e == n ? this._children.push(t) : this._children.splice(e, 0, t), this.childStateChanged(t), this.setBoundsChangedFlag()
        }
        return t
      }
      throw 'Invalid child index'
    }, i.prototype.getInsertPosForSortingChild = function (t) {
      var e = this._children.length, i = 0
      for (i = 0; i < e; i++) {
        var n = this._children[i]
        if (n != t && t.sortingOrder < n.sortingOrder) break
      }
      return i
    }, i.prototype.removeChild = function (t, e) {
      var i = this._children.indexOf(t)
      return -1 != i && this.removeChildAt(i, e), t
    }, i.prototype.removeChildAt = function (e, i) {
      if (e >= 0 && e < this.numChildren) {
        var n = this._children[e]
        return n.parent = null, 0 != n.sortingOrder && this._sortingChildCount--, this._children.splice(e, 1), n.group = null, n.inContainer && (this._container.removeChild(n.displayObject), this._childrenRenderOrder == t.ChildrenRenderOrder.Arch && t.GTimers.inst.callLater(this.buildNativeDisplayList, this)), i && n.dispose(), this.setBoundsChangedFlag(), n
      }
      throw 'Invalid child index'
    }, i.prototype.removeChildren = function (t, e, i) {
      null == t && (t = 0), null == e && (e = -1), (e < 0 || e >= this.numChildren) && (e = this.numChildren - 1)
      for (var n = t; n <= e; ++n) this.removeChildAt(t, i)
    }, i.prototype.getChildAt = function (t) {
      if (t >= 0 && t < this.numChildren) return this._children[t]
      throw 'Invalid child index'
    }, i.prototype.getChild = function (t) {
      for (var e = this._children.length, i = 0; i < e; ++i) if (this._children[i].name == t) return this._children[i]
      return null
    }, i.prototype.getChildByPath = function (t) {
      for (var e, n = t.split('.'), o = n.length, r = this, s = 0; s < o && (e = r.getChild(n[s])); ++s) {
        if (s != o - 1) {
          if (!(e instanceof i)) {
            e = null
            break
          }
          r = e
        }
      }
      return e
    }, i.prototype.getVisibleChild = function (t) {
      for (var e = this._children.length, i = 0; i < e; ++i) {
        var n = this._children[i]
        if (n.internalVisible && n.internalVisible && n.name == t) return n
      }
      return null
    }, i.prototype.getChildInGroup = function (t, e) {
      for (var i = this._children.length, n = 0; n < i; ++n) {
        var o = this._children[n]
        if (o.group == e && o.name == t) return o
      }
      return null
    }, i.prototype.getChildById = function (t) {
      for (var e = this._children.length, i = 0; i < e; ++i) if (this._children[i]._id == t) return this._children[i]
      return null
    }, i.prototype.getChildIndex = function (t) {
      return this._children.indexOf(t)
    }, i.prototype.setChildIndex = function (t, e) {
      var i = this._children.indexOf(t)
      if (-1 == i) throw 'Not a child of this container'
      if (0 == t.sortingOrder) {
        var n = this._children.length
        this._sortingChildCount > 0 && e > n - this._sortingChildCount - 1 && (e = n - this._sortingChildCount - 1), this._setChildIndex(t, i, e)
      }
    }, i.prototype.setChildIndexBefore = function (t, e) {
      var i = this._children.indexOf(t)
      if (-1 == i) throw 'Not a child of this container'
      if (0 != t.sortingOrder) return i
      var n = this._children.length
      return this._sortingChildCount > 0 && e > n - this._sortingChildCount - 1 && (e = n - this._sortingChildCount - 1), i < e ? this._setChildIndex(t, i, e - 1) : this._setChildIndex(t, i, e)
    }, i.prototype._setChildIndex = function (e, i, n) {
      var o = this._children.length
      if (n > o && (n = o), i == n) return i
      if (this._children.splice(i, 1), this._children.splice(n, 0, e), e.inContainer) {
        var r, s = 0
        if (this._childrenRenderOrder == t.ChildrenRenderOrder.Ascent) {
          for (r = 0; r < n; r++) this._children[r].inContainer && s++
          s == this._container.numChildren && s--, this._container.setChildIndex(e.displayObject, s)
        } else if (this._childrenRenderOrder == t.ChildrenRenderOrder.Descent) {
          for (r = o - 1; r > n; r--) this._children[r].inContainer && s++
          s == this._container.numChildren && s--, this._container.setChildIndex(e.displayObject, s)
        } else {
          t.GTimers.inst.callLater(this.buildNativeDisplayList, this)
        }
        this.setBoundsChangedFlag()
      }
      return n
    }, i.prototype.swapChildren = function (t, e) {
      var i = this._children.indexOf(t), n = this._children.indexOf(e)
      if (-1 == i || -1 == n) throw 'Not a child of this container'
      this.swapChildrenAt(i, n)
    }, i.prototype.swapChildrenAt = function (t, e) {
      var i = this._children[t], n = this._children[e]
      this.setChildIndex(i, e), this.setChildIndex(n, t)
    }, Object.defineProperty(i.prototype, 'numChildren', {
      get: function () {
        return this._children.length
      }, enumerable: !0, configurable: !0
    }), i.prototype.isAncestorOf = function (t) {
      if (!t) return !1
      for (var e = t.parent; e;) {
        if (e == this) return !0
        e = e.parent
      }
      return !1
    }, i.prototype.addController = function (t) {
      this._controllers.push(t), t.parent = this, this.applyController(t)
    }, i.prototype.getControllerAt = function (t) {
      return this._controllers[t]
    }, i.prototype.getController = function (t) {
      for (var e = this._controllers.length, i = 0; i < e; ++i) {
        var n = this._controllers[i]
        if (n.name == t) return n
      }
      return null
    }, i.prototype.removeController = function (t) {
      var e = this._controllers.indexOf(t)
      if (-1 == e) throw 'controller not exists'
      t.parent = null, this._controllers.splice(e, 1)
      for (var i = this._children.length, n = 0; n < i; n++) {
        this._children[n].handleControllerChanged(t)
      }
    }, Object.defineProperty(i.prototype, 'controllers', {
      get: function () {
        return this._controllers
      }, enumerable: !0, configurable: !0
    }), i.prototype.childStateChanged = function (e) {
      if (!this._buildingDisplayList) {
        var i, n, o = this._children.length
        if (e instanceof t.GGroup) {
          for (n = 0; n < o; n++) (i = this._children[n]).group == e && this.childStateChanged(i)
        } else if (e.displayObject) {
          if (e.internalVisible) {
            if (!e.displayObject.parent) {
              var r = 0
              if (this._childrenRenderOrder == t.ChildrenRenderOrder.Ascent) {
                for (n = 0; n < o && (i = this._children[n]) != e; n++) i.displayObject && i.displayObject.parent && r++
                this._container.addChildAt(e.displayObject, r)
              } else if (this._childrenRenderOrder == t.ChildrenRenderOrder.Descent) {
                for (n = o - 1; n >= 0 && (i = this._children[n]) != e; n--) i.displayObject && i.displayObject.parent && r++
                this._container.addChildAt(e.displayObject, r)
              } else {
                this._container.addChild(e.displayObject), t.GTimers.inst.callLater(this.buildNativeDisplayList, this)
              }
            }
          } else {
            e.displayObject.parent && this._container.removeChild(e.displayObject)
          }
        }
      }
    }, i.prototype.buildNativeDisplayList = function () {
      var e, i, n = this._children.length
      if (0 != n) {
        switch (this._childrenRenderOrder) {
          case t.ChildrenRenderOrder.Ascent:
            for (e = 0; e < n; e++) (i = this._children[e]).displayObject && i.internalVisible && this._container.addChild(i.displayObject)
            break
          case t.ChildrenRenderOrder.Descent:
            for (e = n - 1; e >= 0; e--) (i = this._children[e]).displayObject && i.internalVisible && this._container.addChild(i.displayObject)
            break
          case t.ChildrenRenderOrder.Arch:
            var o = t.ToolSet.clamp(this._apexIndex, 0, n)
            for (e = 0; e < o; e++) (i = this._children[e]).displayObject && i.internalVisible && this._container.addChild(i.displayObject)
            for (e = n - 1; e >= o; e--) (i = this._children[e]).displayObject && i.internalVisible && this._container.addChild(i.displayObject)
        }
      }
    }, i.prototype.applyController = function (t) {
      this._applyingController = t
      for (var e = this._children.length, i = 0; i < e; i++) this._children[i].handleControllerChanged(t)
      this._applyingController = null, t.runActions()
    }, i.prototype.applyAllControllers = function () {
      for (var t = this._controllers.length, e = 0; e < t; ++e) this.applyController(this._controllers[e])
    }, i.prototype.adjustRadioGroupDepth = function (e, i) {
      var n, o, r = this._children.length, s = -1, a = -1
      for (n = 0; n < r; n++) (o = this._children[n]) == e ? s = n : o instanceof t.GButton && o.relatedController == i && n > a && (a = n)
      s < a && (this._applyingController && this._children[a].handleControllerChanged(this._applyingController), this.swapChildrenAt(s, a))
    }, i.prototype.getTransitionAt = function (t) {
      return this._transitions[t]
    }, i.prototype.getTransition = function (t) {
      for (var e = this._transitions.length, i = 0; i < e; ++i) {
        var n = this._transitions[i]
        if (n.name == t) return n
      }
      return null
    }, i.prototype.isChildInView = function (t) {
      return this._rootContainer.scrollRect ? t.x + t.width >= 0 && t.x <= this.width && t.y + t.height >= 0 && t.y <= this.height : !this._scrollPane || this._scrollPane.isChildInView(t)
    }, i.prototype.getFirstChildInView = function () {
      for (var t = this._children.length, e = 0; e < t; ++e) {
        var i = this._children[e]
        if (this.isChildInView(i)) return e
      }
      return -1
    }, Object.defineProperty(i.prototype, 'scrollPane', {
      get: function () {
        return this._scrollPane
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'opaque', {
      get: function () {
        return this._rootContainer.opaque
      }, set: function (t) {
        this._rootContainer.opaque = t
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'margin', {
      get: function () {
        return this._margin
      }, set: function (t) {
        this._margin.copy(t), this._rootContainer.scrollRect && (this._container.x = this._margin.left + this._alignOffset.x, this._container.y = this._margin.top + this._alignOffset.y), this.handleSizeChanged()
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'childrenRenderOrder', {
      get: function () {
        return this._childrenRenderOrder
      }, set: function (t) {
        this._childrenRenderOrder != t && (this._childrenRenderOrder = t, this.buildNativeDisplayList())
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'apexIndex', {
      get: function () {
        return this._apexIndex
      }, set: function (e) {
        this._apexIndex != e && (this._apexIndex = e, this._childrenRenderOrder == t.ChildrenRenderOrder.Arch && this.buildNativeDisplayList())
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'mask', {
      get: function () {
        return this._rootContainer.mask
      }, set: function (t) {
        this._rootContainer.mask = t
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'baseUserData', {
      get: function () {
        var t = this.packageItem.rawData
        return t.seek(0, 4), t.readS()
      }, enumerable: !0, configurable: !0
    }), i.prototype.updateScrollRect = function () {
      var t = this._rootContainer.scrollRect
      null == t && (t = new egret.Rectangle)
      var e = this.width - this._margin.right, i = this.height - this._margin.bottom
      t.setTo(0, 0, e, i), this._rootContainer.scrollRect = t
    }, i.prototype.setupScroll = function (e) {
      this._rootContainer == this._container && (this._container = new egret.DisplayObjectContainer, this._rootContainer.addChild(this._container)), this._scrollPane = new t.ScrollPane(this), this._scrollPane.setup(e), this.setBoundsChangedFlag()
    }, i.prototype.setupOverflow = function (e) {
      e == t.OverflowType.Hidden ? (this._rootContainer == this._container && (this._container = new egret.DisplayObjectContainer, this._rootContainer.addChild(this._container)), this.updateScrollRect(), this._container.x = this._margin.left, this._container.y = this._margin.top) : 0 == this._margin.left && 0 == this._margin.top || (this._rootContainer == this._container && (this._container = new egret.DisplayObjectContainer, this._rootContainer.addChild(this._container)), this._container.x = this._margin.left, this._container.y = this._margin.top), this.setBoundsChangedFlag()
    }, i.prototype.handleSizeChanged = function () {
      if (e.prototype.handleSizeChanged.call(this), this._scrollPane ? this._scrollPane.onOwnerSizeChanged() : this._rootContainer.scrollRect && this.updateScrollRect(), this._rootContainer.hitArea instanceof t.PixelHitTest) {
        var i = this._rootContainer.hitArea
        0 != this.sourceWidth && (i.scaleX = this._width / this.sourceWidth), 0 != this.sourceHeight && (i.scaleY = this._height / this.sourceHeight)
      }
    }, i.prototype.handleGrayedChanged = function () {
      var t = this.getController('grayed')
      if (t) t.selectedIndex = this.grayed ? 1 : 0 else for (var e = this.grayed, i = this._children.length, n = 0; n < i; ++n) this._children[n].grayed = e
    }, i.prototype.handleControllerChanged = function (t) {
      e.prototype.handleControllerChanged.call(this, t), this._scrollPane && this._scrollPane.handleControllerChanged(t)
    }, i.prototype.setBoundsChangedFlag = function () {
      (this._scrollPane || this._trackBounds) && (this._boundsChanged || (this._boundsChanged = !0, egret.callLater(this.__render, this)))
    }, i.prototype.__render = function () {
      if (this._boundsChanged) {
        var t = this._children.length
        if (t > 0) {
          for (var e = 0; e < t; e++) {
            this._children[e].ensureSizeCorrect()
          }
        }
        this.updateBounds()
      }
    }, i.prototype.ensureBoundsCorrect = function () {
      var t = this._children.length
      if (t > 0) {
        for (var e = 0; e < t; e++) {
          this._children[e].ensureSizeCorrect()
        }
      }
      this._boundsChanged && this.updateBounds()
    }, i.prototype.updateBounds = function () {
      var t = 0, e = 0, i = 0, n = 0, o = this._children.length
      if (o > 0) {
        t = Number.POSITIVE_INFINITY, e = Number.POSITIVE_INFINITY
        var r = Number.NEGATIVE_INFINITY, s = Number.NEGATIVE_INFINITY, a = 0, h = 0
        for (h = 0; h < o; h++) {
          var l = this._children[h];
          (a = l.x) < t && (t = a), (a = l.y) < e && (e = a), (a = l.x + l.actualWidth) > r && (r = a), (a = l.y + l.actualHeight) > s && (s = a)
        }
        i = r - t, n = s - e
      }
      this.setBounds(t, e, i, n)
    }, i.prototype.setBounds = function (t, e, i, n) {
      void 0 === n && (n = 0), this._boundsChanged = !1, this._scrollPane && this._scrollPane.setContentSize(Math.round(t + i), Math.round(e + n))
    }, Object.defineProperty(i.prototype, 'viewWidth', {
      get: function () {
        return this._scrollPane ? this._scrollPane.viewWidth : this.width - this._margin.left - this._margin.right
      }, set: function (t) {
        this._scrollPane ? this._scrollPane.viewWidth = t : this.width = t + this._margin.left + this._margin.right
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'viewHeight', {
      get: function () {
        return this._scrollPane ? this._scrollPane.viewHeight : this.height - this._margin.top - this._margin.bottom
      }, set: function (t) {
        this._scrollPane ? this._scrollPane.viewHeight = t : this.height = t + this._margin.top + this._margin.bottom
      }, enumerable: !0, configurable: !0
    }), i.prototype.getSnappingPosition = function (t, e, i) {
      i || (i = new egret.Point)
      var n = this._children.length
      if (0 == n) return i.x = 0, i.y = 0, i
      this.ensureBoundsCorrect()
      var o = null, r = null, s = 0
      if (0 != e) {
        for (; s < n; s++) {
          if (e < (o = this._children[s]).y) {
            if (0 == s) {
              e = 0
              break
            }
            e = e < (r = this._children[s - 1]).y + r.actualHeight / 2 ? r.y : o.y
            break
          }
        }
        s == n && (e = o.y)
      }
      if (0 != t) {
        for (s > 0 && s--; s < n; s++) {
          if (t < (o = this._children[s]).x) {
            if (0 == s) {
              t = 0
              break
            }
            t = t < (r = this._children[s - 1]).x + r.actualWidth / 2 ? r.x : o.x
            break
          }
        }
        s == n && (t = o.x)
      }
      return i.x = t, i.y = e, i
    }, i.prototype.childSortingOrderChanged = function (t, e, i) {
      if (void 0 === i && (i = 0), 0 == i) {
        this._sortingChildCount--, this.setChildIndex(t, this._children.length)
      } else {
        0 == e && this._sortingChildCount++
        var n = this._children.indexOf(t), o = this.getInsertPosForSortingChild(t)
        n < o ? this._setChildIndex(t, n, o - 1) : this._setChildIndex(t, n, o)
      }
    }, i.prototype.constructFromResource = function () {
      this.constructFromResource2(null, 0)
    }, i.prototype.constructFromResource2 = function (e, i) {
      var n, o, r, s, a, h, l, c, u = this.packageItem.getBranch()
      u.decoded || (u.decoded = !0, t.TranslationHelper.translateComponent(u))
      var _ = u.rawData
      _.seek(0, 0), this._underConstruct = !0, this.sourceWidth = _.readInt(), this.sourceHeight = _.readInt(), this.initWidth = this.sourceWidth, this.initHeight = this.sourceHeight, this.setSize(this.sourceWidth, this.sourceHeight), _.readBool() && (this.minWidth = _.readInt(), this.maxWidth = _.readInt(), this.minHeight = _.readInt(), this.maxHeight = _.readInt()), _.readBool() && (a = _.readFloat(), h = _.readFloat(), this.internalSetPivot(a, h, _.readBool())), _.readBool() && (this._margin.top = _.readInt(), this._margin.bottom = _.readInt(), this._margin.left = _.readInt(), this._margin.right = _.readInt())
      var p = _.readByte()
      if (p == t.OverflowType.Scroll) {
        var d = _.position
        _.seek(0, 7), this.setupScroll(_), _.position = d
      } else {
        this.setupOverflow(p)
      }
      _.readBool() && _.skip(8), this._buildingDisplayList = !0, _.seek(0, 1)
      var g, f = _.readShort()
      for (n = 0; n < f; n++) {
        s = _.readShort(), s += _.position
        var y = new t.Controller
        this._controllers.push(y), y.parent = this, y.setup(_), _.position = s
      }
      _.seek(0, 2)
      var m = _.readShort()
      for (n = 0; n < m; n++) {
        if (o = _.readShort(), r = _.position, e) {
          g = e[i + n]
        } else {
          _.seek(r, 0)
          var b, v = _.readByte(), w = _.readS(), C = _.readS(), S = null
          if (null != w) S = (b = null != C ? t.UIPackage.getById(C) : u.owner) ? b.getItemById(w) : null
          S ? (g = t.UIObjectFactory.newObject(S)).constructFromResource() : g = t.UIObjectFactory.newObject(v)
        }
        g._underConstruct = !0, g.setup_beforeAdd(_, r), g.parent = this, this._children.push(g), _.position = r + o
      }
      for (_.seek(0, 3), this.relations.setup(_, !0), _.seek(0, 2), _.skip(2), n = 0; n < m; n++) s = _.readShort(), s += _.position, _.seek(_.position, 3), this._children[n].relations.setup(_, !1), _.position = s
      for (_.seek(0, 2), _.skip(2), n = 0; n < m; n++) s = _.readShort(), s += _.position, (g = this._children[n]).setup_afterAdd(_, _.position), g._underConstruct = !1, _.position = s
      _.seek(0, 4), _.skip(2), this.opaque = _.readBool()
      var x = _.readShort();
      -1 != x && (this.mask = this.getChildAt(x).displayObject, _.readBool())
      var T = _.readS()
      l = _.readInt(), c = _.readInt(), null != T ? (S = u.owner.getItemById(T)) && S.pixelHitTestData && (this._rootContainer.hitArea = new t.PixelHitTest(S.pixelHitTestData, l, c)) : 0 != l && -1 != c && (this._rootContainer.hitArea = this.getChildAt(c).displayObject), _.seek(0, 5)
      var I = _.readShort()
      for (n = 0; n < I; n++) {
        s = _.readShort(), s += _.position
        var P = new t.Transition(this)
        P.setup(_), this._transitions.push(P), _.position = s
      }
      this._transitions.length > 0 && (this.displayObject.addEventListener(egret.Event.ADDED_TO_STAGE, this.___added, this), this.displayObject.addEventListener(egret.Event.REMOVED_FROM_STAGE, this.___removed, this)), this.applyAllControllers(), this._buildingDisplayList = !1, this._underConstruct = !1, this.buildNativeDisplayList(), this.setBoundsChangedFlag(), u.objectType != t.ObjectType.Component && this.constructExtension(_), this.onConstruct()
    }, i.prototype.onConstruct = function () {
      this.constructFromXML(null)
    }, i.prototype.constructExtension = function (t) {
    }, i.prototype.constructFromXML = function (t) {
    }, i.prototype.setup_afterAdd = function (t, i) {
      e.prototype.setup_afterAdd.call(this, t, i), t.seek(i, 4)
      var n = t.readShort();
      -1 != n && this._scrollPane && (this._scrollPane.pageController = this._parent.getControllerAt(n))
      for (var o = t.readShort(), r = 0; r < o; r++) {
        var s = this.getController(t.readS()), a = t.readS()
        s && (s.selectedPageId = a)
      }
      if (t.version >= 2) {
        for (o = t.readShort(), r = 0; r < o; r++) {
          var h = t.readS(), l = t.readShort(), c = t.readS(), u = this.getChildByPath(h)
          u && u.setProp(l, c)
        }
      }
    }, i.prototype.___added = function (t) {
      for (var e = this._transitions.length, i = 0; i < e; ++i) this._transitions[i].onOwnerAddedToStage()
    }, i.prototype.___removed = function (t) {
      for (var e = this._transitions.length, i = 0; i < e; ++i) this._transitions[i].onOwnerRemovedFromStage()
    }, i
  }(t.GObject)
  t.GComponent = e
}(fgui || (fgui = {})), function (t) {
  var e = function (e) {
    function i () {
      var i = e.call(this) || this
      return i._mode = t.ButtonMode.Common, i._title = '', i._icon = '', i._sound = t.UIConfig.buttonSound, i._soundVolumeScale = t.UIConfig.buttonSoundVolumeScale, i._changeStateOnClick = !0, i._downEffect = 0, i._downEffectValue = .8, i
    }

    return __extends(i, e), Object.defineProperty(i.prototype, 'icon', {
      get: function () {
        return this._icon
      }, set: function (t) {
        this._icon = t, t = this._selected && this._selectedIcon ? this._selectedIcon : this._icon, this._iconObject && (this._iconObject.icon = t), this.updateGear(7)
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'selectedIcon', {
      get: function () {
        return this._selectedIcon
      }, set: function (t) {
        this._selectedIcon = t, t = this._selected && this._selectedIcon ? this._selectedIcon : this._icon, this._iconObject && (this._iconObject.icon = t)
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'title', {
      get: function () {
        return this._title
      }, set: function (t) {
        this._title = t, this._titleObject && (this._titleObject.text = this._selected && this._selectedTitle ? this._selectedTitle : this._title), this.updateGear(6)
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'text', {
      get: function () {
        return this.title
      }, set: function (t) {
        this.title = t
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'selectedTitle', {
      get: function () {
        return this._selectedTitle
      }, set: function (t) {
        this._selectedTitle = t, this._titleObject && (this._titleObject.text = this._selected && this._selectedTitle ? this._selectedTitle : this._title)
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'titleColor', {
      get: function () {
        var t = this.getTextField()
        return t ? t.color : 0
      }, set: function (t) {
        var e = this.getTextField()
        e && (e.color = t)
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'titleFontSize', {
      get: function () {
        var t = this.getTextField()
        return t ? t.fontSize : 0
      }, set: function (t) {
        var e = this.getTextField()
        e && (e.fontSize = t)
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'sound', {
      get: function () {
        return this._sound
      }, set: function (t) {
        this._sound = t
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'soundVolumeScale', {
      get: function () {
        return this._soundVolumeScale
      }, set: function (t) {
        this._soundVolumeScale = t
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'selected', {
      get: function () {
        return this._selected
      }, set: function (e) {
        if (this._mode != t.ButtonMode.Common && this._selected != e) {
          if (this._selected = e, this.grayed && this._buttonController && this._buttonController.hasPage(i.DISABLED) ? this._selected ? this.setState(i.SELECTED_DISABLED) : this.setState(i.DISABLED) : this._selected ? this.setState(this._over ? i.SELECTED_OVER : i.DOWN) : this.setState(this._over ? i.OVER : i.UP), this._selectedTitle && this._titleObject && (this._titleObject.text = this._selected ? this._selectedTitle : this._title), this._selectedIcon) {
            var n = this._selected ? this._selectedIcon : this._icon
            this._iconObject && (this._iconObject.icon = n)
          }
          this._relatedController && this._parent && !this._parent._buildingDisplayList && (this._selected ? (this._relatedController.selectedPageId = this._relatedPageId, this._relatedController.autoRadioGroupDepth && this._parent.adjustRadioGroupDepth(this, this._relatedController)) : this._mode == t.ButtonMode.Check && this._relatedController.selectedPageId == this._relatedPageId && (this._relatedController.oppositePageId = this._relatedPageId))
        }
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'mode', {
      get: function () {
        return this._mode
      }, set: function (e) {
        this._mode != e && (e == t.ButtonMode.Common && (this.selected = !1), this._mode = e)
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'relatedController', {
      get: function () {
        return this._relatedController
      }, set: function (t) {
        this._relatedController = t
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'relatedPageId', {
      get: function () {
        return this._relatedPageId
      }, set: function (t) {
        this._relatedPageId = t
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'changeStateOnClick', {
      get: function () {
        return this._changeStateOnClick
      }, set: function (t) {
        this._changeStateOnClick = t
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'linkedPopup', {
      get: function () {
        return this._linkedPopup
      }, set: function (t) {
        this._linkedPopup = t
      }, enumerable: !0, configurable: !0
    }), i.prototype.getTextField = function () {
      return this._titleObject instanceof t.GTextField ? this._titleObject : this._titleObject instanceof t.GLabel || this._titleObject instanceof i ? this._titleObject.getTextField() : null
    }, i.prototype.addStateListener = function (e, i) {
      this.addEventListener(t.StateChangeEvent.CHANGED, e, i)
    }, i.prototype.removeStateListener = function (e, i) {
      this.removeEventListener(t.StateChangeEvent.CHANGED, e, i)
    }, i.prototype.fireClick = function (e) {
      e && this._mode == t.ButtonMode.Common && (this.setState(i.OVER), t.GTimers.inst.add(100, 1, function () {
        this.setState(i.DOWN)
      }, this), t.GTimers.inst.add(200, 1, function () {
        this.setState(i.UP)
      }, this)), this.__click(null)
    }, i.prototype.setState = function (e) {
      if (this._buttonController && (this._buttonController.selectedPage = e), 1 == this._downEffect) {
        var n = this.numChildren
        if (e == i.DOWN || e == i.SELECTED_OVER || e == i.SELECTED_DISABLED) {
          for (var o = 255 * this._downEffectValue, r = (o << 16) + (o << 8) + o, s = 0; s < n; s++) {
            null == (a = this.getChildAt(s)).color || a instanceof t.GTextField || (a.color = r)
          }
        } else {
          for (s = 0; s < n; s++) {
            var a
            null == (a = this.getChildAt(s)).color || a instanceof t.GTextField || (a.color = 16777215)
          }
        }
      } else {
        2 == this._downEffect && (e == i.DOWN || e == i.SELECTED_OVER || e == i.SELECTED_DISABLED ? this._downScaled || (this._downScaled = !0, this._rootContainer.cacheHitArea(!0), this.setScale(this.scaleX * this._downEffectValue, this.scaleY * this._downEffectValue)) : this._downScaled && (this._downScaled = !1, this._rootContainer.cacheHitArea(!1), this.setScale(this.scaleX / this._downEffectValue, this.scaleY / this._downEffectValue)))
      }
    }, i.prototype.handleControllerChanged = function (t) {
      e.prototype.handleControllerChanged.call(this, t), this._relatedController == t && (this.selected = this._relatedPageId == t.selectedPageId)
    }, i.prototype.handleGrayedChanged = function () {
      this._buttonController && this._buttonController.hasPage(i.DISABLED) ? this.grayed ? this._selected && this._buttonController.hasPage(i.SELECTED_DISABLED) ? this.setState(i.SELECTED_DISABLED) : this.setState(i.DISABLED) : this._selected ? this.setState(i.DOWN) : this.setState(i.UP) : e.prototype.handleGrayedChanged.call(this)
    }, i.prototype.getProp = function (i) {
      switch (i) {
        case t.ObjectPropID.Color:
          return this.titleColor
        case t.ObjectPropID.OutlineColor:
          var n = this.getTextField()
          return n ? n.strokeColor : 0
        case t.ObjectPropID.FontSize:
          return this.titleFontSize
        case t.ObjectPropID.Selected:
          return this.selected
        default:
          return e.prototype.getProp.call(this, i)
      }
    }, i.prototype.setProp = function (i, n) {
      switch (i) {
        case t.ObjectPropID.Color:
          this.titleColor = n
          break
        case t.ObjectPropID.OutlineColor:
          var o = this.getTextField()
          o && (o.strokeColor = n)
          break
        case t.ObjectPropID.FontSize:
          this.titleFontSize = n
          break
        case t.ObjectPropID.Selected:
          this.selected = n
          break
        default:
          e.prototype.setProp.call(this, i, n)
      }
    }, i.prototype.constructExtension = function (e) {
      e.seek(0, 6), this._mode = e.readByte()
      var n = e.readS()
      n && (this._sound = n), this._soundVolumeScale = e.readFloat(), this._downEffect = e.readByte(), this._downEffectValue = e.readFloat(), 2 == this._downEffect && this.setPivot(.5, .5, this.pivotAsAnchor), this._buttonController = this.getController('button'), this._titleObject = this.getChild('title'), this._iconObject = this.getChild('icon'), this._titleObject && (this._title = this._titleObject.text), this._iconObject && (this._icon = this._iconObject.icon), this._mode == t.ButtonMode.Common && this.setState(i.UP), this.addEventListener(egret.TouchEvent.TOUCH_BEGIN, this.__mousedown, this), this.addEventListener(egret.TouchEvent.TOUCH_TAP, this.__click, this)
    }, i.prototype.setup_afterAdd = function (t, i) {
      var n, o;
      (e.prototype.setup_afterAdd.call(this, t, i), t.seek(i, 6)) && (t.readByte() == this.packageItem.objectType && (null != (n = t.readS()) && (this.title = n), null != (n = t.readS()) && (this.selectedTitle = n), null != (n = t.readS()) && (this.icon = n), null != (n = t.readS()) && (this.selectedIcon = n), t.readBool() && (this.titleColor = t.readColor()), 0 != (o = t.readInt()) && (this.titleFontSize = o), (o = t.readShort()) >= 0 && (this._relatedController = this.parent.getControllerAt(o)), this._relatedPageId = t.readS(), null != (n = t.readS()) && (this._sound = n), t.readBool() && (this._soundVolumeScale = t.readFloat()), this.selected = t.readBool()))
    }, i.prototype.__mousedown = function (e) {
      this._down = !0, t.GRoot.inst.nativeStage.addEventListener(egret.TouchEvent.TOUCH_END, this.__mouseup, this), this._mode == t.ButtonMode.Common && (this.grayed && this._buttonController && this._buttonController.hasPage(i.DISABLED) ? this.setState(i.SELECTED_DISABLED) : this.setState(i.DOWN)), this._linkedPopup && (this._linkedPopup instanceof t.Window ? this._linkedPopup.toggleStatus() : this.root.togglePopup(this._linkedPopup, this))
    }, i.prototype.__mouseup = function (e) {
      if (this._down) {
        if (t.GRoot.inst.nativeStage.removeEventListener(egret.TouchEvent.TOUCH_END, this.__mouseup, this), this._down = !1, !this.displayObject) return
        this._mode == t.ButtonMode.Common && (this.grayed && this._buttonController && this._buttonController.hasPage(i.DISABLED) ? this.setState(i.DISABLED) : this._over ? this.setState(i.OVER) : this.setState(i.UP))
      }
    }, i.prototype.__click = function (e) {
      if (this._sound) {
        var i = t.UIPackage.getItemByURL(this._sound)
        if (i) {
          var n = i.owner.getItemAsset(i)
          n && t.GRoot.inst.playOneShotSound(n, this._soundVolumeScale)
        }
      }
      this._mode == t.ButtonMode.Check ? this._changeStateOnClick && (this.selected = !this._selected, this.dispatchEvent(new t.StateChangeEvent(t.StateChangeEvent.CHANGED))) : this._mode == t.ButtonMode.Radio ? this._changeStateOnClick && !this._selected && (this.selected = !0, this.dispatchEvent(new t.StateChangeEvent(t.StateChangeEvent.CHANGED))) : this._relatedController && (this._relatedController.selectedPageId = this._relatedPageId)
    }, i.UP = 'up', i.DOWN = 'down', i.OVER = 'over', i.SELECTED_OVER = 'selectedOver', i.DISABLED = 'disabled', i.SELECTED_DISABLED = 'selectedDisabled', i
  }(t.GComponent)
  t.GButton = e
}(fgui || (fgui = {})), function (t) {
  var e = function (e) {
    function i () {
      var i = e.call(this) || this
      return i._visibleItemCount = 0, i._selectedIndex = 0, i._popupDirection = t.PopupDirection.Auto, i._visibleItemCount = t.UIConfig.defaultComboBoxVisibleItemCount, i._itemsUpdated = !0, i._selectedIndex = -1, i._items = [], i._values = [], i
    }

    return __extends(i, e), Object.defineProperty(i.prototype, 'text', {
      get: function () {
        return this._titleObject ? this._titleObject.text : null
      }, set: function (t) {
        this._titleObject && (this._titleObject.text = t), this.updateGear(6)
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'icon', {
      get: function () {
        return this._iconObject ? this._iconObject.icon : null
      }, set: function (t) {
        this._iconObject && (this._iconObject.icon = t), this.updateGear(7)
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'titleColor', {
      get: function () {
        var t = this.getTextField()
        return t ? t.color : 0
      }, set: function (t) {
        var e = this.getTextField()
        e && (e.color = t)
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'titleFontSize', {
      get: function () {
        var t = this.getTextField()
        return t ? t.fontSize : 0
      }, set: function (t) {
        var e = this.getTextField()
        e && (e.fontSize = t)
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'visibleItemCount', {
      get: function () {
        return this._visibleItemCount
      }, set: function (t) {
        this._visibleItemCount = t
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'popupDirection', {
      get: function () {
        return this._popupDirection
      }, set: function (t) {
        this._popupDirection = t
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'items', {
      get: function () {
        return this._items
      }, set: function (t) {
        t ? this._items = t.concat() : this._items.length = 0, this._items.length > 0 ? (this._selectedIndex >= this._items.length ? this._selectedIndex = this._items.length - 1 : -1 == this._selectedIndex && (this._selectedIndex = 0), this.text = this._items[this._selectedIndex], this._icons && this._selectedIndex < this._icons.length && (this.icon = this._icons[this._selectedIndex])) : (this.text = '', this._icons && (this.icon = null), this._selectedIndex = -1), this._itemsUpdated = !0
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'icons', {
      get: function () {
        return this._icons
      }, set: function (t) {
        this._icons = t, this._icons && -1 != this._selectedIndex && this._selectedIndex < this._icons.length && (this.icon = this._icons[this._selectedIndex])
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'values', {
      get: function () {
        return this._values
      }, set: function (t) {
        t ? this._values = t.concat() : this._values.length = 0
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'selectedIndex', {
      get: function () {
        return this._selectedIndex
      }, set: function (t) {
        this._selectedIndex != t && (this._selectedIndex = t, this._selectedIndex >= 0 && this._selectedIndex < this._items.length ? (this.text = this._items[this._selectedIndex], this._icons && this._selectedIndex < this._icons.length && (this.icon = this._icons[this._selectedIndex])) : (this.text = '', this._icons && (this.icon = null)), this.updateSelectionController())
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'value', {
      get: function () {
        return this._values[this._selectedIndex]
      }, set: function (t) {
        var e = this._values.indexOf(t);
        -1 == e && null == t && (e = this._values.indexOf('')), this.selectedIndex = e
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'selectionController', {
      get: function () {
        return this._selectionController
      }, set: function (t) {
        this._selectionController = t
      }, enumerable: !0, configurable: !0
    }), i.prototype.getTextField = function () {
      return this._titleObject instanceof t.GTextField ? this._titleObject : this._titleObject instanceof t.GLabel || this._titleObject instanceof t.GButton ? this._titleObject.getTextField() : null
    }, i.prototype.setState = function (t) {
      this._buttonController && (this._buttonController.selectedPage = t)
    }, i.prototype.getProp = function (i) {
      switch (i) {
        case t.ObjectPropID.Color:
          return this.titleColor
        case t.ObjectPropID.OutlineColor:
          var n = this.getTextField()
          return n ? n.strokeColor : 0
        case t.ObjectPropID.FontSize:
          return (n = this.getTextField()) ? n.fontSize : 0
        default:
          return e.prototype.getProp.call(this, i)
      }
    }, i.prototype.setProp = function (i, n) {
      switch (i) {
        case t.ObjectPropID.Color:
          this.titleColor = n
          break
        case t.ObjectPropID.OutlineColor:
          var o = this.getTextField()
          o && (o.strokeColor = n)
          break
        case t.ObjectPropID.FontSize:
          (o = this.getTextField()) && (o.fontSize = n)
          break
        default:
          e.prototype.setProp.call(this, i, n)
      }
    }, i.prototype.constructExtension = function (e) {
      var i
      if (this._buttonController = this.getController('button'), this._titleObject = this.getChild('title'), this._iconObject = this.getChild('icon'), i = e.readS()) {
        if (this.dropdown = t.UIPackage.createObjectFromURL(i), !this.dropdown) return void console.error('')
        if (this.dropdown.name = 'this.dropdown', this._list = this.dropdown.getChild('list').asList, null == this._list) return void console.error(this.resourceURL + ': list')
        this._list.addEventListener(t.ItemEvent.CLICK, this.__clickItem, this), this._list.addRelation(this.dropdown, t.RelationType.Width), this._list.removeRelation(this.dropdown, t.RelationType.Height), this.dropdown.addRelation(this._list, t.RelationType.Height), this.dropdown.removeRelation(this._list, t.RelationType.Width), this.dropdown.displayObject.addEventListener(egret.Event.REMOVED_FROM_STAGE, this.__popupWinClosed, this)
      }
      this.addEventListener(egret.TouchEvent.TOUCH_BEGIN, this.__mousedown, this)
    }, i.prototype.handleControllerChanged = function (t) {
      e.prototype.handleControllerChanged.call(this, t), this._selectionController == t && (this.selectedIndex = t.selectedIndex)
    }, i.prototype.updateSelectionController = function () {
      if (this._selectionController && !this._selectionController.changing && this._selectedIndex < this._selectionController.pageCount) {
        var t = this._selectionController
        this._selectionController = null, t.selectedIndex = this._selectedIndex, this._selectionController = t
      }
    }, i.prototype.dispose = function () {
      this.dropdown && (this.dropdown.dispose(), this.dropdown = null), e.prototype.dispose.call(this)
    }, i.prototype.setup_afterAdd = function (t, i) {
      if (e.prototype.setup_afterAdd.call(this, t, i), t.seek(i, 6) && t.readByte() == this.packageItem.objectType) {
        var n, o, r, s, a = t.readShort()
        for (n = 0; n < a; n++) r = t.readShort(), r += t.position, this._items[n] = t.readS(), this._values[n] = t.readS(), null != (s = t.readS()) && (null == this._icons && (this._icons = new Array), this._icons[n] = s), t.position = r
        null != (s = t.readS()) ? (this.text = s, this._selectedIndex = this._items.indexOf(s)) : this._items.length > 0 ? (this._selectedIndex = 0, this.text = this._items[0]) : this._selectedIndex = -1, null != (s = t.readS()) && (this.icon = s), t.readBool() && (this.titleColor = t.readColor()), (o = t.readInt()) > 0 && (this._visibleItemCount = o), this._popupDirection = t.readByte(), (o = t.readShort()) >= 0 && (this._selectionController = this.parent.getControllerAt(o))
      }
    }, i.prototype.showDropdown = function () {
      if (this._itemsUpdated) {
        this._itemsUpdated = !1, this._list.removeChildrenToPool()
        for (var e = this._items.length, i = 0; i < e; i++) {
          var n = this._list.addItemFromPool()
          n.name = i < this._values.length ? this._values[i] : '', n.text = this._items[i], n.icon = this._icons && i < this._icons.length ? this._icons[i] : null
        }
        this._list.resizeToFit(this._visibleItemCount)
      }
      this._list.selectedIndex = -1, this.dropdown.width = this.width, this._list.ensureBoundsCorrect(), this.root.togglePopup(this.dropdown, this, this._popupDirection), this.dropdown.parent && this.setState(t.GButton.DOWN)
    }, i.prototype.__popupWinClosed = function (e) {
      this._over ? this.setState(t.GButton.OVER) : this.setState(t.GButton.UP)
    }, i.prototype.__clickItem = function (e) {
      t.GTimers.inst.add(100, 1, this.__clickItem2, this, this._list.getChildIndex(e.itemObject))
    }, i.prototype.__clickItem2 = function (e) {
      this.dropdown.parent instanceof t.GRoot && this.dropdown.parent.hidePopup(), this._selectedIndex = -1, this.selectedIndex = e, this.dispatchEvent(new t.StateChangeEvent(t.StateChangeEvent.CHANGED))
    }, i.prototype.__mousedown = function (e) {
      e.target instanceof egret.TextField && e.target.type == egret.TextFieldType.INPUT || (this._down = !0, t.GRoot.inst.nativeStage.addEventListener(egret.TouchEvent.TOUCH_END, this.__mouseup, this), this.dropdown && this.showDropdown())
    }, i.prototype.__mouseup = function (e) {
      this._down && (this._down = !1, t.GRoot.inst.nativeStage.removeEventListener(egret.TouchEvent.TOUCH_END, this.__mouseup, this), this.dropdown && !this.dropdown.parent && (this._over ? this.setState(t.GButton.OVER) : this.setState(t.GButton.UP)))
    }, i
  }(t.GComponent)
  t.GComboBox = e
}(fgui || (fgui = {})), function (t) {
  var e = function (e) {
    function i () {
      var t = e.call(this) || this
      return t._type = 0, t._lineSize = 0, t._lineColor = 0, t._fillColor = 0, t._lineSize = 1, t._lineAlpha = 1, t._fillAlpha = 1, t._fillColor = 16777215, t
    }

    return __extends(i, e), Object.defineProperty(i.prototype, 'graphics', {
      get: function () {
        return this._graphics
      }, enumerable: !0, configurable: !0
    }), i.prototype.drawRect = function (t, e, i, n, o, r) {
      this._type = 1, this._lineSize = t, this._lineColor = e, this._lineAlpha = i, this._fillColor = n, this._fillAlpha = o, this._cornerRadius = r, this.updateGraph()
    }, i.prototype.drawEllipse = function (t, e, i, n, o) {
      this._type = 2, this._lineSize = t, this._lineColor = e, this._lineAlpha = i, this._fillColor = n, this._fillAlpha = o, this._cornerRadius = null, this.updateGraph()
    }, i.prototype.drawRegularPolygon = function (t, e, i, n, o, r, s, a) {
      this._type = 4, this._lineSize = t, this._lineColor = e, this._lineAlpha = i, this._fillColor = n, this._fillAlpha = o, this._sides = r, this._startAngle = s || 0, this._distances = a, this.updateGraph()
    }, i.prototype.drawPolygon = function (t, e, i, n, o, r) {
      this._type = 3, this._lineSize = t, this._lineColor = e, this._lineAlpha = i, this._fillColor = n, this._fillAlpha = o, this._polygonPoints = r, this.updateGraph()
    }, Object.defineProperty(i.prototype, 'distances', {
      get: function () {
        return this._distances
      }, set: function (t) {
        this._distances = t, 3 == this._type && this.updateGraph()
      }, enumerable: !0, configurable: !0
    }), i.prototype.clearGraphics = function () {
      this._graphics && (this._type = 0, this._graphics.clear())
    }, Object.defineProperty(i.prototype, 'color', {
      get: function () {
        return this._fillColor
      }, set: function (t) {
        this._fillColor = t, 0 != this._type && this.updateGraph()
      }, enumerable: !0, configurable: !0
    }), i.prototype.updateGraph = function () {
      var e = this.graphics
      e.clear()
      var i = this.width, n = this.height
      if (0 != i && 0 != n) {
        if (0 == this._lineSize ? e.lineStyle(0, 0, 0) : e.lineStyle(this._lineSize, this._lineColor, this._lineAlpha), e.beginFill(this._fillColor, this._fillAlpha), 1 == this._type) {
          this._cornerRadius ? 1 == this._cornerRadius.length ? e.drawRoundRect(0, 0, i, n, 2 * this._cornerRadius[0], 2 * this._cornerRadius[0]) : e.drawRoundRect(0, 0, i, n, 2 * this._cornerRadius[0], 2 * this._cornerRadius[1]) : e.drawRect(0, 0, i, n)
        } else if (2 == this._type) {
          e.drawEllipse(0, 0, i, n)
        } else if (3 == this._type) {
          t.ToolSet.fillPath(e, this._polygonPoints, 0, 0)
        } else if (4 == this._type) {
          this._polygonPoints || (this._polygonPoints = [])
          var o = Math.min(this._width, this._height) / 2
          this._polygonPoints.length = 0
          for (var r, s = this._startAngle * Math.PI / 180, a = 2 * Math.PI / this._sides, h = 0; h < this._sides; h++) {
            this._distances ? (r = this._distances[h], isNaN(r) && (r = 1)) : r = 1
            var l = o + o * r * Math.cos(s), c = o + o * r * Math.sin(s)
            this._polygonPoints.push(l, c), s += a
          }
          t.ToolSet.fillPath(e, this._polygonPoints, 0, 0)
        }
        e.endFill()
      }
    }, i.prototype.replaceMe = function (t) {
      if (!this._parent) throw 'parent not set'
      t.name = this.name, t.alpha = this.alpha, t.rotation = this.rotation, t.visible = this.visible, t.touchable = this.touchable, t.grayed = this.grayed, t.setXY(this.x, this.y), t.setSize(this.width, this.height)
      var e = this._parent.getChildIndex(this)
      this._parent.addChildAt(t, e), t.relations.copyFrom(this.relations), this._parent.removeChild(this, !0)
    }, i.prototype.addBeforeMe = function (t) {
      if (null == this._parent) throw 'parent not set'
      var e = this._parent.getChildIndex(this)
      this._parent.addChildAt(t, e)
    }, i.prototype.addAfterMe = function (t) {
      if (null == this._parent) throw 'parent not set'
      var e = this._parent.getChildIndex(this)
      e++, this._parent.addChildAt(t, e)
    }, i.prototype.setNativeObject = function (t) {
      var e = new egret.Sprite
      this.setDisplayObject(e), this._parent && this._parent.childStateChanged(this), this.handleXYChanged(), e.alpha = this.alpha, e.rotation = this.rotation, e.visible = this.visible, e.touchEnabled = this.touchable, e.touchChildren = this.touchable, e.addChild(t)
    }, i.prototype.createDisplayObject = function () {
      var t = new egret.Sprite
      t.touchEnabled = !0, this._graphics = t.graphics, this.setDisplayObject(t)
    }, i.prototype.getProp = function (i) {
      return i == t.ObjectPropID.Color ? this.color : e.prototype.getProp.call(this, i)
    }, i.prototype.setProp = function (i, n) {
      i == t.ObjectPropID.Color ? this.color = n : e.prototype.setProp.call(this, i, n)
    }, i.prototype.handleSizeChanged = function () {
      e.prototype.handleSizeChanged.call(this), 0 != this._type && this.updateGraph()
    }, i.prototype.setup_beforeAdd = function (t, i) {
      if (e.prototype.setup_beforeAdd.call(this, t, i), t.seek(i, 5), this._type = t.readByte(), 0 != this._type) {
        var n, o
        this._lineSize = t.readInt()
        var r = t.readColor(!0)
        if (this._lineColor = 16777215 & r, this._lineAlpha = (r >> 24 & 255) / 255, r = t.readColor(!0), this._fillColor = 16777215 & r, this._fillAlpha = (r >> 24 & 255) / 255, t.readBool()) for (this._cornerRadius = new Array(4), n = 0; n < 4; n++) this._cornerRadius[n] = t.readFloat()
        if (3 == this._type) for (o = t.readShort(), this._polygonPoints = [], this._polygonPoints.length = o, n = 0; n < o; n++) this._polygonPoints[n] = t.readFloat() else if (4 == this._type && (this._sides = t.readShort(), this._startAngle = t.readFloat(), (o = t.readShort()) > 0)) for (this._distances = [], n = 0; n < o; n++) this._distances[n] = t.readFloat()
        this.updateGraph()
      }
    }, i
  }(t.GObject)
  t.GGraph = e
}(fgui || (fgui = {})), function (t) {
  var e = function (e) {
    function i () {
      var t = e.call(this) || this
      return t._layout = 0, t._lineGap = 0, t._columnGap = 0, t._mainGridIndex = -1, t._mainGridMinSize = 50, t._mainChildIndex = -1, t._totalSize = 0, t._numChildren = 0, t._updating = 0, t
    }

    return __extends(i, e), i.prototype.dispose = function () {
      this._boundsChanged = !1, e.prototype.dispose.call(this)
    }, Object.defineProperty(i.prototype, 'layout', {
      get: function () {
        return this._layout
      }, set: function (t) {
        this._layout != t && (this._layout = t, this.setBoundsChangedFlag())
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'lineGap', {
      get: function () {
        return this._lineGap
      }, set: function (t) {
        this._lineGap != t && (this._lineGap = t, this.setBoundsChangedFlag(!0))
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'columnGap', {
      get: function () {
        return this._columnGap
      }, set: function (t) {
        this._columnGap != t && (this._columnGap = t, this.setBoundsChangedFlag(!0))
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'excludeInvisibles', {
      get: function () {
        return this._excludeInvisibles
      }, set: function (t) {
        this._excludeInvisibles != t && (this._excludeInvisibles = t, this.setBoundsChangedFlag())
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'autoSizeDisabled', {
      get: function () {
        return this._autoSizeDisabled
      }, set: function (t) {
        this._autoSizeDisabled = t
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'mainGridMinSize', {
      get: function () {
        return this._mainGridMinSize
      }, set: function (t) {
        this._mainGridMinSize != t && (this._mainGridMinSize = t, this.setBoundsChangedFlag())
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'mainGridIndex', {
      get: function () {
        return this._mainGridIndex
      }, set: function (t) {
        this._mainGridIndex != t && (this._mainGridIndex = t, this.setBoundsChangedFlag())
      }, enumerable: !0, configurable: !0
    }), i.prototype.setBoundsChangedFlag = function (e) {
      0 == this._updating && this._parent && (e || (this._percentReady = !1), this._boundsChanged || (this._boundsChanged = !0, this._layout != t.GroupLayoutType.None && t.GTimers.inst.callLater(this.ensureBoundsCorrect, this)))
    }, i.prototype.ensureSizeCorrect = function () {
      null != this._parent && this._boundsChanged && 0 != this._layout && (this._boundsChanged = !1, this._autoSizeDisabled ? this.resizeChildren(0, 0) : (this.handleLayout(), this.updateBounds()))
    }, i.prototype.ensureBoundsCorrect = function () {
      null != this._parent && this._boundsChanged && (this._boundsChanged = !1, 0 == this._layout ? this.updateBounds() : this._autoSizeDisabled ? this.resizeChildren(0, 0) : (this.handleLayout(), this.updateBounds()))
    }, i.prototype.updateBounds = function () {
      t.GTimers.inst.remove(this.ensureBoundsCorrect, this)
      var e, i, n, o = this._parent.numChildren, r = Number.POSITIVE_INFINITY, s = Number.POSITIVE_INFINITY,
        a = Number.NEGATIVE_INFINITY, h = Number.NEGATIVE_INFINITY, l = !0
      for (e = 0; e < o; e++) (i = this._parent.getChildAt(e)).group != this || this._excludeInvisibles && !i.internalVisible3 || ((n = i.xMin) < r && (r = n), (n = i.yMin) < s && (s = n), (n = i.xMin + i.width) > a && (a = n), (n = i.yMin + i.height) > h && (h = n), l = !1)
      var c = 0, u = 0
      l || (this._updating |= 1, this.setXY(r, s), this._updating &= 2, c = a - r, u = h - s), 0 == (2 & this._updating) ? (this._updating |= 2, this.setSize(c, u), this._updating &= 1) : (this._updating &= 1, this.resizeChildren(this._width - c, this._height - u))
    }, i.prototype.handleLayout = function () {
      var e, i, n
      if (this._updating |= 1, this._layout == t.GroupLayoutType.Horizontal) {
        var o = this.x
        for (n = this._parent.numChildren, i = 0; i < n; i++) (e = this._parent.getChildAt(i)).group == this && (this._excludeInvisibles && !e.internalVisible3 || (e.xMin = o, 0 != e.width && (o += e.width + this._columnGap)))
      } else if (this._layout == t.GroupLayoutType.Vertical) {
        var r = this.y
        for (n = this._parent.numChildren, i = 0; i < n; i++) (e = this._parent.getChildAt(i)).group == this && (this._excludeInvisibles && !e.internalVisible3 || (e.yMin = r, 0 != e.height && (r += e.height + this._lineGap)))
      }
      this._updating &= 2
    }, i.prototype.moveChildren = function (t, e) {
      if (0 == (1 & this._updating) && null != this._parent) {
        this._updating |= 1
        var i, n, o = this._parent.numChildren
        for (i = 0; i < o; i++) (n = this._parent.getChildAt(i)).group == this && n.setXY(n.x + t, n.y + e)
        this._updating &= 2
      }
    }, i.prototype.resizeChildren = function (e, i) {
      if (this._layout != t.GroupLayoutType.None && 0 == (2 & this._updating) && null != this._parent) {
        if (this._updating |= 2, !this._boundsChanged || (this._boundsChanged = !1, this._autoSizeDisabled)) {
          var n, o, r = this._parent.numChildren
          if (!this._percentReady) {
            this._percentReady = !0, this._numChildren = 0, this._totalSize = 0, this._mainChildIndex = -1
            var s = 0
            for (n = 0; n < r; n++) (o = this._parent.getChildAt(n)).group == this && (this._excludeInvisibles && !o.internalVisible3 || (s == this._mainGridIndex && (this._mainChildIndex = n), this._numChildren++, 1 == this._layout ? this._totalSize += o.width : this._totalSize += o.height), s++)
            for (-1 != this._mainChildIndex && (1 == this._layout ? (o = this._parent.getChildAt(this._mainChildIndex), this._totalSize += this._mainGridMinSize - o.width, o._sizePercentInGroup = this._mainGridMinSize / this._totalSize) : (o = this._parent.getChildAt(this._mainChildIndex), this._totalSize += this._mainGridMinSize - o.height, o._sizePercentInGroup = this._mainGridMinSize / this._totalSize)), n = 0; n < r; n++) (o = this._parent.getChildAt(n)).group == this && n != this._mainChildIndex && (this._totalSize > 0 ? o._sizePercentInGroup = (1 == this._layout ? o.width : o.height) / this._totalSize : o._sizePercentInGroup = 0)
          }
          var a = 0, h = 1, l = !1
          if (1 == this._layout) {
            a = this.width - (this._numChildren - 1) * this._columnGap, -1 != this._mainChildIndex && a >= this._totalSize && ((o = this._parent.getChildAt(this._mainChildIndex)).setSize(a - (this._totalSize - this._mainGridMinSize), o._rawHeight + i, !0), a -= o.width, h -= o._sizePercentInGroup, l = !0)
            var c = this.x
            for (n = 0; n < r; n++) (o = this._parent.getChildAt(n)).group == this && (!this._excludeInvisibles || o.internalVisible3 ? (l && n == this._mainChildIndex || (o.setSize(Math.round(o._sizePercentInGroup / h * a), o._rawHeight + i, !0), h -= o._sizePercentInGroup, a -= o.width), o.xMin = c, 0 != o.width && (c += o.width + this._columnGap)) : o.setSize(o._rawWidth, o._rawHeight + i, !0))
          } else {
            a = this.height - (this._numChildren - 1) * this._lineGap, -1 != this._mainChildIndex && a >= this._totalSize && ((o = this._parent.getChildAt(this._mainChildIndex)).setSize(o._rawWidth + e, a - (this._totalSize - this._mainGridMinSize), !0), a -= o.height, h -= o._sizePercentInGroup, l = !0)
            var u = this.y
            for (n = 0; n < r; n++) (o = this._parent.getChildAt(n)).group == this && (!this._excludeInvisibles || o.internalVisible3 ? (l && n == this._mainChildIndex || (o.setSize(o._rawWidth + e, Math.round(o._sizePercentInGroup / h * a), !0), h -= o._sizePercentInGroup, a -= o.height), o.yMin = u, 0 != o.height && (u += o.height + this._lineGap)) : o.setSize(o._rawWidth + e, o._rawHeight, !0))
          }
          this._updating &= 1
        } else {
          this.updateBounds()
        }
      }
    }, i.prototype.handleAlphaChanged = function () {
      if (!this._underConstruct) {
        for (var t = this._parent.numChildren, e = 0; e < t; e++) {
          var i = this._parent.getChildAt(e)
          i.group == this && (i.alpha = this.alpha)
        }
      }
    }, i.prototype.handleVisibleChanged = function () {
      if (this._parent) {
        for (var t = this._parent.numChildren, e = 0; e < t; e++) {
          var i = this._parent.getChildAt(e)
          i.group == this && i.handleVisibleChanged()
        }
      }
    }, i.prototype.setup_beforeAdd = function (t, i) {
      e.prototype.setup_beforeAdd.call(this, t, i), t.seek(i, 5), this._layout = t.readByte(), this._lineGap = t.readInt(), this._columnGap = t.readInt(), t.version >= 2 && (this._excludeInvisibles = t.readBool(), this._autoSizeDisabled = t.readBool(), this._mainChildIndex = t.readInt())
    }, i.prototype.setup_afterAdd = function (t, i) {
      e.prototype.setup_afterAdd.call(this, t, i), this.visible || this.handleVisibleChanged()
    }, i
  }(t.GObject)
  t.GGroup = e
}(fgui || (fgui = {})), function (t) {
  var e = function (e) {
    function i () {
      var i = e.call(this) || this
      return i._flip = t.FlipType.None, i
    }

    return __extends(i, e), Object.defineProperty(i.prototype, 'color', {
      get: function () {
        return this._content.color
      }, set: function (t) {
        this._content.color != t && (this._content.color = t, this.updateGear(4))
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'flip', {
      get: function () {
        return this._flip
      }, set: function (e) {
        if (this._flip != e) {
          this._flip = e
          var i = 1, n = 1
          this._flip != t.FlipType.Horizontal && this._flip != t.FlipType.Both || (i = -1), this._flip != t.FlipType.Vertical && this._flip != t.FlipType.Both || (n = -1), this._content.scaleX = i, this._content.scaleY = n, this.handleXYChanged()
        }
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'fillMethod', {
      get: function () {
        return this._content.fillMethod
      }, set: function (t) {
        this._content.fillMethod = t
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'fillOrigin', {
      get: function () {
        return this._content.fillOrigin
      }, set: function (t) {
        this._content.fillOrigin = t
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'fillClockwise', {
      get: function () {
        return this._content.fillClockwise
      }, set: function (t) {
        this._content.fillClockwise = t
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'fillAmount', {
      get: function () {
        return this._content.fillAmount
      }, set: function (t) {
        this._content.fillAmount = t
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'texture', {
      get: function () {
        return this._content.texture
      }, set: function (t) {
        t ? (this.sourceWidth = t.textureWidth, this.sourceHeight = t.textureHeight) : (this.sourceWidth = 0, this.sourceHeight = 0), this.initWidth = this.sourceWidth, this.initHeight = this.sourceHeight, this._content.scale9Grid = null, this._content.fillMode = egret.BitmapFillMode.SCALE, this._content.texture = t
      }, enumerable: !0, configurable: !0
    }), i.prototype.createDisplayObject = function () {
      this._content = new t.Image, this._content.touchEnabled = !1, this.setDisplayObject(this._content)
    }, i.prototype.constructFromResource = function () {
      var t = this.packageItem.getBranch()
      this.sourceWidth = t.width, this.sourceHeight = t.height, this.initWidth = this.sourceWidth, this.initHeight = this.sourceHeight, this.setSize(this.sourceWidth, this.sourceHeight), (t = t.getHighResolution()).load(), this._content.scale9Grid = t.scale9Grid, this._content.smoothing = t.smoothing, t.scaleByTile && (this._content.fillMode = egret.BitmapFillMode.REPEAT), this.setSize(this.sourceWidth, this.sourceHeight), this._content.texture = t.asset
    }, i.prototype.handleXYChanged = function () {
      e.prototype.handleXYChanged.call(this), this._flip != t.FlipType.None && (-1 == this._content.scaleX && (this._content.x += this.width), -1 == this._content.scaleY && (this._content.y += this.height))
    }, i.prototype.getProp = function (i) {
      return i == t.ObjectPropID.Color ? this.color : e.prototype.getProp.call(this, i)
    }, i.prototype.setProp = function (i, n) {
      i == t.ObjectPropID.Color ? this.color = n : e.prototype.setProp.call(this, i, n)
    }, i.prototype.setup_beforeAdd = function (t, i) {
      e.prototype.setup_beforeAdd.call(this, t, i), t.seek(i, 5), t.readBool() && (this.color = t.readColor()), this.flip = t.readByte(), this._content.fillMethod = t.readByte(), 0 != this._content.fillMethod && (this._content.fillOrigin = t.readByte(), this._content.fillClockwise = t.readBool(), this._content.fillAmount = t.readFloat())
    }, i
  }(t.GObject)
  t.GImage = e
}(fgui || (fgui = {})), function (t) {
  var e = function (e) {
    function i () {
      return e.call(this) || this
    }

    return __extends(i, e), Object.defineProperty(i.prototype, 'icon', {
      get: function () {
        if (this._iconObject) return this._iconObject.icon
      }, set: function (t) {
        this._iconObject && (this._iconObject.icon = t), this.updateGear(7)
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'title', {
      get: function () {
        return this._titleObject ? this._titleObject.text : null
      }, set: function (t) {
        this._titleObject && (this._titleObject.text = t), this.updateGear(6)
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'text', {
      get: function () {
        return this.title
      }, set: function (t) {
        this.title = t
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'titleColor', {
      get: function () {
        var t = this.getTextField()
        return t ? t.color : 0
      }, set: function (t) {
        var e = this.getTextField()
        e && (e.color = t), this.updateGear(4)
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'titleFontSize', {
      get: function () {
        var t = this.getTextField()
        return t ? t.fontSize : 0
      }, set: function (t) {
        var e = this.getTextField()
        e && (e.fontSize = t)
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'editable', {
      get: function () {
        return !!(this._titleObject && this._titleObject instanceof t.GTextInput) && this._titleObject.asTextInput.editable
      }, set: function (t) {
        this._titleObject && (this._titleObject.asTextInput.editable = t)
      }, enumerable: !0, configurable: !0
    }), i.prototype.getTextField = function () {
      return this._titleObject instanceof t.GTextField ? this._titleObject : this._titleObject instanceof i || this._titleObject instanceof t.GButton ? this._titleObject.getTextField() : null
    }, i.prototype.getProp = function (i) {
      switch (i) {
        case t.ObjectPropID.Color:
          return this.titleColor
        case t.ObjectPropID.OutlineColor:
          var n = this.getTextField()
          return n ? n.strokeColor : 0
        case t.ObjectPropID.FontSize:
          return this.titleFontSize
        default:
          return e.prototype.getProp.call(this, i)
      }
    }, i.prototype.setProp = function (i, n) {
      switch (i) {
        case t.ObjectPropID.Color:
          this.titleColor = n
          break
        case t.ObjectPropID.OutlineColor:
          var o = this.getTextField()
          o && (o.strokeColor = n)
          break
        case t.ObjectPropID.FontSize:
          this.titleFontSize = n
          break
        default:
          e.prototype.setProp.call(this, i, n)
      }
    }, i.prototype.constructExtension = function (t) {
      this._titleObject = this.getChild('title'), this._iconObject = this.getChild('icon')
    }, i.prototype.setup_afterAdd = function (i, n) {
      if (e.prototype.setup_afterAdd.call(this, i, n), i.seek(n, 6) && i.readByte() == this.packageItem.objectType) {
        var o
        null != (o = i.readS()) && (this.title = o), null != (o = i.readS()) && (this.icon = o), i.readBool() && (this.titleColor = i.readColor())
        var r = i.readInt()
        if (0 != r && (this.titleFontSize = r), i.readBool()) {
          var s = this.getTextField()
          s instanceof t.GTextInput ? (null != (o = i.readS()) && (s.promptText = o), null != (o = i.readS()) && (s.restrict = o), 0 != (r = i.readInt()) && (s.maxLength = r), r = i.readInt(), i.readBool() && (s.password = !0)) : i.skip(13)
        }
      }
    }, i
  }(t.GComponent)
  t.GLabel = e
}(fgui || (fgui = {})), function (t) {
  var e = function (e) {
    function n () {
      var i = e.call(this) || this
      return i.scrollItemToViewOnClick = !0, i.foldInvisibleItems = !1, i._lineCount = 0, i._columnCount = 0, i._lineGap = 0, i._columnGap = 0, i._lastSelectedIndex = 0, i._numItems = 0, i._realNumItems = 0, i._firstIndex = 0, i._curLineItemCount = 0, i._curLineItemCount2 = 0, i._virtualListChanged = 0, i.itemInfoVer = 0, i._trackBounds = !0, i._pool = new t.GObjectPool, i._layout = t.ListLayoutType.SingleColumn, i._autoResizeItem = !0, i._lastSelectedIndex = -1, i._selectionMode = t.ListSelectionMode.Single, i.opaque = !0, i._align = t.AlignType.Left, i._verticalAlign = t.VertAlignType.Top, i._container = new egret.DisplayObjectContainer, i._rootContainer.addChild(i._container), i
    }

    return __extends(n, e), n.prototype.dispose = function () {
      this._pool.clear(), e.prototype.dispose.call(this)
    }, Object.defineProperty(n.prototype, 'layout', {
      get: function () {
        return this._layout
      }, set: function (t) {
        this._layout != t && (this._layout = t, this.setBoundsChangedFlag(), this._virtual && this.setVirtualListChangedFlag(!0))
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(n.prototype, 'lineCount', {
      get: function () {
        return this._lineCount
      }, set: function (t) {
        this._lineCount != t && (this._lineCount = t, this.setBoundsChangedFlag(), this._virtual && this.setVirtualListChangedFlag(!0))
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(n.prototype, 'columnCount', {
      get: function () {
        return this._columnCount
      }, set: function (t) {
        this._columnCount != t && (this._columnCount = t, this.setBoundsChangedFlag(), this._virtual && this.setVirtualListChangedFlag(!0))
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(n.prototype, 'lineGap', {
      get: function () {
        return this._lineGap
      }, set: function (t) {
        this._lineGap != t && (this._lineGap = t, this.setBoundsChangedFlag(), this._virtual && this.setVirtualListChangedFlag(!0))
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(n.prototype, 'columnGap', {
      get: function () {
        return this._columnGap
      }, set: function (t) {
        this._columnGap != t && (this._columnGap = t, this.setBoundsChangedFlag(), this._virtual && this.setVirtualListChangedFlag(!0))
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(n.prototype, 'align', {
      get: function () {
        return this._align
      }, set: function (t) {
        this._align != t && (this._align = t, this.setBoundsChangedFlag(), this._virtual && this.setVirtualListChangedFlag(!0))
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(n.prototype, 'verticalAlign', {
      get: function () {
        return this._verticalAlign
      }, set: function (t) {
        this._verticalAlign != t && (this._verticalAlign = t, this.setBoundsChangedFlag(), this._virtual && this.setVirtualListChangedFlag(!0))
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(n.prototype, 'virtualItemSize', {
      get: function () {
        return this._itemSize
      }, set: function (t) {
        this._virtual && (this._itemSize || (this._itemSize = new egret.Point), this._itemSize.copyFrom(t), this.setVirtualListChangedFlag(!0))
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(n.prototype, 'defaultItem', {
      get: function () {
        return this._defaultItem
      }, set: function (t) {
        this._defaultItem = t
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(n.prototype, 'autoResizeItem', {
      get: function () {
        return this._autoResizeItem
      }, set: function (t) {
        this._autoResizeItem != t && (this._autoResizeItem = t, this.setBoundsChangedFlag(), this._virtual && this.setVirtualListChangedFlag(!0))
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(n.prototype, 'selectionMode', {
      get: function () {
        return this._selectionMode
      }, set: function (t) {
        this._selectionMode = t
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(n.prototype, 'selectionController', {
      get: function () {
        return this._selectionController
      }, set: function (t) {
        this._selectionController = t
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(n.prototype, 'itemPool', {
      get: function () {
        return this._pool
      }, enumerable: !0, configurable: !0
    }), n.prototype.getFromPool = function (t) {
      t || (t = this._defaultItem)
      var e = this._pool.getObject(t)
      return e && (e.visible = !0), e
    }, n.prototype.returnToPool = function (t) {
      t.displayObject.cacheAsBitmap = !1, this._pool.returnObject(t)
    }, n.prototype.addChildAt = function (i, n) {
      return e.prototype.addChildAt.call(this, i, n), i instanceof t.GButton && (i.selected = !1, i.changeStateOnClick = !1), i.addEventListener(egret.TouchEvent.TOUCH_TAP, this.__clickItem, this), i
    }, n.prototype.addItem = function (e) {
      return e || (e = this._defaultItem), this.addChild(t.UIPackage.createObjectFromURL(e))
    }, n.prototype.addItemFromPool = function (t) {
      return this.addChild(this.getFromPool(t))
    }, n.prototype.removeChildAt = function (t, i) {
      var n = e.prototype.removeChildAt.call(this, t, i)
      return n.removeEventListener(egret.TouchEvent.TOUCH_TAP, this.__clickItem, this), n
    }, n.prototype.removeChildToPoolAt = function (t) {
      var i = e.prototype.removeChildAt.call(this, t)
      this.returnToPool(i)
    }, n.prototype.removeChildToPool = function (t) {
      e.prototype.removeChild.call(this, t), this.returnToPool(t)
    }, n.prototype.removeChildrenToPool = function (t, e) {
      null == t && (t = 0), null == e && (e = -1), (e < 0 || e >= this._children.length) && (e = this._children.length - 1)
      for (var i = t; i <= e; ++i) this.removeChildToPoolAt(t)
    }, Object.defineProperty(n.prototype, 'selectedIndex', {
      get: function () {
        var e
        if (this._virtual) {
          for (e = 0; e < this._realNumItems; e++) {
            var i = this._virtualItems[e]
            if (i.obj instanceof t.GButton && i.obj.selected || null == i.obj && i.selected) return this._loop ? e % this._numItems : e
          }
        } else {
          var n = this._children.length
          for (e = 0; e < n; e++) {
            var o = this._children[e]
            if (o instanceof t.GButton && o.selected) return e
          }
        }
        return -1
      }, set: function (e) {
        e >= 0 && e < this.numItems ? (this._selectionMode != t.ListSelectionMode.Single && this.clearSelection(), this.addSelection(e)) : this.clearSelection()
      }, enumerable: !0, configurable: !0
    }), n.prototype.getSelection = function (e) {
      var i
      if (e || (e = new Array), this._virtual) {
        for (i = 0; i < this._realNumItems; i++) {
          var n = this._virtualItems[i]
          if (n.obj instanceof t.GButton && n.obj.selected || null == n.obj && n.selected) {
            var o = i
            if (this._loop && (o = i % this._numItems, -1 != e.indexOf(o))) continue
            e.push(o)
          }
        }
      } else {
        var r = this._children.length
        for (i = 0; i < r; i++) {
          var s = this._children[i]
          s instanceof t.GButton && s.selected && e.push(i)
        }
      }
      return e
    }, n.prototype.addSelection = function (e, i) {
      if (this._selectionMode != t.ListSelectionMode.None) {
        var n
        if (this.checkVirtualList(), this._selectionMode == t.ListSelectionMode.Single && this.clearSelection(), i && this.scrollToView(e), this._lastSelectedIndex = e, this._virtual) {
          var o = this._virtualItems[e]
          o.obj && (n = o.obj), o.selected = !0
        } else {
          n = this.getChildAt(e)
        }
        n instanceof t.GButton && !n.selected && (n.selected = !0, this.updateSelectionController(e))
      }
    }, n.prototype.removeSelection = function (e) {
      if (this._selectionMode != t.ListSelectionMode.None) {
        var i
        if (this._virtual) {
          var n = this._virtualItems[e]
          n.obj && (i = n.obj), n.selected = !1
        } else {
          i = this.getChildAt(e)
        }
        i instanceof t.GButton && (i.selected = !1)
      }
    }, n.prototype.clearSelection = function () {
      var e
      if (this._virtual) {
        for (e = 0; e < this._realNumItems; e++) {
          var i = this._virtualItems[e]
          i.obj instanceof t.GButton && (i.obj.selected = !1), i.selected = !1
        }
      } else {
        var n = this._children.length
        for (e = 0; e < n; e++) {
          var o = this._children[e]
          o instanceof t.GButton && (o.selected = !1)
        }
      }
    }, n.prototype.clearSelectionExcept = function (e) {
      var i
      if (this._virtual) {
        for (i = 0; i < this._realNumItems; i++) {
          var n = this._virtualItems[i]
          n.obj != e && (n.obj instanceof t.GButton && (n.obj.selected = !1), n.selected = !1)
        }
      } else {
        var o = this._children.length
        for (i = 0; i < o; i++) {
          var r = this._children[i]
          r instanceof t.GButton && r != e && (r.selected = !1)
        }
      }
    }, n.prototype.selectAll = function () {
      this.checkVirtualList()
      var e, i = -1
      if (this._virtual) {
        for (e = 0; e < this._realNumItems; e++) {
          var n = this._virtualItems[e]
          n.obj instanceof t.GButton && !n.obj.selected && (n.obj.selected = !0, i = e), n.selected = !0
        }
      } else {
        var o = this._children.length
        for (e = 0; e < o; e++) {
          var r = this._children[e]
          r instanceof t.GButton && !r.selected && (r.selected = !0, i = e)
        }
      }
      -1 != i && this.updateSelectionController(i)
    }, n.prototype.selectNone = function () {
      this.clearSelection()
    }, n.prototype.selectReverse = function () {
      this.checkVirtualList()
      var e, i = -1
      if (this._virtual) {
        for (e = 0; e < this._realNumItems; e++) {
          var n = this._virtualItems[e]
          n.obj instanceof t.GButton && (n.obj.selected = !n.obj.selected, n.obj.selected && (i = e)), n.selected = !n.selected
        }
      } else {
        var o = this._children.length
        for (e = 0; e < o; e++) {
          var r = this._children[e]
          r instanceof t.GButton && (r.selected = !r.selected, r.selected && (i = e))
        }
      }
      -1 != i && this.updateSelectionController(i)
    }, n.prototype.handleArrowKey = function (e) {
      var i = this.selectedIndex
      if (-1 != i) {
        switch (e) {
          case 1:
            if (this._layout == t.ListLayoutType.SingleColumn || this._layout == t.ListLayoutType.FlowVertical) {
              --i >= 0 && (this.clearSelection(), this.addSelection(i, !0))
            } else if (this._layout == t.ListLayoutType.FlowHorizontal || this._layout == t.ListLayoutType.Pagination) {
              for (var n = this._children[i], o = 0, r = i - 1; r >= 0; r--) {
                var s = this._children[r]
                if (s.y != n.y) {
                  n = s
                  break
                }
                o++
              }
              for (; r >= 0; r--) {
                if ((s = this._children[r]).y != n.y) {
                  this.clearSelection(), this.addSelection(r + o + 1, !0)
                  break
                }
              }
            }
            break
          case 3:
            if (this._layout == t.ListLayoutType.SingleRow || this._layout == t.ListLayoutType.FlowHorizontal || this._layout == t.ListLayoutType.Pagination) {
              ++i < this._children.length && (this.clearSelection(), this.addSelection(i, !0))
            } else if (this._layout == t.ListLayoutType.FlowVertical) {
              n = this._children[i], o = 0
              var a = this._children.length
              for (r = i + 1; r < a; r++) {
                if ((s = this._children[r]).x != n.x) {
                  n = s
                  break
                }
                o++
              }
              for (; r < a; r++) {
                if ((s = this._children[r]).x != n.x) {
                  this.clearSelection(), this.addSelection(r - o - 1, !0)
                  break
                }
              }
            }
            break
          case 5:
            if (this._layout == t.ListLayoutType.SingleColumn || this._layout == t.ListLayoutType.FlowVertical) {
              ++i < this._children.length && (this.clearSelection(), this.addSelection(i, !0))
            } else if (this._layout == t.ListLayoutType.FlowHorizontal || this._layout == t.ListLayoutType.Pagination) {
              for (n = this._children[i], o = 0, a = this._children.length, r = i + 1; r < a; r++) {
                if ((s = this._children[r]).y != n.y) {
                  n = s
                  break
                }
                o++
              }
              for (; r < a; r++) {
                if ((s = this._children[r]).y != n.y) {
                  this.clearSelection(), this.addSelection(r - o - 1, !0)
                  break
                }
              }
            }
            break
          case 7:
            if (this._layout == t.ListLayoutType.SingleRow || this._layout == t.ListLayoutType.FlowHorizontal || this._layout == t.ListLayoutType.Pagination) {
              --i >= 0 && (this.clearSelection(), this.addSelection(i, !0))
            } else if (this._layout == t.ListLayoutType.FlowVertical) {
              for (n = this._children[i], o = 0, r = i - 1; r >= 0; r--) {
                if ((s = this._children[r]).x != n.x) {
                  n = s
                  break
                }
                o++
              }
              for (; r >= 0; r--) {
                if ((s = this._children[r]).x != n.x) {
                  this.clearSelection(), this.addSelection(r + o + 1, !0)
                  break
                }
              }
            }
        }
      }
    }, n.prototype.__clickItem = function (e) {
      if (!this._scrollPane || !this._scrollPane.isDragged) {
        var i = e.currentTarget
        this.setSelectionOnEvent(i), this._scrollPane && this.scrollItemToViewOnClick && this._scrollPane.scrollToView(i, !0)
        var n = new t.ItemEvent(t.ItemEvent.CLICK, i)
        n.stageX = e.stageX, n.stageY = e.stageY, this.dispatchItemEvent(n)
      }
    }, n.prototype.dispatchItemEvent = function (t) {
      this.dispatchEvent(t)
    }, n.prototype.setSelectionOnEvent = function (e) {
      if (e instanceof t.GButton && this._selectionMode != t.ListSelectionMode.None) {
        var i = !1, n = this.childIndexToItemIndex(this.getChildIndex(e))
        if (this._selectionMode == t.ListSelectionMode.Single) {
          e.selected || (this.clearSelectionExcept(e), e.selected = !0)
        } else if (t.GRoot.shiftKeyDown) {
          if (!e.selected) {
            if (-1 != this._lastSelectedIndex) {
              var o, r = Math.min(this._lastSelectedIndex, n), s = Math.max(this._lastSelectedIndex, n)
              if (s = Math.min(s, this.numItems - 1), this._virtual) {
                for (o = r; o <= s; o++) {
                  var a = this._virtualItems[o]
                  a.obj instanceof t.GButton && (a.obj.selected = !0), a.selected = !0
                }
              } else {
                for (o = r; o <= s; o++) {
                  var h = this.getChildAt(o)
                  h instanceof t.GButton && (h.selected = !0)
                }
              }
              i = !0
            } else {
              e.selected = !0
            }
          }
        } else {
          t.GRoot.ctrlKeyDown || this._selectionMode == t.ListSelectionMode.Multiple_SingleClick ? e.selected = !e.selected : e.selected ? this.clearSelectionExcept(e) : (this.clearSelectionExcept(e), e.selected = !0)
        }
        i || (this._lastSelectedIndex = n), e.selected && this.updateSelectionController(n)
      }
    }, n.prototype.resizeToFit = function (e, i) {
      void 0 === e && (e = Number.POSITIVE_INFINITY), void 0 === i && (i = 0), this.ensureBoundsCorrect()
      var n = this.numItems
      if (e > n && (e = n), this._virtual) {
        var o = Math.ceil(e / this._curLineItemCount)
        this._layout == t.ListLayoutType.SingleColumn || this._layout == t.ListLayoutType.FlowHorizontal ? this.viewHeight = o * this._itemSize.y + Math.max(0, o - 1) * this._lineGap : this.viewWidth = o * this._itemSize.x + Math.max(0, o - 1) * this._columnGap
      } else if (0 == e) {
        this._layout == t.ListLayoutType.SingleColumn || this._layout == t.ListLayoutType.FlowHorizontal ? this.viewHeight = i : this.viewWidth = i
      } else {
        for (var r, s = e - 1; s >= 0 && (r = this.getChildAt(s), this.foldInvisibleItems && !r.visible);) s--
        if (s < 0) {
          this._layout == t.ListLayoutType.SingleColumn || this._layout == t.ListLayoutType.FlowHorizontal ? this.viewHeight = i : this.viewWidth = i
        } else {
          var a = 0
          this._layout == t.ListLayoutType.SingleColumn || this._layout == t.ListLayoutType.FlowHorizontal ? ((a = r.y + r.height) < i && (a = i), this.viewHeight = a) : ((a = r.x + r.width) < i && (a = i), this.viewWidth = a)
        }
      }
    }, n.prototype.getMaxItemWidth = function () {
      for (var t = this._children.length, e = 0, i = 0; i < t; i++) {
        var n = this.getChildAt(i)
        n.width > e && (e = n.width)
      }
      return e
    }, n.prototype.handleSizeChanged = function () {
      e.prototype.handleSizeChanged.call(this), this.setBoundsChangedFlag(), this._virtual && this.setVirtualListChangedFlag(!0)
    }, n.prototype.handleControllerChanged = function (t) {
      e.prototype.handleControllerChanged.call(this, t), this._selectionController == t && (this.selectedIndex = t.selectedIndex)
    }, n.prototype.updateSelectionController = function (t) {
      if (this._selectionController && !this._selectionController.changing && t < this._selectionController.pageCount) {
        var e = this._selectionController
        this._selectionController = null, e.selectedIndex = t, this._selectionController = e
      }
    }, n.prototype.getSnappingPosition = function (n, o, r) {
      var s, a
      return this._virtual ? (r || (r = new egret.Point), this._layout == t.ListLayoutType.SingleColumn || this._layout == t.ListLayoutType.FlowHorizontal ? (s = o, i = o, a = this.getIndexOnPos1(!1), o = i, a < this._virtualItems.length && s - o > this._virtualItems[a].height / 2 && a < this._realNumItems && (o += this._virtualItems[a].height + this._lineGap)) : this._layout == t.ListLayoutType.SingleRow || this._layout == t.ListLayoutType.FlowVertical ? (s = n, i = n, a = this.getIndexOnPos2(!1), n = i, a < this._virtualItems.length && s - n > this._virtualItems[a].width / 2 && a < this._realNumItems && (n += this._virtualItems[a].width + this._columnGap)) : (s = n, i = n, a = this.getIndexOnPos3(!1), n = i, a < this._virtualItems.length && s - n > this._virtualItems[a].width / 2 && a < this._realNumItems && (n += this._virtualItems[a].width + this._columnGap)), r.x = n, r.y = o, r) : e.prototype.getSnappingPosition.call(this, n, o, r)
    }, n.prototype.scrollToView = function (e, i, n) {
      if (this._virtual) {
        if (0 == this._numItems) return
        if (this.checkVirtualList(), e >= this._virtualItems.length) throw 'Invalid child index: ' + e + '>' + this._virtualItems.length
        var o
        this._loop && (e = Math.floor(this._firstIndex / this._numItems) * this._numItems + e)
        var r, s = this._virtualItems[e], a = 0
        if (this._layout == t.ListLayoutType.SingleColumn || this._layout == t.ListLayoutType.FlowHorizontal) {
          for (r = this._curLineItemCount - 1; r < e; r += this._curLineItemCount) a += this._virtualItems[r].height + this._lineGap
          o = new egret.Rectangle(0, a, this._itemSize.x, s.height)
        } else if (this._layout == t.ListLayoutType.SingleRow || this._layout == t.ListLayoutType.FlowVertical) {
          for (r = this._curLineItemCount - 1; r < e; r += this._curLineItemCount) a += this._virtualItems[r].width + this._columnGap
          o = new egret.Rectangle(a, 0, s.width, this._itemSize.y)
        } else {
          var h = e / (this._curLineItemCount * this._curLineItemCount2)
          o = new egret.Rectangle(h * this.viewWidth + e % this._curLineItemCount * (s.width + this._columnGap), e / this._curLineItemCount % this._curLineItemCount2 * (s.height + this._lineGap), s.width, s.height)
        }
        this._scrollPane && this._scrollPane.scrollToView(o, i, n)
      } else {
        var l = this.getChildAt(e)
        l && (this._scrollPane ? this._scrollPane.scrollToView(l, i, n) : this.parent && this.parent.scrollPane && this.parent.scrollPane.scrollToView(l, i, n))
      }
    }, n.prototype.getFirstChildInView = function () {
      return this.childIndexToItemIndex(e.prototype.getFirstChildInView.call(this))
    }, n.prototype.childIndexToItemIndex = function (e) {
      if (!this._virtual) return e
      if (this._layout == t.ListLayoutType.Pagination) {
        for (var i = this._firstIndex; i < this._realNumItems; i++) if (this._virtualItems[i].obj && --e < 0) return i
        return e
      }
      return e += this._firstIndex, this._loop && this._numItems > 0 && (e %= this._numItems), e
    }, n.prototype.itemIndexToChildIndex = function (e) {
      if (!this._virtual) return e
      if (this._layout == t.ListLayoutType.Pagination) return this.getChildIndex(this._virtualItems[e].obj)
      if (this._loop && this._numItems > 0) {
        var i = this._firstIndex % this._numItems
        e >= i ? e -= i : e = this._numItems - i + e
      } else {
        e -= this._firstIndex
      }
      return e
    }, n.prototype.setVirtual = function () {
      this._setVirtual(!1)
    }, n.prototype.setVirtualAndLoop = function () {
      this._setVirtual(!0)
    }, n.prototype._setVirtual = function (e) {
      if (!this._virtual) {
        if (null == this._scrollPane) throw 'Virtual list must be scrollable!'
        if (e) {
          if (this._layout == t.ListLayoutType.FlowHorizontal || this._layout == t.ListLayoutType.FlowVertical) throw 'Loop list is not supported for FlowHorizontal or FlowVertical layout!'
          this._scrollPane.bouncebackEffect = !1
        }
        if (this._virtual = !0, this._loop = e, this._virtualItems = new Array, this.removeChildrenToPool(), null == this._itemSize) {
          this._itemSize = new egret.Point
          var i = this.getFromPool(null)
          if (null == i) throw 'Virtual List must have a default list item resource.'
          this._itemSize.x = i.width, this._itemSize.y = i.height, this.returnToPool(i)
        }
        this._layout == t.ListLayoutType.SingleColumn || this._layout == t.ListLayoutType.FlowHorizontal ? (this._scrollPane.scrollStep = this._itemSize.y, this._loop && (this._scrollPane._loop = 2)) : (this._scrollPane.scrollStep = this._itemSize.x, this._loop && (this._scrollPane._loop = 1)), this._scrollPane.addEventListener(t.ScrollPane.SCROLL, this.__scrolled, this), this.setVirtualListChangedFlag(!0)
      }
    }, Object.defineProperty(n.prototype, 'numItems', {
      get: function () {
        return this._virtual ? this._numItems : this._children.length
      }, set: function (e) {
        if (this._virtual) {
          if (null == this.itemRenderer) throw 'Set itemRenderer first!'
          this._numItems = e, this._loop ? this._realNumItems = 6 * this._numItems : this._realNumItems = this._numItems
          var i = this._virtualItems.length
          if (this._realNumItems > i) {
            for (r = i; r < this._realNumItems; r++) {
              var n = {width: this._itemSize.x, height: this._itemSize.y, updateFlag: 0}
              this._virtualItems.push(n)
            }
          } else {
            for (r = this._realNumItems; r < i; r++) this._virtualItems[r].selected = !1
          }
          0 != this._virtualListChanged && t.GTimers.inst.remove(this._refreshVirtualList, this), this._refreshVirtualList()
        } else {
          var o = this._children.length
          if (e > o) for (var r = o; r < e; r++) null == this.itemProvider ? this.addItemFromPool() : this.addItemFromPool(this.itemProvider.call(this.callbackThisObj, r)) else this.removeChildrenToPool(e, o)
          if (null != this.itemRenderer) for (r = 0; r < e; r++) this.itemRenderer.call(this.callbackThisObj, r, this.getChildAt(r))
        }
      }, enumerable: !0, configurable: !0
    }), n.prototype.refreshVirtualList = function () {
      this.setVirtualListChangedFlag(!1)
    }, n.prototype.checkVirtualList = function () {
      0 != this._virtualListChanged && (this._refreshVirtualList(), t.GTimers.inst.remove(this._refreshVirtualList, this))
    }, n.prototype.setVirtualListChangedFlag = function (e) {
      e ? this._virtualListChanged = 2 : 0 == this._virtualListChanged && (this._virtualListChanged = 1), t.GTimers.inst.callLater(this._refreshVirtualList, this)
    }, n.prototype._refreshVirtualList = function () {
      var e = 2 == this._virtualListChanged
      this._virtualListChanged = 0, this._eventLocked = !0, e && (this._layout == t.ListLayoutType.SingleColumn || this._layout == t.ListLayoutType.SingleRow ? this._curLineItemCount = 1 : this._layout == t.ListLayoutType.FlowHorizontal ? this._columnCount > 0 ? this._curLineItemCount = this._columnCount : (this._curLineItemCount = Math.floor((this._scrollPane.viewWidth + this._columnGap) / (this._itemSize.x + this._columnGap)), this._curLineItemCount <= 0 && (this._curLineItemCount = 1)) : this._layout == t.ListLayoutType.FlowVertical ? this._lineCount > 0 ? this._curLineItemCount = this._lineCount : (this._curLineItemCount = Math.floor((this._scrollPane.viewHeight + this._lineGap) / (this._itemSize.y + this._lineGap)), this._curLineItemCount <= 0 && (this._curLineItemCount = 1)) : (this._columnCount > 0 ? this._curLineItemCount = this._columnCount : (this._curLineItemCount = Math.floor((this._scrollPane.viewWidth + this._columnGap) / (this._itemSize.x + this._columnGap)), this._curLineItemCount <= 0 && (this._curLineItemCount = 1)), this._lineCount > 0 ? this._curLineItemCount2 = this._lineCount : (this._curLineItemCount2 = Math.floor((this._scrollPane.viewHeight + this._lineGap) / (this._itemSize.y + this._lineGap)), this._curLineItemCount2 <= 0 && (this._curLineItemCount2 = 1))))
      var i = 0, n = 0
      if (this._realNumItems > 0) {
        var o, r = Math.ceil(this._realNumItems / this._curLineItemCount) * this._curLineItemCount,
          s = Math.min(this._curLineItemCount, this._realNumItems)
        if (this._layout == t.ListLayoutType.SingleColumn || this._layout == t.ListLayoutType.FlowHorizontal) {
          for (o = 0; o < r; o += this._curLineItemCount) i += this._virtualItems[o].height + this._lineGap
          if (i > 0 && (i -= this._lineGap), this._autoResizeItem) {
            n = this._scrollPane.viewWidth
          } else {
            for (o = 0; o < s; o++) n += this._virtualItems[o].width + this._columnGap
            n > 0 && (n -= this._columnGap)
          }
        } else if (this._layout == t.ListLayoutType.SingleRow || this._layout == t.ListLayoutType.FlowVertical) {
          for (o = 0; o < r; o += this._curLineItemCount) n += this._virtualItems[o].width + this._columnGap
          if (n > 0 && (n -= this._columnGap), this._autoResizeItem) {
            i = this._scrollPane.viewHeight
          } else {
            for (o = 0; o < s; o++) i += this._virtualItems[o].height + this._lineGap
            i > 0 && (i -= this._lineGap)
          }
        } else {
          n = Math.ceil(r / (this._curLineItemCount * this._curLineItemCount2)) * this.viewWidth, i = this.viewHeight
        }
      }
      this.handleAlign(n, i), this._scrollPane.setContentSize(n, i), this._eventLocked = !1, this.handleScroll(!0)
    }, n.prototype.__scrolled = function (t) {
      this.handleScroll(!1)
    }, n.prototype.getIndexOnPos1 = function (t) {
      if (this._realNumItems < this._curLineItemCount) return i = 0, 0
      var e, n, o
      if (this.numChildren > 0 && !t) {
        if ((n = this.getChildAt(0).y) > i) {
          for (e = this._firstIndex - this._curLineItemCount; e >= 0; e -= this._curLineItemCount) if ((n -= this._virtualItems[e].height + this._lineGap) <= i) return i = n, e
          return i = 0, 0
        }
        for (e = this._firstIndex; e < this._realNumItems; e += this._curLineItemCount) {
          if ((o = n + this._virtualItems[e].height + this._lineGap) > i) return i = n, e
          n = o
        }
        return i = n, this._realNumItems - this._curLineItemCount
      }
      for (n = 0, e = 0; e < this._realNumItems; e += this._curLineItemCount) {
        if ((o = n + this._virtualItems[e].height + this._lineGap) > i) return i = n, e
        n = o
      }
      return i = n, this._realNumItems - this._curLineItemCount
    }, n.prototype.getIndexOnPos2 = function (t) {
      if (this._realNumItems < this._curLineItemCount) return i = 0, 0
      var e, n, o
      if (this.numChildren > 0 && !t) {
        if ((n = this.getChildAt(0).x) > i) {
          for (e = this._firstIndex - this._curLineItemCount; e >= 0; e -= this._curLineItemCount) if ((n -= this._virtualItems[e].width + this._columnGap) <= i) return i = n, e
          return i = 0, 0
        }
        for (e = this._firstIndex; e < this._realNumItems; e += this._curLineItemCount) {
          if ((o = n + this._virtualItems[e].width + this._columnGap) > i) return i = n, e
          n = o
        }
        return i = n, this._realNumItems - this._curLineItemCount
      }
      for (n = 0, e = 0; e < this._realNumItems; e += this._curLineItemCount) {
        if ((o = n + this._virtualItems[e].width + this._columnGap) > i) return i = n, e
        n = o
      }
      return i = n, this._realNumItems - this._curLineItemCount
    }, n.prototype.getIndexOnPos3 = function (t) {
      if (this._realNumItems < this._curLineItemCount) return i = 0, 0
      var e, n, o = this.viewWidth, r = Math.floor(i / o), s = r * (this._curLineItemCount * this._curLineItemCount2),
        a = r * o
      for (e = 0; e < this._curLineItemCount; e++) {
        if ((n = a + this._virtualItems[s + e].width + this._columnGap) > i) return i = a, s + e
        a = n
      }
      return i = a, s + this._curLineItemCount - 1
    }, n.prototype.handleScroll = function (e) {
      if (!this._eventLocked) {
        if (this._layout == t.ListLayoutType.SingleColumn || this._layout == t.ListLayoutType.FlowHorizontal) {
          for (var i = 0; this.handleScroll1(e);) {
            if (e = !1, ++i > 20) {
              console.log('FairyGUI: list will never be filled as the item renderer function always returns a different size.')
              break
            }
          }
          this.handleArchOrder1()
        } else if (this._layout == t.ListLayoutType.SingleRow || this._layout == t.ListLayoutType.FlowVertical) {
          for (i = 0; this.handleScroll2(e);) {
            if (e = !1, ++i > 20) {
              console.log('FairyGUI: list will never be filled as the item renderer function always returns a different size.')
              break
            }
          }
          this.handleArchOrder2()
        } else {
          this.handleScroll3(e)
        }
        this._boundsChanged = !1
      }
    }, n.prototype.handleScroll1 = function (e) {
      var n = this._scrollPane.scrollingPosY, o = n + this._scrollPane.viewHeight,
        r = o == this._scrollPane.contentHeight
      i = n
      var s = this.getIndexOnPos1(e)
      if (n = i, s == this._firstIndex && !e) return !1
      var a = this._firstIndex
      this._firstIndex = s
      var h, l, c, u, _, p = s, d = a > s, g = this.numChildren, f = a + g - 1, y = d ? f : a, m = 0, b = n, v = 0,
        w = 0, C = this.defaultItem,
        S = (this._scrollPane.viewWidth - this._columnGap * (this._curLineItemCount - 1)) / this._curLineItemCount
      for (this.itemInfoVer++; p < this._realNumItems && (r || b < o);) {
        if ((null == (l = this._virtualItems[p]).obj || e) && (null != this.itemProvider && (null == (C = this.itemProvider.call(this.callbackThisObj, p % this._numItems)) && (C = this._defaultItem), C = t.UIPackage.normalizeURL(C)), l.obj && l.obj.resourceURL != C && (l.obj instanceof t.GButton && (l.selected = l.obj.selected), this.removeChildToPool(l.obj), l.obj = null)), null == l.obj) {
          if (d) {
            for (_ = y; _ >= a; _--) {
              if ((c = this._virtualItems[_]).obj && c.updateFlag != this.itemInfoVer && c.obj.resourceURL == C) {
                c.obj instanceof t.GButton && (c.selected = c.obj.selected), l.obj = c.obj, c.obj = null, _ == y && y--
                break
              }
            }
          } else {
            for (_ = y; _ <= f; _++) {
              if ((c = this._virtualItems[_]).obj && c.updateFlag != this.itemInfoVer && c.obj.resourceURL == C) {
                c.obj instanceof t.GButton && (c.selected = c.obj.selected), l.obj = c.obj, c.obj = null, _ == y && y++
                break
              }
            }
          }
          l.obj ? this.setChildIndex(l.obj, d ? p - s : this.numChildren) : (l.obj = this._pool.getObject(C), d ? this.addChildAt(l.obj, p - s) : this.addChild(l.obj)), l.obj instanceof t.GButton && (l.obj.selected = l.selected), h = !0
        } else {
          h = e
        }
        h && (this._autoResizeItem && (this._layout == t.ListLayoutType.SingleColumn || this._columnCount > 0) && l.obj.setSize(S, l.obj.height, !0), this.itemRenderer.call(this.callbackThisObj, p % this._numItems, l.obj), p % this._curLineItemCount == 0 && (v += Math.ceil(l.obj.height) - l.height, p == s && a > s && (w = Math.ceil(l.obj.height) - l.height)), l.width = Math.ceil(l.obj.width), l.height = Math.ceil(l.obj.height)), l.updateFlag = this.itemInfoVer, l.obj.setXY(m, b), p == s && (o += l.height), m += l.width + this._columnGap, p % this._curLineItemCount == this._curLineItemCount - 1 && (m = 0, b += l.height + this._lineGap), p++
      }
      for (u = 0; u < g; u++) (l = this._virtualItems[a + u]).updateFlag != this.itemInfoVer && l.obj && (l.obj instanceof t.GButton && (l.selected = l.obj.selected), this.removeChildToPool(l.obj), l.obj = null)
      for (g = this._children.length, u = 0; u < g; u++) {
        var x = this._virtualItems[s + u].obj
        this._children[u] != x && this.setChildIndex(x, u)
      }
      return 0 == v && 0 == w || this._scrollPane.changeContentSizeOnScrolling(0, v, 0, w), p > 0 && this.numChildren > 0 && this._container.y <= 0 && this.getChildAt(0).y > -this._container.y
    }, n.prototype.handleScroll2 = function (e) {
      var n = this._scrollPane.scrollingPosX, o = n + this._scrollPane.viewWidth,
        r = n == this._scrollPane.contentWidth
      i = n
      var s = this.getIndexOnPos2(e)
      if (n = i, s == this._firstIndex && !e) return !1
      var a = this._firstIndex
      this._firstIndex = s
      var h, l, c, u, _, p = s, d = a > s, g = this.numChildren, f = a + g - 1, y = d ? f : a, m = n, b = 0, v = 0,
        w = 0, C = this.defaultItem,
        S = (this._scrollPane.viewHeight - this._lineGap * (this._curLineItemCount - 1)) / this._curLineItemCount
      for (this.itemInfoVer++; p < this._realNumItems && (r || m < o);) {
        if ((null == (l = this._virtualItems[p]).obj || e) && (null != this.itemProvider && (null == (C = this.itemProvider.call(this.callbackThisObj, p % this._numItems)) && (C = this._defaultItem), C = t.UIPackage.normalizeURL(C)), l.obj && l.obj.resourceURL != C && (l.obj instanceof t.GButton && (l.selected = l.obj.selected), this.removeChildToPool(l.obj), l.obj = null)), null == l.obj) {
          if (d) {
            for (_ = y; _ >= a; _--) {
              if ((c = this._virtualItems[_]).obj && c.updateFlag != this.itemInfoVer && c.obj.resourceURL == C) {
                c.obj instanceof t.GButton && (c.selected = c.obj.selected), l.obj = c.obj, c.obj = null, _ == y && y--
                break
              }
            }
          } else {
            for (_ = y; _ <= f; _++) {
              if ((c = this._virtualItems[_]).obj && c.updateFlag != this.itemInfoVer && c.obj.resourceURL == C) {
                c.obj instanceof t.GButton && (c.selected = c.obj.selected), l.obj = c.obj, c.obj = null, _ == y && y++
                break
              }
            }
          }
          l.obj ? this.setChildIndex(l.obj, d ? p - s : this.numChildren) : (l.obj = this._pool.getObject(C), d ? this.addChildAt(l.obj, p - s) : this.addChild(l.obj)), l.obj instanceof t.GButton && (l.obj.selected = l.selected), h = !0
        } else {
          h = e
        }
        h && (this._autoResizeItem && (this._layout == t.ListLayoutType.SingleRow || this._lineCount > 0) && l.obj.setSize(l.obj.width, S, !0), this.itemRenderer.call(this.callbackThisObj, p % this._numItems, l.obj), p % this._curLineItemCount == 0 && (v += Math.ceil(l.obj.width) - l.width, p == s && a > s && (w = Math.ceil(l.obj.width) - l.width)), l.width = Math.ceil(l.obj.width), l.height = Math.ceil(l.obj.height)), l.updateFlag = this.itemInfoVer, l.obj.setXY(m, b), p == s && (o += l.width), b += l.height + this._lineGap, p % this._curLineItemCount == this._curLineItemCount - 1 && (b = 0, m += l.width + this._columnGap), p++
      }
      for (u = 0; u < g; u++) (l = this._virtualItems[a + u]).updateFlag != this.itemInfoVer && l.obj && (l.obj instanceof t.GButton && (l.selected = l.obj.selected), this.removeChildToPool(l.obj), l.obj = null)
      for (g = this._children.length, u = 0; u < g; u++) {
        var x = this._virtualItems[s + u].obj
        this._children[u] != x && this.setChildIndex(x, u)
      }
      return 0 == v && 0 == w || this._scrollPane.changeContentSizeOnScrolling(v, 0, w, 0), p > 0 && this.numChildren > 0 && this._container.x <= 0 && this.getChildAt(0).x > -this._container.x
    }, n.prototype.handleScroll3 = function (e) {
      var n = this._scrollPane.scrollingPosX
      i = n
      var o = this.getIndexOnPos3(e)
      if (n = i, o != this._firstIndex || e) {
        var r = this._firstIndex
        this._firstIndex = o
        var s, a, h, l, c, u, _ = r, p = this._virtualItems.length,
          d = this._curLineItemCount * this._curLineItemCount2, g = o % this._curLineItemCount, f = this.viewWidth,
          y = Math.floor(o / d) * d, m = y + 2 * d, b = this._defaultItem,
          v = (this._scrollPane.viewWidth - this._columnGap * (this._curLineItemCount - 1)) / this._curLineItemCount,
          w = (this._scrollPane.viewHeight - this._lineGap * (this._curLineItemCount2 - 1)) / this._curLineItemCount2
        for (this.itemInfoVer++, a = y; a < m; a++) {
          if (!(a >= this._realNumItems)) {
            if (c = a % this._curLineItemCount, a - y < d) {
              if (c < g) continue
            } else if (c > g) continue;
            (h = this._virtualItems[a]).updateFlag = this.itemInfoVer
          }
        }
        var C = 0
        for (a = y; a < m; a++) {
          if (!(a >= this._realNumItems) && (h = this._virtualItems[a]).updateFlag == this.itemInfoVer) {
            if (null == h.obj) {
              for (; _ < p;) {
                if ((l = this._virtualItems[_]).obj && l.updateFlag != this.itemInfoVer) {
                  l.obj instanceof t.GButton && (l.selected = l.obj.selected), h.obj = l.obj, l.obj = null
                  break
                }
                _++
              }
              -1 == C && (C = this.getChildIndex(u) + 1), null == h.obj ? (null != this.itemProvider && (null == (b = this.itemProvider.call(this.callbackThisObj, a % this._numItems)) && (b = this._defaultItem), b = t.UIPackage.normalizeURL(b)), h.obj = this._pool.getObject(b), this.addChildAt(h.obj, C)) : C = this.setChildIndexBefore(h.obj, C), C++, h.obj instanceof t.GButton && (h.obj.selected = h.selected), s = !0
            } else {
              s = e, C = -1, u = h.obj
            }
            s && (this._autoResizeItem && (this._curLineItemCount == this._columnCount && this._curLineItemCount2 == this._lineCount ? h.obj.setSize(v, w, !0) : this._curLineItemCount == this._columnCount ? h.obj.setSize(v, h.obj.height, !0) : this._curLineItemCount2 == this._lineCount && h.obj.setSize(h.obj.width, w, !0)), this.itemRenderer.call(this.callbackThisObj, a % this._numItems, h.obj), h.width = Math.ceil(h.obj.width), h.height = Math.ceil(h.obj.height))
          }
        }
        var S = y / d * f, x = S, T = 0, I = 0
        for (a = y; a < m; a++) a >= this._realNumItems || ((h = this._virtualItems[a]).updateFlag == this.itemInfoVer && h.obj.setXY(x, T), h.height > I && (I = h.height), a % this._curLineItemCount == this._curLineItemCount - 1 ? (x = S, T += I + this._lineGap, I = 0, a == y + d - 1 && (x = S += f, T = 0)) : x += h.width + this._columnGap)
        for (a = _; a < p; a++) (h = this._virtualItems[a]).updateFlag != this.itemInfoVer && h.obj && (h.obj instanceof t.GButton && (h.selected = h.obj.selected), this.removeChildToPool(h.obj), h.obj = null)
      }
    }, n.prototype.handleArchOrder1 = function () {
      if (this._childrenRenderOrder == t.ChildrenRenderOrder.Arch) {
        for (var e = this._scrollPane.posY + this.viewHeight / 2, i = Number.POSITIVE_INFINITY, n = 0, o = 0, r = this.numChildren, s = 0; s < r; s++) {
          var a = this.getChildAt(s)
          this.foldInvisibleItems && !a.visible || (n = Math.abs(e - a.y - a.height / 2)) < i && (i = n, o = s)
        }
        this.apexIndex = o
      }
    }, n.prototype.handleArchOrder2 = function () {
      if (this._childrenRenderOrder == t.ChildrenRenderOrder.Arch) {
        for (var e = this._scrollPane.posX + this.viewWidth / 2, i = Number.POSITIVE_INFINITY, n = 0, o = 0, r = this.numChildren, s = 0; s < r; s++) {
          var a = this.getChildAt(s)
          this.foldInvisibleItems && !a.visible || (n = Math.abs(e - a.x - a.width / 2)) < i && (i = n, o = s)
        }
        this.apexIndex = o
      }
    }, n.prototype.handleAlign = function (e, i) {
      var n = 0, o = 0
      i < this.viewHeight && (this._verticalAlign == t.VertAlignType.Middle ? o = Math.floor((this.viewHeight - i) / 2) : this._verticalAlign == t.VertAlignType.Bottom && (o = this.viewHeight - i)), e < this.viewWidth && (this._align == t.AlignType.Center ? n = Math.floor((this.viewWidth - e) / 2) : this._align == t.AlignType.Right && (n = this.viewWidth - e)), n == this._alignOffset.x && o == this._alignOffset.y || (this._alignOffset.setTo(n, o), this._scrollPane ? this._scrollPane.adjustMaskContainer() : (this._container.x = this._margin.left + this._alignOffset.x, this._container.y = this._margin.top + this._alignOffset.y))
    }, n.prototype.updateBounds = function () {
      if (!this._virtual) {
        var e, i, n = 0, o = 0, r = 0, s = 0, a = 0, h = 0, l = 0, c = 0, u = 0, _ = this._children.length,
          p = this.viewWidth, d = this.viewHeight, g = 0, f = 0, y = 0
        if (this._layout == t.ListLayoutType.SingleColumn) {
          for (e = 0; e < _; e++) i = this.getChildAt(e), this.foldInvisibleItems && !i.visible || (0 != o && (o += this._lineGap), i.y = o, this._autoResizeItem && i.setSize(p, i.height, !0), o += Math.ceil(i.height), i.width > r && (r = i.width))
          if ((h = o) <= d && this._autoResizeItem && this._scrollPane && this._scrollPane._displayInDemand && this._scrollPane.vtScrollBar) for (p += this._scrollPane.vtScrollBar.width, e = 0; e < _; e++) i = this.getChildAt(e), this.foldInvisibleItems && !i.visible || (i.setSize(p, i.height, !0), i.width > r && (r = i.width))
          a = Math.ceil(r)
        } else if (this._layout == t.ListLayoutType.SingleRow) {
          for (e = 0; e < _; e++) i = this.getChildAt(e), this.foldInvisibleItems && !i.visible || (0 != n && (n += this._columnGap), i.x = n, this._autoResizeItem && i.setSize(i.width, d, !0), n += Math.ceil(i.width), i.height > s && (s = i.height))
          if ((a = n) <= p && this._autoResizeItem && this._scrollPane && this._scrollPane._displayInDemand && this._scrollPane.hzScrollBar) for (d += this._scrollPane.hzScrollBar.height, e = 0; e < _; e++) i = this.getChildAt(e), this.foldInvisibleItems && !i.visible || (i.setSize(i.width, d, !0), i.height > s && (s = i.height))
          h = Math.ceil(s)
        } else if (this._layout == t.ListLayoutType.FlowHorizontal) {
          if (this._autoResizeItem && this._columnCount > 0) {
            for (e = 0; e < _; e++) {
              if (i = this.getChildAt(e), (!this.foldInvisibleItems || i.visible) && (g += i.sourceWidth, ++l == this._columnCount || e == _ - 1)) {
                for (y = (p - g - (l - 1) * this._columnGap) / g, n = 0, l = f; l <= e; l++) i = this.getChildAt(l), this.foldInvisibleItems && !i.visible || (i.setXY(n, o), l < e ? (i.setSize(i.sourceWidth + Math.round(i.sourceWidth * y), i.height, !0), n += Math.ceil(i.width) + this._columnGap) : i.setSize(p - n, i.height, !0), i.height > s && (s = i.height))
                o += Math.ceil(s) + this._lineGap, s = 0, l = 0, f = e + 1, g = 0
              }
            }
            h = o + Math.ceil(s), a = p
          } else {
            for (e = 0; e < _; e++) i = this.getChildAt(e), this.foldInvisibleItems && !i.visible || (0 != n && (n += this._columnGap), (0 != this._columnCount && l >= this._columnCount || 0 == this._columnCount && n + i.width > p && 0 != s) && (n = 0, o += Math.ceil(s) + this._lineGap, s = 0, l = 0), i.setXY(n, o), (n += Math.ceil(i.width)) > r && (r = n), i.height > s && (s = i.height), l++)
            h = o + Math.ceil(s), a = Math.ceil(r)
          }
        } else if (this._layout == t.ListLayoutType.FlowVertical) {
          if (this._autoResizeItem && this._lineCount > 0) {
            for (e = 0; e < _; e++) {
              if (i = this.getChildAt(e), (!this.foldInvisibleItems || i.visible) && (g += i.sourceHeight, ++l == this._lineCount || e == _ - 1)) {
                for (y = (d - g - (l - 1) * this._lineGap) / g, o = 0, l = f; l <= e; l++) i = this.getChildAt(l), this.foldInvisibleItems && !i.visible || (i.setXY(n, o), l < e ? (i.setSize(i.width, i.sourceHeight + Math.round(i.sourceHeight * y), !0), o += Math.ceil(i.height) + this._lineGap) : i.setSize(i.width, d - o, !0), i.width > r && (r = i.width))
                n += Math.ceil(r) + this._columnGap, r = 0, l = 0, f = e + 1, g = 0
              }
            }
            a = n + Math.ceil(r), h = d
          } else {
            for (e = 0; e < _; e++) i = this.getChildAt(e), this.foldInvisibleItems && !i.visible || (0 != o && (o += this._lineGap), (0 != this._lineCount && l >= this._lineCount || 0 == this._lineCount && o + i.height > d && 0 != r) && (o = 0, n += Math.ceil(r) + this._columnGap, r = 0, l = 0), i.setXY(n, o), (o += Math.ceil(i.height)) > s && (s = o), i.width > r && (r = i.width), l++)
            a = n + Math.ceil(r), h = Math.ceil(s)
          }
        } else {
          var m
          if (this._autoResizeItem && this._lineCount > 0 && (m = Math.floor((d - (this._lineCount - 1) * this._lineGap) / this._lineCount)), this._autoResizeItem && this._columnCount > 0) {
            for (e = 0; e < _; e++) {
              if (i = this.getChildAt(e), (!this.foldInvisibleItems || i.visible) && (0 == l && (0 != this._lineCount && u >= this._lineCount || 0 == this._lineCount && o + (this._lineCount > 0 ? m : i.height) > d) && (c++, o = 0, u = 0), g += i.sourceWidth, ++l == this._columnCount || e == _ - 1)) {
                for (y = (p - g - (l - 1) * this._columnGap) / g, n = 0, l = f; l <= e; l++) i = this.getChildAt(l), this.foldInvisibleItems && !i.visible || (i.setXY(c * p + n, o), l < e ? (i.setSize(i.sourceWidth + Math.round(i.sourceWidth * y), this._lineCount > 0 ? m : i.height, !0), n += Math.ceil(i.width) + this._columnGap) : i.setSize(p - n, this._lineCount > 0 ? m : i.height, !0), i.height > s && (s = i.height))
                o += Math.ceil(s) + this._lineGap, s = 0, l = 0, f = e + 1, g = 0, u++
              }
            }
          } else {
            for (e = 0; e < _; e++) i = this.getChildAt(e), this.foldInvisibleItems && !i.visible || (0 != n && (n += this._columnGap), this._autoResizeItem && this._lineCount > 0 && i.setSize(i.width, m, !0), (0 != this._columnCount && l >= this._columnCount || 0 == this._columnCount && n + i.width > p && 0 != s) && (n = 0, o += Math.ceil(s) + this._lineGap, s = 0, l = 0, u++, (0 != this._lineCount && u >= this._lineCount || 0 == this._lineCount && o + i.height > d && 0 != r) && (c++, o = 0, u = 0)), i.setXY(c * p + n, o), (n += Math.ceil(i.width)) > r && (r = n), i.height > s && (s = i.height), l++)
          }
          h = c > 0 ? d : o + Math.ceil(s), a = (c + 1) * p
        }
        this.handleAlign(a, h), this.setBounds(0, 0, a, h)
      }
    }, n.prototype.setup_beforeAdd = function (i, n) {
      e.prototype.setup_beforeAdd.call(this, i, n), i.seek(n, 5), this._layout = i.readByte(), this._selectionMode = i.readByte(), this._align = i.readByte(), this._verticalAlign = i.readByte(), this._lineGap = i.readShort(), this._columnGap = i.readShort(), this._lineCount = i.readShort(), this._columnCount = i.readShort(), this._autoResizeItem = i.readBool(), this._childrenRenderOrder = i.readByte(), this._apexIndex = i.readShort(), i.readBool() && (this._margin.top = i.readInt(), this._margin.bottom = i.readInt(), this._margin.left = i.readInt(), this._margin.right = i.readInt())
      var o = i.readByte()
      if (o == t.OverflowType.Scroll) {
        var r = i.position
        i.seek(n, 7), this.setupScroll(i), i.position = r
      } else {
        this.setupOverflow(o)
      }
      i.readBool() && i.skip(8), i.version >= 2 && (this.scrollItemToViewOnClick = i.readBool(), this.foldInvisibleItems = i.readBool()), i.seek(n, 8), this._defaultItem = i.readS(), this.readItems(i)
    }, n.prototype.readItems = function (t) {
      var e, i, n, o
      for (e = t.readShort(), i = 0; i < e; i++) {
        if (n = t.readShort(), n += t.position, null != (o = t.readS()) || (o = this.defaultItem)) {
          var r = this.getFromPool(o)
          null != r && (this.addChild(r), this.setupItem(t, r)), t.position = n
        } else {
          t.position = n
        }
      }
    }, n.prototype.setupItem = function (e, i) {
      var n, o, r
      if (null != (n = e.readS()) && (i.text = n), null != (n = e.readS()) && i instanceof t.GButton && (i.selectedTitle = n), null != (n = e.readS()) && (i.icon = n), null != (n = e.readS()) && i instanceof t.GButton && (i.selectedIcon = n), null != (n = e.readS()) && (i.name = n), i instanceof t.GComponent) {
        for (o = e.readShort(), r = 0; r < o; r++) {
          var s = i.getController(e.readS())
          n = e.readS(), s && (s.selectedPageId = n)
        }
        if (e.version >= 2) {
          for (o = e.readShort(), r = 0; r < o; r++) {
            var a = e.readS(), h = e.readShort(), l = e.readS(), c = i.getChildByPath(a)
            c && c.setProp(h, l)
          }
        }
      }
    }, n.prototype.setup_afterAdd = function (t, i) {
      e.prototype.setup_afterAdd.call(this, t, i), t.seek(i, 6)
      var n = t.readShort();
      -1 != n && (this._selectionController = this.parent.getControllerAt(n))
    }, n
  }(t.GComponent)
  t.GList = e
  var i = 0
}(fgui || (fgui = {})), function (t) {
  var e = function () {
    function e () {
      this._count = 0, this._pool = {}
    }

    return e.prototype.clear = function () {
      for (var t in this._pool) for (var e = this._pool[t], i = e.length, n = 0; n < i; n++) e[n].dispose()
      this._pool = {}, this._count = 0
    }, Object.defineProperty(e.prototype, 'count', {
      get: function () {
        return this._count
      }, enumerable: !0, configurable: !0
    }), e.prototype.getObject = function (e) {
      if (null == (e = t.UIPackage.normalizeURL(e))) return null
      var i = this._pool[e]
      return i && i.length ? (this._count--, i.shift()) : t.UIPackage.createObjectFromURL(e)
    }, e.prototype.returnObject = function (t) {
      var e = t.resourceURL
      if (e) {
        var i = this._pool[e]
        null == i && (i = new Array, this._pool[e] = i), this._count++, i.push(t)
      }
    }, e
  }()
  t.GObjectPool = e
}(fgui || (fgui = {})), function (t) {
  var e = function (e) {
    function i () {
      var i = e.call(this) || this
      return i._url = '', i._fill = t.LoaderFillType.None, i._align = t.AlignType.Left, i._verticalAlign = t.VertAlignType.Top, i._showErrorSign = !0, i
    }

    return __extends(i, e), i.prototype.createDisplayObject = function () {
      this._container = new t.UIContainer, this._container.opaque = !0, this.setDisplayObject(this._container), this._content = new t.MovieClip, this._container.addChild(this._content)
    }, i.prototype.dispose = function () {
      if (!this._contentItem) {
        var t = this._content.texture
        t && this.freeExternal(t)
      }
      this._content2 && this._content2.dispose(), e.prototype.dispose.call(this)
    }, Object.defineProperty(i.prototype, 'url', {
      get: function () {
        return this._url
      }, set: function (t) {
        this._url != t && (this.clearContent(), this._url = t, this.loadContent(), this.updateGear(7))
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'icon', {
      get: function () {
        return this._url
      }, set: function (t) {
        this.url = t
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'align', {
      get: function () {
        return this._align
      }, set: function (t) {
        this._align != t && (this._align = t, this.updateLayout())
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'verticalAlign', {
      get: function () {
        return this._verticalAlign
      }, set: function (t) {
        this._verticalAlign != t && (this._verticalAlign = t, this.updateLayout())
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'fill', {
      get: function () {
        return this._fill
      }, set: function (t) {
        this._fill != t && (this._fill = t, this.updateLayout())
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'shrinkOnly', {
      get: function () {
        return this._shrinkOnly
      }, set: function (t) {
        this._shrinkOnly != t && (this._shrinkOnly = t, this.updateLayout())
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'autoSize', {
      get: function () {
        return this._autoSize
      }, set: function (t) {
        this._autoSize != t && (this._autoSize = t, this.updateLayout())
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'playing', {
      get: function () {
        return this._content.playing
      }, set: function (t) {
        this._content.playing != t && (this._content.playing = t, this.updateGear(5))
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'frame', {
      get: function () {
        return this._content.frame
      }, set: function (t) {
        this._content.frame != t && (this._content.frame = t, this.updateGear(5))
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'color', {
      get: function () {
        return this._content.color
      }, set: function (t) {
        this._content.color != t && (this._content.color = t, this.updateGear(4))
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'showErrorSign', {
      get: function () {
        return this._showErrorSign
      }, set: function (t) {
        this._showErrorSign = t
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'content', {
      get: function () {
        return this._content
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'component', {
      get: function () {
        return this._content2
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'texture', {
      get: function () {
        return this._content.texture
      }, set: function (t) {
        this.url = null, this._content.frames = null, this._content.texture = t, t ? (this.sourceWidth = t.textureWidth, this.sourceHeight = t.textureHeight) : this.sourceWidth = this.sourceHeight = 0, this.updateLayout()
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'fillMethod', {
      get: function () {
        return this._content.fillMethod
      }, set: function (t) {
        this._content.fillMethod = t
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'fillOrigin', {
      get: function () {
        return this._content.fillOrigin
      }, set: function (t) {
        this._content.fillOrigin = t
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'fillClockwise', {
      get: function () {
        return this._content.fillClockwise
      }, set: function (t) {
        this._content.fillClockwise = t
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'fillAmount', {
      get: function () {
        return this._content.fillAmount
      }, set: function (t) {
        this._content.fillAmount = t
      }, enumerable: !0, configurable: !0
    }), i.prototype.loadContent = function () {
      this._url && (t.ToolSet.startsWith(this._url, 'ui://') ? this.loadFromPackage(this._url) : this.loadExternal())
    }, i.prototype.loadFromPackage = function (e) {
      if (this._contentItem = t.UIPackage.getItemByURL(e), this._contentItem) {
        if (this._contentItem = this._contentItem.getBranch(), this.sourceWidth = this._contentItem.width, this.sourceHeight = this._contentItem.height, this._contentItem = this._contentItem.getHighResolution(), this._contentItem.load(), this._autoSize && this.setSize(this.sourceWidth, this.sourceHeight), this._contentItem.type == t.PackageItemType.Image) {
          null == this._contentItem.asset ? this.setErrorState() : (this._content.texture = this._contentItem.asset, this._content.scale9Grid = this._contentItem.scale9Grid, this._contentItem.scaleByTile ? this._content.fillMode = egret.BitmapFillMode.REPEAT : this._content.fillMode = egret.BitmapFillMode.SCALE, this.updateLayout())
        } else if (this._contentItem.type == t.PackageItemType.MovieClip) {
          this._content.interval = this._contentItem.interval, this._content.swing = this._contentItem.swing, this._content.repeatDelay = this._contentItem.repeatDelay, this._content.frames = this._contentItem.frames, this.updateLayout()
        } else if (this._contentItem.type == t.PackageItemType.Component) {
          var i = t.UIPackage.createObjectFromURL(e)
          i ? i instanceof t.GComponent ? (this._content2 = i.asCom, this._container.addChild(this._content2.displayObject), this.updateLayout()) : (i.dispose(), this.setErrorState()) : this.setErrorState()
        } else {
          this.setErrorState()
        }
      } else {
        this.setErrorState()
      }
    }, i.prototype.loadExternal = function () {
      RES.getResByUrl(this._url, this.__getResCompleted, this)
    }, i.prototype.freeExternal = function (t) {
    }, i.prototype.onExternalLoadSuccess = function (t) {
      this._content.texture = t, this._content.scale9Grid = null, this._content.fillMode = egret.BitmapFillMode.SCALE, this.sourceWidth = t.textureWidth, this.sourceHeight = t.textureHeight, this.updateLayout()
    }, i.prototype.onExternalLoadFailed = function () {
      this.setErrorState()
    }, i.prototype.__getResCompleted = function (t, e) {
      t instanceof egret.Texture ? this.onExternalLoadSuccess(t) : this.onExternalLoadFailed()
    }, i.prototype.setErrorState = function () {
      this._showErrorSign && (null == this._errorSign && null != t.UIConfig.loaderErrorSign && (this._errorSign = i._errorSignPool.getObject(t.UIConfig.loaderErrorSign)), this._errorSign && (this._errorSign.setSize(this.width, this.height), this._container.addChild(this._errorSign.displayObject)))
    }, i.prototype.clearErrorState = function () {
      this._errorSign && (this._container.removeChild(this._errorSign.displayObject), i._errorSignPool.returnObject(this._errorSign), this._errorSign = null)
    }, i.prototype.updateLayout = function () {
      if (this._content2 || this._content) {
        var e = this.sourceWidth, i = this.sourceHeight
        if (this._autoSize && (this._updatingLayout = !0, 0 == e && (e = 50), 0 == i && (i = 30), this.setSize(e, i), this._updatingLayout = !1, e == this._width && i == this._height)) {
          this._content2 ? (this._content2.setXY(0, 0), this._content2.setScale(1, 1)) : (this._content.x = 0, this._content.y = 0, this._content.width = e, this._content.height = i)
        } else {
          var n, o, r = 1, s = 1
          this._fill != t.LoaderFillType.None && (r = this.width / this.sourceWidth, s = this.height / this.sourceHeight, 1 == r && 1 == s || (this._fill == t.LoaderFillType.ScaleMatchHeight ? r = s : this._fill == t.LoaderFillType.ScaleMatchWidth ? s = r : this._fill == t.LoaderFillType.Scale ? r > s ? r = s : s = r : this._fill == t.LoaderFillType.ScaleNoBorder && (r > s ? s = r : r = s), this._shrinkOnly && (r > 1 && (r = 1), s > 1 && (s = 1)), e = this.sourceWidth * r, i = this.sourceHeight * s)), this._content2 ? this._content2.setScale(r, s) : (this._content.width = e, this._content.height = i), n = this._align == t.AlignType.Center ? Math.floor((this.width - e) / 2) : this._align == t.AlignType.Right ? this.width - e : 0, o = this._verticalAlign == t.VertAlignType.Middle ? Math.floor((this.height - i) / 2) : this._verticalAlign == t.VertAlignType.Bottom ? this.height - i : 0, this._content2 ? this._content2.setXY(n, o) : (this._content.x = n, this._content.y = o)
        }
      } else {
        this._autoSize && (this._updatingLayout = !0, this.setSize(50, 30), this._updatingLayout = !1)
      }
    }, i.prototype.clearContent = function () {
      this.clearErrorState(), !this._contentItem && this._content.texture && this.freeExternal(this._content.texture), this._content.texture = null, this._content.frames = null, this._content2 && (this._container.removeChild(this._content2.displayObject), this._content2.dispose(), this._content2 = null), this._contentItem = null
    }, i.prototype.handleSizeChanged = function () {
      e.prototype.handleSizeChanged.call(this), this._updatingLayout || this.updateLayout()
    }, i.prototype.getProp = function (i) {
      switch (i) {
        case t.ObjectPropID.Color:
          return this.color
        case t.ObjectPropID.Playing:
          return this.playing
        case t.ObjectPropID.Frame:
          return this.frame
        case t.ObjectPropID.TimeScale:
          return this._content.timeScale
        default:
          return e.prototype.getProp.call(this, i)
      }
    }, i.prototype.setProp = function (i, n) {
      switch (i) {
        case t.ObjectPropID.Color:
          this.color = n
          break
        case t.ObjectPropID.Playing:
          this.playing = n
          break
        case t.ObjectPropID.Frame:
          this.frame = n
          break
        case t.ObjectPropID.TimeScale:
          this._content.timeScale = n
          break
        case t.ObjectPropID.DeltaTime:
          this._content.advance(n)
          break
        default:
          e.prototype.setProp.call(this, i, n)
      }
    }, i.prototype.setup_beforeAdd = function (t, i) {
      e.prototype.setup_beforeAdd.call(this, t, i), t.seek(i, 5), this._url = t.readS(), this._align = t.readByte(), this._verticalAlign = t.readByte(), this._fill = t.readByte(), this._shrinkOnly = t.readBool(), this._autoSize = t.readBool(), this._showErrorSign = t.readBool(), this._content.playing = t.readBool(), this._content.frame = t.readInt(), t.readBool() && (this.color = t.readColor()), this._content.fillMethod = t.readByte(), 0 != this._content.fillMethod && (this._content.fillOrigin = t.readByte(), this._content.fillClockwise = t.readBool(), this._content.fillAmount = t.readFloat()), this._url && this.loadContent()
    }, i._errorSignPool = new t.GObjectPool, i
  }(t.GObject)
  t.GLoader = e
}(fgui || (fgui = {})), function (t) {
  var e = function (e) {
    function i () {
      var i = e.call(this) || this
      return i._frame = 0, i._playing = !0, i._url = '', i._fill = t.LoaderFillType.None, i._align = t.AlignType.Left, i._verticalAlign = t.VertAlignType.Top, i._color = 16777215, i
    }

    return __extends(i, e), i.prototype.createDisplayObject = function () {
      var e = new t.UIContainer
      e.opaque = !0, this.setDisplayObject(e), this._container = new egret.DisplayObjectContainer, e.addChild(this._container)
    }, i.prototype.dispose = function () {
      e.prototype.dispose.call(this)
    }, Object.defineProperty(i.prototype, 'url', {
      get: function () {
        return this._url
      }, set: function (t) {
        this._url != t && (this._url = t, this.loadContent(), this.updateGear(7))
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'icon', {
      get: function () {
        return this._url
      }, set: function (t) {
        this.url = t
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'align', {
      get: function () {
        return this._align
      }, set: function (t) {
        this._align != t && (this._align = t, this.updateLayout())
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'verticalAlign', {
      get: function () {
        return this._verticalAlign
      }, set: function (t) {
        this._verticalAlign != t && (this._verticalAlign = t, this.updateLayout())
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'fill', {
      get: function () {
        return this._fill
      }, set: function (t) {
        this._fill != t && (this._fill = t, this.updateLayout())
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'shrinkOnly', {
      get: function () {
        return this._shrinkOnly
      }, set: function (t) {
        this._shrinkOnly != t && (this._shrinkOnly = t, this.updateLayout())
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'autoSize', {
      get: function () {
        return this._autoSize
      }, set: function (t) {
        this._autoSize != t && (this._autoSize = t, this.updateLayout())
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'playing', {
      get: function () {
        return this._playing
      }, set: function (t) {
        this._playing != t && (this._playing = t, this.updateGear(5), this.onChange())
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'frame', {
      get: function () {
        return this._frame
      }, set: function (t) {
        this._frame != t && (this._frame = t, this.updateGear(5), this.onChange())
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'animationName', {
      get: function () {
        return this._animationName
      }, set: function (t) {
        this._animationName != t && (this._animationName = t, this.onChange())
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'skinName', {
      get: function () {
        return this._skinName
      }, set: function (t) {
        this._skinName != t && (this._skinName = t, this.onChange())
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'loop', {
      get: function () {
        return this._loop
      }, set: function (t) {
        this._loop != t && (this._loop = t, this.onChange())
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'color', {
      get: function () {
        return this._color
      }, set: function (t) {
        this._color != t && (this._color = t, this.updateGear(4), this._content && (this._content.tint = t))
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'content', {
      get: function () {
      }, enumerable: !0, configurable: !0
    }), i.prototype.loadContent = function () {
      this.clearContent(), this._url && (t.ToolSet.startsWith(this._url, 'ui://') ? this.loadFromPackage(this._url) : this.loadExternal())
    }, i.prototype.loadFromPackage = function (e) {
      this._contentItem = t.UIPackage.getItemByURL(e), this._contentItem && (this._contentItem = this._contentItem.getBranch(), this.sourceWidth = this._contentItem.width, this.sourceHeight = this._contentItem.height, this._contentItem = this._contentItem.getHighResolution(), this._autoSize && this.setSize(this.sourceWidth, this.sourceHeight), this._contentItem.type != t.PackageItemType.Spine && this._contentItem.type != t.PackageItemType.DragonBones || this._contentItem.owner.getItemAssetAsync(this._contentItem, this.onLoaded.bind(this)))
    }, i.prototype.onLoaded = function (e, i) {
      this._contentItem == i && (e && console.warn(e), this._contentItem.asset && this._contentItem.type == t.PackageItemType.DragonBones && this.setDragonBones(this._contentItem.armatureName, this._contentItem.asset.name, this._contentItem.atlasAsset.name, this._skinName, this._contentItem.skeletonAnchor))
    }, i.prototype.setDragonBones = function (t, e, i, n, o) {
      this.url = null
      var r = dragonBones.EgretFactory.factory
      this._content = r.buildArmatureDisplay(t, e, i, n), this._container.addChild(this._content), this._content.x = o.x, this._content.y = o.y, this._content.tint = this._color, this.onChangeDragonBones(), this.updateLayout()
    }, i.prototype.onChange = function () {
      this.onChangeDragonBones()
    }, i.prototype.onChangeDragonBones = function () {
      this._content instanceof dragonBones.EgretArmatureDisplay && (this._animationName ? this._playing ? this._content.animation.play(this._animationName, this._loop ? 0 : 1) : this._content.animation.gotoAndStopByFrame(this._animationName, this._frame) : this._content.animation.reset())
    }, i.prototype.loadExternal = function () {
    }, i.prototype.updateLayout = function () {
      var e = this.sourceWidth, i = this.sourceHeight
      if (this._autoSize && (this._updatingLayout = !0, 0 == e && (e = 50), 0 == i && (i = 30), this.setSize(e, i), this._updatingLayout = !1, e == this._width && i == this._height)) return this._container.scaleX = this._container.scaleY = 1, void (this._container.x = this._container.y = 0)
      var n, o, r = 1, s = 1
      this._fill != t.LoaderFillType.None && (r = this.width / this.sourceWidth, s = this.height / this.sourceHeight, 1 == r && 1 == s || (this._fill == t.LoaderFillType.ScaleMatchHeight ? r = s : this._fill == t.LoaderFillType.ScaleMatchWidth ? s = r : this._fill == t.LoaderFillType.Scale ? r > s ? r = s : s = r : this._fill == t.LoaderFillType.ScaleNoBorder && (r > s ? s = r : r = s), this._shrinkOnly && (r > 1 && (r = 1), s > 1 && (s = 1)), e = this.sourceWidth * r, i = this.sourceHeight * s)), this._container.scaleX = r, this._container.scaleY = s, n = this._align == t.AlignType.Center ? Math.floor((this.width - e) / 2) : this._align == t.AlignType.Right ? this.width - e : 0, o = this._verticalAlign == t.VertAlignType.Middle ? Math.floor((this.height - i) / 2) : this._verticalAlign == t.VertAlignType.Bottom ? this.height - i : 0, this._container.x = n, this._container.y = o
    }, i.prototype.clearContent = function () {
      this._contentItem = null, this._content && (this._container.removeChild(this._content), 'dispose' in this._content && this._content.dispose(), this._content = null)
    }, i.prototype.handleSizeChanged = function () {
      e.prototype.handleSizeChanged.call(this), this._updatingLayout || this.updateLayout()
    }, i.prototype.handleGrayedChanged = function () {
    }, i.prototype.getProp = function (i) {
      switch (i) {
        case t.ObjectPropID.Color:
          return this.color
        case t.ObjectPropID.Playing:
          return this.playing
        case t.ObjectPropID.Frame:
          return this.frame
        case t.ObjectPropID.TimeScale:
          return 1
        default:
          return e.prototype.getProp.call(this, i)
      }
    }, i.prototype.setProp = function (i, n) {
      switch (i) {
        case t.ObjectPropID.Color:
          this.color = n
          break
        case t.ObjectPropID.Playing:
          this.playing = n
          break
        case t.ObjectPropID.Frame:
          this.frame = n
          break
        case t.ObjectPropID.TimeScale:
        case t.ObjectPropID.DeltaTime:
          break
        default:
          e.prototype.setProp.call(this, i, n)
      }
    }, i.prototype.setup_beforeAdd = function (t, i) {
      e.prototype.setup_beforeAdd.call(this, t, i), t.seek(i, 5), this._url = t.readS(), this._align = t.readByte(), this._verticalAlign = t.readByte(), this._fill = t.readByte(), this._shrinkOnly = t.readBool(), this._autoSize = t.readBool(), this._animationName = t.readS(), this._skinName = t.readS(), this._playing = t.readBool(), this._frame = t.readInt(), this._loop = t.readBool(), t.readBool() && (this.color = t.readColor()), this._url && this.loadContent()
    }, i
  }(t.GObject)
  t.GLoader3D = e
}(fgui || (fgui = {})), function (t) {
  var e = function (e) {
    function i () {
      return e.call(this) || this
    }

    return __extends(i, e), Object.defineProperty(i.prototype, 'color', {
      get: function () {
        return this._content.color
      }, set: function (t) {
        this._content.color != t && (this._content.color = t, this.updateGear(4))
      }, enumerable: !0, configurable: !0
    }), i.prototype.createDisplayObject = function () {
      this._content = new t.MovieClip, this._content.touchEnabled = !1, this.setDisplayObject(this._content)
    }, Object.defineProperty(i.prototype, 'playing', {
      get: function () {
        return this._content.playing
      }, set: function (t) {
        this._content.playing != t && (this._content.playing = t, this.updateGear(5))
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'frame', {
      get: function () {
        return this._content.frame
      }, set: function (t) {
        this._content.frame != t && (this._content.frame = t, this.updateGear(5))
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'timeScale', {
      get: function () {
        return this._content.timeScale
      }, set: function (t) {
        this._content.timeScale = t
      }, enumerable: !0, configurable: !0
    }), i.prototype.rewind = function () {
      this._content.rewind()
    }, i.prototype.syncStatus = function (t) {
      this._content.syncStatus(t._content)
    }, i.prototype.advance = function (t) {
      this._content.advance(t)
    }, i.prototype.setPlaySettings = function (t, e, i, n, o, r) {
      this._content.setPlaySettings(t, e, i, n, o, r)
    }, i.prototype.getProp = function (i) {
      switch (i) {
        case t.ObjectPropID.Color:
          return this.color
        case t.ObjectPropID.Playing:
          return this.playing
        case t.ObjectPropID.Frame:
          return this.frame
        case t.ObjectPropID.TimeScale:
          return this.timeScale
        default:
          return e.prototype.getProp.call(this, i)
      }
    }, i.prototype.setProp = function (i, n) {
      switch (i) {
        case t.ObjectPropID.Color:
          this.color = n
          break
        case t.ObjectPropID.Playing:
          this.playing = n
          break
        case t.ObjectPropID.Frame:
          this.frame = n
          break
        case t.ObjectPropID.TimeScale:
          this.timeScale = n
          break
        case t.ObjectPropID.DeltaTime:
          this.advance(n)
          break
        default:
          e.prototype.setProp.call(this, i, n)
      }
    }, i.prototype.constructFromResource = function () {
      var t = this.packageItem.getBranch()
      this.sourceWidth = t.width, this.sourceHeight = t.height, this.initWidth = this.sourceWidth, this.initHeight = this.sourceHeight, this.setSize(this.sourceWidth, this.sourceHeight), (t = t.getHighResolution()).load(), this._content.interval = t.interval, this._content.swing = t.swing, this._content.repeatDelay = t.repeatDelay, this._content.frames = t.frames, this._content.smoothing = t.smoothing
    }, i.prototype.setup_beforeAdd = function (t, i) {
      e.prototype.setup_beforeAdd.call(this, t, i), t.seek(i, 5), t.readBool() && (this.color = t.readColor()), t.readByte(), this._content.frame = t.readInt(), this._content.playing = t.readBool()
    }, i
  }(t.GObject)
  t.GMovieClip = e
}(fgui || (fgui = {})), function (t) {
  var e = function (e) {
    function i () {
      var i = e.call(this) || this
      return i._min = 0, i._max = 0, i._value = 0, i._barMaxWidth = 0, i._barMaxHeight = 0, i._barMaxWidthDelta = 0, i._barMaxHeightDelta = 0, i._barStartX = 0, i._barStartY = 0, i._titleType = t.ProgressTitleType.Percent, i._value = 50, i._max = 100, i
    }

    return __extends(i, e), Object.defineProperty(i.prototype, 'titleType', {
      get: function () {
        return this._titleType
      }, set: function (t) {
        this._titleType != t && (this._titleType = t, this.update(this._value))
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'min', {
      get: function () {
        return this._min
      }, set: function (t) {
        this._min != t && (this._min = t, this.update(this._value))
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'max', {
      get: function () {
        return this._max
      }, set: function (t) {
        this._max != t && (this._max = t, this.update(this._value))
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'value', {
      get: function () {
        return this._value
      }, set: function (e) {
        this._value != e && (t.GTween.kill(this, !1, this.update), this._value = e, this.update(e))
      }, enumerable: !0, configurable: !0
    }), i.prototype.tweenValue = function (e, i) {
      var n, o = t.GTween.getTween(this, this.update)
      return o ? (n = o.value.x, o.kill()) : n = this._value, this._value = e, t.GTween.to(n, this._value, i).setTarget(this, this.update).setEase(t.EaseType.Linear)
    }, i.prototype.update = function (e) {
      var i = t.ToolSet.clamp01((e - this._min) / (this._max - this._min))
      if (this._titleObject) {
        switch (this._titleType) {
          case t.ProgressTitleType.Percent:
            this._titleObject.text = Math.floor(100 * i) + '%'
            break
          case t.ProgressTitleType.ValueAndMax:
            this._titleObject.text = Math.floor(e) + '/' + Math.floor(this._max)
            break
          case t.ProgressTitleType.Value:
            this._titleObject.text = '' + Math.floor(e)
            break
          case t.ProgressTitleType.Max:
            this._titleObject.text = '' + Math.floor(this._max)
        }
      }
      var n = this.width - this._barMaxWidthDelta, o = this.height - this._barMaxHeightDelta
      this._reverse ? (this._barObjectH && (this.setFillAmount(this._barObjectH, 1 - i) || (this._barObjectH.width = Math.round(n * i), this._barObjectH.x = this._barStartX + (n - this._barObjectH.width))), this._barObjectV && (this.setFillAmount(this._barObjectV, 1 - i) || (this._barObjectV.height = Math.round(o * i), this._barObjectV.y = this._barStartY + (o - this._barObjectV.height)))) : (this._barObjectH && (this.setFillAmount(this._barObjectH, i) || (this._barObjectH.width = Math.round(n * i))), this._barObjectV && (this.setFillAmount(this._barObjectV, i) || (this._barObjectV.height = Math.round(o * i)))), this._aniObject && this._aniObject.setProp(t.ObjectPropID.Frame, Math.floor(100 * i))
    }, i.prototype.setFillAmount = function (e, i) {
      return (e instanceof t.GImage || e instanceof t.GLoader) && e.fillMethod != t.FillMethod.None && (e.fillAmount = i, !0)
    }, i.prototype.constructExtension = function (t) {
      t.seek(0, 6), this._titleType = t.readByte(), this._reverse = t.readBool(), this._titleObject = this.getChild('title'), this._barObjectH = this.getChild('bar'), this._barObjectV = this.getChild('bar_v'), this._aniObject = this.getChild('ani'), this._barObjectH && (this._barMaxWidth = this._barObjectH.width, this._barMaxWidthDelta = this.width - this._barMaxWidth, this._barStartX = this._barObjectH.x), this._barObjectV && (this._barMaxHeight = this._barObjectV.height, this._barMaxHeightDelta = this.height - this._barMaxHeight, this._barStartY = this._barObjectV.y)
    }, i.prototype.handleSizeChanged = function () {
      e.prototype.handleSizeChanged.call(this), this._barObjectH && (this._barMaxWidth = this.width - this._barMaxWidthDelta), this._barObjectV && (this._barMaxHeight = this.height - this._barMaxHeightDelta), this._underConstruct || this.update(this._value)
    }, i.prototype.setup_afterAdd = function (t, i) {
      e.prototype.setup_afterAdd.call(this, t, i), t.seek(i, 6) && t.readByte() == this.packageItem.objectType ? (this._value = t.readInt(), this._max = t.readInt(), t.version >= 2 && (this._min = t.readInt()), this.update(this._value)) : this.update(this._value)
    }, i
  }(t.GComponent)
  t.GProgressBar = e
}(fgui || (fgui = {})), function (t) {
  var e = function (e) {
    function s () {
      var i = e.call(this) || this
      return i._fontSize = 0, i._leading = 0, i._letterSpacing = 0, i._textWidth = 0, i._textHeight = 0, i._fontSize = 12, i._align = t.AlignType.Left, i._verticalAlign = t.VertAlignType.Top, i._text = '', i._leading = 3, i._color = 0, i._autoSize = t.AutoSizeType.Both, i._widthAutoSize = !0, i._heightAutoSize = !0, i
    }

    return __extends(s, e), s.prototype.createDisplayObject = function () {
      this._textField = new egret.TextField, this._textField.touchEnabled = !1, this.setDisplayObject(this._textField)
    }, s.prototype.switchBitmapMode = function (t) {
      t && this.displayObject == this._textField ? (null == this._bitmapContainer && (this._bitmapContainer = new egret.Sprite), this.switchDisplayObject(this._bitmapContainer)) : t || this.displayObject != this._bitmapContainer || this.switchDisplayObject(this._textField)
    }, s.prototype.dispose = function () {
      e.prototype.dispose.call(this), this._bitmapFont = null, this._requireRender = !1
    }, Object.defineProperty(s.prototype, 'text', {
      get: function () {
        return this._text
      }, set: function (t) {
        this._text = t, null == this._text && (this._text = ''), this.updateGear(6), this.parent && this.parent._underConstruct ? this.renderNow() : this.render()
      }, enumerable: !0, configurable: !0
    }), s.prototype.updateTextFieldText = function () {
      var e = this._text
      if (this._templateVars && (e = this.parseTemplate(e)), this._ubbEnabled) {
        var i = s._htmlParser.parser(t.UBBParser.inst.parse(t.ToolSet.encodeHTML(e)))
        if (this._underline) {
          for (var n = 0; n < i.length; n++) {
            var o = i[n]
            o.style ? o.style.underline = !0 : o.style = {underline: !0}
          }
        }
        this._textField.textFlow = i
      } else if (this._underline) {
        (i = new Array(1))[0] = {text: e, style: {underline: !0}}, this._textField.textFlow = i
      } else {
        this._textField.text = e
      }
    }, Object.defineProperty(s.prototype, 'font', {
      get: function () {
        return this._font
      }, set: function (t) {
        this._font != t && (this._font = t, this.updateTextFormat())
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(s.prototype, 'fontSize', {
      get: function () {
        return this._fontSize
      }, set: function (t) {
        t < 0 || this._fontSize != t && (this._fontSize = t, this.updateTextFormat())
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(s.prototype, 'color', {
      get: function () {
        return this._color
      }, set: function (t) {
        this._color != t && (this._color = t, this.updateGear(4), this.updateTextFormat())
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(s.prototype, 'align', {
      get: function () {
        return this._align
      }, set: function (t) {
        this._align != t && (this._align = t, this._textField.textAlign = this.getAlignTypeString(this._align), this._bitmapFont && !this._underConstruct && this.render())
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(s.prototype, 'verticalAlign', {
      get: function () {
        return this._verticalAlign
      }, set: function (t) {
        this._verticalAlign != t && (this._verticalAlign = t, this._textField.verticalAlign = this.getVertAlignTypeString(this._verticalAlign), this._bitmapFont && !this._underConstruct && this.render())
      }, enumerable: !0, configurable: !0
    }), s.prototype.getAlignTypeString = function (e) {
      return e == t.AlignType.Left ? egret.HorizontalAlign.LEFT : e == t.AlignType.Center ? egret.HorizontalAlign.CENTER : egret.HorizontalAlign.RIGHT
    }, s.prototype.getVertAlignTypeString = function (e) {
      return e == t.VertAlignType.Top ? egret.VerticalAlign.TOP : e == t.VertAlignType.Middle ? egret.VerticalAlign.MIDDLE : egret.VerticalAlign.BOTTOM
    }, Object.defineProperty(s.prototype, 'leading', {
      get: function () {
        return this._leading
      }, set: function (t) {
        this._leading != t && (this._leading = t, this.updateTextFormat())
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(s.prototype, 'letterSpacing', {
      get: function () {
        return this._letterSpacing
      }, set: function (t) {
        this._letterSpacing != t && (this._letterSpacing = t, this.updateTextFormat())
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(s.prototype, 'underline', {
      get: function () {
        return this._underline
      }, set: function (t) {
        this._underline = t
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(s.prototype, 'bold', {
      get: function () {
        return this._textField.bold
      }, set: function (t) {
        this._textField.bold = t
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(s.prototype, 'italic', {
      get: function () {
        return this._textField.italic
      }, set: function (t) {
        this._textField.italic = t
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(s.prototype, 'singleLine', {
      get: function () {
        return !this._textField.multiline
      }, set: function (t) {
        t = !t, this._textField.multiline != t && (this._textField.multiline = t, this.render())
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(s.prototype, 'stroke', {
      get: function () {
        return this._textField.stroke
      }, set: function (t) {
        this._textField.stroke = t
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(s.prototype, 'strokeColor', {
      get: function () {
        return this._textField.strokeColor
      }, set: function (t) {
        this._textField.strokeColor = t, this.updateGear(4)
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(s.prototype, 'ubbEnabled', {
      get: function () {
        return this._ubbEnabled
      }, set: function (t) {
        this._ubbEnabled != t && (this._ubbEnabled = t, this.render())
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(s.prototype, 'autoSize', {
      get: function () {
        return this._autoSize
      }, set: function (e) {
        this._autoSize != e && (this._autoSize = e, this._widthAutoSize = e == t.AutoSizeType.Both, this._heightAutoSize = e == t.AutoSizeType.Both || e == t.AutoSizeType.Height, this.render())
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(s.prototype, 'textWidth', {
      get: function () {
        return this._requireRender && this.renderNow(), this._textWidth
      }, enumerable: !0, configurable: !0
    }), s.prototype.ensureSizeCorrect = function () {
      this._sizeDirty && this._requireRender && this.renderNow()
    }, s.prototype.updateTextFormat = function () {
      if (this._textField.size = this._fontSize, this._bitmapFont = null, t.ToolSet.startsWith(this._font, 'ui://')) {
        var e = t.UIPackage.getItemByURL(this._font)
        e && (this._bitmapFont = e.owner.getItemAsset(e))
      }
      null == this._bitmapFont && (this._font ? this._textField.fontFamily = this._font : this._textField.fontFamily = t.UIConfig.defaultFont), this.grayed ? this._textField.textColor = 11184810 : this._textField.textColor = this._color, this._textField.lineSpacing = this._leading, this._underConstruct || this.render()
    }, s.prototype.render = function () {
      this._requireRender || (this._requireRender = !0, egret.callLater(this.__render, this)), this._sizeDirty || !this._widthAutoSize && !this._heightAutoSize || (this._sizeDirty = !0, this.dispatchEventWith(t.GObject.SIZE_DELAY_CHANGE))
    }, s.prototype.__render = function () {
      this._requireRender && this.renderNow()
    }, s.prototype.renderNow = function (t) {
      if (void 0 === t && (t = !0), this._requireRender = !1, this._sizeDirty = !1, this._bitmapFont) {
        this.renderWithBitmapFont(t)
      } else {
        this.switchBitmapMode(!1), this._textField.width = this._widthAutoSize ? this.maxWidth <= 0 ? 1e4 : this.maxWidth : Math.ceil(this.width), this.updateTextFieldText(), this._textWidth = Math.ceil(this._textField.textWidth), this._textWidth > 0 && (this._textWidth += 4), this._textHeight = Math.ceil(this._textField.textHeight), this._textHeight > 0 && (this._textHeight += 4)
        var e, i = 0
        this._widthAutoSize ? (e = this._textWidth, this._textField.width = e) : e = this.width, this._heightAutoSize ? (i = this._textHeight, this._textField.height != this._textHeight && (this._textField.height = this._textHeight)) : (i = this.height, this._textHeight > i && (this._textHeight = i)), t && (this._updatingSize = !0, this.setSize(e, i), this._updatingSize = !1)
      }
    }, s.prototype.renderWithBitmapFont = function (e) {
      this.switchBitmapMode(!0), this._bitmapPool || (this._bitmapPool = [])
      for (var s = this._bitmapContainer.numChildren, a = 0; a < s; a++) {
        var h = this._bitmapContainer.getChildAt(a)
        this._bitmapPool.push(h)
      }
      this._bitmapContainer.removeChildren(), this._lines ? function (t) {
        for (var e = t.length, n = 0; n < e; n++) {
          var o = t[n]
          i.push(o)
        }
        t.length = 0
      }(this._lines) : this._lines = new Array
      var l, c = this._letterSpacing, u = this._leading - 1, _ = this.width - 2 * o, p = 0, d = 0, g = 0, f = 0, y = 0,
        m = 0, b = 0, v = 0, w = 0, C = '', S = r, x = !this._widthAutoSize && this._textField.multiline,
        T = this._bitmapFont.resizable ? this._fontSize / this._bitmapFont.size : 1, I = this._bitmapFont.tint
      this._textWidth = 0, this._textHeight = 0
      var P = this._text
      this._templateVars && (P = this.parseTemplate(P))
      for (var O = P.length, j = 0; j < O; ++j) {
        var k = P.charAt(j), B = k.charCodeAt(0)
        if (10 != B) {
          if (B >= 65 && B <= 90 || B >= 97 && B <= 122 ? (0 == m && (b = p), m++) : (m > 0 && (v = p), m = 0), 32 == B) {
            f = Math.ceil(this._fontSize / 2), y = this._fontSize
          } else {
            var L = this._bitmapFont.glyphs[k]
            L ? (f = Math.ceil(L.advance * T), y = Math.ceil(L.lineHeight * T)) : (f = 0, y = 0)
          }
          if (y > g && (g = y), y > d && (d = y), 0 != p && (p += c), p += f, !x || p <= _) {
            C += k
          } else {
            if ((l = n()).height = d, l.textHeight = g, 0 == C.length) {
              l.text = k
            } else if (m > 0 && v > 0) {
              var A = (C += k).length - m
              l.text = t.ToolSet.trimRight(C.substr(0, A)), l.width = v, C = C.substr(A), p -= b
            } else {
              l.text = C, l.width = p - (f + c), C = k, p = f, d = y, g = y
            }
            l.y = S, S += l.height + u, l.width > this._textWidth && (this._textWidth = l.width), m = 0, b = 0, v = 0, this._lines.push(l)
          }
        } else {
          C += k, (l = n()).width = p, 0 == g && (0 == w && (w = this._fontSize), 0 == d && (d = w), g = d), l.height = d, w = d, l.textHeight = g, l.text = C, l.y = S, S += l.height + u, l.width > this._textWidth && (this._textWidth = l.width), this._lines.push(l), C = '', p = 0, d = 0, g = 0, m = 0, b = 0, v = 0
        }
      }
      C.length > 0 && ((l = n()).width = p, 0 == d && (d = w), 0 == g && (g = d), l.height = d, l.textHeight = g, l.text = C, l.y = S, l.width > this._textWidth && (this._textWidth = l.width), this._lines.push(l)), this._textWidth > 0 && (this._textWidth += 2 * o), 0 == this._lines.length ? this._textHeight = 0 : (l = this._lines[this._lines.length - 1], this._textHeight = l.y + l.height + r)
      var z, E = 0
      if (z = this._widthAutoSize ? 0 == this._textWidth ? 0 : this._textWidth : this.width, E = this._heightAutoSize ? 0 == this._textHeight ? 0 : this._textHeight : this.height, e && (this._updatingSize = !0, this.setSize(z, E), this._updatingSize = !1), 0 != z && 0 != E) {
        var M = o, F = 0, R = 0
        _ = this.width - 2 * o
        var D = this._lines.length
        for (a = 0; a < D; a++) {
          l = this._lines[a], M = o, F = this._align == t.AlignType.Center ? (_ - l.width) / 2 : this._align == t.AlignType.Right ? _ - l.width : 0, O = l.text.length
          for (var G = 0; G < O; G++) {
            var H
            if (10 != (B = (k = l.text.charAt(G)).charCodeAt(0))) if (32 != B) if (L = this._bitmapFont.glyphs[k]) R = (l.height + l.textHeight) / 2 - Math.ceil(L.lineHeight * T), this._bitmapPool.length ? H = this._bitmapPool.pop() : (H = new egret.Bitmap).smoothing = !0, H.x = M + F + Math.ceil(L.x * T), H.y = l.y + R + Math.ceil(L.y * T), H.$backupY = H.y, H.texture = L.texture, H.scaleX = T, H.scaleY = T, H.tint = I ? this._color : 16777215, this._bitmapContainer.addChild(H), M += c + Math.ceil(L.advance * T) else M += c else M += c + Math.ceil(this._fontSize / 2)
          }
        }
        this.doAlign()
      }
    }, s.prototype.handleSizeChanged = function () {
      this._updatingSize || (this._bitmapFont ? this._widthAutoSize ? this.doAlign() : this.render() : this._underConstruct ? (this._textField.width = this.width, this._textField.height = this.height) : this._widthAutoSize || (this._heightAutoSize ? this._textField.width = this.width : (this._textField.width = this.width, this._textField.height = this.height)))
    }, s.prototype.parseTemplate = function (t) {
      for (var e, i, n, o, r = 0, s = ''; -1 != (e = t.indexOf("{", r));) {
        if (e > 0 && 92 == t.charCodeAt(e - 1)) {
          s += t.substring(r, e - 1), s += '{', r = e + 1
        } else {
          if (s += t.substring(r, e), r = e, -1 == (e = t.indexOf('}', r))) break
          e != r + 1 ? (-1 != (i = (n = t.substring(r + 1, e)).indexOf('=')) ? s += null == (o = this._templateVars[n.substring(0, i)]) ? n.substring(i + 1) : o : null != (o = this._templateVars[n]) && (s += o), r = e + 1) : (s += t.substr(r, 2), r = e + 1)
        }
      }
      return r < t.length && (s += t.substr(r)), s
    }, Object.defineProperty(s.prototype, 'templateVars', {
      get: function () {
        return this._templateVars
      }, set: function (t) {
        (this._templateVars || t) && (this._templateVars = t, this.flushVars())
      }, enumerable: !0, configurable: !0
    }), s.prototype.setVar = function (t, e) {
      return this._templateVars || (this._templateVars = {}), this._templateVars[t] = e, this
    }, s.prototype.flushVars = function () {
      this.render()
    }, s.prototype.handleGrayedChanged = function () {
      e.prototype.handleGrayedChanged.call(this), this.updateTextFormat()
    }, s.prototype.doAlign = function () {
      var e
      if (this._verticalAlign == t.VertAlignType.Top || 0 == this._textHeight) {
        e = r
      } else {
        var i = this.height - this._textHeight
        i < 0 && (i = 0), e = this._verticalAlign == t.VertAlignType.Middle ? Math.floor(i / 2) : Math.floor(i)
      }
      for (var n = this._bitmapContainer.numChildren, o = 0; o < n; o++) {
        var s = this._bitmapContainer.getChildAt(o)
        s.y = s.$backupY + e
      }
    }, s.prototype.getProp = function (i) {
      switch (i) {
        case t.ObjectPropID.Color:
          return this.color
        case t.ObjectPropID.OutlineColor:
          return this.strokeColor
        case t.ObjectPropID.FontSize:
          return this.fontSize
        default:
          return e.prototype.getProp.call(this, i)
      }
    }, s.prototype.setProp = function (i, n) {
      switch (i) {
        case t.ObjectPropID.Color:
          this.color = n
          break
        case t.ObjectPropID.OutlineColor:
          this.strokeColor = n
          break
        case t.ObjectPropID.FontSize:
          this.fontSize = n
          break
        default:
          e.prototype.setProp.call(this, i, n)
      }
    }, s.prototype.setup_beforeAdd = function (i, n) {
      e.prototype.setup_beforeAdd.call(this, i, n), i.seek(n, 5), this._font = i.readS(), this._fontSize = i.readShort(), this._color = i.readColor(), this.align = i.readByte(), this.verticalAlign = i.readByte(), this._leading = i.readShort(), this._letterSpacing = i.readShort(), this._ubbEnabled = i.readBool(), this._autoSize = i.readByte(), this._widthAutoSize = this._autoSize == t.AutoSizeType.Both, this._heightAutoSize = this._autoSize == t.AutoSizeType.Both || this._autoSize == t.AutoSizeType.Height, this._underline = i.readBool(), this._textField.italic = i.readBool(), this._textField.bold = i.readBool(), this._textField.multiline = !i.readBool(), i.readBool() && (this._textField.strokeColor = i.readColor(), this.stroke = i.readFloat() + 1), i.readBool() && i.skip(12), i.readBool() && (this._templateVars = {})
    }, s.prototype.setup_afterAdd = function (t, i) {
      e.prototype.setup_afterAdd.call(this, t, i), this.updateTextFormat(), t.seek(i, 6)
      var n = t.readS()
      null != n && (this.text = n), this._sizeDirty = !1
    }, s._htmlParser = new egret.HtmlTextParser, s
  }(t.GObject)
  t.GTextField = e
  var i = []

  function n () {
    if (i.length) {
      var t = i.pop()
      return t.width = 0, t.height = 0, t.textHeight = 0, t.text = null, t.y = 0, t
    }
    return {width: 0, height: 0, textHeight: 0, text: null, y: 0}
  }

  var o = 2, r = 2
}(fgui || (fgui = {})), function (t) {
  var e = function (e) {
    function i () {
      var t = e.call(this) || this
      return t._textField.touchEnabled = !0, t
    }

    return __extends(i, e), i.prototype.updateTextFieldText = function () {
      var e, i = this._text
      if (this._templateVars && (i = this.parseTemplate(i)), e = this._ubbEnabled ? t.GTextField._htmlParser.parser(t.UBBParser.inst.parse(i)) : t.GTextField._htmlParser.parser(i), this._underline) {
        for (var n = 0; n < e.length; n++) {
          var o = e[n]
          o.style ? o.style.underline = !0 : o.style = {underline: !0}
        }
      }
      this._textField.textFlow = e
    }, i
  }(t.GTextField)
  t.GRichTextField = e
}(fgui || (fgui = {})), function (t) {
  var e = function (e) {
    function i () {
      var t = e.call(this) || this
      return null == i._inst && (i._inst = t), t.opaque = !1, t._volumeScale = 1, t._popupStack = new Array, t._justClosedPopups = new Array, t.displayObject.addEventListener(egret.Event.ADDED_TO_STAGE, t.__addedToStage, t), t
    }

    return __extends(i, e), Object.defineProperty(i, 'inst', {
      get: function () {
        return null == i._inst && new i, i._inst
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'nativeStage', {
      get: function () {
        return this._nativeStage
      }, enumerable: !0, configurable: !0
    }), i.prototype.showWindow = function (t) {
      this.addChild(t), t.requestFocus(), t.x > this.width ? t.x = this.width - t.width : t.x + t.width < 0 && (t.x = 0), t.y > this.height ? t.y = this.height - t.height : t.y + t.height < 0 && (t.y = 0), this.adjustModalLayer()
    }, i.prototype.hideWindow = function (t) {
      t.hide()
    }, i.prototype.hideWindowImmediately = function (t) {
      t.parent == this && this.removeChild(t), this.adjustModalLayer()
    }, i.prototype.bringToFront = function (e) {
      var i, n = this.numChildren
      for (i = null == this._modalLayer.parent || e.modal ? n - 1 : this.getChildIndex(this._modalLayer) - 1; i >= 0; i--) {
        var o = this.getChildAt(i)
        if (o == e) return
        if (o instanceof t.Window) break
      }
      i >= 0 && this.setChildIndex(e, i)
    }, i.prototype.showModalWait = function (e) {
      null != t.UIConfig.globalModalWaiting && (null == this._modalWaitPane && (this._modalWaitPane = t.UIPackage.createObjectFromURL(t.UIConfig.globalModalWaiting)), this._modalWaitPane.setSize(this.width, this.height), this._modalWaitPane.addRelation(this, t.RelationType.Size), this.addChild(this._modalWaitPane), this._modalWaitPane.text = e)
    }, i.prototype.closeModalWait = function () {
      null != this._modalWaitPane && null != this._modalWaitPane.parent && this.removeChild(this._modalWaitPane)
    }, i.prototype.closeAllExceptModals = function () {
      for (var e = this._children.slice(), i = e.length, n = 0; n < i; n++) {
        var o = e[n]
        o instanceof t.Window && !o.modal && o.hide()
      }
    }, i.prototype.closeAllWindows = function () {
      for (var e = this._children.slice(), i = e.length, n = 0; n < i; n++) {
        var o = e[n]
        o instanceof t.Window && o.hide()
      }
    }, i.prototype.getTopWindow = function () {
      for (var e = this.numChildren - 1; e >= 0; e--) {
        var i = this.getChildAt(e)
        if (i instanceof t.Window) return i
      }
      return null
    }, Object.defineProperty(i.prototype, 'modalLayer', {
      get: function () {
        return this._modalLayer
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'hasModalWindow', {
      get: function () {
        return null != this._modalLayer.parent
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'modalWaiting', {
      get: function () {
        return this._modalWaitPane && this._modalWaitPane.inContainer
      }, enumerable: !0, configurable: !0
    }), i.prototype.showPopup = function (e, n, o) {
      if (this._popupStack.length > 0) {
        var r = this._popupStack.indexOf(e)
        if (-1 != r) for (var s = this._popupStack.length - 1; s >= r; s--) this.removeChild(this._popupStack.pop())
      }
      if (this._popupStack.push(e), n) {
        for (var a = n; a;) {
          if (a.parent == this) {
            e.sortingOrder < a.sortingOrder && (e.sortingOrder = a.sortingOrder)
            break
          }
          a = a.parent
        }
      }
      var h
      this.addChild(e), this.adjustModalLayer()
      var l, c, u = 0, _ = 0
      n ? (h = n.localToRoot(), u = n.width, _ = n.height) : h = this.globalToLocal(i.mouseX, i.mouseY), (l = h.x) + e.width > this.width && (l = l + u - e.width), c = h.y + _, ((void 0 === o || o === t.PopupDirection.Auto) && h.y + e.height > this.height || !1 === o || o === t.PopupDirection.Up) && (c = h.y - e.height - 1) < 0 && (c = 0, l += u / 2), e.x = l, e.y = c
    }, i.prototype.togglePopup = function (t, e, i) {
      -1 == this._justClosedPopups.indexOf(t) && this.showPopup(t, e, i)
    }, i.prototype.hidePopup = function (t) {
      if (t) {
        var e = this._popupStack.indexOf(t)
        if (-1 != e) for (var i = this._popupStack.length - 1; i >= e; i--) this.closePopup(this._popupStack.pop())
      } else {
        for (i = this._popupStack.length - 1; i >= 0; i--) this.closePopup(this._popupStack[i])
        this._popupStack.length = 0
      }
    }, Object.defineProperty(i.prototype, 'hasAnyPopup', {
      get: function () {
        return 0 != this._popupStack.length
      }, enumerable: !0, configurable: !0
    }), i.prototype.closePopup = function (e) {
      e.parent && (e instanceof t.Window ? e.hide() : this.removeChild(e))
    }, i.prototype.showTooltips = function (e) {
      if (null == this._defaultTooltipWin) {
        var i = t.UIConfig.tooltipsWin
        if (!i) return void console.error('UIConfig.tooltipsWin not defined')
        this._defaultTooltipWin = t.UIPackage.createObjectFromURL(i)
      }
      this._defaultTooltipWin.text = e, this.showTooltipsWin(this._defaultTooltipWin)
    }, i.prototype.showTooltipsWin = function (t, e) {
      this.hideTooltips(), this._tooltipWin = t
      var n = 0, o = 0
      e ? (n = e.x, o = e.y) : (n = i.mouseX + 10, o = i.mouseY + 20)
      var r = this.globalToLocal(n, o)
      n = r.x, o = r.y, n + this._tooltipWin.width > this.width && (n = n - this._tooltipWin.width - 1) < 0 && (n = 10), o + this._tooltipWin.height > this.height && (o = o - this._tooltipWin.height - 1, n - this._tooltipWin.width - 1 > 0 && (n = n - this._tooltipWin.width - 1), o < 0 && (o = 10)), this._tooltipWin.x = n, this._tooltipWin.y = o, this.addChild(this._tooltipWin)
    }, i.prototype.hideTooltips = function () {
      this._tooltipWin && (this._tooltipWin.parent && this.removeChild(this._tooltipWin), this._tooltipWin = null)
    }, i.prototype.getObjectUnderPoint = function (e, i) {
      var n = this._nativeStage.$hitTest(e, i)
      return n ? t.ToolSet.displayObjectToGObject(n) : null
    }, Object.defineProperty(i.prototype, 'focus', {
      get: function () {
        return null
      }, set: function (t) {
      }, enumerable: !0, configurable: !0
    }), i.prototype.setFocus = function (t) {
    }, Object.defineProperty(i.prototype, 'volumeScale', {
      get: function () {
        return this._volumeScale
      }, set: function (t) {
        this._volumeScale = t
      }, enumerable: !0, configurable: !0
    }), i.prototype.playOneShotSound = function (t, e) {
      e = e || 1
      var i = this._volumeScale * e
      t.play(0, 1).volume = i
    }, i.prototype.adjustModalLayer = function () {
      var e = this.numChildren
      this._modalWaitPane && this._modalWaitPane.parent && this.setChildIndex(this._modalWaitPane, e - 1)
      for (var i = e - 1; i >= 0; i--) {
        var n = this.getChildAt(i)
        if (n instanceof t.Window && n.modal) return void (null == this._modalLayer.parent ? this.addChildAt(this._modalLayer, i) : this.setChildIndexBefore(this._modalLayer, i))
      }
      this._modalLayer.parent && this.removeChild(this._modalLayer)
    }, i.prototype.__addedToStage = function (e) {
      this.displayObject.removeEventListener(egret.Event.ADDED_TO_STAGE, this.__addedToStage, this), this._nativeStage = this.displayObject.stage, this._nativeStage.addEventListener(egret.TouchEvent.TOUCH_BEGIN, this.__stageMouseDownCapture, this, !0), this._nativeStage.addEventListener(egret.TouchEvent.TOUCH_END, this.__stageMouseUpCapture, this, !0), this._nativeStage.addEventListener(egret.TouchEvent.TOUCH_MOVE, this.__stageMouseMoveCapture, this, !0), this._modalLayer = new t.GGraph, this._modalLayer.setSize(this.width, this.height), this._modalLayer.drawRect(0, 0, 0, t.UIConfig.modalLayerColor, t.UIConfig.modalLayerAlpha), this._modalLayer.addRelation(this, t.RelationType.Size), this.displayObject.stage.addEventListener(egret.Event.RESIZE, this.__winResize, this), this.__winResize(null)
    }, i.prototype.__stageMouseDownCapture = function (t) {
      if (i.mouseX = t.stageX, i.mouseY = t.stageY, i.touchDown = !0, this._tooltipWin && this.hideTooltips(), this._justClosedPopups.length = 0, this._popupStack.length > 0) {
        for (var e = t.target; e != this.displayObject.stage && e;) {
          if (e.$owner) {
            var n = this._popupStack.indexOf(e.$owner)
            if (-1 != n) {
              for (var o = this._popupStack.length - 1; o > n; o--) {
                var r = this._popupStack.pop()
                this.closePopup(r), this._justClosedPopups.push(r)
              }
              return
            }
          }
          e = e.parent
        }
        for (o = this._popupStack.length - 1; o >= 0; o--) r = this._popupStack[o], this.closePopup(r), this._justClosedPopups.push(r)
        this._popupStack.length = 0
      }
    }, i.prototype.__stageMouseMoveCapture = function (t) {
      i.mouseX = t.stageX, i.mouseY = t.stageY
    }, i.prototype.__stageMouseUpCapture = function (t) {
      i.touchDown = !1
    }, i.prototype.__winResize = function (t) {
      this.setSize(this._nativeStage.stageWidth, this._nativeStage.stageHeight)
    }, i.prototype.updateContentScaleLevel = function () {
      i.contentScaleLevel = 0
    }, i.contentScaleLevel = 0, i.contentScaleFactor = 1, i
  }(t.GComponent)
  t.GRoot = e
}(fgui || (fgui = {})), function (t) {
  var e = function (t) {
    function e () {
      var e = t.call(this) || this
      return e._dragOffset = new egret.Point, e._scrollPerc = 0, e
    }

    return __extends(e, t), e.prototype.setScrollPane = function (t, e) {
      this._target = t, this._vertical = e
    }, e.prototype.setDisplayPerc = function (t) {
      this._vertical ? (this._fixedGripSize || (this._grip.height = Math.floor(t * this._bar.height)), this._grip.y = this._bar.y + (this._bar.height - this._grip.height) * this._scrollPerc) : (this._fixedGripSize || (this._grip.width = Math.floor(t * this._bar.width)), this._grip.x = this._bar.x + (this._bar.width - this._grip.width) * this._scrollPerc), this._grip.visible = 0 != t && 1 != t
    }, e.prototype.setScrollPerc = function (t) {
      this._scrollPerc = t, this._vertical ? this._grip.y = this._bar.y + (this._bar.height - this._grip.height) * this._scrollPerc : this._grip.x = this._bar.x + (this._bar.width - this._grip.width) * this._scrollPerc
    }, Object.defineProperty(e.prototype, 'minSize', {
      get: function () {
        return this._vertical ? (this._arrowButton1 ? this._arrowButton1.height : 0) + (this._arrowButton2 ? this._arrowButton2.height : 0) : (this._arrowButton1 ? this._arrowButton1.width : 0) + (this._arrowButton2 ? this._arrowButton2.width : 0)
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(e.prototype, 'gripDragging', {
      get: function () {
        return this._gripDragging
      }, enumerable: !0, configurable: !0
    }), e.prototype.constructExtension = function (t) {
      t.seek(0, 6), this._fixedGripSize = t.readBool(), this._grip = this.getChild('grip'), this._grip ? (this._bar = this.getChild('bar'), this._bar ? (this._arrowButton1 = this.getChild('arrow1'), this._arrowButton2 = this.getChild('arrow2'), this._grip.addEventListener(egret.TouchEvent.TOUCH_BEGIN, this.__gripMouseDown, this), this._arrowButton1 && this._arrowButton1.addEventListener(egret.TouchEvent.TOUCH_BEGIN, this.__arrowButton1Click, this), this._arrowButton2 && this._arrowButton2.addEventListener(egret.TouchEvent.TOUCH_BEGIN, this.__arrowButton2Click, this), this.addEventListener(egret.TouchEvent.TOUCH_BEGIN, this.__barMouseDown, this)) : console.error('bar')) : console.error('grip')
    }, e.prototype.__gripMouseDown = function (t) {
      this._gripDragging = !0, this._target.updateScrollBarVisible(), t.stopPropagation(), this.globalToLocal(t.stageX, t.stageY, this._dragOffset), this._dragOffset.x -= this._grip.x, this._dragOffset.y -= this._grip.y, this._grip.displayObject.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE, this.__gripMouseMove, this), this._grip.displayObject.stage.addEventListener(egret.TouchEvent.TOUCH_END, this.__gripMouseUp, this)
    }, e.prototype.__gripMouseMove = function (t) {
      if (this.onStage) {
        var e = this.globalToLocal(t.stageX, t.stageY, i)
        if (this._vertical) {
          var n = e.y - this._dragOffset.y
          this._target.setPercY((n - this._bar.y) / (this._bar.height - this._grip.height), !1)
        } else {
          var o = e.x - this._dragOffset.x
          this._target.setPercX((o - this._bar.x) / (this._bar.width - this._grip.width), !1)
        }
      }
    }, e.prototype.__gripMouseUp = function (t) {
      var e = t.currentTarget
      e.removeEventListener(egret.TouchEvent.TOUCH_MOVE, this.__gripMouseMove, this), e.removeEventListener(egret.TouchEvent.TOUCH_END, this.__gripMouseUp, this), this.onStage || (this._gripDragging = !1, this._target.updateScrollBarVisible())
    }, e.prototype.__arrowButton1Click = function (t) {
      t.stopPropagation(), this._vertical ? this._target.scrollUp() : this._target.scrollLeft()
    }, e.prototype.__arrowButton2Click = function (t) {
      t.stopPropagation(), this._vertical ? this._target.scrollDown() : this._target.scrollRight()
    }, e.prototype.__barMouseDown = function (t) {
      var e = this._grip.globalToLocal(t.stageX, t.stageY, i)
      this._vertical ? e.y < 0 ? this._target.scrollUp(4) : this._target.scrollDown(4) : e.x < 0 ? this._target.scrollLeft(4) : this._target.scrollRight(4)
    }, e
  }(t.GComponent)
  t.GScrollBar = e
  var i = new egret.Point
}(fgui || (fgui = {})), function (t) {
  var e = function (e) {
    function n () {
      var i = e.call(this) || this
      return i._min = 0, i._max = 0, i._value = 0, i._barMaxWidth = 0, i._barMaxHeight = 0, i._barMaxWidthDelta = 0, i._barMaxHeightDelta = 0, i._clickPercent = 0, i._barStartX = 0, i._barStartY = 0, i.changeOnClick = !0, i.canDrag = !0, i._titleType = t.ProgressTitleType.Percent, i._value = 50, i._max = 100, i._clickPos = new egret.Point, i
    }

    return __extends(n, e), Object.defineProperty(n.prototype, 'titleType', {
      get: function () {
        return this._titleType
      }, set: function (t) {
        this._titleType = t
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(n.prototype, 'wholeNumbers', {
      get: function () {
        return this._wholeNumbers
      }, set: function (t) {
        this._wholeNumbers != t && (this._wholeNumbers = t, this.update())
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(n.prototype, 'min', {
      get: function () {
        return this._min
      }, set: function (t) {
        this._min != t && (this._min = t, this.update())
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(n.prototype, 'max', {
      get: function () {
        return this._max
      }, set: function (t) {
        this._max != t && (this._max = t, this.update())
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(n.prototype, 'value', {
      get: function () {
        return this._value
      }, set: function (t) {
        this._value != t && (this._value = t, this.update())
      }, enumerable: !0, configurable: !0
    }), n.prototype.update = function () {
      this.updateWithPercent((this._value - this._min) / (this._max - this._min))
    }, n.prototype.updateWithPercent = function (e, i) {
      if (e = t.ToolSet.clamp01(e), i) {
        var n = t.ToolSet.clamp(this._min + (this._max - this._min) * e, this._min, this._max)
        this._wholeNumbers && (n = Math.round(n), e = t.ToolSet.clamp01((n - this._min) / (this._max - this._min))), n != this._value && (this._value = n, this.dispatchEvent(new t.StateChangeEvent(t.StateChangeEvent.CHANGED)))
      }
      if (this._titleObject) {
        switch (this._titleType) {
          case t.ProgressTitleType.Percent:
            this._titleObject.text = Math.floor(100 * e) + '%'
            break
          case t.ProgressTitleType.ValueAndMax:
            this._titleObject.text = this._value + '/' + this._max
            break
          case t.ProgressTitleType.Value:
            this._titleObject.text = '' + this._value
            break
          case t.ProgressTitleType.Max:
            this._titleObject.text = '' + this._max
        }
      }
      var o = this.width - this._barMaxWidthDelta, r = this.height - this._barMaxHeightDelta
      this._reverse ? (this._barObjectH && (this._barObjectH.width = Math.round(o * e), this._barObjectH.x = this._barStartX + (o - this._barObjectH.width)), this._barObjectV && (this._barObjectV.height = Math.round(r * e), this._barObjectV.y = this._barStartY + (r - this._barObjectV.height))) : (this._barObjectH && (this._barObjectH.width = Math.round(o * e)), this._barObjectV && (this._barObjectV.height = Math.round(r * e)))
    }, n.prototype.constructExtension = function (t) {
      t.seek(0, 6), this._titleType = t.readByte(), this._reverse = t.readBool(), t.version >= 2 && (this._wholeNumbers = t.readBool(), this.changeOnClick = t.readBool()), this._titleObject = this.getChild('title'), this._barObjectH = this.getChild('bar'), this._barObjectV = this.getChild('bar_v'), this._gripObject = this.getChild('grip'), this._barObjectH && (this._barMaxWidth = this._barObjectH.width, this._barMaxWidthDelta = this.width - this._barMaxWidth, this._barStartX = this._barObjectH.x), this._barObjectV && (this._barMaxHeight = this._barObjectV.height, this._barMaxHeightDelta = this.height - this._barMaxHeight, this._barStartY = this._barObjectV.y), this._gripObject && this._gripObject.addEventListener(egret.TouchEvent.TOUCH_BEGIN, this.__gripMouseDown, this), this.displayObject.addEventListener(egret.TouchEvent.TOUCH_BEGIN, this.__barMouseDown, this)
    }, n.prototype.handleSizeChanged = function () {
      e.prototype.handleSizeChanged.call(this), this._barObjectH && (this._barMaxWidth = this.width - this._barMaxWidthDelta), this._barObjectV && (this._barMaxHeight = this.height - this._barMaxHeightDelta), this._underConstruct || this.update()
    }, n.prototype.setup_afterAdd = function (t, i) {
      e.prototype.setup_afterAdd.call(this, t, i), t.seek(i, 6) && t.readByte() == this.packageItem.objectType ? (this._value = t.readInt(), this._max = t.readInt(), t.version >= 2 && (this._min = t.readInt()), this.update()) : this.update()
    }, n.prototype.__gripMouseDown = function (e) {
      this.canDrag = !0, e.stopPropagation(), this._clickPos = this.globalToLocal(e.stageX, e.stageY), this._clickPercent = t.ToolSet.clamp01((this._value - this._min) / (this._max - this._min)), this._gripObject.displayObject.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE, this.__gripMouseMove, this), this._gripObject.displayObject.stage.addEventListener(egret.TouchEvent.TOUCH_END, this.__gripMouseUp, this)
    }, n.prototype.__gripMouseMove = function (t) {
      if (this.canDrag) {
        var e, n = this.globalToLocal(t.stageX, t.stageY, i), o = n.x - this._clickPos.x, r = n.y - this._clickPos.y
        this._reverse && (o = -o, r = -r), e = this._barObjectH ? this._clickPercent + o / this._barMaxWidth : this._clickPercent + r / this._barMaxHeight, this.updateWithPercent(e, !0)
      }
    }, n.prototype.__gripMouseUp = function (t) {
      t.currentTarget.removeEventListener(egret.TouchEvent.TOUCH_MOVE, this.__gripMouseMove, this), t.currentTarget.removeEventListener(egret.TouchEvent.TOUCH_END, this.__gripMouseUp, this)
    }, n.prototype.__barMouseDown = function (e) {
      if (this.changeOnClick) {
        var n, o = this._gripObject.globalToLocal(e.stageX, e.stageY, i),
          r = t.ToolSet.clamp01((this._value - this._min) / (this._max - this._min))
        this._barObjectH && (n = o.x / this._barMaxWidth), this._barObjectV && (n = o.y / this._barMaxHeight), this._reverse ? r -= n : r += n, this.updateWithPercent(r, !0)
      }
    }, n
  }(t.GComponent)
  t.GSlider = e
  var i = new egret.Point
}(fgui || (fgui = {})), function (t) {
  var e = function (e) {
    function i () {
      var t = e.call(this) || this
      return t._widthAutoSize = !1, t._heightAutoSize = !1, t.displayObject.touchChildren = !0, t._textField.type = egret.TextFieldType.INPUT, t._textField.addEventListener(egret.Event.CHANGE, t.__textChanged, t), t._textField.addEventListener(egret.FocusEvent.FOCUS_IN, t.__focusIn, t), t._textField.addEventListener(egret.FocusEvent.FOCUS_OUT, t.__focusOut, t), t
    }

    return __extends(i, e), i.prototype.dispose = function () {
      e.prototype.dispose.call(this)
    }, Object.defineProperty(i.prototype, 'editable', {
      get: function () {
        return this._textField.type == egret.TextFieldType.INPUT
      }, set: function (t) {
        this._textField.type = t ? egret.TextFieldType.INPUT : egret.TextFieldType.DYNAMIC
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'maxLength', {
      get: function () {
        return this._textField.maxChars
      }, set: function (t) {
        this._textField.maxChars = t
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'promptText', {
      get: function () {
        return this._promptText
      }, set: function (t) {
        this._promptText = t, this.updateTextFieldText()
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'restrict', {
      get: function () {
        return this._textField.restrict
      }, set: function (t) {
        this._textField.restrict = t
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'password', {
      get: function () {
        return this._password
      }, set: function (t) {
        this._password != t && (this._password = t, this._textField.displayAsPassword = this._password, this._textField.inputType = t ? egret.TextFieldInputType.PASSWORD : egret.TextFieldInputType.TEXT, this.render())
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'verticalAlign', {
      get: function () {
        return this._verticalAlign
      }, set: function (t) {
        this._verticalAlign != t && (this._verticalAlign = t, this.updateVertAlign())
      }, enumerable: !0, configurable: !0
    }), i.prototype.updateVertAlign = function () {
      switch (this._verticalAlign) {
        case t.VertAlignType.Top:
          this._textField.verticalAlign = egret.VerticalAlign.TOP
          break
        case t.VertAlignType.Middle:
          this._textField.verticalAlign = egret.VerticalAlign.MIDDLE
          break
        case t.VertAlignType.Bottom:
          this._textField.verticalAlign = egret.VerticalAlign.BOTTOM
      }
    }, i.prototype.updateTextFieldText = function () {
      !this._text && this._promptText ? (this._textField.displayAsPassword = !1, this._textField.textFlow = (new egret.HtmlTextParser).parser(t.UBBParser.inst.parse(this._promptText))) : (this._textField.displayAsPassword = this._password, this._ubbEnabled ? this._textField.textFlow = (new egret.HtmlTextParser).parser(t.UBBParser.inst.parse(t.ToolSet.encodeHTML(this._text))) : this._textField.text = this._text)
    }, i.prototype.handleSizeChanged = function () {
      this._updatingSize || (this._textField.width = Math.ceil(this.width), this._textField.height = Math.ceil(this.height))
    }, i.prototype.setup_beforeAdd = function (t, i) {
      e.prototype.setup_beforeAdd.call(this, t, i), t.seek(i, 4)
      var n = t.readS()
      null != n && (this._promptText = n), null != (n = t.readS()) && (this._textField.restrict = n)
      var o = t.readInt()
      0 != o && (this._textField.maxChars = o), o = t.readInt(), t.readBool() && (this.password = !0), this.updateVertAlign()
    }, i.prototype.setup_afterAdd = function (i, n) {
      e.prototype.setup_afterAdd.call(this, i, n), !this._text && this._promptText && (this._textField.displayAsPassword = !1, this._textField.textFlow = (new egret.HtmlTextParser).parser(t.UBBParser.inst.parse(t.ToolSet.encodeHTML(this._promptText))))
    }, i.prototype.__textChanged = function (t) {
      this._text = this._textField.text
    }, i.prototype.__focusIn = function (t) {
      !this._text && this._promptText && (this._textField.displayAsPassword = this._password, this._textField.text = '')
    }, i.prototype.__focusOut = function (e) {
      this._text = this._textField.text, !this._text && this._promptText && (this._textField.displayAsPassword = !1, this._textField.textFlow = (new egret.HtmlTextParser).parser(t.UBBParser.inst.parse(t.ToolSet.encodeHTML(this._promptText))))
    }, i
  }(t.GTextField)
  t.GTextInput = e
}(fgui || (fgui = {})), function (t) {
  var e = function (e) {
    function n () {
      var i = e.call(this) || this
      return i._indent = 15, i._rootNode = new t.GTreeNode(!0), i._rootNode._setTree(i), i._rootNode.expanded = !0, i
    }

    return __extends(n, e), Object.defineProperty(n.prototype, 'rootNode', {
      get: function () {
        return this._rootNode
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(n.prototype, 'indent', {
      get: function () {
        return this._indent
      }, set: function (t) {
        this._indent = t
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(n.prototype, 'clickToExpand', {
      get: function () {
        return this._clickToExpand
      }, set: function (t) {
        this._clickToExpand = t
      }, enumerable: !0, configurable: !0
    }), n.prototype.getSelectedNode = function () {
      return -1 != this.selectedIndex ? this.getChildAt(this.selectedIndex)._treeNode : null
    }, n.prototype.getSelectedNodes = function (t) {
      t || (t = new Array), i.length = 0, e.prototype.getSelection.call(this, i)
      for (var n = i.length, o = new Array, r = 0; r < n; r++) {
        var s = this.getChildAt(i[r])._treeNode
        o.push(s)
      }
      return o
    }, n.prototype.selectNode = function (t, e) {
      for (var i = t.parent; i && i != this._rootNode;) i.expanded = !0, i = i.parent
      t._cell && this.addSelection(this.getChildIndex(t._cell), e)
    }, n.prototype.unselectNode = function (t) {
      t._cell && this.removeSelection(this.getChildIndex(t._cell))
    }, n.prototype.expandAll = function (t) {
      t || (t = this._rootNode), t.expanded = !0
      for (var e = t.numChildren, i = 0; i < e; i++) {
        var n = t.getChildAt(i)
        n.isFolder && this.expandAll(n)
      }
    }, n.prototype.collapseAll = function (t) {
      t || (t = this._rootNode), t != this._rootNode && (t.expanded = !1)
      for (var e = t.numChildren, i = 0; i < e; i++) {
        var n = t.getChildAt(i)
        n.isFolder && this.collapseAll(n)
      }
    }, n.prototype.createCell = function (e) {
      var i = this.getFromPool(e._resURL ? e._resURL : this.defaultItem)
      if (!(i instanceof t.GComponent)) throw new Error('cannot create tree node object.')
      i._treeNode = e, e._cell = i
      var n, o = i.getChild('indent')
      null != o && (o.width = (e.level - 1) * this._indent), (n = i.getController('expanded')) && (n.addEventListener(t.StateChangeEvent.CHANGED, this.__expandedStateChanged, this), n.selectedIndex = e.expanded ? 1 : 0), (n = i.getController('leaf')) && (n.selectedIndex = e.isFolder ? 0 : 1), e.isFolder && i.addEventListener(egret.TouchEvent.TOUCH_BEGIN, this.__cellMouseDown, this), this.treeNodeRender && this.treeNodeRender.call(this.callbackThisObj, e, i)
    }, n.prototype._afterInserted = function (t) {
      t._cell || this.createCell(t)
      var e = this.getInsertIndexForNode(t)
      this.addChildAt(t._cell, e), this.treeNodeRender && this.treeNodeRender.call(this.callbackThisObj, t, t._cell), t.isFolder && t.expanded && this.checkChildren(t, e)
    }, n.prototype.getInsertIndexForNode = function (t) {
      var e = t.getPrevSibling()
      null == e && (e = t.parent)
      for (var i = this.getChildIndex(e._cell) + 1, n = t.level, o = this.numChildren, r = i; r < o; r++) {
        if (this.getChildAt(r)._treeNode.level <= n) break
        i++
      }
      return i
    }, n.prototype._afterRemoved = function (t) {
      this.removeNode(t)
    }, n.prototype._afterExpanded = function (t) {
      if (t != this._rootNode) {
        if (null != this.treeNodeWillExpand && this.treeNodeWillExpand.call(this.callbackThisObj, t, !0), null != t._cell) {
          this.treeNodeRender && this.treeNodeRender.call(this.callbackThisObj, t, t._cell)
          var e = t._cell.getController('expanded')
          e && (e.selectedIndex = 1), t._cell.parent && this.checkChildren(t, this.getChildIndex(t._cell))
        }
      } else {
        this.checkChildren(this._rootNode, 0)
      }
    }, n.prototype._afterCollapsed = function (t) {
      if (t != this._rootNode) {
        if (this.treeNodeWillExpand && this.treeNodeWillExpand.call(this.callbackThisObj, t, !1), null != t._cell) {
          this.treeNodeRender && this.treeNodeRender.call(this.callbackThisObj, t, t._cell)
          var e = t._cell.getController('expanded')
          e && (e.selectedIndex = 0), t._cell.parent && this.hideFolderNode(t)
        }
      } else {
        this.checkChildren(this._rootNode, 0)
      }
    }, n.prototype._afterMoved = function (t) {
      var e, i = this.getChildIndex(t._cell)
      e = t.isFolder ? this.getFolderEndIndex(i, t.level) : i + 1
      var n, o, r = this.getInsertIndexForNode(t), s = e - i
      if (r < i) for (n = 0; n < s; n++) o = this.getChildAt(i + n), this.setChildIndex(o, r + n) else for (n = 0; n < s; n++) o = this.getChildAt(i), this.setChildIndex(o, r)
    }, n.prototype.getFolderEndIndex = function (t, e) {
      for (var i = this.numChildren, n = t + 1; n < i; n++) {
        if (this.getChildAt(n)._treeNode.level <= e) return n
      }
      return i
    }, n.prototype.checkChildren = function (t, e) {
      for (var i = t.numChildren, n = 0; n < i; n++) {
        e++
        var o = t.getChildAt(n)
        null == o._cell && this.createCell(o), o._cell.parent || this.addChildAt(o._cell, e), o.isFolder && o.expanded && (e = this.checkChildren(o, e))
      }
      return e
    }, n.prototype.hideFolderNode = function (t) {
      for (var e = t.numChildren, i = 0; i < e; i++) {
        var n = t.getChildAt(i)
        n._cell && this.removeChild(n._cell), n.isFolder && n.expanded && this.hideFolderNode(n)
      }
    }, n.prototype.removeNode = function (t) {
      if (t._cell && (t._cell.parent && this.removeChild(t._cell), this.returnToPool(t._cell), t._cell._treeNode = null, t._cell = null), t.isFolder) {
        for (var e = t.numChildren, i = 0; i < e; i++) {
          var n = t.getChildAt(i)
          this.removeNode(n)
        }
      }
    }, n.prototype.__cellMouseDown = function (t) {
      var e = t.currentTarget._treeNode
      this._expandedStatusInEvt = e.expanded
    }, n.prototype.__expandedStateChanged = function (t) {
      var e = t.currentTarget
      e.parent._treeNode.expanded = 1 == e.selectedIndex
    }, n.prototype.dispatchItemEvent = function (t) {
      if (0 != this._clickToExpand) {
        var i = t.itemObject._treeNode
        i && i.isFolder && this._expandedStatusInEvt == i.expanded && (2 == this._clickToExpand || (i.expanded = !i.expanded))
      }
      e.prototype.dispatchItemEvent.call(this, t)
    }, n.prototype.setup_beforeAdd = function (t, i) {
      e.prototype.setup_beforeAdd.call(this, t, i), t.seek(i, 9), this._indent = t.readInt(), this._clickToExpand = t.readByte()
    }, n.prototype.readItems = function (e) {
      var i, n, o, r, s, a, h, l = 0
      for (i = e.readShort(), n = 0; n < i; n++) {
        if (o = e.readShort(), o += e.position, null != (r = e.readS()) || (r = this.defaultItem)) {
          s = e.readBool(), h = e.readByte()
          var c = new t.GTreeNode(s, r)
          if (c.expanded = !0, 0 == n) {
            this._rootNode.addChild(c)
          } else if (h > l) {
            a.addChild(c)
          } else if (h < l) {
            for (var u = h; u <= l; u++) a = a.parent
            a.addChild(c)
          } else {
            a.parent.addChild(c)
          }
          a = c, l = h, this.setupItem(e, c.cell), e.position = o
        } else {
          e.position = o
        }
      }
    }, n
  }(t.GList)
  t.GTree = e
  var i = new Array
}(fgui || (fgui = {})), function (t) {
  var e = function () {
    function t (t, e) {
      this._level = 0, this._resURL = e, t && (this._children = new Array)
    }

    return Object.defineProperty(t.prototype, 'expanded', {
      get: function () {
        return this._expanded
      }, set: function (t) {
        this._children && this._expanded != t && (this._expanded = t, this._tree && (this._expanded ? this._tree._afterExpanded(this) : this._tree._afterCollapsed(this)))
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(t.prototype, 'isFolder', {
      get: function () {
        return null != this._children
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(t.prototype, 'parent', {
      get: function () {
        return this._parent
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(t.prototype, 'text', {
      get: function () {
        return this._cell ? this._cell.text : null
      }, set: function (t) {
        this._cell && (this._cell.text = t)
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(t.prototype, 'icon', {
      get: function () {
        return this._cell ? this._cell.icon : null
      }, set: function (t) {
        this._cell && (this._cell.icon = t)
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(t.prototype, 'cell', {
      get: function () {
        return this._cell
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(t.prototype, 'level', {
      get: function () {
        return this._level
      }, enumerable: !0, configurable: !0
    }), t.prototype._setLevel = function (t) {
      this._level = t
    }, t.prototype.addChild = function (t) {
      return this.addChildAt(t, this._children.length), t
    }, t.prototype.addChildAt = function (t, e) {
      if (!t) throw new Error('child is null')
      var i = this._children.length
      if (e >= 0 && e <= i) {
        if (t._parent == this) this.setChildIndex(t, e) else t._parent && t._parent.removeChild(t), e == this._children.length ? this._children.push(t) : this._children.splice(e, 0, t), t._parent = this, t._level = this._level + 1, t._setTree(this._tree), (this._tree && this == this._tree.rootNode || this._cell && this._cell.parent && this._expanded) && this._tree._afterInserted(t)
        return t
      }
      throw new RangeError('Invalid child index')
    }, t.prototype.removeChild = function (t) {
      var e = this._children.indexOf(t)
      return -1 != e && this.removeChildAt(e), t
    }, t.prototype.removeChildAt = function (t) {
      if (t >= 0 && t < this.numChildren) {
        var e = this._children[t]
        return this._children.splice(t, 1), e._parent = null, this._tree && (e._setTree(null), this._tree._afterRemoved(e)), e
      }
      throw 'Invalid child index'
    }, t.prototype.removeChildren = function (t, e) {
      t = t || 0, null == e && (e = -1), (e < 0 || e >= this.numChildren) && (e = this.numChildren - 1)
      for (var i = t; i <= e; ++i) this.removeChildAt(t)
    }, t.prototype.getChildAt = function (t) {
      if (t >= 0 && t < this.numChildren) return this._children[t]
      throw 'Invalid child index'
    }, t.prototype.getChildIndex = function (t) {
      return this._children.indexOf(t)
    }, t.prototype.getPrevSibling = function () {
      if (null == this._parent) return null
      var t = this._parent._children.indexOf(this)
      return t <= 0 ? null : this._parent._children[t - 1]
    }, t.prototype.getNextSibling = function () {
      if (null == this._parent) return null
      var t = this._parent._children.indexOf(this)
      return t < 0 || t >= this._parent._children.length - 1 ? null : this._parent._children[t + 1]
    }, t.prototype.setChildIndex = function (t, e) {
      var i = this._children.indexOf(t)
      if (-1 == i) throw 'Not a child of this container'
      var n = this._children.length
      e < 0 ? e = 0 : e > n && (e = n), i != e && (this._children.splice(i, 1), this._children.splice(e, 0, t), (this._tree && this == this._tree.rootNode || this._cell && this._cell.parent && this._expanded) && this._tree._afterMoved(t))
    }, t.prototype.swapChildren = function (t, e) {
      var i = this._children.indexOf(t), n = this._children.indexOf(e)
      if (-1 == i || -1 == n) throw 'Not a child of this container'
      this.swapChildrenAt(i, n)
    }, t.prototype.swapChildrenAt = function (t, e) {
      var i = this._children[t], n = this._children[e]
      this.setChildIndex(i, e), this.setChildIndex(n, t)
    }, Object.defineProperty(t.prototype, 'numChildren', {
      get: function () {
        return this._children.length
      }, enumerable: !0, configurable: !0
    }), t.prototype.expandToRoot = function () {
      for (var t = this; t;) t.expanded = !0, t = t.parent
    }, Object.defineProperty(t.prototype, 'tree', {
      get: function () {
        return this._tree
      }, enumerable: !0, configurable: !0
    }), t.prototype._setTree = function (t) {
      if (this._tree = t, this._tree && this._tree.treeNodeWillExpand && this._expanded && this._tree.treeNodeWillExpand(this, !0), this._children) {
        for (var e = this._children.length, i = 0; i < e; i++) {
          var n = this._children[i]
          n._level = this._level + 1, n._setTree(t)
        }
      }
    }, t
  }()
  t.GTreeNode = e
}(fgui || (fgui = {})), function (t) {
  var e = function () {
    function t () {
      this.left = 0, this.right = 0, this.top = 0, this.bottom = 0
    }

    return t.prototype.copy = function (t) {
      this.top = t.top, this.bottom = t.bottom, this.left = t.left, this.right = t.right
    }, t
  }()
  t.Margin = e
}(fgui || (fgui = {})), function (t) {
  var e = function () {
    function t (t, e, i) {
      this._data = t, this.offsetX = e, this.offsetY = i, this.scaleX = 1, this.scaleY = 1
    }

    return t.prototype.contains = function (t, e) {
      if (t = Math.floor((t / this.scaleX - this.offsetX) * this._data.scale), e = Math.floor((e / this.scaleY - this.offsetY) * this._data.scale), t < 0 || e < 0 || t >= this._data.pixelWidth) return !1
      var i = e * this._data.pixelWidth + t, n = Math.floor(i / 8), o = i % 8
      return n >= 0 && n < this._data.pixels.length && 1 == (this._data.pixels[n] >> o & 1)
    }, t
  }()
  t.PixelHitTest = e
  var i = function () {
    function t () {
    }

    return t.prototype.load = function (t) {
      t.readInt(), this.pixelWidth = t.readInt(), this.scale = 1 / t.readByte()
      var e = t.readInt()
      this.pixels = []
      for (var i = 0; i < e; i++) {
        var n = t.readByte()
        n < 0 && (n += 256), this.pixels[i] = n
      }
    }, t
  }()
  t.PixelHitTestData = i
}(fgui || (fgui = {})), function (t) {
  var e = function () {
    function e () {
      this.width = 0, this.height = 0
    }

    return e.prototype.load = function () {
      return this.owner.getItemAsset(this)
    }, e.prototype.getBranch = function () {
      if (this.branches && -1 != this.owner._branchIndex) {
        var t = this.branches[this.owner._branchIndex]
        if (t) return this.owner.getItemById(t)
      }
      return this
    }, e.prototype.getHighResolution = function () {
      if (this.highResolution && t.GRoot.contentScaleLevel > 0) {
        var e = this.highResolution[t.GRoot.contentScaleLevel - 1]
        if (e) return this.owner.getItemById(e)
      }
      return this
    }, e.prototype.toString = function () {
      return this.name
    }, e
  }()
  t.PackageItem = e
}(fgui || (fgui = {})), function (t) {
  var e = function () {
    function e (e) {
      if (!e && !(e = t.UIConfig.popupMenu)) throw 'UIConfig.popupMenu not defined'
      this._contentPane = t.UIPackage.createObjectFromURL(e).asCom, this._contentPane.addEventListener(egret.Event.ADDED_TO_STAGE, this.__addedToStage, this), this._list = this._contentPane.getChild('list'), this._list.removeChildrenToPool(), this._list.addRelation(this._contentPane, t.RelationType.Width), this._list.removeRelation(this._contentPane, t.RelationType.Height), this._contentPane.addRelation(this._list, t.RelationType.Height), this._list.addEventListener(t.ItemEvent.CLICK, this.__clickItem, this)
    }

    return e.prototype.dispose = function () {
      this._contentPane.dispose()
    }, e.prototype.addItem = function (t, e) {
      var i = this._list.addItemFromPool().asButton
      i.title = t, i.data = e, i.grayed = !1
      var n = i.getController('checked')
      return n && (n.selectedIndex = 0), i
    }, e.prototype.addItemAt = function (t, e, i) {
      var n = this._list.getFromPool().asButton
      this._list.addChildAt(n, e), n.title = t, n.data = i, n.grayed = !1
      var o = n.getController('checked')
      return o && (o.selectedIndex = 0), n
    }, e.prototype.addSeperator = function () {
      if (null == t.UIConfig.popupMenu_seperator) throw 'UIConfig.popupMenu_seperator not defined'
      this.list.addItemFromPool(t.UIConfig.popupMenu_seperator)
    }, e.prototype.getItemName = function (t) {
      return this._list.getChildAt(t).name
    }, e.prototype.setItemText = function (t, e) {
      this._list.getChild(t).asButton.title = e
    }, e.prototype.setItemVisible = function (t, e) {
      var i = this._list.getChild(t).asButton
      i.visible != e && (i.visible = e, this._list.setBoundsChangedFlag())
    }, e.prototype.setItemGrayed = function (t, e) {
      this._list.getChild(t).asButton.grayed = e
    }, e.prototype.setItemCheckable = function (t, e) {
      var i = this._list.getChild(t).asButton.getController('checked')
      i && (e ? 0 == i.selectedIndex && (i.selectedIndex = 1) : i.selectedIndex = 0)
    }, e.prototype.setItemChecked = function (t, e) {
      var i = this._list.getChild(t).asButton.getController('checked')
      i && (i.selectedIndex = e ? 2 : 1)
    }, e.prototype.isItemChecked = function (t) {
      var e = this._list.getChild(t).asButton.getController('checked')
      return !!e && 2 == e.selectedIndex
    }, e.prototype.removeItem = function (t) {
      var e = this._list.getChild(t)
      if (e) {
        var i = this._list.getChildIndex(e)
        return this._list.removeChildToPoolAt(i), !0
      }
      return !1
    }, e.prototype.clearItems = function () {
      this._list.removeChildrenToPool()
    }, Object.defineProperty(e.prototype, 'itemCount', {
      get: function () {
        return this._list.numChildren
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(e.prototype, 'contentPane', {
      get: function () {
        return this._contentPane
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(e.prototype, 'list', {
      get: function () {
        return this._list
      }, enumerable: !0, configurable: !0
    }), e.prototype.show = function (e, i) {
      (e ? e.root : t.GRoot.inst).showPopup(this.contentPane, e instanceof t.GRoot ? null : e, i)
    }, e.prototype.__clickItem = function (e) {
      t.GTimers.inst.add(100, 1, this.__clickItem2, this, e)
    }, e.prototype.__clickItem2 = function (t) {
      var e = t.itemObject.asButton
      if (null != e) {
        if (e.grayed) {
          this._list.selectedIndex = -1
        } else {
          var i = e.getController('checked')
          i && 0 != i.selectedIndex && (1 == i.selectedIndex ? i.selectedIndex = 2 : i.selectedIndex = 1), this._contentPane.parent.hidePopup(this.contentPane), null != e.data && (1 == e.data.length ? e.data(t) : e.data())
        }
      }
    }, e.prototype.__addedToStage = function (t) {
      this._list.selectedIndex = -1, this._list.resizeToFit(1e5, 10)
    }, e
  }()
  t.PopupMenu = e
}(fgui || (fgui = {})), function (t) {
  var e = function () {
    function e (t) {
      this._owner = t, this._defs = new Array
    }

    return Object.defineProperty(e.prototype, 'owner', {
      get: function () {
        return this._owner
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(e.prototype, 'target', {
      get: function () {
        return this._target
      }, set: function (t) {
        this._target != t && (this._target && this.releaseRefTarget(this._target), this._target = t, this._target && this.addRefTarget(this._target))
      }, enumerable: !0, configurable: !0
    }), e.prototype.add = function (e, i) {
      if (e == t.RelationType.Size) return this.add(t.RelationType.Width, i), void this.add(t.RelationType.Height, i)
      for (var n = this._defs.length, o = 0; o < n; o++) {
        if (this._defs[o].type == e) return
      }
      this.internalAdd(e, i)
    }, e.prototype.internalAdd = function (e, n) {
      if (e == t.RelationType.Size) return this.internalAdd(t.RelationType.Width, n), void this.internalAdd(t.RelationType.Height, n)
      var o = new i
      o.percent = n, o.type = e, o.axis = e <= t.RelationType.Right_Right || e == t.RelationType.Width || e >= t.RelationType.LeftExt_Left && e <= t.RelationType.RightExt_Right ? 0 : 1, this._defs.push(o), (n || e == t.RelationType.Left_Center || e == t.RelationType.Center_Center || e == t.RelationType.Right_Center || e == t.RelationType.Top_Middle || e == t.RelationType.Middle_Middle || e == t.RelationType.Bottom_Middle) && (this._owner.pixelSnapping = !0)
    }, e.prototype.remove = function (e) {
      if (void 0 === e && (e = 0), e == t.RelationType.Size) return this.remove(t.RelationType.Width), void this.remove(t.RelationType.Height)
      for (var i = this._defs.length, n = 0; n < i; n++) {
        if (this._defs[n].type == e) {
          this._defs.splice(n, 1)
          break
        }
      }
    }, e.prototype.copyFrom = function (t) {
      this.target = t.target, this._defs.length = 0
      for (var e = t._defs.length, n = 0; n < e; n++) {
        var o = t._defs[n], r = new i
        r.copyFrom(o), this._defs.push(r)
      }
    }, e.prototype.dispose = function () {
      this._target && (this.releaseRefTarget(this._target), this._target = null)
    }, Object.defineProperty(e.prototype, 'isEmpty', {
      get: function () {
        return 0 == this._defs.length
      }, enumerable: !0, configurable: !0
    }), e.prototype.applyOnSelfResized = function (e, i, n) {
      for (var o = this._owner.x, r = this._owner.y, s = this._defs.length, a = 0; a < s; a++) {
        switch (this._defs[a].type) {
          case t.RelationType.Center_Center:
            this._owner.x -= (.5 - (n ? this._owner.pivotX : 0)) * e
            break
          case t.RelationType.Right_Center:
          case t.RelationType.Right_Left:
          case t.RelationType.Right_Right:
            this._owner.x -= (1 - (n ? this._owner.pivotX : 0)) * e
            break
          case t.RelationType.Middle_Middle:
            this._owner.y -= (.5 - (n ? this._owner.pivotY : 0)) * i
            break
          case t.RelationType.Bottom_Middle:
          case t.RelationType.Bottom_Top:
          case t.RelationType.Bottom_Bottom:
            this._owner.y -= (1 - (n ? this._owner.pivotY : 0)) * i
        }
      }
      if ((o != this._owner.x || r != this._owner.y) && (o = this._owner.x - o, r = this._owner.y - r, this._owner.updateGearFromRelations(1, o, r), this._owner.parent)) {
        var h = this._owner.parent._transitions.length
        if (h > 0) for (a = 0; a < h; ++a) this._owner.parent._transitions[a].updateFromRelations(this._owner.id, o, r)
      }
    }, e.prototype.applyOnXYChanged = function (e, i, n) {
      var o
      switch (e.type) {
        case t.RelationType.Left_Left:
        case t.RelationType.Left_Center:
        case t.RelationType.Left_Right:
        case t.RelationType.Center_Center:
        case t.RelationType.Right_Left:
        case t.RelationType.Right_Center:
        case t.RelationType.Right_Right:
          this._owner.x += i
          break
        case t.RelationType.Top_Top:
        case t.RelationType.Top_Middle:
        case t.RelationType.Top_Bottom:
        case t.RelationType.Middle_Middle:
        case t.RelationType.Bottom_Top:
        case t.RelationType.Bottom_Middle:
        case t.RelationType.Bottom_Bottom:
          this._owner.y += n
          break
        case t.RelationType.Width:
        case t.RelationType.Height:
          break
        case t.RelationType.LeftExt_Left:
        case t.RelationType.LeftExt_Right:
          this._owner != this._target.parent ? (o = this._owner.xMin, this._owner.width = this._owner._rawWidth - i, this._owner.xMin = o + i) : this._owner.width = this._owner._rawWidth - i
          break
        case t.RelationType.RightExt_Left:
        case t.RelationType.RightExt_Right:
          this._owner != this._target.parent ? (o = this._owner.xMin, this._owner.width = this._owner._rawWidth + i, this._owner.xMin = o) : this._owner.width = this._owner._rawWidth + i
          break
        case t.RelationType.TopExt_Top:
        case t.RelationType.TopExt_Bottom:
          this._owner != this._target.parent ? (o = this._owner.yMin, this._owner.height = this._owner._rawHeight - n, this._owner.yMin = o + n) : this._owner.height = this._owner._rawHeight - n
          break
        case t.RelationType.BottomExt_Top:
        case t.RelationType.BottomExt_Bottom:
          this._owner != this._target.parent ? (o = this._owner.yMin, this._owner.height = this._owner._rawHeight + n, this._owner.yMin = o) : this._owner.height = this._owner._rawHeight + n
      }
    }, e.prototype.applyOnSizeChanged = function (e) {
      var i, n, o = 0, r = 0, s = 0
      switch (0 == e.axis ? (this._target != this._owner.parent && (o = this._target.x, this._target.pivotAsAnchor && (r = this._target.pivotX)), e.percent ? 0 != this._targetWidth && (s = this._target._width / this._targetWidth) : s = this._target._width - this._targetWidth) : (this._target != this._owner.parent && (o = this._target.y, this._target.pivotAsAnchor && (r = this._target.pivotY)), e.percent ? 0 != this._targetHeight && (s = this._target._height / this._targetHeight) : s = this._target._height - this._targetHeight), e.type) {
        case t.RelationType.Left_Left:
          e.percent ? this._owner.xMin = o + (this._owner.xMin - o) * s : 0 != r && (this._owner.x += s * -r)
          break
        case t.RelationType.Left_Center:
          e.percent ? this._owner.xMin = o + (this._owner.xMin - o) * s : this._owner.x += s * (.5 - r)
          break
        case t.RelationType.Left_Right:
          e.percent ? this._owner.xMin = o + (this._owner.xMin - o) * s : this._owner.x += s * (1 - r)
          break
        case t.RelationType.Center_Center:
          e.percent ? this._owner.xMin = o + (this._owner.xMin + .5 * this._owner._rawWidth - o) * s - .5 * this._owner._rawWidth : this._owner.x += s * (.5 - r)
          break
        case t.RelationType.Right_Left:
          e.percent ? this._owner.xMin = o + (this._owner.xMin + this._owner._rawWidth - o) * s - this._owner._rawWidth : 0 != r && (this._owner.x += s * -r)
          break
        case t.RelationType.Right_Center:
          e.percent ? this._owner.xMin = o + (this._owner.xMin + this._owner._rawWidth - o) * s - this._owner._rawWidth : this._owner.x += s * (.5 - r)
          break
        case t.RelationType.Right_Right:
          e.percent ? this._owner.xMin = o + (this._owner.xMin + this._owner._rawWidth - o) * s - this._owner._rawWidth : this._owner.x += s * (1 - r)
          break
        case t.RelationType.Top_Top:
          e.percent ? this._owner.yMin = o + (this._owner.yMin - o) * s : 0 != r && (this._owner.y += s * -r)
          break
        case t.RelationType.Top_Middle:
          e.percent ? this._owner.yMin = o + (this._owner.yMin - o) * s : this._owner.y += s * (.5 - r)
          break
        case t.RelationType.Top_Bottom:
          e.percent ? this._owner.yMin = o + (this._owner.yMin - o) * s : this._owner.y += s * (1 - r)
          break
        case t.RelationType.Middle_Middle:
          e.percent ? this._owner.yMin = o + (this._owner.yMin + .5 * this._owner._rawHeight - o) * s - .5 * this._owner._rawHeight : this._owner.y += s * (.5 - r)
          break
        case t.RelationType.Bottom_Top:
          e.percent ? this._owner.yMin = o + (this._owner.yMin + this._owner._rawHeight - o) * s - this._owner._rawHeight : 0 != r && (this._owner.y += s * -r)
          break
        case t.RelationType.Bottom_Middle:
          e.percent ? this._owner.yMin = o + (this._owner.yMin + this._owner._rawHeight - o) * s - this._owner._rawHeight : this._owner.y += s * (.5 - r)
          break
        case t.RelationType.Bottom_Bottom:
          e.percent ? this._owner.yMin = o + (this._owner.yMin + this._owner._rawHeight - o) * s - this._owner._rawHeight : this._owner.y += s * (1 - r)
          break
        case t.RelationType.Width:
          i = this._owner._underConstruct && this._owner == this._target.parent ? this._owner.sourceWidth - this._target.initWidth : this._owner._rawWidth - this._targetWidth, e.percent && (i *= s), this._target == this._owner.parent ? this._owner.pivotAsAnchor ? (n = this._owner.xMin, this._owner.setSize(this._target._width + i, this._owner._rawHeight, !0), this._owner.xMin = n) : this._owner.setSize(this._target._width + i, this._owner._rawHeight, !0) : this._owner.width = this._target._width + i
          break
        case t.RelationType.Height:
          i = this._owner._underConstruct && this._owner == this._target.parent ? this._owner.sourceHeight - this._target.initHeight : this._owner._rawHeight - this._targetHeight, e.percent && (i *= s), this._target == this._owner.parent ? this._owner.pivotAsAnchor ? (n = this._owner.yMin, this._owner.setSize(this._owner._rawWidth, this._target._height + i, !0), this._owner.yMin = n) : this._owner.setSize(this._owner._rawWidth, this._target._height + i, !0) : this._owner.height = this._target._height + i
          break
        case t.RelationType.LeftExt_Left:
          n = this._owner.xMin, i = e.percent ? o + (n - o) * s - n : s * -r, this._owner.width = this._owner._rawWidth - i, this._owner.xMin = n + i
          break
        case t.RelationType.LeftExt_Right:
          n = this._owner.xMin, i = e.percent ? o + (n - o) * s - n : s * (1 - r), this._owner.width = this._owner._rawWidth - i, this._owner.xMin = n + i
          break
        case t.RelationType.RightExt_Left:
          n = this._owner.xMin, i = e.percent ? o + (n + this._owner._rawWidth - o) * s - (n + this._owner._rawWidth) : s * -r, this._owner.width = this._owner._rawWidth + i, this._owner.xMin = n
          break
        case t.RelationType.RightExt_Right:
          n = this._owner.xMin, e.percent ? this._owner == this._target.parent ? this._owner._underConstruct ? this._owner.width = o + this._target._width - this._target._width * r + (this._owner.sourceWidth - o - this._target.initWidth + this._target.initWidth * r) * s : this._owner.width = o + (this._owner._rawWidth - o) * s : (i = o + (n + this._owner._rawWidth - o) * s - (n + this._owner._rawWidth), this._owner.width = this._owner._rawWidth + i, this._owner.xMin = n) : this._owner == this._target.parent ? this._owner._underConstruct ? this._owner.width = this._owner.sourceWidth + (this._target._width - this._target.initWidth) * (1 - r) : this._owner.width = this._owner._rawWidth + s * (1 - r) : (i = s * (1 - r), this._owner.width = this._owner._rawWidth + i, this._owner.xMin = n)
          break
        case t.RelationType.TopExt_Top:
          n = this._owner.yMin, i = e.percent ? o + (n - o) * s - n : s * -r, this._owner.height = this._owner._rawHeight - i, this._owner.yMin = n + i
          break
        case t.RelationType.TopExt_Bottom:
          n = this._owner.yMin, i = e.percent ? o + (n - o) * s - n : s * (1 - r), this._owner.height = this._owner._rawHeight - i, this._owner.yMin = n + i
          break
        case t.RelationType.BottomExt_Top:
          n = this._owner.yMin, i = e.percent ? o + (n + this._owner._rawHeight - o) * s - (n + this._owner._rawHeight) : s * -r, this._owner.height = this._owner._rawHeight + i, this._owner.yMin = n
          break
        case t.RelationType.BottomExt_Bottom:
          n = this._owner.yMin, e.percent ? this._owner == this._target.parent ? this._owner._underConstruct ? this._owner.height = o + this._target._height - this._target._height * r + (this._owner.sourceHeight - o - this._target.initHeight + this._target.initHeight * r) * s : this._owner.height = o + (this._owner._rawHeight - o) * s : (i = o + (n + this._owner._rawHeight - o) * s - (n + this._owner._rawHeight), this._owner.height = this._owner._rawHeight + i, this._owner.yMin = n) : this._owner == this._target.parent ? this._owner._underConstruct ? this._owner.height = this._owner.sourceHeight + (this._target._height - this._target.initHeight) * (1 - r) : this._owner.height = this._owner._rawHeight + s * (1 - r) : (i = s * (1 - r), this._owner.height = this._owner._rawHeight + i, this._owner.yMin = n)
      }
    }, e.prototype.addRefTarget = function (e) {
      e != this._owner.parent && e.addEventListener(t.GObject.XY_CHANGED, this.__targetXYChanged, this), e.addEventListener(t.GObject.SIZE_CHANGED, this.__targetSizeChanged, this), e.addEventListener(t.GObject.SIZE_DELAY_CHANGE, this.__targetSizeWillChange, this), this._targetX = this._target.x, this._targetY = this._target.y, this._targetWidth = this._target._width, this._targetHeight = this._target._height
    }, e.prototype.releaseRefTarget = function (e) {
      e.removeEventListener(t.GObject.XY_CHANGED, this.__targetXYChanged, this), e.removeEventListener(t.GObject.SIZE_CHANGED, this.__targetSizeChanged, this), e.removeEventListener(t.GObject.SIZE_DELAY_CHANGE, this.__targetSizeWillChange, this)
    }, e.prototype.__targetXYChanged = function (t) {
      if (null != this._owner.relations.handling || null != this._owner.group && this._owner.group._updating) return this._targetX = this._target.x, void (this._targetY = this._target.y)
      this._owner.relations.handling = this._target
      for (var e = this._owner.x, i = this._owner.y, n = this._target.x - this._targetX, o = this._target.y - this._targetY, r = this._defs.length, s = 0; s < r; s++) {
        var a = this._defs[s]
        this.applyOnXYChanged(a, n, o)
      }
      if (this._targetX = this._target.x, this._targetY = this._target.y, (e != this._owner.x || i != this._owner.y) && (e = this._owner.x - e, i = this._owner.y - i, this._owner.updateGearFromRelations(1, e, i), this._owner.parent)) {
        var h = this._owner.parent._transitions.length
        if (h > 0) for (s = 0; s < h; ++s) this._owner.parent._transitions[s].updateFromRelations(this._owner.id, e, i)
      }
      this._owner.relations.handling = null
    }, e.prototype.__targetSizeChanged = function (t) {
      if (null == this._owner.relations.handling) {
        this._owner.relations.handling = this._target
        for (var e = this._owner.x, i = this._owner.y, n = this._owner._rawWidth, o = this._owner._rawHeight, r = this._defs.length, s = 0; s < r; s++) {
          var a = this._defs[s]
          this.applyOnSizeChanged(a)
        }
        if (this._targetWidth = this._target._width, this._targetHeight = this._target._height, (e != this._owner.x || i != this._owner.y) && (e = this._owner.x - e, i = this._owner.y - i, this._owner.updateGearFromRelations(1, e, i), this._owner.parent)) {
          var h = this._owner.parent._transitions.length
          if (h > 0) for (s = 0; s < h; ++s) this._owner.parent._transitions[s].updateFromRelations(this._owner.id, e, i)
        }
        n == this._owner._rawWidth && o == this._owner._rawHeight || (n = this._owner._rawWidth - n, o = this._owner._rawHeight - o, this._owner.updateGearFromRelations(2, n, o)), this._owner.relations.handling = null
      }
    }, e.prototype.__targetSizeWillChange = function (t) {
      this._owner.relations.sizeDirty = !0
    }, e
  }()
  t.RelationItem = e
  var i = function () {
    function t () {
    }

    return t.prototype.copyFrom = function (t) {
      this.percent = t.percent, this.type = t.type, this.axis = t.axis
    }, t
  }()
  t.RelationDef = i
}(fgui || (fgui = {})), function (t) {
  var e = function () {
    function e (t) {
      this._owner = t, this._items = new Array
    }

    return e.prototype.add = function (e, i, n) {
      for (var o = this._items.length, r = 0; r < o; r++) {
        var s = this._items[r]
        if (s.target == e) return void s.add(i, n)
      }
      var a = new t.RelationItem(this._owner)
      a.target = e, a.add(i, n), this._items.push(a)
    }, e.prototype.remove = function (t, e) {
      e = e || 0
      for (var i = this._items.length, n = 0; n < i;) {
        var o = this._items[n]
        o.target == t ? (o.remove(e), o.isEmpty ? (o.dispose(), this._items.splice(n, 1), i--) : n++) : n++
      }
    }, e.prototype.contains = function (t) {
      for (var e = this._items.length, i = 0; i < e; i++) {
        if (this._items[i].target == t) return !0
      }
      return !1
    }, e.prototype.clearFor = function (t) {
      for (var e = this._items.length, i = 0; i < e;) {
        var n = this._items[i]
        n.target == t ? (n.dispose(), this._items.splice(i, 1), e--) : i++
      }
    }, e.prototype.clearAll = function () {
      for (var t = this._items.length, e = 0; e < t; e++) {
        this._items[e].dispose()
      }
      this._items.length = 0
    }, e.prototype.copyFrom = function (e) {
      this.clearAll()
      for (var i = e._items, n = i.length, o = 0; o < n; o++) {
        var r = i[o], s = new t.RelationItem(this._owner)
        s.copyFrom(r), this._items.push(s)
      }
    }, e.prototype.dispose = function () {
      this.clearAll()
    }, e.prototype.onOwnerSizeChanged = function (t, e, i) {
      if (0 != this._items.length) {
        for (var n = this._items.length, o = 0; o < n; o++) {
          this._items[o].applyOnSelfResized(t, e, i)
        }
      }
    }, e.prototype.ensureRelationsSizeCorrect = function () {
      if (0 != this._items.length) {
        this.sizeDirty = !1
        for (var t = this._items.length, e = 0; e < t; e++) {
          this._items[e].target.ensureSizeCorrect()
        }
      }
    }, Object.defineProperty(e.prototype, 'empty', {
      get: function () {
        return 0 == this._items.length
      }, enumerable: !0, configurable: !0
    }), e.prototype.setup = function (e, i) {
      for (var n, o = e.readByte(), r = 0; r < o; r++) {
        var s = e.readShort()
        n = -1 == s ? this._owner.parent : i ? this._owner.getChildAt(s) : this._owner.parent.getChildAt(s)
        var a = new t.RelationItem(this._owner)
        a.target = n, this._items.push(a)
        for (var h = e.readByte(), l = 0; l < h; l++) {
          var c = e.readByte(), u = e.readBool()
          a.internalAdd(c, u)
        }
      }
    }, e
  }()
  t.Relations = e
}(fgui || (fgui = {})), function (t) {
  var e = function (e) {
    function c (i) {
      var n = e.call(this) || this
      return n._owner = i, n._maskContainer = new egret.DisplayObjectContainer, n._owner._rootContainer.addChild(n._maskContainer), n._container = n._owner._container, n._container.x = 0, n._container.y = 0, n._maskContainer.addChild(n._container), n._scrollBarMargin = new t.Margin, n._xPos = 0, n._yPos = 0, n._aniFlag = 0, n._tweening = 0, n._footerLockedSize = 0, n._headerLockedSize = 0, n._viewSize = new egret.Point, n._contentSize = new egret.Point, n._pageSize = new egret.Point(1, 1), n._overlapSize = new egret.Point, n._tweenTime = new egret.Point, n._tweenStart = new egret.Point, n._tweenDuration = new egret.Point, n._tweenChange = new egret.Point, n._velocity = new egret.Point, n._containerPos = new egret.Point, n._beginTouchPos = new egret.Point, n._lastTouchPos = new egret.Point, n._lastTouchGlobalPos = new egret.Point, n._scrollStep = t.UIConfig.defaultScrollStep, n._decelerationRate = t.UIConfig.defaultScrollDecelerationRate, n._owner.addEventListener(egret.TouchEvent.TOUCH_BEGIN, n.__touchBegin, n), n
    }

    return __extends(c, e), c.prototype.setup = function (e) {
      this._scrollType = e.readByte()
      var i = e.readByte(), n = e.readInt()
      e.readBool() && (this._scrollBarMargin.top = e.readInt(), this._scrollBarMargin.bottom = e.readInt(), this._scrollBarMargin.left = e.readInt(), this._scrollBarMargin.right = e.readInt())
      var o = e.readS(), r = e.readS(), s = e.readS(), a = e.readS()
      if (0 != (1 & n) && (this._displayOnLeft = !0), 0 != (2 & n) && (this._snapToItem = !0), 0 != (4 & n) && (this._displayInDemand = !0), 0 != (8 & n) && (this._pageMode = !0), this._touchEffect = !!(16 & n) || !(32 & n) && t.UIConfig.defaultScrollTouchEffect, this._bouncebackEffect = !!(64 & n) || !(128 & n) && t.UIConfig.defaultScrollBounceEffect, 0 != (256 & n) && (this._inertiaDisabled = !0), 0 == (512 & n) && (this._maskContainer.scrollRect = new egret.Rectangle), 0 != (1024 & n) && (this._floating = !0), 0 != (2048 & n) && (this._dontClipMargin = !0), i == t.ScrollBarDisplayType.Default && (i = t.UIConfig.defaultScrollBarDisplay), i != t.ScrollBarDisplayType.Hidden) {
        var h
        if (this._scrollType == t.ScrollType.Both || this._scrollType == t.ScrollType.Vertical) {
          if (h = o || t.UIConfig.verticalScrollBar) {
            if (this._vtScrollBar = t.UIPackage.createObjectFromURL(h), !this._vtScrollBar) throw 'cannot create scrollbar from ' + h
            this._vtScrollBar.setScrollPane(this, !0), this._owner._rootContainer.addChild(this._vtScrollBar.displayObject)
          }
        }
        if (this._scrollType == t.ScrollType.Both || this._scrollType == t.ScrollType.Horizontal) {
          if (h = r || t.UIConfig.horizontalScrollBar) {
            if (this._hzScrollBar = t.UIPackage.createObjectFromURL(h), !this._hzScrollBar) throw 'cannot create scrollbar from ' + h
            this._hzScrollBar.setScrollPane(this, !1), this._owner._rootContainer.addChild(this._hzScrollBar.displayObject)
          }
        }
        i == t.ScrollBarDisplayType.Auto && (this._scrollBarDisplayAuto = !0), this._scrollBarDisplayAuto && (this._vtScrollBar && (this._vtScrollBar.displayObject.visible = !1), this._hzScrollBar && (this._hzScrollBar.displayObject.visible = !1))
      }
      if (s && (this._header = t.UIPackage.createObjectFromURL(s), !this._header)) throw 'cannot create scrollPane header from ' + s
      if (a && (this._footer = t.UIPackage.createObjectFromURL(a), !this._footer)) throw 'cannot create scrollPane footer from ' + a;
      (this._header || this._footer) && (this._refreshBarAxis = this._scrollType == t.ScrollType.Both || this._scrollType == t.ScrollType.Vertical ? 'y' : 'x'), this.setSize(this._owner.width, this._owner.height)
    }, c.prototype.dispose = function () {
      0 != this._tweening && t.GTimers.inst.remove(this.tweenUpdate, this), delete this._pageController, this._hzScrollBar && this._hzScrollBar.dispose(), this._vtScrollBar && this._vtScrollBar.dispose(), this._header && this._header.dispose(), this._footer && this._footer.dispose()
    }, Object.defineProperty(c.prototype, 'owner', {
      get: function () {
        return this._owner
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(c.prototype, 'hzScrollBar', {
      get: function () {
        return this._hzScrollBar
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(c.prototype, 'vtScrollBar', {
      get: function () {
        return this._vtScrollBar
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(c.prototype, 'header', {
      get: function () {
        return this._header
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(c.prototype, 'footer', {
      get: function () {
        return this._footer
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(c.prototype, 'bouncebackEffect', {
      get: function () {
        return this._bouncebackEffect
      }, set: function (t) {
        this._bouncebackEffect = t
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(c.prototype, 'touchEffect', {
      get: function () {
        return this._touchEffect
      }, set: function (t) {
        this._touchEffect = t
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(c.prototype, 'scrollStep', {
      get: function () {
        return this._scrollStep
      }, set: function (e) {
        this._scrollStep = e, 0 == this._scrollStep && (this._scrollStep = t.UIConfig.defaultScrollStep)
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(c.prototype, 'decelerationRate', {
      get: function () {
        return this._decelerationRate
      }, set: function (t) {
        this._decelerationRate = t
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(c.prototype, 'snapToItem', {
      get: function () {
        return this._snapToItem
      }, set: function (t) {
        this._snapToItem = t
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(c.prototype, 'isDragged', {
      get: function () {
        return this._dragged
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(c.prototype, 'percX', {
      get: function () {
        return 0 == this._overlapSize.x ? 0 : this._xPos / this._overlapSize.x
      }, set: function (t) {
        this.setPercX(t, !1)
      }, enumerable: !0, configurable: !0
    }), c.prototype.setPercX = function (e, i) {
      void 0 === i && (i = !1), this._owner.ensureBoundsCorrect(), this.setPosX(this._overlapSize.x * t.ToolSet.clamp01(e), i)
    }, Object.defineProperty(c.prototype, 'percY', {
      get: function () {
        return 0 == this._overlapSize.y ? 0 : this._yPos / this._overlapSize.y
      }, set: function (t) {
        this.setPercY(t, !1)
      }, enumerable: !0, configurable: !0
    }), c.prototype.setPercY = function (e, i) {
      void 0 === i && (i = !1), this._owner.ensureBoundsCorrect(), this.setPosY(this._overlapSize.y * t.ToolSet.clamp01(e), i)
    }, Object.defineProperty(c.prototype, 'posX', {
      get: function () {
        return this._xPos
      }, set: function (t) {
        this.setPosX(t, !1)
      }, enumerable: !0, configurable: !0
    }), c.prototype.setPosX = function (e, i) {
      this._owner.ensureBoundsCorrect(), 1 == this._loop && (e = this.loopCheckingNewPos(e, 'x')), (e = t.ToolSet.clamp(e, 0, this._overlapSize.x)) != this._xPos && (this._xPos = e, this.posChanged(i))
    }, Object.defineProperty(c.prototype, 'posY', {
      get: function () {
        return this._yPos
      }, set: function (t) {
        this.setPosY(t, !1)
      }, enumerable: !0, configurable: !0
    }), c.prototype.setPosY = function (e, i) {
      this._owner.ensureBoundsCorrect(), 1 == this._loop && (e = this.loopCheckingNewPos(e, 'y')), (e = t.ToolSet.clamp(e, 0, this._overlapSize.y)) != this._yPos && (this._yPos = e, this.posChanged(i))
    }, Object.defineProperty(c.prototype, 'contentWidth', {
      get: function () {
        return this._contentSize.x
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(c.prototype, 'contentHeight', {
      get: function () {
        return this._contentSize.y
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(c.prototype, 'viewWidth', {
      get: function () {
        return this._viewSize.x
      }, set: function (t) {
        t = t + this._owner.margin.left + this._owner.margin.right, this._vtScrollBar && !this._floating && (t += this._vtScrollBar.width), this._owner.width = t
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(c.prototype, 'viewHeight', {
      get: function () {
        return this._viewSize.y
      }, set: function (t) {
        t = t + this._owner.margin.top + this._owner.margin.bottom, this._hzScrollBar && !this._floating && (t += this._hzScrollBar.height), this._owner.height = t
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(c.prototype, 'currentPageX', {
      get: function () {
        if (!this._pageMode) return 0
        var t = Math.floor(this._xPos / this._pageSize.x)
        return this._xPos - t * this._pageSize.x > .5 * this._pageSize.x && t++, t
      }, set: function (t) {
        this.setCurrentPageX(t, !1)
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(c.prototype, 'currentPageY', {
      get: function () {
        if (!this._pageMode) return 0
        var t = Math.floor(this._yPos / this._pageSize.y)
        return this._yPos - t * this._pageSize.y > .5 * this._pageSize.y && t++, t
      }, set: function (t) {
        this.setCurrentPageY(t, !1)
      }, enumerable: !0, configurable: !0
    }), c.prototype.setCurrentPageX = function (t, e) {
      this._pageMode && (this._owner.ensureBoundsCorrect(), this._overlapSize.x > 0 && this.setPosX(t * this._pageSize.x, e))
    }, c.prototype.setCurrentPageY = function (t, e) {
      this._pageMode && (this._owner.ensureBoundsCorrect(), this._overlapSize.y > 0 && this.setPosY(t * this._pageSize.y, e))
    }, Object.defineProperty(c.prototype, 'isBottomMost', {
      get: function () {
        return this._yPos == this._overlapSize.y || 0 == this._overlapSize.y
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(c.prototype, 'isRightMost', {
      get: function () {
        return this._xPos == this._overlapSize.x || 0 == this._overlapSize.x
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(c.prototype, 'pageController', {
      get: function () {
        return this._pageController
      }, set: function (t) {
        this._pageController = t
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(c.prototype, 'scrollingPosX', {
      get: function () {
        return t.ToolSet.clamp(-this._container.x, 0, this._overlapSize.x)
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(c.prototype, 'scrollingPosY', {
      get: function () {
        return t.ToolSet.clamp(-this._container.y, 0, this._overlapSize.y)
      }, enumerable: !0, configurable: !0
    }), c.prototype.scrollTop = function (t) {
      this.setPercY(0, t)
    }, c.prototype.scrollBottom = function (t) {
      this.setPercY(1, t)
    }, c.prototype.scrollUp = function (t, e) {
      t = t || 1, this._pageMode ? this.setPosY(this._yPos - this._pageSize.y * t, e) : this.setPosY(this._yPos - this._scrollStep * t, e)
    }, c.prototype.scrollDown = function (t, e) {
      t = t || 1, this._pageMode ? this.setPosY(this._yPos + this._pageSize.y * t, e) : this.setPosY(this._yPos + this._scrollStep * t, e)
    }, c.prototype.scrollLeft = function (t, e) {
      t = t || 1, this._pageMode ? this.setPosX(this._xPos - this._pageSize.x * t, e) : this.setPosX(this._xPos - this._scrollStep * t, e)
    }, c.prototype.scrollRight = function (t, e) {
      t = t || 1, this._pageMode ? this.setPosX(this._xPos + this._pageSize.x * t, e) : this.setPosX(this._xPos + this._scrollStep * t, e)
    }, c.prototype.scrollToView = function (e, i, n) {
      var o
      if (this._owner.ensureBoundsCorrect(), this._needRefresh && this.refresh(), e instanceof t.GObject ? e.parent != this._owner ? (e.parent.localToGlobalRect(e.x, e.y, e.width, e.height, a), o = this._owner.globalToLocalRect(a.x, a.y, a.width, a.height, a)) : (o = a).setTo(e.x, e.y, e.width, e.height) : o = e, this._overlapSize.y > 0) {
        var r = this._yPos + this._viewSize.y
        n || o.y <= this._yPos || o.height >= this._viewSize.y ? this._pageMode ? this.setPosY(Math.floor(o.y / this._pageSize.y) * this._pageSize.y, i) : this.setPosY(o.y, i) : o.y + o.height > r && (this._pageMode ? this.setPosY(Math.floor(o.y / this._pageSize.y) * this._pageSize.y, i) : o.height <= this._viewSize.y / 2 ? this.setPosY(o.y + 2 * o.height - this._viewSize.y, i) : this.setPosY(o.y + o.height - this._viewSize.y, i))
      }
      if (this._overlapSize.x > 0) {
        var s = this._xPos + this._viewSize.x
        n || o.x <= this._xPos || o.width >= this._viewSize.x ? this._pageMode ? this.setPosX(Math.floor(o.x / this._pageSize.x) * this._pageSize.x, i) : this.setPosX(o.x, i) : o.x + o.width > s && (this._pageMode ? this.setPosX(Math.floor(o.x / this._pageSize.x) * this._pageSize.x, i) : o.width <= this._viewSize.x / 2 ? this.setPosX(o.x + 2 * o.width - this._viewSize.x, i) : this.setPosX(o.x + o.width - this._viewSize.x, i))
      }
      !i && this._needRefresh && this.refresh()
    }, c.prototype.isChildInView = function (t) {
      if (this._overlapSize.y > 0) {
        var e = t.y + this._container.y
        if (e < -t.height || e > this._viewSize.y) return !1
      }
      return !(this._overlapSize.x > 0 && ((e = t.x + this._container.x) < -t.width || e > this._viewSize.x))
    }, c.prototype.cancelDragging = function () {
      this._owner.displayObject.removeEventListener(egret.TouchEvent.TOUCH_MOVE, this.__touchMove, this), this._owner.displayObject.removeEventListener(egret.TouchEvent.TOUCH_END, this.__touchEnd, this), this._owner.displayObject.removeEventListener(egret.TouchEvent.TOUCH_TAP, this.__touchTap, this), c.draggingPane == this && (c.draggingPane = null), i = 0, this._dragged = !1, this._maskContainer.touchChildren = !0
    }, c.prototype.lockHeader = function (t) {
      this._headerLockedSize != t && (this._headerLockedSize = t, !this._refreshEventDispatching && this._container[this._refreshBarAxis] >= 0 && (this._tweenStart.setTo(this._container.x, this._container.y), this._tweenChange.setTo(0, 0), this._tweenChange[this._refreshBarAxis] = this._headerLockedSize - this._tweenStart[this._refreshBarAxis], this._tweenDuration.setTo(o, o), this.startTween(2)))
    }, c.prototype.lockFooter = function (t) {
      if (this._footerLockedSize != t && (this._footerLockedSize = t, !this._refreshEventDispatching && this._container[this._refreshBarAxis] <= -this._overlapSize[this._refreshBarAxis])) {
        this._tweenStart.setTo(this._container.x, this._container.y), this._tweenChange.setTo(0, 0)
        var e = this._overlapSize[this._refreshBarAxis]
        0 == e ? e = Math.max(this._contentSize[this._refreshBarAxis] + this._footerLockedSize - this._viewSize[this._refreshBarAxis], 0) : e += this._footerLockedSize, this._tweenChange[this._refreshBarAxis] = -e - this._tweenStart[this._refreshBarAxis], this._tweenDuration.setTo(o, o), this.startTween(2)
      }
    }, c.prototype.onOwnerSizeChanged = function () {
      this.setSize(this._owner.width, this._owner.height), this.posChanged(!1)
    }, c.prototype.handleControllerChanged = function (e) {
      this._pageController == e && (this._scrollType == t.ScrollType.Horizontal ? this.setCurrentPageX(e.selectedIndex, !0) : this.setCurrentPageY(e.selectedIndex, !0))
    }, c.prototype.updatePageController = function () {
      var e
      if (this._pageController && !this._pageController.changing && (e = this._scrollType == t.ScrollType.Horizontal ? this.currentPageX : this.currentPageY) < this._pageController.pageCount) {
        var i = this._pageController
        this._pageController = null, i.selectedIndex = e, this._pageController = i
      }
    }, c.prototype.adjustMaskContainer = function () {
      var t = 0, e = 0
      this._dontClipMargin ? this._displayOnLeft && this._vtScrollBar && !this._floating && (t = this._vtScrollBar.width) : (t = this._displayOnLeft && this._vtScrollBar && !this._floating ? this._owner.margin.left + this._vtScrollBar.width : this._owner.margin.left, e = this._owner.margin.top), this._maskContainer.x = t, this._maskContainer.y = e, t = this._owner._alignOffset.x, e = this._owner._alignOffset.y, (0 != t || 0 != e || this._dontClipMargin) && (this._alignContainer || (this._alignContainer = new egret.DisplayObjectContainer, this._maskContainer.addChild(this._alignContainer), this._alignContainer.addChild(this._container))), this._alignContainer && (this._dontClipMargin && (t += this._owner.margin.left, e += this._owner.margin.top), this._alignContainer.x = t, this._alignContainer.y = e)
    }, c.prototype.setSize = function (t, e) {
      this.adjustMaskContainer(), this._hzScrollBar && (this._hzScrollBar.y = e - this._hzScrollBar.height, this._vtScrollBar && !this._vScrollNone ? (this._hzScrollBar.width = t - this._vtScrollBar.width - this._scrollBarMargin.left - this._scrollBarMargin.right, this._displayOnLeft ? this._hzScrollBar.x = this._scrollBarMargin.left + this._vtScrollBar.width : this._hzScrollBar.x = this._scrollBarMargin.left) : (this._hzScrollBar.width = t - this._scrollBarMargin.left - this._scrollBarMargin.right, this._hzScrollBar.x = this._scrollBarMargin.left)), this._vtScrollBar && (this._displayOnLeft || (this._vtScrollBar.x = t - this._vtScrollBar.width), this._hzScrollBar ? this._vtScrollBar.height = e - this._hzScrollBar.height - this._scrollBarMargin.top - this._scrollBarMargin.bottom : this._vtScrollBar.height = e - this._scrollBarMargin.top - this._scrollBarMargin.bottom, this._vtScrollBar.y = this._scrollBarMargin.top), this._viewSize.x = t, this._viewSize.y = e, this._hzScrollBar && !this._floating && (this._viewSize.y -= this._hzScrollBar.height), this._vtScrollBar && !this._floating && (this._viewSize.x -= this._vtScrollBar.width), this._viewSize.x -= this._owner.margin.left + this._owner.margin.right, this._viewSize.y -= this._owner.margin.top + this._owner.margin.bottom, this._viewSize.x = Math.max(1, this._viewSize.x), this._viewSize.y = Math.max(1, this._viewSize.y), this._pageSize.x = this._viewSize.x, this._pageSize.y = this._viewSize.y, this.handleSizeChanged()
    }, c.prototype.setContentSize = function (t, e) {
      this._contentSize.x == t && this._contentSize.y == e || (this._contentSize.x = t, this._contentSize.y = e, this.handleSizeChanged())
    }, c.prototype.changeContentSizeOnScrolling = function (t, e, i, n) {
      var o = this._xPos == this._overlapSize.x, r = this._yPos == this._overlapSize.y
      this._contentSize.x += t, this._contentSize.y += e, this.handleSizeChanged(), 1 == this._tweening ? (0 != t && o && this._tweenChange.x < 0 && (this._xPos = this._overlapSize.x, this._tweenChange.x = -this._xPos - this._tweenStart.x), 0 != e && r && this._tweenChange.y < 0 && (this._yPos = this._overlapSize.y, this._tweenChange.y = -this._yPos - this._tweenStart.y)) : 2 == this._tweening ? (0 != i && (this._container.x -= i, this._tweenStart.x -= i, this._xPos = -this._container.x), 0 != n && (this._container.y -= n, this._tweenStart.y -= n, this._yPos = -this._container.y)) : this._dragged ? (0 != i && (this._container.x -= i, this._containerPos.x -= i, this._xPos = -this._container.x), 0 != n && (this._container.y -= n, this._containerPos.y -= n, this._yPos = -this._container.y)) : (0 != t && o && (this._xPos = this._overlapSize.x, this._container.x = -this._xPos), 0 != e && r && (this._yPos = this._overlapSize.y, this._container.y = -this._yPos)), this._pageMode && this.updatePageController()
    }, c.prototype.handleSizeChanged = function () {
      this._displayInDemand && (this._vScrollNone = this._contentSize.y <= this._viewSize.y, this._hScrollNone = this._contentSize.x <= this._viewSize.x), this._vtScrollBar && (0 == this._contentSize.y ? this._vtScrollBar.setDisplayPerc(0) : this._vtScrollBar.setDisplayPerc(Math.min(1, this._viewSize.y / this._contentSize.y))), this._hzScrollBar && (0 == this._contentSize.x ? this._hzScrollBar.setDisplayPerc(0) : this._hzScrollBar.setDisplayPerc(Math.min(1, this._viewSize.x / this._contentSize.x))), this.updateScrollBarVisible()
      var e = this._maskContainer.scrollRect
      if (e && (e.width = this._viewSize.x, e.height = this._viewSize.y, this._vScrollNone && this._vtScrollBar && (e.width += this._vtScrollBar.width), this._hScrollNone && this._hzScrollBar && (e.height += this._hzScrollBar.height), this._dontClipMargin && (e.width += this._owner.margin.left + this._owner.margin.right, e.height += this._owner.margin.top + this._owner.margin.bottom), this._maskContainer.scrollRect = e), this._scrollType == t.ScrollType.Horizontal || this._scrollType == t.ScrollType.Both ? this._overlapSize.x = Math.ceil(Math.max(0, this._contentSize.x - this._viewSize.x)) : this._overlapSize.x = 0, this._scrollType == t.ScrollType.Vertical || this._scrollType == t.ScrollType.Both ? this._overlapSize.y = Math.ceil(Math.max(0, this._contentSize.y - this._viewSize.y)) : this._overlapSize.y = 0, this._xPos = t.ToolSet.clamp(this._xPos, 0, this._overlapSize.x), this._yPos = t.ToolSet.clamp(this._yPos, 0, this._overlapSize.y), null != this._refreshBarAxis) {
        var i = this._overlapSize[this._refreshBarAxis]
        0 == i ? i = Math.max(this._contentSize[this._refreshBarAxis] + this._footerLockedSize - this._viewSize[this._refreshBarAxis], 0) : i += this._footerLockedSize, 'x' == this._refreshBarAxis ? (this._container.x = t.ToolSet.clamp(this._container.x, -i, this._headerLockedSize), this._container.y = t.ToolSet.clamp(this._container.y, -this._overlapSize.y, 0)) : (this._container.x = t.ToolSet.clamp(this._container.x, -this._overlapSize.x, 0), this._container.y = t.ToolSet.clamp(this._container.y, -i, this._headerLockedSize)), this._header && ('x' == this._refreshBarAxis ? this._header.height = this._viewSize.y : this._header.width = this._viewSize.x), this._footer && ('y' == this._refreshBarAxis ? this._footer.height = this._viewSize.y : this._footer.width = this._viewSize.x)
      } else {
        this._container.x = t.ToolSet.clamp(this._container.x, -this._overlapSize.x, 0), this._container.y = t.ToolSet.clamp(this._container.y, -this._overlapSize.y, 0)
      }
      this.updateScrollBarPos(), this._pageMode && this.updatePageController()
    }, c.prototype.posChanged = function (e) {
      0 == this._aniFlag ? this._aniFlag = e ? 1 : -1 : 1 != this._aniFlag || e || (this._aniFlag = -1), this._needRefresh = !0, t.GTimers.inst.callLater(this.refresh, this), 0 != this._tweening && this.killTween()
    }, c.prototype.refresh = function () {
      this._needRefresh = !1, t.GTimers.inst.remove(this.refresh, this), (this._pageMode || this._snapToItem) && (h.setTo(-this._xPos, -this._yPos), this.alignPosition(h, !1), this._xPos = -h.x, this._yPos = -h.y), this.refresh2(), this.dispatchEventWith(c.SCROLL), this._needRefresh && (this._needRefresh = !1, t.GTimers.inst.remove(this.refresh, this), this.refresh2()), this.updateScrollBarPos(), this._aniFlag = 0
    }, c.prototype.refresh2 = function () {
      var t, e
      1 != this._aniFlag || this._dragged ? (0 != this._tweening && this.killTween(), this._container.x = Math.floor(-this._xPos), this._container.y = Math.floor(-this._yPos), this.loopCheckingCurrent()) : (this._overlapSize.x > 0 ? t = -Math.floor(this._xPos) : (0 != this._container.x && (this._container.x = 0), t = 0), this._overlapSize.y > 0 ? e = -Math.floor(this._yPos) : (0 != this._container.y && (this._container.y = 0), e = 0), t != this._container.x || e != this._container.y ? (this._tweenDuration.setTo(n, n), this._tweenStart.setTo(this._container.x, this._container.y), this._tweenChange.setTo(t - this._tweenStart.x, e - this._tweenStart.y), this.startTween(1)) : 0 != this._tweening && this.killTween())
      this._pageMode && this.updatePageController()
    }, c.prototype.__touchBegin = function (t) {
      if (this._touchEffect) {
        0 != this._tweening ? (this.killTween(), this._dragged = !0) : this._dragged = !1
        var e = this._owner.globalToLocal(t.stageX, t.stageY, s)
        this._containerPos.setTo(this._container.x, this._container.y), this._beginTouchPos.setTo(e.x, e.y), this._lastTouchPos.setTo(e.x, e.y), this._lastTouchGlobalPos.setTo(t.stageX, t.stageY), this._isHoldAreaDone = !1, this._velocity.setTo(0, 0), this._velocityScale = 1, this._lastMoveTime = egret.getTimer() / 1e3, this._owner.displayObject.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE, this.__touchMove, this), this._owner.displayObject.stage.addEventListener(egret.TouchEvent.TOUCH_END, this.__touchEnd, this), this._owner.displayObject.stage.addEventListener(egret.TouchEvent.TOUCH_TAP, this.__touchTap, this)
      }
    }, c.prototype.__touchMove = function (e) {
      if (null != this._owner.displayObject.stage && this._touchEffect && !(c.draggingPane && c.draggingPane != this || t.GObject.draggingObject)) {
        var n, o, a, h = this._owner.globalToLocal(e.stageX, e.stageY, s), l = t.UIConfig.touchScrollSensitivity
        if (this._scrollType == t.ScrollType.Vertical) {
          if (!this._isHoldAreaDone) {
            if (i |= 1, (n = Math.abs(this._beginTouchPos.y - h.y)) < l) return
            if (0 != (2 & i) && n < Math.abs(this._beginTouchPos.x - h.x)) return
          }
          o = !0
        } else if (this._scrollType == t.ScrollType.Horizontal) {
          if (!this._isHoldAreaDone) {
            if (i |= 2, (n = Math.abs(this._beginTouchPos.x - h.x)) < l) return
            if (0 != (1 & i) && n < Math.abs(this._beginTouchPos.y - h.y)) return
          }
          a = !0
        } else {
          if (i = 3, !this._isHoldAreaDone && (n = Math.abs(this._beginTouchPos.y - h.y)) < l && (n = Math.abs(this._beginTouchPos.x - h.x)) < l) return
          o = a = !0
        }
        var u = Math.floor(this._containerPos.x + h.x - this._beginTouchPos.x),
          _ = Math.floor(this._containerPos.y + h.y - this._beginTouchPos.y)
        o && (_ > 0 ? this._bouncebackEffect ? this._header && 0 != this._header.maxHeight ? this._container.y = Math.floor(Math.min(.5 * _, this._header.maxHeight)) : this._container.y = Math.floor(Math.min(.5 * _, this._viewSize.y * r)) : this._container.y = 0 : _ < -this._overlapSize.y ? this._bouncebackEffect ? this._footer && this._footer.maxHeight > 0 ? this._container.y = Math.floor(Math.max(.5 * (_ + this._overlapSize.y), -this._footer.maxHeight) - this._overlapSize.y) : this._container.y = Math.floor(Math.max(.5 * (_ + this._overlapSize.y), -this._viewSize.y * r) - this._overlapSize.y) : this._container.y = -this._overlapSize.y : this._container.y = _), a && (u > 0 ? this._bouncebackEffect ? this._header && 0 != this._header.maxWidth ? this._container.x = Math.floor(Math.min(.5 * u, this._header.maxWidth)) : this._container.x = Math.floor(Math.min(.5 * u, this._viewSize.x * r)) : this._container.x = 0 : u < 0 - this._overlapSize.x ? this._bouncebackEffect ? this._footer && this._footer.maxWidth > 0 ? this._container.x = Math.floor(Math.max(.5 * (u + this._overlapSize.x), -this._footer.maxWidth) - this._overlapSize.x) : this._container.x = Math.floor(Math.max(.5 * (u + this._overlapSize.x), -this._viewSize.x * r) - this._overlapSize.x) : this._container.x = -this._overlapSize.x : this._container.x = u)
        var p = egret.getTimer() / 1e3, d = Math.max(p - this._lastMoveTime, 1 / 60), g = h.x - this._lastTouchPos.x,
          f = h.y - this._lastTouchPos.y
        if (a || (g = 0), o || (f = 0), 0 != d) {
          var y = this._owner.displayObject.stage.frameRate, m = d * y - 1
          if (m > 1) {
            var b = Math.pow(.833, m)
            this._velocity.x = this._velocity.x * b, this._velocity.y = this._velocity.y * b
          }
          this._velocity.x = t.ToolSet.lerp(this._velocity.x, 60 * g / y / d, 10 * d), this._velocity.y = t.ToolSet.lerp(this._velocity.y, 60 * f / y / d, 10 * d)
        }
        var v = this._lastTouchGlobalPos.x - e.stageX, w = this._lastTouchGlobalPos.y - e.stageY
        0 != g ? this._velocityScale = Math.abs(v / g) : 0 != f && (this._velocityScale = Math.abs(w / f)), this._lastTouchPos.setTo(h.x, h.y), this._lastTouchGlobalPos.setTo(e.stageX, e.stageY), this._lastMoveTime = p, this._overlapSize.x > 0 && (this._xPos = t.ToolSet.clamp(-this._container.x, 0, this._overlapSize.x)), this._overlapSize.y > 0 && (this._yPos = t.ToolSet.clamp(-this._container.y, 0, this._overlapSize.y)), 0 != this._loop && (u = this._container.x, _ = this._container.y, this.loopCheckingCurrent() && (this._containerPos.x += this._container.x - u, this._containerPos.y += this._container.y - _)), c.draggingPane = this, this._isHoldAreaDone = !0, this._dragged = !0, this._maskContainer.touchChildren = !1, this.updateScrollBarPos(), this.updateScrollBarVisible(), this._pageMode && this.updatePageController(), this.dispatchEventWith(c.SCROLL)
      }
    }, c.prototype.__touchEnd = function (e) {
      if (e.currentTarget.removeEventListener(egret.TouchEvent.TOUCH_MOVE, this.__touchMove, this), e.currentTarget.removeEventListener(egret.TouchEvent.TOUCH_END, this.__touchEnd, this), e.currentTarget.removeEventListener(egret.TouchEvent.TOUCH_TAP, this.__touchTap, this), c.draggingPane == this && (c.draggingPane = null), i = 0, !this._dragged || !this._touchEffect || null == this._owner.displayObject.stage) return this._dragged = !1, void (this._maskContainer.touchChildren = !0)
      this._dragged = !1, this._maskContainer.touchChildren = !0, this._tweenStart.setTo(this._container.x, this._container.y), h.setTo(this._tweenStart.x, this._tweenStart.y)
      var n = !1
      if (this._container.x > 0 ? (h.x = 0, n = !0) : this._container.x < -this._overlapSize.x && (h.x = -this._overlapSize.x, n = !0), this._container.y > 0 ? (h.y = 0, n = !0) : this._container.y < -this._overlapSize.y && (h.y = -this._overlapSize.y, n = !0), n) {
        if (this._tweenChange.setTo(h.x - this._tweenStart.x, h.y - this._tweenStart.y), this._tweenChange.x < -t.UIConfig.touchDragSensitivity || this._tweenChange.y < -t.UIConfig.touchDragSensitivity ? (this._refreshEventDispatching = !0, this.dispatchEventWith(c.PULL_DOWN_RELEASE), this._refreshEventDispatching = !1) : (this._tweenChange.x > t.UIConfig.touchDragSensitivity || this._tweenChange.y > t.UIConfig.touchDragSensitivity) && (this._refreshEventDispatching = !0, this.dispatchEventWith(c.PULL_UP_RELEASE), this._refreshEventDispatching = !1), this._headerLockedSize > 0 && 0 == h[this._refreshBarAxis]) {
          h[this._refreshBarAxis] = this._headerLockedSize, this._tweenChange.x = h.x - this._tweenStart.x, this._tweenChange.y = h.y - this._tweenStart.y
        } else if (this._footerLockedSize > 0 && h[this._refreshBarAxis] == -this._overlapSize[this._refreshBarAxis]) {
          var r = this._overlapSize[this._refreshBarAxis]
          0 == r ? r = Math.max(this._contentSize[this._refreshBarAxis] + this._footerLockedSize - this._viewSize[this._refreshBarAxis], 0) : r += this._footerLockedSize, h[this._refreshBarAxis] = -r, this._tweenChange.x = h.x - this._tweenStart.x, this._tweenChange.y = h.y - this._tweenStart.y
        }
        this._tweenDuration.setTo(o, o)
      } else {
        if (this._inertiaDisabled) {
          this._tweenDuration.setTo(o, o)
        } else {
          var s = this._owner.displayObject.stage.frameRate, a = (egret.getTimer() / 1e3 - this._lastMoveTime) * s - 1
          if (a > 1) {
            var u = Math.pow(.833, a)
            this._velocity.x = this._velocity.x * u, this._velocity.y = this._velocity.y * u
          }
          this.updateTargetAndDuration(this._tweenStart, h)
        }
        if (l.setTo(h.x - this._tweenStart.x, h.y - this._tweenStart.y), this.loopCheckingTarget(h), (this._pageMode || this._snapToItem) && this.alignPosition(h, !0), this._tweenChange.x = h.x - this._tweenStart.x, this._tweenChange.y = h.y - this._tweenStart.y, 0 == this._tweenChange.x && 0 == this._tweenChange.y) return void this.updateScrollBarVisible();
        (this._pageMode || this._snapToItem) && (this.fixDuration('x', l.x), this.fixDuration('y', l.y))
      }
      this.startTween(2)
    }, c.prototype.__touchTap = function (t) {
      this._dragged = !1
    }, c.prototype.updateScrollBarPos = function () {
      this._vtScrollBar && this._vtScrollBar.setScrollPerc(0 == this._overlapSize.y ? 0 : t.ToolSet.clamp(-this._container.y, 0, this._overlapSize.y) / this._overlapSize.y), this._hzScrollBar && this._hzScrollBar.setScrollPerc(0 == this._overlapSize.x ? 0 : t.ToolSet.clamp(-this._container.x, 0, this._overlapSize.x) / this._overlapSize.x), this.checkRefreshBar()
    }, c.prototype.updateScrollBarVisible = function () {
      this._vtScrollBar && (this._viewSize.y <= this._vtScrollBar.minSize || this._vScrollNone ? this._vtScrollBar.displayObject.visible = !1 : this.updateScrollBarVisible2(this._vtScrollBar)), this._hzScrollBar && (this._viewSize.x <= this._hzScrollBar.minSize || this._hScrollNone ? this._hzScrollBar.displayObject.visible = !1 : this.updateScrollBarVisible2(this._hzScrollBar))
    }, c.prototype.updateScrollBarVisible2 = function (e) {
      this._scrollBarDisplayAuto && t.GTween.kill(e, !1, 'alpha'), !this._scrollBarDisplayAuto || 0 != this._tweening || this._dragged || e.gripDragging ? (e.alpha = 1, e.displayObject.visible = !0) : e.displayObject.visible && t.GTween.to(1, 0, .5).setDelay(.5).onComplete(this.__barTweenComplete, this).setTarget(e, 'alpha')
    }, c.prototype.__barTweenComplete = function (t) {
      var e = t.target
      e.alpha = 1, e.displayObject.visible = !1
    }, c.prototype.getLoopPartSize = function (t, e) {
      return (this._contentSize[e] + ('x' == e ? this._owner.columnGap : this._owner.lineGap)) / t
    }, c.prototype.loopCheckingCurrent = function () {
      var t = !1
      return 1 == this._loop && this._overlapSize.x > 0 ? this._xPos < .001 ? (this._xPos += this.getLoopPartSize(2, 'x'), t = !0) : this._xPos >= this._overlapSize.x && (this._xPos -= this.getLoopPartSize(2, 'x'), t = !0) : 2 == this._loop && this._overlapSize.y > 0 && (this._yPos < .001 ? (this._yPos += this.getLoopPartSize(2, 'y'), t = !0) : this._yPos >= this._overlapSize.y && (this._yPos -= this.getLoopPartSize(2, 'y'), t = !0)), t && (this._container.x = Math.floor(-this._xPos), this._container.y = Math.floor(-this._yPos)), t
    }, c.prototype.loopCheckingTarget = function (t) {
      1 == this._loop && this.loopCheckingTarget2(t, 'x'), 2 == this._loop && this.loopCheckingTarget2(t, 'y')
    }, c.prototype.loopCheckingTarget2 = function (t, e) {
      var i, n
      t[e] > 0 ? (i = this.getLoopPartSize(2, e), (n = this._tweenStart[e] - i) <= 0 && n >= -this._overlapSize[e] && (t[e] -= i, this._tweenStart[e] = n)) : t[e] < -this._overlapSize[e] && (i = this.getLoopPartSize(2, e), (n = this._tweenStart[e] + i) <= 0 && n >= -this._overlapSize[e] && (t[e] += i, this._tweenStart[e] = n))
    }, c.prototype.loopCheckingNewPos = function (e, i) {
      if (0 == this._overlapSize[i]) return e
      var n, o = 'x' == i ? this._xPos : this._yPos, r = !1
      return e < .001 ? (e += this.getLoopPartSize(2, i)) > o && (n = this.getLoopPartSize(6, i), n = Math.ceil((e - o) / n) * n, o = t.ToolSet.clamp(o + n, 0, this._overlapSize[i]), r = !0) : e >= this._overlapSize[i] && (e -= this.getLoopPartSize(2, i)) < o && (n = this.getLoopPartSize(6, i), n = Math.ceil((o - e) / n) * n, o = t.ToolSet.clamp(o - n, 0, this._overlapSize[i]), r = !0), r && ('x' == i ? this._container.x = -Math.floor(o) : this._container.y = -Math.floor(o)), e
    }, c.prototype.alignPosition = function (t, e) {
      if (this._pageMode) {
        t.x = this.alignByPage(t.x, 'x', e), t.y = this.alignByPage(t.y, 'y', e)
      } else if (this._snapToItem) {
        var i = this._owner.getSnappingPosition(-t.x, -t.y, s)
        t.x < 0 && t.x > -this._overlapSize.x && (t.x = -i.x), t.y < 0 && t.y > -this._overlapSize.y && (t.y = -i.y)
      }
    }, c.prototype.alignByPage = function (t, e, i) {
      var n
      if (t > 0) {
        n = 0
      } else if (t < -this._overlapSize[e]) {
        n = Math.ceil(this._contentSize[e] / this._pageSize[e]) - 1
      } else {
        n = Math.floor(-t / this._pageSize[e])
        var o = i ? t - this._containerPos[e] : t - this._container[e],
          r = Math.min(this._pageSize[e], this._contentSize[e] - (n + 1) * this._pageSize[e]),
          s = -t - n * this._pageSize[e]
        Math.abs(o) > this._pageSize[e] ? s > .5 * r && n++ : s > r * (o < 0 ? .3 : .7) && n++, (t = -n * this._pageSize[e]) < -this._overlapSize[e] && (t = -this._overlapSize[e])
      }
      if (i) {
        var a, h = this._tweenStart[e]
        a = h > 0 ? 0 : h < -this._overlapSize[e] ? Math.ceil(this._contentSize[e] / this._pageSize[e]) - 1 : Math.floor(-h / this._pageSize[e])
        var l = Math.floor(-this._containerPos[e] / this._pageSize[e])
        Math.abs(n - l) > 1 && Math.abs(a - l) <= 1 && (t = -(n = n > l ? l + 1 : l - 1) * this._pageSize[e])
      }
      return t
    }, c.prototype.updateTargetAndDuration = function (t, e) {
      e.x = this.updateTargetAndDuration2(t.x, 'x'), e.y = this.updateTargetAndDuration2(t.y, 'y')
    }, c.prototype.updateTargetAndDuration2 = function (t, e) {
      var i = this._velocity[e], n = 0
      if (t > 0) {
        t = 0
      } else if (t < -this._overlapSize[e]) {
        t = -this._overlapSize[e]
      } else {
        var r = egret.Capabilities.isMobile, s = Math.abs(i) * this._velocityScale
        r && (s *= 1136 / Math.max(this._owner.displayObject.stage.stageWidth, this._owner.displayObject.stage.stageHeight))
        var a = 0
        if (this._pageMode || !r ? s > 500 && (a = Math.pow((s - 500) / 500, 2)) : s > 1e3 && (a = Math.pow((s - 1e3) / 1e3, 2)), 0 != a) a > 1 && (a = 1), s *= a, i *= a, this._velocity[e] = i, n = Math.log(60 / s) / Math.log(this._decelerationRate) / 60, t += Math.floor(i * n * .4)
      }
      return n < o && (n = o), this._tweenDuration[e] = n, t
    }, c.prototype.fixDuration = function (t, e) {
      if (!(0 == this._tweenChange[t] || Math.abs(this._tweenChange[t]) >= Math.abs(e))) {
        var i = Math.abs(this._tweenChange[t] / e) * this._tweenDuration[t]
        i < o && (i = o), this._tweenDuration[t] = i
      }
    }, c.prototype.startTween = function (e) {
      this._tweenTime.setTo(0, 0), this._tweening = e, t.GTimers.inst.add(1, 0, this.tweenUpdate, this), this.updateScrollBarVisible()
    }, c.prototype.killTween = function () {
      1 == this._tweening && (this._container.x = this._tweenStart.x + this._tweenChange.x, this._container.y = this._tweenStart.y + this._tweenChange.y, this.dispatchEventWith(c.SCROLL)), this._tweening = 0, t.GTimers.inst.remove(this.tweenUpdate, this), this.updateScrollBarVisible(), this.dispatchEventWith(c.SCROLL_END)
    }, c.prototype.checkRefreshBar = function () {
      if (null != this._header || null != this._footer) {
        var t = this._container[this._refreshBarAxis]
        if (this._header) {
          if (t > 0) {
            null == this._header.displayObject.parent && this._maskContainer.addChildAt(this._header.displayObject, 0)
            var e = s
            e.setTo(this._header.width, this._header.height), e[this._refreshBarAxis] = t, this._header.setSize(e.x, e.y)
          } else {
            this._header.displayObject.parent && this._maskContainer.removeChild(this._header.displayObject)
          }
        }
        if (this._footer) {
          var i = this._overlapSize[this._refreshBarAxis]
          t < -i || 0 == i && this._footerLockedSize > 0 ? (null == this._footer.displayObject.parent && this._maskContainer.addChildAt(this._footer.displayObject, 0), (e = s).setTo(this._footer.x, this._footer.y), e[this._refreshBarAxis] = i > 0 ? t + this._contentSize[this._refreshBarAxis] : Math.max(Math.min(t + this._viewSize[this._refreshBarAxis], this._viewSize[this._refreshBarAxis] - this._footerLockedSize), this._viewSize[this._refreshBarAxis] - this._contentSize[this._refreshBarAxis]), this._footer.setXY(e.x, e.y), e.setTo(this._footer.width, this._footer.height), e[this._refreshBarAxis] = i > 0 ? -i - t : this._viewSize[this._refreshBarAxis] - this._footer[this._refreshBarAxis], this._footer.setSize(e.x, e.y)) : this._footer.displayObject.parent && this._maskContainer.removeChild(this._footer.displayObject)
        }
      }
    }, c.prototype.tweenUpdate = function (e) {
      var i = this.runTween('x'), n = this.runTween('y')
      return this._container.x = i, this._container.y = n, 2 == this._tweening && (this._overlapSize.x > 0 && (this._xPos = t.ToolSet.clamp(-i, 0, this._overlapSize.x)), this._overlapSize.y > 0 && (this._yPos = t.ToolSet.clamp(-n, 0, this._overlapSize.y)), this._pageMode && this.updatePageController()), 0 == this._tweenChange.x && 0 == this._tweenChange.y ? (this._tweening = 0, t.GTimers.inst.remove(this.tweenUpdate, this), this.loopCheckingCurrent(), this.updateScrollBarPos(), this.updateScrollBarVisible(), this.dispatchEventWith(c.SCROLL), this.dispatchEventWith(c.SCROLL_END)) : (this.updateScrollBarPos(), this.dispatchEventWith(c.SCROLL)), !0
    }, c.prototype.runTween = function (e) {
      var i, n, r
      if (0 != this._tweenChange[e]) {
        if (this._tweenTime[e] += t.GTimers.deltaTime / 1e3, this._tweenTime[e] >= this._tweenDuration[e]) {
          i = this._tweenStart[e] + this._tweenChange[e], this._tweenChange[e] = 0
        } else {
          var s = (n = this._tweenTime[e], r = this._tweenDuration[e], (n = n / r - 1) * n * n + 1)
          i = this._tweenStart[e] + Math.floor(this._tweenChange[e] * s)
        }
        var a = 0, h = -this._overlapSize[e]
        if (this._headerLockedSize > 0 && this._refreshBarAxis == e && (a = this._headerLockedSize), this._footerLockedSize > 0 && this._refreshBarAxis == e) {
          var l = this._overlapSize[this._refreshBarAxis]
          0 == l ? l = Math.max(this._contentSize[this._refreshBarAxis] + this._footerLockedSize - this._viewSize[this._refreshBarAxis], 0) : l += this._footerLockedSize, h = -l
        }
        2 == this._tweening && this._bouncebackEffect ? i > 20 + a && this._tweenChange[e] > 0 || i > a && 0 == this._tweenChange[e] ? (this._tweenTime[e] = 0, this._tweenDuration[e] = o, this._tweenChange[e] = -i + a, this._tweenStart[e] = i) : (i < h - 20 && this._tweenChange[e] < 0 || i < h && 0 == this._tweenChange[e]) && (this._tweenTime[e] = 0, this._tweenDuration[e] = o, this._tweenChange[e] = h - i, this._tweenStart[e] = i) : i > a ? (i = a, this._tweenChange[e] = 0) : i < h && (i = h, this._tweenChange[e] = 0)
      } else {
        i = this._container[e]
      }
      return i
    }, c.SCROLL = '__scroll', c.SCROLL_END = '__scrollEnd', c.PULL_DOWN_RELEASE = 'pullDownRelease', c.PULL_UP_RELEASE = 'pullUpRelease', c
  }(egret.EventDispatcher)
  t.ScrollPane = e
  var i = 0, n = .5, o = .3, r = .5, s = new egret.Point, a = new egret.Rectangle, h = new egret.Point,
    l = new egret.Point
}(fgui || (fgui = {})), function (t) {
  var e = function () {
    function e (t) {
      this._ownerBaseX = 0, this._ownerBaseY = 0, this._totalTimes = 0, this._totalTasks = 0, this._options = 0, this._totalDuration = 0, this._autoPlayTimes = 1, this._autoPlayDelay = 0, this._timeScale = 1, this._startTime = 0, this._endTime = 0, this._owner = t, this._items = new Array
    }

    return e.prototype.play = function (t, e, i, n, o, r, s) {
      this._play(t, e, i, n, o, r, s, !1)
    }, e.prototype.playReverse = function (t, e, i, n, o) {
      this._play(t, e, i, n, o, 0, -1, !0)
    }, e.prototype.changePlayTimes = function (t) {
      this._totalTimes = t
    }, e.prototype.setAutoPlay = function (t, e, i) {
      null == e && (e = -1), null == i && (i = 0), this._autoPlay != t && (this._autoPlay = t, this._autoPlayTimes = e, this._autoPlayDelay = i, this._autoPlay ? this._owner.onStage && this.play(null, null, this._autoPlayTimes, this._autoPlayDelay) : this._owner.onStage || this.stop(!1, !0))
    }, e.prototype._play = function (e, i, n, o, s, a, h, l) {
      null == o && (o = 1), null == s && (s = 0), null == a && (a = 0), null == h && (h = -1), this.stop(!0, !0), this._totalTimes = o, this._reversed = l, this._startTime = a, this._endTime = h, this._playing = !0, this._paused = !1, this._onComplete = e, this._onCompleteParam = n, this._onCompleteCaller = i
      for (var c = this._items.length, u = 0; u < c; u++) {
        var _ = this._items[u]
        if (_.target ? _.target != this._owner && _.target.parent != this._owner && (_.target = null) : _.targetId ? _.target = this._owner.getChildById(_.targetId) : _.target = this._owner, _.target && _.type == r.Transition) {
          var p = _.target.getTransition(_.value.transName)
          if (p == this && (p = null), p) {
            if (0 == _.value.playTimes) {
              var d
              for (d = u - 1; d >= 0; d--) {
                var g = this._items[d]
                if (g.type == r.Transition && g.value.trans == p) {
                  g.value.stopTime = _.time - g.time
                  break
                }
              }
              d < 0 ? _.value.stopTime = 0 : p = null
            } else {
              _.value.stopTime = -1
            }
          }
          _.value.trans = p
        }
      }
      0 == s ? this.onDelayedPlay() : t.GTween.delayedCall(s).onComplete(this.onDelayedPlay, this)
    }, e.prototype.stop = function (e, i) {
      if (null == e && (e = !0), this._playing) {
        this._playing = !1, this._totalTasks = 0, this._totalTimes = 0
        var n = this._onComplete, o = this._onCompleteParam, r = this._onCompleteCaller
        this._onComplete = null, this._onCompleteParam = null, this._onCompleteCaller = null, t.GTween.kill(this)
        var s = this._items.length
        if (this._reversed) {
          for (var a = s - 1; a >= 0; a--) {
            var h = this._items[a]
            h.target && this.stopItem(h, e)
          }
        } else {
          for (a = 0; a < s; a++) (h = this._items[a]).target && this.stopItem(h, e)
        }
        i && null != n && n.call(r, o)
      }
    }, e.prototype.stopItem = function (t, e) {
      if (0 != t.displayLockToken && (t.target.releaseDisplayLock(t.displayLockToken), t.displayLockToken = 0), t.tweener && (t.tweener.kill(e), t.tweener = null, t.type != r.Shake || e || (t.target._gearLocked = !0, t.target.setXY(t.target.x - t.value.lastOffsetX, t.target.y - t.value.lastOffsetY), t.target._gearLocked = !1)), t.type == r.Transition) {
        var i = t.value.trans
        i && i.stop(e, !1)
      }
    }, e.prototype.setPaused = function (e) {
      if (this._playing && this._paused != e) {
        this._paused = e
        var i = t.GTween.getTween(this)
        i && i.setPaused(e)
        for (var n = this._items.length, o = 0; o < n; o++) {
          var s = this._items[o]
          s.target && (s.type == r.Transition ? s.value.trans && s.value.trans.setPaused(e) : s.type == r.Animation && (e ? (s.value.flag = s.target.getProp(t.ObjectPropID.Playing), s.target.setProp(t.ObjectPropID.Playing, !1)) : s.target.setProp(t.ObjectPropID.Playing, s.value.flag)), s.tweener && s.tweener.setPaused(e))
        }
      }
    }, e.prototype.dispose = function () {
      this._playing && t.GTween.kill(this)
      for (var e = this._items.length, i = 0; i < e; i++) {
        var n = this._items[i]
        n.tweener && (n.tweener.kill(), n.tweener = null), n.target = null, n.hook = null, n.tweenConfig && (n.tweenConfig.endHook = null)
      }
      this._items.length = 0, this._playing = !1, this._onComplete = null, this._onCompleteCaller = null, this._onCompleteParam = null
    }, Object.defineProperty(e.prototype, 'playing', {
      get: function () {
        return this._playing
      }, enumerable: !0, configurable: !0
    }), e.prototype.setValue = function (t) {
      for (var e = [], i = 1; i < arguments.length; i++) e[i - 1] = arguments[i]
      for (var n, o = this._items.length, s = 0; s < o; s++) {
        var a = this._items[s]
        if (a.label == t) {
          n = a.tweenConfig ? a.tweenConfig.startValue : a.value
        } else {
          if (!a.tweenConfig || a.tweenConfig.endLabel != t) continue
          n = a.tweenConfig.endValue
        }
        switch (a.type) {
          case r.XY:
          case r.Size:
          case r.Pivot:
          case r.Scale:
          case r.Skew:
            n.b1 = !0, n.b2 = !0, n.f1 = parseFloat(e[0]), n.f2 = parseFloat(e[1])
            break
          case r.Alpha:
          case r.Rotation:
          case r.Color:
            n.f1 = parseFloat(e[0])
            break
          case r.Animation:
            n.frame = parseInt(e[0]), e.length > 1 && (n.playing = e[1])
            break
          case r.Visible:
            n.visible = e[0]
            break
          case r.Sound:
            n.sound = e[0], e.length > 1 && (n.volume = parseFloat(e[1]))
            break
          case r.Transition:
            n.transName = e[0], e.length > 1 && (n.playTimes = parseInt(e[1]))
            break
          case r.Shake:
            n.amplitude = parseFloat(e[0]), e.length > 1 && (n.duration = parseFloat(e[1]))
            break
          case r.ColorFilter:
            n.f1 = parseFloat(e[0]), n.f2 = parseFloat(e[1]), n.f3 = parseFloat(e[2]), n.f4 = parseFloat(e[3])
            break
          case r.Text:
          case r.Icon:
            n.text = e[0]
        }
      }
    }, e.prototype.setHook = function (t, e, i) {
      for (var n = this._items.length, o = 0; o < n; o++) {
        var r = this._items[o]
        if (r.label == t) {
          r.hook = e, r.hookCaller = i
          break
        }
        if (r.tweenConfig && r.tweenConfig.endLabel == t) {
          r.tweenConfig.endHook = e, r.tweenConfig.endHookCaller = i
          break
        }
      }
    }, e.prototype.clearHooks = function () {
      for (var t = this._items.length, e = 0; e < t; e++) {
        var i = this._items[e]
        i.hook = null, i.hookCaller = null, i.tweenConfig && (i.tweenConfig.endHook = null, i.tweenConfig.endHookCaller = null)
      }
    }, e.prototype.setTarget = function (t, e) {
      for (var i = this._items.length, n = 0; n < i; n++) {
        var o = this._items[n]
        o.label == t && (o.targetId = e != this._owner && e ? e.id : '', this._playing ? o.targetId.length > 0 ? o.target = this._owner.getChildById(o.targetId) : o.target = this._owner : o.target = null)
      }
    }, e.prototype.setDuration = function (t, e) {
      for (var i = this._items.length, n = 0; n < i; n++) {
        var o = this._items[n]
        o.tweenConfig && o.label == t && (o.tweenConfig.duration = e)
      }
    }, e.prototype.getLabelTime = function (t) {
      for (var e = this._items.length, i = 0; i < e; i++) {
        var n = this._items[i]
        if (n.label == t) return n.time
        if (n.tweenConfig && n.tweenConfig.endLabel == t) return n.time + n.tweenConfig.duration
      }
      return Number.NaN
    }, Object.defineProperty(e.prototype, 'timeScale', {
      get: function () {
        return this._timeScale
      }, set: function (e) {
        if (this._timeScale != e && (this._timeScale = e, this._playing)) {
          for (var i = this._items.length, n = 0; n < i; n++) {
            var o = this._items[n]
            o.tweener ? o.tweener.setTimeScale(e) : o.type == r.Transition ? o.value.trans && (o.value.trans.timeScale = e) : o.type == r.Animation && o.target && o.target.setProp(t.ObjectPropID.TimeScale, e)
          }
        }
      }, enumerable: !0, configurable: !0
    }), e.prototype.updateFromRelations = function (t, e, i) {
      var n = this._items.length
      if (0 != n) {
        for (var o = 0; o < n; o++) {
          var s = this._items[o]
          s.type == r.XY && s.targetId == t && (s.tweenConfig ? (s.tweenConfig.startValue.f1 += e, s.tweenConfig.startValue.f2 += i, s.tweenConfig.endValue.f1 += e, s.tweenConfig.endValue.f2 += i) : (s.value.f1 += e, s.value.f2 += i))
        }
      }
    }, e.prototype.onOwnerAddedToStage = function () {
      this._autoPlay && !this._playing && this.play(null, null, null, this._autoPlayTimes, this._autoPlayDelay)
    }, e.prototype.onOwnerRemovedFromStage = function () {
      0 == (this._options & n) && this.stop(0 != (this._options & o), !1)
    }, e.prototype.onDelayedPlay = function () {
      if (this.internalPlay(), this._playing = this._totalTasks > 0, this._playing) {
        if (0 != (this._options & i)) {
          for (var t = this._items.length, e = 0; e < t; e++) {
            var n = this._items[e]
            n.target && n.target != this._owner && (n.displayLockToken = n.target.addDisplayLock())
          }
        }
      } else if (null != this._onComplete) {
        var o = this._onComplete, r = this._onCompleteParam, s = this._onCompleteCaller
        this._onComplete = null, this._onCompleteParam = null, this._onCompleteCaller = null, o.call(s, r)
      }
    }, e.prototype.internalPlay = function () {
      this._ownerBaseX = this._owner.x, this._ownerBaseY = this._owner.y, this._totalTasks = 0
      var t, e, i = this._items.length, n = !1
      if (this._reversed) for (e = i - 1; e >= 0; e--) (t = this._items[e]).target && this.playItem(t) else for (e = 0; e < i; e++) (t = this._items[e]).target && (t.type == r.Animation && 0 != this._startTime && t.time <= this._startTime ? (n = !0, t.value.flag = !1) : this.playItem(t))
      n && this.skipAnimations()
    }, e.prototype.playItem = function (e) {
      var i
      if (e.tweenConfig) {
        if (i = this._reversed ? this._totalDuration - e.time - e.tweenConfig.duration : e.time, -1 == this._endTime || i <= this._endTime) {
          var n, o
          switch (this._reversed ? (n = e.tweenConfig.endValue, o = e.tweenConfig.startValue) : (n = e.tweenConfig.startValue, o = e.tweenConfig.endValue), e.value.b1 = n.b1 || o.b1, e.value.b2 = n.b2 || o.b2, e.type) {
            case r.XY:
            case r.Size:
            case r.Scale:
            case r.Skew:
              e.tweener = t.GTween.to2(n.f1, n.f2, o.f1, o.f2, e.tweenConfig.duration)
              break
            case r.Alpha:
            case r.Rotation:
              e.tweener = t.GTween.to(n.f1, o.f1, e.tweenConfig.duration)
              break
            case r.Color:
              e.tweener = t.GTween.toColor(n.f1, o.f1, e.tweenConfig.duration)
              break
            case r.ColorFilter:
              e.tweener = t.GTween.to4(n.f1, n.f2, n.f3, n.f4, o.f1, o.f2, o.f3, o.f4, e.tweenConfig.duration)
          }
          e.tweener.setDelay(i).setEase(e.tweenConfig.easeType).setRepeat(e.tweenConfig.repeat, e.tweenConfig.yoyo).setTimeScale(this._timeScale).setTarget(e).onStart(this.onTweenStart, this).onUpdate(this.onTweenUpdate, this).onComplete(this.onTweenComplete, this), this._endTime >= 0 && e.tweener.setBreakpoint(this._endTime - i), this._totalTasks++
        }
      } else {
        e.type == r.Shake ? (i = this._reversed ? this._totalDuration - e.time - e.value.duration : e.time, e.value.offsetX = e.value.offsetY = 0, e.value.lastOffsetX = e.value.lastOffsetY = 0, e.tweener = t.GTween.shake(0, 0, e.value.amplitude, e.value.duration).setDelay(i).setTimeScale(this._timeScale).setTarget(e).onUpdate(this.onTweenUpdate, this).onComplete(this.onTweenComplete, this), this._endTime >= 0 && e.tweener.setBreakpoint(this._endTime - e.time), this._totalTasks++) : (i = this._reversed ? this._totalDuration - e.time : e.time) <= this._startTime ? (this.applyValue(e), this.callHook(e, !1)) : (-1 == this._endTime || i <= this._endTime) && (this._totalTasks++, e.tweener = t.GTween.delayedCall(i).setTimeScale(this._timeScale).setTarget(e).onComplete(this.onDelayedPlayItem, this))
      }
      null != e.tweener && e.tweener.seek(this._startTime)
    }, e.prototype.skipAnimations = function () {
      for (var e, i, n, o, s, a, h = this._items.length, l = 0; l < h; l++) {
        if (!((a = this._items[l]).type != r.Animation || a.time > this._startTime || (o = a.value).flag)) {
          e = (s = a.target).getProp(t.ObjectPropID.Frame), i = s.getProp(t.ObjectPropID.Playing) ? 0 : -1, n = 0
          for (var c = l; c < h; c++) (a = this._items[c]).type != r.Animation || a.target != s || a.time > this._startTime || ((o = a.value).flag = !0, -1 != o.frame ? (e = o.frame, i = o.playing ? a.time : -1, n = 0) : o.playing ? i < 0 && (i = a.time) : (i >= 0 && (n += a.time - i), i = -1), this.callHook(a, !1))
          i >= 0 && (n += this._startTime - i), s.setProp(t.ObjectPropID.Playing, i >= 0), s.setProp(t.ObjectPropID.Frame, e), n > 0 && s.setProp(t.ObjectPropID.DeltaTime, 1e3 * n)
        }
      }
    }, e.prototype.onDelayedPlayItem = function (t) {
      var e = t.target
      e.tweener = null, this._totalTasks--, this.applyValue(e), this.callHook(e, !1), this.checkAllComplete()
    }, e.prototype.onTweenStart = function (t) {
      var e, i, n = t.target
      n.type != r.XY && n.type != r.Size || (this._reversed ? (e = n.tweenConfig.endValue, i = n.tweenConfig.startValue) : (e = n.tweenConfig.startValue, i = n.tweenConfig.endValue), n.type == r.XY ? n.target != this._owner ? (e.b1 ? e.b3 && (t.startValue.x = e.f1 * this._owner.width) : t.startValue.x = n.target.x, e.b2 ? e.b3 && (t.startValue.y = e.f2 * this._owner.height) : t.startValue.y = n.target.y, i.b1 ? i.b3 && (t.endValue.x = i.f1 * this._owner.width) : t.endValue.x = t.startValue.x, i.b2 ? i.b3 && (t.endValue.y = i.f2 * this._owner.height) : t.endValue.y = t.startValue.y) : (e.b1 || (t.startValue.x = n.target.x - this._ownerBaseX), e.b2 || (t.startValue.y = n.target.y - this._ownerBaseY), i.b1 || (t.endValue.x = t.startValue.x), i.b2 || (t.endValue.y = t.startValue.y)) : (e.b1 || (t.startValue.x = n.target.width), e.b2 || (t.startValue.y = n.target.height), i.b1 || (t.endValue.x = t.startValue.x), i.b2 || (t.endValue.y = t.startValue.y)), n.tweenConfig.path && (n.value.b1 = n.value.b2 = !0, t.setPath(n.tweenConfig.path)))
      this.callHook(n, !1)
    }, e.prototype.onTweenUpdate = function (t) {
      var e = t.target
      switch (e.type) {
        case r.XY:
        case r.Size:
        case r.Scale:
        case r.Skew:
          e.value.f1 = t.value.x, e.value.f2 = t.value.y, e.tweenConfig.path && (e.value.f1 += t.startValue.x, e.value.f2 += t.startValue.y)
          break
        case r.Alpha:
        case r.Rotation:
          e.value.f1 = t.value.x
          break
        case r.Color:
          e.value.f1 = t.value.color
          break
        case r.ColorFilter:
          e.value.f1 = t.value.x, e.value.f2 = t.value.y, e.value.f3 = t.value.z, e.value.f4 = t.value.w
          break
        case r.Shake:
          e.value.offsetX = t.deltaValue.x, e.value.offsetY = t.deltaValue.y
      }
      this.applyValue(e)
    }, e.prototype.onTweenComplete = function (t) {
      var e = t.target
      e.tweener = null, this._totalTasks--, t.allCompleted && this.callHook(e, !0), this.checkAllComplete()
    }, e.prototype.onPlayTransCompleted = function (t) {
      this._totalTasks--, this.checkAllComplete()
    }, e.prototype.callHook = function (t, e) {
      e ? t.tweenConfig && t.tweenConfig.endHook && t.tweenConfig.endHook.call(t.tweenConfig.endHookCaller) : t.time >= this._startTime && null != t.hook && t.hook.call(t.hookCaller)
    }, e.prototype.checkAllComplete = function () {
      if (this._playing && 0 == this._totalTasks) {
        if (this._totalTimes < 0) {
          this.internalPlay()
        } else if (this._totalTimes--, this._totalTimes > 0) {
          this.internalPlay()
        } else {
          this._playing = !1
          for (var t = this._items.length, e = 0; e < t; e++) {
            var i = this._items[e]
            i.target && 0 != i.displayLockToken && (i.target.releaseDisplayLock(i.displayLockToken), i.displayLockToken = 0)
          }
          if (null != this._onComplete) {
            var n = this._onComplete, o = this._onCompleteParam, r = this._onCompleteCaller
            this._onComplete = null, this._onCompleteParam = null, this._onCompleteCaller = null, n.call(r, o)
          }
        }
      }
    }, e.prototype.applyValue = function (e) {
      e.target._gearLocked = !0
      var i = e.value
      switch (e.type) {
        case r.XY:
          e.target == this._owner ? i.b1 && i.b2 ? e.target.setXY(i.f1 + this._ownerBaseX, i.f2 + this._ownerBaseY) : i.b1 ? e.target.x = i.f1 + this._ownerBaseX : e.target.y = i.f2 + this._ownerBaseY : i.b3 ? i.b1 && i.b2 ? e.target.setXY(i.f1 * this._owner.width, i.f2 * this._owner.height) : i.b1 ? e.target.x = i.f1 * this._owner.width : i.b2 && (e.target.y = i.f2 * this._owner.height) : i.b1 && i.b2 ? e.target.setXY(i.f1, i.f2) : i.b1 ? e.target.x = i.f1 : i.b2 && (e.target.y = i.f2)
          break
        case r.Size:
          i.b1 || (i.f1 = e.target.width), i.b2 || (i.f2 = e.target.height), e.target.setSize(i.f1, i.f2)
          break
        case r.Pivot:
          e.target.setPivot(i.f1, i.f2, e.target.pivotAsAnchor)
          break
        case r.Alpha:
          e.target.alpha = i.f1
          break
        case r.Rotation:
          e.target.rotation = i.f1
          break
        case r.Scale:
          e.target.setScale(i.f1, i.f2)
          break
        case r.Skew:
          e.target.setSkew(i.f1, i.f2)
          break
        case r.Color:
          e.target.setProp(t.ObjectPropID.Color, i.f1)
          break
        case r.Animation:
          i.frame >= 0 && e.target.setProp(t.ObjectPropID.Frame, i.frame), e.target.setProp(t.ObjectPropID.Playing, i.playing), e.target.setProp(t.ObjectPropID.TimeScale, this._timeScale)
          break
        case r.Visible:
          e.target.visible = i.visible
          break
        case r.Transition:
          if (this._playing) {
            var n = i.trans
            if (n) {
              this._totalTasks++
              var o = this._startTime > e.time ? this._startTime - e.time : 0,
                s = this._endTime >= 0 ? this._endTime - e.time : -1
              i.stopTime >= 0 && (s < 0 || s > i.stopTime) && (s = i.stopTime), n.timeScale = this._timeScale, n._play(this.onPlayTransCompleted, this, e, i.playTimes, 0, o, s, this._reversed)
            }
          }
          break
        case r.Sound:
          if (this._playing && e.time >= this._startTime) {
            if (!i.audioClip) {
              var a = t.UIPackage.getItemByURL(i.sound)
              a && (i.audioClip = a.owner.getItemAsset(a))
            }
            i.audioClip && t.GRoot.inst.playOneShotSound(i.audioClip, i.volume)
          }
          break
        case r.Shake:
          e.target.setXY(e.target.x - i.lastOffsetX + i.offsetX, e.target.y - i.lastOffsetY + i.offsetY), i.lastOffsetX = i.offsetX, i.lastOffsetY = i.offsetY
          break
        case r.ColorFilter:
          t.ToolSet.setColorFilter(e.target.displayObject, [i.f1, i.f2, i.f3, i.f4])
          break
        case r.Text:
          e.target.text = i.text
          break
        case r.Icon:
          e.target.icon = i.text
      }
      e.target._gearLocked = !1
    }, e.prototype.setup = function (e) {
      this.name = e.readS(), this._options = e.readInt(), this._autoPlay = e.readBool(), this._autoPlayTimes = e.readInt(), this._autoPlayDelay = e.readFloat()
      for (var i = e.readShort(), n = 0; n < i; n++) {
        var o = e.readShort(), r = e.position
        e.seek(r, 0)
        var h = new s(e.readByte())
        this._items[n] = h, h.time = e.readFloat()
        var l = e.readShort()
        if (h.targetId = l < 0 ? '' : this._owner.getChildAt(l).id, h.label = e.readS(), e.readBool()) {
          if (e.seek(r, 1), h.tweenConfig = new a, h.tweenConfig.duration = e.readFloat(), h.time + h.tweenConfig.duration > this._totalDuration && (this._totalDuration = h.time + h.tweenConfig.duration), h.tweenConfig.easeType = e.readByte(), h.tweenConfig.repeat = e.readInt(), h.tweenConfig.yoyo = e.readBool(), h.tweenConfig.endLabel = e.readS(), e.seek(r, 2), this.decodeValue(h, e, h.tweenConfig.startValue), e.seek(r, 3), this.decodeValue(h, e, h.tweenConfig.endValue), e.version >= 2) {
            var c = e.readInt()
            if (c > 0) {
              h.tweenConfig.path = new t.GPath
              for (var u = new Array, _ = 0; _ < c; _++) {
                var p = e.readByte()
                switch (p) {
                  case t.CurveType.Bezier:
                    u.push(t.GPathPoint.newBezierPoint(e.readFloat(), e.readFloat(), e.readFloat(), e.readFloat()))
                    break
                  case t.CurveType.CubicBezier:
                    u.push(t.GPathPoint.newCubicBezierPoint(e.readFloat(), e.readFloat(), e.readFloat(), e.readFloat(), e.readFloat(), e.readFloat()))
                    break
                  default:
                    u.push(t.GPathPoint.newPoint(e.readFloat(), e.readFloat(), p))
                }
              }
              h.tweenConfig.path.create(u)
            }
          }
        } else {
          h.time > this._totalDuration && (this._totalDuration = h.time), e.seek(r, 2), this.decodeValue(h, e, h.value)
        }
        e.position = r + o
      }
    }, e.prototype.decodeValue = function (t, e, i) {
      switch (t.type) {
        case r.XY:
        case r.Size:
        case r.Pivot:
        case r.Skew:
          i.b1 = e.readBool(), i.b2 = e.readBool(), i.f1 = e.readFloat(), i.f2 = e.readFloat(), e.version >= 2 && t.type == r.XY && (i.b3 = e.readBool())
          break
        case r.Alpha:
        case r.Rotation:
          i.f1 = e.readFloat()
          break
        case r.Scale:
          i.f1 = e.readFloat(), i.f2 = e.readFloat()
          break
        case r.Color:
          i.f1 = e.readColor()
          break
        case r.Animation:
          i.playing = e.readBool(), i.frame = e.readInt()
          break
        case r.Visible:
          i.visible = e.readBool()
          break
        case r.Sound:
          i.sound = e.readS(), i.volume = e.readFloat()
          break
        case r.Transition:
          i.transName = e.readS(), i.playTimes = e.readInt()
          break
        case r.Shake:
          i.amplitude = e.readFloat(), i.duration = e.readFloat()
          break
        case r.ColorFilter:
          i.f1 = e.readFloat(), i.f2 = e.readFloat(), i.f3 = e.readFloat(), i.f4 = e.readFloat()
          break
        case r.Text:
        case r.Icon:
          i.text = e.readS()
      }
    }, e
  }()
  t.Transition = e
  var i = 1, n = 2, o = 4, r = function () {
    function t () {
    }

    return t.XY = 0, t.Size = 1, t.Scale = 2, t.Pivot = 3, t.Alpha = 4, t.Rotation = 5, t.Color = 6, t.Animation = 7, t.Visible = 8, t.Sound = 9, t.Transition = 10, t.Shake = 11, t.ColorFilter = 12, t.Skew = 13, t.Text = 14, t.Icon = 15, t.Unknown = 16, t
  }(), s = function () {
    return function (t) {
      this.type = t, this.value = {}, this.displayLockToken = 0
    }
  }(), a = function () {
    return function () {
      this.duration = 0, this.repeat = 0, this.easeType = t.EaseType.QuadOut, this.startValue = {
        b1: !0,
        b2: !0
      }, this.endValue = {b1: !0, b2: !0}
    }
  }()
}(fgui || (fgui = {})), function (t) {
  var e = function () {
    function e () {
    }

    return e.loadFromXML = function (t) {
      var i = {}
      e.strings = i
      for (var n = egret.XML.parse(t).children, o = n.length, r = 0; r < o; r++) {
        var s = n[r]
        if ('string' == s.name) {
          var a = s.attributes.name, h = s.children.length > 0 ? s.children[0].text : '', l = a.indexOf('-')
          if (-1 == l) continue
          var c = a.substr(0, l), u = a.substr(l + 1), _ = i[c]
          _ || (_ = {}, i[c] = _), _[u] = h
        }
      }
    }, e.translateComponent = function (i) {
      if (null != e.strings) {
        var n = e.strings[i.owner.id + i.id]
        if (null != n) {
          var o, r, s, a, h, l, c, u, _, p = i.rawData
          p.seek(0, 2)
          var d = p.readShort()
          for (h = 0; h < d; h++) {
            c = p.readShort(), u = p.position, p.seek(u, 0)
            var g = p.readByte(), f = g
            p.skip(4), o = p.readS(), f == t.ObjectType.Component && p.seek(u, 6) && (f = p.readByte()), p.seek(u, 1), null != (r = n[o + '-tips']) && p.writeS(r), p.seek(u, 2)
            var y = p.readShort()
            for (l = 0; l < y; l++) {
              if (s = p.readShort(), s += p.position, 6 == p.readByte()) {
                for (p.skip(2), _ = p.readShort(), b = 0; b < _; b++) null != p.readS() && (null != (r = n[o + '-texts_' + b]) ? p.writeS(r) : p.skip(2))
                p.readBool() && null != (r = n[o + '-texts_def']) && p.writeS(r)
              }
              if (g == t.ObjectType.Component && p.version >= 2) {
                p.seek(u, 4), p.skip(2), p.skip(4 * p.readShort())
                for (var m = p.readShort(), b = 0; b < m; b++) {
                  var v = p.readS()
                  0 == p.readShort() && null != (r = n[o + '-cp-' + v]) ? p.writeS(r) : p.skip(2)
                }
              }
              p.position = s
            }
            switch (f) {
              case t.ObjectType.Text:
              case t.ObjectType.RichText:
              case t.ObjectType.InputText:
                null != (r = n[o]) && (p.seek(u, 6), p.writeS(r)), null != (r = n[o + '-prompt']) && (p.seek(u, 4), p.writeS(r))
                break
              case t.ObjectType.List:
              case t.ObjectType.Tree:
                for (p.seek(u, 8), p.skip(2), a = p.readShort(), l = 0; l < a; l++) {
                  if (s = p.readShort(), s += p.position, p.skip(2), f == t.ObjectType.Tree && p.skip(2), null != (r = n[o + '-' + l]) ? p.writeS(r) : p.skip(2), null != (r = n[o + '-' + l + '-0']) ? p.writeS(r) : p.skip(2), p.version >= 2) {
                    p.skip(6), p.skip(4 * p.readUnsignedShort())
                    for (m = p.readUnsignedShort(), b = 0; b < m; b++) {
                      v = p.readS()
                      0 == p.readUnsignedShort() && null != (r = n[o + '-' + l + '-' + v]) ? p.writeS(r) : p.skip(2)
                    }
                  }
                  p.position = s
                }
                break
              case t.ObjectType.Label:
                p.seek(u, 6) && p.readByte() == f && (null != (r = n[o]) ? p.writeS(r) : p.skip(2), p.skip(2), p.readBool() && p.skip(4), p.skip(4), p.readBool() && null != (r = n[o + '-prompt']) && p.writeS(r))
                break
              case t.ObjectType.Button:
                p.seek(u, 6) && p.readByte() == f && (null != (r = n[o]) ? p.writeS(r) : p.skip(2), null != (r = n[o + '-0']) && p.writeS(r))
                break
              case t.ObjectType.ComboBox:
                if (p.seek(u, 6) && p.readByte() == f) {
                  for (a = p.readShort(), l = 0; l < a; l++) s = p.readShort(), s += p.position, null != (r = n[o + '-' + l]) && p.writeS(r), p.position = s
                  null != (r = n[o]) && p.writeS(r)
                }
            }
            p.position = u + c
          }
        }
      }
    }, e
  }()
  t.TranslationHelper = e
}(fgui || (fgui = {})), function (t) {
  var e = function () {
    function e () {
    }

    return e.defaultFont = 'SimSun', e.modalLayerColor = 3355443, e.modalLayerAlpha = .2, e.buttonSoundVolumeScale = 1, e.defaultScrollStep = 25, e.defaultScrollDecelerationRate = .967, e.defaultScrollBarDisplay = t.ScrollBarDisplayType.Visible, e.defaultScrollTouchEffect = !0, e.defaultScrollBounceEffect = !0, e.defaultComboBoxVisibleItemCount = 10, e.touchScrollSensitivity = 20, e.touchDragSensitivity = 10, e.clickDragSensitivity = 2, e.bringWindowToFrontOnClick = !0, e.frameTimeForAsyncUIConstruction = 2, e
  }()
  t.UIConfig = e
}(fgui || (fgui = {})), function (t) {
  var e = function () {
    function e () {
    }

    return e.setExtension = function (i, n) {
      if (null == i) throw 'Invaild url: ' + i
      var o = t.UIPackage.getItemByURL(i)
      o && (o.extensionType = n), e.extensions[i] = n
    }, e.setPackageItemExtension = function (t, i) {
      e.setExtension(t, i)
    }, e.setLoaderExtension = function (t) {
      e.loaderType = t
    }, e.resolvePackageItemExtension = function (t) {
      var i = e.extensions['ui://' + t.owner.id + t.id]
      i || (i = e.extensions['ui://' + t.owner.name + '/' + t.name]), i && (t.extensionType = i)
    }, e.newObject = function (i, n) {
      var o
      if ('number' == typeof i) {
        switch (i) {
          case t.ObjectType.Image:
            return new t.GImage
          case t.ObjectType.MovieClip:
            return new t.GMovieClip
          case t.ObjectType.Component:
            return new t.GComponent
          case t.ObjectType.Text:
            return new t.GTextField
          case t.ObjectType.RichText:
            return new t.GRichTextField
          case t.ObjectType.InputText:
            return new t.GTextInput
          case t.ObjectType.Group:
            return new t.GGroup
          case t.ObjectType.List:
            return new t.GList
          case t.ObjectType.Graph:
            return new t.GGraph
          case t.ObjectType.Loader:
            return e.loaderType ? new e.loaderType : new t.GLoader
          case t.ObjectType.Button:
            return new t.GButton
          case t.ObjectType.Label:
            return new t.GLabel
          case t.ObjectType.ProgressBar:
            return new t.GProgressBar
          case t.ObjectType.Slider:
            return new t.GSlider
          case t.ObjectType.ScrollBar:
            return new t.GScrollBar
          case t.ObjectType.ComboBox:
            return new t.GComboBox
          case t.ObjectType.Tree:
            return new t.GTree
          case t.ObjectType.Loader3D:
            return new t.GLoader3D
          default:
            return null
        }
      } else {
        (o = i.type == t.PackageItemType.Component ? n ? new n : i.extensionType ? new i.extensionType : e.newObject(i.objectType) : e.newObject(i.objectType)) && (o.packageItem = i)
      }
      return o
    }, e.extensions = {}, e
  }()
  t.UIObjectFactory = e
}(fgui || (fgui = {})), function (t) {
  var e = function () {
    function e () {
      this._items = [], this._itemsById = {}, this._itemsByName = {}, this._sprites = {}, this._dependencies = [], this._branches = [], this._branchIndex = -1
    }

    return Object.defineProperty(e, 'branch', {
      get: function () {
        return e._branch
      }, set: function (t) {
        for (var i in e._branch = t, e._instById) {
          var n = e._instById[i]
          n._branches && (n._branchIndex = n._branches.indexOf(t))
        }
      }, enumerable: !0, configurable: !0
    }), e.getVar = function (t) {
      return e._vars[t]
    }, e.setVar = function (t, i) {
      e._vars[t] = i
    }, e.getById = function (t) {
      return e._instById[t]
    }, e.getByName = function (t) {
      return e._instByName[t]
    }, e.loadPackage = function (n) {
      return __awaiter(this, void 0, void 0, function () {
        var o = this
        return __generator(this, function (r) {
          return [2, new Promise(function (r) {
            return __awaiter(o, void 0, void 0, function () {
              var o, s, a, h, l, c
              return __generator(this, function (u) {
                switch (u.label) {
                  case 0:
                    return (o = e._instById[n]) ? (r(o), [2]) : [4, RES.getResAsync(i(n, 'fui'))]
                  case 1:
                    for (s = u.sent(), (o = new e)._resKey = n, o.loadPackage(new t.ByteBuffer(s)), a = o._items.length, h = [], l = 0; l < a; l++) (c = o._items[l]).type != t.PackageItemType.Atlas && c.type != t.PackageItemType.Sound || h.push(RES.getResAsync(c.file))
                    return h.length > 0 ? [4, Promise.all(h)] : [3, 3]
                  case 2:
                    u.sent(), u.label = 3
                  case 3:
                    return e._instById[o.id] = o, e._instByName[o.name] = o, e._instById[o._resKey] = o, r(o), [2]
                }
              })
            })
          })]
        })
      })
    }, e.addPackage = function (i, n) {
      if (!n && !(n = RES.getRes(i))) throw 'Resource \'' + i + '\' not found, please check default.res.json!'
      var o = new e
      return o._resKey = i, o.loadPackage(new t.ByteBuffer(n)), e._instById[o.id] = o, e._instByName[o.name] = o, e._instById[i] = o, o
    }, e.removePackage = function (t) {
      var i = e._instById[t]
      if (i || (i = e._instByName[t]), !i) throw new Error('unknown package: ' + t)
      i.dispose(), delete e._instById[i.id], delete e._instByName[i.name], delete e._instById[i._resKey], null != i._customId && delete e._instById[i._customId]
    }, e.createObject = function (t, i, n) {
      var o = e.getByName(t)
      return o ? o.createObject(i, n) : null
    }, e.createObjectFromURL = function (t, i) {
      var n = e.getItemByURL(t)
      return n ? n.owner.internalCreateObject(n, i) : null
    }, e.getItemURL = function (t, i) {
      var n = e.getByName(t)
      if (!n) return null
      var o = n._itemsByName[i]
      return o ? 'ui://' + n.id + o.id : null
    }, e.getItemByURL = function (t) {
      var i = t.indexOf('//')
      if (-1 == i) return null
      var n = t.indexOf('/', i + 2)
      if (-1 == n) {
        if (t.length > 13) {
          var o = t.substr(5, 8), r = e.getById(o)
          if (null != r) {
            var s = t.substr(13)
            return r.getItemById(s)
          }
        }
      } else {
        var a = t.substr(i + 2, n - i - 2)
        if (null != (r = e.getByName(a))) {
          var h = t.substr(n + 1)
          return r.getItemByName(h)
        }
      }
      return null
    }, e.normalizeURL = function (t) {
      if (null == t) return null
      var i = t.indexOf('//')
      if (-1 == i) return null
      var n = t.indexOf('/', i + 2)
      if (-1 == n) return t
      var o = t.substr(i + 2, n - i - 2), r = t.substr(n + 1)
      return e.getItemURL(o, r)
    }, e.setStringsSource = function (e) {
      t.TranslationHelper.loadFromXML(e)
    }, e.prototype.loadPackage = function (n) {
      if (1179080009 != n.readUnsignedInt()) throw 'FairyGUI: old package format found in \'' + this._resKey + '\''
      n.version = n.readInt()
      var o = n.readBool()
      if (this._id = n.readUTF(), this._name = n.readUTF(), n.skip(20), o) {
        var r = new Uint8Array(n.buffer, n.position, n.length - n.position), s = new Zlib.RawInflate(r),
          a = new t.ByteBuffer(s.decompress())
        a.version = n.version, n = a
      }
      var h, l, c, u, _, p = n.version >= 2, d = n.position
      n.seek(d, 4), h = n.readInt()
      var g, f = new Array(h)
      for (f.reduceRight, l = 0; l < h; l++) f[l] = n.readUTF()
      for (n.stringTable = f, n.seek(d, 0), h = n.readShort(), l = 0; l < h; l++) {
        this._dependencies.push({
          id: n.readS(),
          name: n.readS()
        })
      }
      p && ((h = n.readShort()) > 0 && (this._branches = n.readSArray(h), e._branch && (this._branchIndex = this._branches.indexOf(e._branch))), _ = h > 0), n.seek(d, 1)
      var y = this._resKey, m = y.lastIndexOf('/'), b = -1 == m ? '' : y.substr(0, m + 1)
      for (y += '_', h = n.readShort(), l = 0; l < h; l++) {
        switch (c = n.readInt(), c += n.position, (g = new t.PackageItem).owner = this, g.type = n.readByte(), g.id = n.readS(), g.name = n.readS(), n.readS(), g.file = n.readS(), n.readBool(), g.width = n.readInt(), g.height = n.readInt(), g.type) {
          case t.PackageItemType.Image:
            g.objectType = t.ObjectType.Image
            var v = n.readByte()
            1 == v ? (g.scale9Grid = new egret.Rectangle, g.scale9Grid.x = n.readInt(), g.scale9Grid.y = n.readInt(), g.scale9Grid.width = n.readInt(), g.scale9Grid.height = n.readInt(), g.tileGridIndice = n.readInt()) : 2 == v && (g.scaleByTile = !0), g.smoothing = n.readBool()
            break
          case t.PackageItemType.MovieClip:
            g.smoothing = n.readBool(), g.objectType = t.ObjectType.MovieClip, g.rawData = n.readBuffer()
            break
          case t.PackageItemType.Font:
            g.rawData = n.readBuffer()
            break
          case t.PackageItemType.Component:
            var w = n.readByte()
            g.objectType = w > 0 ? w : t.ObjectType.Component, g.rawData = n.readBuffer(), t.UIObjectFactory.resolvePackageItemExtension(g)
            break
          case t.PackageItemType.Atlas:
          case t.PackageItemType.Sound:
          case t.PackageItemType.Misc:
            var C = g.file.lastIndexOf('.')
            g.file = y + (-1 == C ? g.file : i(g.file.substring(0, C), g.file.substring(C + 1)))
            break
          case t.PackageItemType.Spine:
          case t.PackageItemType.DragonBones:
            var S = g.file.lastIndexOf('.')
            g.file = b + (-1 == S ? g.file : g.file.substring(0, S)), g.skeletonAnchor = new egret.Point, g.skeletonAnchor.x = n.readFloat(), g.skeletonAnchor.y = n.readFloat()
        }
        if (p) {
          (u = n.readS()) && (g.name = u + '/' + g.name)
          var x = n.readUnsignedByte()
          x > 0 && (_ ? g.branches = n.readSArray(x) : this._itemsById[n.readS()] = g)
          var T = n.readUnsignedByte()
          T > 0 && (g.highResolution = n.readSArray(T))
        }
        this._items.push(g), this._itemsById[g.id] = g, null != g.name && (this._itemsByName[g.name] = g), n.position = c
      }
      for (n.seek(d, 2), h = n.readShort(), l = 0; l < h; l++) {
        c = n.readShort(), c += n.position
        var I = n.readS(), P = {
          atlas: g = this._itemsById[n.readS()],
          rect: new egret.Rectangle,
          offset: new egret.Point,
          originalSize: new egret.Point
        }
        P.rect.x = n.readInt(), P.rect.y = n.readInt(), P.rect.width = n.readInt(), P.rect.height = n.readInt(), P.rotated = n.readBool(), p && n.readBool() ? (P.offset.x = n.readInt(), P.offset.y = n.readInt(), P.originalSize.x = n.readInt(), P.originalSize.y = n.readInt()) : (P.originalSize.x = P.rect.width, P.originalSize.y = P.rect.height), this._sprites[I] = P, n.position = c
      }
      if (n.seek(d, 3)) for (h = n.readShort(), l = 0; l < h; l++) c = n.readInt(), c += n.position, (g = this._itemsById[n.readS()]) && g.type == t.PackageItemType.Image && (g.pixelHitTestData = new t.PixelHitTestData, g.pixelHitTestData.load(n)), n.position = c
    }, e.prototype.dispose = function () {
      for (var e = this._items.length, i = 0; i < e; i++) {
        var n = this._items[i]
        n.type == t.PackageItemType.Atlas ? RES.destroyRes(n.file, !1) : (n.type, t.PackageItemType.Sound)
      }
    }, Object.defineProperty(e.prototype, 'id', {
      get: function () {
        return this._id
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(e.prototype, 'name', {
      get: function () {
        return this._name
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(e.prototype, 'customId', {
      get: function () {
        return this._customId
      }, set: function (t) {
        null != this._customId && delete e._instById[this._customId], this._customId = t, null != this._customId && (e._instById[this._customId] = this)
      }, enumerable: !0, configurable: !0
    }), e.prototype.createObject = function (t, e) {
      var i = this._itemsByName[t]
      return i ? this.internalCreateObject(i, e) : null
    }, e.prototype.internalCreateObject = function (i, n) {
      var o = t.UIObjectFactory.newObject(i, n)
      return null == o ? null : (e._constructing++, o.constructFromResource(), e._constructing--, o)
    }, e.prototype.getItemById = function (t) {
      return this._itemsById[t]
    }, e.prototype.getItemByName = function (t) {
      return this._itemsByName[t]
    }, e.prototype.getItemAssetByName = function (t) {
      var e = this._itemsByName[t]
      if (null == e) throw 'Resource not found -' + t
      return this.getItemAsset(e)
    }, e.prototype.getItemAsset = function (e) {
      switch (e.type) {
        case t.PackageItemType.Image:
          if (!e.decoded) {
            e.decoded = !0
            var i = this._sprites[e.id]
            if (i) {
              var n = this.getItemAsset(i.atlas)
              e.asset = new egret.Texture, e.asset.bitmapData = n.bitmapData, e.asset.$initData(n.$bitmapX + i.rect.x, n.$bitmapY + i.rect.y, i.rect.width, i.rect.height, i.offset.x, i.offset.y, i.originalSize.x, i.originalSize.y, n.$sourceWidth, n.$sourceHeight, i.rotated)
            }
          }
          return e.asset
        case t.PackageItemType.Atlas:
        case t.PackageItemType.Sound:
          return e.decoded || (e.decoded = !0, e.asset = RES.getRes(e.file), e.asset || console.log('Resource \'' + e.file + '\' not found, please check default.res.json!')), e.asset
        case t.PackageItemType.Font:
          return e.decoded || (e.decoded = !0, this.loadFont(e)), e.bitmapFont
        case t.PackageItemType.MovieClip:
          return e.decoded || (e.decoded = !0, this.loadMovieClip(e)), e.frames
        case t.PackageItemType.Misc:
          return e.file ? RES.getRes(e.file) : null
        default:
          return null
      }
    }, e.prototype.getItemAssetAsync = function (e, i) {
      if (e.decoded) {
        i(null, e)
      } else if (e.loading) {
        e.loading.push(i)
      } else {
        switch (e.type) {
          case t.PackageItemType.DragonBones:
            e.loading = [i], this.loadDragonBones(e)
            break
          default:
            this.getItemAsset(e), i(null, e)
        }
      }
    }, e.prototype.loadMovieClip = function (t) {
      var e = t.rawData
      e.seek(0, 0), t.interval = e.readInt(), t.swing = e.readBool(), t.repeatDelay = e.readInt(), e.seek(0, 1)
      var i, n, o, r, s = e.readShort()
      t.frames = Array(s)
      for (var a = 0; a < s; a++) {
        var h = e.readShort()
        h += e.position
        var l = {}
        if (o = e.readInt(), r = e.readInt(), e.readInt(), e.readInt(), l.addDelay = e.readInt(), null != (i = e.readS()) && null != (n = this._sprites[i])) {
          var c = this.getItemAsset(n.atlas)
          l.texture = new egret.Texture, l.texture.bitmapData = c.bitmapData, l.texture.$initData(c.$bitmapX + n.rect.x, c.$bitmapY + n.rect.y, n.rect.width, n.rect.height, o, r, t.width, t.height, c.$sourceWidth, c.$sourceHeight, n.rotated)
        }
        t.frames[a] = l, e.position = h
      }
    }, e.prototype.loadFont = function (e) {
      var i = new t.BitmapFont
      e.bitmapFont = i
      var n = e.rawData
      n.seek(0, 0), i.ttf = n.readBool(), i.tint = n.readBool(), i.resizable = n.readBool(), n.readBool(), i.size = n.readInt()
      var o, r, s = n.readInt(), a = n.readInt(), h = this._sprites[e.id]
      h && (o = this.getItemAsset(h.atlas)), n.seek(0, 1)
      for (var l = n.readInt(), c = 0; c < l; c++) {
        var u = n.readShort()
        u += n.position, r = {}
        var _ = n.readChar()
        i.glyphs[_] = r
        var p = n.readS(), d = n.readInt(), g = n.readInt()
        if (r.x = n.readInt(), r.y = n.readInt(), r.width = n.readInt(), r.height = n.readInt(), r.advance = n.readInt(), r.channel = n.readByte(), 1 == r.channel ? r.channel = 3 : 2 == r.channel ? r.channel = 2 : 3 == r.channel && (r.channel = 1), i.ttf) {
          r.texture = new egret.Texture, r.texture.bitmapData = o.bitmapData, r.texture.$initData(o.$bitmapX + d + h.rect.x, o.$bitmapY + g + h.rect.y, r.width, r.height, h.offset.x, h.offset.y, h.originalSize.x, h.originalSize.y, o.$sourceWidth, o.$sourceHeight, h.rotated), r.lineHeight = a
        } else {
          var f = this._itemsById[p]
          f && (this.getItemAsset(f), r.width = f.width, r.height = f.height, r.texture = f.asset), 0 == r.advance && (r.advance = 0 == s ? r.x + r.width : s), r.lineHeight = r.y < 0 ? r.height : r.y + r.height, r.lineHeight < i.size && (r.lineHeight = i.size)
        }
        n.position = u
      }
    }, e.prototype.loadDragonBones = function (t) {
      var e = i(t.file, ['json', 'dbbin']), n = t.file.replace('_ske', '_tex'), o = i(n, 'json'), r = i(n, 'png'),
        s = RES.getResAsync(e), a = RES.getResAsync(o), h = RES.getResAsync(r)
      Promise.all([s, a, h]).then(function (e) {
        var i = dragonBones.EgretFactory.factory
        t.asset = i.parseDragonBonesData(e[0]), t.atlasAsset = i.parseTextureAtlasData(e[1], e[2]), t.armatureName = t.asset.armatureNames[0]
        var n = t.loading
        delete t.loading, n.forEach(function (e) {
          return e(null, t)
        })
      }).catch(function (e) {
        var i = t.loading
        delete t.loading, i.forEach(function (i) {
          return i(e, t)
        })
      })
    }, e._constructing = 0, e._instById = {}, e._instByName = {}, e._branch = '', e._vars = {}, e
  }()

  function i (t, e) {
    if (Array.isArray(e)) {
      for (var i = 0; i < e.length; i++) {
        var n = t + '_' + e[i]
        if (RES.hasRes(n)) return n
      }
      return t
    }
    n = t + '_' + e
    return RES.hasRes(n) ? n : t
  }

  t.UIPackage = e
}(fgui || (fgui = {})), function (t) {
  var e = function (e) {
    function i () {
      var i = e.call(this) || this
      return i._requestingCmd = 0, i._uiSources = new Array, i.bringToFontOnClick = t.UIConfig.bringWindowToFrontOnClick, i.displayObject.addEventListener(egret.Event.ADDED_TO_STAGE, i.__onShown, i), i.displayObject.addEventListener(egret.Event.REMOVED_FROM_STAGE, i.__onHidden, i), i.displayObject.addEventListener(egret.TouchEvent.TOUCH_BEGIN, i.__mouseDown, i, !0), i
    }

    return __extends(i, e), i.prototype.addUISource = function (t) {
      this._uiSources.push(t)
    }, Object.defineProperty(i.prototype, 'contentPane', {
      get: function () {
        return this._contentPane
      }, set: function (e) {
        this._contentPane != e && (this._contentPane && this.removeChild(this._contentPane), this._contentPane = e, this._contentPane && (this.addChild(this._contentPane), this.setSize(this._contentPane.width, this._contentPane.height), this._contentPane.addRelation(this, t.RelationType.Size), this._frame = this._contentPane.getChild('frame'), this._frame && (this.closeButton = this._frame.getChild('closeButton'), this.dragArea = this._frame.getChild('dragArea'), this.contentArea = this._frame.getChild('contentArea'))))
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'frame', {
      get: function () {
        return this._frame
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'closeButton', {
      get: function () {
        return this._closeButton
      }, set: function (t) {
        this._closeButton && this._closeButton.removeClickListener(this.closeEventHandler, this), this._closeButton = t, this._closeButton && this._closeButton.addClickListener(this.closeEventHandler, this)
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'dragArea', {
      get: function () {
        return this._dragArea
      }, set: function (e) {
        this._dragArea != e && (this._dragArea && (this._dragArea.draggable = !1, this._dragArea.removeEventListener(t.DragEvent.DRAG_START, this.__dragStart, this)), this._dragArea = e, this._dragArea && (this._dragArea instanceof t.GGraph && null == this._dragArea.displayObject && this._dragArea.asGraph.drawRect(0, 0, 0, 0, 0), this._dragArea.draggable = !0, this._dragArea.addEventListener(t.DragEvent.DRAG_START, this.__dragStart, this)))
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'contentArea', {
      get: function () {
        return this._contentArea
      }, set: function (t) {
        this._contentArea = t
      }, enumerable: !0, configurable: !0
    }), i.prototype.show = function () {
      t.GRoot.inst.showWindow(this)
    }, i.prototype.showOn = function (t) {
      t.showWindow(this)
    }, i.prototype.hide = function () {
      this.isShowing && this.doHideAnimation()
    }, i.prototype.hideImmediately = function () {
      var e = this.parent instanceof t.GRoot ? this.parent : null
      e || (e = t.GRoot.inst), e.hideWindowImmediately(this)
    }, i.prototype.centerOn = function (e, i) {
      this.setXY(Math.round((e.width - this.width) / 2), Math.round((e.height - this.height) / 2)), i && (this.addRelation(e, t.RelationType.Center_Center), this.addRelation(e, t.RelationType.Middle_Middle))
    }, i.prototype.toggleStatus = function () {
      this.isTop ? this.hide() : this.show()
    }, Object.defineProperty(i.prototype, 'isShowing', {
      get: function () {
        return null != this.parent
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'isTop', {
      get: function () {
        return null != this.parent && this.parent.getChildIndex(this) == this.parent.numChildren - 1
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'modal', {
      get: function () {
        return this._modal
      }, set: function (t) {
        this._modal = t
      }, enumerable: !0, configurable: !0
    }), i.prototype.bringToFront = function () {
      this.root.bringToFront(this)
    }, i.prototype.showModalWait = function (e) {
      null != e && (this._requestingCmd = e), t.UIConfig.windowModalWaiting && (this._modalWaitPane || (this._modalWaitPane = t.UIPackage.createObjectFromURL(t.UIConfig.windowModalWaiting)), this.layoutModalWaitPane(), this.addChild(this._modalWaitPane))
    }, i.prototype.layoutModalWaitPane = function () {
      if (this._contentArea) {
        var t = this._frame.localToGlobal()
        t = this.globalToLocal(t.x, t.y, t), this._modalWaitPane.setXY(t.x + this._contentArea.x, t.y + this._contentArea.y), this._modalWaitPane.setSize(this._contentArea.width, this._contentArea.height)
      } else {
        this._modalWaitPane.setSize(this.width, this.height)
      }
    }, i.prototype.closeModalWait = function (t) {
      return (null == t || 0 == t || this._requestingCmd == t) && (this._requestingCmd = 0, this._modalWaitPane && null != this._modalWaitPane.parent && this.removeChild(this._modalWaitPane), !0)
    }, Object.defineProperty(i.prototype, 'modalWaiting', {
      get: function () {
        return this._modalWaitPane && null != this._modalWaitPane.parent
      }, enumerable: !0, configurable: !0
    }), i.prototype.init = function () {
      if (!this._inited && !this._loading) {
        if (this._uiSources.length > 0) {
          this._loading = !1
          for (var t = this._uiSources.length, e = 0; e < t; e++) {
            var i = this._uiSources[e]
            i.loaded || (i.load(this.__uiLoadComplete, this), this._loading = !0)
          }
          this._loading || this._init()
        } else {
          this._init()
        }
      }
    }, i.prototype.onInit = function () {
    }, i.prototype.onShown = function () {
    }, i.prototype.onHide = function () {
    }, i.prototype.doShowAnimation = function () {
      this.onShown()
    }, i.prototype.doHideAnimation = function () {
      this.hideImmediately()
    }, i.prototype.__uiLoadComplete = function () {
      for (var t = this._uiSources.length, e = 0; e < t; e++) {
        if (!this._uiSources[e].loaded) return
      }
      this._loading = !1, this._init()
    }, i.prototype._init = function () {
      this._inited = !0, this.onInit(), this.isShowing && this.doShowAnimation()
    }, i.prototype.dispose = function () {
      this.displayObject.removeEventListener(egret.Event.ADDED_TO_STAGE, this.__onShown, this), this.displayObject.removeEventListener(egret.Event.REMOVED_FROM_STAGE, this.__onHidden, this), this.parent && this.hideImmediately(), e.prototype.dispose.call(this)
    }, i.prototype.closeEventHandler = function (t) {
      this.hide()
    }, i.prototype.__onShown = function (t) {
      this._inited ? this.doShowAnimation() : this.init()
    }, i.prototype.__onHidden = function (t) {
      this.closeModalWait(), this.onHide()
    }, i.prototype.__mouseDown = function (t) {
      this.isShowing && this.bringToFontOnClick && this.bringToFront()
    }, i.prototype.__dragStart = function (t) {
      t.preventDefault(), this.startDrag(t.touchPointID, t.stageX, t.stageY)
    }, i
  }(t.GComponent)
  t.Window = e
}(fgui || (fgui = {})), function (t) {
  var e = function () {
    function e () {
    }

    return e.createAction = function (e) {
      switch (e) {
        case 0:
          return new t.PlayTransitionAction
        case 1:
          return new t.ChangePageAction
      }
      return null
    }, e.prototype.run = function (t, e, i) {
      null != this.fromPage && 0 != this.fromPage.length && -1 == this.fromPage.indexOf(e) || null != this.toPage && 0 != this.toPage.length && -1 == this.toPage.indexOf(i) ? this.leave(t) : this.enter(t)
    }, e.prototype.enter = function (t) {
    }, e.prototype.leave = function (t) {
    }, e.prototype.setup = function (t) {
      var e, i
      for (e = t.readShort(), this.fromPage = [], i = 0; i < e; i++) this.fromPage[i] = t.readS()
      for (e = t.readShort(), this.toPage = [], i = 0; i < e; i++) this.toPage[i] = t.readS()
    }, e
  }()
  t.ControllerAction = e
}(fgui || (fgui = {})), function (t) {
  var e = function (e) {
    function i () {
      return e.call(this) || this
    }

    return __extends(i, e), i.prototype.enter = function (e) {
      if (this.controllerName) {
        var i
        if (this.objectId) {
          var n = e.parent.getChildById(this.objectId)
          if (!(n instanceof t.GComponent)) return
          i = n
        } else {
          i = e.parent
        }
        if (i) {
          var o = i.getController(this.controllerName)
          o && o != e && !o.changing && ('~1' == this.targetPage ? e.selectedIndex < o.pageCount && (o.selectedIndex = e.selectedIndex) : '~2' == this.targetPage ? o.selectedPage = e.selectedPage : o.selectedPageId = this.targetPage)
        }
      }
    }, i.prototype.setup = function (t) {
      e.prototype.setup.call(this, t), this.objectId = t.readS(), this.controllerName = t.readS(), this.targetPage = t.readS()
    }, i
  }(t.ControllerAction)
  t.ChangePageAction = e
}(fgui || (fgui = {})), function (t) {
  var e = function (t) {
    function e () {
      var e = t.call(this) || this
      return e.playTimes = 1, e.delay = 0, e.stopOnExit = !1, e
    }

    return __extends(e, t), e.prototype.enter = function (t) {
      var e = t.parent.getTransition(this.transitionName)
      e && (this._currentTransition && this._currentTransition.playing ? e.changePlayTimes(this.playTimes) : e.play(null, null, null, this.playTimes, this.delay), this._currentTransition = e)
    }, e.prototype.leave = function (t) {
      this.stopOnExit && this._currentTransition && (this._currentTransition.stop(), this._currentTransition = null)
    }, e.prototype.setup = function (e) {
      t.prototype.setup.call(this, e), this.transitionName = e.readS(), this.playTimes = e.readInt(), this.delay = e.readFloat(), this.stopOnExit = e.readBool()
    }, e
  }(t.ControllerAction)
  t.PlayTransitionAction = e
}(fgui || (fgui = {})), function (t) {
  var e = function () {
    return function () {
      this.size = 0, this.glyphs = {}
    }
  }()
  t.BitmapFont = e
}(fgui || (fgui = {})), function (t) {
  function e (e, i, n, o, r) {
    var s, a, h
    switch ((!o || n != t.FillOrigin.TopRight && n != t.FillOrigin.BottomLeft) && (o || n != t.FillOrigin.TopLeft && n != t.FillOrigin.BottomRight) || (r = 1 - r), s = ((a = e * Math.tan(Math.PI / 2 * r)) - i) / a, n) {
      case t.FillOrigin.TopLeft:
        h = o ? a <= i ? [0, 0, e, a, e, 0] : [0, 0, e * (1 - s), i, e, i, e, 0] : a <= i ? [0, 0, e, a, e, i, 0, i] : [0, 0, e * (1 - s), i, 0, i]
        break
      case t.FillOrigin.TopRight:
        h = o ? a <= i ? [e, 0, 0, a, 0, i, e, i] : [e, 0, e * s, i, e, i] : a <= i ? [e, 0, 0, a, 0, 0] : [e, 0, e * s, i, 0, i, 0, 0]
        break
      case t.FillOrigin.BottomLeft:
        h = o ? a <= i ? [0, i, e, i - a, e, 0, 0, 0] : [0, i, e * (1 - s), 0, 0, 0] : a <= i ? [0, i, e, i - a, e, i] : [0, i, e * (1 - s), 0, e, 0, e, i]
        break
      case t.FillOrigin.BottomRight:
        h = o ? a <= i ? [e, i, 0, i - a, 0, i] : [e, i, e * s, 0, 0, 0, 0, i] : a <= i ? [e, i, 0, i - a, 0, 0, e, 0] : [e, i, e * s, 0, e, 0]
    }
    return h
  }

  function i (t, e, i) {
    for (var n = t.length, o = 0; o < n; o += 2) t[o] += e, t[o + 1] += i
  }

  function n (n, o, r, s, a) {
    var h
    switch (r) {
      case t.FillOrigin.Top:
        a <= .5 ? (a /= .5, h = e(n / 2, o, s ? t.FillOrigin.TopLeft : t.FillOrigin.TopRight, s, a), s && i(h, n / 2, 0)) : (a = (a - .5) / .5, h = e(n / 2, o, s ? t.FillOrigin.TopRight : t.FillOrigin.TopLeft, s, a), s ? h.push(n, o, n, 0) : (i(h, n / 2, 0), h.push(0, o, 0, 0)))
        break
      case t.FillOrigin.Bottom:
        a <= .5 ? (a /= .5, h = e(n / 2, o, s ? t.FillOrigin.BottomRight : t.FillOrigin.BottomLeft, s, a), s || i(h, n / 2, 0)) : (a = (a - .5) / .5, h = e(n / 2, o, s ? t.FillOrigin.BottomLeft : t.FillOrigin.BottomRight, s, a), s ? (i(h, n / 2, 0), h.push(0, 0, 0, o)) : h.push(n, 0, n, o))
        break
      case t.FillOrigin.Left:
        a <= .5 ? (a /= .5, h = e(n, o / 2, s ? t.FillOrigin.BottomLeft : t.FillOrigin.TopLeft, s, a), s || i(h, 0, o / 2)) : (a = (a - .5) / .5, h = e(n, o / 2, s ? t.FillOrigin.TopLeft : t.FillOrigin.BottomLeft, s, a), s ? (i(h, 0, o / 2), h.push(n, 0, 0, 0)) : h.push(n, o, 0, o))
        break
      case t.FillOrigin.Right:
        a <= .5 ? (a /= .5, h = e(n, o / 2, s ? t.FillOrigin.TopRight : t.FillOrigin.BottomRight, s, a), s && i(h, 0, o / 2)) : (a = (a - .5) / .5, h = e(n, o / 2, s ? t.FillOrigin.BottomRight : t.FillOrigin.TopRight, s, a), s ? h.push(0, o, n, o) : (i(h, 0, o / 2), h.push(0, 0, n, 0)))
    }
    return h
  }

  t.fillImage = function (o, r, s, a, h, l) {
    if (l <= 0) return null
    if (l >= .9999) return [0, 0, o, 0, o, r, 0, r]
    var c
    switch (s) {
      case t.FillMethod.Horizontal:
        c = function (e, i, n, o) {
          var r = e * o
          return n == t.FillOrigin.Left || n == t.FillOrigin.Top ? [0, 0, r, 0, r, i, 0, i] : [e, 0, e, i, e - r, i, e - r, 0]
        }(o, r, a, l)
        break
      case t.FillMethod.Vertical:
        c = function (e, i, n, o) {
          var r = i * o
          return n == t.FillOrigin.Left || n == t.FillOrigin.Top ? [0, 0, 0, r, e, r, e, 0] : [0, i, e, i, e, i - r, 0, i - r]
        }(o, r, a, l)
        break
      case t.FillMethod.Radial90:
        c = e(o, r, a, h, l)
        break
      case t.FillMethod.Radial180:
        c = n(o, r, a, h, l)
        break
      case t.FillMethod.Radial360:
        c = function (e, o, r, s, a) {
          var h
          switch (r) {
            case t.FillOrigin.Top:
              a <= .5 ? (a /= .5, h = n(e / 2, o, s ? t.FillOrigin.Left : t.FillOrigin.Right, s, a), s && i(h, e / 2, 0)) : (a = (a - .5) / .5, h = n(e / 2, o, s ? t.FillOrigin.Right : t.FillOrigin.Left, s, a), s ? h.push(e, o, e, 0, e / 2, 0) : (i(h, e / 2, 0), h.push(0, o, 0, 0, e / 2, 0)))
              break
            case t.FillOrigin.Bottom:
              a <= .5 ? (a /= .5, h = n(e / 2, o, s ? t.FillOrigin.Right : t.FillOrigin.Left, s, a), s || i(h, e / 2, 0)) : (a = (a - .5) / .5, h = n(e / 2, o, s ? t.FillOrigin.Left : t.FillOrigin.Right, s, a), s ? (i(h, e / 2, 0), h.push(0, 0, 0, o, e / 2, o)) : h.push(e, 0, e, o, e / 2, o))
              break
            case t.FillOrigin.Left:
              a <= .5 ? (a /= .5, h = n(e, o / 2, s ? t.FillOrigin.Bottom : t.FillOrigin.Top, s, a), s || i(h, 0, o / 2)) : (a = (a - .5) / .5, h = n(e, o / 2, s ? t.FillOrigin.Top : t.FillOrigin.Bottom, s, a), s ? (i(h, 0, o / 2), h.push(e, 0, 0, 0, 0, o / 2)) : h.push(e, o, 0, o, 0, o / 2))
              break
            case t.FillOrigin.Right:
              a <= .5 ? (a /= .5, h = n(e, o / 2, s ? t.FillOrigin.Top : t.FillOrigin.Bottom, s, a), s && i(h, 0, o / 2)) : (a = (a - .5) / .5, h = n(e, o / 2, s ? t.FillOrigin.Bottom : t.FillOrigin.Top, s, a), s ? h.push(0, o, e, o, e, o / 2) : (i(h, 0, o / 2), h.push(0, 0, e, 0, e, o / 2)))
          }
          return h
        }(o, r, a, h, l)
    }
    return c
  }
}(fgui || (fgui = {})), function (t) {
  var e = function (e) {
    function i () {
      var t = e.call(this) || this
      return t._fillMethod = 0, t._fillOrigin = 0, t._fillAmount = 0, t._color = 16777215, t
    }

    return __extends(i, e), Object.defineProperty(i.prototype, 'color', {
      get: function () {
        return this._color
      }, set: function (e) {
        this._color != e && (this._color = e, null == this.tint ? t.ToolSet.setColorFilter(this, e) : this.tint = e)
      }, enumerable: !0, configurable: !0
    }), i.prototype.$setX = function (t) {
      return this.mask && (this.mask.x = t), e.prototype.$setX.call(this, t)
    }, i.prototype.$setY = function (t) {
      return this.mask && (this.mask.y = t), e.prototype.$setY.call(this, t)
    }, Object.defineProperty(i.prototype, 'fillMethod', {
      get: function () {
        return this._fillMethod
      }, set: function (t) {
        this._fillMethod != t && (this._fillMethod = t, 0 != this._fillMethod ? (this._mask || (this._mask = new egret.Shape, this._mask.touchEnabled = !1), this.mask = this._mask, this._mask.x = this.x, this._mask.y = this.y, this.addEventListener(egret.Event.RESIZE, this.markChanged, this), this.markChanged()) : this.mask && (this._mask.graphics.clear(), this.mask = null, this.removeEventListener(egret.Event.RESIZE, this.markChanged, this)))
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'fillOrigin', {
      get: function () {
        return this._fillOrigin
      }, set: function (t) {
        this._fillOrigin != t && (this._fillOrigin = t, 0 != this._fillMethod && this.markChanged())
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'fillClockwise', {
      get: function () {
        return this._fillClockwise
      }, set: function (t) {
        this._fillClockwise != t && (this._fillClockwise = t, 0 != this._fillMethod && this.markChanged())
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'fillAmount', {
      get: function () {
        return this._fillAmount
      }, set: function (t) {
        this._fillAmount != t && (this._fillAmount = t, 0 != this._fillMethod && this.markChanged())
      }, enumerable: !0, configurable: !0
    }), i.prototype.markChanged = function () {
      this._maskDirtyFlag || (this._maskDirtyFlag = !0, t.GTimers.inst.callLater(this.doFill, this))
    }, i.prototype.doFill = function () {
      this._maskDirtyFlag = !1, !this._mask.parent && this.parent && this.parent.addChild(this._mask)
      var e = this.width, i = this.height, n = this._mask.graphics
      if (n.clear(), 0 != e && 0 != i) {
        var o = t.fillImage(e, i, this._fillMethod, this._fillOrigin, this._fillClockwise, this._fillAmount)
        o && (n.beginFill(0, 1), t.ToolSet.fillPath(n, o, 0, 0), n.endFill())
      }
    }, i
  }(egret.Bitmap)
  t.Image = e
}(fgui || (fgui = {})), function (t) {
  var e = function (e) {
    function i () {
      var t = e.call(this) || this
      return t.interval = 0, t.repeatDelay = 0, t.timeScale = 1, t._playing = !0, t._frameCount = 0, t._frame = 0, t._start = 0, t._end = 0, t._times = 0, t._endAt = 0, t._status = 0, t._frameElapsed = 0, t._reversed = !1, t._repeatedCount = 0, t.touchEnabled = !1, t.setPlaySettings(), t
    }

    return __extends(i, e), Object.defineProperty(i.prototype, 'frames', {
      get: function () {
        return this._frames
      }, set: function (t) {
        this._frames = t, this.scale9Grid = null, this.fillMode = egret.BitmapFillMode.SCALE, this._frames ? this._frameCount = this._frames.length : this._frameCount = 0, (-1 == this._end || this._end > this._frameCount - 1) && (this._end = this._frameCount - 1), (-1 == this._endAt || this._endAt > this._frameCount - 1) && (this._endAt = this._frameCount - 1), (this._frame < 0 || this._frame > this._frameCount - 1) && (this._frame = this._frameCount - 1), this.drawFrame(), this._frameElapsed = 0, this._repeatedCount = 0, this._reversed = !1, this.checkTimer()
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'frameCount', {
      get: function () {
        return this._frameCount
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'frame', {
      get: function () {
        return this._frame
      }, set: function (t) {
        this._frame != t && (this._frames && t >= this._frameCount && (t = this._frameCount - 1), this._frame = t, this._frameElapsed = 0, this.drawFrame())
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'playing', {
      get: function () {
        return this._playing
      }, set: function (t) {
        this._playing != t && (this._playing = t, this.checkTimer())
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'smoothing', {
      get: function () {
        return this._smoothing
      }, set: function (t) {
        this._smoothing = t
      }, enumerable: !0, configurable: !0
    }), i.prototype.rewind = function () {
      this._frame = 0, this._frameElapsed = 0, this._reversed = !1, this._repeatedCount = 0, this.drawFrame()
    }, i.prototype.syncStatus = function (t) {
      this._frame = t._frame, this._frameElapsed = t._frameElapsed, this._reversed = t._reversed, this._repeatedCount = t._repeatedCount, this.drawFrame()
    }, i.prototype.advance = function (t) {
      for (var e = this._frame, i = this._reversed, n = t; ;) {
        var o = this.interval + this._frames[this._frame].addDelay
        if (0 == this._frame && this._repeatedCount > 0 && (o += this.repeatDelay), t < o) {
          this._frameElapsed = 0
          break
        }
        if (t -= o, this.swing ? this._reversed ? (this._frame--, this._frame <= 0 && (this._frame = 0, this._repeatedCount++, this._reversed = !this._reversed)) : (this._frame++, this._frame > this._frameCount - 1 && (this._frame = Math.max(0, this._frameCount - 2), this._repeatedCount++, this._reversed = !this._reversed)) : (this._frame++, this._frame > this._frameCount - 1 && (this._frame = 0, this._repeatedCount++)), this._frame == e && this._reversed == i) {
          var r = n - t
          t -= Math.floor(t / r) * r
        }
      }
      this.drawFrame()
    }, i.prototype.setPlaySettings = function (t, e, i, n, o, r) {
      null == t && (t = 0), null == e && (e = -1), null == i && (i = 0), null == n && (n = -1), this._start = t, this._end = e, (-1 == this._end || this._end > this._frameCount - 1) && (this._end = this._frameCount - 1), this._times = i, this._endAt = n, -1 == this._endAt && (this._endAt = this._end), this._status = 0, this._callback = o, this._callbackObj = r, this.frame = t
    }, i.prototype.update = function () {
      if (this._playing && 0 != this._frameCount && 3 != this._status) {
        var e = t.GTimers.deltaTime
        1 != this.timeScale && (e *= this.timeScale), this._frameElapsed += e
        var i = this.interval + this._frames[this._frame].addDelay
        if (0 == this._frame && this._repeatedCount > 0 && (i += this.repeatDelay), !(this._frameElapsed < i)) {
          if (this._frameElapsed -= i, this._frameElapsed > this.interval && (this._frameElapsed = this.interval), this.swing ? this._reversed ? (this._frame--, this._frame <= 0 && (this._frame = 0, this._repeatedCount++, this._reversed = !this._reversed)) : (this._frame++, this._frame > this._frameCount - 1 && (this._frame = Math.max(0, this._frameCount - 2), this._repeatedCount++, this._reversed = !this._reversed)) : (this._frame++, this._frame > this._frameCount - 1 && (this._frame = 0, this._repeatedCount++)), 1 == this._status) {
            this._frame = this._start, this._frameElapsed = 0, this._status = 0
          } else if (2 == this._status) {
            if (this._frame = this._endAt, this._frameElapsed = 0, this._status = 3, null != this._callback) {
              var n = this._callback, o = this._callbackObj
              this._callback = null, this._callbackObj = null, n.call(o)
            }
          } else {
            this._frame == this._end && (this._times > 0 ? (this._times--, 0 == this._times ? this._status = 2 : this._status = 1) : 0 != this._start && (this._status = 1))
          }
          this.drawFrame()
        }
      }
    }, i.prototype.drawFrame = function () {
      if (this._frameCount > 0 && this._frame < this._frames.length) {
        var t = this._frames[this._frame]
        this.texture = t.texture
      } else {
        this.texture = null
      }
    }, i.prototype.checkTimer = function () {
      this._playing && this._frameCount > 0 && null != this.stage ? t.GTimers.inst.add(1, 0, this.update, this) : t.GTimers.inst.remove(this.update, this)
    }, i.prototype.$onAddToStage = function (i, n) {
      e.prototype.$onAddToStage.call(this, i, n), this._playing && this._frameCount > 0 && t.GTimers.inst.add(1, 0, this.update, this)
    }, i.prototype.$onRemoveFromStage = function () {
      e.prototype.$onRemoveFromStage.call(this), t.GTimers.inst.remove(this.update, this)
    }, i
  }(t.Image)
  t.MovieClip = e
}(fgui || (fgui = {})), function (t) {
  var e = function (t) {
    function e () {
      var e = t.call(this) || this
      return e.touchEnabled = !0, e.touchChildren = !0, e
    }

    return __extends(e, t), e.prototype.cacheHitArea = function (t) {
      this._cachedHitArea = t, t && (this._cachedMatrix || (this._cachedMatrix = new egret.Matrix), this._cachedMatrix.copyFrom(this.$getInvertedConcatenatedMatrix()))
    }, Object.defineProperty(e.prototype, 'hitArea', {
      get: function () {
        return this._hitArea
      }, set: function (t) {
        this._hitArea = t
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(e.prototype, 'opaque', {
      get: function () {
        return this._opaque
      }, set: function (t) {
        this._opaque = t
      }, enumerable: !0, configurable: !0
    }), e.prototype.$hitTest = function (e, i) {
      if (!this.$visible) return null
      if (this._hitArea) {
        if (!this.touchEnabled) return null
        if (this._hitArea.$graphics) {
          if (!this._hitArea.$graphics.$hitTest(e, i)) return null
        } else {
          var n = (s = this._cachedHitArea ? this._cachedMatrix : this.$getInvertedConcatenatedMatrix()).a * e + s.c * i + s.tx,
            o = s.b * e + s.d * i + s.ty
          if (!this._hitArea.contains(n, o)) return null
        }
        return this
      }
      var r = t.prototype.$hitTest.call(this, e, i)
      if (r == this && !this.touchEnabled) return null
      if (null == r && this._opaque) {
        var s
        n = (s = this._cachedHitArea ? this._cachedMatrix : this.$getInvertedConcatenatedMatrix()).a * e + s.c * i + s.tx, o = s.b * e + s.d * i + s.ty
        return n >= 0 && o >= 0 && n <= this.$explicitWidth && o <= this.$explicitHeight ? this : null
      }
      return r != this || this._opaque ? r : null
    }, e
  }(egret.DisplayObjectContainer)
  t.UIContainer = e
}(fgui || (fgui = {})), function (t) {
  var e = function (t) {
    function e (e, i, n, o) {
      void 0 === i && (i = 0), void 0 === n && (n = 0), void 0 === o && (o = -1)
      var r = t.call(this, e, !1) || this
      return r.touchPointID = 0, r.stageX = i, r.stageY = n, r.touchPointID = o, r
    }

    return __extends(e, t), e.prototype.preventDefault = function () {
      this._prevented = !0
    }, e.prototype.isDefaultPrevented = function () {
      return this._prevented
    }, e.DRAG_START = '__dragStart', e.DRAG_END = '__dragEnd', e.DRAG_MOVING = '__dragMoving', e
  }(egret.Event)
  t.DragEvent = e
}(fgui || (fgui = {})), function (t) {
  var e = function (t) {
    function e (e, i) {
      var n = t.call(this, e, !1) || this
      return n.source = i, n
    }

    return __extends(e, t), e.DROP = '__drop', e
  }(egret.Event)
  t.DropEvent = e
}(fgui || (fgui = {})), function (t) {
  var e = function (t) {
    function e (e, i, n, o) {
      void 0 === i && (i = null), void 0 === n && (n = 0), void 0 === o && (o = 0)
      var r = t.call(this, e, !1) || this
      return r.itemObject = i, r.stageX = n, r.stageY = o, r
    }

    return __extends(e, t), e.CLICK = '___itemClick', e
  }(egret.Event)
  t.ItemEvent = e
}(fgui || (fgui = {})), function (t) {
  var e = function (t) {
    function e (e) {
      return t.call(this, e, !1) || this
    }

    return __extends(e, t), e.CHANGED = '___stateChanged', e
  }(egret.Event)
  t.StateChangeEvent = e
}(fgui || (fgui = {})), function (t) {
  var e, i = function () {
    function i (t) {
      this._owner = t
    }

    return i.create = function (i, n) {
      return e || (e = [t.GearDisplay, t.GearXY, t.GearSize, t.GearLook, t.GearColor, t.GearAnimation, t.GearText, t.GearIcon, t.GearDisplay2, t.GearFontSize]), new e[n](i)
    }, i.prototype.dispose = function () {
      this._tweenConfig && this._tweenConfig._tweener && (this._tweenConfig._tweener.kill(), this._tweenConfig._tweener = null)
    }, Object.defineProperty(i.prototype, 'controller', {
      get: function () {
        return this._controller
      }, set: function (t) {
        t != this._controller && (this._controller = t, this._controller && this.init())
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'tweenConfig', {
      get: function () {
        return this._tweenConfig || (this._tweenConfig = new n), this._tweenConfig
      }, enumerable: !0, configurable: !0
    }), i.prototype.setup = function (e) {
      var i, o
      this._controller = this._owner.parent.getControllerAt(e.readShort()), this.init()
      var r = e.readShort()
      if (this instanceof t.GearDisplay) {
        this.pages = e.readSArray(r)
      } else if (this instanceof t.GearDisplay2) {
        this.pages = e.readSArray(r)
      } else {
        for (i = 0; i < r; i++) null != (o = e.readS()) && this.addStatus(o, e)
        e.readBool() && this.addStatus(null, e)
      }
      if (e.readBool() && (this._tweenConfig = new n, this._tweenConfig.easeType = e.readByte(), this._tweenConfig.duration = e.readFloat(), this._tweenConfig.delay = e.readFloat()), e.version >= 2) {
        if (this instanceof t.GearXY) {
          if (e.readBool()) {
            for (this.positionsInPercent = !0, i = 0; i < r; i++) null != (o = e.readS()) && this.addExtStatus(o, e)
            e.readBool() && this.addExtStatus(null, e)
          }
        } else {
          this instanceof t.GearDisplay2 && (this.condition = e.readByte())
        }
      }
    }, i.prototype.updateFromRelations = function (t, e) {
    }, i.prototype.addStatus = function (t, e) {
    }, i.prototype.init = function () {
    }, i.prototype.apply = function () {
    }, i.prototype.updateState = function () {
    }, i
  }()
  t.GearBase = i
  var n = function () {
    return function () {
      this.tween = !0, this.easeType = t.EaseType.QuadOut, this.duration = .3, this.delay = 0
    }
  }()
  t.GearTweenConfig = n
}(fgui || (fgui = {})), function (t) {
  var e = function (e) {
    function i (t) {
      return e.call(this, t) || this
    }

    return __extends(i, e), i.prototype.init = function () {
      this._default = {
        playing: this._owner.getProp(t.ObjectPropID.Playing),
        frame: this._owner.getProp(t.ObjectPropID.Frame)
      }, this._storage = {}
    }, i.prototype.addStatus = function (t, e) {
      var i
      null == t ? i = this._default : this._storage[t] = i = {}, i.playing = e.readBool(), i.frame = e.readInt()
    }, i.prototype.apply = function () {
      this._owner._gearLocked = !0
      var e = this._storage[this._controller.selectedPageId]
      e || (e = this._default), this._owner.setProp(t.ObjectPropID.Playing, e.playing), this._owner.setProp(t.ObjectPropID.Frame, e.frame), this._owner._gearLocked = !1
    }, i.prototype.updateState = function () {
      var e = this._storage[this._controller.selectedPageId]
      e || (this._storage[this._controller.selectedPageId] = e = {}), e.playing = this._owner.getProp(t.ObjectPropID.Playing), e.frame = this._owner.getProp(t.ObjectPropID.Frame)
    }, i
  }(t.GearBase)
  t.GearAnimation = e
}(fgui || (fgui = {})), function (t) {
  var e = function (e) {
    function i (t) {
      return e.call(this, t) || this
    }

    return __extends(i, e), i.prototype.init = function () {
      this._default = {
        color: this._owner.getProp(t.ObjectPropID.Color),
        strokeColor: this._owner.getProp(t.ObjectPropID.OutlineColor)
      }, this._storage = {}
    }, i.prototype.addStatus = function (t, e) {
      var i
      null == t ? i = this._default : this._storage[t] = i = {}, i.color = e.readColor(), i.strokeColor = e.readColor()
    }, i.prototype.apply = function () {
      this._owner._gearLocked = !0
      var e = this._storage[this._controller.selectedPageId]
      e || (e = this._default), this._owner.setProp(t.ObjectPropID.Color, e.color), this._owner.setProp(t.ObjectPropID.OutlineColor, e.strokeColor), this._owner._gearLocked = !1
    }, i.prototype.updateState = function () {
      var e = this._storage[this._controller.selectedPageId]
      e || (this._storage[this._controller.selectedPageId] = e = {}), e.color = this._owner.getProp(t.ObjectPropID.Color), e.strokeColor = this._owner.getProp(t.ObjectPropID.OutlineColor)
    }, i
  }(t.GearBase)
  t.GearColor = e
}(fgui || (fgui = {})), function (t) {
  var e = function (t) {
    function e (e) {
      var i = t.call(this, e) || this
      return i._displayLockToken = 1, i._visible = 0, i
    }

    return __extends(e, t), e.prototype.init = function () {
      this.pages = null
    }, e.prototype.apply = function () {
      this._displayLockToken++, 0 == this._displayLockToken && (this._displayLockToken = 1), null == this.pages || 0 == this.pages.length || -1 != this.pages.indexOf(this._controller.selectedPageId) ? this._visible = 1 : this._visible = 0
    }, e.prototype.addLock = function () {
      return this._visible++, this._displayLockToken
    }, e.prototype.releaseLock = function (t) {
      t == this._displayLockToken && this._visible--
    }, Object.defineProperty(e.prototype, 'connected', {
      get: function () {
        return null == this._controller || this._visible > 0
      }, enumerable: !0, configurable: !0
    }), e
  }(t.GearBase)
  t.GearDisplay = e
}(fgui || (fgui = {})), function (t) {
  var e = function (t) {
    function e (e) {
      var i = t.call(this, e) || this
      return i._visible = 0, i
    }

    return __extends(e, t), e.prototype.init = function () {
      this.pages = null
    }, e.prototype.apply = function () {
      null == this.pages || 0 == this.pages.length || -1 != this.pages.indexOf(this._controller.selectedPageId) ? this._visible = 1 : this._visible = 0
    }, e.prototype.evaluate = function (t) {
      var e = null == this._controller || this._visible > 0
      return e = 0 == this.condition ? e && t : e || t
    }, e
  }(t.GearBase)
  t.GearDisplay2 = e
}(fgui || (fgui = {})), function (t) {
  var e = function (e) {
    function i (t) {
      var i = e.call(this, t) || this
      return i._default = 0, i
    }

    return __extends(i, e), i.prototype.init = function () {
      this._default = this._owner.getProp(t.ObjectPropID.FontSize), this._storage = {}
    }, i.prototype.addStatus = function (t, e) {
      null == t ? this._default = e.readInt() : this._storage[t] = e.readInt()
    }, i.prototype.apply = function () {
      this._owner._gearLocked = !0
      var e = this._storage[this._controller.selectedPageId]
      null != e ? this._owner.setProp(t.ObjectPropID.FontSize, e) : this._owner.setProp(t.ObjectPropID.FontSize, this._default), this._owner._gearLocked = !1
    }, i.prototype.updateState = function () {
      this._storage[this._controller.selectedPageId] = this._owner.getProp(t.ObjectPropID.FontSize)
    }, i
  }(t.GearBase)
  t.GearFontSize = e
}(fgui || (fgui = {})), function (t) {
  var e = function (t) {
    function e (e) {
      return t.call(this, e) || this
    }

    return __extends(e, t), e.prototype.init = function () {
      this._default = this._owner.icon, this._storage = {}
    }, e.prototype.addStatus = function (t, e) {
      null == t ? this._default = e.readS() : this._storage[t] = e.readS()
    }, e.prototype.apply = function () {
      this._owner._gearLocked = !0
      var t = this._storage[this._controller.selectedPageId]
      this._owner.icon = void 0 !== t ? t : this._default, this._owner._gearLocked = !1
    }, e.prototype.updateState = function () {
      this._storage[this._controller.selectedPageId] = this._owner.icon
    }, e
  }(t.GearBase)
  t.GearIcon = e
}(fgui || (fgui = {})), function (t) {
  var e = function (e) {
    function i (t) {
      return e.call(this, t) || this
    }

    return __extends(i, e), i.prototype.init = function () {
      this._default = {
        alpha: this._owner.alpha,
        rotation: this._owner.rotation,
        grayed: this._owner.grayed,
        touchable: this._owner.touchable
      }, this._storage = {}
    }, i.prototype.addStatus = function (t, e) {
      var i
      null == t ? i = this._default : this._storage[t] = i = {}, i.alpha = e.readFloat(), i.rotation = e.readFloat(), i.grayed = e.readBool(), i.touchable = e.readBool()
    }, i.prototype.apply = function () {
      var e = this._storage[this._controller.selectedPageId]
      if (e || (e = this._default), this._tweenConfig && this._tweenConfig.tween && !t.UIPackage._constructing && !t.GearBase.disableAllTweenEffect) {
        if (this._owner._gearLocked = !0, this._owner.grayed = e.grayed, this._owner.touchable = e.touchable, this._owner._gearLocked = !1, this._tweenConfig._tweener) {
          if (this._tweenConfig._tweener.endValue.x == e.alpha && this._tweenConfig._tweener.endValue.y == e.rotation) return
          this._tweenConfig._tweener.kill(!0), this._tweenConfig._tweener = null
        }
        var i = e.alpha != this._owner.alpha, n = e.rotation != this._owner.rotation;
        (i || n) && (this._owner.checkGearController(0, this._controller) && (this._tweenConfig._displayLockToken = this._owner.addDisplayLock()), this._tweenConfig._tweener = t.GTween.to2(this._owner.alpha, this._owner.rotation, e.alpha, e.rotation, this._tweenConfig.duration).setDelay(this._tweenConfig.delay).setEase(this._tweenConfig.easeType).setUserData((i ? 1 : 0) + (n ? 2 : 0)).setTarget(this).onUpdate(this.__tweenUpdate, this).onComplete(this.__tweenComplete, this))
      } else {
        this._owner._gearLocked = !0, this._owner.grayed = e.grayed, this._owner.touchable = e.touchable, this._owner.alpha = e.alpha, this._owner.rotation = e.rotation, this._owner._gearLocked = !1
      }
    }, i.prototype.__tweenUpdate = function (t) {
      var e = t.userData
      this._owner._gearLocked = !0, 0 != (1 & e) && (this._owner.alpha = t.value.x), 0 != (2 & e) && (this._owner.rotation = t.value.y), this._owner._gearLocked = !1
    }, i.prototype.__tweenComplete = function () {
      0 != this._tweenConfig._displayLockToken && (this._owner.releaseDisplayLock(this._tweenConfig._displayLockToken), this._tweenConfig._displayLockToken = 0), this._tweenConfig._tweener = null
    }, i.prototype.updateState = function () {
      var t = this._storage[this._controller.selectedPageId]
      t || (this._storage[this._controller.selectedPageId] = t = {}), t.alpha = this._owner.alpha, t.rotation = this._owner.rotation, t.grayed = this._owner.grayed, t.touchable = this._owner.touchable
    }, i
  }(t.GearBase)
  t.GearLook = e
}(fgui || (fgui = {})), function (t) {
  var e = function (e) {
    function i (t) {
      return e.call(this, t) || this
    }

    return __extends(i, e), i.prototype.init = function () {
      this._default = {
        width: this._owner.width,
        height: this._owner.height,
        scaleX: this._owner.scaleX,
        scaleY: this._owner.scaleY
      }, this._storage = {}
    }, i.prototype.addStatus = function (t, e) {
      var i
      null == t ? i = this._default : this._storage[t] = i = {}, i.width = e.readInt(), i.height = e.readInt(), i.scaleX = e.readFloat(), i.scaleY = e.readFloat()
    }, i.prototype.apply = function () {
      var e = this._storage[this._controller.selectedPageId]
      if (e || (e = this._default), this._tweenConfig && this._tweenConfig.tween && !t.UIPackage._constructing && !t.GearBase.disableAllTweenEffect) {
        if (this._tweenConfig._tweener) {
          if (this._tweenConfig._tweener.endValue.x == e.width && this._tweenConfig._tweener.endValue.y == e.height && this._tweenConfig._tweener.endValue.z == e.scaleX && this._tweenConfig._tweener.endValue.w == e.scaleY) return
          this._tweenConfig._tweener.kill(!0), this._tweenConfig._tweener = null
        }
        var i = e.width != this._owner.width || e.height != this._owner.height,
          n = e.scaleX != this._owner.scaleX || e.scaleY != this._owner.scaleY;
        (i || n) && (this._owner.checkGearController(0, this._controller) && (this._tweenConfig._displayLockToken = this._owner.addDisplayLock()), this._tweenConfig._tweener = t.GTween.to4(this._owner.width, this._owner.height, this._owner.scaleX, this._owner.scaleY, e.width, e.height, e.scaleX, e.scaleY, this._tweenConfig.duration).setDelay(this._tweenConfig.delay).setEase(this._tweenConfig.easeType).setUserData((i ? 1 : 0) + (n ? 2 : 0)).setTarget(this).onUpdate(this.__tweenUpdate, this).onComplete(this.__tweenComplete, this))
      } else {
        this._owner._gearLocked = !0, this._owner.setSize(e.width, e.height, this._owner.gearXY.controller == this._controller), this._owner.setScale(e.scaleX, e.scaleY), this._owner._gearLocked = !1
      }
    }, i.prototype.__tweenUpdate = function (t) {
      var e = t.userData
      this._owner._gearLocked = !0, 0 != (1 & e) && this._owner.setSize(t.value.x, t.value.y, this._owner.checkGearController(1, this._controller)), 0 != (2 & e) && this._owner.setScale(t.value.z, t.value.w), this._owner._gearLocked = !1
    }, i.prototype.__tweenComplete = function () {
      0 != this._tweenConfig._displayLockToken && (this._owner.releaseDisplayLock(this._tweenConfig._displayLockToken), this._tweenConfig._displayLockToken = 0), this._tweenConfig._tweener = null
    }, i.prototype.updateState = function () {
      var t = this._storage[this._controller.selectedPageId]
      t || (this._storage[this._controller.selectedPageId] = t = {}), t.width = this._owner.width, t.height = this._owner.height, t.scaleX = this._owner.scaleX, t.scaleY = this._owner.scaleY
    }, i.prototype.updateFromRelations = function (t, e) {
      if (null != this._controller && null != this._storage) {
        for (var i in this._storage) {
          var n = this._storage[i]
          n.width += t, n.height += e
        }
        this._default.width += t, this._default.height += e, this.updateState()
      }
    }, i
  }(t.GearBase)
  t.GearSize = e
}(fgui || (fgui = {})), function (t) {
  var e = function (t) {
    function e (e) {
      return t.call(this, e) || this
    }

    return __extends(e, t), e.prototype.init = function () {
      this._default = this._owner.text, this._storage = {}
    }, e.prototype.addStatus = function (t, e) {
      null == t ? this._default = e.readS() : this._storage[t] = e.readS()
    }, e.prototype.apply = function () {
      this._owner._gearLocked = !0
      var t = this._storage[this._controller.selectedPageId]
      this._owner.text = void 0 !== t ? t : this._default, this._owner._gearLocked = !1
    }, e.prototype.updateState = function () {
      this._storage[this._controller.selectedPageId] = this._owner.text
    }, e
  }(t.GearBase)
  t.GearText = e
}(fgui || (fgui = {})), function (t) {
  var e = function (e) {
    function i (t) {
      return e.call(this, t) || this
    }

    return __extends(i, e), i.prototype.init = function () {
      this._default = {
        x: this._owner.x,
        y: this._owner.y,
        px: this._owner.x / this._owner.parent.width,
        py: this._owner.y / this._owner.parent.height
      }, this._storage = {}
    }, i.prototype.addStatus = function (t, e) {
      var i
      null == t ? i = this._default : this._storage[t] = i = {}, i.x = e.readInt(), i.y = e.readInt()
    }, i.prototype.addExtStatus = function (t, e) {
      var i;
      (i = null == t ? this._default : this._storage[t]).px = e.readFloat(), i.py = e.readFloat()
    }, i.prototype.apply = function () {
      var e, i, n = this._storage[this._controller.selectedPageId]
      if (n || (n = this._default), this.positionsInPercent && this._owner.parent ? (e = n.px * this._owner.parent.width, i = n.py * this._owner.parent.height) : (e = n.x, i = n.y), this._tweenConfig && this._tweenConfig.tween && !t.UIPackage._constructing && !t.GearBase.disableAllTweenEffect) {
        if (this._tweenConfig._tweener) {
          if (this._tweenConfig._tweener.endValue.x == e && this._tweenConfig._tweener.endValue.y == i) return
          this._tweenConfig._tweener.kill(!0), this._tweenConfig._tweener = null
        }
        var o = this._owner.x, r = this._owner.y
        o == e && r == i || (this._owner.checkGearController(0, this._controller) && (this._tweenConfig._displayLockToken = this._owner.addDisplayLock()), this._tweenConfig._tweener = t.GTween.to2(o, r, e, i, this._tweenConfig.duration).setDelay(this._tweenConfig.delay).setEase(this._tweenConfig.easeType).setTarget(this).onUpdate(this.__tweenUpdate, this).onComplete(this.__tweenComplete, this))
      } else {
        this._owner._gearLocked = !0, this._owner.setXY(e, i), this._owner._gearLocked = !1
      }
    }, i.prototype.__tweenUpdate = function (t) {
      this._owner._gearLocked = !0, this._owner.setXY(t.value.x, t.value.y), this._owner._gearLocked = !1
    }, i.prototype.__tweenComplete = function () {
      0 != this._tweenConfig._displayLockToken && (this._owner.releaseDisplayLock(this._tweenConfig._displayLockToken), this._tweenConfig._displayLockToken = 0), this._tweenConfig._tweener = null
    }, i.prototype.updateState = function () {
      var t = this._storage[this._controller.selectedPageId]
      t || (this._storage[this._controller.selectedPageId] = t = {}), t.x = this._owner.x, t.y = this._owner.y, t.px = this._owner.x / this._owner.parent.width, t.py = this._owner.y / this._owner.parent.height
    }, i.prototype.updateFromRelations = function (t, e) {
      if (null != this._controller && null != this._storage && !this.positionsInPercent) {
        for (var i in this._storage) {
          var n = this._storage[i]
          n.x += t, n.y += e
        }
        this._default.x += t, this._default.y += e, this.updateState()
      }
    }, i
  }(t.GearBase)
  t.GearXY = e
}(fgui || (fgui = {})), function (t) {
  var e = .5 * Math.PI, i = 2 * Math.PI

  function n (t, e) {
    return 1 - o(e - t, e)
  }

  function o (t, e) {
    return (t /= e) < 1 / 2.75 ? 7.5625 * t * t : t < 2 / 2.75 ? 7.5625 * (t -= 1.5 / 2.75) * t + .75 : t < 2.5 / 2.75 ? 7.5625 * (t -= 2.25 / 2.75) * t + .9375 : 7.5625 * (t -= 2.625 / 2.75) * t + .984375
  }

  t.evaluateEase = function (r, s, a, h, l) {
    switch (r) {
      case t.EaseType.Linear:
        return s / a
      case t.EaseType.SineIn:
        return 1 - Math.cos(s / a * e)
      case t.EaseType.SineOut:
        return Math.sin(s / a * e)
      case t.EaseType.SineInOut:
        return -.5 * (Math.cos(Math.PI * s / a) - 1)
      case t.EaseType.QuadIn:
        return (s /= a) * s
      case t.EaseType.QuadOut:
        return -(s /= a) * (s - 2)
      case t.EaseType.QuadInOut:
        return (s /= .5 * a) < 1 ? .5 * s * s : -.5 * (--s * (s - 2) - 1)
      case t.EaseType.CubicIn:
        return (s /= a) * s * s
      case t.EaseType.CubicOut:
        return (s = s / a - 1) * s * s + 1
      case t.EaseType.CubicInOut:
        return (s /= .5 * a) < 1 ? .5 * s * s * s : .5 * ((s -= 2) * s * s + 2)
      case t.EaseType.QuartIn:
        return (s /= a) * s * s * s
      case t.EaseType.QuartOut:
        return -((s = s / a - 1) * s * s * s - 1)
      case t.EaseType.QuartInOut:
        return (s /= .5 * a) < 1 ? .5 * s * s * s * s : -.5 * ((s -= 2) * s * s * s - 2)
      case t.EaseType.QuintIn:
        return (s /= a) * s * s * s * s
      case t.EaseType.QuintOut:
        return (s = s / a - 1) * s * s * s * s + 1
      case t.EaseType.QuintInOut:
        return (s /= .5 * a) < 1 ? .5 * s * s * s * s * s : .5 * ((s -= 2) * s * s * s * s + 2)
      case t.EaseType.ExpoIn:
        return 0 == s ? 0 : Math.pow(2, 10 * (s / a - 1))
      case t.EaseType.ExpoOut:
        return s == a ? 1 : 1 - Math.pow(2, -10 * s / a)
      case t.EaseType.ExpoInOut:
        return 0 == s ? 0 : s == a ? 1 : (s /= .5 * a) < 1 ? .5 * Math.pow(2, 10 * (s - 1)) : .5 * (2 - Math.pow(2, -10 * --s))
      case t.EaseType.CircIn:
        return -(Math.sqrt(1 - (s /= a) * s) - 1)
      case t.EaseType.CircOut:
        return Math.sqrt(1 - (s = s / a - 1) * s)
      case t.EaseType.CircInOut:
        return (s /= .5 * a) < 1 ? -.5 * (Math.sqrt(1 - s * s) - 1) : .5 * (Math.sqrt(1 - (s -= 2) * s) + 1)
      case t.EaseType.ElasticIn:
        var c
        return 0 == s ? 0 : 1 == (s /= a) ? 1 : (0 == l && (l = .3 * a), h < 1 ? (h = 1, c = l / 4) : c = l / i * Math.asin(1 / h), -h * Math.pow(2, 10 * (s -= 1)) * Math.sin((s * a - c) * i / l))
      case t.EaseType.ElasticOut:
        var u
        return 0 == s ? 0 : 1 == (s /= a) ? 1 : (0 == l && (l = .3 * a), h < 1 ? (h = 1, u = l / 4) : u = l / i * Math.asin(1 / h), h * Math.pow(2, -10 * s) * Math.sin((s * a - u) * i / l) + 1)
      case t.EaseType.ElasticInOut:
        var _
        return 0 == s ? 0 : 2 == (s /= .5 * a) ? 1 : (0 == l && (l = a * (.3 * 1.5)), h < 1 ? (h = 1, _ = l / 4) : _ = l / i * Math.asin(1 / h), s < 1 ? h * Math.pow(2, 10 * (s -= 1)) * Math.sin((s * a - _) * i / l) * -.5 : h * Math.pow(2, -10 * (s -= 1)) * Math.sin((s * a - _) * i / l) * .5 + 1)
      case t.EaseType.BackIn:
        return (s /= a) * s * ((h + 1) * s - h)
      case t.EaseType.BackOut:
        return (s = s / a - 1) * s * ((h + 1) * s + h) + 1
      case t.EaseType.BackInOut:
        return (s /= .5 * a) < 1 ? s * s * ((1 + (h *= 1.525)) * s - h) * .5 : .5 * ((s -= 2) * s * ((1 + (h *= 1.525)) * s + h) + 2)
      case t.EaseType.BounceIn:
        return n(s, a)
      case t.EaseType.BounceOut:
        return o(s, a)
      case t.EaseType.BounceInOut:
        return function (t, e) {
          return t < .5 * e ? .5 * n(2 * t, e) : .5 * o(2 * t - e, e) + .5
        }(s, a)
      default:
        return -(s /= a) * (s - 2)
    }
  }
}(fgui || (fgui = {})), function (t) {
  var e = function () {
    function t () {
    }

    return t.Linear = 0, t.SineIn = 1, t.SineOut = 2, t.SineInOut = 3, t.QuadIn = 4, t.QuadOut = 5, t.QuadInOut = 6, t.CubicIn = 7, t.CubicOut = 8, t.CubicInOut = 9, t.QuartIn = 10, t.QuartOut = 11, t.QuartInOut = 12, t.QuintIn = 13, t.QuintOut = 14, t.QuintInOut = 15, t.ExpoIn = 16, t.ExpoOut = 17, t.ExpoInOut = 18, t.CircIn = 19, t.CircOut = 20, t.CircInOut = 21, t.ElasticIn = 22, t.ElasticOut = 23, t.ElasticInOut = 24, t.BackIn = 25, t.BackOut = 26, t.BackInOut = 27, t.BounceIn = 28, t.BounceOut = 29, t.BounceInOut = 30, t.Custom = 31, t
  }()
  t.EaseType = e
}(fgui || (fgui = {})), function (t) {
  var e = function () {
    function e () {
      this._segments = new Array, this._points = new Array
    }

    return Object.defineProperty(e.prototype, 'length', {
      get: function () {
        return this._fullLength
      }, enumerable: !0, configurable: !0
    }), e.prototype.create = function (e, n, o, r) {
      var s
      Array.isArray(e) ? s = e : ((s = new Array).push(e), s.push(n), o && s.push(o), r && s.push(r)), this._segments.length = 0, this._points.length = 0, this._fullLength = 0
      var a = s.length
      if (0 != a) {
        var h = i
        h.length = 0
        var l = s[0]
        l.curveType == t.CurveType.CRSpline && h.push(new egret.Point(l.x, l.y))
        for (var c = 1; c < a; c++) {
          var u = s[c]
          if (l.curveType != t.CurveType.CRSpline) {
            var _ = {}
            _.type = l.curveType, _.ptStart = this._points.length, l.curveType == t.CurveType.Straight ? (_.ptCount = 2, this._points.push(new egret.Point(l.x, l.y)), this._points.push(new egret.Point(u.x, u.y))) : l.curveType == t.CurveType.Bezier ? (_.ptCount = 3, this._points.push(new egret.Point(l.x, l.y)), this._points.push(new egret.Point(u.x, u.y)), this._points.push(new egret.Point(l.control1_x, l.control1_y))) : l.curveType == t.CurveType.CubicBezier && (_.ptCount = 4, this._points.push(new egret.Point(l.x, l.y)), this._points.push(new egret.Point(u.x, u.y)), this._points.push(new egret.Point(l.control1_x, l.control1_y)), this._points.push(new egret.Point(l.control2_x, l.control2_y))), _.length = t.ToolSet.distance(l.x, l.y, u.x, u.y), this._fullLength += _.length, this._segments.push(_)
          }
          u.curveType != t.CurveType.CRSpline ? h.length > 0 && (h.push(new egret.Point(u.x, u.y)), this.createSplineSegment()) : h.push(new egret.Point(u.x, u.y)), l = u
        }
        h.length > 1 && this.createSplineSegment()
      }
    }, e.prototype.createSplineSegment = function () {
      var e = i, n = e.length
      e.splice(0, 0, e[0]), e.push(e[n]), e.push(e[n]), n += 3
      var o = {}
      o.type = t.CurveType.CRSpline, o.ptStart = this._points.length, o.ptCount = n, this._points = this._points.concat(e), o.length = 0
      for (var r = 1; r < n; r++) o.length += t.ToolSet.distance(e[r - 1].x, e[r - 1].y, e[r].x, e[r].y)
      this._fullLength += o.length, this._segments.push(o), e.length = 0
    }, e.prototype.clear = function () {
      this._segments.length = 0, this._points.length = 0
    }, e.prototype.getPointAt = function (e, i) {
      i ? i.x = i.y = 0 : i = new egret.Point, e = t.ToolSet.clamp01(e)
      var n, o = this._segments.length
      if (0 == o) return i
      if (1 == e) return (n = this._segments[o - 1]).type == t.CurveType.Straight ? (i.x = t.ToolSet.lerp(this._points[n.ptStart].x, this._points[n.ptStart + 1].x, e), i.y = t.ToolSet.lerp(this._points[n.ptStart].y, this._points[n.ptStart + 1].y, e), i) : n.type == t.CurveType.Bezier || n.type == t.CurveType.CubicBezier ? this.onBezierCurve(n.ptStart, n.ptCount, e, i) : this.onCRSplineCurve(n.ptStart, n.ptCount, e, i)
      for (var r = e * this._fullLength, s = 0; s < o; s++) {
        if ((r -= (n = this._segments[s]).length) < 0) {
          e = 1 + r / n.length, n.type == t.CurveType.Straight ? (i.x = t.ToolSet.lerp(this._points[n.ptStart].x, this._points[n.ptStart + 1].x, e), i.y = t.ToolSet.lerp(this._points[n.ptStart].y, this._points[n.ptStart + 1].y, e)) : i = n.type == t.CurveType.Bezier || n.type == t.CurveType.CubicBezier ? this.onBezierCurve(n.ptStart, n.ptCount, e, i) : this.onCRSplineCurve(n.ptStart, n.ptCount, e, i)
          break
        }
      }
      return i
    }, Object.defineProperty(e.prototype, 'segmentCount', {
      get: function () {
        return this._segments.length
      }, enumerable: !0, configurable: !0
    }), e.prototype.getAnchorsInSegment = function (t, e) {
      null == e && (e = new Array)
      for (var i = this._segments[t], n = 0; n < i.ptCount; n++) e.push(new egret.Point(this._points[i.ptStart + n].x, this._points[i.ptStart + n].y))
      return e
    }, e.prototype.getPointsInSegment = function (e, i, n, o, r, s) {
      null == o && (o = new Array), s && !isNaN(s) || (s = .1), r && r.push(i)
      var a = this._segments[e]
      if (a.type == t.CurveType.Straight) {
        o.push(new egret.Point(t.ToolSet.lerp(this._points[a.ptStart].x, this._points[a.ptStart + 1].x, i), t.ToolSet.lerp(this._points[a.ptStart].y, this._points[a.ptStart + 1].y, i))), o.push(new egret.Point(t.ToolSet.lerp(this._points[a.ptStart].x, this._points[a.ptStart + 1].x, n), t.ToolSet.lerp(this._points[a.ptStart].y, this._points[a.ptStart + 1].y, n)))
      } else {
        var h
        h = a.type == t.CurveType.Bezier || a.type == t.CurveType.CubicBezier ? this.onBezierCurve : this.onCRSplineCurve, o.push(h.call(this, a.ptStart, a.ptCount, i, new egret.Point))
        for (var l = Math.min(a.length * s, 50), c = 0; c <= l; c++) {
          var u = c / l
          u > i && u < n && (o.push(h.call(this, a.ptStart, a.ptCount, u, new egret.Point)), null != r && r.push(u))
        }
        o.push(h.call(this, a.ptStart, a.ptCount, n, new egret.Point))
      }
      return null != r && r.push(n), o
    }, e.prototype.getAllPoints = function (t, e, i) {
      null == t && (t = new Array), i && !isNaN(i) || (i = .1)
      for (var n = this._segments.length, o = 0; o < n; o++) this.getPointsInSegment(o, 0, 1, t, e, i)
      return t
    }, e.prototype.onCRSplineCurve = function (e, i, n, o) {
      var r = Math.floor(n * (i - 4)) + e, s = this._points[r].x, a = this._points[r].y, h = this._points[r + 1].x,
        l = this._points[r + 1].y, c = this._points[r + 2].x, u = this._points[r + 2].y, _ = this._points[r + 3].x,
        p = this._points[r + 3].y, d = 1 == n ? 1 : t.ToolSet.repeat(n * (i - 4), 1), g = ((2 - d) * d - 1) * d * .5,
        f = .5 * ((3 * d - 5) * d * d + 2), y = ((-3 * d + 4) * d + 1) * d * .5, m = (d - 1) * d * d * .5
      return o.x = s * g + h * f + c * y + _ * m, o.y = a * g + l * f + u * y + p * m, o
    }, e.prototype.onBezierCurve = function (t, e, i, n) {
      var o = 1 - i, r = this._points[t].x, s = this._points[t].y, a = this._points[t + 1].x, h = this._points[t + 1].y,
        l = this._points[t + 2].x, c = this._points[t + 2].y
      if (4 == e) {
        var u = this._points[t + 3].x, _ = this._points[t + 3].y
        n.x = o * o * o * r + 3 * o * o * i * l + 3 * o * i * i * u + i * i * i * a, n.y = o * o * o * s + 3 * o * o * i * c + 3 * o * i * i * _ + i * i * i * h
      } else {
        n.x = o * o * r + 2 * o * i * l + i * i * a, n.y = o * o * s + 2 * o * i * c + i * i * h
      }
      return n
    }, e
  }()
  t.GPath = e
  var i = new Array
}(fgui || (fgui = {})), function (t) {
  var e
  !function (t) {
    t[t.CRSpline = 0] = 'CRSpline', t[t.Bezier = 1] = 'Bezier', t[t.CubicBezier = 2] = 'CubicBezier', t[t.Straight = 3] = 'Straight'
  }(e = t.CurveType || (t.CurveType = {}))
  var i = function () {
    function t () {
      this.x = 0, this.y = 0, this.control1_x = 0, this.control1_y = 0, this.control2_x = 0, this.control2_y = 0, this.curveType = 0
    }

    return t.newPoint = function (e, i, n) {
      void 0 === e && (e = 0), void 0 === i && (i = 0), void 0 === n && (n = 0)
      var o = new t
      return o.x = e, o.y = i, o.control1_x = 0, o.control1_y = 0, o.control2_x = 0, o.control2_y = 0, o.curveType = n, o
    }, t.newBezierPoint = function (i, n, o, r) {
      void 0 === i && (i = 0), void 0 === n && (n = 0), void 0 === o && (o = 0), void 0 === r && (r = 0)
      var s = new t
      return s.x = i, s.y = n, s.control1_x = o, s.control1_y = r, s.control2_x = 0, s.control2_y = 0, s.curveType = e.Bezier, s
    }, t.newCubicBezierPoint = function (i, n, o, r, s, a) {
      void 0 === i && (i = 0), void 0 === n && (n = 0), void 0 === o && (o = 0), void 0 === r && (r = 0), void 0 === s && (s = 0), void 0 === a && (a = 0)
      var h = new t
      return h.x = i, h.y = n, h.control1_x = o, h.control1_y = r, h.control2_x = s, h.control2_y = a, h.curveType = e.CubicBezier, h
    }, t.prototype.clone = function () {
      var e = new t
      return e.x = this.x, e.y = this.y, e.control1_x = this.control1_x, e.control1_y = this.control1_y, e.control2_x = this.control2_x, e.control2_y = this.control2_y, e.curveType = this.curveType, e
    }, t
  }()
  t.GPathPoint = i
}(fgui || (fgui = {})), function (t) {
  var e = function () {
    function e () {
    }

    return e.to = function (e, i, n) {
      return t.TweenManager.createTween()._to(e, i, n)
    }, e.to2 = function (e, i, n, o, r) {
      return t.TweenManager.createTween()._to2(e, i, n, o, r)
    }, e.to3 = function (e, i, n, o, r, s, a) {
      return t.TweenManager.createTween()._to3(e, i, n, o, r, s, a)
    }, e.to4 = function (e, i, n, o, r, s, a, h, l) {
      return t.TweenManager.createTween()._to4(e, i, n, o, r, s, a, h, l)
    }, e.toColor = function (e, i, n) {
      return t.TweenManager.createTween()._toColor(e, i, n)
    }, e.delayedCall = function (e) {
      return t.TweenManager.createTween().setDelay(e)
    }, e.shake = function (e, i, n, o) {
      return t.TweenManager.createTween()._shake(e, i, n, o)
    }, e.isTweening = function (e, i) {
      return t.TweenManager.isTweening(e, i)
    }, e.kill = function (e, i, n) {
      t.TweenManager.killTweens(e, i, n)
    }, e.getTween = function (e, i) {
      return t.TweenManager.getTween(e, i)
    }, e.catchCallbackExceptions = !0, e
  }()
  t.GTween = e
}(fgui || (fgui = {})), function (t) {
  var e = function () {
    function e () {
      this._startValue = new t.TweenValue, this._endValue = new t.TweenValue, this._value = new t.TweenValue, this._deltaValue = new t.TweenValue, this._reset()
    }

    return e.prototype.setDelay = function (t) {
      return this._delay = t, this
    }, Object.defineProperty(e.prototype, 'delay', {
      get: function () {
        return this._delay
      }, enumerable: !0, configurable: !0
    }), e.prototype.setDuration = function (t) {
      return this._duration = t, this
    }, Object.defineProperty(e.prototype, 'duration', {
      get: function () {
        return this._duration
      }, enumerable: !0, configurable: !0
    }), e.prototype.setBreakpoint = function (t) {
      return this._breakpoint = t, this
    }, e.prototype.setEase = function (t) {
      return this._easeType = t, this
    }, e.prototype.setEasePeriod = function (t) {
      return this._easePeriod = t, this
    }, e.prototype.setEaseOvershootOrAmplitude = function (t) {
      return this._easeOvershootOrAmplitude = t, this
    }, e.prototype.setRepeat = function (t, e) {
      return this._repeat = t, this._yoyo = e, this
    }, Object.defineProperty(e.prototype, 'repeat', {
      get: function () {
        return this._repeat
      }, enumerable: !0, configurable: !0
    }), e.prototype.setTimeScale = function (t) {
      return this._timeScale = t, this
    }, e.prototype.setSnapping = function (t) {
      return this._snapping = t, this
    }, e.prototype.setTarget = function (t, e) {
      return this._target = t, this._propType = e, this
    }, Object.defineProperty(e.prototype, 'target', {
      get: function () {
        return this._target
      }, enumerable: !0, configurable: !0
    }), e.prototype.setUserData = function (t) {
      return this._userData = t, this
    }, Object.defineProperty(e.prototype, 'userData', {
      get: function () {
        return this._userData
      }, enumerable: !0, configurable: !0
    }), e.prototype.setPath = function (t) {
      return this._path = t, this
    }, e.prototype.onUpdate = function (t, e) {
      return this._onUpdate = t, this._onUpdateCaller = e, this
    }, e.prototype.onStart = function (t, e) {
      return this._onStart = t, this._onStartCaller = e, this
    }, e.prototype.onComplete = function (t, e) {
      return this._onComplete = t, this._onCompleteCaller = e, this
    }, Object.defineProperty(e.prototype, 'startValue', {
      get: function () {
        return this._startValue
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(e.prototype, 'endValue', {
      get: function () {
        return this._endValue
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(e.prototype, 'value', {
      get: function () {
        return this._value
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(e.prototype, 'deltaValue', {
      get: function () {
        return this._deltaValue
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(e.prototype, 'normalizedTime', {
      get: function () {
        return this._normalizedTime
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(e.prototype, 'completed', {
      get: function () {
        return 0 != this._ended
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(e.prototype, 'allCompleted', {
      get: function () {
        return 1 == this._ended
      }, enumerable: !0, configurable: !0
    }), e.prototype.setPaused = function (t) {
      return this._paused = t, this
    }, e.prototype.seek = function (t) {
      if (!this._killed) {
        if (this._elapsedTime = t, this._elapsedTime < this._delay) {
          if (!this._started) return
          this._elapsedTime = this._delay
        }
        this.update()
      }
    }, e.prototype.kill = function (t) {
      this._killed || (t && (0 == this._ended && (this._breakpoint >= 0 ? this._elapsedTime = this._delay + this._breakpoint : this._repeat >= 0 ? this._elapsedTime = this._delay + this._duration * (this._repeat + 1) : this._elapsedTime = this._delay + 2 * this._duration, this.update()), this.callCompleteCallback()), this._killed = !0)
    }, e.prototype._to = function (t, e, i) {
      return this._valueSize = 1, this._startValue.x = t, this._endValue.x = e, this._value.x = t, this._duration = i, this
    }, e.prototype._to2 = function (t, e, i, n, o) {
      return this._valueSize = 2, this._startValue.x = t, this._endValue.x = i, this._startValue.y = e, this._endValue.y = n, this._value.x = t, this._value.y = e, this._duration = o, this
    }, e.prototype._to3 = function (t, e, i, n, o, r, s) {
      return this._valueSize = 3, this._startValue.x = t, this._endValue.x = n, this._startValue.y = e, this._endValue.y = o, this._startValue.z = i, this._endValue.z = r, this._value.x = t, this._value.y = e, this._value.z = i, this._duration = s, this
    }, e.prototype._to4 = function (t, e, i, n, o, r, s, a, h) {
      return this._valueSize = 4, this._startValue.x = t, this._endValue.x = o, this._startValue.y = e, this._endValue.y = r, this._startValue.z = i, this._endValue.z = s, this._startValue.w = n, this._endValue.w = a, this._value.x = t, this._value.y = e, this._value.z = i, this._value.w = n, this._duration = h, this
    }, e.prototype._toColor = function (t, e, i) {
      return this._valueSize = 4, this._startValue.color = t, this._endValue.color = e, this._value.color = t, this._duration = i, this
    }, e.prototype._shake = function (t, e, i, n) {
      return this._valueSize = 5, this._startValue.x = t, this._startValue.y = e, this._startValue.w = i, this._duration = n, this
    }, e.prototype._init = function () {
      this._delay = 0, this._duration = 0, this._breakpoint = -1, this._easeType = t.EaseType.QuadOut, this._timeScale = 1, this._easePeriod = 0, this._easeOvershootOrAmplitude = 1.70158, this._snapping = !1, this._repeat = 0, this._yoyo = !1, this._valueSize = 0, this._started = !1, this._paused = !1, this._killed = !1, this._elapsedTime = 0, this._normalizedTime = 0, this._ended = 0
    }, e.prototype._reset = function () {
      this._target = null, this._propType = null, this._userData = null, this._path = null, this._onStart = this._onUpdate = this._onComplete = null, this._onStartCaller = this._onUpdateCaller = this._onCompleteCaller = null
    }, e.prototype._update = function (t) {
      if (1 != this._timeScale && (t *= this._timeScale), 0 != t) {
        if (0 != this._ended) return this.callCompleteCallback(), void (this._killed = !0)
        this._elapsedTime += t, this.update(), 0 != this._ended && (this._killed || (this.callCompleteCallback(), this._killed = !0))
      }
    }, e.prototype.update = function () {
      if (this._ended = 0, 0 != this._valueSize) {
        if (!this._started) {
          if (this._elapsedTime < this._delay) return
          if (this._started = !0, this.callStartCallback(), this._killed) return
        }
        var e = !1, n = this._elapsedTime - this._delay
        if (this._breakpoint >= 0 && n >= this._breakpoint && (n = this._breakpoint, this._ended = 2), 0 != this._repeat) {
          var o = Math.floor(n / this._duration)
          n -= this._duration * o, this._yoyo && (e = o % 2 == 1), this._repeat > 0 && this._repeat - o < 0 && (this._yoyo && (e = this._repeat % 2 == 1), n = this._duration, this._ended = 1)
        } else {
          n >= this._duration && (n = this._duration, this._ended = 1)
        }
        if (this._normalizedTime = t.evaluateEase(this._easeType, e ? this._duration - n : n, this._duration, this._easeOvershootOrAmplitude, this._easePeriod), this._value.setZero(), this._deltaValue.setZero(), 5 == this._valueSize) {
          if (0 == this._ended) {
            var r = this._startValue.w * (1 - this._normalizedTime), s = r * (Math.random() > .5 ? 1 : -1),
              a = r * (Math.random() > .5 ? 1 : -1)
            this._deltaValue.x = s, this._deltaValue.y = a, this._value.x = this._startValue.x + s, this._value.y = this._startValue.y + a
          } else {
            this._value.x = this._startValue.x, this._value.y = this._startValue.y
          }
        } else if (this._path) {
          var h = i
          this._path.getPointAt(this._normalizedTime, h), this._snapping && (h.x = Math.round(h.x), h.y = Math.round(h.y)), this._deltaValue.x = h.x - this._value.x, this._deltaValue.y = h.y - this._value.y, this._value.x = h.x, this._value.y = h.y
        } else {
          for (var l = 0; l < this._valueSize; l++) {
            var c = this._startValue.getField(l), u = c + (this._endValue.getField(l) - c) * this._normalizedTime
            this._snapping && (u = Math.round(u)), this._deltaValue.setField(l, u - this._value.getField(l)), this._value.setField(l, u)
          }
        }
        if (null != this._target && null != this._propType) {
          if (this._propType instanceof Function) {
            switch (this._valueSize) {
              case 1:
                this._propType.call(this._target, this._value.x)
                break
              case 2:
                this._propType.call(this._target, this._value.x, this._value.y)
                break
              case 3:
                this._propType.call(this._target, this._value.x, this._value.y, this._value.z)
                break
              case 4:
                this._propType.call(this._target, this._value.x, this._value.y, this._value.z, this._value.w)
                break
              case 5:
                this._propType.call(this._target, this._value.color)
                break
              case 6:
                this._propType.call(this._target, this._value.x, this._value.y)
            }
          } else {
            5 == this._valueSize ? this._target[this._propType] = this._value.color : this._target[this._propType] = this._value.x
          }
        }
        this.callUpdateCallback()
      } else {
        this._elapsedTime >= this._delay + this._duration && (this._ended = 1)
      }
    }, e.prototype.callStartCallback = function () {
      if (null != this._onStart) {
        try {
          this._onStart.call(this._onStartCaller, this)
        } catch (t) {
          console.log('FairyGUI: error in start callback > ' + t)
        }
      }
    }, e.prototype.callUpdateCallback = function () {
      if (null != this._onUpdate) {
        try {
          this._onUpdate.call(this._onUpdateCaller, this)
        } catch (t) {
          console.log('FairyGUI: error in update callback > ' + t)
        }
      }
    }, e.prototype.callCompleteCallback = function () {
      if (null != this._onComplete) {
        try {
          this._onComplete.call(this._onCompleteCaller, this)
        } catch (t) {
          console.log('FairyGUI: error in complete callback > ' + t)
        }
      }
    }, e
  }()
  t.GTweener = e
  var i = new egret.Point
}(fgui || (fgui = {})), function (t) {
  var e = function () {
    function e () {
    }

    return e.createTween = function () {
      var a
      return i || (egret.startTick(e.update, null), i = !0, s = egret.getTimer()), (a = o.length > 0 ? o.pop() : new t.GTweener)._init(), n[r++] = a, r == n.length && (n.length = n.length + Math.ceil(.5 * n.length)), a
    }, e.isTweening = function (t, e) {
      if (null == t) return !1
      for (var i = null == e, o = 0; o < r; o++) {
        var s = n[o]
        if (null != s && s.target == t && !s._killed && (i || s._propType == e)) return !0
      }
      return !1
    }, e.killTweens = function (t, e, i) {
      if (null == t) return !1
      for (var o = !1, s = r, a = null == i, h = 0; h < s; h++) {
        var l = n[h]
        null == l || l.target != t || l._killed || !a && l._propType != i || (l.kill(e), o = !0)
      }
      return o
    }, e.getTween = function (t, e) {
      if (null == t) return null
      for (var i = r, o = null == e, s = 0; s < i; s++) {
        var a = n[s]
        if (null != a && a.target == t && !a._killed && (o || a._propType == e)) return a
      }
      return null
    }, e.update = function (e) {
      var i = e - s
      s = e, i /= 1e3
      for (var a = r, h = -1, l = 0; l < a; l++) {
        var c = n[l]
        null == c ? (-1 == h && (h = l), 0) : c._killed ? (c._reset(), o.push(c), n[l] = null, -1 == h && (h = l), 0) : (c._target instanceof t.GObject && c._target.isDisposed ? c._killed = !0 : c._paused || c._update(i), -1 != h && (n[h] = c, n[l] = null, h++))
      }
      if (h >= 0) {
        if (r != a) {
          var u = a
          for (a = r - a, l = 0; l < a; l++) n[h++] = n[u++]
        }
        r = h
      }
      return !1
    }, e
  }()
  t.TweenManager = e
  var i, n = new Array(30), o = new Array, r = 0, s = 0
}(fgui || (fgui = {})), function (t) {
  var e = function () {
    function t () {
      this.x = this.y = this.z = this.w = 0
    }

    return Object.defineProperty(t.prototype, 'color', {
      get: function () {
        return (this.w << 24) + (this.x << 16) + (this.y << 8) + this.z
      }, set: function (t) {
        this.x = (16711680 & t) >> 16, this.y = (65280 & t) >> 8, this.z = 255 & t, this.w = (4278190080 & t) >> 24
      }, enumerable: !0, configurable: !0
    }), t.prototype.getField = function (t) {
      switch (t) {
        case 0:
          return this.x
        case 1:
          return this.y
        case 2:
          return this.z
        case 3:
          return this.w
        default:
          throw new Error('Index out of bounds: ' + t)
      }
    }, t.prototype.setField = function (t, e) {
      switch (t) {
        case 0:
          this.x = e
          break
        case 1:
          this.y = e
          break
        case 2:
          this.z = e
          break
        case 3:
          this.w = e
          break
        default:
          throw new Error('Index out of bounds: ' + t)
      }
    }, t.prototype.setZero = function () {
      this.x = this.y = this.z = this.w = 0
    }, t
  }()
  t.TweenValue = e
}(fgui || (fgui = {})), function (t) {
  var e = function (t) {
    function e (e, i) {
      var n = t.call(this, e, i) || this
      return n.version = 0, n
    }

    return __extends(e, t), e.prototype.skip = function (t) {
      this.position += t
    }, e.prototype.readBool = function () {
      return 1 == this.readByte()
    }, e.prototype.readS = function () {
      var t = this.readUnsignedShort()
      return 65534 == t ? null : 65533 == t ? '' : this.stringTable[t]
    }, e.prototype.readSArray = function (t) {
      for (var e = new Array(t), i = 0; i < t; i++) e[i] = this.readS()
      return e
    }, e.prototype.writeS = function (t) {
      var e = this.readUnsignedShort()
      65534 != e && 65533 != e && (this.stringTable[e] = t)
    }, e.prototype.readColor = function (t) {
      var e = this.readUnsignedByte(), i = this.readUnsignedByte(), n = this.readUnsignedByte(),
        o = this.readUnsignedByte()
      return (t ? o << 24 : 0) + (e << 16) + (i << 8) + n
    }, e.prototype.readChar = function () {
      var t = this.readUnsignedShort()
      return String.fromCharCode(t)
    }, e.prototype.readBuffer = function () {
      var t = this.readUnsignedInt(), i = new e(new Uint8Array(this.buffer, this.position, t))
      return i.stringTable = this.stringTable, i.version = this.version, this.position += t, i
    }, e.prototype.seek = function (t, e) {
      var i, n = this.position
      return this.position = t, e < this.readByte() ? (1 == this.readByte() ? (this.position += 2 * e, i = this.readUnsignedShort()) : (this.position += 4 * e, i = this.readUnsignedInt()), i > 0 ? (this.position = t + i, !0) : (this.position = n, !1)) : (this.position = n, !1)
    }, e
  }(egret.ByteArray)
  t.ByteBuffer = e
}(fgui || (fgui = {})), function (t) {
  var e = function () {
    function t (t, e, i, o) {
      this.matrix = new Array(n), this.reset(), void 0 === t && void 0 === e && void 0 === i && void 0 === o || this.adjustColor(t, e, i, o)
    }

    return t.prototype.reset = function () {
      for (var t = 0; t < n; t++) this.matrix[t] = i[t]
    }, t.prototype.invert = function () {
      this.multiplyMatrix([-1, 0, 0, 0, 255, 0, -1, 0, 0, 255, 0, 0, -1, 0, 255, 0, 0, 0, 1, 0])
    }, t.prototype.adjustColor = function (t, e, i, n) {
      this.adjustHue(n || 0), this.adjustContrast(e || 0), this.adjustBrightness(t || 0), this.adjustSaturation(i || 0)
    }, t.prototype.adjustBrightness = function (t) {
      t = 255 * this.cleanValue(t, 1), this.multiplyMatrix([1, 0, 0, 0, t, 0, 1, 0, 0, t, 0, 0, 1, 0, t, 0, 0, 0, 1, 0])
    }, t.prototype.adjustContrast = function (t) {
      var e = (t = this.cleanValue(t, 1)) + 1, i = 128 * (1 - e)
      this.multiplyMatrix([e, 0, 0, 0, i, 0, e, 0, 0, i, 0, 0, e, 0, i, 0, 0, 0, 1, 0])
    }, t.prototype.adjustSaturation = function (t) {
      t = this.cleanValue(t, 1)
      var e = 1 - (t += 1), i = e * o, n = e * r, a = e * s
      this.multiplyMatrix([i + t, n, a, 0, 0, i, n + t, a, 0, 0, i, n, a + t, 0, 0, 0, 0, 0, 1, 0])
    }, t.prototype.adjustHue = function (t) {
      t = this.cleanValue(t, 1), t *= Math.PI
      var e = Math.cos(t), i = Math.sin(t)
      this.multiplyMatrix([o + e * (1 - o) + i * -o, r + e * -r + i * -r, s + e * -s + i * (1 - s), 0, 0, o + e * -o + .143 * i, r + e * (1 - r) + .14 * i, s + e * -s + -.283 * i, 0, 0, o + e * -o + i * -(1 - o), r + e * -r + i * r, s + e * (1 - s) + i * s, 0, 0, 0, 0, 0, 1, 0])
    }, t.prototype.concat = function (t) {
      t.length == n && this.multiplyMatrix(t)
    }, t.prototype.clone = function () {
      var e = new t
      return e.copyMatrix(this.matrix), e
    }, t.prototype.copyMatrix = function (t) {
      for (var e = n, i = 0; i < e; i++) this.matrix[i] = t[i]
    }, t.prototype.multiplyMatrix = function (t) {
      for (var e = [], i = 0, n = 0; n < 4; ++n) {
        for (var o = 0; o < 5; ++o) e[i + o] = t[i] * this.matrix[o] + t[i + 1] * this.matrix[o + 5] + t[i + 2] * this.matrix[o + 10] + t[i + 3] * this.matrix[o + 15] + (4 == o ? t[i + 4] : 0)
        i += 5
      }
      this.copyMatrix(e)
    }, t.prototype.cleanValue = function (t, e) {
      return Math.min(e, Math.max(-e, t))
    }, t
  }()
  t.ColorMatrix = e
  var i = [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0], n = i.length, o = .299, r = .587, s = .114
}(fgui || (fgui = {})), function (t) {
  var e = function () {
    function t () {
      this._enumI = 0, this._enumCount = 0, this._lastTime = 0, this._items = new Array, this._itemPool = new Array, this._lastTime = egret.getTimer(), t.time = this._lastTime, egret.startTick(this.__timer, this)
    }

    return t.prototype.getItem = function () {
      return this._itemPool.length ? this._itemPool.pop() : new i
    }, t.prototype.findItem = function (t, e) {
      for (var i = this._items.length, n = 0; n < i; n++) {
        var o = this._items[n]
        if (o.callback == t && o.thisObj == e) return o
      }
      return null
    }, t.prototype.add = function (t, e, i, n, o) {
      var r = this.findItem(i, n)
      r || ((r = this.getItem()).callback = i, r.hasParam = 1 == i.length, r.thisObj = n, this._items.push(r)), r.delay = t, r.counter = 0, r.repeat = e, r.param = o, r.end = !1
    }, t.prototype.callLater = function (t, e, i) {
      this.add(1, 1, t, e, i)
    }, t.prototype.callDelay = function (t, e, i, n) {
      this.add(t, 1, e, i, n)
    }, t.prototype.exists = function (t, e) {
      return null != this.findItem(t, e)
    }, t.prototype.remove = function (t, e) {
      var i = this.findItem(t, e)
      if (i) {
        var n = this._items.indexOf(i)
        this._items.splice(n, 1), n < this._enumI && this._enumI--, this._enumCount--, i.reset(), this._itemPool.push(i)
      }
    }, t.prototype.__timer = function (e) {
      for (t.time = e, t.deltaTime = e - this._lastTime, this._lastTime = e, this._enumI = 0, this._enumCount = this._items.length; this._enumI < this._enumCount;) {
        var i = this._items[this._enumI]
        this._enumI++, i.advance(t.deltaTime) && (i.end && (this._enumI--, this._enumCount--, this._items.splice(this._enumI, 1)), i.hasParam ? i.callback.call(i.thisObj, i.param) : i.callback.call(i.thisObj), i.end && (i.reset(), this._itemPool.push(i)))
      }
      return !1
    }, t.deltaTime = 0, t.time = 0, t.inst = new t, t
  }()
  t.GTimers = e
  var i = function () {
    function t () {
      this.delay = 0, this.counter = 0, this.repeat = 0
    }

    return t.prototype.advance = function (t) {
      return this.counter += t, this.counter >= this.delay && (this.counter -= this.delay, this.counter > this.delay && (this.counter = this.delay), this.repeat > 0 && (this.repeat--, 0 == this.repeat && (this.end = !0)), !0)
    }, t.prototype.reset = function () {
      this.callback = null, this.thisObj = null, this.param = null
    }, t
  }()
}(fgui || (fgui = {})), function (t) {
  var e = function () {
    function t () {
      this._readPos = 0, this.smallFontSize = 12, this.normalFontSize = 14, this.largeFontSize = 16, this.defaultImgWidth = 0, this.defaultImgHeight = 0, this._handlers = {}, this._handlers.url = this.onTag_URL, this._handlers.img = this.onTag_IMG, this._handlers.b = this.onTag_Simple, this._handlers.i = this.onTag_Simple, this._handlers.u = this.onTag_Simple, this._handlers.sup = this.onTag_Simple, this._handlers.sub = this.onTag_Simple, this._handlers.color = this.onTag_COLOR, this._handlers.font = this.onTag_FONT, this._handlers.size = this.onTag_SIZE
    }

    return t.prototype.onTag_URL = function (t, e, i) {
      return e ? '</a>' : null != i ? '<a href="' + i + '" target="_blank">' : '<a href="' + this.getTagText() + '" target="_blank">'
    }, t.prototype.onTag_IMG = function (t, e, i) {
      if (e) return null
      var n = this.getTagText(!0)
      return n ? this.defaultImgWidth ? '<img src="' + n + '" width="' + this.defaultImgWidth + '" height="' + this.defaultImgHeight + '"/>' : '<img src="' + n + '"/>' : null
    }, t.prototype.onTag_Simple = function (t, e, i) {
      return e ? '</' + t + '>' : '<' + t + '>'
    }, t.prototype.onTag_COLOR = function (t, e, i) {
      return e ? '</font>' : '<font color="' + i + '">'
    }, t.prototype.onTag_FONT = function (t, e, i) {
      return e ? '</font>' : '<font face="' + i + '">'
    }, t.prototype.onTag_SIZE = function (t, e, i) {
      return e ? '</font>' : ('normal' == i ? i = '' + this.normalFontSize : 'small' == i ? i = '' + this.smallFontSize : 'large' == i ? i = '' + this.largeFontSize : i.length && '+' == i.charAt(0) ? i = '' + (this.smallFontSize + parseInt(i.substr(1))) : i.length && '-' == i.charAt(0) && (i = '' + (this.smallFontSize - parseInt(i.substr(1)))), '<font size="' + i + '">')
    }, t.prototype.getTagText = function (t) {
      void 0 === t && (t = !1)
      for (var e, i = this._readPos, n = ''; -1 != (e = this._text.indexOf("[", i));) {
        if (92 != this._text.charCodeAt(e - 1)) {
          n += this._text.substring(i, e)
          break
        }
        n += this._text.substring(i, e - 1), n += '[', i = e + 1
      }
      return -1 == e ? null : (t && (this._readPos = e), n)
    }, t.prototype.parse = function (t, e) {
      this._text = t
      for (var i, n, o, r, s, a, h, l = 0, c = ''; -1 != (i = this._text.indexOf("[", l));) {
        if (i > 0 && 92 == this._text.charCodeAt(i - 1)) {
          c += this._text.substring(l, i - 1), c += '[', l = i + 1
        } else {
          if (c += this._text.substring(l, i), l = i, -1 == (i = this._text.indexOf(']', l))) break
          o = '/' == this._text.charAt(l + 1), r = this._text.substring(o ? l + 2 : l + 1, i), this._readPos = i + 1, s = null, a = null, -1 != (n = r.indexOf('=')) && (s = r.substring(n + 1), r = r.substring(0, n)), r = r.toLowerCase(), null != (h = this._handlers[r]) ? e || null != (a = h.call(this, r, o, s)) && (c += a) : c += this._text.substring(l, this._readPos), l = this._readPos
        }
      }
      return l < this._text.length && (c += this._text.substr(l)), this._text = null, c
    }, t.inst = new t, t
  }()
  t.UBBParser = e
}(fgui || (fgui = {})), function (t) {
  var e = function () {
    function e () {
    }

    return e.startsWith = function (t, e, i) {
      return !!t && (!(t.length < e.length) && (t = t.substring(0, e.length), i ? t.toLowerCase() == e.toLowerCase() : t == e))
    }, e.trimRight = function (t) {
      for (var e = '', i = t.length - 1; i >= 0 && (" " == (e = t.charAt(i)) || "\n" == e || "\r" == e); i--)
      return t.substring(0, i + 1)
    }, e.convertToHtmlColor = function (t, e) {
      var i
      i = e ? (t >> 24 & 255).toString(16) : ''
      var n = (t >> 16 & 255).toString(16), o = (t >> 8 & 255).toString(16), r = (255 & t).toString(16)
      return 1 == i.length && (i = '0' + i), 1 == n.length && (n = '0' + n), 1 == o.length && (o = '0' + o), 1 == r.length && (r = '0' + r), '#' + i + n + o + r
    }, e.convertFromHtmlColor = function (t, e) {
      return t.length < 1 ? 0 : ('#' == t.charAt(0) && (t = t.substr(1)), 8 == t.length ? (parseInt(t.substr(0, 2), 16) << 24) + parseInt(t.substr(2), 16) : e ? 4278190080 + parseInt(t, 16) : parseInt(t, 16))
    }, e.displayObjectToGObject = function (e) {
      for (; e && !(e instanceof egret.Stage);) {
        if (e.$owner) return t.GObject.cast(e)
        e = e.parent
      }
      return null
    }, e.encodeHTML = function (t) {
      return t ? t.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/'/g, '&apos;').replace(/"/g, '&quot;') : ''
    }, e.clamp = function (t, e, i) {
      return t < e ? t = e : t > i && (t = i), t
    }, e.clamp01 = function (t) {
      return t > 1 ? t = 1 : t < 0 && (t = 0), t
    }, e.lerp = function (t, e, i) {
      return t + i * (e - t)
    }, e.repeat = function (t, e) {
      return t - Math.floor(t / e) * e
    }, e.distance = function (t, e, i, n) {
      return Math.sqrt(Math.pow(t - i, 2) + Math.pow(e - n, 2))
    }, e.fillPath = function (t, e, i, n) {
      var o = e.length
      t.moveTo(e[0] + i, e[1] + n)
      for (var r = 2; r < o; r += 2) t.lineTo(e[r] + i, e[r + 1] + n)
      t.lineTo(e[0] + i, e[1] + n)
    }, e.setColorFilter = function (e, o) {
      var r, s, a = e.$_colorFilter_, h = e.filters
      if ('boolean' == typeof o ? (r = a ? a.$_color_ : null, s = o) : (r = 16777215 == o ? null : o, s = !!a && a.$_grayed_), r || 0 === r || s) {
        if (a || (a = new egret.ColorMatrixFilter, e.$_colorFilter_ = a), h) -1 == h.indexOf(a) && h.push(a) else h = [a]
        e.filters = h, a.$_color_ = r, a.$_grayed_ = s
        var l = a.matrix
        if (s) {
          for (var c = 0; c < 20; c++) l[c] = i[c]
        } else if (r instanceof Array) {
          !function (e, i, o, r, s) {
            s || (s = new Array(t.ColorMatrix.length))
            n.reset(), n.adjustColor(e, i, o, r), n.matrix.forEach(function (t, e) {
              return s[e] = t
            })
          }(r[0], r[1], r[2], r[3], l)
        } else {
          for (var u = 0; u < 20; u++) l[u] = 0 == u || 6 == u || 12 == u || 18 == u ? 1 : 0
          l[0] = (o >> 16 & 255) / 255, l[6] = (o >> 8 & 255) / 255, l[12] = (255 & o) / 255
        }
        a.matrix = l
      } else if (h && a) {
        var _ = h.indexOf(a);
        -1 != _ && (h.splice(_, 1), h.length > 0 ? e.filters = h : e.filters = null)
      }
    }, e
  }()
  t.ToolSet = e
  var i = [.3, .6, 0, 0, 0, .3, .6, 0, 0, 0, .3, .6, 0, 0, 0, 0, 0, 0, 1, 0], n = new t.ColorMatrix
}(fgui || (fgui = {}))
var __reflect = this && this.__reflect || function (t, e, i) {
  t.__class__ = e, i ? i.push(e) : i = [e], t.__types__ = t.__types__ ? i.concat(t.__types__) : i
}, __extends = this && this.__extends || function (t, e) {
  function i () {
    this.constructor = t
  }

  for (var a in e) e.hasOwnProperty(a) && (t[a] = e[a])
  i.prototype = e.prototype, t.prototype = new i
}, particle
!function (t) {
  var e = function () {
    function t () {
      this.matrix = new egret.Matrix, this.reset()
    }

    return t.prototype.reset = function () {
      this.x = 0, this.y = 0, this.scale = 1, this.rotation = 0, this.alpha = 1, this.currentTime = 0, this.totalTime = 1e3
    }, t.prototype.$getMatrix = function (t, e) {
      var i = this.matrix
      if (i.identity(), this.rotation % 360) {
        var a = this.rotation, r = egret.NumberUtils.cos(a),
          s = egret.NumberUtils.sin(a)
      } else {
        r = 1, s = 0
      }
      return i.append(r * this.scale, s * this.scale, -s * this.scale, r * this.scale, this.x, this.y), (t || e) && (i.tx -= t * i.a + e * i.c, i.ty -= t * i.b + e * i.d), i
    }, t
  }()
  t.Particle = e, __reflect(e.prototype, 'particle.Particle')
  var i = 1
  if (egret.nativeRender) {
    if (egret_native.nrParticleABIVersion) {
      var a = egret_native.nrParticleABIVersion
      i > a ? (egret.warn('runtime'), egret.nativeRender = !1) : a > i && (egret.warn(''), egret.nativeRender = !1)
    } else {
      egret.warn(''), egret.nativeRender = !1
    }
  }
}(particle || (particle = {}))
var particle
!function (t) {
  var e = function (e) {
    function i (t, i) {
      var a = e.call(this) || this
      return a._pool = [], a.frameTime = 0, a.particles = [], a._emitterX = 0, a._emitterY = 0, a.emissionTime = -1, a.maxParticles = 200, a.numParticles = 0, a.particleClass = null, a.$particleConfig = null, a.particleMeasureRect = new egret.Rectangle, a.transformForMeasure = new egret.Matrix, a.bitmapNodeList = [], egret.nativeRender ? (a.initConfig(i, 0, 0), a.changeTexture(t), a.$nativeDisplayObject.addCallBack('on' + egret.Event.COMPLETE, function () {
        a.dispatchEventWith(egret.Event.COMPLETE)
      }, a)) : (a.emissionRate = i, a.texture = t, a.$renderNode = new egret.sys.GroupNode, a.$renderNode.cleanBeforeRender = function () {
      }), a
    }

    return __extends(i, e), i.prototype.createNativeDisplayObject = function () {
      this.$nativeDisplayObject = new egret_native.NativeDisplayObject(10)
    }, i.prototype.initConfig = function (t, e, i) {
      this.$particleConfig = [t, e, i, 0, 200], this.emissionRate = t, this._emitterX = e, this._emitterY = i
    }, i.prototype.getParticle = function () {
      var e
      return e = this._pool.length ? this._pool.pop() : this.particleClass ? new this.particleClass : new t.Particle
    }, i.prototype.removeParticle = function (t) {
      var e = this.particles.indexOf(t)
      return -1 != e ? (t.reset(), this.particles.splice(e, 1), this._pool.push(t), this.numParticles--, this.bitmapNodeList.length > this.numParticles && (this.bitmapNodeList.length = this.numParticles, this.$renderNode.drawData.length = this.numParticles), !0) : !1
    }, i.prototype.initParticle = function (t) {
      t.x = this.emitterX, t.y = this.emitterY, t.currentTime = 0, t.totalTime = 1e3
    }, i.prototype.updateRelativeBounds = function (t) {
      t ? (null == this.relativeContentBounds && (this.relativeContentBounds = new egret.Rectangle), this.relativeContentBounds.copyFrom(t), this.relativeContentBounds.x += this.emitterX, this.relativeContentBounds.y += this.emitterY) : this.relativeContentBounds = null, this.mask = this.relativeContentBounds
    }, Object.defineProperty(i.prototype, 'emitterBounds', {
      get: function () {
        return this._emitterBounds
      }, set: function (t) {
        this._emitterBounds = t, this.updateRelativeBounds(t), egret.nativeRender && this.onPropertyChanges()
      }, enumerable: !0, configurable: !0
    }), i.prototype.onPropertyChanges = function () {
      this.$nativeDisplayObject.setParticleConfig(this.$particleConfig)
    }, Object.defineProperty(i.prototype, 'emitterX', {
      get: function () {
        return this._emitterX
      }, set: function (t) {
        this._emitterX = t, this.updateRelativeBounds(this.emitterBounds), egret.nativeRender && this.onPropertyChanges()
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(i.prototype, 'emitterY', {
      get: function () {
        return this._emitterY
      }, set: function (t) {
        this._emitterY = t, this.updateRelativeBounds(this.emitterBounds), egret.nativeRender && this.onPropertyChanges()
      }, enumerable: !0, configurable: !0
    }), i.prototype.start = function (t) {
      void 0 === t && (t = -1), 0 != this.emissionRate && (this.emissionTime = t, egret.nativeRender ? (this.$particleConfig[3] = t, this.$nativeDisplayObject.setStartToParticle(this.$particleConfig)) : (this.timeStamp = egret.getTimer(), egret.startTick(this.update, this)))
    }, i.prototype.stop = function (t) {
      return void 0 === t && (t = !1), egret.nativeRender ? void this.$nativeDisplayObject.setStopToParticle(t) : (this.emissionTime = 0, void (t && (this.clear(), egret.stopTick(this.update, this))))
    }, i.prototype.update = function (t) {
      var e = t - this.timeStamp
      if (this.timeStamp = t, -1 == this.emissionTime || this.emissionTime > 0) {
        for (this.frameTime += e; this.frameTime > 0;) this.numParticles < this.maxParticles && this.addOneParticle(), this.frameTime -= this.emissionRate;
        -1 != this.emissionTime && (this.emissionTime -= e, this.emissionTime < 0 && (this.emissionTime = 0))
      }
      for (var i, a = 0; a < this.numParticles;) i = this.particles[a], i.currentTime < i.totalTime ? (this.advanceParticle(i, e), i.currentTime += e, a++) : this.removeParticle(i)
      return this.$renderDirty = !0, 0 == this.numParticles && 0 == this.emissionTime && (egret.stopTick(this.update, this), this.dispatchEventWith(egret.Event.COMPLETE)), !1
    }, i.prototype.$measureContentBounds = function (t) {
      if (this.relativeContentBounds) return void t.copyFrom(this.relativeContentBounds)
      if (this.numParticles > 0) {
        for (var e, i = this.texture, a = Math.round(i.$getScaleBitmapWidth()), r = Math.round(i.$getScaleBitmapHeight()), s = egret.Rectangle.create(), n = 0; n < this.numParticles; n++) {
          e = this.particles[n], this.transformForMeasure.identity(), this.appendTransform(this.transformForMeasure, e.x, e.y, e.scale, e.scale, e.rotation, 0, 0, a / 2, r / 2), this.particleMeasureRect.setEmpty(), this.particleMeasureRect.width = a, this.particleMeasureRect.height = r
          var o = Region.create()
          if (o.updateRegion(this.particleMeasureRect, this.transformForMeasure), 0 == n) {
            s.setTo(o.minX, o.minY, o.maxX - o.minX, o.maxY - o.minY)
          } else {
            var h = Math.min(s.x, o.minX), l = Math.min(s.y, o.minY), c = Math.max(s.right, o.maxX),
              p = Math.max(s.bottom, o.maxY)
            s.setTo(h, l, c - h, p - l)
          }
          Region.release(o)
        }
        this.lastRect = s, t.setTo(s.x, s.y, s.width, s.height), egret.Rectangle.release(s)
      } else {
        this.lastRect && (s = this.lastRect, t.setTo(s.x, s.y, s.width, s.height), egret.Rectangle.release(s), this.lastRect = null)
      }
    }, i.prototype.setCurrentParticles = function (t) {
      if (!egret.nativeRender) for (var e = this.numParticles; t > e && this.numParticles < this.maxParticles; e++) this.addOneParticle()
    }, i.prototype.changeTexture = function (t) {
      this.texture != t && (this.texture = t, egret.nativeRender ? this.$nativeDisplayObject.setBitmapDataToParticle(t) : (this.bitmapNodeList.length = 0, this.$renderNode.drawData.length = 0))
    }, i.prototype.clear = function () {
      for (; this.particles.length;) this.removeParticle(this.particles[0])
      this.numParticles = 0, this.$renderNode.drawData.length = 0, this.bitmapNodeList.length = 0, this.$renderDirty = !0, this._pool.length = 0
    }, i.prototype.addOneParticle = function () {
      var t = this.getParticle()
      this.initParticle(t), t.totalTime > 0 && (this.particles.push(t), this.numParticles++)
    }, i.prototype.advanceParticle = function (t, e) {
      t.y -= e / 6
    }, i.prototype.$updateRenderNode = function () {
      if (!egret.nativeRender && this.numParticles > 0) {
        for (var t, e = this.texture, i = Math.round(e.$getScaleBitmapWidth()), a = Math.round(e.$getScaleBitmapHeight()), r = e.$offsetX, s = e.$offsetY, n = e.$bitmapX, o = e.$bitmapY, h = e.$bitmapWidth, l = e.$bitmapHeight, c = 0; c < this.numParticles; c++) {
          t = this.particles[c]
          var p
          this.bitmapNodeList[c] || (p = new egret.sys.BitmapNode, this.bitmapNodeList[c] = p, this.$renderNode.addNode(this.bitmapNodeList[c]), p.image = e.$bitmapData, p.imageWidth = e.$sourceWidth, p.imageHeight = e.$sourceHeight, p.drawImage(n, o, h, l, r, s, i, a)), p = this.bitmapNodeList[c], p.matrix = t.$getMatrix(i / 2, a / 2), p.blendMode = t.blendMode, p.alpha = t.alpha
        }
      }
    }, i.prototype.appendTransform = function (t, e, i, a, r, s, n, o, h, l) {
      if (s % 360) var c = s, p = egret.NumberUtils.cos(c), u = egret.NumberUtils.sin(c) else p = 1, u = 0
      return n || o ? (t.append(egret.NumberUtils.cos(o), egret.NumberUtils.sin(o), -egret.NumberUtils.sin(n), egret.NumberUtils.cos(n), e, i), t.append(p * a, u * a, -u * r, p * r, 0, 0)) : t.append(p * a, u * a, -u * r, p * r, e, i), (h || l) && (t.tx -= h * t.a + l * t.c, t.ty -= h * t.b + l * t.d), t
    }, i
  }(egret.DisplayObject)
  t.ParticleSystem = e, __reflect(e.prototype, 'particle.ParticleSystem')
}(particle || (particle = {}))
var regionPool = [], Region = function () {
  function t () {
    this.minX = 0, this.minY = 0, this.maxX = 0, this.maxY = 0, this.width = 0, this.height = 0, this.area = 0
  }

  return t.release = function (t) {
    regionPool.push(t)
  }, t.create = function () {
    var e = regionPool.pop()
    return e || (e = new t), e
  }, t.prototype.setEmpty = function () {
    this.minX = 0, this.minY = 0, this.maxX = 0, this.maxY = 0, this.width = 0, this.height = 0, this.area = 0
  }, t.prototype.updateRegion = function (t, e) {
    if (0 == t.width || 0 == t.height) return void this.setEmpty()
    var i, a, r, s, n = e, o = n.a, h = n.b, l = n.c, c = n.d, p = n.tx, u = n.ty, m = t.x, d = t.y, g = m + t.width,
      f = d + t.height
    if (1 == o && 0 == h && 0 == l && 1 == c) {
      i = m + p - 1, a = d + u - 1, r = g + p + 1, s = f + u + 1
    } else {
      var v = o * m + l * d + p, y = h * m + c * d + u, P = o * g + l * d + p, R = h * g + c * d + u,
        V = o * g + l * f + p, x = h * g + c * f + u, _ = o * m + l * f + p, C = h * m + c * f + u, b = 0
      v > P && (b = v, v = P, P = b), V > _ && (b = V, V = _, _ = b), i = (V > v ? v : V) - 1, r = (P > _ ? P : _) + 1, y > R && (b = y, y = R, R = b), x > C && (b = x, x = C, C = b), a = (x > y ? y : x) - 1, s = (R > C ? R : C) + 1
    }
    this.minX = i, this.minY = a, this.maxX = r, this.maxY = s, this.width = r - i, this.height = s - a, this.area = this.width * this.height
  }, t
}()
__reflect(Region.prototype, 'Region')
var particle
!function (t) {
  var e = function (t) {
    function e () {
      return null !== t && t.apply(this, arguments) || this
    }

    return __extends(e, t), e.prototype.reset = function () {
      t.prototype.reset.call(this), this.startX = 0, this.startY = 0, this.velocityX = 0, this.velocityY = 0, this.radialAcceleration = 0, this.tangentialAcceleration = 0, this.rotationDelta = 0, this.scaleDelta = 0
    }, e
  }(t.Particle)
  t.GravityParticle = e, __reflect(e.prototype, 'particle.GravityParticle')
}(particle || (particle = {}))
var particle
!function (t) {
  var e = function (e) {
    function i (i, a) {
      var r = e.call(this, i, 200) || this
      return r.$init = !1, r.parseConfig(a), r.emissionRate = r.lifespan / r.maxParticles, r.particleClass = t.GravityParticle, r.$init = !0, r
    }

    return __extends(i, e), i.prototype.start = function (t) {
      if (void 0 === t && (t = -1), egret.nativeRender) {
        0 != this.emissionRate && (this.emissionTime = t), this.$particleConfig[2] = t
        var i = [], a = 0
        for (var r in this.$particleConfig) i.push(a++), i.push(this.$particleConfig[r])
        this.$nativeDisplayObject.setStartToParticle(i)
      } else {
        e.prototype.start.call(this, t)
      }
    }, i.prototype.setCurrentParticles = function (t) {
      if (!(t > this.maxParticles)) {
        var e = []
        e.push(35), e.push(t), this.$nativeDisplayObject.setParticleConfig(e)
      }
    }, i.prototype.onPropertyChanges = function () {
      if (0 != this.$init) {
        var t = []
        t.push(0), this.$particleConfig[0] = this._emitterX, t.push(this._emitterX), t.push(1), this.$particleConfig[1] = this._emitterY, t.push(this._emitterY), this.relativeContentBounds && (t.push(31), this.$particleConfig[31] = this.relativeContentBounds.x, t.push(this.relativeContentBounds.x), t.push(32), this.$particleConfig[32] = this.relativeContentBounds.y, t.push(this.relativeContentBounds.y), t.push(33), this.$particleConfig[33] = this.relativeContentBounds.width, t.push(this.relativeContentBounds.width), t.push(34), this.$particleConfig[34] = this.relativeContentBounds.height, t.push(this.relativeContentBounds.height)), this.$nativeDisplayObject.setParticleConfig(t)
      }
    }, i.prototype.parseConfig = function (t) {
      function e (t) {
        return 'undefined' == typeof t ? 0 : t
      }

      if (egret.nativeRender ? (this._emitterX = e(t.emitter.x), this._emitterY = e(t.emitter.y)) : (this.emitterX = e(t.emitter.x), this.emitterY = e(t.emitter.y)), this.emitterXVariance = e(t.emitterVariance.x), this.emitterYVariance = e(t.emitterVariance.y), this.gravityX = e(t.gravity.x), this.gravityY = e(t.gravity.y), 1 == t.useEmitterRect) {
        var i = new egret.Rectangle
        i.x = e(t.emitterRect.x), i.y = e(t.emitterRect.y), i.width = e(t.emitterRect.width), i.height = e(t.emitterRect.height), this.emitterBounds = i
      }
      this.maxParticles = e(t.maxParticles), this.speed = e(t.speed), this.speedVariance = e(t.speedVariance), this.lifespan = Math.max(.01, e(t.lifespan)), this.lifespanVariance = e(t.lifespanVariance), this.emitAngle = e(t.emitAngle), this.emitAngleVariance = e(t.emitAngleVariance), this.startSize = e(t.startSize), this.startSizeVariance = e(t.startSizeVariance), this.endSize = e(t.endSize), this.endSizeVariance = e(t.endSizeVariance), this.startRotation = e(t.startRotation), this.startRotationVariance = e(t.startRotationVariance), this.endRotation = e(t.endRotation), this.endRotationVariance = e(t.endRotationVariance), this.radialAcceleration = e(t.radialAcceleration), this.radialAccelerationVariance = e(t.radialAccelerationVariance), this.tangentialAcceleration = e(t.tangentialAcceleration), this.tangentialAccelerationVariance = e(t.tangentialAccelerationVariance), this.startAlpha = e(t.startAlpha), this.startAlphaVariance = e(t.startAlphaVariance), this.endAlpha = e(t.endAlpha), this.endAlphaVariance = e(t.endAlphaVariance), egret.nativeRender ? t.blendMode && (this.particleBlendMode = t.blendMode) : this.particleBlendMode = t.blendMode, this.$particleConfig = {
        0: this.emitterX,
        1: this.emitterY,
        2: -1,
        3: this.maxParticles,
        4: this.emitterXVariance,
        5: this.emitterYVariance,
        6: this.gravityX,
        7: this.gravityY,
        8: this.speed,
        9: this.speedVariance,
        10: this.lifespan,
        11: this.lifespanVariance,
        12: this.emitAngle,
        13: this.emitAngleVariance,
        14: this.startSize,
        15: this.startSizeVariance,
        16: this.endSize,
        17: this.endSizeVariance,
        18: this.startRotation,
        19: this.startRotationVariance,
        20: this.endRotation,
        21: this.endRotationVariance,
        22: this.radialAcceleration,
        23: this.radialAccelerationVariance,
        24: this.tangentialAcceleration,
        25: this.tangentialAccelerationVariance,
        26: this.startAlpha,
        27: this.startAlphaVariance,
        28: this.endAlpha,
        29: this.endAlphaVariance,
        30: this.particleBlendMode,
        31: t.useEmitterRect ? this.relativeContentBounds.x : 0,
        32: t.useEmitterRect ? this.relativeContentBounds.y : 0,
        33: t.useEmitterRect ? this.relativeContentBounds.width : 0,
        34: t.useEmitterRect ? this.relativeContentBounds.height : 0,
        35: 0
      }
    }, i.prototype.initParticle = function (t) {
      var e = t, a = i.getValue(this.lifespan, this.lifespanVariance)
      if (e.currentTime = 0, e.totalTime = a > 0 ? a : 0, !(0 >= a)) {
        e.x = i.getValue(this.emitterX, this.emitterXVariance), e.y = i.getValue(this.emitterY, this.emitterYVariance), e.startX = this.emitterX, e.startY = this.emitterY
        var r = i.getValue(this.emitAngle, this.emitAngleVariance), s = i.getValue(this.speed, this.speedVariance)
        e.velocityX = s * egret.NumberUtils.cos(r), e.velocityY = s * egret.NumberUtils.sin(r), e.radialAcceleration = i.getValue(this.radialAcceleration, this.radialAccelerationVariance), e.tangentialAcceleration = i.getValue(this.tangentialAcceleration, this.tangentialAccelerationVariance)
        var n = i.getValue(this.startSize, this.startSizeVariance)
        .1 > n && (n = .1)
        var o = i.getValue(this.endSize, this.endSizeVariance)
        .1 > o && (o = .1)
        var h = this.texture.textureWidth
        e.scale = n / h, e.scaleDelta = (o - n) / a / h
        var l = i.getValue(this.startRotation, this.startRotationVariance),
          c = i.getValue(this.endRotation, this.endRotationVariance)
        e.rotation = l, e.rotationDelta = (c - l) / a
        var p = i.getValue(this.startAlpha, this.startAlphaVariance),
          u = i.getValue(this.endAlpha, this.endAlphaVariance)
        e.alpha = p, e.alphaDelta = (u - p) / a, e.blendMode = this.particleBlendMode
      }
    }, i.getValue = function (t, e) {
      return t + e * (2 * Math.random() - 1)
    }, i.prototype.advanceParticle = function (t, e) {
      var i = t
      e /= 1e3
      var a = i.totalTime - i.currentTime
      e = a > e ? e : a, i.currentTime += e
      var r = i.x - i.startX, s = i.y - i.startY, n = Math.sqrt(r * r + s * s)
      .01 > n && (n = .01)
      var o = r / n, h = s / n, l = o, c = h
      o *= i.radialAcceleration, h *= i.radialAcceleration
      var p = l
      l = -c * i.tangentialAcceleration, c = p * i.tangentialAcceleration, i.velocityX += e * (this.gravityX + o + l), i.velocityY += e * (this.gravityY + h + c), i.x += i.velocityX * e, i.y += i.velocityY * e, i.scale += i.scaleDelta * e * 1e3, i.scale < 0 && (i.scale = 0), i.rotation += i.rotationDelta * e * 1e3, i.alpha += i.alphaDelta * e * 1e3
    }, i
  }(t.ParticleSystem)
  t.GravityParticleSystem = e, __reflect(e.prototype, 'particle.GravityParticleSystem')
}(particle || (particle = {}))/*! @sentry/browser 5.30.0 (6de2dd4) | https://github.com/getsentry/sentry-javascript */
var Sentry = function (t) {
  var n = function (t, r) {
    return (n = Object.setPrototypeOf || {__proto__: []} instanceof Array && function (t, n) {
      t.__proto__ = n
    } || function (t, n) {
      for (var r in n) n.hasOwnProperty(r) && (t[r] = n[r])
    })(t, r)
  }

  function r (t, r) {
    function e () {
      this.constructor = t
    }

    n(t, r), t.prototype = null === r ? Object.create(r) : (e.prototype = r.prototype, new e)
  }

  var e, i, o, u, s, c = function () {
    return (c = Object.assign || function (t) {
      for (var n, r = 1, e = arguments.length; r < e; r++) for (var i in n = arguments[r]) Object.prototype.hasOwnProperty.call(n, i) && (t[i] = n[i])
      return t
    }).apply(this, arguments)
  }

  function a (t) {
    var n = 'function' == typeof Symbol && t[Symbol.iterator], r = 0
    return n ? n.call(t) : {
      next: function () {
        return t && r >= t.length && (t = void 0), {value: t && t[r++], done: !t}
      }
    }
  }

  function f (t, n) {
    var r = 'function' == typeof Symbol && t[Symbol.iterator]
    if (!r) return t
    var e, i, o = r.call(t), u = []
    try {
      for (; (void 0 === n || n-- > 0) && !(e = o.next()).done;) u.push(e.value)
    } catch (t) {
      i = {error: t}
    } finally {
      try {
        e && !e.done && (r = o.return) && r.call(o)
      } finally {
        if (i) throw i.error
      }
    }
    return u
  }

  function h () {
    for (var t = [], n = 0; n < arguments.length; n++) t = t.concat(f(arguments[n]))
    return t
  }

  function v (t) {
    switch (Object.prototype.toString.call(t)) {
      case'[object Error]':
      case'[object Exception]':
      case'[object DOMException]':
        return !0
      default:
        return E(t, Error)
    }
  }

  function l (t) {
    return '[object ErrorEvent]' === Object.prototype.toString.call(t)
  }

  function d (t) {
    return '[object DOMError]' === Object.prototype.toString.call(t)
  }

  function p (t) {
    return '[object String]' === Object.prototype.toString.call(t)
  }

  function y (t) {
    return null === t || 'object' != typeof t && 'function' != typeof t
  }

  function m (t) {
    return '[object Object]' === Object.prototype.toString.call(t)
  }

  function b (t) {
    return 'undefined' != typeof Event && E(t, Event)
  }

  function w (t) {
    return 'undefined' != typeof Element && E(t, Element)
  }

  function g (t) {
    return Boolean(t && t.then && 'function' == typeof t.then)
  }

  function E (t, n) {
    try {
      return t instanceof n
    } catch (t) {
      return !1
    }
  }

  function x (t) {
    try {
      for (var n = t, r = [], e = 0, i = 0, o = ' > '.length, u = void 0; n && e++ < 5 && !("html" === (u = j(n)) || e > 1 && i + r.length * o + u.length >= 80);) r.push(u), i += u.length, n = n.parentNode
      return r.reverse().join(' > ')
    } catch (t) {
      return '<unknown>'
    }
  }

  function j (t) {
    var n, r, e, i, o, u = t, s = []
    if (!u || !u.tagName) return ''
    if (s.push(u.tagName.toLowerCase()), u.id && s.push('#' + u.id), (n = u.className) && p(n)) for (r = n.split(/\s+/), o = 0; o < r.length; o++) s.push('.' + r[o])
    var c = ['type', 'name', 'title', 'alt']
    for (o = 0; o < c.length; o++) e = c[o], (i = u.getAttribute(e)) && s.push('[' + e + '="' + i + '"]')
    return s.join('')
  }

  !function (t) {
    t[t.None = 0] = 'None', t[t.Error = 1] = 'Error', t[t.Debug = 2] = 'Debug', t[t.Verbose = 3] = 'Verbose'
  }(e || (e = {})), function (t) {
    t.Ok = 'ok', t.Exited = 'exited', t.Crashed = 'crashed', t.Abnormal = 'abnormal'
  }(i || (i = {})), (o = t.Severity || (t.Severity = {})).Fatal = 'fatal', o.Error = 'error', o.Warning = 'warning', o.Log = 'log', o.Info = 'info', o.Debug = 'debug', o.Critical = 'critical', function (t) {
    t.fromString = function (n) {
      switch (n) {
        case'debug':
          return t.Debug
        case'info':
          return t.Info
        case'warn':
        case'warning':
          return t.Warning
        case'error':
          return t.Error
        case'fatal':
          return t.Fatal
        case'critical':
          return t.Critical
        case'log':
        default:
          return t.Log
      }
    }
  }(t.Severity || (t.Severity = {})), (u = t.Status || (t.Status = {})).Unknown = 'unknown', u.Skipped = 'skipped', u.Success = 'success', u.RateLimit = 'rate_limit', u.Invalid = 'invalid', u.Failed = 'failed', function (t) {
    t.fromHttpCode = function (n) {
      return n >= 200 && n < 300 ? t.Success : 429 === n ? t.RateLimit : n >= 400 && n < 500 ? t.Invalid : n >= 500 ? t.Failed : t.Unknown
    }
  }(t.Status || (t.Status = {})), function (t) {
    t.Explicit = 'explicitly_set', t.Sampler = 'client_sampler', t.Rate = 'client_rate', t.Inheritance = 'inheritance'
  }(s || (s = {}))
  var _ = Object.setPrototypeOf || ({__proto__: []} instanceof Array ? function (t, n) {
    return t.__proto__ = n, t
  } : function (t, n) {
    for (var r in n) t.hasOwnProperty(r) || (t[r] = n[r])
    return t
  })
  var k = function (t) {
    function n (n) {
      var r = this.constructor, e = t.call(this, n) || this
      return e.message = n, e.name = r.prototype.constructor.name, _(e, r.prototype), e
    }

    return r(n, t), n
  }(Error), S = /^(?:(\w+):)\/\/(?:(\w+)(?::(\w+))?@)([\w.-]+)(?::(\d+))?\/(.+)/, O = function () {
    function t (t) {
      'string' == typeof t ? this.t(t) : this.i(t), this.o()
    }

    return t.prototype.toString = function (t) {
      void 0 === t && (t = !1)
      var n = this, r = n.host, e = n.path, i = n.pass, o = n.port, u = n.projectId
      return n.protocol + '://' + n.user + (t && i ? ':' + i : '') + '@' + r + (o ? ':' + o : '') + '/' + (e ? e + '/' : e) + u
    }, t.prototype.t = function (t) {
      var n = S.exec(t)
      if (!n) throw new k('Invalid Dsn')
      var r = f(n.slice(1), 6), e = r[0], i = r[1], o = r[2], u = void 0 === o ? '' : o, s = r[3], c = r[4],
        a = void 0 === c ? '' : c, h = '', v = r[5], l = v.split('/')
      if (l.length > 1 && (h = l.slice(0, -1).join('/'), v = l.pop()), v) {
        var d = v.match(/^\d+/)
        d && (v = d[0])
      }
      this.i({host: s, pass: u, path: h, projectId: v, port: a, protocol: e, user: i})
    }, t.prototype.i = function (t) {
      this.protocol = t.protocol, this.user = t.user, this.pass = t.pass || '', this.host = t.host, this.port = t.port || '', this.path = t.path || '', this.projectId = t.projectId
    }, t.prototype.o = function () {
      var t = this
      if (['protocol', 'user', 'host', 'projectId'].forEach(function (n) {
        if (!t[n]) throw new k('Invalid Dsn: ' + n + ' missing')
      }), !this.projectId.match(/^\d+$/)) {
        throw new k('Invalid Dsn: Invalid projectId ' + this.projectId)
      }
      if ('http' !== this.protocol && 'https' !== this.protocol) throw new k('Invalid Dsn: Invalid protocol ' + this.protocol)
      if (this.port && isNaN(parseInt(this.port, 10))) throw new k('Invalid Dsn: Invalid port ' + this.port)
    }, t
  }(), T = function () {
    function t () {
      this.u = 'function' == typeof WeakSet, this.s = this.u ? new WeakSet : []
    }

    return t.prototype.memoize = function (t) {
      if (this.u) return !!this.s.has(t) || (this.s.add(t), !1)
      for (var n = 0; n < this.s.length; n++) {
        if (this.s[n] === t) return !0
      }
      return this.s.push(t), !1
    }, t.prototype.unmemoize = function (t) {
      if (this.u) {
        this.s.delete(t)
      } else {
        for (var n = 0; n < this.s.length; n++) {
          if (this.s[n] === t) {
            this.s.splice(n, 1)
            break
          }
        }
      }
    }, t
  }(), D = '<anonymous>'

  function R (t) {
    try {
      return t && 'function' == typeof t && t.name || D
    } catch (t) {
      return D
    }
  }

  function I (t, n) {
    return void 0 === n && (n = 0), 'string' != typeof t || 0 === n ? t : t.length <= n ? t : t.substr(0, n) + '...'
  }

  function N (t, n) {
    if (!Array.isArray(t)) return ''
    for (var r = [], e = 0; e < t.length; e++) {
      var i = t[e]
      try {
        r.push(String(i))
      } catch (t) {
        r.push('[value cannot be serialized]')
      }
    }
    return r.join(n)
  }

  function M (t, n) {
    return !!p(t) && (r = n, '[object RegExp]' === Object.prototype.toString.call(r) ? n.test(t) : 'string' == typeof n && -1 !== t.indexOf(n))
    var r
  }

  function A (t, n, r) {
    if (n in t) {
      var e = t[n], i = r(e)
      if ('function' == typeof i) {
        try {
          i.prototype = i.prototype || {}, Object.defineProperties(i, {__sentry_original__: {enumerable: !1, value: e}})
        } catch (t) {
        }
      }
      t[n] = i
    }
  }

  function C (t) {
    if (v(t)) {
      var n = t, r = {message: n.message, name: n.name, stack: n.stack}
      for (var e in n) Object.prototype.hasOwnProperty.call(n, e) && (r[e] = n[e])
      return r
    }
    if (b(t)) {
      var i = t, o = {}
      o.type = i.type
      try {
        o.target = w(i.target) ? x(i.target) : Object.prototype.toString.call(i.target)
      } catch (t) {
        o.target = '<unknown>'
      }
      try {
        o.currentTarget = w(i.currentTarget) ? x(i.currentTarget) : Object.prototype.toString.call(i.currentTarget)
      } catch (t) {
        o.currentTarget = '<unknown>'
      }
      for (var e in 'undefined' != typeof CustomEvent && E(t, CustomEvent) && (o.detail = i.detail), i) Object.prototype.hasOwnProperty.call(i, e) && (o[e] = i)
      return o
    }
    return t
  }

  function q (t) {
    return function (t) {
      return ~-encodeURI(t).split(/%..|./).length
    }(JSON.stringify(t))
  }

  function L (t, n, r) {
    void 0 === n && (n = 3), void 0 === r && (r = 102400)
    var e = P(t, n)
    return q(e) > r ? L(t, n - 1, r) : e
  }

  function U (t, n) {
    return 'domain' === n && t && 'object' == typeof t && t.h ? '[Domain]' : 'domainEmitter' === n ? '[DomainEmitter]' : 'undefined' != typeof global && t === global ? '[Global]' : 'undefined' != typeof window && t === window ? '[Window]' : 'undefined' != typeof document && t === document ? '[Document]' : m(r = t) && 'nativeEvent' in r && 'preventDefault' in r && 'stopPropagation' in r ? '[SyntheticEvent]' : 'number' == typeof t && t != t ? '[NaN]' : void 0 === t ? '[undefined]' : 'function' == typeof t ? '[Function: ' + R(t) + ']' : 'symbol' == typeof t ? '[' + String(t) + ']' : 'bigint' == typeof t ? '[BigInt: ' + String(t) + ']' : t
    var r
  }

  function H (t, n, r, e) {
    if (void 0 === r && (r = 1 / 0), void 0 === e && (e = new T), 0 === r) {
      return function (t) {
        var n = Object.prototype.toString.call(t)
        if ('string' == typeof t) return t
        if ('[object Object]' === n) return '[Object]'
        if ('[object Array]' === n) return '[Array]'
        var r = U(t)
        return y(r) ? r : n
      }(n)
    }
    if (null != n && 'function' == typeof n.toJSON) return n.toJSON()
    var i = U(n, t)
    if (y(i)) return i
    var o = C(n), u = Array.isArray(n) ? [] : {}
    if (e.memoize(n)) return '[Circular ~]'
    for (var s in o) Object.prototype.hasOwnProperty.call(o, s) && (u[s] = H(s, o[s], r - 1, e))
    return e.unmemoize(n), u
  }

  function P (t, n) {
    try {
      return JSON.parse(JSON.stringify(t, function (t, r) {
        return H(t, r, n)
      }))
    } catch (t) {
      return '**non-serializable**'
    }
  }

  function F (t, n) {
    void 0 === n && (n = 40)
    var r = Object.keys(C(t))
    if (r.sort(), !r.length) return '[object has no keys]'
    if (r[0].length >= n) return I(r[0], n)
    for (var e = r.length; e > 0; e--) {
      var i = r.slice(0, e).join(', ')
      if (!(i.length > n)) return e === r.length ? i : I(i, n)
    }
    return ''
  }

  function X (t) {
    var n, r
    if (m(t)) {
      var e = t, i = {}
      try {
        for (var o = a(Object.keys(e)), u = o.next(); !u.done; u = o.next()) {
          var s = u.value
          void 0 !== e[s] && (i[s] = X(e[s]))
        }
      } catch (t) {
        n = {error: t}
      } finally {
        try {
          u && !u.done && (r = o.return) && r.call(o)
        } finally {
          if (n) throw n.error
        }
      }
      return i
    }
    return Array.isArray(t) ? t.map(X) : t
  }

  function B () {
    return '[object process]' === Object.prototype.toString.call('undefined' != typeof process ? process : 0)
  }

  var J = {}

  function W () {
    return B() ? global : 'undefined' != typeof window ? window : 'undefined' != typeof self ? self : J
  }

  function $ () {
    var t = W(), n = t.crypto || t.msCrypto
    if (void 0 !== n && n.getRandomValues) {
      var r = new Uint16Array(8)
      n.getRandomValues(r), r[3] = 4095 & r[3] | 16384, r[4] = 16383 & r[4] | 32768
      var e = function (t) {
        for (var n = t.toString(16); n.length < 4;) n = '0' + n
        return n
      }
      return e(r[0]) + e(r[1]) + e(r[2]) + e(r[3]) + e(r[4]) + e(r[5]) + e(r[6]) + e(r[7])
    }
    return 'xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx'.replace(/[xy]/g, function (t) {
      var n = 16 * Math.random() | 0
      return ('x' === t ? n : 3 & n | 8).toString(16)
    })
  }

  function G (t) {
    if (!t) return {}
    var n = t.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/)
    if (!n) return {}
    var r = n[6] || '', e = n[8] || ''
    return {host: n[4], path: n[5], protocol: n[2], relative: n[5] + r + e}
  }

  function z (t) {
    if (t.message) return t.message
    if (t.exception && t.exception.values && t.exception.values[0]) {
      var n = t.exception.values[0]
      return n.type && n.value ? n.type + ': ' + n.value : n.type || n.value || t.event_id || '<unknown>'
    }
    return t.event_id || '<unknown>'
  }

  function V (t) {
    var n = W()
    if (!('console' in n)) return t()
    var r = n.console, e = {};
    ['debug', 'info', 'warn', 'error', 'log', 'assert'].forEach(function (t) {
      t in n.console && r[t].__sentry_original__ && (e[t] = r[t], r[t] = r[t].__sentry_original__)
    })
    var i = t()
    return Object.keys(e).forEach(function (t) {
      r[t] = e[t]
    }), i
  }

  function K (t, n, r) {
    t.exception = t.exception || {}, t.exception.values = t.exception.values || [], t.exception.values[0] = t.exception.values[0] || {}, t.exception.values[0].value = t.exception.values[0].value || n || '', t.exception.values[0].type = t.exception.values[0].type || r || 'Error'
  }

  function Q (t, n) {
    void 0 === n && (n = {})
    try {
      t.exception.values[0].mechanism = t.exception.values[0].mechanism || {}, Object.keys(n).forEach(function (r) {
        t.exception.values[0].mechanism[r] = n[r]
      })
    } catch (t) {
    }
  }

  var Y = 6e4
  var Z = W(), tt = 'Sentry Logger ', nt = function () {
    function t () {
      this.v = !1
    }

    return t.prototype.disable = function () {
      this.v = !1
    }, t.prototype.enable = function () {
      this.v = !0
    }, t.prototype.log = function () {
      for (var t = [], n = 0; n < arguments.length; n++) t[n] = arguments[n]
      this.v && V(function () {
        Z.console.log(tt + '[Log]: ' + t.join(' '))
      })
    }, t.prototype.warn = function () {
      for (var t = [], n = 0; n < arguments.length; n++) t[n] = arguments[n]
      this.v && V(function () {
        Z.console.warn(tt + '[Warn]: ' + t.join(' '))
      })
    }, t.prototype.error = function () {
      for (var t = [], n = 0; n < arguments.length; n++) t[n] = arguments[n]
      this.v && V(function () {
        Z.console.error(tt + '[Error]: ' + t.join(' '))
      })
    }, t
  }()
  Z.__SENTRY__ = Z.__SENTRY__ || {}
  var rt = Z.__SENTRY__.logger || (Z.__SENTRY__.logger = new nt)

  function et () {
    if (!('fetch' in W())) return !1
    try {
      return new Headers, new Request(''), new Response, !0
    } catch (t) {
      return !1
    }
  }

  function it (t) {
    return t && /^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(t.toString())
  }

  function ot () {
    if (!et()) return !1
    try {
      return new Request('_', {referrerPolicy: 'origin'}), !0
    } catch (t) {
      return !1
    }
  }

  var ut, st = W(), ct = {}, at = {}

  function ft (t) {
    if (!at[t]) {
      switch (at[t] = !0, t) {
        case'console':
          !function () {
            if (!('console' in st)) return;
            ['debug', 'info', 'warn', 'error', 'log', 'assert'].forEach(function (t) {
              t in st.console && A(st.console, t, function (n) {
                return function () {
                  for (var r = [], e = 0; e < arguments.length; e++) r[e] = arguments[e]
                  vt('console', {args: r, level: t}), n && Function.prototype.apply.call(n, st.console, r)
                }
              })
            })
          }()
          break
        case'dom':
          !function () {
            if (!('document' in st)) return
            st.document.addEventListener('click', wt('click', vt.bind(null, 'dom')), !1), st.document.addEventListener('keypress', gt(vt.bind(null, 'dom')), !1), ['EventTarget', 'Node'].forEach(function (t) {
              var n = st[t] && st[t].prototype
              n && n.hasOwnProperty && n.hasOwnProperty('addEventListener') && (A(n, 'addEventListener', function (t) {
                return function (n, r, e) {
                  return r && r.handleEvent ? ('click' === n && A(r, 'handleEvent', function (t) {
                    return function (n) {
                      return wt('click', vt.bind(null, 'dom'))(n), t.call(this, n)
                    }
                  }), 'keypress' === n && A(r, 'handleEvent', function (t) {
                    return function (n) {
                      return gt(vt.bind(null, 'dom'))(n), t.call(this, n)
                    }
                  })) : ('click' === n && wt('click', vt.bind(null, 'dom'), !0)(this), 'keypress' === n && gt(vt.bind(null, 'dom'))(this)), t.call(this, n, r, e)
                }
              }), A(n, 'removeEventListener', function (t) {
                return function (n, r, e) {
                  try {
                    t.call(this, n, r.__sentry_wrapped__, e)
                  } catch (t) {
                  }
                  return t.call(this, n, r, e)
                }
              }))
            })
          }()
          break
        case'xhr':
          !function () {
            if (!('XMLHttpRequest' in st)) return
            var t = [], n = [], r = XMLHttpRequest.prototype
            A(r, 'open', function (r) {
              return function () {
                for (var e = [], i = 0; i < arguments.length; i++) e[i] = arguments[i]
                var o = this, u = e[1]
                o.__sentry_xhr__ = {
                  method: p(e[0]) ? e[0].toUpperCase() : e[0],
                  url: e[1]
                }, p(u) && 'POST' === o.__sentry_xhr__.method && u.match(/sentry_key/) && (o.__sentry_own_request__ = !0)
                var s = function () {
                  if (4 === o.readyState) {
                    try {
                      o.__sentry_xhr__ && (o.__sentry_xhr__.status_code = o.status)
                    } catch (t) {
                    }
                    try {
                      var r = t.indexOf(o)
                      if (-1 !== r) {
                        t.splice(r)
                        var i = n.splice(r)[0]
                        o.__sentry_xhr__ && void 0 !== i[0] && (o.__sentry_xhr__.body = i[0])
                      }
                    } catch (t) {
                    }
                    vt('xhr', {args: e, endTimestamp: Date.now(), startTimestamp: Date.now(), xhr: o})
                  }
                }
                return 'onreadystatechange' in o && 'function' == typeof o.onreadystatechange ? A(o, 'onreadystatechange', function (t) {
                  return function () {
                    for (var n = [], r = 0; r < arguments.length; r++) n[r] = arguments[r]
                    return s(), t.apply(o, n)
                  }
                }) : o.addEventListener('readystatechange', s), r.apply(o, e)
              }
            }), A(r, 'send', function (r) {
              return function () {
                for (var e = [], i = 0; i < arguments.length; i++) e[i] = arguments[i]
                return t.push(this), n.push(e), vt('xhr', {
                  args: e,
                  startTimestamp: Date.now(),
                  xhr: this
                }), r.apply(this, e)
              }
            })
          }()
          break
        case'fetch':
          !function () {
            if (!function () {
              if (!et()) return !1
              var t = W()
              if (it(t.fetch)) return !0
              var n = !1, r = t.document
              if (r && 'function' == typeof r.createElement) {
                try {
                  var e = r.createElement('iframe')
                  e.hidden = !0, r.head.appendChild(e), e.contentWindow && e.contentWindow.fetch && (n = it(e.contentWindow.fetch)), r.head.removeChild(e)
                } catch (t) {
                  rt.warn('Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ', t)
                }
              }
              return n
            }()) {
              return
            }
            A(st, 'fetch', function (t) {
              return function () {
                for (var n = [], r = 0; r < arguments.length; r++) n[r] = arguments[r]
                var e = {args: n, fetchData: {method: lt(n), url: dt(n)}, startTimestamp: Date.now()}
                return vt('fetch', c({}, e)), t.apply(st, n).then(function (t) {
                  return vt('fetch', c(c({}, e), {endTimestamp: Date.now(), response: t})), t
                }, function (t) {
                  throw vt('fetch', c(c({}, e), {endTimestamp: Date.now(), error: t})), t
                })
              }
            })
          }()
          break
        case'history':
          !function () {
            if (t = W(), n = t.chrome, r = n && n.app && n.app.runtime, e = 'history' in t && !!t.history.pushState && !!t.history.replaceState, r || !e) return
            var t, n, r, e
            var i = st.onpopstate

            function o (t) {
              return function () {
                for (var n = [], r = 0; r < arguments.length; r++) n[r] = arguments[r]
                var e = n.length > 2 ? n[2] : void 0
                if (e) {
                  var i = ut, o = String(e)
                  ut = o, vt('history', {from: i, to: o})
                }
                return t.apply(this, n)
              }
            }

            st.onpopstate = function () {
              for (var t = [], n = 0; n < arguments.length; n++) t[n] = arguments[n]
              var r = st.location.href, e = ut
              if (ut = r, vt('history', {from: e, to: r}), i) return i.apply(this, t)
            }, A(st.history, 'pushState', o), A(st.history, 'replaceState', o)
          }()
          break
        case'error':
          Et = st.onerror, st.onerror = function (t, n, r, e, i) {
            return vt('error', {column: e, error: i, line: r, msg: t, url: n}), !!Et && Et.apply(this, arguments)
          }
          break
        case'unhandledrejection':
          jt = st.onunhandledrejection, st.onunhandledrejection = function (t) {
            return vt('unhandledrejection', t), !jt || jt.apply(this, arguments)
          }
          break
        default:
          rt.warn('unknown instrumentation type:', t)
      }
    }
  }

  function ht (t) {
    t && 'string' == typeof t.type && 'function' == typeof t.callback && (ct[t.type] = ct[t.type] || [], ct[t.type].push(t.callback), ft(t.type))
  }

  function vt (t, n) {
    var r, e
    if (t && ct[t]) {
      try {
        for (var i = a(ct[t] || []), o = i.next(); !o.done; o = i.next()) {
          var u = o.value
          try {
            u(n)
          } catch (n) {
            rt.error('Error while triggering instrumentation handler.\nType: ' + t + '\nName: ' + R(u) + '\nError: ' + n)
          }
        }
      } catch (t) {
        r = {error: t}
      } finally {
        try {
          o && !o.done && (e = i.return) && e.call(i)
        } finally {
          if (r) throw r.error
        }
      }
    }
  }

  function lt (t) {
    return void 0 === t && (t = []), 'Request' in st && E(t[0], Request) && t[0].method ? String(t[0].method).toUpperCase() : t[1] && t[1].method ? String(t[1].method).toUpperCase() : 'GET'
  }

  function dt (t) {
    return void 0 === t && (t = []), 'string' == typeof t[0] ? t[0] : 'Request' in st && E(t[0], Request) ? t[0].url : String(t[0])
  }

  var pt, yt, mt = 1e3, bt = 0

  function wt (t, n, r) {
    return void 0 === r && (r = !1), function (e) {
      pt = void 0, e && yt !== e && (yt = e, bt && clearTimeout(bt), r ? bt = setTimeout(function () {
        n({event: e, name: t})
      }) : n({event: e, name: t}))
    }
  }

  function gt (t) {
    return function (n) {
      var r
      try {
        r = n.target
      } catch (t) {
        return
      }
      var e = r && r.tagName
      e && ('INPUT' === e || 'TEXTAREA' === e || r.isContentEditable) && (pt || wt('input', t)(n), clearTimeout(pt), pt = setTimeout(function () {
        pt = void 0
      }, mt))
    }
  }

  var Et = null
  var xt, jt = null
  !function (t) {
    t.PENDING = 'PENDING', t.RESOLVED = 'RESOLVED', t.REJECTED = 'REJECTED'
  }(xt || (xt = {}))
  var _t = function () {
    function t (t) {
      var n = this
      this.l = xt.PENDING, this.p = [], this.m = function (t) {
        n.g(xt.RESOLVED, t)
      }, this.j = function (t) {
        n.g(xt.REJECTED, t)
      }, this.g = function (t, r) {
        n.l === xt.PENDING && (g(r) ? r.then(n.m, n.j) : (n.l = t, n._ = r, n.k()))
      }, this.S = function (t) {
        n.p = n.p.concat(t), n.k()
      }, this.k = function () {
        if (n.l !== xt.PENDING) {
          var t = n.p.slice()
          n.p = [], t.forEach(function (t) {
            t.done || (n.l === xt.RESOLVED && t.onfulfilled && t.onfulfilled(n._), n.l === xt.REJECTED && t.onrejected && t.onrejected(n._), t.done = !0)
          })
        }
      }
      try {
        t(this.m, this.j)
      } catch (t) {
        this.j(t)
      }
    }

    return t.resolve = function (n) {
      return new t(function (t) {
        t(n)
      })
    }, t.reject = function (n) {
      return new t(function (t, r) {
        r(n)
      })
    }, t.all = function (n) {
      return new t(function (r, e) {
        if (Array.isArray(n)) {
          if (0 !== n.length) {
            var i = n.length, o = []
            n.forEach(function (n, u) {
              t.resolve(n).then(function (t) {
                o[u] = t, 0 === (i -= 1) && r(o)
              }).then(null, e)
            })
          } else {
            r([])
          }
        } else {
          e(new TypeError('Promise.all requires an array as input.'))
        }
      })
    }, t.prototype.then = function (n, r) {
      var e = this
      return new t(function (t, i) {
        e.S({
          done: !1, onfulfilled: function (r) {
            if (n) {
              try {
                return void t(n(r))
              } catch (t) {
                return void i(t)
              }
            } else {
              t(r)
            }
          }, onrejected: function (n) {
            if (r) {
              try {
                return void t(r(n))
              } catch (t) {
                return void i(t)
              }
            } else {
              i(n)
            }
          }
        })
      })
    }, t.prototype.catch = function (t) {
      return this.then(function (t) {
        return t
      }, t)
    }, t.prototype.finally = function (n) {
      var r = this
      return new t(function (t, e) {
        var i, o
        return r.then(function (t) {
          o = !1, i = t, n && n()
        }, function (t) {
          o = !0, i = t, n && n()
        }).then(function () {
          o ? e(i) : t(i)
        })
      })
    }, t.prototype.toString = function () {
      return '[object SyncPromise]'
    }, t
  }(), kt = function () {
    function t (t) {
      this.O = t, this.T = []
    }

    return t.prototype.isReady = function () {
      return void 0 === this.O || this.length() < this.O
    }, t.prototype.add = function (t) {
      var n = this
      return this.isReady() ? (-1 === this.T.indexOf(t) && this.T.push(t), t.then(function () {
        return n.remove(t)
      }).then(null, function () {
        return n.remove(t).then(null, function () {
        })
      }), t) : _t.reject(new k('Not adding Promise due to buffer limit reached.'))
    }, t.prototype.remove = function (t) {
      return this.T.splice(this.T.indexOf(t), 1)[0]
    }, t.prototype.length = function () {
      return this.T.length
    }, t.prototype.drain = function (t) {
      var n = this
      return new _t(function (r) {
        var e = setTimeout(function () {
          t && t > 0 && r(!1)
        }, t)
        _t.all(n.T).then(function () {
          clearTimeout(e), r(!0)
        }).then(null, function () {
          r(!0)
        })
      })
    }, t
  }(), St = {
    nowSeconds: function () {
      return Date.now() / 1e3
    }
  }
  var Ot = B() ? function () {
    try {
      return (t = module, n = 'perf_hooks', t.require(n)).performance
    } catch (t) {
      return
    }
    var t, n
  }() : function () {
    var t = W().performance
    if (t && t.now) {
      return {
        now: function () {
          return t.now()
        }, timeOrigin: Date.now() - t.now()
      }
    }
  }(), Tt = void 0 === Ot ? St : {
    nowSeconds: function () {
      return (Ot.timeOrigin + Ot.now()) / 1e3
    }
  }, Dt = St.nowSeconds.bind(St), Rt = (Tt.nowSeconds.bind(Tt), function () {
    var t = W().performance
    if (t) t.timeOrigin ? t.timeOrigin : t.timing && t.timing.navigationStart || Date.now()
  }(), function () {
    function t () {
      this.D = !1, this.R = [], this.I = [], this.N = [], this.M = {}, this.A = {}, this.C = {}, this.q = {}
    }

    return t.clone = function (n) {
      var r = new t
      return n && (r.N = h(n.N), r.A = c({}, n.A), r.C = c({}, n.C), r.q = c({}, n.q), r.M = n.M, r.L = n.L, r.U = n.U, r.H = n.H, r.P = n.P, r.F = n.F, r.I = h(n.I)), r
    }, t.prototype.addScopeListener = function (t) {
      this.R.push(t)
    }, t.prototype.addEventProcessor = function (t) {
      return this.I.push(t), this
    }, t.prototype.setUser = function (t) {
      return this.M = t || {}, this.H && this.H.update({user: t}), this.X(), this
    }, t.prototype.getUser = function () {
      return this.M
    }, t.prototype.setTags = function (t) {
      return this.A = c(c({}, this.A), t), this.X(), this
    }, t.prototype.setTag = function (t, n) {
      var r
      return this.A = c(c({}, this.A), ((r = {})[t] = n, r)), this.X(), this
    }, t.prototype.setExtras = function (t) {
      return this.C = c(c({}, this.C), t), this.X(), this
    }, t.prototype.setExtra = function (t, n) {
      var r
      return this.C = c(c({}, this.C), ((r = {})[t] = n, r)), this.X(), this
    }, t.prototype.setFingerprint = function (t) {
      return this.F = t, this.X(), this
    }, t.prototype.setLevel = function (t) {
      return this.L = t, this.X(), this
    }, t.prototype.setTransactionName = function (t) {
      return this.P = t, this.X(), this
    }, t.prototype.setTransaction = function (t) {
      return this.setTransactionName(t)
    }, t.prototype.setContext = function (t, n) {
      var r
      return null === n ? delete this.q[t] : this.q = c(c({}, this.q), ((r = {})[t] = n, r)), this.X(), this
    }, t.prototype.setSpan = function (t) {
      return this.U = t, this.X(), this
    }, t.prototype.getSpan = function () {
      return this.U
    }, t.prototype.getTransaction = function () {
      var t, n, r, e, i = this.getSpan()
      return (null === (t = i) || void 0 === t ? void 0 : t.transaction) ? null === (n = i) || void 0 === n ? void 0 : n.transaction : (null === (e = null === (r = i) || void 0 === r ? void 0 : r.spanRecorder) || void 0 === e ? void 0 : e.spans[0]) ? i.spanRecorder.spans[0] : void 0
    }, t.prototype.setSession = function (t) {
      return t ? this.H = t : delete this.H, this.X(), this
    }, t.prototype.getSession = function () {
      return this.H
    }, t.prototype.update = function (n) {
      if (!n) return this
      if ('function' == typeof n) {
        var r = n(this)
        return r instanceof t ? r : this
      }
      return n instanceof t ? (this.A = c(c({}, this.A), n.A), this.C = c(c({}, this.C), n.C), this.q = c(c({}, this.q), n.q), n.M && Object.keys(n.M).length && (this.M = n.M), n.L && (this.L = n.L), n.F && (this.F = n.F)) : m(n) && (n = n, this.A = c(c({}, this.A), n.tags), this.C = c(c({}, this.C), n.extra), this.q = c(c({}, this.q), n.contexts), n.user && (this.M = n.user), n.level && (this.L = n.level), n.fingerprint && (this.F = n.fingerprint)), this
    }, t.prototype.clear = function () {
      return this.N = [], this.A = {}, this.C = {}, this.M = {}, this.q = {}, this.L = void 0, this.P = void 0, this.F = void 0, this.U = void 0, this.H = void 0, this.X(), this
    }, t.prototype.addBreadcrumb = function (t, n) {
      var r = c({timestamp: Dt()}, t)
      return this.N = void 0 !== n && n >= 0 ? h(this.N, [r]).slice(-n) : h(this.N, [r]), this.X(), this
    }, t.prototype.clearBreadcrumbs = function () {
      return this.N = [], this.X(), this
    }, t.prototype.applyToEvent = function (t, n) {
      var r
      if (this.C && Object.keys(this.C).length && (t.extra = c(c({}, this.C), t.extra)), this.A && Object.keys(this.A).length && (t.tags = c(c({}, this.A), t.tags)), this.M && Object.keys(this.M).length && (t.user = c(c({}, this.M), t.user)), this.q && Object.keys(this.q).length && (t.contexts = c(c({}, this.q), t.contexts)), this.L && (t.level = this.L), this.P && (t.transaction = this.P), this.U) {
        t.contexts = c({trace: this.U.getTraceContext()}, t.contexts)
        var e = null === (r = this.U.transaction) || void 0 === r ? void 0 : r.name
        e && (t.tags = c({transaction: e}, t.tags))
      }
      return this.B(t), t.breadcrumbs = h(t.breadcrumbs || [], this.N), t.breadcrumbs = t.breadcrumbs.length > 0 ? t.breadcrumbs : void 0, this.J(h(It(), this.I), t, n)
    }, t.prototype.J = function (t, n, r, e) {
      var i = this
      return void 0 === e && (e = 0), new _t(function (o, u) {
        var s = t[e]
        if (null === n || 'function' != typeof s) {
          o(n)
        } else {
          var a = s(c({}, n), r)
          g(a) ? a.then(function (n) {
            return i.J(t, n, r, e + 1).then(o)
          }).then(null, u) : i.J(t, a, r, e + 1).then(o).then(null, u)
        }
      })
    }, t.prototype.X = function () {
      var t = this
      this.D || (this.D = !0, this.R.forEach(function (n) {
        n(t)
      }), this.D = !1)
    }, t.prototype.B = function (t) {
      t.fingerprint = t.fingerprint ? Array.isArray(t.fingerprint) ? t.fingerprint : [t.fingerprint] : [], this.F && (t.fingerprint = t.fingerprint.concat(this.F)), t.fingerprint && !t.fingerprint.length && delete t.fingerprint
    }, t
  }())

  function It () {
    var t = W()
    return t.__SENTRY__ = t.__SENTRY__ || {}, t.__SENTRY__.globalEventProcessors = t.__SENTRY__.globalEventProcessors || [], t.__SENTRY__.globalEventProcessors
  }

  function Nt (t) {
    It().push(t)
  }

  var Mt = function () {
    function t (t) {
      this.errors = 0, this.sid = $(), this.timestamp = Date.now(), this.started = Date.now(), this.duration = 0, this.status = i.Ok, t && this.update(t)
    }

    return t.prototype.update = function (t) {
      void 0 === t && (t = {}), t.user && (t.user.ip_address && (this.ipAddress = t.user.ip_address), t.did || (this.did = t.user.id || t.user.email || t.user.username)), this.timestamp = t.timestamp || Date.now(), t.sid && (this.sid = 32 === t.sid.length ? t.sid : $()), t.did && (this.did = '' + t.did), 'number' == typeof t.started && (this.started = t.started), 'number' == typeof t.duration ? this.duration = t.duration : this.duration = this.timestamp - this.started, t.release && (this.release = t.release), t.environment && (this.environment = t.environment), t.ipAddress && (this.ipAddress = t.ipAddress), t.userAgent && (this.userAgent = t.userAgent), 'number' == typeof t.errors && (this.errors = t.errors), t.status && (this.status = t.status)
    }, t.prototype.close = function (t) {
      t ? this.update({status: t}) : this.status === i.Ok ? this.update({status: i.Exited}) : this.update()
    }, t.prototype.toJSON = function () {
      return X({
        sid: '' + this.sid,
        init: !0,
        started: new Date(this.started).toISOString(),
        timestamp: new Date(this.timestamp).toISOString(),
        status: this.status,
        errors: this.errors,
        did: 'number' == typeof this.did || 'string' == typeof this.did ? '' + this.did : void 0,
        duration: this.duration,
        attrs: X({
          release: this.release,
          environment: this.environment,
          ip_address: this.ipAddress,
          user_agent: this.userAgent
        })
      })
    }, t
  }(), At = 3, Ct = function () {
    function t (t, n, r) {
      void 0 === n && (n = new Rt), void 0 === r && (r = At), this.W = r, this.$ = [{}], this.getStackTop().scope = n, this.bindClient(t)
    }

    return t.prototype.isOlderThan = function (t) {
      return this.W < t
    }, t.prototype.bindClient = function (t) {
      this.getStackTop().client = t, t && t.setupIntegrations && t.setupIntegrations()
    }, t.prototype.pushScope = function () {
      var t = Rt.clone(this.getScope())
      return this.getStack().push({client: this.getClient(), scope: t}), t
    }, t.prototype.popScope = function () {
      return !(this.getStack().length <= 1) && !!this.getStack().pop()
    }, t.prototype.withScope = function (t) {
      var n = this.pushScope()
      try {
        t(n)
      } finally {
        this.popScope()
      }
    }, t.prototype.getClient = function () {
      return this.getStackTop().client
    }, t.prototype.getScope = function () {
      return this.getStackTop().scope
    }, t.prototype.getStack = function () {
      return this.$
    }, t.prototype.getStackTop = function () {
      return this.$[this.$.length - 1]
    }, t.prototype.captureException = function (t, n) {
      var r = this.G = $(), e = n
      if (!n) {
        var i = void 0
        try {
          throw new Error('Sentry syntheticException')
        } catch (t) {
          i = t
        }
        e = {originalException: t, syntheticException: i}
      }
      return this.V('captureException', t, c(c({}, e), {event_id: r})), r
    }, t.prototype.captureMessage = function (t, n, r) {
      var e = this.G = $(), i = r
      if (!r) {
        var o = void 0
        try {
          throw new Error(t)
        } catch (t) {
          o = t
        }
        i = {originalException: t, syntheticException: o}
      }
      return this.V('captureMessage', t, n, c(c({}, i), {event_id: e})), e
    }, t.prototype.captureEvent = function (t, n) {
      var r = this.G = $()
      return this.V('captureEvent', t, c(c({}, n), {event_id: r})), r
    }, t.prototype.lastEventId = function () {
      return this.G
    }, t.prototype.addBreadcrumb = function (t, n) {
      var r = this.getStackTop(), e = r.scope, i = r.client
      if (e && i) {
        var o = i.getOptions && i.getOptions() || {}, u = o.beforeBreadcrumb, s = void 0 === u ? null : u,
          a = o.maxBreadcrumbs, f = void 0 === a ? 100 : a
        if (!(f <= 0)) {
          var h = Dt(), v = c({timestamp: h}, t), l = s ? V(function () {
            return s(v, n)
          }) : v
          null !== l && e.addBreadcrumb(l, Math.min(f, 100))
        }
      }
    }, t.prototype.setUser = function (t) {
      var n = this.getScope()
      n && n.setUser(t)
    }, t.prototype.setTags = function (t) {
      var n = this.getScope()
      n && n.setTags(t)
    }, t.prototype.setExtras = function (t) {
      var n = this.getScope()
      n && n.setExtras(t)
    }, t.prototype.setTag = function (t, n) {
      var r = this.getScope()
      r && r.setTag(t, n)
    }, t.prototype.setExtra = function (t, n) {
      var r = this.getScope()
      r && r.setExtra(t, n)
    }, t.prototype.setContext = function (t, n) {
      var r = this.getScope()
      r && r.setContext(t, n)
    }, t.prototype.configureScope = function (t) {
      var n = this.getStackTop(), r = n.scope, e = n.client
      r && e && t(r)
    }, t.prototype.run = function (t) {
      var n = Lt(this)
      try {
        t(this)
      } finally {
        Lt(n)
      }
    }, t.prototype.getIntegration = function (t) {
      var n = this.getClient()
      if (!n) return null
      try {
        return n.getIntegration(t)
      } catch (n) {
        return rt.warn('Cannot retrieve integration ' + t.id + ' from the current Hub'), null
      }
    }, t.prototype.startSpan = function (t) {
      return this.K('startSpan', t)
    }, t.prototype.startTransaction = function (t, n) {
      return this.K('startTransaction', t, n)
    }, t.prototype.traceHeaders = function () {
      return this.K('traceHeaders')
    }, t.prototype.startSession = function (t) {
      this.endSession()
      var n = this.getStackTop(), r = n.scope, e = n.client, i = e && e.getOptions() || {}, o = i.release,
        u = i.environment, s = new Mt(c(c({release: o, environment: u}, r && {user: r.getUser()}), t))
      return r && r.setSession(s), s
    }, t.prototype.endSession = function () {
      var t = this.getStackTop(), n = t.scope, r = t.client
      if (n) {
        var e = n.getSession && n.getSession()
        e && (e.close(), r && r.captureSession && r.captureSession(e), n.setSession())
      }
    }, t.prototype.V = function (t) {
      for (var n, r = [], e = 1; e < arguments.length; e++) r[e - 1] = arguments[e]
      var i = this.getStackTop(), o = i.scope, u = i.client
      u && u[t] && (n = u)[t].apply(n, h(r, [o]))
    }, t.prototype.K = function (t) {
      for (var n = [], r = 1; r < arguments.length; r++) n[r - 1] = arguments[r]
      var e = qt().__SENTRY__
      if (e && e.extensions && 'function' == typeof e.extensions[t]) return e.extensions[t].apply(this, n)
      rt.warn('Extension method ' + t + ' couldn\'t be found, doing nothing.')
    }, t
  }()

  function qt () {
    var t = W()
    return t.__SENTRY__ = t.__SENTRY__ || {extensions: {}, hub: void 0}, t
  }

  function Lt (t) {
    var n = qt(), r = Pt(n)
    return Ft(n, t), r
  }

  function Ut () {
    var t = qt()
    return Ht(t) && !Pt(t).isOlderThan(At) || Ft(t, new Ct), B() ? function (t) {
      try {
        var n = (e = qt().__SENTRY__) && e.extensions && e.extensions.domain && e.extensions.domain.active
        if (!n) return Pt(t)
        if (!Ht(n) || Pt(n).isOlderThan(At)) {
          var r = Pt(t).getStackTop()
          Ft(n, new Ct(r.client, Rt.clone(r.scope)))
        }
        return Pt(n)
      } catch (n) {
        return Pt(t)
      }
      var e
    }(t) : Pt(t)
  }

  function Ht (t) {
    return !!(t && t.__SENTRY__ && t.__SENTRY__.hub)
  }

  function Pt (t) {
    return t && t.__SENTRY__ && t.__SENTRY__.hub ? t.__SENTRY__.hub : (t.__SENTRY__ = t.__SENTRY__ || {}, t.__SENTRY__.hub = new Ct, t.__SENTRY__.hub)
  }

  function Ft (t, n) {
    return !!t && (t.__SENTRY__ = t.__SENTRY__ || {}, t.__SENTRY__.hub = n, !0)
  }

  function Xt (t) {
    for (var n = [], r = 1; r < arguments.length; r++) n[r - 1] = arguments[r]
    var e = Ut()
    if (e && e[t]) return e[t].apply(e, h(n))
    throw new Error('No hub defined or ' + t + ' was not found on the hub, please open a bug report.')
  }

  function captureException (t, n) {
    var r
    try {
      throw new Error('Sentry syntheticException')
    } catch (t) {
      r = t
    }
    return Xt('captureException', t, {captureContext: n, originalException: t, syntheticException: r})
  }

  function Bt (t) {
    Xt('withScope', t)
  }

  var Jt = function () {
    function t (t) {
      this.dsn = t, this.Y = new O(t)
    }

    return t.prototype.getDsn = function () {
      return this.Y
    }, t.prototype.getBaseApiEndpoint = function () {
      var t = this.Y, n = t.protocol ? t.protocol + ':' : '', r = t.port ? ':' + t.port : ''
      return n + '//' + t.host + r + (t.path ? '/' + t.path : '') + '/api/'
    }, t.prototype.getStoreEndpoint = function () {
      return this.Z('store')
    }, t.prototype.getStoreEndpointWithUrlEncodedAuth = function () {
      return this.getStoreEndpoint() + '?' + this.tt()
    }, t.prototype.getEnvelopeEndpointWithUrlEncodedAuth = function () {
      return this.nt() + '?' + this.tt()
    }, t.prototype.getStoreEndpointPath = function () {
      var t = this.Y
      return (t.path ? '/' + t.path : '') + '/api/' + t.projectId + '/store/'
    }, t.prototype.getRequestHeaders = function (t, n) {
      var r = this.Y, e = ['Sentry sentry_version=7']
      return e.push('sentry_client=' + t + '/' + n), e.push('sentry_key=' + r.user), r.pass && e.push('sentry_secret=' + r.pass), {
        'Content-Type': 'application/json',
        'X-Sentry-Auth': e.join(', ')
      }
    }, t.prototype.getReportDialogEndpoint = function (t) {
      void 0 === t && (t = {})
      var n = this.Y, r = this.getBaseApiEndpoint() + 'embed/error-page/', e = []
      for (var i in e.push('dsn=' + n.toString()), t) {
        if ('dsn' !== i) {
          if ('user' === i) {
            if (!t.user) continue
            t.user.name && e.push('name=' + encodeURIComponent(t.user.name)), t.user.email && e.push('email=' + encodeURIComponent(t.user.email))
          } else {
            e.push(encodeURIComponent(i) + '=' + encodeURIComponent(t[i]))
          }
        }
      }
      return e.length ? r + '?' + e.join('&') : r
    }, t.prototype.nt = function () {
      return this.Z('envelope')
    }, t.prototype.Z = function (t) {
      return '' + this.getBaseApiEndpoint() + this.Y.projectId + '/' + t + '/'
    }, t.prototype.tt = function () {
      var t, n = {sentry_key: this.Y.user, sentry_version: '7'}
      return t = n, Object.keys(t).map(function (n) {
        return encodeURIComponent(n) + '=' + encodeURIComponent(t[n])
      }).join('&')
    }, t
  }(), Wt = []

  function $t (t) {
    var n = {}
    return function (t) {
      var n = t.defaultIntegrations && h(t.defaultIntegrations) || [], r = t.integrations, e = []
      if (Array.isArray(r)) {
        var i = r.map(function (t) {
          return t.name
        }), o = []
        n.forEach(function (t) {
          -1 === i.indexOf(t.name) && -1 === o.indexOf(t.name) && (e.push(t), o.push(t.name))
        }), r.forEach(function (t) {
          -1 === o.indexOf(t.name) && (e.push(t), o.push(t.name))
        })
      } else {
        'function' == typeof r ? (e = r(n), e = Array.isArray(e) ? e : [e]) : e = h(n)
      }
      var u = e.map(function (t) {
        return t.name
      })
      return -1 !== u.indexOf('Debug') && e.push.apply(e, h(e.splice(u.indexOf('Debug'), 1))), e
    }(t).forEach(function (t) {
      n[t.name] = t, function (t) {
        -1 === Wt.indexOf(t.name) && (t.setupOnce(Nt, Ut), Wt.push(t.name), rt.log('Integration installed: ' + t.name))
      }(t)
    }), n
  }

  var Gt, zt = function () {
    function t (t, n) {
      this.rt = {}, this.et = 0, this.it = new t(n), this.ot = n, n.dsn && (this.ut = new O(n.dsn))
    }

    return t.prototype.captureException = function (t, n, r) {
      var e = this, i = n && n.event_id
      return this.st(this.ct().eventFromException(t, n).then(function (t) {
        return e.at(t, n, r)
      }).then(function (t) {
        i = t
      })), i
    }, t.prototype.captureMessage = function (t, n, r, e) {
      var i = this, o = r && r.event_id,
        u = y(t) ? this.ct().eventFromMessage(String(t), n, r) : this.ct().eventFromException(t, r)
      return this.st(u.then(function (t) {
        return i.at(t, r, e)
      }).then(function (t) {
        o = t
      })), o
    }, t.prototype.captureEvent = function (t, n, r) {
      var e = n && n.event_id
      return this.st(this.at(t, n, r).then(function (t) {
        e = t
      })), e
    }, t.prototype.captureSession = function (t) {
      t.release ? this.ft(t) : rt.warn('Discarded session because of missing release')
    }, t.prototype.getDsn = function () {
      return this.ut
    }, t.prototype.getOptions = function () {
      return this.ot
    }, t.prototype.flush = function (t) {
      var n = this
      return this.ht(t).then(function (r) {
        return n.ct().getTransport().close(t).then(function (t) {
          return r && t
        })
      })
    }, t.prototype.close = function (t) {
      var n = this
      return this.flush(t).then(function (t) {
        return n.getOptions().enabled = !1, t
      })
    }, t.prototype.setupIntegrations = function () {
      this.vt() && (this.rt = $t(this.ot))
    }, t.prototype.getIntegration = function (t) {
      try {
        return this.rt[t.id] || null
      } catch (n) {
        return rt.warn('Cannot retrieve integration ' + t.id + ' from the current Client'), null
      }
    }, t.prototype.lt = function (t, n) {
      var r, e, o, u = !1, s = !1, f = n.exception && n.exception.values
      if (f) {
        s = !0
        try {
          for (var h = a(f), v = h.next(); !v.done; v = h.next()) {
            var l = v.value.mechanism
            if (l && !1 === l.handled) {
              u = !0
              break
            }
          }
        } catch (t) {
          r = {error: t}
        } finally {
          try {
            v && !v.done && (e = h.return) && e.call(h)
          } finally {
            if (r) throw r.error
          }
        }
      }
      var d = n.user
      if (!t.userAgent) {
        var p = n.request ? n.request.headers : {}
        for (var y in p) {
          if ('user-agent' === y.toLowerCase()) {
            o = p[y]
            break
          }
        }
      }
      t.update(c(c({}, u && {status: i.Crashed}), {user: d, userAgent: o, errors: t.errors + Number(s || u)}))
    }, t.prototype.ft = function (t) {
      this.ct().sendSession(t)
    }, t.prototype.ht = function (t) {
      var n = this
      return new _t(function (r) {
        var e = 0, i = setInterval(function () {
          0 == n.et ? (clearInterval(i), r(!0)) : (e += 1, t && e >= t && (clearInterval(i), r(!1)))
        }, 1)
      })
    }, t.prototype.ct = function () {
      return this.it
    }, t.prototype.vt = function () {
      return !1 !== this.getOptions().enabled && void 0 !== this.ut
    }, t.prototype.dt = function (t, n, r) {
      var e = this, i = this.getOptions().normalizeDepth, o = void 0 === i ? 3 : i,
        u = c(c({}, t), {event_id: t.event_id || (r && r.event_id ? r.event_id : $()), timestamp: t.timestamp || Dt()})
      this.pt(u), this.yt(u)
      var s = n
      r && r.captureContext && (s = Rt.clone(s).update(r.captureContext))
      var a = _t.resolve(u)
      return s && (a = s.applyToEvent(u, r)), a.then(function (t) {
        return 'number' == typeof o && o > 0 ? e.bt(t, o) : t
      })
    }, t.prototype.bt = function (t, n) {
      if (!t) return null
      var r = c(c(c(c(c({}, t), t.breadcrumbs && {
        breadcrumbs: t.breadcrumbs.map(function (t) {
          return c(c({}, t), t.data && {data: P(t.data, n)})
        })
      }), t.user && {user: P(t.user, n)}), t.contexts && {contexts: P(t.contexts, n)}), t.extra && {extra: P(t.extra, n)})
      return t.contexts && t.contexts.trace && (r.contexts.trace = t.contexts.trace), r
    }, t.prototype.pt = function (t) {
      var n = this.getOptions(), r = n.environment, e = n.release, i = n.dist, o = n.maxValueLength,
        u = void 0 === o ? 250 : o
      'environment' in t || (t.environment = 'environment' in n ? r : 'production'), void 0 === t.release && void 0 !== e && (t.release = e), void 0 === t.dist && void 0 !== i && (t.dist = i), t.message && (t.message = I(t.message, u))
      var s = t.exception && t.exception.values && t.exception.values[0]
      s && s.value && (s.value = I(s.value, u))
      var c = t.request
      c && c.url && (c.url = I(c.url, u))
    }, t.prototype.yt = function (t) {
      var n = t.sdk, r = Object.keys(this.rt)
      n && r.length > 0 && (n.integrations = r)
    }, t.prototype.wt = function (t) {
      this.ct().sendEvent(t)
    }, t.prototype.at = function (t, n, r) {
      return this.gt(t, n, r).then(function (t) {
        return t.event_id
      }, function (t) {
        rt.error(t)
      })
    }, t.prototype.gt = function (t, n, r) {
      var e = this, i = this.getOptions(), o = i.beforeSend, u = i.sampleRate
      if (!this.vt()) return _t.reject(new k('SDK not enabled, will not send event.'))
      var s = 'transaction' === t.type
      return !s && 'number' == typeof u && Math.random() > u ? _t.reject(new k('Discarding event because it\'s not included in the random sample (sampling rate = ' + u + ')')) : this.dt(t, r, n).then(function (t) {
        if (null === t) throw new k('An event processor returned null, will not send event.')
        if (n && n.data && !0 === n.data.__sentry__ || s || !o) return t
        var r = o(t, n)
        if (void 0 === r) throw new k('`beforeSend` method has to return `null` or a valid event.')
        return g(r) ? r.then(function (t) {
          return t
        }, function (t) {
          throw new k('beforeSend rejected with ' + t)
        }) : r
      }).then(function (t) {
        if (null === t) throw new k('`beforeSend` returned `null`, will not send event.')
        var n = r && r.getSession && r.getSession()
        return !s && n && e.lt(n, t), e.wt(t), t
      }).then(null, function (t) {
        if (t instanceof k) throw t
        throw e.captureException(t, {
          data: {__sentry__: !0},
          originalException: t
        }), new k('Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ' + t)
      })
    }, t.prototype.st = function (t) {
      var n = this
      this.et += 1, t.then(function (t) {
        return n.et -= 1, t
      }, function (t) {
        return n.et -= 1, t
      })
    }, t
  }(), Vt = function () {
    function n () {
    }

    return n.prototype.sendEvent = function (n) {
      return _t.resolve({
        reason: 'NoopTransport: Event has been skipped because no Dsn is configured.',
        status: t.Status.Skipped
      })
    }, n.prototype.close = function (t) {
      return _t.resolve(!0)
    }, n
  }(), Kt = function () {
    function t (t) {
      this.ot = t, this.ot.dsn || rt.warn('No DSN provided, backend will not do anything.'), this.Et = this.xt()
    }

    return t.prototype.eventFromException = function (t, n) {
      throw new k('Backend has to implement `eventFromException` method')
    }, t.prototype.eventFromMessage = function (t, n, r) {
      throw new k('Backend has to implement `eventFromMessage` method')
    }, t.prototype.sendEvent = function (t) {
      this.Et.sendEvent(t).then(null, function (t) {
        rt.error('Error while sending event: ' + t)
      })
    }, t.prototype.sendSession = function (t) {
      this.Et.sendSession ? this.Et.sendSession(t).then(null, function (t) {
        rt.error('Error while sending session: ' + t)
      }) : rt.warn('Dropping session because custom transport doesn\'t implement sendSession')
    }, t.prototype.getTransport = function () {
      return this.Et
    }, t.prototype.xt = function () {
      return new Vt
    }, t
  }()

  function Qt (t, n) {
    return {
      body: JSON.stringify({sent_at: (new Date).toISOString()}) + '\n' + JSON.stringify({type: 'session'}) + '\n' + JSON.stringify(t),
      type: 'session',
      url: n.getEnvelopeEndpointWithUrlEncodedAuth()
    }
  }

  function Yt (t, n) {
    var r = t.tags || {}, e = r.__sentry_samplingMethod, i = r.__sentry_sampleRate, o = function (t, n) {
      var r = {}
      for (var e in t) Object.prototype.hasOwnProperty.call(t, e) && n.indexOf(e) < 0 && (r[e] = t[e])
      if (null != t && 'function' == typeof Object.getOwnPropertySymbols) {
        var i = 0
        for (e = Object.getOwnPropertySymbols(t); i < e.length; i++) n.indexOf(e[i]) < 0 && (r[e[i]] = t[e[i]])
      }
      return r
    }(r, ['__sentry_samplingMethod', '__sentry_sampleRate'])
    t.tags = o
    var u = 'transaction' === t.type, s = {
      body: JSON.stringify(t),
      type: t.type || 'event',
      url: u ? n.getEnvelopeEndpointWithUrlEncodedAuth() : n.getStoreEndpointWithUrlEncodedAuth()
    }
    if (u) {
      var c = JSON.stringify({
        event_id: t.event_id,
        sent_at: (new Date).toISOString()
      }) + '\n' + JSON.stringify({type: t.type, sample_rates: [{id: e, rate: i}]}) + '\n' + s.body
      s.body = c
    }
    return s
  }

  var Zt = function () {
      function t () {
        this.name = t.id
      }

      return t.prototype.setupOnce = function () {
        Gt = Function.prototype.toString, Function.prototype.toString = function () {
          for (var t = [], n = 0; n < arguments.length; n++) t[n] = arguments[n]
          var r = this.__sentry_original__ || this
          return Gt.apply(r, t)
        }
      }, t.id = 'FunctionToString', t
    }(), tn = [/^Script error\.?$/, /^Javascript error: Script error\.? on line 0$/], nn = function () {
      function t (n) {
        void 0 === n && (n = {}), this.ot = n, this.name = t.id
      }

      return t.prototype.setupOnce = function () {
        Nt(function (n) {
          var r = Ut()
          if (!r) return n
          var e = r.getIntegration(t)
          if (e) {
            var i = r.getClient(), o = i ? i.getOptions() : {}, u = e.jt(o)
            if (e._t(n, u)) return null
          }
          return n
        })
      }, t.prototype._t = function (t, n) {
        return this.kt(t, n) ? (rt.warn('Event dropped due to being internal Sentry Error.\nEvent: ' + z(t)), !0) : this.St(t, n) ? (rt.warn('Event dropped due to being matched by `ignoreErrors` option.\nEvent: ' + z(t)), !0) : this.Ot(t, n) ? (rt.warn('Event dropped due to being matched by `denyUrls` option.\nEvent: ' + z(t) + '.\nUrl: ' + this.Tt(t)), !0) : !this.Dt(t, n) && (rt.warn('Event dropped due to not being matched by `allowUrls` option.\nEvent: ' + z(t) + '.\nUrl: ' + this.Tt(t)), !0)
      }, t.prototype.kt = function (t, n) {
        if (!n.ignoreInternal) return !1
        try {
          return t && t.exception && t.exception.values && t.exception.values[0] && 'SentryError' === t.exception.values[0].type || !1
        } catch (t) {
          return !1
        }
      }, t.prototype.St = function (t, n) {
        return !(!n.ignoreErrors || !n.ignoreErrors.length) && this.Rt(t).some(function (t) {
          return n.ignoreErrors.some(function (n) {
            return M(t, n)
          })
        })
      }, t.prototype.Ot = function (t, n) {
        if (!n.denyUrls || !n.denyUrls.length) return !1
        var r = this.Tt(t)
        return !!r && n.denyUrls.some(function (t) {
          return M(r, t)
        })
      }, t.prototype.Dt = function (t, n) {
        if (!n.allowUrls || !n.allowUrls.length) return !0
        var r = this.Tt(t)
        return !r || n.allowUrls.some(function (t) {
          return M(r, t)
        })
      }, t.prototype.jt = function (t) {
        return void 0 === t && (t = {}), {
          allowUrls: h(this.ot.whitelistUrls || [], this.ot.allowUrls || [], t.whitelistUrls || [], t.allowUrls || []),
          denyUrls: h(this.ot.blacklistUrls || [], this.ot.denyUrls || [], t.blacklistUrls || [], t.denyUrls || []),
          ignoreErrors: h(this.ot.ignoreErrors || [], t.ignoreErrors || [], tn),
          ignoreInternal: void 0 === this.ot.ignoreInternal || this.ot.ignoreInternal
        }
      }, t.prototype.Rt = function (t) {
        if (t.message) return [t.message]
        if (t.exception) {
          try {
            var n = t.exception.values && t.exception.values[0] || {}, r = n.type, e = void 0 === r ? '' : r, i = n.value,
              o = void 0 === i ? '' : i
            return ['' + o, e + ': ' + o]
          } catch (n) {
            return rt.error('Cannot extract message for event ' + z(t)), []
          }
        }
        return []
      }, t.prototype.Tt = function (t) {
        try {
          if (t.stacktrace) {
            var n = t.stacktrace.frames
            return n && n[n.length - 1].filename || null
          }
          if (t.exception) {
            var r = t.exception.values && t.exception.values[0].stacktrace && t.exception.values[0].stacktrace.frames
            return r && r[r.length - 1].filename || null
          }
          return null
        } catch (n) {
          return rt.error('Cannot extract url for event ' + z(t)), null
        }
      }, t.id = 'InboundFilters', t
    }(), rn = Object.freeze({__proto__: null, FunctionToString: Zt, InboundFilters: nn}), en = '?',
    on = /^\s*at (?:(.*?) ?\()?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,
    un = /^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension|capacitor).*?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. \/=]+)(?::(\d+))?(?::(\d+))?\s*$/i,
    sn = /^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,
    cn = /(\S+) line (\d+)(?: > eval line \d+)* > eval/i, an = /\((\S*)(?::(\d+))(?::(\d+))\)/,
    fn = /Minified React error #\d+;/i

  function hn (t) {
    var n = null, r = 0
    t && ('number' == typeof t.framesToPop ? r = t.framesToPop : fn.test(t.message) && (r = 1))
    try {
      if (n = function (t) {
        if (!t || !t.stacktrace) return null
        for (var n, r = t.stacktrace, e = / line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i, i = / line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\((.*)\))? in (.*):\s*$/i, o = r.split('\n'), u = [], s = 0; s < o.length; s += 2) {
          var c = null;
          (n = e.exec(o[s])) ? c = {
            url: n[2],
            func: n[3],
            args: [],
            line: +n[1],
            column: null
          } : (n = i.exec(o[s])) && (c = {
            url: n[6],
            func: n[3] || n[4],
            args: n[5] ? n[5].split(',') : [],
            line: +n[1],
            column: +n[2]
          }), c && (!c.func && c.line && (c.func = en), u.push(c))
        }
        if (!u.length) return null
        return {message: ln(t), name: t.name, stack: u}
      }(t)) {
        return vn(n, r)
      }
    } catch (t) {
    }
    try {
      if (n = function (t) {
        if (!t || !t.stack) return null
        for (var n, r, e, i = [], o = t.stack.split('\n'), u = 0; u < o.length; ++u) {
          if (r = on.exec(o[u])) {
            var s = r[2] && 0 === r[2].indexOf('native')
            r[2] && 0 === r[2].indexOf('eval') && (n = an.exec(r[2])) && (r[2] = n[1], r[3] = n[2], r[4] = n[3]), e = {
              url: r[2] && 0 === r[2].indexOf('address at ') ? r[2].substr('address at '.length) : r[2],
              func: r[1] || en,
              args: s ? [r[2]] : [],
              line: r[3] ? +r[3] : null,
              column: r[4] ? +r[4] : null
            }
          } else if (r = sn.exec(o[u])) {
            e = {
              url: r[2],
              func: r[1] || en,
              args: [],
              line: +r[3],
              column: r[4] ? +r[4] : null
            }
          } else {
            if (!(r = un.exec(o[u]))) continue
            r[3] && r[3].indexOf(' > eval') > -1 && (n = cn.exec(r[3])) ? (r[1] = r[1] || 'eval', r[3] = n[1], r[4] = n[2], r[5] = '') : 0 !== u || r[5] || void 0 === t.columnNumber || (i[0].column = t.columnNumber + 1), e = {
              url: r[3],
              func: r[1] || en,
              args: r[2] ? r[2].split(',') : [],
              line: r[4] ? +r[4] : null,
              column: r[5] ? +r[5] : null
            }
          }
          !e.func && e.line && (e.func = en), i.push(e)
        }
        if (!i.length) return null
        return {message: ln(t), name: t.name, stack: i}
      }(t)) {
        return vn(n, r)
      }
    } catch (t) {
    }
    return {message: ln(t), name: t && t.name, stack: [], failed: !0}
  }

  function vn (t, n) {
    try {
      return c(c({}, t), {stack: t.stack.slice(n)})
    } catch (n) {
      return t
    }
  }

  function ln (t) {
    var n = t && t.message
    return n ? n.error && 'string' == typeof n.error.message ? n.error.message : n : 'No error message'
  }

  var dn = 50

  function pn (t) {
    var n = mn(t.stack), r = {type: t.name, value: t.message}
    return n && n.length && (r.stacktrace = {frames: n}), void 0 === r.type && '' === r.value && (r.value = 'Unrecoverable error caught'), r
  }

  function yn (t) {
    return {exception: {values: [pn(t)]}}
  }

  function mn (t) {
    if (!t || !t.length) return []
    var n = t, r = n[0].func || '', e = n[n.length - 1].func || ''
    return -1 === r.indexOf('captureMessage') && -1 === r.indexOf('captureException') || (n = n.slice(1)), -1 !== e.indexOf('sentryWrapped') && (n = n.slice(0, -1)), n.slice(0, dn).map(function (t) {
      return {
        colno: null === t.column ? void 0 : t.column,
        filename: t.url || n[0].url,
        function: t.func || '?',
        in_app: !0,
        lineno: null === t.line ? void 0 : t.line
      }
    }).reverse()
  }

  function bn (n, r, e) {
    var i = gn(r, e && e.syntheticException || void 0, {attachStacktrace: n.attachStacktrace})
    return Q(i, {
      handled: !0,
      type: 'generic'
    }), i.level = t.Severity.Error, e && e.event_id && (i.event_id = e.event_id), _t.resolve(i)
  }

  function wn (n, r, e, i) {
    void 0 === e && (e = t.Severity.Info)
    var o = En(r, i && i.syntheticException || void 0, {attachStacktrace: n.attachStacktrace})
    return o.level = e, i && i.event_id && (o.event_id = i.event_id), _t.resolve(o)
  }

  function gn (t, n, r) {
    var e, i
    if (void 0 === r && (r = {}), l(t) && t.error) return e = yn(hn(t = t.error))
    if (d(t) || (i = t, '[object DOMException]' === Object.prototype.toString.call(i))) {
      var o = t, u = o.name || (d(o) ? 'DOMError' : 'DOMException'), s = o.message ? u + ': ' + o.message : u
      return K(e = En(s, n, r), s), 'code' in o && (e.tags = c(c({}, e.tags), {'DOMException.code': '' + o.code})), e
    }
    return v(t) ? e = yn(hn(t)) : m(t) || b(t) ? (Q(e = function (t, n, r) {
      var e = {
        exception: {
          values: [{
            type: b(t) ? t.constructor.name : r ? 'UnhandledRejection' : 'Error',
            value: 'Non-Error ' + (r ? 'promise rejection' : 'exception') + ' captured with keys: ' + F(t)
          }]
        }, extra: {__serialized__: L(t)}
      }
      if (n) {
        var i = mn(hn(n).stack)
        e.stacktrace = {frames: i}
      }
      return e
    }(t, n, r.rejection), {synthetic: !0}), e) : (K(e = En(t, n, r), '' + t, void 0), Q(e, {synthetic: !0}), e)
  }

  function En (t, n, r) {
    void 0 === r && (r = {})
    var e = {message: t}
    if (r.attachStacktrace && n) {
      var i = mn(hn(n).stack)
      e.stacktrace = {frames: i}
    }
    return e
  }

  var xn = function () {
      function n (t) {
        this.options = t, this.T = new kt(30), this.It = {}, this.Nt = new Jt(this.options.dsn), this.url = this.Nt.getStoreEndpointWithUrlEncodedAuth()
      }

      return n.prototype.sendEvent = function (t) {
        throw new k('Transport Class has to implement `sendEvent` method')
      }, n.prototype.close = function (t) {
        return this.T.drain(t)
      }, n.prototype.Mt = function (n) {
        var r = n.requestType, e = n.response, i = n.headers, o = n.resolve, u = n.reject,
          s = t.Status.fromHttpCode(e.status)
        this.At(i) && rt.warn('Too many requests, backing off until: ' + this.Ct(r)), s !== t.Status.Success ? u(e) : o({status: s})
      }, n.prototype.Ct = function (t) {
        return this.It[t] || this.It.all
      }, n.prototype.qt = function (t) {
        return this.Ct(t) > new Date(Date.now())
      }, n.prototype.At = function (t) {
        var n, r, e, i, o = Date.now(), u = t['x-sentry-rate-limits'], s = t['retry-after']
        if (u) {
          try {
            for (var c = a(u.trim().split(',')), f = c.next(); !f.done; f = c.next()) {
              var h = f.value.split(':', 2), v = parseInt(h[0], 10), l = 1e3 * (isNaN(v) ? 60 : v)
              try {
                for (var d = (e = void 0, a(h[1].split(';'))), p = d.next(); !p.done; p = d.next()) {
                  var y = p.value
                  this.It[y || 'all'] = new Date(o + l)
                }
              } catch (t) {
                e = {error: t}
              } finally {
                try {
                  p && !p.done && (i = d.return) && i.call(d)
                } finally {
                  if (e) throw e.error
                }
              }
            }
          } catch (t) {
            n = {error: t}
          } finally {
            try {
              f && !f.done && (r = c.return) && r.call(c)
            } finally {
              if (n) throw n.error
            }
          }
          return !0
        }
        return !!s && (this.It.all = new Date(o + function (t, n) {
          if (!n) return Y
          var r = parseInt('' + n, 10)
          if (!isNaN(r)) return 1e3 * r
          var e = Date.parse('' + n)
          return isNaN(e) ? Y : e - t
        }(o, s)), !0)
      }, n
    }(), jn = W(), _n = function (t) {
      function n () {
        return null !== t && t.apply(this, arguments) || this
      }

      return r(n, t), n.prototype.sendEvent = function (t) {
        return this.Lt(Yt(t, this.Nt), t)
      }, n.prototype.sendSession = function (t) {
        return this.Lt(Qt(t, this.Nt), t)
      }, n.prototype.Lt = function (t, n) {
        var r = this
        if (this.qt(t.type)) {
          return Promise.reject({
            event: n,
            type: t.type,
            reason: 'Transport locked till ' + this.Ct(t.type) + ' due to too many requests.',
            status: 429
          })
        }
        var e = {body: t.body, method: 'POST', referrerPolicy: ot() ? 'origin' : ''}
        return void 0 !== this.options.fetchParameters && Object.assign(e, this.options.fetchParameters), void 0 !== this.options.headers && (e.headers = this.options.headers), this.T.add(new _t(function (n, i) {
          jn.fetch(t.url, e).then(function (e) {
            var o = {
              'x-sentry-rate-limits': e.headers.get('X-Sentry-Rate-Limits'),
              'retry-after': e.headers.get('Retry-After')
            }
            r.Mt({requestType: t.type, response: e, headers: o, resolve: n, reject: i})
          }).catch(i)
        }))
      }, n
    }(xn), kn = function (t) {
      function n () {
        return null !== t && t.apply(this, arguments) || this
      }

      return r(n, t), n.prototype.sendEvent = function (t) {
        return this.Lt(Yt(t, this.Nt), t)
      }, n.prototype.sendSession = function (t) {
        return this.Lt(Qt(t, this.Nt), t)
      }, n.prototype.Lt = function (t, n) {
        var r = this
        return this.qt(t.type) ? Promise.reject({
          event: n,
          type: t.type,
          reason: 'Transport locked till ' + this.Ct(t.type) + ' due to too many requests.',
          status: 429
        }) : this.T.add(new _t(function (n, e) {
          var i = new XMLHttpRequest
          for (var o in i.onreadystatechange = function () {
            if (4 === i.readyState) {
              var o = {
                'x-sentry-rate-limits': i.getResponseHeader('X-Sentry-Rate-Limits'),
                'retry-after': i.getResponseHeader('Retry-After')
              }
              r.Mt({requestType: t.type, response: i, headers: o, resolve: n, reject: e})
            }
          }, i.open('POST', t.url), r.options.headers) {
            r.options.headers.hasOwnProperty(o) && i.setRequestHeader(o, r.options.headers[o])
          }
          i.send(t.body)
        }))
      }, n
    }(xn), Sn = Object.freeze({__proto__: null, BaseTransport: xn, FetchTransport: _n, XHRTransport: kn}),
    On = function (n) {
      function e () {
        return null !== n && n.apply(this, arguments) || this
      }

      return r(e, n), e.prototype.eventFromException = function (t, n) {
        return bn(this.ot, t, n)
      }, e.prototype.eventFromMessage = function (n, r, e) {
        return void 0 === r && (r = t.Severity.Info), wn(this.ot, n, r, e)
      }, e.prototype.xt = function () {
        if (!this.ot.dsn) return n.prototype.xt.call(this)
        var t = c(c({}, this.ot.transportOptions), {dsn: this.ot.dsn})
        return this.ot.transport ? new this.ot.transport(t) : et() ? new _n(t) : new kn(t)
      }, e
    }(Kt), Tn = 0

  function Dn () {
    return Tn > 0
  }

  function Rn (t, n, r) {
    if (void 0 === n && (n = {}), 'function' != typeof t) return t
    try {
      if (t.__sentry__) return t
      if (t.__sentry_wrapped__) return t.__sentry_wrapped__
    } catch (n) {
      return t
    }
    var sentryWrapped = function () {
      var e = Array.prototype.slice.call(arguments)
      try {
        r && 'function' == typeof r && r.apply(this, arguments)
        var i = e.map(function (t) {
          return Rn(t, n)
        })
        return t.handleEvent ? t.handleEvent.apply(this, i) : t.apply(this, i)
      } catch (t) {
        throw Tn += 1, setTimeout(function () {
          Tn -= 1
        }), Bt(function (r) {
          r.addEventProcessor(function (t) {
            var r = c({}, t)
            return n.mechanism && (K(r, void 0, void 0), Q(r, n.mechanism)), r.extra = c(c({}, r.extra), {arguments: e}), r
          }), captureException(t)
        }), t
      }
    }
    try {
      for (var e in t) Object.prototype.hasOwnProperty.call(t, e) && (sentryWrapped[e] = t[e])
    } catch (t) {
    }
    t.prototype = t.prototype || {}, sentryWrapped.prototype = t.prototype, Object.defineProperty(t, '__sentry_wrapped__', {
      enumerable: !1,
      value: sentryWrapped
    }), Object.defineProperties(sentryWrapped, {
      __sentry__: {enumerable: !1, value: !0},
      __sentry_original__: {enumerable: !1, value: t}
    })
    try {
      Object.getOwnPropertyDescriptor(sentryWrapped, 'name').configurable && Object.defineProperty(sentryWrapped, 'name', {
        get: function () {
          return t.name
        }
      })
    } catch (t) {
    }
    return sentryWrapped
  }

  function In (t) {
    if (void 0 === t && (t = {}), t.eventId) {
      if (t.dsn) {
        var n = document.createElement('script')
        n.async = !0, n.src = new Jt(t.dsn).getReportDialogEndpoint(t), t.onLoad && (n.onload = t.onLoad), (document.head || document.body).appendChild(n)
      } else {
        rt.error('Missing dsn option in showReportDialog call')
      }
    } else {
      rt.error('Missing eventId option in showReportDialog call')
    }
  }

  var Nn = function () {
      function n (t) {
        this.name = n.id, this.Ut = !1, this.Ht = !1, this.ot = c({onerror: !0, onunhandledrejection: !0}, t)
      }

      return n.prototype.setupOnce = function () {
        Error.stackTraceLimit = 50, this.ot.onerror && (rt.log('Global Handler attached: onerror'), this.Pt()), this.ot.onunhandledrejection && (rt.log('Global Handler attached: onunhandledrejection'), this.Ft())
      }, n.prototype.Pt = function () {
        var t = this
        this.Ut || (ht({
          callback: function (r) {
            var e = r.error, i = Ut(), o = i.getIntegration(n), u = e && !0 === e.__sentry_own_request__
            if (o && !Dn() && !u) {
              var s = i.getClient(), c = y(e) ? t.Xt(r.msg, r.url, r.line, r.column) : t.Bt(gn(e, void 0, {
                attachStacktrace: s && s.getOptions().attachStacktrace,
                rejection: !1
              }), r.url, r.line, r.column)
              Q(c, {handled: !1, type: 'onerror'}), i.captureEvent(c, {originalException: e})
            }
          }, type: 'error'
        }), this.Ut = !0)
      }, n.prototype.Ft = function () {
        var r = this
        this.Ht || (ht({
          callback: function (e) {
            var i = e
            try {
              'reason' in e ? i = e.reason : 'detail' in e && 'reason' in e.detail && (i = e.detail.reason)
            } catch (t) {
            }
            var o = Ut(), u = o.getIntegration(n), s = i && !0 === i.__sentry_own_request__
            if (!u || Dn() || s) return !0
            var c = o.getClient(),
              a = y(i) ? r.Jt(i) : gn(i, void 0, {attachStacktrace: c && c.getOptions().attachStacktrace, rejection: !0})
            a.level = t.Severity.Error, Q(a, {
              handled: !1,
              type: 'onunhandledrejection'
            }), o.captureEvent(a, {originalException: i})
          }, type: 'unhandledrejection'
        }), this.Ht = !0)
      }, n.prototype.Xt = function (t, n, r, e) {
        var i, o = l(t) ? t.message : t
        if (p(o)) {
          var u = o.match(/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i)
          u && (i = u[1], o = u[2])
        }
        var s = {exception: {values: [{type: i || 'Error', value: o}]}}
        return this.Bt(s, n, r, e)
      }, n.prototype.Jt = function (t) {
        return {
          exception: {
            values: [{
              type: 'UnhandledRejection',
              value: 'Non-Error promise rejection captured with value: ' + String(t)
            }]
          }
        }
      }, n.prototype.Bt = function (t, n, r, e) {
        t.exception = t.exception || {}, t.exception.values = t.exception.values || [], t.exception.values[0] = t.exception.values[0] || {}, t.exception.values[0].stacktrace = t.exception.values[0].stacktrace || {}, t.exception.values[0].stacktrace.frames = t.exception.values[0].stacktrace.frames || []
        var i = isNaN(parseInt(e, 10)) ? void 0 : e, o = isNaN(parseInt(r, 10)) ? void 0 : r,
          u = p(n) && n.length > 0 ? n : function () {
            try {
              return document.location.href
            } catch (t) {
              return ''
            }
          }()
        return 0 === t.exception.values[0].stacktrace.frames.length && t.exception.values[0].stacktrace.frames.push({
          colno: i,
          filename: u,
          function: '?',
          in_app: !0,
          lineno: o
        }), t
      }, n.id = 'GlobalHandlers', n
    }(),
    Mn = ['EventTarget', 'Window', 'Node', 'ApplicationCache', 'AudioTrackList', 'ChannelMergerNode', 'CryptoOperation', 'EventSource', 'FileReader', 'HTMLUnknownElement', 'IDBDatabase', 'IDBRequest', 'IDBTransaction', 'KeyOperation', 'MediaController', 'MessagePort', 'ModalWindow', 'Notification', 'SVGElementInstance', 'Screen', 'TextTrack', 'TextTrackCue', 'TextTrackList', 'WebSocket', 'WebSocketWorker', 'Worker', 'XMLHttpRequest', 'XMLHttpRequestEventTarget', 'XMLHttpRequestUpload'],
    An = function () {
      function t (n) {
        this.name = t.id, this.ot = c({
          XMLHttpRequest: !0,
          eventTarget: !0,
          requestAnimationFrame: !0,
          setInterval: !0,
          setTimeout: !0
        }, n)
      }

      return t.prototype.setupOnce = function () {
        var t = W();
        (this.ot.setTimeout && A(t, 'setTimeout', this.Wt.bind(this)), this.ot.setInterval && A(t, 'setInterval', this.Wt.bind(this)), this.ot.requestAnimationFrame && A(t, 'requestAnimationFrame', this.$t.bind(this)), this.ot.XMLHttpRequest && 'XMLHttpRequest' in t && A(XMLHttpRequest.prototype, 'send', this.Gt.bind(this)), this.ot.eventTarget) && (Array.isArray(this.ot.eventTarget) ? this.ot.eventTarget : Mn).forEach(this.zt.bind(this))
      }, t.prototype.Wt = function (t) {
        return function () {
          for (var n = [], r = 0; r < arguments.length; r++) n[r] = arguments[r]
          var e = n[0]
          return n[0] = Rn(e, {mechanism: {data: {function: R(t)}, handled: !0, type: 'instrument'}}), t.apply(this, n)
        }
      }, t.prototype.$t = function (t) {
        return function (n) {
          return t.call(this, Rn(n, {
            mechanism: {
              data: {function: 'requestAnimationFrame', handler: R(t)},
              handled: !0,
              type: 'instrument'
            }
          }))
        }
      }, t.prototype.zt = function (t) {
        var n = W(), r = n[t] && n[t].prototype
        r && r.hasOwnProperty && r.hasOwnProperty('addEventListener') && (A(r, 'addEventListener', function (n) {
          return function (r, e, i) {
            try {
              'function' == typeof e.handleEvent && (e.handleEvent = Rn(e.handleEvent.bind(e), {
                mechanism: {
                  data: {
                    function: 'handleEvent',
                    handler: R(e),
                    target: t
                  }, handled: !0, type: 'instrument'
                }
              }))
            } catch (t) {
            }
            return n.call(this, r, Rn(e, {
              mechanism: {
                data: {function: 'addEventListener', handler: R(e), target: t},
                handled: !0,
                type: 'instrument'
              }
            }), i)
          }
        }), A(r, 'removeEventListener', function (t) {
          return function (n, r, e) {
            var i, o = r
            try {
              var u = null === (i = o) || void 0 === i ? void 0 : i.__sentry_wrapped__
              u && t.call(this, n, u, e)
            } catch (t) {
            }
            return t.call(this, n, o, e)
          }
        }))
      }, t.prototype.Gt = function (t) {
        return function () {
          for (var n = [], r = 0; r < arguments.length; r++) n[r] = arguments[r]
          var e = this
          return ['onload', 'onerror', 'onprogress', 'onreadystatechange'].forEach(function (t) {
            t in e && 'function' == typeof e[t] && A(e, t, function (n) {
              var r = {mechanism: {data: {function: t, handler: R(n)}, handled: !0, type: 'instrument'}}
              return n.__sentry_original__ && (r.mechanism.data.handler = R(n.__sentry_original__)), Rn(n, r)
            })
          }), t.apply(this, n)
        }
      }, t.id = 'TryCatch', t
    }(), Cn = function () {
      function n (t) {
        this.name = n.id, this.ot = c({console: !0, dom: !0, fetch: !0, history: !0, sentry: !0, xhr: !0}, t)
      }

      return n.prototype.addSentryBreadcrumb = function (t) {
        this.ot.sentry && Ut().addBreadcrumb({
          category: 'sentry.' + ('transaction' === t.type ? 'transaction' : 'event'),
          event_id: t.event_id,
          level: t.level,
          message: z(t)
        }, {event: t})
      }, n.prototype.setupOnce = function () {
        var t = this
        this.ot.console && ht({
          callback: function () {
            for (var n = [], r = 0; r < arguments.length; r++) n[r] = arguments[r]
            t.Vt.apply(t, h(n))
          }, type: 'console'
        }), this.ot.dom && ht({
          callback: function () {
            for (var n = [], r = 0; r < arguments.length; r++) n[r] = arguments[r]
            t.Kt.apply(t, h(n))
          }, type: 'dom'
        }), this.ot.xhr && ht({
          callback: function () {
            for (var n = [], r = 0; r < arguments.length; r++) n[r] = arguments[r]
            t.Qt.apply(t, h(n))
          }, type: 'xhr'
        }), this.ot.fetch && ht({
          callback: function () {
            for (var n = [], r = 0; r < arguments.length; r++) n[r] = arguments[r]
            t.Yt.apply(t, h(n))
          }, type: 'fetch'
        }), this.ot.history && ht({
          callback: function () {
            for (var n = [], r = 0; r < arguments.length; r++) n[r] = arguments[r]
            t.Zt.apply(t, h(n))
          }, type: 'history'
        })
      }, n.prototype.Vt = function (n) {
        var r = {
          category: 'console',
          data: {arguments: n.args, logger: 'console'},
          level: t.Severity.fromString(n.level),
          message: N(n.args, ' ')
        }
        if ('assert' === n.level) {
          if (!1 !== n.args[0]) return
          r.message = 'Assertion failed: ' + (N(n.args.slice(1), ' ') || 'console.assert'), r.data.arguments = n.args.slice(1)
        }
        Ut().addBreadcrumb(r, {input: n.args, level: n.level})
      }, n.prototype.Kt = function (t) {
        var n
        try {
          n = t.event.target ? x(t.event.target) : x(t.event)
        } catch (t) {
          n = '<unknown>'
        }
        0 !== n.length && Ut().addBreadcrumb({category: 'ui.' + t.name, message: n}, {event: t.event, name: t.name})
      }, n.prototype.Qt = function (t) {
        if (t.endTimestamp) {
          if (t.xhr.__sentry_own_request__) return
          var n = t.xhr.__sentry_xhr__ || {}, r = n.method, e = n.url, i = n.status_code, o = n.body
          Ut().addBreadcrumb({category: 'xhr', data: {method: r, url: e, status_code: i}, type: 'http'}, {
            xhr: t.xhr,
            input: o
          })
        } else {

        }
      }, n.prototype.Yt = function (n) {
        n.endTimestamp && (n.fetchData.url.match(/sentry_key/) && 'POST' === n.fetchData.method || (n.error ? Ut().addBreadcrumb({
          category: 'fetch',
          data: n.fetchData,
          level: t.Severity.Error,
          type: 'http'
        }, {data: n.error, input: n.args}) : Ut().addBreadcrumb({
          category: 'fetch',
          data: c(c({}, n.fetchData), {status_code: n.response.status}),
          type: 'http'
        }, {input: n.args, response: n.response})))
      }, n.prototype.Zt = function (t) {
        var n = W(), r = t.from, e = t.to, i = G(n.location.href), o = G(r), u = G(e)
        o.path || (o = i), i.protocol === u.protocol && i.host === u.host && (e = u.relative), i.protocol === o.protocol && i.host === o.host && (r = o.relative), Ut().addBreadcrumb({
          category: 'navigation',
          data: {from: r, to: e}
        })
      }, n.id = 'Breadcrumbs', n
    }(), qn = 'cause', Ln = 5, Un = function () {
      function t (n) {
        void 0 === n && (n = {}), this.name = t.id, this.tn = n.key || qn, this.O = n.limit || Ln
      }

      return t.prototype.setupOnce = function () {
        Nt(function (n, r) {
          var e = Ut().getIntegration(t)
          return e ? e.nn(n, r) : n
        })
      }, t.prototype.nn = function (t, n) {
        if (!(t.exception && t.exception.values && n && E(n.originalException, Error))) return t
        var r = this.rn(n.originalException, this.tn)
        return t.exception.values = h(r, t.exception.values), t
      }, t.prototype.rn = function (t, n, r) {
        if (void 0 === r && (r = []), !E(t[n], Error) || r.length + 1 >= this.O) return r
        var e = pn(hn(t[n]))
        return this.rn(t[n], n, h([e], r))
      }, t.id = 'LinkedErrors', t
    }(), Hn = W(), Pn = function () {
      function t () {
        this.name = t.id
      }

      return t.prototype.setupOnce = function () {
        Nt(function (n) {
          var r, e, i
          if (Ut().getIntegration(t)) {
            if (!Hn.navigator && !Hn.location && !Hn.document) return n
            var o = (null === (r = n.request) || void 0 === r ? void 0 : r.url) || (null === (e = Hn.location) || void 0 === e ? void 0 : e.href),
              u = (Hn.document || {}).referrer, s = (Hn.navigator || {}).userAgent,
              a = c(c(c({}, null === (i = n.request) || void 0 === i ? void 0 : i.headers), u && {Referer: u}), s && {'User-Agent': s}),
              f = c(c({}, o && {url: o}), {headers: a})
            return c(c({}, n), {request: f})
          }
          return n
        })
      }, t.id = 'UserAgent', t
    }(), Fn = Object.freeze({
      __proto__: null,
      GlobalHandlers: Nn,
      TryCatch: An,
      Breadcrumbs: Cn,
      LinkedErrors: Un,
      UserAgent: Pn
    }), Xn = 'sentry.javascript.browser', Bn = function (t) {
      function n (n) {
        return void 0 === n && (n = {}), t.call(this, On, n) || this
      }

      return r(n, t), n.prototype.showReportDialog = function (t) {
        void 0 === t && (t = {}), W().document && (this.vt() ? In(c(c({}, t), {dsn: t.dsn || this.getDsn()})) : rt.error('Trying to call showReportDialog with Sentry Client disabled'))
      }, n.prototype.dt = function (n, r, e) {
        return n.platform = n.platform || 'javascript', n.sdk = c(c({}, n.sdk), {
          name: Xn,
          packages: h(n.sdk && n.sdk.packages || [], [{name: 'npm:@sentry/browser', version: '5.30.0'}]),
          version: '5.30.0'
        }), t.prototype.dt.call(this, n, r, e)
      }, n.prototype.wt = function (n) {
        var r = this.getIntegration(Cn)
        r && r.addSentryBreadcrumb(n), t.prototype.wt.call(this, n)
      }, n
    }(zt), Jn = [new nn, new Zt, new An, new Cn, new Nn, new Un, new Pn]
  var Wn = {}, $n = W()
  $n.Sentry && $n.Sentry.Integrations && (Wn = $n.Sentry.Integrations)
  var Gn = c(c(c({}, Wn), rn), Fn)
  return t.BrowserClient = Bn, t.Hub = Ct, t.Integrations = Gn, t.SDK_NAME = Xn, t.SDK_VERSION = '5.30.0', t.Scope = Rt, t.Transports = Sn, t.addBreadcrumb = function (t) {
    Xt('addBreadcrumb', t)
  }, t.addGlobalEventProcessor = Nt, t.captureEvent = function (t) {
    return Xt('captureEvent', t)
  }, t.captureException = captureException, t.captureMessage = function (t, n) {
    var r
    try {
      throw new Error(t)
    } catch (t) {
      r = t
    }
    return Xt('captureMessage', t, 'string' == typeof n ? n : void 0, c({
      originalException: t,
      syntheticException: r
    }, 'string' != typeof n ? {captureContext: n} : void 0))
  }, t.close = function (t) {
    var n = Ut().getClient()
    return n ? n.close(t) : _t.reject(!1)
  }, t.configureScope = function (t) {
    Xt('configureScope', t)
  }, t.defaultIntegrations = Jn, t.eventFromException = bn, t.eventFromMessage = wn, t.flush = function (t) {
    var n = Ut().getClient()
    return n ? n.flush(t) : _t.reject(!1)
  }, t.forceLoad = function () {
  }, t.getCurrentHub = Ut, t.getHubFromCarrier = Pt, t.init = function (t) {
    if (void 0 === t && (t = {}), void 0 === t.defaultIntegrations && (t.defaultIntegrations = Jn), void 0 === t.release) {
      var n = W()
      n.SENTRY_RELEASE && n.SENTRY_RELEASE.id && (t.release = n.SENTRY_RELEASE.id)
    }
    void 0 === t.autoSessionTracking && (t.autoSessionTracking = !1), function (t, n) {
      !0 === n.debug && rt.enable()
      var r = Ut(), e = new t(n)
      r.bindClient(e)
    }(Bn, t), t.autoSessionTracking && function () {
      var t = W(), n = Ut(), r = 'complete' === document.readyState, e = !1, i = function () {
        e && r && n.endSession()
      }, o = function () {
        r = !0, i(), t.removeEventListener('load', o)
      }
      n.startSession(), r || t.addEventListener('load', o)
      try {
        var u = new PerformanceObserver(function (t, n) {
          t.getEntries().forEach(function (t) {
            'first-contentful-paint' === t.name && t.startTime < s && (n.disconnect(), e = !0, i())
          })
        }), s = 'hidden' === document.visibilityState ? 0 : 1 / 0
        document.addEventListener('visibilitychange', function (t) {
          s = Math.min(s, t.timeStamp)
        }, {once: !0}), u.observe({type: 'paint', buffered: !0})
      } catch (t) {
        e = !0, i()
      }
    }()
  }, t.injectReportDialog = In, t.lastEventId = function () {
    return Ut().lastEventId()
  }, t.makeMain = Lt, t.onLoad = function (t) {
    t()
  }, t.setContext = function (t, n) {
    Xt('setContext', t, n)
  }, t.setExtra = function (t, n) {
    Xt('setExtra', t, n)
  }, t.setExtras = function (t) {
    Xt('setExtras', t)
  }, t.setTag = function (t, n) {
    Xt('setTag', t, n)
  }, t.setTags = function (t) {
    Xt('setTags', t)
  }, t.setUser = function (t) {
    Xt('setUser', t)
  }, t.showReportDialog = function (t) {
    void 0 === t && (t = {}), t.eventId || (t.eventId = Ut().lastEventId())
    var n = Ut().getClient()
    n && n.showReportDialog(t)
  }, t.startTransaction = function (t, n) {
    return Xt('startTransaction', c({}, t), n)
  }, t.withScope = Bt, t.wrap = function (t) {
    return Rn(t)()
  }, t
}({})
!function (e) {
  if ('object' == typeof exports && 'undefined' != typeof module) {
    module.exports = e()
  } else if ('function' == typeof define && define.amd) {
    define([], e)
  } else {
    ('undefined' != typeof window ? window : 'undefined' != typeof global ? global : 'undefined' != typeof self ? self : this).localforage = e()
  }
}(function () {
  return function e (n, t, r) {
    function o (a, u) {
      if (!t[a]) {
        if (!n[a]) {
          var c = 'function' == typeof require && require
          if (!u && c) return c(a, !0)
          if (i) return i(a, !0)
          var f = new Error('Cannot find module \'' + a + '\'')
          throw f.code = 'MODULE_NOT_FOUND', f
        }
        var s = t[a] = {exports: {}}
        n[a][0].call(s.exports, function (e) {
          var t = n[a][1][e]
          return o(t || e)
        }, s, s.exports, e, n, t, r)
      }
      return t[a].exports
    }

    for (var i = 'function' == typeof require && require, a = 0; a < r.length; a++) o(r[a])
    return o
  }({
    1: [function (e, n, t) {
      (function (e) {
        'use strict'

        function t () {
          s = !0
          for (var e, n, t = l.length; t;) {
            for (n = l, l = [], e = -1; ++e < t;) n[e]()
            t = l.length
          }
          s = !1
        }

        function r (e) {
          1 !== l.push(e) || s || o()
        }

        var o, i = e.MutationObserver || e.WebKitMutationObserver
        if (i) {
          var a = 0, u = new i(t), c = e.document.createTextNode('')
          u.observe(c, {characterData: !0}), o = function () {
            c.data = a = ++a % 2
          }
        } else if (e.setImmediate || void 0 === e.MessageChannel) {
          o = 'document' in e && 'onreadystatechange' in e.document.createElement('script') ? function () {
            var n = e.document.createElement('script')
            n.onreadystatechange = function () {
              t(), n.onreadystatechange = null, n.parentNode.removeChild(n), n = null
            }, e.document.documentElement.appendChild(n)
          } : function () {
            setTimeout(t, 0)
          }
        } else {
          var f = new e.MessageChannel
          f.port1.onmessage = t, o = function () {
            f.port2.postMessage(0)
          }
        }
        var s, l = []
        n.exports = r
      }).call(this, 'undefined' != typeof global ? global : 'undefined' != typeof self ? self : 'undefined' != typeof window ? window : {})
    }, {}], 2: [function (e, n, t) {
      'use strict'

      function r () {
      }

      function o (e) {
        if ('function' != typeof e) throw new TypeError('resolver must be a function')
        this.state = m, this.queue = [], this.outcome = void 0, e !== r && c(this, e)
      }

      function i (e, n, t) {
        this.promise = e, 'function' == typeof n && (this.onFulfilled = n, this.callFulfilled = this.otherCallFulfilled), 'function' == typeof t && (this.onRejected = t, this.callRejected = this.otherCallRejected)
      }

      function a (e, n, t) {
        h(function () {
          var r
          try {
            r = n(t)
          } catch (n) {
            return y.reject(e, n)
          }
          r === e ? y.reject(e, new TypeError('Cannot resolve promise with itself')) : y.resolve(e, r)
        })
      }

      function u (e) {
        var n = e && e.then
        if (e && ('object' == typeof e || 'function' == typeof e) && 'function' == typeof n) {
          return function () {
            n.apply(e, arguments)
          }
        }
      }

      function c (e, n) {
        function t (n) {
          i || (i = !0, y.reject(e, n))
        }

        function r (n) {
          i || (i = !0, y.resolve(e, n))
        }

        function o () {
          n(r, t)
        }

        var i = !1, a = f(o)
        'error' === a.status && t(a.value)
      }

      function f (e, n) {
        var t = {}
        try {
          t.value = e(n), t.status = 'success'
        } catch (e) {
          t.status = 'error', t.value = e
        }
        return t
      }

      function s (e) {
        return e instanceof this ? e : y.resolve(new this(r), e)
      }

      function l (e) {
        var n = new this(r)
        return y.reject(n, e)
      }

      function d (e) {
        var n = this
        if ('[object Array]' !== Object.prototype.toString.call(e)) return this.reject(new TypeError('must be an array'))
        var t = e.length, o = !1
        if (!t) return this.resolve([])
        for (var i = new Array(t), a = 0, u = -1, c = new this(r); ++u < t;) {
          !function (e, r) {
            function u (e) {
              i[r] = e, ++a !== t || o || (o = !0, y.resolve(c, i))
            }

            n.resolve(e).then(u, function (e) {
              o || (o = !0, y.reject(c, e))
            })
          }(e[u], u)
        }
        return c
      }

      function v (e) {
        var n = this
        if ('[object Array]' !== Object.prototype.toString.call(e)) return this.reject(new TypeError('must be an array'))
        var t = e.length, o = !1
        if (!t) return this.resolve([])
        for (var i = -1, a = new this(r); ++i < t;) {
          !function (e) {
            n.resolve(e).then(function (e) {
              o || (o = !0, y.resolve(a, e))
            }, function (e) {
              o || (o = !0, y.reject(a, e))
            })
          }(e[i])
        }
        return a
      }

      var h = e(1), y = {}, p = ['REJECTED'], b = ['FULFILLED'], m = ['PENDING']
      n.exports = o, o.prototype.catch = function (e) {
        return this.then(null, e)
      }, o.prototype.then = function (e, n) {
        if ('function' != typeof e && this.state === b || 'function' != typeof n && this.state === p) return this
        var t = new this.constructor(r)
        return this.state !== m ? a(t, this.state === b ? e : n, this.outcome) : this.queue.push(new i(t, e, n)), t
      }, i.prototype.callFulfilled = function (e) {
        y.resolve(this.promise, e)
      }, i.prototype.otherCallFulfilled = function (e) {
        a(this.promise, this.onFulfilled, e)
      }, i.prototype.callRejected = function (e) {
        y.reject(this.promise, e)
      }, i.prototype.otherCallRejected = function (e) {
        a(this.promise, this.onRejected, e)
      }, y.resolve = function (e, n) {
        var t = f(u, n)
        if ('error' === t.status) return y.reject(e, t.value)
        var r = t.value
        if (r) {
          c(e, r)
        } else {
          e.state = b, e.outcome = n
          for (var o = -1, i = e.queue.length; ++o < i;) e.queue[o].callFulfilled(n)
        }
        return e
      }, y.reject = function (e, n) {
        e.state = p, e.outcome = n
        for (var t = -1, r = e.queue.length; ++t < r;) e.queue[t].callRejected(n)
        return e
      }, o.resolve = s, o.reject = l, o.all = d, o.race = v
    }, {1: 1}], 3: [function (e, n, t) {
      (function (n) {
        'use strict'
        'function' != typeof n.Promise && (n.Promise = e(2))
      }).call(this, 'undefined' != typeof global ? global : 'undefined' != typeof self ? self : 'undefined' != typeof window ? window : {})
    }, {2: 2}], 4: [function (e, n, t) {
      'use strict'

      function r (e, n) {
        if (!(e instanceof n)) throw new TypeError('Cannot call a class as a function')
      }

      function o (e, n) {
        e = e || [], n = n || {}
        try {
          return new Blob(e, n)
        } catch (o) {
          if ('TypeError' !== o.name) throw o
          for (var t = new ('undefined' != typeof BlobBuilder ? BlobBuilder : 'undefined' != typeof MSBlobBuilder ? MSBlobBuilder : 'undefined' != typeof MozBlobBuilder ? MozBlobBuilder : WebKitBlobBuilder), r = 0; r < e.length; r += 1) t.append(e[r])
          return t.getBlob(n.type)
        }
      }

      function i (e, n) {
        n && e.then(function (e) {
          n(null, e)
        }, function (e) {
          n(e)
        })
      }

      function a (e, n, t) {
        'function' == typeof n && e.then(n), 'function' == typeof t && e.catch(t)
      }

      function u (e) {
        return 'string' != typeof e && (console.warn(e + ' used as a key, but it is not a string.'), e = String(e)), e
      }

      function c () {
        if (arguments.length && 'function' == typeof arguments[arguments.length - 1]) return arguments[arguments.length - 1]
      }

      function f (e) {
        for (var n = e.length, t = new ArrayBuffer(n), r = new Uint8Array(t), o = 0; o < n; o++) r[o] = e.charCodeAt(o)
        return t
      }

      function s (e) {
        return new be(function (n) {
          var t = e.transaction(me, Se), r = o([''])
          t.objectStore(me).put(r, 'key'), t.onabort = function (e) {
            e.preventDefault(), e.stopPropagation(), n(!1)
          }, t.oncomplete = function () {
            var e = navigator.userAgent.match(/Chrome\/(\d+)/), t = navigator.userAgent.match(/Edge\//)
            n(t || !e || parseInt(e[1], 10) >= 43)
          }
        }).catch(function () {
          return !1
        })
      }

      function l (e) {
        return 'boolean' == typeof ge ? be.resolve(ge) : s(e).then(function (e) {
          return ge = e
        })
      }

      function d (e) {
        var n = _e[e.name], t = {}
        t.promise = new be(function (e, n) {
          t.resolve = e, t.reject = n
        }), n.deferredOperations.push(t), n.dbReady ? n.dbReady = n.dbReady.then(function () {
          return t.promise
        }) : n.dbReady = t.promise
      }

      function v (e) {
        var n = _e[e.name].deferredOperations.pop()
        if (n) return n.resolve(), n.promise
      }

      function h (e, n) {
        var t = _e[e.name].deferredOperations.pop()
        if (t) return t.reject(n), t.promise
      }

      function y (e, n) {
        return new be(function (t, r) {
          if (_e[e.name] = _e[e.name] || N(), e.db) {
            if (!n) return t(e.db)
            d(e), e.db.close()
          }
          var o = [e.name]
          n && o.push(e.version)
          var i = pe.open.apply(pe, o)
          n && (i.onupgradeneeded = function (n) {
            var t = i.result
            try {
              t.createObjectStore(e.storeName), n.oldVersion <= 1 && t.createObjectStore(me)
            } catch (t) {
              if ('ConstraintError' !== t.name) throw t
              console.warn('The database "' + e.name + '" has been upgraded from version ' + n.oldVersion + ' to version ' + n.newVersion + ', but the storage "' + e.storeName + '" already exists.')
            }
          }), i.onerror = function (e) {
            e.preventDefault(), r(i.error)
          }, i.onsuccess = function () {
            var n = i.result
            n.onversionchange = function (e) {
              e.target.close()
            }, t(n), v(e)
          }
        })
      }

      function p (e) {
        return y(e, !1)
      }

      function b (e) {
        return y(e, !0)
      }

      function m (e, n) {
        if (!e.db) return !0
        var t = !e.db.objectStoreNames.contains(e.storeName), r = e.version < e.db.version,
          o = e.version > e.db.version
        if (r && (e.version !== n && console.warn('The database "' + e.name + '" can\'t be downgraded from version ' + e.db.version + ' to version ' + e.version + '.'), e.version = e.db.version), o || t) {
          if (t) {
            var i = e.db.version + 1
            i > e.version && (e.version = i)
          }
          return !0
        }
        return !1
      }

      function g (e) {
        return new be(function (n, t) {
          var r = new FileReader
          r.onerror = t, r.onloadend = function (t) {
            var r = btoa(t.target.result || '')
            n({__local_forage_encoded_blob: !0, data: r, type: e.type})
          }, r.readAsBinaryString(e)
        })
      }

      function _ (e) {
        return o([f(atob(e.data))], {type: e.type})
      }

      function w (e) {
        return e && e.__local_forage_encoded_blob
      }

      function I (e) {
        var n = this, t = n._initReady().then(function () {
          var e = _e[n._dbInfo.name]
          if (e && e.dbReady) return e.dbReady
        })
        return a(t, e, e), t
      }

      function S (e) {
        d(e)
        for (var n = _e[e.name], t = n.forages, r = 0; r < t.length; r++) {
          var o = t[r]
          o._dbInfo.db && (o._dbInfo.db.close(), o._dbInfo.db = null)
        }
        return e.db = null, p(e).then(function (n) {
          return e.db = n, m(e) ? b(e) : n
        }).then(function (r) {
          e.db = n.db = r
          for (var o = 0; o < t.length; o++) t[o]._dbInfo.db = r
        }).catch(function (n) {
          throw h(e, n), n
        })
      }

      function E (e, n, t, r) {
        void 0 === r && (r = 1)
        try {
          var o = e.db.transaction(e.storeName, n)
          t(null, o)
        } catch (o) {
          if (r > 0 && (!e.db || 'InvalidStateError' === o.name || 'NotFoundError' === o.name)) {
            return be.resolve().then(function () {
              if (!e.db || 'NotFoundError' === o.name && !e.db.objectStoreNames.contains(e.storeName) && e.version <= e.db.version) return e.db && (e.version = e.db.version + 1), b(e)
            }).then(function () {
              return S(e).then(function () {
                E(e, n, t, r - 1)
              })
            }).catch(t)
          }
          t(o)
        }
      }

      function N () {
        return {forages: [], db: null, dbReady: null, deferredOperations: []}
      }

      function j (e) {
        function n () {
          return be.resolve()
        }

        var t = this, r = {db: null}
        if (e) for (var o in e) r[o] = e[o]
        var i = _e[r.name]
        i || (i = N(), _e[r.name] = i), i.forages.push(t), t._initReady || (t._initReady = t.ready, t.ready = I)
        for (var a = [], u = 0; u < i.forages.length; u++) {
          var c = i.forages[u]
          c !== t && a.push(c._initReady().catch(n))
        }
        var f = i.forages.slice(0)
        return be.all(a).then(function () {
          return r.db = i.db, p(r)
        }).then(function (e) {
          return r.db = e, m(r, t._defaultConfig.version) ? b(r) : e
        }).then(function (e) {
          r.db = i.db = e, t._dbInfo = r
          for (var n = 0; n < f.length; n++) {
            var o = f[n]
            o !== t && (o._dbInfo.db = r.db, o._dbInfo.version = r.version)
          }
        })
      }

      function R (e, n) {
        var t = this
        e = u(e)
        var r = new be(function (n, r) {
          t.ready().then(function () {
            E(t._dbInfo, Ie, function (o, i) {
              if (o) return r(o)
              try {
                var a = i.objectStore(t._dbInfo.storeName).get(e)
                a.onsuccess = function () {
                  var e = a.result
                  void 0 === e && (e = null), w(e) && (e = _(e)), n(e)
                }, a.onerror = function () {
                  r(a.error)
                }
              } catch (e) {
                r(e)
              }
            })
          }).catch(r)
        })
        return i(r, n), r
      }

      function A (e, n) {
        var t = this, r = new be(function (n, r) {
          t.ready().then(function () {
            E(t._dbInfo, Ie, function (o, i) {
              if (o) return r(o)
              try {
                var a = i.objectStore(t._dbInfo.storeName).openCursor(), u = 1
                a.onsuccess = function () {
                  var t = a.result
                  if (t) {
                    var r = t.value
                    w(r) && (r = _(r))
                    var o = e(r, t.key, u++)
                    void 0 !== o ? n(o) : t.continue()
                  } else {
                    n()
                  }
                }, a.onerror = function () {
                  r(a.error)
                }
              } catch (e) {
                r(e)
              }
            })
          }).catch(r)
        })
        return i(r, n), r
      }

      function O (e, n, t) {
        var r = this
        e = u(e)
        var o = new be(function (t, o) {
          var i
          r.ready().then(function () {
            return i = r._dbInfo, '[object Blob]' === we.call(n) ? l(i.db).then(function (e) {
              return e ? n : g(n)
            }) : n
          }).then(function (n) {
            E(r._dbInfo, Se, function (i, a) {
              if (i) return o(i)
              try {
                var u = a.objectStore(r._dbInfo.storeName)
                null === n && (n = void 0)
                var c = u.put(n, e)
                a.oncomplete = function () {
                  void 0 === n && (n = null), t(n)
                }, a.onabort = a.onerror = function () {
                  var e = c.error ? c.error : c.transaction.error
                  o(e)
                }
              } catch (e) {
                o(e)
              }
            })
          }).catch(o)
        })
        return i(o, t), o
      }

      function D (e, n) {
        var t = this
        e = u(e)
        var r = new be(function (n, r) {
          t.ready().then(function () {
            E(t._dbInfo, Se, function (o, i) {
              if (o) return r(o)
              try {
                var a = i.objectStore(t._dbInfo.storeName).delete(e)
                i.oncomplete = function () {
                  n()
                }, i.onerror = function () {
                  r(a.error)
                }, i.onabort = function () {
                  var e = a.error ? a.error : a.transaction.error
                  r(e)
                }
              } catch (e) {
                r(e)
              }
            })
          }).catch(r)
        })
        return i(r, n), r
      }

      function x (e) {
        var n = this, t = new be(function (e, t) {
          n.ready().then(function () {
            E(n._dbInfo, Se, function (r, o) {
              if (r) return t(r)
              try {
                var i = o.objectStore(n._dbInfo.storeName).clear()
                o.oncomplete = function () {
                  e()
                }, o.onabort = o.onerror = function () {
                  var e = i.error ? i.error : i.transaction.error
                  t(e)
                }
              } catch (e) {
                t(e)
              }
            })
          }).catch(t)
        })
        return i(t, e), t
      }

      function B (e) {
        var n = this, t = new be(function (e, t) {
          n.ready().then(function () {
            E(n._dbInfo, Ie, function (r, o) {
              if (r) return t(r)
              try {
                var i = o.objectStore(n._dbInfo.storeName).count()
                i.onsuccess = function () {
                  e(i.result)
                }, i.onerror = function () {
                  t(i.error)
                }
              } catch (e) {
                t(e)
              }
            })
          }).catch(t)
        })
        return i(t, e), t
      }

      function k (e, n) {
        var t = this, r = new be(function (n, r) {
          e < 0 ? n(null) : t.ready().then(function () {
            E(t._dbInfo, Ie, function (o, i) {
              if (o) return r(o)
              try {
                var a = !1, u = i.objectStore(t._dbInfo.storeName).openKeyCursor()
                u.onsuccess = function () {
                  var t = u.result
                  t ? 0 === e ? n(t.key) : a ? n(t.key) : (a = !0, t.advance(e)) : n(null)
                }, u.onerror = function () {
                  r(u.error)
                }
              } catch (e) {
                r(e)
              }
            })
          }).catch(r)
        })
        return i(r, n), r
      }

      function C (e) {
        var n = this, t = new be(function (e, t) {
          n.ready().then(function () {
            E(n._dbInfo, Ie, function (r, o) {
              if (r) return t(r)
              try {
                var i = o.objectStore(n._dbInfo.storeName).openKeyCursor(), a = []
                i.onsuccess = function () {
                  var n = i.result
                  n ? (a.push(n.key), n.continue()) : e(a)
                }, i.onerror = function () {
                  t(i.error)
                }
              } catch (e) {
                t(e)
              }
            })
          }).catch(t)
        })
        return i(t, e), t
      }

      function T (e, n) {
        n = c.apply(this, arguments)
        var t = this.config();
        (e = 'function' != typeof e && e || {}).name || (e.name = e.name || t.name, e.storeName = e.storeName || t.storeName)
        var r, o = this
        if (e.name) {
          var a = e.name === t.name && o._dbInfo.db ? be.resolve(o._dbInfo.db) : p(e).then(function (n) {
            var t = _e[e.name], r = t.forages
            t.db = n
            for (var o = 0; o < r.length; o++) r[o]._dbInfo.db = n
            return n
          })
          r = e.storeName ? a.then(function (n) {
            if (n.objectStoreNames.contains(e.storeName)) {
              var t = n.version + 1
              d(e)
              var r = _e[e.name], o = r.forages
              n.close()
              for (var i = 0; i < o.length; i++) {
                var a = o[i]
                a._dbInfo.db = null, a._dbInfo.version = t
              }
              return new be(function (n, r) {
                var o = pe.open(e.name, t)
                o.onerror = function (e) {
                  o.result.close(), r(e)
                }, o.onupgradeneeded = function () {
                  o.result.deleteObjectStore(e.storeName)
                }, o.onsuccess = function () {
                  var e = o.result
                  e.close(), n(e)
                }
              }).then(function (e) {
                r.db = e
                for (var n = 0; n < o.length; n++) {
                  var t = o[n]
                  t._dbInfo.db = e, v(t._dbInfo)
                }
              }).catch(function (n) {
                throw (h(e, n) || be.resolve()).catch(function () {
                }), n
              })
            }
          }) : a.then(function (n) {
            d(e)
            var t = _e[e.name], r = t.forages
            n.close()
            for (var o = 0; o < r.length; o++) r[o]._dbInfo.db = null
            return new be(function (n, t) {
              var r = pe.deleteDatabase(e.name)
              r.onerror = function () {
                var e = r.result
                e && e.close(), t(r.error)
              }, r.onblocked = function () {
                console.warn('dropInstance blocked for database "' + e.name + '" until all open connections are closed')
              }, r.onsuccess = function () {
                var e = r.result
                e && e.close(), n(e)
              }
            }).then(function (e) {
              t.db = e
              for (var n = 0; n < r.length; n++) v(r[n]._dbInfo)
            }).catch(function (n) {
              throw (h(e, n) || be.resolve()).catch(function () {
              }), n
            })
          })
        } else {
          r = be.reject('Invalid arguments')
        }
        return i(r, n), r
      }

      function F (e) {
        var n, t, r, o, i, a = .75 * e.length, u = e.length, c = 0
        '=' === e[e.length - 1] && (a--, '=' === e[e.length - 2] && a--)
        var f = new ArrayBuffer(a), s = new Uint8Array(f)
        for (n = 0; n < u; n += 4) t = Ne.indexOf(e[n]), r = Ne.indexOf(e[n + 1]), o = Ne.indexOf(e[n + 2]), i = Ne.indexOf(e[n + 3]), s[c++] = t << 2 | r >> 4, s[c++] = (15 & r) << 4 | o >> 2, s[c++] = (3 & o) << 6 | 63 & i
        return f
      }

      function L (e) {
        var n, t = new Uint8Array(e), r = ''
        for (n = 0; n < t.length; n += 3) r += Ne[t[n] >> 2], r += Ne[(3 & t[n]) << 4 | t[n + 1] >> 4], r += Ne[(15 & t[n + 1]) << 2 | t[n + 2] >> 6], r += Ne[63 & t[n + 2]]
        return t.length % 3 == 2 ? r = r.substring(0, r.length - 1) + '=' : t.length % 3 == 1 && (r = r.substring(0, r.length - 2) + '=='), r
      }

      function M (e, n) {
        var t = ''
        if (e && (t = Ue.call(e)), e && ('[object ArrayBuffer]' === t || e.buffer && '[object ArrayBuffer]' === Ue.call(e.buffer))) {
          var r, o = Ae
          e instanceof ArrayBuffer ? (r = e, o += De) : (r = e.buffer, '[object Int8Array]' === t ? o += Be : '[object Uint8Array]' === t ? o += ke : '[object Uint8ClampedArray]' === t ? o += Ce : '[object Int16Array]' === t ? o += Te : '[object Uint16Array]' === t ? o += Le : '[object Int32Array]' === t ? o += Fe : '[object Uint32Array]' === t ? o += Me : '[object Float32Array]' === t ? o += ze : '[object Float64Array]' === t ? o += Pe : n(new Error('Failed to get type for BinaryArray'))), n(o + L(r))
        } else if ('[object Blob]' === t) {
          var i = new FileReader
          i.onload = function () {
            var t = je + e.type + '~' + L(this.result)
            n(Ae + xe + t)
          }, i.readAsArrayBuffer(e)
        } else {
          try {
            n(JSON.stringify(e))
          } catch (t) {
            console.error('Couldn\'t convert value into a JSON string: ', e), n(null, t)
          }
        }
      }

      function z (e) {
        if (e.substring(0, Oe) !== Ae) return JSON.parse(e)
        var n, t = e.substring(qe), r = e.substring(Oe, qe)
        if (r === xe && Re.test(t)) {
          var i = t.match(Re)
          n = i[1], t = t.substring(i[0].length)
        }
        var a = F(t)
        switch (r) {
          case De:
            return a
          case xe:
            return o([a], {type: n})
          case Be:
            return new Int8Array(a)
          case ke:
            return new Uint8Array(a)
          case Ce:
            return new Uint8ClampedArray(a)
          case Te:
            return new Int16Array(a)
          case Le:
            return new Uint16Array(a)
          case Fe:
            return new Int32Array(a)
          case Me:
            return new Uint32Array(a)
          case ze:
            return new Float32Array(a)
          case Pe:
            return new Float64Array(a)
          default:
            throw new Error('Unkown type: ' + r)
        }
      }

      function P (e, n, t, r) {
        e.executeSql('CREATE TABLE IF NOT EXISTS ' + n.storeName + ' (id INTEGER PRIMARY KEY, key unique, value)', [], t, r)
      }

      function q (e) {
        var n = this, t = {db: null}
        if (e) for (var r in e) t[r] = 'string' != typeof e[r] ? e[r].toString() : e[r]
        var o = new be(function (e, r) {
          try {
            t.db = openDatabase(t.name, String(t.version), t.description, t.size)
          } catch (e) {
            return r(e)
          }
          t.db.transaction(function (o) {
            P(o, t, function () {
              n._dbInfo = t, e()
            }, function (e, n) {
              r(n)
            })
          }, r)
        })
        return t.serializer = We, o
      }

      function U (e, n, t, r, o, i) {
        e.executeSql(t, r, o, function (e, a) {
          a.code === a.SYNTAX_ERR ? e.executeSql('SELECT name FROM sqlite_master WHERE type=\'table\' AND name = ?', [n.storeName], function (e, u) {
            u.rows.length ? i(e, a) : P(e, n, function () {
              e.executeSql(t, r, o, i)
            }, i)
          }, i) : i(e, a)
        }, i)
      }

      function W (e, n) {
        var t = this
        e = u(e)
        var r = new be(function (n, r) {
          t.ready().then(function () {
            var o = t._dbInfo
            o.db.transaction(function (t) {
              U(t, o, 'SELECT * FROM ' + o.storeName + ' WHERE key = ? LIMIT 1', [e], function (e, t) {
                var r = t.rows.length ? t.rows.item(0).value : null
                r && (r = o.serializer.deserialize(r)), n(r)
              }, function (e, n) {
                r(n)
              })
            })
          }).catch(r)
        })
        return i(r, n), r
      }

      function K (e, n) {
        var t = this, r = new be(function (n, r) {
          t.ready().then(function () {
            var o = t._dbInfo
            o.db.transaction(function (t) {
              U(t, o, 'SELECT * FROM ' + o.storeName, [], function (t, r) {
                for (var i = r.rows, a = i.length, u = 0; u < a; u++) {
                  var c = i.item(u), f = c.value
                  if (f && (f = o.serializer.deserialize(f)), void 0 !== (f = e(f, c.key, u + 1))) return void n(f)
                }
                n()
              }, function (e, n) {
                r(n)
              })
            })
          }).catch(r)
        })
        return i(r, n), r
      }

      function H (e, n, t, r) {
        var o = this
        e = u(e)
        var a = new be(function (i, a) {
          o.ready().then(function () {
            void 0 === n && (n = null)
            var u = n, c = o._dbInfo
            c.serializer.serialize(n, function (n, f) {
              f ? a(f) : c.db.transaction(function (t) {
                U(t, c, 'INSERT OR REPLACE INTO ' + c.storeName + ' (key, value) VALUES (?, ?)', [e, n], function () {
                  i(u)
                }, function (e, n) {
                  a(n)
                })
              }, function (n) {
                if (n.code === n.QUOTA_ERR) {
                  if (r > 0) return void i(H.apply(o, [e, u, t, r - 1]))
                  a(n)
                }
              })
            })
          }).catch(a)
        })
        return i(a, t), a
      }

      function Q (e, n, t) {
        return H.apply(this, [e, n, t, 1])
      }

      function X (e, n) {
        var t = this
        e = u(e)
        var r = new be(function (n, r) {
          t.ready().then(function () {
            var o = t._dbInfo
            o.db.transaction(function (t) {
              U(t, o, 'DELETE FROM ' + o.storeName + ' WHERE key = ?', [e], function () {
                n()
              }, function (e, n) {
                r(n)
              })
            })
          }).catch(r)
        })
        return i(r, n), r
      }

      function G (e) {
        var n = this, t = new be(function (e, t) {
          n.ready().then(function () {
            var r = n._dbInfo
            r.db.transaction(function (n) {
              U(n, r, 'DELETE FROM ' + r.storeName, [], function () {
                e()
              }, function (e, n) {
                t(n)
              })
            })
          }).catch(t)
        })
        return i(t, e), t
      }

      function J (e) {
        var n = this, t = new be(function (e, t) {
          n.ready().then(function () {
            var r = n._dbInfo
            r.db.transaction(function (n) {
              U(n, r, 'SELECT COUNT(key) as c FROM ' + r.storeName, [], function (n, t) {
                var r = t.rows.item(0).c
                e(r)
              }, function (e, n) {
                t(n)
              })
            })
          }).catch(t)
        })
        return i(t, e), t
      }

      function V (e, n) {
        var t = this, r = new be(function (n, r) {
          t.ready().then(function () {
            var o = t._dbInfo
            o.db.transaction(function (t) {
              U(t, o, 'SELECT key FROM ' + o.storeName + ' WHERE id = ? LIMIT 1', [e + 1], function (e, t) {
                var r = t.rows.length ? t.rows.item(0).key : null
                n(r)
              }, function (e, n) {
                r(n)
              })
            })
          }).catch(r)
        })
        return i(r, n), r
      }

      function Y (e) {
        var n = this, t = new be(function (e, t) {
          n.ready().then(function () {
            var r = n._dbInfo
            r.db.transaction(function (n) {
              U(n, r, 'SELECT key FROM ' + r.storeName, [], function (n, t) {
                for (var r = [], o = 0; o < t.rows.length; o++) r.push(t.rows.item(o).key)
                e(r)
              }, function (e, n) {
                t(n)
              })
            })
          }).catch(t)
        })
        return i(t, e), t
      }

      function Z (e) {
        return new be(function (n, t) {
          e.transaction(function (r) {
            r.executeSql('SELECT name FROM sqlite_master WHERE type=\'table\' AND name <> \'__WebKitDatabaseInfoTable__\'', [], function (t, r) {
              for (var o = [], i = 0; i < r.rows.length; i++) o.push(r.rows.item(i).name)
              n({db: e, storeNames: o})
            }, function (e, n) {
              t(n)
            })
          }, function (e) {
            t(e)
          })
        })
      }

      function $ (e, n) {
        n = c.apply(this, arguments)
        var t = this.config();
        (e = 'function' != typeof e && e || {}).name || (e.name = e.name || t.name, e.storeName = e.storeName || t.storeName)
        var r, o = this
        return r = e.name ? new be(function (n) {
          var r
          r = e.name === t.name ? o._dbInfo.db : openDatabase(e.name, '', '', 0), n(e.storeName ? {
            db: r,
            storeNames: [e.storeName]
          } : Z(r))
        }).then(function (e) {
          return new be(function (n, t) {
            e.db.transaction(function (r) {
              for (var o = [], i = 0, a = e.storeNames.length; i < a; i++) {
                o.push(function (e) {
                  return new be(function (n, t) {
                    r.executeSql('DROP TABLE IF EXISTS ' + e, [], function () {
                      n()
                    }, function (e, n) {
                      t(n)
                    })
                  })
                }(e.storeNames[i]))
              }
              be.all(o).then(function () {
                n()
              }).catch(function (e) {
                t(e)
              })
            }, function (e) {
              t(e)
            })
          })
        }) : be.reject('Invalid arguments'), i(r, n), r
      }

      function ee (e, n) {
        var t = e.name + '/'
        return e.storeName !== n.storeName && (t += e.storeName + '/'), t
      }

      function ne () {
        try {
          return localStorage.setItem('_localforage_support_test', !0), localStorage.removeItem('_localforage_support_test'), !1
        } catch (e) {
          return !0
        }
      }

      function te () {
        return !ne() || localStorage.length > 0
      }

      function re (e) {
        var n = this, t = {}
        if (e) for (var r in e) t[r] = e[r]
        return t.keyPrefix = ee(e, n._defaultConfig), te() ? (n._dbInfo = t, t.serializer = We, be.resolve()) : be.reject()
      }

      function oe (e) {
        var n = this, t = n.ready().then(function () {
          for (var e = n._dbInfo.keyPrefix, t = localStorage.length - 1; t >= 0; t--) {
            var r = localStorage.key(t)
            0 === r.indexOf(e) && localStorage.removeItem(r)
          }
        })
        return i(t, e), t
      }

      function ie (e, n) {
        var t = this
        e = u(e)
        var r = t.ready().then(function () {
          var n = t._dbInfo, r = localStorage.getItem(n.keyPrefix + e)
          return r && (r = n.serializer.deserialize(r)), r
        })
        return i(r, n), r
      }

      function ae (e, n) {
        var t = this, r = t.ready().then(function () {
          for (var n = t._dbInfo, r = n.keyPrefix, o = r.length, i = localStorage.length, a = 1, u = 0; u < i; u++) {
            var c = localStorage.key(u)
            if (0 === c.indexOf(r)) {
              var f = localStorage.getItem(c)
              if (f && (f = n.serializer.deserialize(f)), void 0 !== (f = e(f, c.substring(o), a++))) return f
            }
          }
        })
        return i(r, n), r
      }

      function ue (e, n) {
        var t = this, r = t.ready().then(function () {
          var n, r = t._dbInfo
          try {
            n = localStorage.key(e)
          } catch (e) {
            n = null
          }
          return n && (n = n.substring(r.keyPrefix.length)), n
        })
        return i(r, n), r
      }

      function ce (e) {
        var n = this, t = n.ready().then(function () {
          for (var e = n._dbInfo, t = localStorage.length, r = [], o = 0; o < t; o++) {
            var i = localStorage.key(o)
            0 === i.indexOf(e.keyPrefix) && r.push(i.substring(e.keyPrefix.length))
          }
          return r
        })
        return i(t, e), t
      }

      function fe (e) {
        var n = this.keys().then(function (e) {
          return e.length
        })
        return i(n, e), n
      }

      function se (e, n) {
        var t = this
        e = u(e)
        var r = t.ready().then(function () {
          var n = t._dbInfo
          localStorage.removeItem(n.keyPrefix + e)
        })
        return i(r, n), r
      }

      function le (e, n, t) {
        var r = this
        e = u(e)
        var o = r.ready().then(function () {
          void 0 === n && (n = null)
          var t = n
          return new be(function (o, i) {
            var a = r._dbInfo
            a.serializer.serialize(n, function (n, r) {
              if (r) {
                i(r)
              } else {
                try {
                  localStorage.setItem(a.keyPrefix + e, n), o(t)
                } catch (e) {
                  'QuotaExceededError' !== e.name && 'NS_ERROR_DOM_QUOTA_REACHED' !== e.name || i(e), i(e)
                }
              }
            })
          })
        })
        return i(o, t), o
      }

      function de (e, n) {
        if (n = c.apply(this, arguments), !(e = 'function' != typeof e && e || {}).name) {
          var t = this.config()
          e.name = e.name || t.name, e.storeName = e.storeName || t.storeName
        }
        var r, o = this
        return r = e.name ? new be(function (n) {
          n(e.storeName ? ee(e, o._defaultConfig) : e.name + '/')
        }).then(function (e) {
          for (var n = localStorage.length - 1; n >= 0; n--) {
            var t = localStorage.key(n)
            0 === t.indexOf(e) && localStorage.removeItem(t)
          }
        }) : be.reject('Invalid arguments'), i(r, n), r
      }

      function ve (e, n) {
        e[n] = function () {
          var t = arguments
          return e.ready().then(function () {
            return e[n].apply(e, t)
          })
        }
      }

      function he () {
        for (var e = 1; e < arguments.length; e++) {
          var n = arguments[e]
          if (n) for (var t in n) n.hasOwnProperty(t) && (Ge(n[t]) ? arguments[0][t] = n[t].slice() : arguments[0][t] = n[t])
        }
        return arguments[0]
      }

      var ye = 'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator ? function (e) {
        return typeof e
      } : function (e) {
        return e && 'function' == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? 'symbol' : typeof e
      }, pe = function () {
        try {
          if ('undefined' != typeof indexedDB) return indexedDB
          if ('undefined' != typeof webkitIndexedDB) return webkitIndexedDB
          if ('undefined' != typeof mozIndexedDB) return mozIndexedDB
          if ('undefined' != typeof OIndexedDB) return OIndexedDB
          if ('undefined' != typeof msIndexedDB) return msIndexedDB
        } catch (e) {
          return
        }
      }()
      'undefined' == typeof Promise && e(3)
      var be = Promise, me = 'local-forage-detect-blob-support', ge = void 0, _e = {}, we = Object.prototype.toString,
        Ie = 'readonly', Se = 'readwrite', Ee = {
          _driver: 'asyncStorage', _initStorage: j, _support: function () {
            try {
              if (!pe || !pe.open) return !1
              var e = 'undefined' != typeof openDatabase && /(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent) && !/Chrome/.test(navigator.userAgent) && !/BlackBerry/.test(navigator.platform),
                n = 'function' == typeof fetch && -1 !== fetch.toString().indexOf('[native code')
              return (!e || n) && 'undefined' != typeof indexedDB && 'undefined' != typeof IDBKeyRange
            } catch (e) {
              return !1
            }
          }(), iterate: A, getItem: R, setItem: O, removeItem: D, clear: x, length: B, key: k, keys: C, dropInstance: T
        }, Ne = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/', je = '~~local_forage_type~',
        Re = /^~~local_forage_type~([^~]+)~/, Ae = '__lfsc__:', Oe = Ae.length, De = 'arbf', xe = 'blob', Be = 'si08',
        ke = 'ui08', Ce = 'uic8', Te = 'si16', Fe = 'si32', Le = 'ur16', Me = 'ui32', ze = 'fl32', Pe = 'fl64',
        qe = Oe + De.length, Ue = Object.prototype.toString,
        We = {serialize: M, deserialize: z, stringToBuffer: F, bufferToString: L}, Ke = {
          _driver: 'webSQLStorage', _initStorage: q, _support: function () {
            return 'function' == typeof openDatabase
          }(), iterate: K, getItem: W, setItem: Q, removeItem: X, clear: G, length: J, key: V, keys: Y, dropInstance: $
        }, He = {
          _driver: 'localStorageWrapper',
          _initStorage: re,
          _support: function () {
            try {
              return 'undefined' != typeof localStorage && 'setItem' in localStorage && !!localStorage.setItem
            } catch (e) {
              return !1
            }
          }(),
          iterate: ae,
          getItem: ie,
          setItem: le,
          removeItem: se,
          clear: oe,
          length: fe,
          key: ue,
          keys: ce,
          dropInstance: de
        }, Qe = function (e, n) {
          return e === n || 'number' == typeof e && 'number' == typeof n && isNaN(e) && isNaN(n)
        }, Xe = function (e, n) {
          for (var t = e.length, r = 0; r < t;) {
            if (Qe(e[r], n)) return !0
            r++
          }
          return !1
        }, Ge = Array.isArray || function (e) {
          return '[object Array]' === Object.prototype.toString.call(e)
        }, Je = {}, Ve = {}, Ye = {INDEXEDDB: Ee, WEBSQL: Ke, LOCALSTORAGE: He},
        Ze = [Ye.INDEXEDDB._driver, Ye.WEBSQL._driver, Ye.LOCALSTORAGE._driver], $e = ['dropInstance'],
        en = ['clear', 'getItem', 'iterate', 'key', 'keys', 'length', 'removeItem', 'setItem'].concat($e), nn = {
          description: '',
          driver: Ze.slice(),
          name: 'localforage',
          size: 4980736,
          storeName: 'keyvaluepairs',
          version: 1
        }, tn = new (function () {
          function e (n) {
            r(this, e)
            for (var t in Ye) {
              if (Ye.hasOwnProperty(t)) {
                var o = Ye[t], i = o._driver
                this[t] = i, Je[i] || this.defineDriver(o)
              }
            }
            this._defaultConfig = he({}, nn), this._config = he({}, this._defaultConfig, n), this._driverSet = null, this._initDriver = null, this._ready = !1, this._dbInfo = null, this._wrapLibraryMethodsWithReady(), this.setDriver(this._config.driver).catch(function () {
            })
          }

          return e.prototype.config = function (e) {
            if ('object' === (void 0 === e ? 'undefined' : ye(e))) {
              if (this._ready) return new Error('Can\'t call config() after localforage has been used.')
              for (var n in e) {
                if ('storeName' === n && (e[n] = e[n].replace(/\W/g, '_')), 'version' === n && 'number' != typeof e[n]) return new Error('Database version must be a number.')
                this._config[n] = e[n]
              }
              return !('driver' in e && e.driver) || this.setDriver(this._config.driver)
            }
            return 'string' == typeof e ? this._config[e] : this._config
          }, e.prototype.defineDriver = function (e, n, t) {
            var r = new be(function (n, t) {
              try {
                var r = e._driver,
                  o = new Error('Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver')
                if (!e._driver) return void t(o)
                for (var a = en.concat('_initStorage'), u = 0, c = a.length; u < c; u++) {
                  var f = a[u]
                  if ((!Xe($e, f) || e[f]) && 'function' != typeof e[f]) return void t(o)
                }
                !function () {
                  for (var n = 0, t = $e.length; n < t; n++) {
                    var r = $e[n]
                    e[r] || (e[r] = function (e) {
                      return function () {
                        var n = new Error('Method ' + e + ' is not implemented by the current driver'), t = be.reject(n)
                        return i(t, arguments[arguments.length - 1]), t
                      }
                    }(r))
                  }
                }()
                var s = function (t) {
                  Je[r] && console.info('Redefining LocalForage driver: ' + r), Je[r] = e, Ve[r] = t, n()
                }
                '_support' in e ? e._support && 'function' == typeof e._support ? e._support().then(s, t) : s(!!e._support) : s(!0)
              } catch (e) {
                t(e)
              }
            })
            return a(r, n, t), r
          }, e.prototype.driver = function () {
            return this._driver || null
          }, e.prototype.getDriver = function (e, n, t) {
            var r = Je[e] ? be.resolve(Je[e]) : be.reject(new Error('Driver not found.'))
            return a(r, n, t), r
          }, e.prototype.getSerializer = function (e) {
            var n = be.resolve(We)
            return a(n, e), n
          }, e.prototype.ready = function (e) {
            var n = this, t = n._driverSet.then(function () {
              return null === n._ready && (n._ready = n._initDriver()), n._ready
            })
            return a(t, e, e), t
          }, e.prototype.setDriver = function (e, n, t) {
            function r () {
              u._config.driver = u.driver()
            }

            function o (e) {
              return u._extend(e), r(), u._ready = u._initStorage(u._config), u._ready
            }

            function i (e) {
              return function () {
                function n () {
                  for (; t < e.length;) {
                    var i = e[t]
                    return t++, u._dbInfo = null, u._ready = null, u.getDriver(i).then(o).catch(n)
                  }
                  r()
                  var a = new Error('No available storage method found.')
                  return u._driverSet = be.reject(a), u._driverSet
                }

                var t = 0
                return n()
              }
            }

            var u = this
            Ge(e) || (e = [e])
            var c = this._getSupportedDrivers(e), f = null !== this._driverSet ? this._driverSet.catch(function () {
              return be.resolve()
            }) : be.resolve()
            return this._driverSet = f.then(function () {
              var e = c[0]
              return u._dbInfo = null, u._ready = null, u.getDriver(e).then(function (e) {
                u._driver = e._driver, r(), u._wrapLibraryMethodsWithReady(), u._initDriver = i(c)
              })
            }).catch(function () {
              r()
              var e = new Error('No available storage method found.')
              return u._driverSet = be.reject(e), u._driverSet
            }), a(this._driverSet, n, t), this._driverSet
          }, e.prototype.supports = function (e) {
            return !!Ve[e]
          }, e.prototype._extend = function (e) {
            he(this, e)
          }, e.prototype._getSupportedDrivers = function (e) {
            for (var n = [], t = 0, r = e.length; t < r; t++) {
              var o = e[t]
              this.supports(o) && n.push(o)
            }
            return n
          }, e.prototype._wrapLibraryMethodsWithReady = function () {
            for (var e = 0, n = en.length; e < n; e++) ve(this, en[e])
          }, e.prototype.createInstance = function (n) {
            if (n && n.name && window.MFC) {
              var t = window.MFC, r = t.entryInfo && t.entryInfo.isTYF ? '_tyf' : ''
              n.name += r
            }
            return new e(n)
          }, e
        }())
      n.exports = tn
    }, {3: 3}]
  }, {}, [4])(4)
})
var __reflect = this && this.__reflect || function (e, t, n) {
  e.__class__ = t, n ? n.push(t) : n = [t], e.__types__ = e.__types__ ? n.concat(e.__types__) : n
}, __awaiter = this && this.__awaiter || function (e, t, n, o) {
  return new (n || (n = Promise))(function (r, a) {
    function i (e) {
      try {
        u(o.next(e))
      } catch (t) {
        a(t)
      }
    }

    function c (e) {
      try {
        u(o['throw'](e))
      } catch (t) {
        a(t)
      }
    }

    function u (e) {
      e.done ? r(e.value) : new n(function (t) {
        t(e.value)
      }).then(i, c)
    }

    u((o = o.apply(e, t || [])).next())
  })
}, __generator = this && this.__generator || function (e, t) {
  function n (e) {
    return function (t) {
      return o([e, t])
    }
  }

  function o (n) {
    if (r) throw new TypeError('Generator is already executing.')
    for (; u;) {
      try {
        if (r = 1, a && (i = a[2 & n[0] ? 'return' : n[0] ? 'throw' : 'next']) && !(i = i.call(a, n[1])).done) return i
        switch (a = 0, i && (n = [0, i.value]), n[0]) {
          case 0:
          case 1:
            i = n
            break
          case 4:
            return u.label++, {value: n[1], done: !1}
          case 5:
            u.label++, a = n[1], n = [0]
            continue
          case 7:
            n = u.ops.pop(), u.trys.pop()
            continue
          default:
            if (i = u.trys, !(i = i.length > 0 && i[i.length - 1]) && (6 === n[0] || 2 === n[0])) {
              u = 0
              continue
            }
            if (3 === n[0] && (!i || n[1] > i[0] && n[1] < i[3])) {
              u.label = n[1]
              break
            }
            if (6 === n[0] && u.label < i[1]) {
              u.label = i[1], i = n
              break
            }
            if (i && u.label < i[2]) {
              u.label = i[2], u.ops.push(n)
              break
            }
            i[2] && u.ops.pop(), u.trys.pop()
            continue
        }
        n = t.call(e, u)
      } catch (o) {
        n = [6, o], a = 0
      } finally {
        r = i = 0
      }
    }
    if (5 & n[0]) throw n[1]
    return {value: n[0] ? n[1] : void 0, done: !0}
  }

  var r, a, i, c, u = {
    label: 0, sent: function () {
      if (1 & i[0]) throw i[1]
      return i[1]
    }, trys: [], ops: []
  }
  return c = {
    next: n(0),
    'throw': n(1),
    'return': n(2)
  }, 'function' == typeof Symbol && (c[Symbol.iterator] = function () {
    return this
  }), c
}, deviceManager
!function (e) {
  function t () {
    return window.indexedDB || window.webkitIndexedDB || window.mozIndexedDB || window.OIndexedDB || window.msIndexedDB ? !0 : !1
  }

  function n () {
    return __awaiter(this, void 0, void 0, function () {
      var t
      return __generator(this, function (n) {
        switch (n.label) {
          case 0:
            return [4, e.localInfo.getInfo('device_uuid')]
          case 1:
            return (t = n.sent()) ? [3, 3] : (t = window.device && window.device.uuid ? window.device.uuid : window.uuidv4 ? window.uuidv4() : (Math.random() * Date.now()).toFixed(0), [4, e.localInfo.setInfo('device_uuid', t)])
          case 2:
            n.sent(), n.label = 3
          case 3:
            return localStorage.setItem('serialvalue', t.substr(0, 8)), e.uuid = t, [2, t]
        }
      })
    })
  }

  e.checkIndexedDBAvailable = t, e.getUUID = n
  var o = function () {
    function e () {
      if (t()) {
        try {
          this.storage = window.localforage.createInstance({name: 'seer61', storeName: 'deviceInfo'})
        } catch (e) {
          console.error('Device Forage Init FAILED' + e), this.storage = localStorage
        }
      } else {
        window.Sentry && window.Sentry.captureMessageAll('indexedDB '), this.storage = localStorage
      }
    }

    return e.prototype.getInfo = function (e) {
      return this.storage.getItem(e)
    }, e.prototype.setInfo = function (e, t) {
      return this.storage.setItem(e, t)
    }, e.prototype.removeInfo = function (e) {
      return this.storage.removeItem(e)
    }, e.prototype.clearAllInfo = function () {
      this.storage && this.storage.dropInstance && this.storage.dropInstance()
    }, e
  }()
  e.LocalInfoManager = o, __reflect(o.prototype, 'deviceManager.LocalInfoManager'), e.localInfo = new e.LocalInfoManager, e.getUUID()
}(deviceManager || (deviceManager = {}));
(function (factory) {
  if (typeof exports === 'object') {
    module.exports = factory()
  } else if (typeof define === 'function' && define.amd) {
    define(factory)
  } else {
    var glob
    try {
      glob = window
    } catch (e) {
      glob = self
    }
    glob.SparkMD5 = factory()
  }
})(function (undefined) {
  'use strict'
  var add32 = function (a, b) {
    return a + b & 4294967295
  }, hex_chr = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f']

  function cmn (q, a, b, x, s, t) {
    a = add32(add32(a, q), add32(x, t))
    return add32(a << s | a >>> 32 - s, b)
  }

  function md5cycle (x, k) {
    var a = x[0], b = x[1], c = x[2], d = x[3]
    a += (b & c | ~b & d) + k[0] - 680876936 | 0
    a = (a << 7 | a >>> 25) + b | 0
    d += (a & b | ~a & c) + k[1] - 389564586 | 0
    d = (d << 12 | d >>> 20) + a | 0
    c += (d & a | ~d & b) + k[2] + 606105819 | 0
    c = (c << 17 | c >>> 15) + d | 0
    b += (c & d | ~c & a) + k[3] - 1044525330 | 0
    b = (b << 22 | b >>> 10) + c | 0
    a += (b & c | ~b & d) + k[4] - 176418897 | 0
    a = (a << 7 | a >>> 25) + b | 0
    d += (a & b | ~a & c) + k[5] + 1200080426 | 0
    d = (d << 12 | d >>> 20) + a | 0
    c += (d & a | ~d & b) + k[6] - 1473231341 | 0
    c = (c << 17 | c >>> 15) + d | 0
    b += (c & d | ~c & a) + k[7] - 45705983 | 0
    b = (b << 22 | b >>> 10) + c | 0
    a += (b & c | ~b & d) + k[8] + 1770035416 | 0
    a = (a << 7 | a >>> 25) + b | 0
    d += (a & b | ~a & c) + k[9] - 1958414417 | 0
    d = (d << 12 | d >>> 20) + a | 0
    c += (d & a | ~d & b) + k[10] - 42063 | 0
    c = (c << 17 | c >>> 15) + d | 0
    b += (c & d | ~c & a) + k[11] - 1990404162 | 0
    b = (b << 22 | b >>> 10) + c | 0
    a += (b & c | ~b & d) + k[12] + 1804603682 | 0
    a = (a << 7 | a >>> 25) + b | 0
    d += (a & b | ~a & c) + k[13] - 40341101 | 0
    d = (d << 12 | d >>> 20) + a | 0
    c += (d & a | ~d & b) + k[14] - 1502002290 | 0
    c = (c << 17 | c >>> 15) + d | 0
    b += (c & d | ~c & a) + k[15] + 1236535329 | 0
    b = (b << 22 | b >>> 10) + c | 0
    a += (b & d | c & ~d) + k[1] - 165796510 | 0
    a = (a << 5 | a >>> 27) + b | 0
    d += (a & c | b & ~c) + k[6] - 1069501632 | 0
    d = (d << 9 | d >>> 23) + a | 0
    c += (d & b | a & ~b) + k[11] + 643717713 | 0
    c = (c << 14 | c >>> 18) + d | 0
    b += (c & a | d & ~a) + k[0] - 373897302 | 0
    b = (b << 20 | b >>> 12) + c | 0
    a += (b & d | c & ~d) + k[5] - 701558691 | 0
    a = (a << 5 | a >>> 27) + b | 0
    d += (a & c | b & ~c) + k[10] + 38016083 | 0
    d = (d << 9 | d >>> 23) + a | 0
    c += (d & b | a & ~b) + k[15] - 660478335 | 0
    c = (c << 14 | c >>> 18) + d | 0
    b += (c & a | d & ~a) + k[4] - 405537848 | 0
    b = (b << 20 | b >>> 12) + c | 0
    a += (b & d | c & ~d) + k[9] + 568446438 | 0
    a = (a << 5 | a >>> 27) + b | 0
    d += (a & c | b & ~c) + k[14] - 1019803690 | 0
    d = (d << 9 | d >>> 23) + a | 0
    c += (d & b | a & ~b) + k[3] - 187363961 | 0
    c = (c << 14 | c >>> 18) + d | 0
    b += (c & a | d & ~a) + k[8] + 1163531501 | 0
    b = (b << 20 | b >>> 12) + c | 0
    a += (b & d | c & ~d) + k[13] - 1444681467 | 0
    a = (a << 5 | a >>> 27) + b | 0
    d += (a & c | b & ~c) + k[2] - 51403784 | 0
    d = (d << 9 | d >>> 23) + a | 0
    c += (d & b | a & ~b) + k[7] + 1735328473 | 0
    c = (c << 14 | c >>> 18) + d | 0
    b += (c & a | d & ~a) + k[12] - 1926607734 | 0
    b = (b << 20 | b >>> 12) + c | 0
    a += (b ^ c ^ d) + k[5] - 378558 | 0
    a = (a << 4 | a >>> 28) + b | 0
    d += (a ^ b ^ c) + k[8] - 2022574463 | 0
    d = (d << 11 | d >>> 21) + a | 0
    c += (d ^ a ^ b) + k[11] + 1839030562 | 0
    c = (c << 16 | c >>> 16) + d | 0
    b += (c ^ d ^ a) + k[14] - 35309556 | 0
    b = (b << 23 | b >>> 9) + c | 0
    a += (b ^ c ^ d) + k[1] - 1530992060 | 0
    a = (a << 4 | a >>> 28) + b | 0
    d += (a ^ b ^ c) + k[4] + 1272893353 | 0
    d = (d << 11 | d >>> 21) + a | 0
    c += (d ^ a ^ b) + k[7] - 155497632 | 0
    c = (c << 16 | c >>> 16) + d | 0
    b += (c ^ d ^ a) + k[10] - 1094730640 | 0
    b = (b << 23 | b >>> 9) + c | 0
    a += (b ^ c ^ d) + k[13] + 681279174 | 0
    a = (a << 4 | a >>> 28) + b | 0
    d += (a ^ b ^ c) + k[0] - 358537222 | 0
    d = (d << 11 | d >>> 21) + a | 0
    c += (d ^ a ^ b) + k[3] - 722521979 | 0
    c = (c << 16 | c >>> 16) + d | 0
    b += (c ^ d ^ a) + k[6] + 76029189 | 0
    b = (b << 23 | b >>> 9) + c | 0
    a += (b ^ c ^ d) + k[9] - 640364487 | 0
    a = (a << 4 | a >>> 28) + b | 0
    d += (a ^ b ^ c) + k[12] - 421815835 | 0
    d = (d << 11 | d >>> 21) + a | 0
    c += (d ^ a ^ b) + k[15] + 530742520 | 0
    c = (c << 16 | c >>> 16) + d | 0
    b += (c ^ d ^ a) + k[2] - 995338651 | 0
    b = (b << 23 | b >>> 9) + c | 0
    a += (c ^ (b | ~d)) + k[0] - 198630844 | 0
    a = (a << 6 | a >>> 26) + b | 0
    d += (b ^ (a | ~c)) + k[7] + 1126891415 | 0
    d = (d << 10 | d >>> 22) + a | 0
    c += (a ^ (d | ~b)) + k[14] - 1416354905 | 0
    c = (c << 15 | c >>> 17) + d | 0
    b += (d ^ (c | ~a)) + k[5] - 57434055 | 0
    b = (b << 21 | b >>> 11) + c | 0
    a += (c ^ (b | ~d)) + k[12] + 1700485571 | 0
    a = (a << 6 | a >>> 26) + b | 0
    d += (b ^ (a | ~c)) + k[3] - 1894986606 | 0
    d = (d << 10 | d >>> 22) + a | 0
    c += (a ^ (d | ~b)) + k[10] - 1051523 | 0
    c = (c << 15 | c >>> 17) + d | 0
    b += (d ^ (c | ~a)) + k[1] - 2054922799 | 0
    b = (b << 21 | b >>> 11) + c | 0
    a += (c ^ (b | ~d)) + k[8] + 1873313359 | 0
    a = (a << 6 | a >>> 26) + b | 0
    d += (b ^ (a | ~c)) + k[15] - 30611744 | 0
    d = (d << 10 | d >>> 22) + a | 0
    c += (a ^ (d | ~b)) + k[6] - 1560198380 | 0
    c = (c << 15 | c >>> 17) + d | 0
    b += (d ^ (c | ~a)) + k[13] + 1309151649 | 0
    b = (b << 21 | b >>> 11) + c | 0
    a += (c ^ (b | ~d)) + k[4] - 145523070 | 0
    a = (a << 6 | a >>> 26) + b | 0
    d += (b ^ (a | ~c)) + k[11] - 1120210379 | 0
    d = (d << 10 | d >>> 22) + a | 0
    c += (a ^ (d | ~b)) + k[2] + 718787259 | 0
    c = (c << 15 | c >>> 17) + d | 0
    b += (d ^ (c | ~a)) + k[9] - 343485551 | 0
    b = (b << 21 | b >>> 11) + c | 0
    x[0] = a + x[0] | 0
    x[1] = b + x[1] | 0
    x[2] = c + x[2] | 0
    x[3] = d + x[3] | 0
  }

  function md5blk (s) {
    var md5blks = [], i
    for (i = 0; i < 64; i += 4) {
      md5blks[i >> 2] = s.charCodeAt(i) + (s.charCodeAt(i + 1) << 8) + (s.charCodeAt(i + 2) << 16) + (s.charCodeAt(i + 3) << 24)
    }
    return md5blks
  }

  function md5blk_array (a) {
    var md5blks = [], i
    for (i = 0; i < 64; i += 4) {
      md5blks[i >> 2] = a[i] + (a[i + 1] << 8) + (a[i + 2] << 16) + (a[i + 3] << 24)
    }
    return md5blks
  }

  function md51 (s) {
    var n = s.length, state = [1732584193, -271733879, -1732584194, 271733878], i, length, tail, tmp, lo, hi
    for (i = 64; i <= n; i += 64) {
      md5cycle(state, md5blk(s.substring(i - 64, i)))
    }
    s = s.substring(i - 64)
    length = s.length
    tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
    for (i = 0; i < length; i += 1) {
      tail[i >> 2] |= s.charCodeAt(i) << (i % 4 << 3)
    }
    tail[i >> 2] |= 128 << (i % 4 << 3)
    if (i > 55) {
      md5cycle(state, tail)
      for (i = 0; i < 16; i += 1) {
        tail[i] = 0
      }
    }
    tmp = n * 8
    tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/)
    lo = parseInt(tmp[2], 16)
    hi = parseInt(tmp[1], 16) || 0
    tail[14] = lo
    tail[15] = hi
    md5cycle(state, tail)
    return state
  }

  function md51_array (a) {
    var n = a.length, state = [1732584193, -271733879, -1732584194, 271733878], i, length, tail, tmp, lo, hi
    for (i = 64; i <= n; i += 64) {
      md5cycle(state, md5blk_array(a.subarray(i - 64, i)))
    }
    a = i - 64 < n ? a.subarray(i - 64) : new Uint8Array(0)
    length = a.length
    tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
    for (i = 0; i < length; i += 1) {
      tail[i >> 2] |= a[i] << (i % 4 << 3)
    }
    tail[i >> 2] |= 128 << (i % 4 << 3)
    if (i > 55) {
      md5cycle(state, tail)
      for (i = 0; i < 16; i += 1) {
        tail[i] = 0
      }
    }
    tmp = n * 8
    tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/)
    lo = parseInt(tmp[2], 16)
    hi = parseInt(tmp[1], 16) || 0
    tail[14] = lo
    tail[15] = hi
    md5cycle(state, tail)
    return state
  }

  function rhex (n) {
    var s = '', j
    for (j = 0; j < 4; j += 1) {
      s += hex_chr[n >> j * 8 + 4 & 15] + hex_chr[n >> j * 8 & 15]
    }
    return s
  }

  function hex (x) {
    var i
    for (i = 0; i < x.length; i += 1) {
      x[i] = rhex(x[i])
    }
    return x.join('')
  }

  if (hex(md51('hello')) !== '5d41402abc4b2a76b9719d911017c592') {
    add32 = function (x, y) {
      var lsw = (x & 65535) + (y & 65535), msw = (x >> 16) + (y >> 16) + (lsw >> 16)
      return msw << 16 | lsw & 65535
    }
  }
  if (typeof ArrayBuffer !== 'undefined' && !ArrayBuffer.prototype.slice) {
    (function () {
      function clamp (val, length) {
        val = val | 0 || 0
        if (val < 0) {
          return Math.max(val + length, 0)
        }
        return Math.min(val, length)
      }

      ArrayBuffer.prototype.slice = function (from, to) {
        var length = this.byteLength, begin = clamp(from, length), end = length, num, target, targetArray, sourceArray
        if (to !== undefined) {
          end = clamp(to, length)
        }
        if (begin > end) {
          return new ArrayBuffer(0)
        }
        num = end - begin
        target = new ArrayBuffer(num)
        targetArray = new Uint8Array(target)
        sourceArray = new Uint8Array(this, begin, num)
        targetArray.set(sourceArray)
        return target
      }
    })()
  }

  function toUtf8 (str) {
    if (/[\u0080-\uFFFF]/.test(str)) {
      str = unescape(encodeURIComponent(str))
    }
    return str
  }

  function utf8Str2ArrayBuffer (str, returnUInt8Array) {
    var length = str.length, buff = new ArrayBuffer(length), arr = new Uint8Array(buff), i
    for (i = 0; i < length; i += 1) {
      arr[i] = str.charCodeAt(i)
    }
    return returnUInt8Array ? arr : buff
  }

  function arrayBuffer2Utf8Str (buff) {
    return String.fromCharCode.apply(null, new Uint8Array(buff))
  }

  function concatenateArrayBuffers (first, second, returnUInt8Array) {
    var result = new Uint8Array(first.byteLength + second.byteLength)
    result.set(new Uint8Array(first))
    result.set(new Uint8Array(second), first.byteLength)
    return returnUInt8Array ? result : result.buffer
  }

  function hexToBinaryString (hex) {
    var bytes = [], length = hex.length, x
    for (x = 0; x < length - 1; x += 2) {
      bytes.push(parseInt(hex.substr(x, 2), 16))
    }
    return String.fromCharCode.apply(String, bytes)
  }

  function SparkMD5 () {
    this.reset()
  }

  SparkMD5.prototype.append = function (str) {
    this.appendBinary(toUtf8(str))
    return this
  }
  SparkMD5.prototype.appendBinary = function (contents) {
    this._buff += contents
    this._length += contents.length
    var length = this._buff.length, i
    for (i = 64; i <= length; i += 64) {
      md5cycle(this._hash, md5blk(this._buff.substring(i - 64, i)))
    }
    this._buff = this._buff.substring(i - 64)
    return this
  }
  SparkMD5.prototype.end = function (raw) {
    var buff = this._buff, length = buff.length, i, tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], ret
    for (i = 0; i < length; i += 1) {
      tail[i >> 2] |= buff.charCodeAt(i) << (i % 4 << 3)
    }
    this._finish(tail, length)
    ret = hex(this._hash)
    if (raw) {
      ret = hexToBinaryString(ret)
    }
    this.reset()
    return ret
  }
  SparkMD5.prototype.reset = function () {
    this._buff = ''
    this._length = 0
    this._hash = [1732584193, -271733879, -1732584194, 271733878]
    return this
  }
  SparkMD5.prototype.getState = function () {
    return {buff: this._buff, length: this._length, hash: this._hash.slice()}
  }
  SparkMD5.prototype.setState = function (state) {
    this._buff = state.buff
    this._length = state.length
    this._hash = state.hash
    return this
  }
  SparkMD5.prototype.destroy = function () {
    delete this._hash
    delete this._buff
    delete this._length
  }
  SparkMD5.prototype._finish = function (tail, length) {
    var i = length, tmp, lo, hi
    tail[i >> 2] |= 128 << (i % 4 << 3)
    if (i > 55) {
      md5cycle(this._hash, tail)
      for (i = 0; i < 16; i += 1) {
        tail[i] = 0
      }
    }
    tmp = this._length * 8
    tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/)
    lo = parseInt(tmp[2], 16)
    hi = parseInt(tmp[1], 16) || 0
    tail[14] = lo
    tail[15] = hi
    md5cycle(this._hash, tail)
  }
  SparkMD5.hash = function (str, raw) {
    return SparkMD5.hashBinary(toUtf8(str), raw)
  }
  SparkMD5.hashBinary = function (content, raw) {
    var hash = md51(content), ret = hex(hash)
    return raw ? hexToBinaryString(ret) : ret
  }
  SparkMD5.ArrayBuffer = function () {
    this.reset()
  }
  SparkMD5.ArrayBuffer.prototype.append = function (arr) {
    var buff = concatenateArrayBuffers(this._buff.buffer, arr, true), length = buff.length, i
    this._length += arr.byteLength
    for (i = 64; i <= length; i += 64) {
      md5cycle(this._hash, md5blk_array(buff.subarray(i - 64, i)))
    }
    this._buff = i - 64 < length ? new Uint8Array(buff.buffer.slice(i - 64)) : new Uint8Array(0)
    return this
  }
  SparkMD5.ArrayBuffer.prototype.end = function (raw) {
    var buff = this._buff, length = buff.length, tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], i, ret
    for (i = 0; i < length; i += 1) {
      tail[i >> 2] |= buff[i] << (i % 4 << 3)
    }
    this._finish(tail, length)
    ret = hex(this._hash)
    if (raw) {
      ret = hexToBinaryString(ret)
    }
    this.reset()
    return ret
  }
  SparkMD5.ArrayBuffer.prototype.reset = function () {
    this._buff = new Uint8Array(0)
    this._length = 0
    this._hash = [1732584193, -271733879, -1732584194, 271733878]
    return this
  }
  SparkMD5.ArrayBuffer.prototype.getState = function () {
    var state = SparkMD5.prototype.getState.call(this)
    state.buff = arrayBuffer2Utf8Str(state.buff)
    return state
  }
  SparkMD5.ArrayBuffer.prototype.setState = function (state) {
    state.buff = utf8Str2ArrayBuffer(state.buff, true)
    return SparkMD5.prototype.setState.call(this, state)
  }
  SparkMD5.ArrayBuffer.prototype.destroy = SparkMD5.prototype.destroy
  SparkMD5.ArrayBuffer.prototype._finish = SparkMD5.prototype._finish
  SparkMD5.ArrayBuffer.hash = function (arr, raw) {
    var hash = md51_array(new Uint8Array(arr)), ret = hex(hash)
    return raw ? hexToBinaryString(ret) : ret
  }
  return SparkMD5
})
var __reflect = this && this.__reflect || function (e, t, r) {
  e.__class__ = t, r ? r.push(t) : r = [t], e.__types__ = e.__types__ ? r.concat(e.__types__) : r
}, __awaiter = this && this.__awaiter || function (e, t, r, n) {
  return new (r || (r = Promise))(function (i, a) {
    function o (e) {
      try {
        c(n.next(e))
      } catch (t) {
        a(t)
      }
    }

    function s (e) {
      try {
        c(n['throw'](e))
      } catch (t) {
        a(t)
      }
    }

    function c (e) {
      e.done ? i(e.value) : new r(function (t) {
        t(e.value)
      }).then(o, s)
    }

    c((n = n.apply(e, t || [])).next())
  })
}, __generator = this && this.__generator || function (e, t) {
  function r (e) {
    return function (t) {
      return n([e, t])
    }
  }

  function n (r) {
    if (i) throw new TypeError('Generator is already executing.')
    for (; c;) {
      try {
        if (i = 1, a && (o = a[2 & r[0] ? 'return' : r[0] ? 'throw' : 'next']) && !(o = o.call(a, r[1])).done) return o
        switch (a = 0, o && (r = [0, o.value]), r[0]) {
          case 0:
          case 1:
            o = r
            break
          case 4:
            return c.label++, {value: r[1], done: !1}
          case 5:
            c.label++, a = r[1], r = [0]
            continue
          case 7:
            r = c.ops.pop(), c.trys.pop()
            continue
          default:
            if (o = c.trys, !(o = o.length > 0 && o[o.length - 1]) && (6 === r[0] || 2 === r[0])) {
              c = 0
              continue
            }
            if (3 === r[0] && (!o || r[1] > o[0] && r[1] < o[3])) {
              c.label = r[1]
              break
            }
            if (6 === r[0] && c.label < o[1]) {
              c.label = o[1], o = r
              break
            }
            if (o && c.label < o[2]) {
              c.label = o[2], c.ops.push(r)
              break
            }
            o[2] && c.ops.pop(), c.trys.pop()
            continue
        }
        r = t.call(e, c)
      } catch (n) {
        r = [6, n], a = 0
      } finally {
        i = o = 0
      }
    }
    if (5 & r[0]) throw r[1]
    return {value: r[0] ? r[1] : void 0, done: !0}
  }

  var i, a, o, s, c = {
    label: 0, sent: function () {
      if (1 & o[0]) throw o[1]
      return o[1]
    }, trys: [], ops: []
  }
  return s = {
    next: r(0),
    'throw': r(1),
    'return': r(2)
  }, 'function' == typeof Symbol && (s[Symbol.iterator] = function () {
    return this
  }), s
}, CacheManager = function () {
  function e () {
    this.originUrlsDic = {}, this.versionUrlsDic = {}, this.modifyTime = 0, this.stopCache = !0
    try {
      this.storage = window.localforage.createInstance({
        name: 'seer61',
        storeName: 'fileWorker_cache'
      }), this.tempStorage = window.localforage.createInstance({
        name: 'seer61',
        storeName: 'file_cache'
      }), 'true' == localStorage.getItem('showCacheLog') && (e.canShowLog = !0), localStorage.getItem('cacheIgnore') && (this.ignorePattern = new RegExp(localStorage.getItem('cacheIgnorePattern'))), this.hot = plugin.PandaVersionManager.getInstance('hotVersion'), this.initCacheManager()
    } catch (t) {
      e.disableCache(), console.error('Cache Forage Init FAILED' + t)
    }
  }

  return e.enableLog = function () {
    localStorage.setItem('showCacheLog', 'true')
  }, e.disableLog = function () {
    localStorage.setItem('showCacheLog', 'false')
  }, e.enableCache = function () {
    localStorage.setItem('canUseCache', 'true'), e._canUseCache = void 0
  }, e.disableCache = function () {
    localStorage.setItem('canUseCache', 'false'), e._canUseCache = void 0
  }, e.checkIndexedDBAvailable = function () {
    return window.indexedDB || window.webkitIndexedDB || window.mozIndexedDB || window.OIndexedDB || window.msIndexedDB || window.Worker ? !0 : !1
  }, e.getInstance = function () {
    return e._instance || (e._instance = new e), e._instance
  }, Object.defineProperty(e, 'canUseCache', {
    get: function () {
      return MFC.entryInfo.ktx2Mode ? !1 : void 0 !== e._canUseCache ? e._canUseCache : ('false' !== localStorage.getItem('canUseCache') && ClientEntry && (MFC.entryInfo.isApp && ClientEntry.remoteVersion && ClientEntry.remoteVersion.lastModifiedValue || !MFC.entryInfo.isApp && ClientEntry.version && ClientEntry.version.lastModifiedValue) && e.checkIndexedDBAvailable() && e.getInstance().cacheUrlsDic && (window.DEBUG && !MFC.entryInfo.isApp ? e._canUseCache = location.host.indexOf('splan') > -1 : e._canUseCache = !0, console.log('Use CacheManager ? ' + !!e._canUseCache)), !!e._canUseCache)
    }, enumerable: !0, configurable: !0
  }), e.prototype.initCacheManager = function () {
    return __awaiter(this, void 0, void 0, function () {
      var e, t, r
      return __generator(this, function (n) {
        switch (n.label) {
          case 0:
            return e = this, [4, this.initModifyTimeAsync()]
          case 1:
            return e.modifyTime = n.sent(), console.log('Cache modifyTime:' + this.modifyTime), [4, this.initTempStorage()]
          case 2:
            return n.sent(), t = this, [4, this.getCacheUrlsAsync()]
          case 3:
            t.cacheUrlsDic = n.sent()
            for (r in this.cacheUrlsDic) this.setVersionUrl(r.split('|')[0], r.split('|')[1])
            return this.initWorker(), this.stopCache = !1, console.log('Cache Manager Init '), [2]
        }
      })
    })
  }, e.prototype.initWorker = function () {
    this.worker && (this.worker.terminate(), this.worker = null)
    var e = ''
    e = MFC.entryInfo.isApp ? 'localhost' === location.host ? location.origin + '/config/worker/fileWorker.js' : MFC.entryInfo.app_domain_url + 'config/worker/fileWorker.js' : (window.DEBUG && location.href.indexOf('publish') < 0 ? 'publish/' : '') + 'config/worker/fileWorker.js', window.RELEASE && (e = e.replace('fileWorker.js', 'fileWorker.min.js')), this.worker = new Worker(e), this.worker.onmessage = this.workerOnMessage.bind(this)
  }, e.prototype.workerOnMessage = function (t) {
    var r = this
    switch (t.data.type) {
      case'cache success':
        this.cacheUrlsDic[t.data.cacheUrl] = !0, e.canShowLog && console.log('cache success \'' + t.data.cacheUrl + '\'')
        break
      case'temp success':
        this.cacheUrlsDic[t.data.cacheUrl] = this.modifyTime, e.canShowLog && console.log('temp success \'' + t.data.cacheUrl + '\'')
        break
      case'err':
        var n = 'Cache err:' + t.data.name + (this.cacheUrlsDic ? ' total:' + Object.keys(this.cacheUrlsDic).length : '') + ' url:' + t.data.cacheUrl
        console.error(n), 'QuotaExceededError' !== t.data.name || this.stopCache || (this.worker.terminate(), this.cacheUrlsDic && Object.keys(this.cacheUrlsDic).length < 500 && (console.warn('indexedDB'), e.disableCache()), this.clearCache(function () {
          e.canUseCache && r.initWorker()
        }, this))
        break
      case'md5 success':
        var i = t.data.data
        i.dataMd5 === i.md5 ? this.storage.setItem(i.cacheUrl, {
          versionUrl: i.versionUrl,
          data: i.data,
          md5: i.dataMd5
        }, function (t, r) {
          t ? e.getInstance().workerOnMessage({
            data: {
              type: 'err',
              name: t.name || t.message || t.code,
              cacheUrl: i.cacheUrl
            }
          }) : e.getInstance().workerOnMessage({data: {type: 'cache success', cacheUrl: i.cacheUrl}})
        }) : this.tempStorage.setItem(i.cacheUrl, {
          versionUrl: i.versionUrl,
          data: i.data,
          md5: i.dataMd5
        }, function (t, r) {
          t ? e.getInstance().workerOnMessage({
            data: {
              type: 'err',
              name: t.name || t.message || t.code,
              cacheUrl: i.cacheUrl
            }
          }) : e.getInstance().workerOnMessage({data: {type: 'temp success', cacheUrl: i.cacheUrl}})
        })
    }
  }, e.prototype.initModifyTimeAsync = function () {
    var e = this
    return new Promise(function (t, r) {
      if (window.RELEASE && e.hot && ClientEntry && (MFC.entryInfo.isApp || !MFC.entryInfo.isApp && MFC.entryInfo.public_domain.indexOf(location.host) > -1)) {
        var n = MFC.entryInfo.isApp ? MFC.entryInfo.app_domain_url + 'version/overall/' + ~~(ClientEntry.remoteVersion.lastModifiedValue / 1e3) + '_zzz_config.txt' : location.origin + '/version/overall/' + ~~(ClientEntry.version.lastModifiedValue / 1e3) + '_zzz_config.txt'
        e.hot.load(n, function () {
          t(MFC.entryInfo.isApp ? ClientEntry.remoteVersion.lastModifiedValue : ClientEntry.version.lastModifiedValue)
        })
      } else {
        window.DEBUG && fetch('http://splan.61.com/lastBuildTime').then(function (e) {
          return e.json()
        }).then(function (e) {
          t(e.time)
        })
      }
    })
  }, e.prototype.initTempStorage = function (e) {
    var t = this
    return void 0 === e && (e = this.modifyTime), new Promise(function (r, n) {
      return __awaiter(t, void 0, void 0, function () {
        var t
        return __generator(this, function (n) {
          switch (n.label) {
            case 0:
              return [4, this.tempStorage.getItem('modifyTime')]
            case 1:
              return t = n.sent(), t === this.modifyTime ? [3, 4] : (console.log('tempStorage ' + t), [4, this.tempStorage.dropInstance()])
            case 2:
              return n.sent(), [4, this.tempStorage.setItem('modifyTime', e)]
            case 3:
              n.sent(), n.label = 4
            case 4:
              return r(!0), [2]
          }
        })
      })
    })
  }, e.prototype.getCacheUrlsAsync = function () {
    var e = this
    return new Promise(function (t, r) {
      return __awaiter(e, void 0, void 0, function () {
        var e, r, n, i, a, o, s, c, o
        return __generator(this, function (h) {
          switch (h.label) {
            case 0:
              return [4, this.tempStorage.keys()]
            case 1:
              return e = h.sent(), [4, this.storage.keys()]
            case 2:
              for (r = h.sent(), n = {}, i = 0, a = r; i < a.length; i++) o = a[i], n[o] = !0
              for (s = 0, c = e; s < c.length; s++) o = c[s], n[o] = this.modifyTime
              return t(n), [2]
          }
        })
      })
    })
  }, e.prototype.setVersionUrl = function (e, t) {
    e && t && e != t && (e = e.replace('https', 'http'), e = e.split('?')[0], t = t.replace('https', 'http'), t = t.split('?')[0], this.versionUrlsDic[e] && this.versionUrlsDic[e] != t && this.removeCache(e), this.originUrlsDic[t] = e, this.versionUrlsDic[e] = t)
  }, e.prototype.getOriginUrl = function (e) {
    return e = e.replace('https', 'http'), e = e.split('?')[0], this.originUrlsDic[e] || e
  }, e.prototype.getVersionUrl = function (e) {
    return e = e.replace('https', 'http'), e = e.split('?')[0], this.versionUrlsDic[e] || e
  }, e.prototype.getCacheUrl = function (e) {
    var t = this.getOriginUrl(e), r = this.getVersionUrl(e)
    return t + '|' + r
  }, e.prototype.checkCached = function (e) {
    e = e.replace('https', 'http'), e = e.split('?')[0]
    var t = this.getOriginUrl(e), r = this.getVersionUrl(e)
    if (t != e && r != e) return console.log('cache expired :' + this.getCacheUrl(e)), this.removeCache(e), !1
    var n = this.getCacheUrl(e)
    return this.cacheUrlsDic && this.cacheUrlsDic[n]
  }, e.prototype.cacheFile = function (e, t) {
    if (!(this.stopCache || this.ignorePattern && this.ignorePattern.test(e)) && this.hot) {
      var r = this.getOriginUrl(e), n = this.getVersionUrl(e), i = this.getCacheUrl(e),
        a = r.replace(/(resource\/(?:libs|app)\/[^.]*)(\.js\b).*/, function (e, t, r) {
          return -1 != t.indexOf('{') && -1 != t.indexOf('}') ? e : t + '.min' + r
        })
      MFC.entryInfo.isIos ? this.worker.postMessage({
        type: 'md5',
        data: t,
        originUrl: r,
        versionUrl: n,
        cacheUrl: i,
        md5: this.hot.getFileMD5(a)
      }) : this.worker.postMessage({
        type: 'cacheFile',
        data: t,
        originUrl: r,
        versionUrl: n,
        cacheUrl: i,
        md5: this.hot.getFileMD5(a)
      })
    }
  }, e.prototype.getCache = function (t, r, n) {
    var i = this, a = this.getCacheUrl(t), o = this.storage
    return this.cacheUrlsDic[a] ? this.cacheUrlsDic[a] === this.modifyTime && (o = this.tempStorage) : console.warn(' ' + t), o.getItem(a, function (a, s) {
      var c = i.getOriginUrl(t)
      if (a || !s) {
        console.error('getCache failed \'' + c + '\''), i.removeCache(t)
      } else if (e.canShowLog && console.log('getCache success \'' + c + '\''), o === i.storage && i.hot) {
        var h = c.replace(/(resource\/(?:libs|app)\/[^.]*)(\.js\b).*/, function (e, t, r) {
          return -1 != t.indexOf('{') && -1 != t.indexOf('}') ? e : t + '.min' + r
        }), l = i.hot.getFileMD5(h)
        l && l !== s.md5 && (s.data = null, i.removeCache(t), e.canShowLog && console.warn('md5  ' + c))
      }
      r && r.apply(n || i, [s && s.data, t])
    })
  }, e.prototype.removeCache = function (t, r, n) {
    var i = this, a = this.getCacheUrl(t)
    if (this.cacheUrlsDic[a]) {
      var o = this.getOriginUrl(t), s = this.getVersionUrl(t)
      return delete this.cacheUrlsDic[a], delete this.originUrlsDic[s], delete this.versionUrlsDic[o], this.storage.removeItem(a, function (t) {
        t ? console.error('removeCache failed \'' + o + '\'') : e.canShowLog && console.log('removeCache success \'' + o + '\''), r && r.apply(n || i)
      })
    }
    console.warn(' ' + a)
  }, e.prototype.clearCache = function (e, t) {
    return __awaiter(this, void 0, void 0, function () {
      var r = this
      return __generator(this, function (n) {
        switch (n.label) {
          case 0:
            return this.stopCache = !0, this.cacheUrlsDic = {}, this.originUrlsDic = {}, this.versionUrlsDic = {}, [4, this.storage.dropInstance()]
          case 1:
            return n.sent(), [4, this.tempStorage.dropInstance()]
          case 2:
            return n.sent(), this.initTempStorage().then(function () {
              e && e.call(t || r), r.stopCache = !1
            }), [2]
        }
      })
    })
  }, e.prototype.cacheImage = function (e, t) {
  }, e.prototype.getCacheImage = function (e, t, r) {
    return this.getCache(e, t, r)
  }, e.getBase64Image = function (e) {
    var t = document.createElement('canvas')
    t.width = e.width, t.height = e.height
    var r = t.getContext('2d')
    r.drawImage(e, 0, 0)
    var n = t.toDataURL('image/png')
    return n.replace(/^data:image\/(png|jpg);base64,/, '')
  }, e.getMD5Async = function (e) {
    return new Promise(function (t, r) {
      var n = ''
      if (e) {
        if ('string' == typeof e) {
          n = SparkMD5.hash(e), t(n)
        } else if (e instanceof ArrayBuffer) {
          n = SparkMD5.ArrayBuffer.hash(e), t(n)
        } else if (e instanceof Blob) {
          var i = new FileReader
          i.readAsArrayBuffer(e), i.onload = function () {
            i.result instanceof ArrayBuffer && (n = SparkMD5.ArrayBuffer.hash(i.result), t(n))
          }
        }
      } else {
        t(n)
      }
    })
  }, e.canShowLog = !1, e._canUseCache = void 0, e
}()
__reflect(CacheManager.prototype, 'CacheManager')/*! pako 2.0.3 https://github.com/nodeca/pako @license (MIT AND Zlib) */
!function (t, e) {
  'object' == typeof exports && 'undefined' != typeof module ? e(exports) : 'function' == typeof define && define.amd ? define(['exports'], e) : e((t = 'undefined' != typeof globalThis ? globalThis : t || self).pako = {})
}(this, (function (t) {
  'use strict'

  function e (t) {
    for (var e = t.length; --e >= 0;) t[e] = 0
  }

  var a = 256, i = 286, n = 30, r = 15,
    s = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0]),
    o = new Uint8Array([0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13]),
    l = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 3, 7]),
    h = new Uint8Array([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]), d = new Array(576)
  e(d)
  var _ = new Array(60)
  e(_)
  var f = new Array(512)
  e(f)
  var u = new Array(256)
  e(u)
  var c = new Array(29)
  e(c)
  var w, b, g, p = new Array(n)

  function m (t, e, a, i, n) {
    this.static_tree = t, this.extra_bits = e, this.extra_base = a, this.elems = i, this.max_length = n, this.has_stree = t && t.length
  }

  function v (t, e) {
    this.dyn_tree = t, this.max_code = 0, this.stat_desc = e
  }

  e(p)
  var k = function (t) {
      return t < 256 ? f[t] : f[256 + (t >>> 7)]
    }, y = function (t, e) {
      t.pending_buf[t.pending++] = 255 & e, t.pending_buf[t.pending++] = e >>> 8 & 255
    }, x = function (t, e, a) {
      t.bi_valid > 16 - a ? (t.bi_buf |= e << t.bi_valid & 65535, y(t, t.bi_buf), t.bi_buf = e >> 16 - t.bi_valid, t.bi_valid += a - 16) : (t.bi_buf |= e << t.bi_valid & 65535, t.bi_valid += a)
    }, z = function (t, e, a) {
      x(t, a[2 * e], a[2 * e + 1])
    }, A = function (t, e) {
      var a = 0
      do {
        a |= 1 & t, t >>>= 1, a <<= 1
      } while (--e > 0)
      return a >>> 1
    }, E = function (t, e, a) {
      var i, n, s = new Array(16), o = 0
      for (i = 1; i <= r; i++) s[i] = o = o + a[i - 1] << 1
      for (n = 0; n <= e; n++) {
        var l = t[2 * n + 1]
        0 !== l && (t[2 * n] = A(s[l]++, l))
      }
    }, R = function (t) {
      var e
      for (e = 0; e < i; e++) t.dyn_ltree[2 * e] = 0
      for (e = 0; e < n; e++) t.dyn_dtree[2 * e] = 0
      for (e = 0; e < 19; e++) t.bl_tree[2 * e] = 0
      t.dyn_ltree[512] = 1, t.opt_len = t.static_len = 0, t.last_lit = t.matches = 0
    }, Z = function (t) {
      t.bi_valid > 8 ? y(t, t.bi_buf) : t.bi_valid > 0 && (t.pending_buf[t.pending++] = t.bi_buf), t.bi_buf = 0, t.bi_valid = 0
    }, S = function (t, e, a, i) {
      var n = 2 * e, r = 2 * a
      return t[n] < t[r] || t[n] === t[r] && i[e] <= i[a]
    }, U = function (t, e, a) {
      for (var i = t.heap[a], n = a << 1; n <= t.heap_len && (n < t.heap_len && S(e, t.heap[n + 1], t.heap[n], t.depth) && n++, !S(e, i, t.heap[n], t.depth));) t.heap[a] = t.heap[n], a = n, n <<= 1
      t.heap[a] = i
    }, D = function (t, e, i) {
      var n, r, l, h, d = 0
      if (0 !== t.last_lit) {
        do {
          n = t.pending_buf[t.d_buf + 2 * d] << 8 | t.pending_buf[t.d_buf + 2 * d + 1], r = t.pending_buf[t.l_buf + d], d++, 0 === n ? z(t, r, e) : (l = u[r], z(t, l + a + 1, e), 0 !== (h = s[l]) && (r -= c[l], x(t, r, h)), n--, l = k(n), z(t, l, i), 0 !== (h = o[l]) && (n -= p[l], x(t, n, h)))
        } while (d < t.last_lit)
      }
      z(t, 256, e)
    }, O = function (t, e) {
      var a, i, n, s = e.dyn_tree, o = e.stat_desc.static_tree, l = e.stat_desc.has_stree, h = e.stat_desc.elems, d = -1
      for (t.heap_len = 0, t.heap_max = 573, a = 0; a < h; a++) 0 !== s[2 * a] ? (t.heap[++t.heap_len] = d = a, t.depth[a] = 0) : s[2 * a + 1] = 0
      for (; t.heap_len < 2;) s[2 * (n = t.heap[++t.heap_len] = d < 2 ? ++d : 0)] = 1, t.depth[n] = 0, t.opt_len--, l && (t.static_len -= o[2 * n + 1])
      for (e.max_code = d, a = t.heap_len >> 1; a >= 1; a--) U(t, s, a)
      n = h
      do {
        a = t.heap[1], t.heap[1] = t.heap[t.heap_len--], U(t, s, 1), i = t.heap[1], t.heap[--t.heap_max] = a, t.heap[--t.heap_max] = i, s[2 * n] = s[2 * a] + s[2 * i], t.depth[n] = (t.depth[a] >= t.depth[i] ? t.depth[a] : t.depth[i]) + 1, s[2 * a + 1] = s[2 * i + 1] = n, t.heap[1] = n++, U(t, s, 1)
      } while (t.heap_len >= 2)
      t.heap[--t.heap_max] = t.heap[1], function (t, e) {
        var a, i, n, s, o, l, h = e.dyn_tree, d = e.max_code, _ = e.stat_desc.static_tree, f = e.stat_desc.has_stree,
          u = e.stat_desc.extra_bits, c = e.stat_desc.extra_base, w = e.stat_desc.max_length, b = 0
        for (s = 0; s <= r; s++) t.bl_count[s] = 0
        for (h[2 * t.heap[t.heap_max] + 1] = 0, a = t.heap_max + 1; a < 573; a++) (s = h[2 * h[2 * (i = t.heap[a]) + 1] + 1] + 1) > w && (s = w, b++), h[2 * i + 1] = s, i > d || (t.bl_count[s]++, o = 0, i >= c && (o = u[i - c]), l = h[2 * i], t.opt_len += l * (s + o), f && (t.static_len += l * (_[2 * i + 1] + o)))
        if (0 !== b) {
          do {
            for (s = w - 1; 0 === t.bl_count[s];) s--
            t.bl_count[s]--, t.bl_count[s + 1] += 2, t.bl_count[w]--, b -= 2
          } while (b > 0)
          for (s = w; 0 !== s; s--) for (i = t.bl_count[s]; 0 !== i;) (n = t.heap[--a]) > d || (h[2 * n + 1] !== s && (t.opt_len += (s - h[2 * n + 1]) * h[2 * n], h[2 * n + 1] = s), i--)
        }
      }(t, e), E(s, d, t.bl_count)
    }, T = function (t, e, a) {
      var i, n, r = -1, s = e[1], o = 0, l = 7, h = 4
      for (0 === s && (l = 138, h = 3), e[2 * (a + 1) + 1] = 65535, i = 0; i <= a; i++) n = s, s = e[2 * (i + 1) + 1], ++o < l && n === s || (o < h ? t.bl_tree[2 * n] += o : 0 !== n ? (n !== r && t.bl_tree[2 * n]++, t.bl_tree[32]++) : o <= 10 ? t.bl_tree[34]++ : t.bl_tree[36]++, o = 0, r = n, 0 === s ? (l = 138, h = 3) : n === s ? (l = 6, h = 3) : (l = 7, h = 4))
    }, I = function (t, e, a) {
      var i, n, r = -1, s = e[1], o = 0, l = 7, h = 4
      for (0 === s && (l = 138, h = 3), i = 0; i <= a; i++) {
        if (n = s, s = e[2 * (i + 1) + 1], !(++o < l && n === s)) {
          if (o < h) {
            do {
              z(t, n, t.bl_tree)
            } while (0 != --o)
          } else {
            0 !== n ? (n !== r && (z(t, n, t.bl_tree), o--), z(t, 16, t.bl_tree), x(t, o - 3, 2)) : o <= 10 ? (z(t, 17, t.bl_tree), x(t, o - 3, 3)) : (z(t, 18, t.bl_tree), x(t, o - 11, 7))
          }
          o = 0, r = n, 0 === s ? (l = 138, h = 3) : n === s ? (l = 6, h = 3) : (l = 7, h = 4)
        }
      }
    }, F = !1, L = function (t, e, a, i) {
      x(t, 0 + (i ? 1 : 0), 3), function (t, e, a, i) {
        Z(t), i && (y(t, a), y(t, ~a)), t.pending_buf.set(t.window.subarray(e, e + a), t.pending), t.pending += a
      }(t, e, a, !0)
    }, N = {
      _tr_init: function (t) {
        F || (!function () {
          var t, e, a, h, v, k = new Array(16)
          for (a = 0, h = 0; h < 28; h++) for (c[h] = a, t = 0; t < 1 << s[h]; t++) u[a++] = h
          for (u[a - 1] = h, v = 0, h = 0; h < 16; h++) for (p[h] = v, t = 0; t < 1 << o[h]; t++) f[v++] = h
          for (v >>= 7; h < n; h++) for (p[h] = v << 7, t = 0; t < 1 << o[h] - 7; t++) f[256 + v++] = h
          for (e = 0; e <= r; e++) k[e] = 0
          for (t = 0; t <= 143;) d[2 * t + 1] = 8, t++, k[8]++
          for (; t <= 255;) d[2 * t + 1] = 9, t++, k[9]++
          for (; t <= 279;) d[2 * t + 1] = 7, t++, k[7]++
          for (; t <= 287;) d[2 * t + 1] = 8, t++, k[8]++
          for (E(d, 287, k), t = 0; t < n; t++) _[2 * t + 1] = 5, _[2 * t] = A(t, 5)
          w = new m(d, s, 257, i, r), b = new m(_, o, 0, n, r), g = new m(new Array(0), l, 0, 19, 7)
        }(), F = !0), t.l_desc = new v(t.dyn_ltree, w), t.d_desc = new v(t.dyn_dtree, b), t.bl_desc = new v(t.bl_tree, g), t.bi_buf = 0, t.bi_valid = 0, R(t)
      }, _tr_stored_block: L, _tr_flush_block: function (t, e, i, n) {
        var r, s, o = 0
        t.level > 0 ? (2 === t.strm.data_type && (t.strm.data_type = function (t) {
          var e, i = 4093624447
          for (e = 0; e <= 31; e++, i >>>= 1) if (1 & i && 0 !== t.dyn_ltree[2 * e]) return 0
          if (0 !== t.dyn_ltree[18] || 0 !== t.dyn_ltree[20] || 0 !== t.dyn_ltree[26]) return 1
          for (e = 32; e < a; e++) if (0 !== t.dyn_ltree[2 * e]) return 1
          return 0
        }(t)), O(t, t.l_desc), O(t, t.d_desc), o = function (t) {
          var e
          for (T(t, t.dyn_ltree, t.l_desc.max_code), T(t, t.dyn_dtree, t.d_desc.max_code), O(t, t.bl_desc), e = 18; e >= 3 && 0 === t.bl_tree[2 * h[e] + 1]; e--)
          return t.opt_len += 3 * (e + 1) + 5 + 5 + 4, e
        }(t), r = t.opt_len + 3 + 7 >>> 3, (s = t.static_len + 3 + 7 >>> 3) <= r && (r = s)) : r = s = i + 5, i + 4 <= r && -1 !== e ? L(t, e, i, n) : 4 === t.strategy || s === r ? (x(t, 2 + (n ? 1 : 0), 3), D(t, d, _)) : (x(t, 4 + (n ? 1 : 0), 3), function (t, e, a, i) {
          var n
          for (x(t, e - 257, 5), x(t, a - 1, 5), x(t, i - 4, 4), n = 0; n < i; n++) x(t, t.bl_tree[2 * h[n] + 1], 3)
          I(t, t.dyn_ltree, e - 1), I(t, t.dyn_dtree, a - 1)
        }(t, t.l_desc.max_code + 1, t.d_desc.max_code + 1, o + 1), D(t, t.dyn_ltree, t.dyn_dtree)), R(t), n && Z(t)
      }, _tr_tally: function (t, e, i) {
        return t.pending_buf[t.d_buf + 2 * t.last_lit] = e >>> 8 & 255, t.pending_buf[t.d_buf + 2 * t.last_lit + 1] = 255 & e, t.pending_buf[t.l_buf + t.last_lit] = 255 & i, t.last_lit++, 0 === e ? t.dyn_ltree[2 * i]++ : (t.matches++, e--, t.dyn_ltree[2 * (u[i] + a + 1)]++, t.dyn_dtree[2 * k(e)]++), t.last_lit === t.lit_bufsize - 1
      }, _tr_align: function (t) {
        x(t, 2, 3), z(t, 256, d), function (t) {
          16 === t.bi_valid ? (y(t, t.bi_buf), t.bi_buf = 0, t.bi_valid = 0) : t.bi_valid >= 8 && (t.pending_buf[t.pending++] = 255 & t.bi_buf, t.bi_buf >>= 8, t.bi_valid -= 8)
        }(t)
      }
    }, B = function (t, e, a, i) {
      for (var n = 65535 & t | 0, r = t >>> 16 & 65535 | 0, s = 0; 0 !== a;) {
        a -= s = a > 2e3 ? 2e3 : a
        do {
          r = r + (n = n + e[i++] | 0) | 0
        } while (--s)
        n %= 65521, r %= 65521
      }
      return n | r << 16 | 0
    }, C = new Uint32Array(function () {
      for (var t, e = [], a = 0; a < 256; a++) {
        t = a
        for (var i = 0; i < 8; i++) t = 1 & t ? 3988292384 ^ t >>> 1 : t >>> 1
        e[a] = t
      }
      return e
    }()), M = function (t, e, a, i) {
      var n = C, r = i + a
      t ^= -1
      for (var s = i; s < r; s++) t = t >>> 8 ^ n[255 & (t ^ e[s])]
      return -1 ^ t
    }, H = {
      2: 'need dictionary',
      1: 'stream end',
      0: '',
      '-1': 'file error',
      '-2': 'stream error',
      '-3': 'data error',
      '-4': 'insufficient memory',
      '-5': 'buffer error',
      '-6': 'incompatible version'
    }, j = {
      Z_NO_FLUSH: 0,
      Z_PARTIAL_FLUSH: 1,
      Z_SYNC_FLUSH: 2,
      Z_FULL_FLUSH: 3,
      Z_FINISH: 4,
      Z_BLOCK: 5,
      Z_TREES: 6,
      Z_OK: 0,
      Z_STREAM_END: 1,
      Z_NEED_DICT: 2,
      Z_ERRNO: -1,
      Z_STREAM_ERROR: -2,
      Z_DATA_ERROR: -3,
      Z_MEM_ERROR: -4,
      Z_BUF_ERROR: -5,
      Z_NO_COMPRESSION: 0,
      Z_BEST_SPEED: 1,
      Z_BEST_COMPRESSION: 9,
      Z_DEFAULT_COMPRESSION: -1,
      Z_FILTERED: 1,
      Z_HUFFMAN_ONLY: 2,
      Z_RLE: 3,
      Z_FIXED: 4,
      Z_DEFAULT_STRATEGY: 0,
      Z_BINARY: 0,
      Z_TEXT: 1,
      Z_UNKNOWN: 2,
      Z_DEFLATED: 8
    }, K = N._tr_init, P = N._tr_stored_block, Y = N._tr_flush_block, G = N._tr_tally, X = N._tr_align, W = j.Z_NO_FLUSH,
    q = j.Z_PARTIAL_FLUSH, J = j.Z_FULL_FLUSH, Q = j.Z_FINISH, V = j.Z_BLOCK, $ = j.Z_OK, tt = j.Z_STREAM_END,
    et = j.Z_STREAM_ERROR, at = j.Z_DATA_ERROR, it = j.Z_BUF_ERROR, nt = j.Z_DEFAULT_COMPRESSION, rt = j.Z_FILTERED,
    st = j.Z_HUFFMAN_ONLY, ot = j.Z_RLE, lt = j.Z_FIXED, ht = j.Z_DEFAULT_STRATEGY, dt = j.Z_UNKNOWN, _t = j.Z_DEFLATED,
    ft = 258, ut = 262, ct = 103, wt = 113, bt = 666, gt = function (t, e) {
      return t.msg = H[e], e
    }, pt = function (t) {
      return (t << 1) - (t > 4 ? 9 : 0)
    }, mt = function (t) {
      for (var e = t.length; --e >= 0;) t[e] = 0
    }, vt = function (t, e, a) {
      return (e << t.hash_shift ^ a) & t.hash_mask
    }, kt = function (t) {
      var e = t.state, a = e.pending
      a > t.avail_out && (a = t.avail_out), 0 !== a && (t.output.set(e.pending_buf.subarray(e.pending_out, e.pending_out + a), t.next_out), t.next_out += a, e.pending_out += a, t.total_out += a, t.avail_out -= a, e.pending -= a, 0 === e.pending && (e.pending_out = 0))
    }, yt = function (t, e) {
      Y(t, t.block_start >= 0 ? t.block_start : -1, t.strstart - t.block_start, e), t.block_start = t.strstart, kt(t.strm)
    }, xt = function (t, e) {
      t.pending_buf[t.pending++] = e
    }, zt = function (t, e) {
      t.pending_buf[t.pending++] = e >>> 8 & 255, t.pending_buf[t.pending++] = 255 & e
    }, At = function (t, e) {
      var a, i, n = t.max_chain_length, r = t.strstart, s = t.prev_length, o = t.nice_match,
        l = t.strstart > t.w_size - ut ? t.strstart - (t.w_size - ut) : 0, h = t.window, d = t.w_mask, _ = t.prev,
        f = t.strstart + ft, u = h[r + s - 1], c = h[r + s]
      t.prev_length >= t.good_match && (n >>= 2), o > t.lookahead && (o = t.lookahead)
      do {
        if (h[(a = e) + s] === c && h[a + s - 1] === u && h[a] === h[r] && h[++a] === h[r + 1]) {
          r += 2, a++
          do {
          } while (h[++r] === h[++a] && h[++r] === h[++a] && h[++r] === h[++a] && h[++r] === h[++a] && h[++r] === h[++a] && h[++r] === h[++a] && h[++r] === h[++a] && h[++r] === h[++a] && r < f)
          if (i = ft - (f - r), r = f - ft, i > s) {
            if (t.match_start = e, s = i, i >= o) break
            u = h[r + s - 1], c = h[r + s]
          }
        }
      } while ((e = _[e & d]) > l && 0 != --n)
      return s <= t.lookahead ? s : t.lookahead
    }, Et = function (t) {
      var e, a, i, n, r, s, o, l, h, d, _ = t.w_size
      do {
        if (n = t.window_size - t.lookahead - t.strstart, t.strstart >= _ + (_ - ut)) {
          t.window.set(t.window.subarray(_, _ + _), 0), t.match_start -= _, t.strstart -= _, t.block_start -= _, e = a = t.hash_size
          do {
            i = t.head[--e], t.head[e] = i >= _ ? i - _ : 0
          } while (--a)
          e = a = _
          do {
            i = t.prev[--e], t.prev[e] = i >= _ ? i - _ : 0
          } while (--a)
          n += _
        }
        if (0 === t.strm.avail_in) break
        if (s = t.strm, o = t.window, l = t.strstart + t.lookahead, h = n, d = void 0, (d = s.avail_in) > h && (d = h), a = 0 === d ? 0 : (s.avail_in -= d, o.set(s.input.subarray(s.next_in, s.next_in + d), l), 1 === s.state.wrap ? s.adler = B(s.adler, o, d, l) : 2 === s.state.wrap && (s.adler = M(s.adler, o, d, l)), s.next_in += d, s.total_in += d, d), t.lookahead += a, t.lookahead + t.insert >= 3) for (r = t.strstart - t.insert, t.ins_h = t.window[r], t.ins_h = vt(t, t.ins_h, t.window[r + 1]); t.insert && (t.ins_h = vt(t, t.ins_h, t.window[r + 3 - 1]), t.prev[r & t.w_mask] = t.head[t.ins_h], t.head[t.ins_h] = r, r++, t.insert--, !(t.lookahead + t.insert < 3));)
      } while (t.lookahead < ut && 0 !== t.strm.avail_in)
    }, Rt = function (t, e) {
      for (var a, i; ;) {
        if (t.lookahead < ut) {
          if (Et(t), t.lookahead < ut && e === W) return 1
          if (0 === t.lookahead) break
        }
        if (a = 0, t.lookahead >= 3 && (t.ins_h = vt(t, t.ins_h, t.window[t.strstart + 3 - 1]), a = t.prev[t.strstart & t.w_mask] = t.head[t.ins_h], t.head[t.ins_h] = t.strstart), 0 !== a && t.strstart - a <= t.w_size - ut && (t.match_length = At(t, a)), t.match_length >= 3) {
          if (i = G(t, t.strstart - t.match_start, t.match_length - 3), t.lookahead -= t.match_length, t.match_length <= t.max_lazy_match && t.lookahead >= 3) {
            t.match_length--
            do {
              t.strstart++, t.ins_h = vt(t, t.ins_h, t.window[t.strstart + 3 - 1]), a = t.prev[t.strstart & t.w_mask] = t.head[t.ins_h], t.head[t.ins_h] = t.strstart
            } while (0 != --t.match_length)
            t.strstart++
          } else {
            t.strstart += t.match_length, t.match_length = 0, t.ins_h = t.window[t.strstart], t.ins_h = vt(t, t.ins_h, t.window[t.strstart + 1])
          }
        } else {
          i = G(t, 0, t.window[t.strstart]), t.lookahead--, t.strstart++
        }
        if (i && (yt(t, !1), 0 === t.strm.avail_out)) return 1
      }
      return t.insert = t.strstart < 2 ? t.strstart : 2, e === Q ? (yt(t, !0), 0 === t.strm.avail_out ? 3 : 4) : t.last_lit && (yt(t, !1), 0 === t.strm.avail_out) ? 1 : 2
    }, Zt = function (t, e) {
      for (var a, i, n; ;) {
        if (t.lookahead < ut) {
          if (Et(t), t.lookahead < ut && e === W) return 1
          if (0 === t.lookahead) break
        }
        if (a = 0, t.lookahead >= 3 && (t.ins_h = vt(t, t.ins_h, t.window[t.strstart + 3 - 1]), a = t.prev[t.strstart & t.w_mask] = t.head[t.ins_h], t.head[t.ins_h] = t.strstart), t.prev_length = t.match_length, t.prev_match = t.match_start, t.match_length = 2, 0 !== a && t.prev_length < t.max_lazy_match && t.strstart - a <= t.w_size - ut && (t.match_length = At(t, a), t.match_length <= 5 && (t.strategy === rt || 3 === t.match_length && t.strstart - t.match_start > 4096) && (t.match_length = 2)), t.prev_length >= 3 && t.match_length <= t.prev_length) {
          n = t.strstart + t.lookahead - 3, i = G(t, t.strstart - 1 - t.prev_match, t.prev_length - 3), t.lookahead -= t.prev_length - 1, t.prev_length -= 2
          do {
            ++t.strstart <= n && (t.ins_h = vt(t, t.ins_h, t.window[t.strstart + 3 - 1]), a = t.prev[t.strstart & t.w_mask] = t.head[t.ins_h], t.head[t.ins_h] = t.strstart)
          } while (0 != --t.prev_length)
          if (t.match_available = 0, t.match_length = 2, t.strstart++, i && (yt(t, !1), 0 === t.strm.avail_out)) return 1
        } else if (t.match_available) {
          if ((i = G(t, 0, t.window[t.strstart - 1])) && yt(t, !1), t.strstart++, t.lookahead--, 0 === t.strm.avail_out) return 1
        } else {
          t.match_available = 1, t.strstart++, t.lookahead--
        }
      }
      return t.match_available && (i = G(t, 0, t.window[t.strstart - 1]), t.match_available = 0), t.insert = t.strstart < 2 ? t.strstart : 2, e === Q ? (yt(t, !0), 0 === t.strm.avail_out ? 3 : 4) : t.last_lit && (yt(t, !1), 0 === t.strm.avail_out) ? 1 : 2
    }

  function St (t, e, a, i, n) {
    this.good_length = t, this.max_lazy = e, this.nice_length = a, this.max_chain = i, this.func = n
  }

  var Ut = [new St(0, 0, 0, 0, (function (t, e) {
    var a = 65535
    for (a > t.pending_buf_size - 5 && (a = t.pending_buf_size - 5); ;) {
      if (t.lookahead <= 1) {
        if (Et(t), 0 === t.lookahead && e === W) return 1
        if (0 === t.lookahead) break
      }
      t.strstart += t.lookahead, t.lookahead = 0
      var i = t.block_start + a
      if ((0 === t.strstart || t.strstart >= i) && (t.lookahead = t.strstart - i, t.strstart = i, yt(t, !1), 0 === t.strm.avail_out)) return 1
      if (t.strstart - t.block_start >= t.w_size - ut && (yt(t, !1), 0 === t.strm.avail_out)) return 1
    }
    return t.insert = 0, e === Q ? (yt(t, !0), 0 === t.strm.avail_out ? 3 : 4) : (t.strstart > t.block_start && (yt(t, !1), t.strm.avail_out), 1)
  })), new St(4, 4, 8, 4, Rt), new St(4, 5, 16, 8, Rt), new St(4, 6, 32, 32, Rt), new St(4, 4, 16, 16, Zt), new St(8, 16, 32, 32, Zt), new St(8, 16, 128, 128, Zt), new St(8, 32, 128, 256, Zt), new St(32, 128, 258, 1024, Zt), new St(32, 258, 258, 4096, Zt)]

  function Dt () {
    this.strm = null, this.status = 0, this.pending_buf = null, this.pending_buf_size = 0, this.pending_out = 0, this.pending = 0, this.wrap = 0, this.gzhead = null, this.gzindex = 0, this.method = _t, this.last_flush = -1, this.w_size = 0, this.w_bits = 0, this.w_mask = 0, this.window = null, this.window_size = 0, this.prev = null, this.head = null, this.ins_h = 0, this.hash_size = 0, this.hash_bits = 0, this.hash_mask = 0, this.hash_shift = 0, this.block_start = 0, this.match_length = 0, this.prev_match = 0, this.match_available = 0, this.strstart = 0, this.match_start = 0, this.lookahead = 0, this.prev_length = 0, this.max_chain_length = 0, this.max_lazy_match = 0, this.level = 0, this.strategy = 0, this.good_match = 0, this.nice_match = 0, this.dyn_ltree = new Uint16Array(1146), this.dyn_dtree = new Uint16Array(122), this.bl_tree = new Uint16Array(78), mt(this.dyn_ltree), mt(this.dyn_dtree), mt(this.bl_tree), this.l_desc = null, this.d_desc = null, this.bl_desc = null, this.bl_count = new Uint16Array(16), this.heap = new Uint16Array(573), mt(this.heap), this.heap_len = 0, this.heap_max = 0, this.depth = new Uint16Array(573), mt(this.depth), this.l_buf = 0, this.lit_bufsize = 0, this.last_lit = 0, this.d_buf = 0, this.opt_len = 0, this.static_len = 0, this.matches = 0, this.insert = 0, this.bi_buf = 0, this.bi_valid = 0
  }

  var Ot = function (t) {
    if (!t || !t.state) return gt(t, et)
    t.total_in = t.total_out = 0, t.data_type = dt
    var e = t.state
    return e.pending = 0, e.pending_out = 0, e.wrap < 0 && (e.wrap = -e.wrap), e.status = e.wrap ? 42 : wt, t.adler = 2 === e.wrap ? 0 : 1, e.last_flush = W, K(e), $
  }, Tt = function (t) {
    var e, a = Ot(t)
    return a === $ && ((e = t.state).window_size = 2 * e.w_size, mt(e.head), e.max_lazy_match = Ut[e.level].max_lazy, e.good_match = Ut[e.level].good_length, e.nice_match = Ut[e.level].nice_length, e.max_chain_length = Ut[e.level].max_chain, e.strstart = 0, e.block_start = 0, e.lookahead = 0, e.insert = 0, e.match_length = e.prev_length = 2, e.match_available = 0, e.ins_h = 0), a
  }, It = function (t, e, a, i, n, r) {
    if (!t) return et
    var s = 1
    if (e === nt && (e = 6), i < 0 ? (s = 0, i = -i) : i > 15 && (s = 2, i -= 16), n < 1 || n > 9 || a !== _t || i < 8 || i > 15 || e < 0 || e > 9 || r < 0 || r > lt) return gt(t, et)
    8 === i && (i = 9)
    var o = new Dt
    return t.state = o, o.strm = t, o.wrap = s, o.gzhead = null, o.w_bits = i, o.w_size = 1 << o.w_bits, o.w_mask = o.w_size - 1, o.hash_bits = n + 7, o.hash_size = 1 << o.hash_bits, o.hash_mask = o.hash_size - 1, o.hash_shift = ~~((o.hash_bits + 3 - 1) / 3), o.window = new Uint8Array(2 * o.w_size), o.head = new Uint16Array(o.hash_size), o.prev = new Uint16Array(o.w_size), o.lit_bufsize = 1 << n + 6, o.pending_buf_size = 4 * o.lit_bufsize, o.pending_buf = new Uint8Array(o.pending_buf_size), o.d_buf = 1 * o.lit_bufsize, o.l_buf = 3 * o.lit_bufsize, o.level = e, o.strategy = r, o.method = a, Tt(t)
  }, Ft = {
    deflateInit: function (t, e) {
      return It(t, e, _t, 15, 8, ht)
    }, deflateInit2: It, deflateReset: Tt, deflateResetKeep: Ot, deflateSetHeader: function (t, e) {
      return t && t.state ? 2 !== t.state.wrap ? et : (t.state.gzhead = e, $) : et
    }, deflate: function (t, e) {
      var a, i
      if (!t || !t.state || e > V || e < 0) return t ? gt(t, et) : et
      var n = t.state
      if (!t.output || !t.input && 0 !== t.avail_in || n.status === bt && e !== Q) return gt(t, 0 === t.avail_out ? it : et)
      n.strm = t
      var r = n.last_flush
      if (n.last_flush = e, 42 === n.status) {
        if (2 === n.wrap) {
          t.adler = 0, xt(n, 31), xt(n, 139), xt(n, 8), n.gzhead ? (xt(n, (n.gzhead.text ? 1 : 0) + (n.gzhead.hcrc ? 2 : 0) + (n.gzhead.extra ? 4 : 0) + (n.gzhead.name ? 8 : 0) + (n.gzhead.comment ? 16 : 0)), xt(n, 255 & n.gzhead.time), xt(n, n.gzhead.time >> 8 & 255), xt(n, n.gzhead.time >> 16 & 255), xt(n, n.gzhead.time >> 24 & 255), xt(n, 9 === n.level ? 2 : n.strategy >= st || n.level < 2 ? 4 : 0), xt(n, 255 & n.gzhead.os), n.gzhead.extra && n.gzhead.extra.length && (xt(n, 255 & n.gzhead.extra.length), xt(n, n.gzhead.extra.length >> 8 & 255)), n.gzhead.hcrc && (t.adler = M(t.adler, n.pending_buf, n.pending, 0)), n.gzindex = 0, n.status = 69) : (xt(n, 0), xt(n, 0), xt(n, 0), xt(n, 0), xt(n, 0), xt(n, 9 === n.level ? 2 : n.strategy >= st || n.level < 2 ? 4 : 0), xt(n, 3), n.status = wt)
        } else {
          var s = _t + (n.w_bits - 8 << 4) << 8
          s |= (n.strategy >= st || n.level < 2 ? 0 : n.level < 6 ? 1 : 6 === n.level ? 2 : 3) << 6, 0 !== n.strstart && (s |= 32), s += 31 - s % 31, n.status = wt, zt(n, s), 0 !== n.strstart && (zt(n, t.adler >>> 16), zt(n, 65535 & t.adler)), t.adler = 1
        }
      }
      if (69 === n.status) {
        if (n.gzhead.extra) {
          for (a = n.pending; n.gzindex < (65535 & n.gzhead.extra.length) && (n.pending !== n.pending_buf_size || (n.gzhead.hcrc && n.pending > a && (t.adler = M(t.adler, n.pending_buf, n.pending - a, a)), kt(t), a = n.pending, n.pending !== n.pending_buf_size));) xt(n, 255 & n.gzhead.extra[n.gzindex]), n.gzindex++
          n.gzhead.hcrc && n.pending > a && (t.adler = M(t.adler, n.pending_buf, n.pending - a, a)), n.gzindex === n.gzhead.extra.length && (n.gzindex = 0, n.status = 73)
        } else {
          n.status = 73
        }
      }
      if (73 === n.status) {
        if (n.gzhead.name) {
          a = n.pending
          do {
            if (n.pending === n.pending_buf_size && (n.gzhead.hcrc && n.pending > a && (t.adler = M(t.adler, n.pending_buf, n.pending - a, a)), kt(t), a = n.pending, n.pending === n.pending_buf_size)) {
              i = 1
              break
            }
            i = n.gzindex < n.gzhead.name.length ? 255 & n.gzhead.name.charCodeAt(n.gzindex++) : 0, xt(n, i)
          } while (0 !== i)
          n.gzhead.hcrc && n.pending > a && (t.adler = M(t.adler, n.pending_buf, n.pending - a, a)), 0 === i && (n.gzindex = 0, n.status = 91)
        } else {
          n.status = 91
        }
      }
      if (91 === n.status) {
        if (n.gzhead.comment) {
          a = n.pending
          do {
            if (n.pending === n.pending_buf_size && (n.gzhead.hcrc && n.pending > a && (t.adler = M(t.adler, n.pending_buf, n.pending - a, a)), kt(t), a = n.pending, n.pending === n.pending_buf_size)) {
              i = 1
              break
            }
            i = n.gzindex < n.gzhead.comment.length ? 255 & n.gzhead.comment.charCodeAt(n.gzindex++) : 0, xt(n, i)
          } while (0 !== i)
          n.gzhead.hcrc && n.pending > a && (t.adler = M(t.adler, n.pending_buf, n.pending - a, a)), 0 === i && (n.status = ct)
        } else {
          n.status = ct
        }
      }
      if (n.status === ct && (n.gzhead.hcrc ? (n.pending + 2 > n.pending_buf_size && kt(t), n.pending + 2 <= n.pending_buf_size && (xt(n, 255 & t.adler), xt(n, t.adler >> 8 & 255), t.adler = 0, n.status = wt)) : n.status = wt), 0 !== n.pending) {
        if (kt(t), 0 === t.avail_out) return n.last_flush = -1, $
      } else if (0 === t.avail_in && pt(e) <= pt(r) && e !== Q) return gt(t, it)
      if (n.status === bt && 0 !== t.avail_in) return gt(t, it)
      if (0 !== t.avail_in || 0 !== n.lookahead || e !== W && n.status !== bt) {
        var o = n.strategy === st ? function (t, e) {
          for (var a; ;) {
            if (0 === t.lookahead && (Et(t), 0 === t.lookahead)) {
              if (e === W) return 1
              break
            }
            if (t.match_length = 0, a = G(t, 0, t.window[t.strstart]), t.lookahead--, t.strstart++, a && (yt(t, !1), 0 === t.strm.avail_out)) return 1
          }
          return t.insert = 0, e === Q ? (yt(t, !0), 0 === t.strm.avail_out ? 3 : 4) : t.last_lit && (yt(t, !1), 0 === t.strm.avail_out) ? 1 : 2
        }(n, e) : n.strategy === ot ? function (t, e) {
          for (var a, i, n, r, s = t.window; ;) {
            if (t.lookahead <= ft) {
              if (Et(t), t.lookahead <= ft && e === W) return 1
              if (0 === t.lookahead) break
            }
            if (t.match_length = 0, t.lookahead >= 3 && t.strstart > 0 && (i = s[n = t.strstart - 1]) === s[++n] && i === s[++n] && i === s[++n]) {
              r = t.strstart + ft
              do {
              } while (i === s[++n] && i === s[++n] && i === s[++n] && i === s[++n] && i === s[++n] && i === s[++n] && i === s[++n] && i === s[++n] && n < r)
              t.match_length = ft - (r - n), t.match_length > t.lookahead && (t.match_length = t.lookahead)
            }
            if (t.match_length >= 3 ? (a = G(t, 1, t.match_length - 3), t.lookahead -= t.match_length, t.strstart += t.match_length, t.match_length = 0) : (a = G(t, 0, t.window[t.strstart]), t.lookahead--, t.strstart++), a && (yt(t, !1), 0 === t.strm.avail_out)) return 1
          }
          return t.insert = 0, e === Q ? (yt(t, !0), 0 === t.strm.avail_out ? 3 : 4) : t.last_lit && (yt(t, !1), 0 === t.strm.avail_out) ? 1 : 2
        }(n, e) : Ut[n.level].func(n, e)
        if (3 !== o && 4 !== o || (n.status = bt), 1 === o || 3 === o) return 0 === t.avail_out && (n.last_flush = -1), $
        if (2 === o && (e === q ? X(n) : e !== V && (P(n, 0, 0, !1), e === J && (mt(n.head), 0 === n.lookahead && (n.strstart = 0, n.block_start = 0, n.insert = 0))), kt(t), 0 === t.avail_out)) return n.last_flush = -1, $
      }
      return e !== Q ? $ : n.wrap <= 0 ? tt : (2 === n.wrap ? (xt(n, 255 & t.adler), xt(n, t.adler >> 8 & 255), xt(n, t.adler >> 16 & 255), xt(n, t.adler >> 24 & 255), xt(n, 255 & t.total_in), xt(n, t.total_in >> 8 & 255), xt(n, t.total_in >> 16 & 255), xt(n, t.total_in >> 24 & 255)) : (zt(n, t.adler >>> 16), zt(n, 65535 & t.adler)), kt(t), n.wrap > 0 && (n.wrap = -n.wrap), 0 !== n.pending ? $ : tt)
    }, deflateEnd: function (t) {
      if (!t || !t.state) return et
      var e = t.state.status
      return 42 !== e && 69 !== e && 73 !== e && 91 !== e && e !== ct && e !== wt && e !== bt ? gt(t, et) : (t.state = null, e === wt ? gt(t, at) : $)
    }, deflateSetDictionary: function (t, e) {
      var a = e.length
      if (!t || !t.state) return et
      var i = t.state, n = i.wrap
      if (2 === n || 1 === n && 42 !== i.status || i.lookahead) return et
      if (1 === n && (t.adler = B(t.adler, e, a, 0)), i.wrap = 0, a >= i.w_size) {
        0 === n && (mt(i.head), i.strstart = 0, i.block_start = 0, i.insert = 0)
        var r = new Uint8Array(i.w_size)
        r.set(e.subarray(a - i.w_size, a), 0), e = r, a = i.w_size
      }
      var s = t.avail_in, o = t.next_in, l = t.input
      for (t.avail_in = a, t.next_in = 0, t.input = e, Et(i); i.lookahead >= 3;) {
        var h = i.strstart, d = i.lookahead - 2
        do {
          i.ins_h = vt(i, i.ins_h, i.window[h + 3 - 1]), i.prev[h & i.w_mask] = i.head[i.ins_h], i.head[i.ins_h] = h, h++
        } while (--d)
        i.strstart = h, i.lookahead = 2, Et(i)
      }
      return i.strstart += i.lookahead, i.block_start = i.strstart, i.insert = i.lookahead, i.lookahead = 0, i.match_length = i.prev_length = 2, i.match_available = 0, t.next_in = o, t.input = l, t.avail_in = s, i.wrap = n, $
    }, deflateInfo: 'pako deflate (from Nodeca project)'
  }

  function Lt (t) {
    return (Lt = 'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator ? function (t) {
      return typeof t
    } : function (t) {
      return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? 'symbol' : typeof t
    })(t)
  }

  var Nt = function (t, e) {
    return Object.prototype.hasOwnProperty.call(t, e)
  }, Bt = function (t) {
    for (var e = Array.prototype.slice.call(arguments, 1); e.length;) {
      var a = e.shift()
      if (a) {
        if ('object' !== Lt(a)) throw new TypeError(a + 'must be non-object')
        for (var i in a) Nt(a, i) && (t[i] = a[i])
      }
    }
    return t
  }, Ct = function (t) {
    for (var e = 0, a = 0, i = t.length; a < i; a++) e += t[a].length
    for (var n = new Uint8Array(e), r = 0, s = 0, o = t.length; r < o; r++) {
      var l = t[r]
      n.set(l, s), s += l.length
    }
    return n
  }, Mt = !0
  try {
    String.fromCharCode.apply(null, new Uint8Array(1))
  } catch (t) {
    Mt = !1
  }
  for (var Ht = new Uint8Array(256), jt = 0; jt < 256; jt++) Ht[jt] = jt >= 252 ? 6 : jt >= 248 ? 5 : jt >= 240 ? 4 : jt >= 224 ? 3 : jt >= 192 ? 2 : 1
  Ht[254] = Ht[254] = 1
  var Kt = function (t) {
    var e, a, i, n, r, s = t.length, o = 0
    for (n = 0; n < s; n++) 55296 == (64512 & (a = t.charCodeAt(n))) && n + 1 < s && 56320 == (64512 & (i = t.charCodeAt(n + 1))) && (a = 65536 + (a - 55296 << 10) + (i - 56320), n++), o += a < 128 ? 1 : a < 2048 ? 2 : a < 65536 ? 3 : 4
    for (e = new Uint8Array(o), r = 0, n = 0; r < o; n++) 55296 == (64512 & (a = t.charCodeAt(n))) && n + 1 < s && 56320 == (64512 & (i = t.charCodeAt(n + 1))) && (a = 65536 + (a - 55296 << 10) + (i - 56320), n++), a < 128 ? e[r++] = a : a < 2048 ? (e[r++] = 192 | a >>> 6, e[r++] = 128 | 63 & a) : a < 65536 ? (e[r++] = 224 | a >>> 12, e[r++] = 128 | a >>> 6 & 63, e[r++] = 128 | 63 & a) : (e[r++] = 240 | a >>> 18, e[r++] = 128 | a >>> 12 & 63, e[r++] = 128 | a >>> 6 & 63, e[r++] = 128 | 63 & a)
    return e
  }, Pt = function (t, e) {
    var a, i, n = e || t.length, r = new Array(2 * n)
    for (i = 0, a = 0; a < n;) {
      var s = t[a++]
      if (s < 128) {
        r[i++] = s
      } else {
        var o = Ht[s]
        if (o > 4) {
          r[i++] = 65533, a += o - 1
        } else {
          for (s &= 2 === o ? 31 : 3 === o ? 15 : 7; o > 1 && a < n;) s = s << 6 | 63 & t[a++], o--
          o > 1 ? r[i++] = 65533 : s < 65536 ? r[i++] = s : (s -= 65536, r[i++] = 55296 | s >> 10 & 1023, r[i++] = 56320 | 1023 & s)
        }
      }
    }
    return function (t, e) {
      if (e < 65534 && t.subarray && Mt) return String.fromCharCode.apply(null, t.length === e ? t : t.subarray(0, e))
      for (var a = '', i = 0; i < e; i++) a += String.fromCharCode(t[i])
      return a
    }(r, i)
  }, Yt = function (t, e) {
    (e = e || t.length) > t.length && (e = t.length)
    for (var a = e - 1; a >= 0 && 128 == (192 & t[a]);) a--
    return a < 0 || 0 === a ? e : a + Ht[t[a]] > e ? a : e
  }
  var Gt = function () {
      this.input = null, this.next_in = 0, this.avail_in = 0, this.total_in = 0, this.output = null, this.next_out = 0, this.avail_out = 0, this.total_out = 0, this.msg = '', this.state = null, this.data_type = 2, this.adler = 0
    }, Xt = Object.prototype.toString, Wt = j.Z_NO_FLUSH, qt = j.Z_SYNC_FLUSH, Jt = j.Z_FULL_FLUSH, Qt = j.Z_FINISH,
    Vt = j.Z_OK, $t = j.Z_STREAM_END, te = j.Z_DEFAULT_COMPRESSION, ee = j.Z_DEFAULT_STRATEGY, ae = j.Z_DEFLATED

  function ie (t) {
    this.options = Bt({level: te, method: ae, chunkSize: 16384, windowBits: 15, memLevel: 8, strategy: ee}, t || {})
    var e = this.options
    e.raw && e.windowBits > 0 ? e.windowBits = -e.windowBits : e.gzip && e.windowBits > 0 && e.windowBits < 16 && (e.windowBits += 16), this.err = 0, this.msg = '', this.ended = !1, this.chunks = [], this.strm = new Gt, this.strm.avail_out = 0
    var a = Ft.deflateInit2(this.strm, e.level, e.method, e.windowBits, e.memLevel, e.strategy)
    if (a !== Vt) throw new Error(H[a])
    if (e.header && Ft.deflateSetHeader(this.strm, e.header), e.dictionary) {
      var i
      if (i = 'string' == typeof e.dictionary ? Kt(e.dictionary) : '[object ArrayBuffer]' === Xt.call(e.dictionary) ? new Uint8Array(e.dictionary) : e.dictionary, (a = Ft.deflateSetDictionary(this.strm, i)) !== Vt) throw new Error(H[a])
      this._dict_set = !0
    }
  }

  function ne (t, e) {
    var a = new ie(e)
    if (a.push(t, !0), a.err) throw a.msg || H[a.err]
    return a.result
  }

  ie.prototype.push = function (t, e) {
    var a, i, n = this.strm, r = this.options.chunkSize
    if (this.ended) return !1
    for (i = e === ~~e ? e : !0 === e ? Qt : Wt, 'string' == typeof t ? n.input = Kt(t) : '[object ArrayBuffer]' === Xt.call(t) ? n.input = new Uint8Array(t) : n.input = t, n.next_in = 0, n.avail_in = n.input.length; ;) {
      if (0 === n.avail_out && (n.output = new Uint8Array(r), n.next_out = 0, n.avail_out = r), (i === qt || i === Jt) && n.avail_out <= 6) {
        this.onData(n.output.subarray(0, n.next_out)), n.avail_out = 0
      } else {
        if ((a = Ft.deflate(n, i)) === $t) return n.next_out > 0 && this.onData(n.output.subarray(0, n.next_out)), a = Ft.deflateEnd(this.strm), this.onEnd(a), this.ended = !0, a === Vt
        if (0 !== n.avail_out) {
          if (i > 0 && n.next_out > 0) this.onData(n.output.subarray(0, n.next_out)), n.avail_out = 0 else if (0 === n.avail_in) break
        } else {
          this.onData(n.output)
        }
      }
    }
    return !0
  }, ie.prototype.onData = function (t) {
    this.chunks.push(t)
  }, ie.prototype.onEnd = function (t) {
    t === Vt && (this.result = Ct(this.chunks)), this.chunks = [], this.err = t, this.msg = this.strm.msg
  }
  var re = {
      Deflate: ie, deflate: ne, deflateRaw: function (t, e) {
        return (e = e || {}).raw = !0, ne(t, e)
      }, gzip: function (t, e) {
        return (e = e || {}).gzip = !0, ne(t, e)
      }, constants: j
    }, se = function (t, e) {
      var a, i, n, r, s, o, l, h, d, _, f, u, c, w, b, g, p, m, v, k, y, x, z, A, E = t.state
      a = t.next_in, z = t.input, i = a + (t.avail_in - 5), n = t.next_out, A = t.output, r = n - (e - t.avail_out), s = n + (t.avail_out - 257), o = E.dmax, l = E.wsize, h = E.whave, d = E.wnext, _ = E.window, f = E.hold, u = E.bits, c = E.lencode, w = E.distcode, b = (1 << E.lenbits) - 1, g = (1 << E.distbits) - 1
      t:do {
        u < 15 && (f += z[a++] << u, u += 8, f += z[a++] << u, u += 8), p = c[f & b]
        e:for (; ;) {
          if (f >>>= m = p >>> 24, u -= m, 0 === (m = p >>> 16 & 255)) {
            A[n++] = 65535 & p
          } else {
            if (!(16 & m)) {
              if (0 == (64 & m)) {
                p = c[(65535 & p) + (f & (1 << m) - 1)]
                continue e
              }
              if (32 & m) {
                E.mode = 12
                break t
              }
              t.msg = 'invalid literal/length code', E.mode = 30
              break t
            }
            v = 65535 & p, (m &= 15) && (u < m && (f += z[a++] << u, u += 8), v += f & (1 << m) - 1, f >>>= m, u -= m), u < 15 && (f += z[a++] << u, u += 8, f += z[a++] << u, u += 8), p = w[f & g]
            a:for (; ;) {
              if (f >>>= m = p >>> 24, u -= m, !(16 & (m = p >>> 16 & 255))) {
                if (0 == (64 & m)) {
                  p = w[(65535 & p) + (f & (1 << m) - 1)]
                  continue a
                }
                t.msg = 'invalid distance code', E.mode = 30
                break t
              }
              if (k = 65535 & p, u < (m &= 15) && (f += z[a++] << u, (u += 8) < m && (f += z[a++] << u, u += 8)), (k += f & (1 << m) - 1) > o) {
                t.msg = 'invalid distance too far back', E.mode = 30
                break t
              }
              if (f >>>= m, u -= m, k > (m = n - r)) {
                if ((m = k - m) > h && E.sane) {
                  t.msg = 'invalid distance too far back', E.mode = 30
                  break t
                }
                if (y = 0, x = _, 0 === d) {
                  if (y += l - m, m < v) {
                    v -= m
                    do {
                      A[n++] = _[y++]
                    } while (--m)
                    y = n - k, x = A
                  }
                } else if (d < m) {
                  if (y += l + d - m, (m -= d) < v) {
                    v -= m
                    do {
                      A[n++] = _[y++]
                    } while (--m)
                    if (y = 0, d < v) {
                      v -= m = d
                      do {
                        A[n++] = _[y++]
                      } while (--m)
                      y = n - k, x = A
                    }
                  }
                } else if (y += d - m, m < v) {
                  v -= m
                  do {
                    A[n++] = _[y++]
                  } while (--m)
                  y = n - k, x = A
                }
                for (; v > 2;) A[n++] = x[y++], A[n++] = x[y++], A[n++] = x[y++], v -= 3
                v && (A[n++] = x[y++], v > 1 && (A[n++] = x[y++]))
              } else {
                y = n - k
                do {
                  A[n++] = A[y++], A[n++] = A[y++], A[n++] = A[y++], v -= 3
                } while (v > 2)
                v && (A[n++] = A[y++], v > 1 && (A[n++] = A[y++]))
              }
              break
            }
          }
          break
        }
      } while (a < i && n < s)
      a -= v = u >> 3, f &= (1 << (u -= v << 3)) - 1, t.next_in = a, t.next_out = n, t.avail_in = a < i ? i - a + 5 : 5 - (a - i), t.avail_out = n < s ? s - n + 257 : 257 - (n - s), E.hold = f, E.bits = u
    }, oe = 15,
    le = new Uint16Array([3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31, 35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 0, 0]),
    he = new Uint8Array([16, 16, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 18, 18, 18, 18, 19, 19, 19, 19, 20, 20, 20, 20, 21, 21, 21, 21, 16, 72, 78]),
    de = new Uint16Array([1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193, 257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145, 8193, 12289, 16385, 24577, 0, 0]),
    _e = new Uint8Array([16, 16, 16, 16, 17, 17, 18, 18, 19, 19, 20, 20, 21, 21, 22, 22, 23, 23, 24, 24, 25, 25, 26, 26, 27, 27, 28, 28, 29, 29, 64, 64]),
    fe = function (t, e, a, i, n, r, s, o) {
      var l, h, d, _, f, u, c, w, b, g = o.bits, p = 0, m = 0, v = 0, k = 0, y = 0, x = 0, z = 0, A = 0, E = 0, R = 0,
        Z = null, S = 0, U = new Uint16Array(16), D = new Uint16Array(16), O = null, T = 0
      for (p = 0; p <= oe; p++) U[p] = 0
      for (m = 0; m < i; m++) U[e[a + m]]++
      for (y = g, k = oe; k >= 1 && 0 === U[k]; k--)
      if (y > k && (y = k), 0 === k) return n[r++] = 20971520, n[r++] = 20971520, o.bits = 1, 0
      for (v = 1; v < k && 0 === U[v]; v++)
      for (y < v && (y = v), A = 1, p = 1; p <= oe; p++) if (A <<= 1, (A -= U[p]) < 0) return -1
      if (A > 0 && (0 === t || 1 !== k)) return -1
      for (D[1] = 0, p = 1; p < oe; p++) D[p + 1] = D[p] + U[p]
      for (m = 0; m < i; m++) 0 !== e[a + m] && (s[D[e[a + m]]++] = m)
      if (0 === t ? (Z = O = s, u = 19) : 1 === t ? (Z = le, S -= 257, O = he, T -= 257, u = 256) : (Z = de, O = _e, u = -1), R = 0, m = 0, p = v, f = r, x = y, z = 0, d = -1, _ = (E = 1 << y) - 1, 1 === t && E > 852 || 2 === t && E > 592) return 1
      for (; ;) {
        c = p - z, s[m] < u ? (w = 0, b = s[m]) : s[m] > u ? (w = O[T + s[m]], b = Z[S + s[m]]) : (w = 96, b = 0), l = 1 << p - z, v = h = 1 << x
        do {
          n[f + (R >> z) + (h -= l)] = c << 24 | w << 16 | b | 0
        } while (0 !== h)
        for (l = 1 << p - 1; R & l;) l >>= 1
        if (0 !== l ? (R &= l - 1, R += l) : R = 0, m++, 0 == --U[p]) {
          if (p === k) break
          p = e[a + s[m]]
        }
        if (p > y && (R & _) !== d) {
          for (0 === z && (z = y), f += v, A = 1 << (x = p - z); x + z < k && !((A -= U[x + z]) <= 0);) x++, A <<= 1
          if (E += 1 << x, 1 === t && E > 852 || 2 === t && E > 592) return 1
          n[d = R & _] = y << 24 | x << 16 | f - r | 0
        }
      }
      return 0 !== R && (n[f + R] = p - z << 24 | 64 << 16 | 0), o.bits = y, 0
    }, ue = j.Z_FINISH, ce = j.Z_BLOCK, we = j.Z_TREES, be = j.Z_OK, ge = j.Z_STREAM_END, pe = j.Z_NEED_DICT,
    me = j.Z_STREAM_ERROR, ve = j.Z_DATA_ERROR, ke = j.Z_MEM_ERROR, ye = j.Z_BUF_ERROR, xe = j.Z_DEFLATED, ze = 12,
    Ae = 30, Ee = function (t) {
      return (t >>> 24 & 255) + (t >>> 8 & 65280) + ((65280 & t) << 8) + ((255 & t) << 24)
    }

  function Re () {
    this.mode = 0, this.last = !1, this.wrap = 0, this.havedict = !1, this.flags = 0, this.dmax = 0, this.check = 0, this.total = 0, this.head = null, this.wbits = 0, this.wsize = 0, this.whave = 0, this.wnext = 0, this.window = null, this.hold = 0, this.bits = 0, this.length = 0, this.offset = 0, this.extra = 0, this.lencode = null, this.distcode = null, this.lenbits = 0, this.distbits = 0, this.ncode = 0, this.nlen = 0, this.ndist = 0, this.have = 0, this.next = null, this.lens = new Uint16Array(320), this.work = new Uint16Array(288), this.lendyn = null, this.distdyn = null, this.sane = 0, this.back = 0, this.was = 0
  }

  var Ze, Se, Ue = function (t) {
    if (!t || !t.state) return me
    var e = t.state
    return t.total_in = t.total_out = e.total = 0, t.msg = '', e.wrap && (t.adler = 1 & e.wrap), e.mode = 1, e.last = 0, e.havedict = 0, e.dmax = 32768, e.head = null, e.hold = 0, e.bits = 0, e.lencode = e.lendyn = new Int32Array(852), e.distcode = e.distdyn = new Int32Array(592), e.sane = 1, e.back = -1, be
  }, De = function (t) {
    if (!t || !t.state) return me
    var e = t.state
    return e.wsize = 0, e.whave = 0, e.wnext = 0, Ue(t)
  }, Oe = function (t, e) {
    var a
    if (!t || !t.state) return me
    var i = t.state
    return e < 0 ? (a = 0, e = -e) : (a = 1 + (e >> 4), e < 48 && (e &= 15)), e && (e < 8 || e > 15) ? me : (null !== i.window && i.wbits !== e && (i.window = null), i.wrap = a, i.wbits = e, De(t))
  }, Te = function (t, e) {
    if (!t) return me
    var a = new Re
    t.state = a, a.window = null
    var i = Oe(t, e)
    return i !== be && (t.state = null), i
  }, Ie = !0, Fe = function (t) {
    if (Ie) {
      Ze = new Int32Array(512), Se = new Int32Array(32)
      for (var e = 0; e < 144;) t.lens[e++] = 8
      for (; e < 256;) t.lens[e++] = 9
      for (; e < 280;) t.lens[e++] = 7
      for (; e < 288;) t.lens[e++] = 8
      for (fe(1, t.lens, 0, 288, Ze, 0, t.work, {bits: 9}), e = 0; e < 32;) t.lens[e++] = 5
      fe(2, t.lens, 0, 32, Se, 0, t.work, {bits: 5}), Ie = !1
    }
    t.lencode = Ze, t.lenbits = 9, t.distcode = Se, t.distbits = 5
  }, Le = function (t, e, a, i) {
    var n, r = t.state
    return null === r.window && (r.wsize = 1 << r.wbits, r.wnext = 0, r.whave = 0, r.window = new Uint8Array(r.wsize)), i >= r.wsize ? (r.window.set(e.subarray(a - r.wsize, a), 0), r.wnext = 0, r.whave = r.wsize) : ((n = r.wsize - r.wnext) > i && (n = i), r.window.set(e.subarray(a - i, a - i + n), r.wnext), (i -= n) ? (r.window.set(e.subarray(a - i, a), 0), r.wnext = i, r.whave = r.wsize) : (r.wnext += n, r.wnext === r.wsize && (r.wnext = 0), r.whave < r.wsize && (r.whave += n))), 0
  }, Ne = {
    inflateReset: De, inflateReset2: Oe, inflateResetKeep: Ue, inflateInit: function (t) {
      return Te(t, 15)
    }, inflateInit2: Te, inflate: function (t, e) {
      var a, i, n, r, s, o, l, h, d, _, f, u, c, w, b, g, p, m, v, k, y, x, z, A, E = 0, R = new Uint8Array(4),
        Z = new Uint8Array([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15])
      if (!t || !t.state || !t.output || !t.input && 0 !== t.avail_in) return me;
      (a = t.state).mode === ze && (a.mode = 13), s = t.next_out, n = t.output, l = t.avail_out, r = t.next_in, i = t.input, o = t.avail_in, h = a.hold, d = a.bits, _ = o, f = l, x = be
      t:for (; ;) {
        switch (a.mode) {
          case 1:
            if (0 === a.wrap) {
              a.mode = 13
              break
            }
            for (; d < 16;) {
              if (0 === o) break t
              o--, h += i[r++] << d, d += 8
            }
            if (2 & a.wrap && 35615 === h) {
              a.check = 0, R[0] = 255 & h, R[1] = h >>> 8 & 255, a.check = M(a.check, R, 2, 0), h = 0, d = 0, a.mode = 2
              break
            }
            if (a.flags = 0, a.head && (a.head.done = !1), !(1 & a.wrap) || (((255 & h) << 8) + (h >> 8)) % 31) {
              t.msg = 'incorrect header check', a.mode = Ae
              break
            }
            if ((15 & h) !== xe) {
              t.msg = 'unknown compression method', a.mode = Ae
              break
            }
            if (d -= 4, y = 8 + (15 & (h >>>= 4)), 0 === a.wbits) {
              a.wbits = y
            } else if (y > a.wbits) {
              t.msg = 'invalid window size', a.mode = Ae
              break
            }
            a.dmax = 1 << a.wbits, t.adler = a.check = 1, a.mode = 512 & h ? 10 : ze, h = 0, d = 0
            break
          case 2:
            for (; d < 16;) {
              if (0 === o) break t
              o--, h += i[r++] << d, d += 8
            }
            if (a.flags = h, (255 & a.flags) !== xe) {
              t.msg = 'unknown compression method', a.mode = Ae
              break
            }
            if (57344 & a.flags) {
              t.msg = 'unknown header flags set', a.mode = Ae
              break
            }
            a.head && (a.head.text = h >> 8 & 1), 512 & a.flags && (R[0] = 255 & h, R[1] = h >>> 8 & 255, a.check = M(a.check, R, 2, 0)), h = 0, d = 0, a.mode = 3
          case 3:
            for (; d < 32;) {
              if (0 === o) break t
              o--, h += i[r++] << d, d += 8
            }
            a.head && (a.head.time = h), 512 & a.flags && (R[0] = 255 & h, R[1] = h >>> 8 & 255, R[2] = h >>> 16 & 255, R[3] = h >>> 24 & 255, a.check = M(a.check, R, 4, 0)), h = 0, d = 0, a.mode = 4
          case 4:
            for (; d < 16;) {
              if (0 === o) break t
              o--, h += i[r++] << d, d += 8
            }
            a.head && (a.head.xflags = 255 & h, a.head.os = h >> 8), 512 & a.flags && (R[0] = 255 & h, R[1] = h >>> 8 & 255, a.check = M(a.check, R, 2, 0)), h = 0, d = 0, a.mode = 5
          case 5:
            if (1024 & a.flags) {
              for (; d < 16;) {
                if (0 === o) break t
                o--, h += i[r++] << d, d += 8
              }
              a.length = h, a.head && (a.head.extra_len = h), 512 & a.flags && (R[0] = 255 & h, R[1] = h >>> 8 & 255, a.check = M(a.check, R, 2, 0)), h = 0, d = 0
            } else {
              a.head && (a.head.extra = null)
            }
            a.mode = 6
          case 6:
            if (1024 & a.flags && ((u = a.length) > o && (u = o), u && (a.head && (y = a.head.extra_len - a.length, a.head.extra || (a.head.extra = new Uint8Array(a.head.extra_len)), a.head.extra.set(i.subarray(r, r + u), y)), 512 & a.flags && (a.check = M(a.check, i, u, r)), o -= u, r += u, a.length -= u), a.length)) break t
            a.length = 0, a.mode = 7
          case 7:
            if (2048 & a.flags) {
              if (0 === o) break t
              u = 0
              do {
                y = i[r + u++], a.head && y && a.length < 65536 && (a.head.name += String.fromCharCode(y))
              } while (y && u < o)
              if (512 & a.flags && (a.check = M(a.check, i, u, r)), o -= u, r += u, y) break t
            } else {
              a.head && (a.head.name = null)
            }
            a.length = 0, a.mode = 8
          case 8:
            if (4096 & a.flags) {
              if (0 === o) break t
              u = 0
              do {
                y = i[r + u++], a.head && y && a.length < 65536 && (a.head.comment += String.fromCharCode(y))
              } while (y && u < o)
              if (512 & a.flags && (a.check = M(a.check, i, u, r)), o -= u, r += u, y) break t
            } else {
              a.head && (a.head.comment = null)
            }
            a.mode = 9
          case 9:
            if (512 & a.flags) {
              for (; d < 16;) {
                if (0 === o) break t
                o--, h += i[r++] << d, d += 8
              }
              if (h !== (65535 & a.check)) {
                t.msg = 'header crc mismatch', a.mode = Ae
                break
              }
              h = 0, d = 0
            }
            a.head && (a.head.hcrc = a.flags >> 9 & 1, a.head.done = !0), t.adler = a.check = 0, a.mode = ze
            break
          case 10:
            for (; d < 32;) {
              if (0 === o) break t
              o--, h += i[r++] << d, d += 8
            }
            t.adler = a.check = Ee(h), h = 0, d = 0, a.mode = 11
          case 11:
            if (0 === a.havedict) return t.next_out = s, t.avail_out = l, t.next_in = r, t.avail_in = o, a.hold = h, a.bits = d, pe
            t.adler = a.check = 1, a.mode = ze
          case ze:
            if (e === ce || e === we) break t
          case 13:
            if (a.last) {
              h >>>= 7 & d, d -= 7 & d, a.mode = 27
              break
            }
            for (; d < 3;) {
              if (0 === o) break t
              o--, h += i[r++] << d, d += 8
            }
            switch (a.last = 1 & h, d -= 1, 3 & (h >>>= 1)) {
              case 0:
                a.mode = 14
                break
              case 1:
                if (Fe(a), a.mode = 20, e === we) {
                  h >>>= 2, d -= 2
                  break t
                }
                break
              case 2:
                a.mode = 17
                break
              case 3:
                t.msg = 'invalid block type', a.mode = Ae
            }
            h >>>= 2, d -= 2
            break
          case 14:
            for (h >>>= 7 & d, d -= 7 & d; d < 32;) {
              if (0 === o) break t
              o--, h += i[r++] << d, d += 8
            }
            if ((65535 & h) != (h >>> 16 ^ 65535)) {
              t.msg = 'invalid stored block lengths', a.mode = Ae
              break
            }
            if (a.length = 65535 & h, h = 0, d = 0, a.mode = 15, e === we) break t
          case 15:
            a.mode = 16
          case 16:
            if (u = a.length) {
              if (u > o && (u = o), u > l && (u = l), 0 === u) break t
              n.set(i.subarray(r, r + u), s), o -= u, r += u, l -= u, s += u, a.length -= u
              break
            }
            a.mode = ze
            break
          case 17:
            for (; d < 14;) {
              if (0 === o) break t
              o--, h += i[r++] << d, d += 8
            }
            if (a.nlen = 257 + (31 & h), h >>>= 5, d -= 5, a.ndist = 1 + (31 & h), h >>>= 5, d -= 5, a.ncode = 4 + (15 & h), h >>>= 4, d -= 4, a.nlen > 286 || a.ndist > 30) {
              t.msg = 'too many length or distance symbols', a.mode = Ae
              break
            }
            a.have = 0, a.mode = 18
          case 18:
            for (; a.have < a.ncode;) {
              for (; d < 3;) {
                if (0 === o) break t
                o--, h += i[r++] << d, d += 8
              }
              a.lens[Z[a.have++]] = 7 & h, h >>>= 3, d -= 3
            }
            for (; a.have < 19;) a.lens[Z[a.have++]] = 0
            if (a.lencode = a.lendyn, a.lenbits = 7, z = {bits: a.lenbits}, x = fe(0, a.lens, 0, 19, a.lencode, 0, a.work, z), a.lenbits = z.bits, x) {
              t.msg = 'invalid code lengths set', a.mode = Ae
              break
            }
            a.have = 0, a.mode = 19
          case 19:
            for (; a.have < a.nlen + a.ndist;) {
              for (; g = (E = a.lencode[h & (1 << a.lenbits) - 1]) >>> 16 & 255, p = 65535 & E, !((b = E >>> 24) <= d);) {
                if (0 === o) break t
                o--, h += i[r++] << d, d += 8
              }
              if (p < 16) {
                h >>>= b, d -= b, a.lens[a.have++] = p
              } else {
                if (16 === p) {
                  for (A = b + 2; d < A;) {
                    if (0 === o) break t
                    o--, h += i[r++] << d, d += 8
                  }
                  if (h >>>= b, d -= b, 0 === a.have) {
                    t.msg = 'invalid bit length repeat', a.mode = Ae
                    break
                  }
                  y = a.lens[a.have - 1], u = 3 + (3 & h), h >>>= 2, d -= 2
                } else if (17 === p) {
                  for (A = b + 3; d < A;) {
                    if (0 === o) break t
                    o--, h += i[r++] << d, d += 8
                  }
                  d -= b, y = 0, u = 3 + (7 & (h >>>= b)), h >>>= 3, d -= 3
                } else {
                  for (A = b + 7; d < A;) {
                    if (0 === o) break t
                    o--, h += i[r++] << d, d += 8
                  }
                  d -= b, y = 0, u = 11 + (127 & (h >>>= b)), h >>>= 7, d -= 7
                }
                if (a.have + u > a.nlen + a.ndist) {
                  t.msg = 'invalid bit length repeat', a.mode = Ae
                  break
                }
                for (; u--;) a.lens[a.have++] = y
              }
            }
            if (a.mode === Ae) break
            if (0 === a.lens[256]) {
              t.msg = 'invalid code -- missing end-of-block', a.mode = Ae
              break
            }
            if (a.lenbits = 9, z = {bits: a.lenbits}, x = fe(1, a.lens, 0, a.nlen, a.lencode, 0, a.work, z), a.lenbits = z.bits, x) {
              t.msg = 'invalid literal/lengths set', a.mode = Ae
              break
            }
            if (a.distbits = 6, a.distcode = a.distdyn, z = {bits: a.distbits}, x = fe(2, a.lens, a.nlen, a.ndist, a.distcode, 0, a.work, z), a.distbits = z.bits, x) {
              t.msg = 'invalid distances set', a.mode = Ae
              break
            }
            if (a.mode = 20, e === we) break t
          case 20:
            a.mode = 21
          case 21:
            if (o >= 6 && l >= 258) {
              t.next_out = s, t.avail_out = l, t.next_in = r, t.avail_in = o, a.hold = h, a.bits = d, se(t, f), s = t.next_out, n = t.output, l = t.avail_out, r = t.next_in, i = t.input, o = t.avail_in, h = a.hold, d = a.bits, a.mode === ze && (a.back = -1)
              break
            }
            for (a.back = 0; g = (E = a.lencode[h & (1 << a.lenbits) - 1]) >>> 16 & 255, p = 65535 & E, !((b = E >>> 24) <= d);) {
              if (0 === o) break t
              o--, h += i[r++] << d, d += 8
            }
            if (g && 0 == (240 & g)) {
              for (m = b, v = g, k = p; g = (E = a.lencode[k + ((h & (1 << m + v) - 1) >> m)]) >>> 16 & 255, p = 65535 & E, !(m + (b = E >>> 24) <= d);) {
                if (0 === o) break t
                o--, h += i[r++] << d, d += 8
              }
              h >>>= m, d -= m, a.back += m
            }
            if (h >>>= b, d -= b, a.back += b, a.length = p, 0 === g) {
              a.mode = 26
              break
            }
            if (32 & g) {
              a.back = -1, a.mode = ze
              break
            }
            if (64 & g) {
              t.msg = 'invalid literal/length code', a.mode = Ae
              break
            }
            a.extra = 15 & g, a.mode = 22
          case 22:
            if (a.extra) {
              for (A = a.extra; d < A;) {
                if (0 === o) break t
                o--, h += i[r++] << d, d += 8
              }
              a.length += h & (1 << a.extra) - 1, h >>>= a.extra, d -= a.extra, a.back += a.extra
            }
            a.was = a.length, a.mode = 23
          case 23:
            for (; g = (E = a.distcode[h & (1 << a.distbits) - 1]) >>> 16 & 255, p = 65535 & E, !((b = E >>> 24) <= d);) {
              if (0 === o) break t
              o--, h += i[r++] << d, d += 8
            }
            if (0 == (240 & g)) {
              for (m = b, v = g, k = p; g = (E = a.distcode[k + ((h & (1 << m + v) - 1) >> m)]) >>> 16 & 255, p = 65535 & E, !(m + (b = E >>> 24) <= d);) {
                if (0 === o) break t
                o--, h += i[r++] << d, d += 8
              }
              h >>>= m, d -= m, a.back += m
            }
            if (h >>>= b, d -= b, a.back += b, 64 & g) {
              t.msg = 'invalid distance code', a.mode = Ae
              break
            }
            a.offset = p, a.extra = 15 & g, a.mode = 24
          case 24:
            if (a.extra) {
              for (A = a.extra; d < A;) {
                if (0 === o) break t
                o--, h += i[r++] << d, d += 8
              }
              a.offset += h & (1 << a.extra) - 1, h >>>= a.extra, d -= a.extra, a.back += a.extra
            }
            if (a.offset > a.dmax) {
              t.msg = 'invalid distance too far back', a.mode = Ae
              break
            }
            a.mode = 25
          case 25:
            if (0 === l) break t
            if (u = f - l, a.offset > u) {
              if ((u = a.offset - u) > a.whave && a.sane) {
                t.msg = 'invalid distance too far back', a.mode = Ae
                break
              }
              u > a.wnext ? (u -= a.wnext, c = a.wsize - u) : c = a.wnext - u, u > a.length && (u = a.length), w = a.window
            } else {
              w = n, c = s - a.offset, u = a.length
            }
            u > l && (u = l), l -= u, a.length -= u
            do {
              n[s++] = w[c++]
            } while (--u)
            0 === a.length && (a.mode = 21)
            break
          case 26:
            if (0 === l) break t
            n[s++] = a.length, l--, a.mode = 21
            break
          case 27:
            if (a.wrap) {
              for (; d < 32;) {
                if (0 === o) break t
                o--, h |= i[r++] << d, d += 8
              }
              if (f -= l, t.total_out += f, a.total += f, f && (t.adler = a.check = a.flags ? M(a.check, n, f, s - f) : B(a.check, n, f, s - f)), f = l, (a.flags ? h : Ee(h)) !== a.check) {
                t.msg = 'incorrect data check', a.mode = Ae
                break
              }
              h = 0, d = 0
            }
            a.mode = 28
          case 28:
            if (a.wrap && a.flags) {
              for (; d < 32;) {
                if (0 === o) break t
                o--, h += i[r++] << d, d += 8
              }
              if (h !== (4294967295 & a.total)) {
                t.msg = 'incorrect length check', a.mode = Ae
                break
              }
              h = 0, d = 0
            }
            a.mode = 29
          case 29:
            x = ge
            break t
          case Ae:
            x = ve
            break t
          case 31:
            return ke
          case 32:
          default:
            return me
        }
      }
      return t.next_out = s, t.avail_out = l, t.next_in = r, t.avail_in = o, a.hold = h, a.bits = d, (a.wsize || f !== t.avail_out && a.mode < Ae && (a.mode < 27 || e !== ue)) && Le(t, t.output, t.next_out, f - t.avail_out), _ -= t.avail_in, f -= t.avail_out, t.total_in += _, t.total_out += f, a.total += f, a.wrap && f && (t.adler = a.check = a.flags ? M(a.check, n, f, t.next_out - f) : B(a.check, n, f, t.next_out - f)), t.data_type = a.bits + (a.last ? 64 : 0) + (a.mode === ze ? 128 : 0) + (20 === a.mode || 15 === a.mode ? 256 : 0), (0 === _ && 0 === f || e === ue) && x === be && (x = ye), x
    }, inflateEnd: function (t) {
      if (!t || !t.state) return me
      var e = t.state
      return e.window && (e.window = null), t.state = null, be
    }, inflateGetHeader: function (t, e) {
      if (!t || !t.state) return me
      var a = t.state
      return 0 == (2 & a.wrap) ? me : (a.head = e, e.done = !1, be)
    }, inflateSetDictionary: function (t, e) {
      var a, i = e.length
      return t && t.state ? 0 !== (a = t.state).wrap && 11 !== a.mode ? me : 11 === a.mode && B(1, e, i, 0) !== a.check ? ve : Le(t, e, i, i) ? (a.mode = 31, ke) : (a.havedict = 1, be) : me
    }, inflateInfo: 'pako inflate (from Nodeca project)'
  }
  var Be = function () {
      this.text = 0, this.time = 0, this.xflags = 0, this.os = 0, this.extra = null, this.extra_len = 0, this.name = '', this.comment = '', this.hcrc = 0, this.done = !1
    }, Ce = Object.prototype.toString, Me = j.Z_NO_FLUSH, He = j.Z_FINISH, je = j.Z_OK, Ke = j.Z_STREAM_END,
    Pe = j.Z_NEED_DICT, Ye = j.Z_STREAM_ERROR, Ge = j.Z_DATA_ERROR, Xe = j.Z_MEM_ERROR

  function We (t) {
    this.options = Bt({chunkSize: 65536, windowBits: 15, to: ''}, t || {})
    var e = this.options
    e.raw && e.windowBits >= 0 && e.windowBits < 16 && (e.windowBits = -e.windowBits, 0 === e.windowBits && (e.windowBits = -15)), !(e.windowBits >= 0 && e.windowBits < 16) || t && t.windowBits || (e.windowBits += 32), e.windowBits > 15 && e.windowBits < 48 && 0 == (15 & e.windowBits) && (e.windowBits |= 15), this.err = 0, this.msg = '', this.ended = !1, this.chunks = [], this.strm = new Gt, this.strm.avail_out = 0
    var a = Ne.inflateInit2(this.strm, e.windowBits)
    if (a !== je) throw new Error(H[a])
    if (this.header = new Be, Ne.inflateGetHeader(this.strm, this.header), e.dictionary && ('string' == typeof e.dictionary ? e.dictionary = Kt(e.dictionary) : '[object ArrayBuffer]' === Ce.call(e.dictionary) && (e.dictionary = new Uint8Array(e.dictionary)), e.raw && (a = Ne.inflateSetDictionary(this.strm, e.dictionary)) !== je)) throw new Error(H[a])
  }

  function qe (t, e) {
    var a = new We(e)
    if (a.push(t), a.err) throw a.msg || H[a.err]
    return a.result
  }

  We.prototype.push = function (t, e) {
    var a, i, n, r = this.strm, s = this.options.chunkSize, o = this.options.dictionary
    if (this.ended) return !1
    for (i = e === ~~e ? e : !0 === e ? He : Me, '[object ArrayBuffer]' === Ce.call(t) ? r.input = new Uint8Array(t) : r.input = t, r.next_in = 0, r.avail_in = r.input.length; ;) {
      for (0 === r.avail_out && (r.output = new Uint8Array(s), r.next_out = 0, r.avail_out = s), (a = Ne.inflate(r, i)) === Pe && o && ((a = Ne.inflateSetDictionary(r, o)) === je ? a = Ne.inflate(r, i) : a === Ge && (a = Pe)); r.avail_in > 0 && a === Ke && r.state.wrap > 0 && 0 !== t[r.next_in];) Ne.inflateReset(r), a = Ne.inflate(r, i)
      switch (a) {
        case Ye:
        case Ge:
        case Pe:
        case Xe:
          return this.onEnd(a), this.ended = !0, !1
      }
      if (n = r.avail_out, r.next_out && (0 === r.avail_out || a === Ke)) {
        if ('string' === this.options.to) {
          var l = Yt(r.output, r.next_out), h = r.next_out - l, d = Pt(r.output, l)
          r.next_out = h, r.avail_out = s - h, h && r.output.set(r.output.subarray(l, l + h), 0), this.onData(d)
        } else {
          this.onData(r.output.length === r.next_out ? r.output : r.output.subarray(0, r.next_out))
        }
      }
      if (a !== je || 0 !== n) {
        if (a === Ke) return a = Ne.inflateEnd(this.strm), this.onEnd(a), this.ended = !0, !0
        if (0 === r.avail_in) break
      }
    }
    return !0
  }, We.prototype.onData = function (t) {
    this.chunks.push(t)
  }, We.prototype.onEnd = function (t) {
    t === je && ('string' === this.options.to ? this.result = this.chunks.join('') : this.result = Ct(this.chunks)), this.chunks = [], this.err = t, this.msg = this.strm.msg
  }
  var Je = {
      Inflate: We, inflate: qe, inflateRaw: function (t, e) {
        return (e = e || {}).raw = !0, qe(t, e)
      }, ungzip: qe, constants: j
    }, Qe = re.Deflate, Ve = re.deflate, $e = re.deflateRaw, ta = re.gzip, ea = Je.Inflate, aa = Je.inflate,
    ia = Je.inflateRaw, na = Je.ungzip, ra = j, sa = {
      Deflate: Qe,
      deflate: Ve,
      deflateRaw: $e,
      gzip: ta,
      Inflate: ea,
      inflate: aa,
      inflateRaw: ia,
      ungzip: na,
      constants: ra
    }
  t.Deflate = Qe, t.Inflate = ea, t.constants = ra, t.default = sa, t.deflate = Ve, t.deflateRaw = $e, t.gzip = ta, t.inflate = aa, t.inflateRaw = ia, t.ungzip = na, Object.defineProperty(t, '__esModule', {value: !0})
}))
var __reflect = this && this.__reflect || function (t, e, r) {
  t.__class__ = e, r ? r.push(e) : r = [e], t.__types__ = t.__types__ ? r.concat(t.__types__) : r
}, __extends = this && this.__extends || function (t, e) {
  function r () {
    this.constructor = t
  }

  for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
  r.prototype = e.prototype, t.prototype = new r
}, spine
!function (t) {
  var e = function (e) {
    function n (t, n, i) {
      void 0 === n && (n = ''), void 0 === i && (i = null)
      var a = e.call(this) || this
      return a.pathPrefix = null, a.assets = {}, a.errors = {}, a.toLoad = 0, a.loaded = 0, a.textureLoader = t, a.pathPrefix = n, a.downloader = i || new r, a
    }

    return __extends(n, e), n.prototype.start = function (t) {
      return this.toLoad++, this.pathPrefix + t
    }, n.prototype.success = function (t, e, r) {
      this.toLoad--, this.loaded++, this.assets[e] = r, this.dispatchEventWith(egret.Event.COMPLETE, !1, {path: e}), t && t(e, r)
    }, n.prototype.error = function (t, e, r) {
      this.toLoad--, this.loaded++, this.errors[e] = r, t && t(e, r)
    }, n.prototype.loadAll = function () {
      var t = this, e = new Promise(function (e, r) {
        var n = function () {
          return t.isLoadingComplete() ? void (t.hasErrors() ? r(t.errors) : e(t)) : void requestAnimationFrame(n)
        }
        requestAnimationFrame(n)
      })
      return e
    }, n.prototype.setRawDataURI = function (t, e) {
      this.downloader.rawDataUris[this.pathPrefix + t] = e
    }, n.prototype.loadBinary = function (t, e, r) {
      var n = this
      void 0 === e && (e = null), void 0 === r && (r = null), t = this.start(t), this.downloader.downloadBinary(t, function (r) {
        n.success(e, t, r)
      }, function (e, i) {
        n.error(r, t, 'Couldn\'t load binary ' + t + ': status ' + e + ', ' + i)
      })
    }, n.prototype.loadText = function (t, e, r) {
      var n = this
      void 0 === e && (e = null), void 0 === r && (r = null), t = this.start(t), this.downloader.downloadText(t, function (r) {
        n.success(e, t, r)
      }, function (e, i) {
        n.error(r, t, 'Couldn\'t load text ' + t + ': status ' + e + ', ' + i)
      })
    }, n.prototype.loadJson = function (t, e, r) {
      var n = this
      void 0 === e && (e = null), void 0 === r && (r = null), t = this.start(t), this.downloader.downloadJson(t, function (r) {
        n.success(e, t, r)
      }, function (e, i) {
        n.error(r, t, 'Couldn\'t load JSON ' + t + ': status ' + e + ', ' + i)
      })
    }, n.prototype.loadTexture = function (t, e, r) {
      var n = this
      void 0 === e && (e = null), void 0 === r && (r = null), t = this.start(t)
      var i = !('undefined' == typeof window || 'undefined' == typeof navigator || !window.document), a = !i
      if (a) {
        fetch(t, {mode: 'cors'}).then(function (e) {
          return e.ok ? e.blob() : (n.error(r, t, 'Couldn\'t load image: ' + t), null)
        }).then(function (t) {
          return t ? createImageBitmap(t, {premultiplyAlpha: 'none', colorSpaceConversion: 'none'}) : null
        }).then(function (r) {
          r && n.success(e, t, n.textureLoader(r))
        })
      } else {
        var s = new Image
        s.crossOrigin = 'anonymous', s.onload = function () {
          n.success(e, t, n.textureLoader(s))
        }, s.onerror = function () {
          n.error(r, t, 'Couldn\'t load image: ' + t)
        }, this.downloader.rawDataUris[t] && (t = this.downloader.rawDataUris[t]), s.src = t
      }
    }, n.prototype.loadTextureAtlas = function (e, r, n, i) {
      var a = this
      void 0 === r && (r = null), void 0 === n && (n = null), void 0 === i && (i = null)
      var s = e.lastIndexOf('/'), o = s >= 0 ? e.substring(0, s + 1) : ''
      e = this.start(e), this.downloader.downloadText(e, function (s) {
        try {
          for (var h = new t.TextureAtlas(s), l = h.pages.length, c = !1, p = function (t) {
            a.loadTexture(null == i ? o + t.name : i[t.name], function (n, i) {
              c || (t.setTexture(i), 0 == --l && a.success(r, e, h))
            }, function (t, r) {
              c || a.error(n, e, 'Couldn\'t load texture atlas ' + e + ' page image: ' + t), c = !0
            })
          }, u = 0, d = h.pages; u < d.length; u++) {
            var f = d[u]
            p(f)
          }
        } catch (m) {
          a.error(n, e, 'Couldn\'t parse texture atlas ' + e + ': ' + m.message)
        }
      }, function (t, r) {
        a.error(n, e, 'Couldn\'t load texture atlas ' + e + ': status ' + t + ', ' + r)
      })
    }, n.prototype.get = function (t) {
      return this.assets[this.pathPrefix + t]
    }, n.prototype.require = function (t) {
      t = this.pathPrefix + t
      var e = this.assets[t]
      if (e) return e
      var r = this.errors[t]
      throw Error('Asset not found: ' + t + (r ? '\n' + r : ''))
    }, n.prototype.remove = function (t) {
      t = this.pathPrefix + t
      var e = this.assets[t]
      return e.dispose && e.dispose(), delete this.assets[t], e
    }, n.prototype.removeAll = function () {
      for (var t in this.assets) {
        var e = this.assets[t]
        e.dispose && e.dispose()
      }
      this.assets = {}
    }, n.prototype.isLoadingComplete = function () {
      return 0 == this.toLoad
    }, n.prototype.getToLoad = function () {
      return this.toLoad
    }, n.prototype.getLoaded = function () {
      return this.loaded
    }, n.prototype.dispose = function () {
      this.removeAll()
    }, n.prototype.hasErrors = function () {
      return Object.keys(this.errors).length > 0
    }, n.prototype.getErrors = function () {
      return this.errors
    }, n
  }(egret.EventDispatcher)
  t.AssetManagerBase = e, __reflect(e.prototype, 'spine.AssetManagerBase', ['spine.Disposable'])
  var r = function () {
    function t () {
      this.callbacks = {}, this.rawDataUris = {}
    }

    return t.prototype.dataUriToString = function (t) {
      if (!t.startsWith('data:')) throw new Error('Not a data URI.')
      var e = t.indexOf('base64,')
      return -1 != e ? (e += 'base64,'.length, atob(t.substr(e))) : t.substr(t.indexOf(',') + 1)
    }, t.prototype.base64ToUint8Array = function (t) {
      for (var e = window.atob(t), r = e.length, n = new Uint8Array(r), i = 0; r > i; i++) n[i] = e.charCodeAt(i)
      return n
    }, t.prototype.dataUriToUint8Array = function (t) {
      if (!t.startsWith('data:')) throw new Error('Not a data URI.')
      var e = t.indexOf('base64,')
      if (-1 == e) throw new Error('Not a binary data URI.')
      return e += 'base64,'.length, this.base64ToUint8Array(t.substr(e))
    }, t.prototype.downloadText = function (t, e, r) {
      var n = this
      if (!this.start(t, e, r)) {
        if (this.rawDataUris[t]) {
          try {
            var i = this.rawDataUris[t]
            this.finish(t, 200, this.dataUriToString(i))
          } catch (a) {
            this.finish(t, 400, JSON.stringify(a))
          }
        } else {
          var s = new XMLHttpRequest
          s.overrideMimeType('text/html'), s.open('GET', t, !0)
          var o = function () {
            n.finish(t, s.status, s.responseText)
          }
          s.onload = o, s.onerror = o, s.send()
        }
      }
    }, t.prototype.downloadJson = function (t, e, r) {
      this.downloadText(t, function (t) {
        e(JSON.parse(t))
      }, r)
    }, t.prototype.downloadBinary = function (t, e, r) {
      var n = this
      if (!this.start(t, e, r)) {
        if (this.rawDataUris[t]) {
          try {
            var i = this.rawDataUris[t]
            this.finish(t, 200, this.dataUriToUint8Array(i))
          } catch (a) {
            this.finish(t, 400, JSON.stringify(a))
          }
        } else {
          var s = new XMLHttpRequest
          s.open('GET', t, !0), s.responseType = 'arraybuffer'
          var o = function () {
            n.finish(t, s.status, s.response)
          }
          s.onload = function () {
            200 == s.status || 0 == s.status ? n.finish(t, 200, new Uint8Array(s.response)) : o()
          }, s.onerror = o, s.send()
        }
      }
    }, t.prototype.start = function (t, e, r) {
      var n = this.callbacks[t]
      try {
        if (n) return !0
        this.callbacks[t] = n = []
      } finally {
        n.push(e, r)
      }
    }, t.prototype.finish = function (t, e, r) {
      var n = this.callbacks[t]
      delete this.callbacks[t]
      for (var i = 200 == e || 0 == e ? [r] : [e, r], a = i.length - 1, s = n.length; s > a; a += 2) n[a].apply(null, i)
    }, t
  }()
  t.Downloader = r, __reflect(r.prototype, 'spine.Downloader')
}(spine || (spine = {}))
var __reflect = this && this.__reflect || function (t, e, r) {
  t.__class__ = e, r ? r.push(e) : r = [e], t.__types__ = t.__types__ ? r.concat(t.__types__) : r
}, spine
!function (t) {
  var e = function () {
    function t (t, e, r) {
      this.name = t, this.order = e, this.skinRequired = r
    }

    return t
  }()
  t.ConstraintData = e, __reflect(e.prototype, 'spine.ConstraintData')
}(spine || (spine = {}))
var __reflect = this && this.__reflect || function (t, e, r) {
  t.__class__ = e, r ? r.push(e) : r = [e], t.__types__ = t.__types__ ? r.concat(t.__types__) : r
}, __extends = this && this.__extends || function (t, e) {
  function r () {
    this.constructor = t
  }

  for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
  r.prototype = e.prototype, t.prototype = new r
}, spine
!function (t) {
  var e = function () {
    function t (t) {
      this._image = t
    }

    return t.prototype.getImage = function () {
      return this._image
    }, t
  }()
  t.Texture = e, __reflect(e.prototype, 'spine.Texture')
  var r
  !function (t) {
    t[t.Nearest = 9728] = 'Nearest', t[t.Linear = 9729] = 'Linear', t[t.MipMap = 9987] = 'MipMap', t[t.MipMapNearestNearest = 9984] = 'MipMapNearestNearest', t[t.MipMapLinearNearest = 9985] = 'MipMapLinearNearest', t[t.MipMapNearestLinear = 9986] = 'MipMapNearestLinear', t[t.MipMapLinearLinear = 9987] = 'MipMapLinearLinear'
  }(r = t.TextureFilter || (t.TextureFilter = {}))
  var n
  !function (t) {
    t[t.MirroredRepeat = 33648] = 'MirroredRepeat', t[t.ClampToEdge = 33071] = 'ClampToEdge', t[t.Repeat = 10497] = 'Repeat'
  }(n = t.TextureWrap || (t.TextureWrap = {}))
  var i = function () {
    function t () {
      this.u = 0, this.v = 0, this.u2 = 0, this.v2 = 0, this.width = 0, this.height = 0, this.degrees = 0, this.offsetX = 0, this.offsetY = 0, this.originalWidth = 0, this.originalHeight = 0
    }

    return t
  }()
  t.TextureRegion = i, __reflect(i.prototype, 'spine.TextureRegion')
  var a = function (t) {
    function e () {
      return null !== t && t.apply(this, arguments) || this
    }

    return __extends(e, t), e.prototype.setFilters = function (t, e) {
    }, e.prototype.setWraps = function (t, e) {
    }, e.prototype.dispose = function () {
    }, e
  }(e)
  t.FakeTexture = a, __reflect(a.prototype, 'spine.FakeTexture')
}(spine || (spine = {}))
var __reflect = this && this.__reflect || function (t, e, r) {
  t.__class__ = e, r ? r.push(e) : r = [e], t.__types__ = t.__types__ ? r.concat(t.__types__) : r
}, __extends = this && this.__extends || function (t, e) {
  function r () {
    this.constructor = t
  }

  for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
  r.prototype = e.prototype, t.prototype = new r
}, spine
!function (t) {
  var e = function () {
    function t (t) {
      if (!t) throw new Error('name cannot be null.')
      this.name = t
    }

    return t
  }()
  t.Attachment = e, __reflect(e.prototype, 'spine.Attachment')
  var r = function (e) {
    function r (t) {
      var n = e.call(this, t) || this
      return n.id = r.nextID++, n.bones = null, n.vertices = null, n.worldVerticesLength = 0, n.deformAttachment = n, n
    }

    return __extends(r, e), r.prototype.computeWorldVertices = function (t, e, r, n, i, a) {
      r = i + (r >> 1) * a
      var s = t.bone.skeleton, o = t.deform, h = this.vertices, l = this.bones
      if (l) {
        for (var c = 0, p = 0, u = 0; e > u; u += 2) {
          var d = l[c]
          c += d + 1, p += d
        }
        var f = s.bones
        if (0 == o.length) {
          for (var m = i, v = 3 * p; r > m; m += a) {
            var g = 0, y = 0, d = l[c++]
            for (d += c; d > c; c++, v += 3) {
              var _ = f[l[c]], x = h[v], w = h[v + 1], b = h[v + 2]
              g += (x * _.a + w * _.b + _.worldX) * b, y += (x * _.c + w * _.d + _.worldY) * b
            }
            n[m] = g, n[m + 1] = y
          }
        } else {
          for (var S = o, m = i, v = 3 * p, A = p << 1; r > m; m += a) {
            var g = 0, y = 0, d = l[c++]
            for (d += c; d > c; c++, v += 3, A += 2) {
              var _ = f[l[c]], x = h[v] + S[A], w = h[v + 1] + S[A + 1], b = h[v + 2]
              g += (x * _.a + w * _.b + _.worldX) * b, y += (x * _.c + w * _.d + _.worldY) * b
            }
            n[m] = g, n[m + 1] = y
          }
        }
      } else {
        o.length > 0 && (h = o)
        for (var _ = t.bone, k = _.worldX, T = _.worldY, M = _.a, v = _.b, C = _.c, I = _.d, F = e, m = i; r > m; F += 2, m += a) {
          var x = h[F], w = h[F + 1]
          n[m] = x * M + w * v + k, n[m + 1] = x * C + w * I + T
        }
      }
    }, r.prototype.copyTo = function (e) {
      this.bones ? (e.bones = new Array(this.bones.length), t.Utils.arrayCopy(this.bones, 0, e.bones, 0, this.bones.length)) : e.bones = null, this.vertices ? (e.vertices = t.Utils.newFloatArray(this.vertices.length), t.Utils.arrayCopy(this.vertices, 0, e.vertices, 0, this.vertices.length)) : e.vertices = null, e.worldVerticesLength = this.worldVerticesLength, e.deformAttachment = this.deformAttachment
    }, r.nextID = 0, r
  }(e)
  t.VertexAttachment = r, __reflect(r.prototype, 'spine.VertexAttachment')
}(spine || (spine = {}))
var __reflect = this && this.__reflect || function (t, e, r) {
  t.__class__ = e, r ? r.push(e) : r = [e], t.__types__ = t.__types__ ? r.concat(t.__types__) : r
}, spine
!function (t) {
  var e = function () {
    function t () {
      this._listeners = new Map
    }

    return t.prototype.on = function (t, e, r, n) {
      var i = this._listeners.get(t)
      return i ? i.push({fn: e, ctx: r, once: n}) : this._listeners.set(t, [{fn: e, ctx: r, once: n}]), this
    }, t.prototype.once = function (t, e, r) {
      var n = this._listeners.get(t)
      return n ? n.push({fn: e, ctx: r, once: !0}) : this._listeners.set(t, [{fn: e, ctx: r, once: !0}]), this
    }, t.prototype.off = function (t, e, r, n) {
      var i = this._listeners.get(t)
      if (0 === arguments.length) {
        this._listeners.clear()
      } else if (1 === arguments.length) {
        this._listeners['delete'](t)
      } else if (i) {
        if (2 === arguments.length) {
          for (var a = 0; a < i.length; a++) e === i[a].fn && i.splice(a--, 1)
        } else if (3 === arguments.length) {
          for (var a = 0; a < i.length; a++) {
            var s = i[a]
            e === s.fn && r === s.ctx && i.splice(a--, 1)
          }
        } else {
          for (var a = 0; a < i.length; a++) {
            var s = i[a]
            e !== s.fn || r !== s.ctx || n && !s.once || i.splice(a--, 1)
          }
        }
      }
      return this
    }, t.prototype.emit = function (t, e, r, n) {
      var i = this._listeners.get(t)
      if (i) {
        if (1 === arguments.length) {
          for (var a = 0; a < i.length; a++) {
            var s = i[a]
            s.once && i.splice(a--, 1), s.fn.call(s.ctx)
          }
        } else if (2 === arguments.length) {
          for (var a = 0; a < i.length; a++) {
            var s = i[a]
            s.once && i.splice(a--, 1), s.fn.call(s.ctx, e)
          }
        } else if (3 === arguments.length) {
          for (var a = 0; a < i.length; a++) {
            var s = i[a]
            s.once && i.splice(a--, 1), s.fn.call(s.ctx, e, r)
          }
        } else if (4 === arguments.length) {
          for (var a = 0; a < i.length; a++) {
            var s = i[a]
            s.once && i.splice(a--, 1), s.fn.call(s.ctx, e, r, n)
          }
        } else {
          for (var o = Array.prototype.slice.call(arguments, 1), a = 0; a < i.length; a++) {
            var s = i[a]
            s.once && i.splice(a--, 1), s.fn.apply(s.ctx, o)
          }
        }
      }
      return this
    }, t
  }()
  t.EventEmitter = e, __reflect(e.prototype, 'spine.EventEmitter')
}(spine || (spine = {}))
var __reflect = this && this.__reflect || function (t, e, r) {
  t.__class__ = e, r ? r.push(e) : r = [e], t.__types__ = t.__types__ ? r.concat(t.__types__) : r
}, spine
!function (t) {
  var e = function () {
    function e (e, r, n) {
      if (this.index = 0, this.name = null, this.boneData = null, this.color = new t.Color(1, 1, 1, 1), this.darkColor = null, this.attachmentName = null, this.blendMode = null, 0 > e) throw new Error('index must be >= 0.')
      if (!r) throw new Error('name cannot be null.')
      if (!n) throw new Error('boneData cannot be null.')
      this.index = e, this.name = r, this.boneData = n
    }

    return e
  }()
  t.SlotData = e, __reflect(e.prototype, 'spine.SlotData')
  var r
  !function (t) {
    t[t.Normal = 0] = 'Normal', t[t.Additive = 1] = 'Additive', t[t.Multiply = 2] = 'Multiply', t[t.Screen = 3] = 'Screen'
  }(r = t.BlendMode || (t.BlendMode = {}))
}(spine || (spine = {}))
var __reflect = this && this.__reflect || function (t, e, r) {
  t.__class__ = e, r ? r.push(e) : r = [e], t.__types__ = t.__types__ ? r.concat(t.__types__) : r
}, spine
!function (t) {
  var e = function () {
    function e (e, n, i) {
      if (this.index = 0, this.name = null, this.parent = null, this.length = 0, this.x = 0, this.y = 0, this.rotation = 0, this.scaleX = 1, this.scaleY = 1, this.shearX = 0, this.shearY = 0, this.transformMode = r.Normal, this.skinRequired = !1, this.color = new t.Color, 0 > e) throw new Error('index must be >= 0.')
      if (!n) throw new Error('name cannot be null.')
      this.index = e, this.name = n, this.parent = i
    }

    return e
  }()
  t.BoneData = e, __reflect(e.prototype, 'spine.BoneData')
  var r
  !function (t) {
    t[t.Normal = 0] = 'Normal', t[t.OnlyTranslation = 1] = 'OnlyTranslation', t[t.NoRotationOrReflection = 2] = 'NoRotationOrReflection', t[t.NoScale = 3] = 'NoScale', t[t.NoScaleOrReflection = 4] = 'NoScaleOrReflection'
  }(r = t.TransformMode || (t.TransformMode = {}))
}(spine || (spine = {}))
var __reflect = this && this.__reflect || function (t, e, r) {
  t.__class__ = e, r ? r.push(e) : r = [e], t.__types__ = t.__types__ ? r.concat(t.__types__) : r
}, spine
!function (t) {
  var e = function () {
    function t (t) {
      if (this.skeletonData = null, this.animationToMixTime = {}, this.defaultMix = 0, !t) throw new Error('skeletonData cannot be null.')
      this.skeletonData = t
    }

    return t.prototype.setMix = function (t, e, r) {
      var n = this.skeletonData.findAnimation(t)
      if (!n) throw new Error('Animation not found: ' + t)
      var i = this.skeletonData.findAnimation(e)
      if (!i) throw new Error('Animation not found: ' + e)
      this.setMixWith(n, i, r)
    }, t.prototype.setMixWith = function (t, e, r) {
      if (!t) throw new Error('from cannot be null.')
      if (!e) throw new Error('to cannot be null.')
      var n = t.name + '.' + e.name
      this.animationToMixTime[n] = r
    }, t.prototype.getMix = function (t, e) {
      var r = t.name + '.' + e.name, n = this.animationToMixTime[r]
      return void 0 === n ? this.defaultMix : n
    }, t
  }()
  t.AnimationStateData = e, __reflect(e.prototype, 'spine.AnimationStateData')
}(spine || (spine = {}))
var __reflect = this && this.__reflect || function (t, e, r) {
  t.__class__ = e, r ? r.push(e) : r = [e], t.__types__ = t.__types__ ? r.concat(t.__types__) : r
}, spine
!function (t) {
  var e = function () {
    function t (t, e) {
      if (this.data = null, this.intValue = 0, this.floatValue = 0, this.stringValue = null, this.time = 0, this.volume = 0, this.balance = 0, !e) throw new Error('data cannot be null.')
      this.time = t, this.data = e
    }

    return t
  }()
  t.Event = e, __reflect(e.prototype, 'spine.Event')
}(spine || (spine = {}))
var __reflect = this && this.__reflect || function (t, e, r) {
  t.__class__ = e, r ? r.push(e) : r = [e], t.__types__ = t.__types__ ? r.concat(t.__types__) : r
}, spine
!function (t) {
  var e = function () {
    function t (t) {
      this.name = null, this.intValue = 0, this.floatValue = 0, this.stringValue = null, this.audioPath = null, this.volume = 0, this.balance = 0, this.name = t
    }

    return t
  }()
  t.EventData = e, __reflect(e.prototype, 'spine.EventData')
}(spine || (spine = {}))
var __reflect = this && this.__reflect || function (t, e, r) {
  t.__class__ = e, r ? r.push(e) : r = [e], t.__types__ = t.__types__ ? r.concat(t.__types__) : r
}, spine
!function (t) {
  var e = function () {
    function e (t, e) {
      if (this.data = null, this.bones = null, this.target = null, this.bendDirection = 0, this.compress = !1, this.stretch = !1, this.mix = 1, this.softness = 0, this.active = !1, !t) throw new Error('data cannot be null.')
      if (!e) throw new Error('skeleton cannot be null.')
      this.data = t, this.mix = t.mix, this.softness = t.softness, this.bendDirection = t.bendDirection, this.compress = t.compress, this.stretch = t.stretch, this.bones = new Array
      for (var r = 0; r < t.bones.length; r++) this.bones.push(e.findBone(t.bones[r].name))
      this.target = e.findBone(t.target.name)
    }

    return e.prototype.isActive = function () {
      return this.active
    }, e.prototype.update = function () {
      if (0 != this.mix) {
        var t = this.target, e = this.bones
        switch (e.length) {
          case 1:
            this.apply1(e[0], t.worldX, t.worldY, this.compress, this.stretch, this.data.uniform, this.mix)
            break
          case 2:
            this.apply2(e[0], e[1], t.worldX, t.worldY, this.bendDirection, this.stretch, this.data.uniform, this.softness, this.mix)
        }
      }
    }, e.prototype.apply1 = function (e, r, n, i, a, s, o) {
      var h = e.parent, l = h.a, c = h.b, p = h.c, u = h.d, d = -e.ashearX - e.arotation, f = 0, m = 0
      switch (e.data.transformMode) {
        case t.TransformMode.OnlyTranslation:
          f = r - e.worldX, m = n - e.worldY
          break
        case t.TransformMode.NoRotationOrReflection:
          var v = Math.abs(l * u - c * p) / (l * l + p * p), g = l / e.skeleton.scaleX, y = p / e.skeleton.scaleY
          c = -y * v * e.skeleton.scaleX, u = g * v * e.skeleton.scaleY, d += Math.atan2(y, g) * t.MathUtils.radDeg
        default:
          var _ = r - h.worldX, x = n - h.worldY, w = l * u - c * p
          f = (_ * u - x * c) / w - e.ax, m = (x * l - _ * p) / w - e.ay
      }
      d += Math.atan2(m, f) * t.MathUtils.radDeg, e.ascaleX < 0 && (d += 180), d > 180 ? d -= 360 : -180 > d && (d += 360)
      var b = e.ascaleX, S = e.ascaleY
      if (i || a) {
        switch (e.data.transformMode) {
          case t.TransformMode.NoScale:
          case t.TransformMode.NoScaleOrReflection:
            f = r - e.worldX, m = n - e.worldY
        }
        var A = e.data.length * b, k = Math.sqrt(f * f + m * m)
        if (i && A > k || a && k > A && A > 1e-4) {
          var v = (k / A - 1) * o + 1
          b *= v, s && (S *= v)
        }
      }
      e.updateWorldTransformWith(e.ax, e.ay, e.arotation + d * o, b, S, e.ashearX, e.ashearY)
    }, e.prototype.apply2 = function (e, r, n, i, a, s, o, h, l) {
      var c = e.ax, p = e.ay, u = e.ascaleX, d = e.ascaleY, f = u, m = d, v = r.ascaleX, g = 0, y = 0, _ = 0
      0 > u ? (u = -u, g = 180, _ = -1) : (g = 0, _ = 1), 0 > d && (d = -d, _ = -_), 0 > v ? (v = -v, y = 180) : y = 0
      var x = r.ax, w = 0, b = 0, S = 0, A = e.a, k = e.b, T = e.c, M = e.d, C = Math.abs(u - d) <= 1e-4
      !C || s ? (w = 0, b = A * x + e.worldX, S = T * x + e.worldY) : (w = r.ay, b = A * x + k * w + e.worldX, S = T * x + M * w + e.worldY)
      var I = e.parent
      A = I.a, k = I.b, T = I.c, M = I.d
      var F, Y, R = 1 / (A * M - k * T), X = b - I.worldX, E = S - I.worldY, U = (X * M - E * k) * R - c,
        B = (E * A - X * T) * R - p, P = Math.sqrt(U * U + B * B), D = r.data.length * v
      if (1e-4 > P) return this.apply1(e, n, i, !1, s, !1, l), void r.updateWorldTransformWith(x, w, 0, r.ascaleX, r.ascaleY, r.ashearX, r.ashearY)
      X = n - I.worldX, E = i - I.worldY
      var V = (X * M - E * k) * R - c, L = (E * A - X * T) * R - p, N = V * V + L * L
      if (0 != h) {
        h *= u * (v + 1) * .5
        var O = Math.sqrt(N), W = O - P - D * u + h
        if (W > 0) {
          var q = Math.min(1, W / (2 * h)) - 1
          q = (W - h * (1 - q * q)) / O, V -= q * V, L -= q * L, N = V * V + L * L
        }
      }
      t:if (C) {
        D *= u
        var z = (N - P * P - D * D) / (2 * P * D);
        -1 > z ? (z = -1, Y = Math.PI * a) : z > 1 ? (z = 1, Y = 0, s && (A = (Math.sqrt(N) / (P + D) - 1) * l + 1, f *= A, o && (m *= A))) : Y = Math.acos(z) * a, A = P + D * z, k = D * Math.sin(Y), F = Math.atan2(L * A - V * k, V * A + L * k)
      } else {
        A = u * D, k = d * D
        var H = A * A, G = k * k, j = Math.atan2(L, V)
        T = G * P * P + H * N - H * G
        var J = -2 * G * P, $ = G - H
        if (M = J * J - 4 * $ * T, M >= 0) {
          var Q = Math.sqrt(M)
          0 > J && (Q = -Q), Q = .5 * -(J + Q)
          var K = Q / $, Z = T / Q, te = Math.abs(K) < Math.abs(Z) ? K : Z
          if (N >= te * te) {
            E = Math.sqrt(N - te * te) * a, F = j - Math.atan2(E, te), Y = Math.atan2(E / d, (te - P) / u)
            break t
          }
        }
        var ee = t.MathUtils.PI, re = P - A, ne = re * re, ie = 0, ae = 0, se = P + A, oe = se * se, he = 0
        T = -A * P / (H - G), T >= -1 && 1 >= T && (T = Math.acos(T), X = A * Math.cos(T) + P, E = k * Math.sin(T), M = X * X + E * E, ne > M && (ee = T, ne = M, re = X, ie = E), M > oe && (ae = T, oe = M, se = X, he = E)), .5 * (ne + oe) >= N ? (F = j - Math.atan2(ie * a, re), Y = ee * a) : (F = j - Math.atan2(he * a, se), Y = ae * a)
      }
      var le = Math.atan2(w, x) * _, ce = e.arotation
      F = (F - le) * t.MathUtils.radDeg + g - ce, F > 180 ? F -= 360 : -180 > F && (F += 360), e.updateWorldTransformWith(c, p, ce + F * l, f, m, 0, 0), ce = r.arotation, Y = ((Y + le) * t.MathUtils.radDeg - r.ashearX) * _ + y - ce, Y > 180 ? Y -= 360 : -180 > Y && (Y += 360), r.updateWorldTransformWith(x, w, ce + Y * l, r.ascaleX, r.ascaleY, r.ashearX, r.ashearY)
    }, e
  }()
  t.IkConstraint = e, __reflect(e.prototype, 'spine.IkConstraint', ['spine.Updatable'])
}(spine || (spine = {}))
var __reflect = this && this.__reflect || function (t, e, r) {
  t.__class__ = e, r ? r.push(e) : r = [e], t.__types__ = t.__types__ ? r.concat(t.__types__) : r
}, __extends = this && this.__extends || function (t, e) {
  function r () {
    this.constructor = t
  }

  for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
  r.prototype = e.prototype, t.prototype = new r
}, spine
!function (t) {
  var e = function (t) {
    function e (e) {
      var r = t.call(this, e, 0, !1) || this
      return r.bones = new Array, r.target = null, r.bendDirection = 1, r.compress = !1, r.stretch = !1, r.uniform = !1, r.mix = 1, r.softness = 0, r
    }

    return __extends(e, t), e
  }(t.ConstraintData)
  t.IkConstraintData = e, __reflect(e.prototype, 'spine.IkConstraintData')
}(spine || (spine = {}))
var __reflect = this && this.__reflect || function (t, e, r) {
  t.__class__ = e, r ? r.push(e) : r = [e], t.__types__ = t.__types__ ? r.concat(t.__types__) : r
}, spine
!function (t) {
  var e = function () {
    function e (t, e) {
      if (this.data = null, this.bones = null, this.target = null, this.position = 0, this.spacing = 0, this.mixRotate = 0, this.mixX = 0, this.mixY = 0, this.spaces = new Array, this.positions = new Array, this.world = new Array, this.curves = new Array, this.lengths = new Array, this.segments = new Array, this.active = !1, !t) throw new Error('data cannot be null.')
      if (!e) throw new Error('skeleton cannot be null.')
      this.data = t, this.bones = new Array
      for (var r = 0, n = t.bones.length; n > r; r++) this.bones.push(e.findBone(t.bones[r].name))
      this.target = e.findSlot(t.target.name), this.position = t.position, this.spacing = t.spacing, this.mixRotate = t.mixRotate, this.mixX = t.mixX, this.mixY = t.mixY
    }

    return e.prototype.isActive = function () {
      return this.active
    }, e.prototype.update = function () {
      var r = this.target.getAttachment()
      if (r instanceof t.PathAttachment) {
        var n = this.mixRotate, i = this.mixX, a = this.mixY
        if (0 != n || 0 != i || 0 != a) {
          var s = this.data, o = s.rotateMode == t.RotateMode.Tangent, h = s.rotateMode == t.RotateMode.ChainScale,
            l = this.bones, c = l.length, p = o ? c : c + 1, u = t.Utils.setArraySize(this.spaces, p),
            d = h ? this.lengths = t.Utils.setArraySize(this.lengths, c) : null, f = this.spacing
          switch (s.spacingMode) {
            case t.SpacingMode.Percent:
              if (h) {
                for (var m = 0, v = p - 1; v > m; m++) {
                  var g = l[m], y = g.data.length
                  if (y < e.epsilon) {
                    d[m] = 0
                  } else {
                    var _ = y * g.a, x = y * g.c
                    d[m] = Math.sqrt(_ * _ + x * x)
                  }
                }
              }
              t.Utils.arrayFill(u, 1, p, f)
              break
            case t.SpacingMode.Proportional:
              for (var w = 0, m = 0, v = p - 1; v > m;) {
                var g = l[m], y = g.data.length
                if (y < e.epsilon) {
                  h && (d[m] = 0), u[++m] = f
                } else {
                  var _ = y * g.a, x = y * g.c, b = Math.sqrt(_ * _ + x * x)
                  h && (d[m] = b), u[++m] = b, w += b
                }
              }
              if (w > 0) {
                w = p / w * f
                for (var m = 1; p > m; m++) u[m] *= w
              }
              break
            default:
              for (var S = s.spacingMode == t.SpacingMode.Length, m = 0, v = p - 1; v > m;) {
                var g = l[m], y = g.data.length
                if (y < e.epsilon) {
                  h && (d[m] = 0), u[++m] = f
                } else {
                  var _ = y * g.a, x = y * g.c, A = Math.sqrt(_ * _ + x * x)
                  h && (d[m] = A), u[++m] = (S ? y + f : f) * A / y
                }
              }
          }
          var k = this.computeWorldPositions(r, p, o), T = k[0], M = k[1], C = s.offsetRotation, I = !1
          if (0 == C) {
            I = s.rotateMode == t.RotateMode.Chain
          } else {
            I = !1
            var F = this.target.bone
            C *= F.a * F.d - F.b * F.c > 0 ? t.MathUtils.degRad : -t.MathUtils.degRad
          }
          for (var m = 0, F = 3; c > m; m++, F += 3) {
            var g = l[m]
            g.worldX += (T - g.worldX) * i, g.worldY += (M - g.worldY) * a
            var _ = k[F], x = k[F + 1], Y = _ - T, R = x - M
            if (h) {
              var X = d[m]
              if (0 != X) {
                var E = (Math.sqrt(Y * Y + R * R) / X - 1) * n + 1
                g.a *= E, g.c *= E
              }
            }
            if (T = _, M = x, n > 0) {
              var U = g.a, B = g.b, P = g.c, D = g.d, V = 0, L = 0, N = 0
              if (V = o ? k[F - 1] : 0 == u[m + 1] ? k[F + 2] : Math.atan2(R, Y), V -= Math.atan2(P, U), I) {
                L = Math.cos(V), N = Math.sin(V)
                var O = g.data.length
                T += (O * (L * U - N * P) - Y) * n, M += (O * (N * U + L * P) - R) * n
              } else {
                V += C
              }
              V > t.MathUtils.PI ? V -= t.MathUtils.PI2 : V < -t.MathUtils.PI && (V += t.MathUtils.PI2), V *= n, L = Math.cos(V), N = Math.sin(V), g.a = L * U - N * P, g.b = L * B - N * D, g.c = N * U + L * P, g.d = N * B + L * D
            }
            g.updateAppliedTransform()
          }
        }
      }
    }, e.prototype.computeWorldPositions = function (r, n, i) {
      var a = this.target, s = this.position, o = this.spaces, h = t.Utils.setArraySize(this.positions, 3 * n + 2),
        l = null, c = r.closed, p = r.worldVerticesLength, u = p / 6, d = e.NONE
      if (!r.constantSpeed) {
        var f = r.lengths
        u -= c ? 1 : 2
        var m = f[u]
        this.data.positionMode == t.PositionMode.Percent && (s *= m)
        var v
        switch (this.data.spacingMode) {
          case t.SpacingMode.Percent:
            v = m
            break
          case t.SpacingMode.Proportional:
            v = m / n
            break
          default:
            v = 1
        }
        l = t.Utils.setArraySize(this.world, 8)
        for (var g = 0, y = 0, _ = 0; n > g; g++, y += 3) {
          var x = o[g] * v
          s += x
          var w = s
          if (c) {
            w %= m, 0 > w && (w += m), _ = 0
          } else {
            if (0 > w) {
              d != e.BEFORE && (d = e.BEFORE, r.computeWorldVertices(a, 2, 4, l, 0, 2)), this.addBeforePosition(w, l, 0, h, y)
              continue
            }
            if (w > m) {
              d != e.AFTER && (d = e.AFTER, r.computeWorldVertices(a, p - 6, 4, l, 0, 2)), this.addAfterPosition(w - m, l, 0, h, y)
              continue
            }
          }
          for (; ; _++) {
            var b = f[_]
            if (!(w > b)) {
              if (0 == _) {
                w /= b
              } else {
                var S = f[_ - 1]
                w = (w - S) / (b - S)
              }
              break
            }
          }
          _ != d && (d = _, c && _ == u ? (r.computeWorldVertices(a, p - 4, 4, l, 0, 2), r.computeWorldVertices(a, 0, 4, l, 4, 2)) : r.computeWorldVertices(a, 6 * _ + 2, 8, l, 0, 2)), this.addCurvePosition(w, l[0], l[1], l[2], l[3], l[4], l[5], l[6], l[7], h, y, i || g > 0 && 0 == x)
        }
        return h
      }
      c ? (p += 2, l = t.Utils.setArraySize(this.world, p), r.computeWorldVertices(a, 2, p - 4, l, 0, 2), r.computeWorldVertices(a, 0, 2, l, p - 4, 2), l[p - 2] = l[0], l[p - 1] = l[1]) : (u--, p -= 4, l = t.Utils.setArraySize(this.world, p), r.computeWorldVertices(a, 2, p, l, 0, 2))
      for (var A = t.Utils.setArraySize(this.curves, u), k = 0, T = l[0], M = l[1], C = 0, I = 0, F = 0, Y = 0, R = 0, X = 0, E = 0, U = 0, B = 0, P = 0, D = 0, V = 0, L = 0, N = 0, g = 0, O = 2; u > g; g++, O += 6) C = l[O], I = l[O + 1], F = l[O + 2], Y = l[O + 3], R = l[O + 4], X = l[O + 5], E = .1875 * (T - 2 * C + F), U = .1875 * (M - 2 * I + Y), B = .09375 * (3 * (C - F) - T + R), P = .09375 * (3 * (I - Y) - M + X), D = 2 * E + B, V = 2 * U + P, L = .75 * (C - T) + E + .16666667 * B, N = .75 * (I - M) + U + .16666667 * P, k += Math.sqrt(L * L + N * N), L += D, N += V, D += B, V += P, k += Math.sqrt(L * L + N * N), L += D, N += V, k += Math.sqrt(L * L + N * N), L += D + B, N += V + P, k += Math.sqrt(L * L + N * N), A[g] = k, T = R, M = X
      this.data.positionMode == t.PositionMode.Percent && (s *= k)
      var W
      switch (this.data.spacingMode) {
        case t.SpacingMode.Percent:
          W = k
          break
        case t.SpacingMode.Proportional:
          W = k / n
          break
        default:
          W = 1
      }
      for (var q = this.segments, z = 0, g = 0, y = 0, _ = 0, H = 0; n > g; g++, y += 3) {
        var x = o[g] * W
        s += x
        var w = s
        if (c) {
          w %= k, 0 > w && (w += k), _ = 0
        } else {
          if (0 > w) {
            this.addBeforePosition(w, l, 0, h, y)
            continue
          }
          if (w > k) {
            this.addAfterPosition(w - k, l, p - 4, h, y)
            continue
          }
        }
        for (; ; _++) {
          var G = A[_]
          if (!(w > G)) {
            if (0 == _) {
              w /= G
            } else {
              var S = A[_ - 1]
              w = (w - S) / (G - S)
            }
            break
          }
        }
        if (_ != d) {
          d = _
          var j = 6 * _
          for (T = l[j], M = l[j + 1], C = l[j + 2], I = l[j + 3], F = l[j + 4], Y = l[j + 5], R = l[j + 6], X = l[j + 7], E = .03 * (T - 2 * C + F), U = .03 * (M - 2 * I + Y), B = .006 * (3 * (C - F) - T + R), P = .006 * (3 * (I - Y) - M + X), D = 2 * E + B, V = 2 * U + P, L = .3 * (C - T) + E + .16666667 * B, N = .3 * (I - M) + U + .16666667 * P, z = Math.sqrt(L * L + N * N), q[0] = z, j = 1; 8 > j; j++) L += D, N += V, D += B, V += P, z += Math.sqrt(L * L + N * N), q[j] = z
          L += D, N += V, z += Math.sqrt(L * L + N * N), q[8] = z, L += D + B, N += V + P, z += Math.sqrt(L * L + N * N), q[9] = z, H = 0
        }
        for (w *= z; ; H++) {
          var J = q[H]
          if (!(w > J)) {
            if (0 == H) {
              w /= J
            } else {
              var S = q[H - 1]
              w = H + (w - S) / (J - S)
            }
            break
          }
        }
        this.addCurvePosition(.1 * w, T, M, C, I, F, Y, R, X, h, y, i || g > 0 && 0 == x)
      }
      return h
    }, e.prototype.addBeforePosition = function (t, e, r, n, i) {
      var a = e[r], s = e[r + 1], o = e[r + 2] - a, h = e[r + 3] - s, l = Math.atan2(h, o)
      n[i] = a + t * Math.cos(l), n[i + 1] = s + t * Math.sin(l), n[i + 2] = l
    }, e.prototype.addAfterPosition = function (t, e, r, n, i) {
      var a = e[r + 2], s = e[r + 3], o = a - e[r], h = s - e[r + 1], l = Math.atan2(h, o)
      n[i] = a + t * Math.cos(l), n[i + 1] = s + t * Math.sin(l), n[i + 2] = l
    }, e.prototype.addCurvePosition = function (t, e, r, n, i, a, s, o, h, l, c, p) {
      if (0 == t || isNaN(t)) return l[c] = e, l[c + 1] = r, void (l[c + 2] = Math.atan2(i - r, n - e))
      var u = t * t, d = u * t, f = 1 - t, m = f * f, v = m * f, g = f * t, y = 3 * g, _ = f * y, x = y * t,
        w = e * v + n * _ + a * x + o * d, b = r * v + i * _ + s * x + h * d
      l[c] = w, l[c + 1] = b, p && (.001 > t ? l[c + 2] = Math.atan2(i - r, n - e) : l[c + 2] = Math.atan2(b - (r * m + i * g * 2 + s * u), w - (e * m + n * g * 2 + a * u)))
    }, e.NONE = -1, e.BEFORE = -2, e.AFTER = -3, e.epsilon = 1e-5, e
  }()
  t.PathConstraint = e, __reflect(e.prototype, 'spine.PathConstraint', ['spine.Updatable'])
}(spine || (spine = {}))
var __reflect = this && this.__reflect || function (t, e, r) {
  t.__class__ = e, r ? r.push(e) : r = [e], t.__types__ = t.__types__ ? r.concat(t.__types__) : r
}, __extends = this && this.__extends || function (t, e) {
  function r () {
    this.constructor = t
  }

  for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
  r.prototype = e.prototype, t.prototype = new r
}, spine
!function (t) {
  var e = function (t) {
    function e (e) {
      var r = t.call(this, e, 0, !1) || this
      return r.bones = new Array, r.target = null, r.positionMode = null, r.spacingMode = null, r.rotateMode = null, r.offsetRotation = 0, r.position = 0, r.spacing = 0, r.mixRotate = 0, r.mixX = 0, r.mixY = 0, r
    }

    return __extends(e, t), e
  }(t.ConstraintData)
  t.PathConstraintData = e, __reflect(e.prototype, 'spine.PathConstraintData')
  var r
  !function (t) {
    t[t.Fixed = 0] = 'Fixed', t[t.Percent = 1] = 'Percent'
  }(r = t.PositionMode || (t.PositionMode = {}))
  var n
  !function (t) {
    t[t.Length = 0] = 'Length', t[t.Fixed = 1] = 'Fixed', t[t.Percent = 2] = 'Percent', t[t.Proportional = 3] = 'Proportional'
  }(n = t.SpacingMode || (t.SpacingMode = {}))
  var i
  !function (t) {
    t[t.Tangent = 0] = 'Tangent', t[t.Chain = 1] = 'Chain', t[t.ChainScale = 2] = 'ChainScale'
  }(i = t.RotateMode || (t.RotateMode = {}))
}(spine || (spine = {})), function () {
  'undefined' == typeof Math.fround && (Math.fround = function (t) {
    return function (e) {
      return t[0] = e, t[0]
    }
  }(new Float32Array(1)))
}()
var __reflect = this && this.__reflect || function (t, e, r) {
  t.__class__ = e, r ? r.push(e) : r = [e], t.__types__ = t.__types__ ? r.concat(t.__types__) : r
}, spine
!function (t) {
  var e = function () {
    function e (e) {
      if (this.data = null, this.bones = null, this.slots = null, this.drawOrder = null, this.ikConstraints = null, this.transformConstraints = null, this.pathConstraints = null, this._updateCache = new Array, this.skin = null, this.color = null, this.time = 0, this.scaleX = 1, this.scaleY = 1, this.x = 0, this.y = 0, !e) throw new Error('data cannot be null.')
      this.data = e, this.bones = new Array
      for (var r = 0; r < e.bones.length; r++) {
        var n = e.bones[r], i = void 0
        if (n.parent) {
          var a = this.bones[n.parent.index]
          i = new t.Bone(n, this, a), a.children.push(i)
        } else {
          i = new t.Bone(n, this, null)
        }
        this.bones.push(i)
      }
      this.slots = new Array, this.drawOrder = new Array
      for (var r = 0; r < e.slots.length; r++) {
        var s = e.slots[r], i = this.bones[s.boneData.index], o = new t.Slot(s, i)
        this.slots.push(o), this.drawOrder.push(o)
      }
      this.ikConstraints = new Array
      for (var r = 0; r < e.ikConstraints.length; r++) {
        var h = e.ikConstraints[r]
        this.ikConstraints.push(new t.IkConstraint(h, this))
      }
      this.transformConstraints = new Array
      for (var r = 0; r < e.transformConstraints.length; r++) {
        var l = e.transformConstraints[r]
        this.transformConstraints.push(new t.TransformConstraint(l, this))
      }
      this.pathConstraints = new Array
      for (var r = 0; r < e.pathConstraints.length; r++) {
        var c = e.pathConstraints[r]
        this.pathConstraints.push(new t.PathConstraint(c, this))
      }
      this.color = new t.Color(1, 1, 1, 1), this.updateCache()
    }

    return e.prototype.updateCache = function () {
      var t = this._updateCache
      t.length = 0
      for (var e = this.bones, r = 0, n = e.length; n > r; r++) {
        var i = e[r]
        i.sorted = i.data.skinRequired, i.active = !i.sorted
      }
      if (this.skin) {
        for (var a = this.skin.bones, r = 0, n = this.skin.bones.length; n > r; r++) {
          var i = this.bones[a[r].index]
          do i.sorted = !1, i.active = !0, i = i.parent while (i)
        }
      }
      var s = this.ikConstraints, o = this.transformConstraints, h = this.pathConstraints, l = s.length, c = o.length,
        p = h.length, u = l + c + p
      t:for (var r = 0; u > r; r++) {
        for (var d = 0; l > d; d++) {
          var f = s[d]
          if (f.data.order == r) {
            this.sortIkConstraint(f)
            continue t
          }
        }
        for (var d = 0; c > d; d++) {
          var f = o[d]
          if (f.data.order == r) {
            this.sortTransformConstraint(f)
            continue t
          }
        }
        for (var d = 0; p > d; d++) {
          var f = h[d]
          if (f.data.order == r) {
            this.sortPathConstraint(f)
            continue t
          }
        }
      }
      for (var r = 0, n = e.length; n > r; r++) this.sortBone(e[r])
    }, e.prototype.sortIkConstraint = function (e) {
      if (e.active = e.target.isActive() && (!e.data.skinRequired || this.skin && t.Utils.contains(this.skin.constraints, e.data, !0)), e.active) {
        var r = e.target
        this.sortBone(r)
        var n = e.bones, i = n[0]
        if (this.sortBone(i), 1 == n.length) {
          this._updateCache.push(e), this.sortReset(i.children)
        } else {
          var a = n[n.length - 1]
          this.sortBone(a), this._updateCache.push(e), this.sortReset(i.children), a.sorted = !0
        }
      }
    }, e.prototype.sortPathConstraint = function (e) {
      if (e.active = e.target.bone.isActive() && (!e.data.skinRequired || this.skin && t.Utils.contains(this.skin.constraints, e.data, !0)), e.active) {
        var r = e.target, n = r.data.index, i = r.bone
        this.skin && this.sortPathConstraintAttachment(this.skin, n, i), this.data.defaultSkin && this.data.defaultSkin != this.skin && this.sortPathConstraintAttachment(this.data.defaultSkin, n, i)
        for (var a = 0, s = this.data.skins.length; s > a; a++) this.sortPathConstraintAttachment(this.data.skins[a], n, i)
        var o = r.getAttachment()
        o instanceof t.PathAttachment && this.sortPathConstraintAttachmentWith(o, i)
        for (var h = e.bones, l = h.length, a = 0; l > a; a++) this.sortBone(h[a])
        this._updateCache.push(e)
        for (var a = 0; l > a; a++) this.sortReset(h[a].children)
        for (var a = 0; l > a; a++) h[a].sorted = !0
      }
    }, e.prototype.sortTransformConstraint = function (e) {
      if (e.active = e.target.isActive() && (!e.data.skinRequired || this.skin && t.Utils.contains(this.skin.constraints, e.data, !0)), e.active) {
        this.sortBone(e.target)
        var r = e.bones, n = r.length
        if (e.data.local) {
          for (var i = 0; n > i; i++) {
            var a = r[i]
            this.sortBone(a.parent), this.sortBone(a)
          }
        } else {
          for (var i = 0; n > i; i++) this.sortBone(r[i])
        }
        this._updateCache.push(e)
        for (var i = 0; n > i; i++) this.sortReset(r[i].children)
        for (var i = 0; n > i; i++) r[i].sorted = !0
      }
    }, e.prototype.sortPathConstraintAttachment = function (t, e, r) {
      var n = t.attachments[e]
      if (n) for (var i in n) this.sortPathConstraintAttachmentWith(n[i], r)
    }, e.prototype.sortPathConstraintAttachmentWith = function (e, r) {
      if (e instanceof t.PathAttachment) {
        var n = e.bones
        if (n) {
          for (var i = this.bones, a = 0, s = n.length; s > a;) {
            var o = n[a++]
            for (o += a; o > a;) this.sortBone(i[n[a++]])
          }
        } else {
          this.sortBone(r)
        }
      }
    }, e.prototype.sortBone = function (t) {
      if (!t.sorted) {
        var e = t.parent
        e && this.sortBone(e), t.sorted = !0, this._updateCache.push(t)
      }
    }, e.prototype.sortReset = function (t) {
      for (var e = 0, r = t.length; r > e; e++) {
        var n = t[e]
        n.active && (n.sorted && this.sortReset(n.children), n.sorted = !1)
      }
    }, e.prototype.updateWorldTransform = function () {
      for (var t = this.bones, e = 0, r = t.length; r > e; e++) {
        var n = t[e]
        n.ax = n.x, n.ay = n.y, n.arotation = n.rotation, n.ascaleX = n.scaleX, n.ascaleY = n.scaleY, n.ashearX = n.shearX, n.ashearY = n.shearY
      }
      for (var i = this._updateCache, e = 0, r = i.length; r > e; e++) i[e].update()
    }, e.prototype.updateWorldTransformWith = function (e) {
      var r = this.getRootBone(), n = e.a, i = e.b, a = e.c, s = e.d
      r.worldX = n * this.x + i * this.y + e.worldX, r.worldY = a * this.x + s * this.y + e.worldY
      var o = r.rotation + 90 + r.shearY, h = t.MathUtils.cosDeg(r.rotation + r.shearX) * r.scaleX,
        l = t.MathUtils.cosDeg(o) * r.scaleY, c = t.MathUtils.sinDeg(r.rotation + r.shearX) * r.scaleX,
        p = t.MathUtils.sinDeg(o) * r.scaleY
      r.a = (n * h + i * c) * this.scaleX, r.b = (n * l + i * p) * this.scaleX, r.c = (a * h + s * c) * this.scaleY, r.d = (a * l + s * p) * this.scaleY
      for (var u = this._updateCache, d = 0, f = u.length; f > d; d++) {
        var m = u[d]
        m != r && m.update()
      }
    }, e.prototype.setToSetupPose = function () {
      this.setBonesToSetupPose(), this.setSlotsToSetupPose()
    }, e.prototype.setBonesToSetupPose = function () {
      for (var t = this.bones, e = 0, r = t.length; r > e; e++) t[e].setToSetupPose()
      for (var n = this.ikConstraints, e = 0, r = n.length; r > e; e++) {
        var i = n[e]
        i.mix = i.data.mix, i.softness = i.data.softness, i.bendDirection = i.data.bendDirection, i.compress = i.data.compress, i.stretch = i.data.stretch
      }
      for (var a = this.transformConstraints, e = 0, r = a.length; r > e; e++) {
        var i = a[e], s = i.data
        i.mixRotate = s.mixRotate, i.mixX = s.mixX, i.mixY = s.mixY, i.mixScaleX = s.mixScaleX, i.mixScaleY = s.mixScaleY, i.mixShearY = s.mixShearY
      }
      for (var o = this.pathConstraints, e = 0, r = o.length; r > e; e++) {
        var i = o[e], s = i.data
        i.position = s.position, i.spacing = s.spacing, i.mixRotate = s.mixRotate, i.mixX = s.mixX, i.mixY = s.mixY
      }
    }, e.prototype.setSlotsToSetupPose = function () {
      var e = this.slots
      t.Utils.arrayCopy(e, 0, this.drawOrder, 0, e.length)
      for (var r = 0, n = e.length; n > r; r++) e[r].setToSetupPose()
    }, e.prototype.getRootBone = function () {
      return 0 == this.bones.length ? null : this.bones[0]
    }, e.prototype.findBone = function (t) {
      if (!t) throw new Error('boneName cannot be null.')
      for (var e = this.bones, r = 0, n = e.length; n > r; r++) {
        var i = e[r]
        if (i.data.name == t) return i
      }
      return null
    }, e.prototype.findSlot = function (t) {
      if (!t) throw new Error('slotName cannot be null.')
      for (var e = this.slots, r = 0, n = e.length; n > r; r++) {
        var i = e[r]
        if (i.data.name == t) return i
      }
      return null
    }, e.prototype.setSkinByName = function (t) {
      var e = this.data.findSkin(t)
      if (!e) throw new Error('Skin not found: ' + t)
      this.setSkin(e)
    }, e.prototype.setSkin = function (t) {
      if (t != this.skin) {
        if (t) {
          if (this.skin) {
            t.attachAll(this, this.skin)
          } else {
            for (var e = this.slots, r = 0, n = e.length; n > r; r++) {
              var i = e[r], a = i.data.attachmentName
              if (a) {
                var s = t.getAttachment(r, a)
                s && i.setAttachment(s)
              }
            }
          }
        }
        this.skin = t, this.updateCache()
      }
    }, e.prototype.getAttachmentByName = function (t, e) {
      return this.getAttachment(this.data.findSlot(t).index, e)
    }, e.prototype.getAttachment = function (t, e) {
      if (!e) throw new Error('attachmentName cannot be null.')
      if (this.skin) {
        var r = this.skin.getAttachment(t, e)
        if (r) return r
      }
      return this.data.defaultSkin ? this.data.defaultSkin.getAttachment(t, e) : null
    }, e.prototype.setAttachment = function (t, e) {
      if (!t) throw new Error('slotName cannot be null.')
      for (var r = this.slots, n = 0, i = r.length; i > n; n++) {
        var a = r[n]
        if (a.data.name == t) {
          var s = null
          if (e && (s = this.getAttachment(n, e), !s)) throw new Error('Attachment not found: ' + e + ', for slot: ' + t)
          return void a.setAttachment(s)
        }
      }
      throw new Error('Slot not found: ' + t)
    }, e.prototype.findIkConstraint = function (t) {
      if (!t) throw new Error('constraintName cannot be null.')
      for (var e = this.ikConstraints, r = 0, n = e.length; n > r; r++) {
        var i = e[r]
        if (i.data.name == t) return i
      }
      return null
    }, e.prototype.findTransformConstraint = function (t) {
      if (!t) throw new Error('constraintName cannot be null.')
      for (var e = this.transformConstraints, r = 0, n = e.length; n > r; r++) {
        var i = e[r]
        if (i.data.name == t) return i
      }
      return null
    }, e.prototype.findPathConstraint = function (t) {
      if (!t) throw new Error('constraintName cannot be null.')
      for (var e = this.pathConstraints, r = 0, n = e.length; n > r; r++) {
        var i = e[r]
        if (i.data.name == t) return i
      }
      return null
    }, e.prototype.getBoundsRect = function () {
      var e = new t.Vector2, r = new t.Vector2
      return this.getBounds(e, r), {x: e.x, y: e.y, width: r.x, height: r.y}
    }, e.prototype.getBounds = function (e, r, n) {
      if (void 0 === n && (n = new Array(2)), !e) throw new Error('offset cannot be null.')
      if (!r) throw new Error('size cannot be null.')
      for (var i = this.drawOrder, a = Number.POSITIVE_INFINITY, s = Number.POSITIVE_INFINITY, o = Number.NEGATIVE_INFINITY, h = Number.NEGATIVE_INFINITY, l = 0, c = i.length; c > l; l++) {
        var p = i[l]
        if (p.bone.active) {
          var u = 0, d = null, f = p.getAttachment()
          if (f instanceof t.RegionAttachment) {
            u = 8, d = t.Utils.setArraySize(n, u, 0), f.computeWorldVertices(p.bone, d, 0, 2)
          } else if (f instanceof t.MeshAttachment) {
            var m = f
            u = m.worldVerticesLength, d = t.Utils.setArraySize(n, u, 0), m.computeWorldVertices(p, 0, u, d, 0, 2)
          }
          if (d) {
            for (var v = 0, g = d.length; g > v; v += 2) {
              var y = d[v], _ = d[v + 1]
              a = Math.min(a, y), s = Math.min(s, _), o = Math.max(o, y), h = Math.max(h, _)
            }
          }
        }
      }
      e.set(a, s), r.set(o - a, h - s)
    }, e.prototype.update = function (t) {
      this.time += t
    }, e
  }()
  t.Skeleton = e, __reflect(e.prototype, 'spine.Skeleton')
}(spine || (spine = {}))
var __reflect = this && this.__reflect || function (t, e, r) {
  t.__class__ = e, r ? r.push(e) : r = [e], t.__types__ = t.__types__ ? r.concat(t.__types__) : r
}, spine
!function (t) {
  function e (t, e, r) {
    for (var i = t.readFloat(), a = t.readFloat() * r, s = 0, o = 0, h = e.getFrameCount() - 1; e.setFrame(s, i, a), s != h; s++) {
      var l = t.readFloat(), c = t.readFloat() * r
      switch (t.readByte()) {
        case C:
          e.setStepped(s)
          break
        case I:
          n(t, e, o++, s, 0, i, l, a, c, r)
      }
      i = l, a = c
    }
    return e
  }

  function r (t, e, r) {
    for (var i = t.readFloat(), a = t.readFloat() * r, s = t.readFloat() * r, o = 0, h = 0, l = e.getFrameCount() - 1; e.setFrame(o, i, a, s), o != l; o++) {
      var c = t.readFloat(), p = t.readFloat() * r, u = t.readFloat() * r
      switch (t.readByte()) {
        case C:
          e.setStepped(o)
          break
        case I:
          n(t, e, h++, o, 0, i, c, a, p, r), n(t, e, h++, o, 1, i, c, s, u, r)
      }
      i = c, a = p, s = u
    }
    return e
  }

  function n (t, e, r, n, i, a, s, o, h, l) {
    e.setBezier(r, n, i, a, o, t.readFloat(), t.readFloat() * l, t.readFloat(), t.readFloat() * l, s, h)
  }

  var i = function () {
    function i (t) {
      this.scale = 1, this.attachmentLoader = null, this.linkedMeshes = new Array, this.attachmentLoader = t
    }

    return i.prototype.readSkeletonData = function (e) {
      var r = this.scale, n = new t.SkeletonData
      n.name = ''
      var i = new a(e), s = i.readInt32(), o = i.readInt32()
      n.hash = 0 == o && 0 == s ? null : o.toString(16) + s.toString(16), n.version = i.readString(), n.x = i.readFloat(), n.y = i.readFloat(), n.width = i.readFloat(), n.height = i.readFloat()
      var h = i.readBoolean()
      h && (n.fps = i.readFloat(), n.imagesPath = i.readString(), n.audioPath = i.readString())
      var l = 0
      l = i.readInt(!0)
      for (var c = 0; l > c; c++) i.strings.push(i.readString())
      l = i.readInt(!0)
      for (var c = 0; l > c; c++) {
        var p = i.readString(), u = 0 == c ? null : n.bones[i.readInt(!0)], d = new t.BoneData(c, p, u)
        d.rotation = i.readFloat(), d.x = i.readFloat() * r, d.y = i.readFloat() * r, d.scaleX = i.readFloat(), d.scaleY = i.readFloat(), d.shearX = i.readFloat(), d.shearY = i.readFloat(), d.length = i.readFloat() * r, d.transformMode = i.readInt(!0), d.skinRequired = i.readBoolean(), h && t.Color.rgba8888ToColor(d.color, i.readInt32()), n.bones.push(d)
      }
      l = i.readInt(!0)
      for (var c = 0; l > c; c++) {
        var f = i.readString(), m = n.bones[i.readInt(!0)], d = new t.SlotData(c, f, m)
        t.Color.rgba8888ToColor(d.color, i.readInt32())
        var v = i.readInt32();
        -1 != v && t.Color.rgb888ToColor(d.darkColor = new t.Color, v), d.attachmentName = i.readStringRef(), d.blendMode = i.readInt(!0), n.slots.push(d)
      }
      l = i.readInt(!0)
      for (var c = 0, g = void 0; l > c; c++) {
        var d = new t.IkConstraintData(i.readString())
        d.order = i.readInt(!0), d.skinRequired = i.readBoolean(), g = i.readInt(!0)
        for (var y = 0; g > y; y++) d.bones.push(n.bones[i.readInt(!0)])
        d.target = n.bones[i.readInt(!0)], d.mix = i.readFloat(), d.softness = i.readFloat() * r, d.bendDirection = i.readByte(), d.compress = i.readBoolean(), d.stretch = i.readBoolean(), d.uniform = i.readBoolean(), n.ikConstraints.push(d)
      }
      l = i.readInt(!0)
      for (var c = 0, g = void 0; l > c; c++) {
        var d = new t.TransformConstraintData(i.readString())
        d.order = i.readInt(!0), d.skinRequired = i.readBoolean(), g = i.readInt(!0)
        for (var y = 0; g > y; y++) d.bones.push(n.bones[i.readInt(!0)])
        d.target = n.bones[i.readInt(!0)], d.local = i.readBoolean(), d.relative = i.readBoolean(), d.offsetRotation = i.readFloat(), d.offsetX = i.readFloat() * r, d.offsetY = i.readFloat() * r, d.offsetScaleX = i.readFloat(), d.offsetScaleY = i.readFloat(), d.offsetShearY = i.readFloat(), d.mixRotate = i.readFloat(), d.mixX = i.readFloat(), d.mixY = i.readFloat(), d.mixScaleX = i.readFloat(), d.mixScaleY = i.readFloat(), d.mixShearY = i.readFloat(), n.transformConstraints.push(d)
      }
      l = i.readInt(!0)
      for (var c = 0, g = void 0; l > c; c++) {
        var d = new t.PathConstraintData(i.readString())
        d.order = i.readInt(!0), d.skinRequired = i.readBoolean(), g = i.readInt(!0)
        for (var y = 0; g > y; y++) d.bones.push(n.bones[i.readInt(!0)])
        d.target = n.slots[i.readInt(!0)], d.positionMode = i.readInt(!0), d.spacingMode = i.readInt(!0), d.rotateMode = i.readInt(!0), d.offsetRotation = i.readFloat(), d.position = i.readFloat(), d.positionMode == t.PositionMode.Fixed && (d.position *= r), d.spacing = i.readFloat(), (d.spacingMode == t.SpacingMode.Length || d.spacingMode == t.SpacingMode.Fixed) && (d.spacing *= r), d.mixRotate = i.readFloat(), d.mixX = i.readFloat(), d.mixY = i.readFloat(), n.pathConstraints.push(d)
      }
      var _ = this.readSkin(i, n, !0, h)
      _ && (n.defaultSkin = _, n.skins.push(_))
      var c = n.skins.length
      for (t.Utils.setArraySize(n.skins, l = c + i.readInt(!0)); l > c; c++) n.skins[c] = this.readSkin(i, n, !1, h)
      l = this.linkedMeshes.length
      for (var c = 0; l > c; c++) {
        var x = this.linkedMeshes[c], w = x.skin ? n.findSkin(x.skin) : n.defaultSkin,
          b = w.getAttachment(x.slotIndex, x.parent)
        x.mesh.deformAttachment = x.inheritDeform ? b : x.mesh, x.mesh.setParentMesh(b), x.mesh.updateUVs()
      }
      this.linkedMeshes.length = 0, l = i.readInt(!0)
      for (var c = 0; l > c; c++) {
        var d = new t.EventData(i.readStringRef())
        d.intValue = i.readInt(!1), d.floatValue = i.readFloat(), d.stringValue = i.readString(), d.audioPath = i.readString(), d.audioPath && (d.volume = i.readFloat(), d.balance = i.readFloat()), n.events.push(d)
      }
      l = i.readInt(!0)
      for (var c = 0; l > c; c++) n.animations.push(this.readAnimation(i, i.readString(), n))
      return n
    }, i.prototype.readSkin = function (e, r, n, i) {
      var a = null, s = 0
      if (n) {
        if (s = e.readInt(!0), 0 == s) return null
        a = new t.Skin('default')
      } else {
        a = new t.Skin(e.readStringRef()), a.bones.length = e.readInt(!0)
        for (var o = 0, h = a.bones.length; h > o; o++) a.bones[o] = r.bones[e.readInt(!0)]
        for (var o = 0, h = e.readInt(!0); h > o; o++) a.constraints.push(r.ikConstraints[e.readInt(!0)])
        for (var o = 0, h = e.readInt(!0); h > o; o++) a.constraints.push(r.transformConstraints[e.readInt(!0)])
        for (var o = 0, h = e.readInt(!0); h > o; o++) a.constraints.push(r.pathConstraints[e.readInt(!0)])
        s = e.readInt(!0)
      }
      for (var o = 0; s > o; o++) {
        for (var l = e.readInt(!0), c = 0, p = e.readInt(!0); p > c; c++) {
          var u = e.readStringRef(), d = this.readAttachment(e, r, a, l, u, i)
          d && a.setAttachment(l, u, d)
        }
      }
      return a
    }, i.prototype.readAttachment = function (e, r, n, i, a, o) {
      var l = this.scale, c = e.readStringRef()
      switch (c || (c = a), e.readByte()) {
        case h.Region:
          var p = e.readStringRef(), u = e.readFloat(), d = e.readFloat(), f = e.readFloat(), m = e.readFloat(),
            v = e.readFloat(), g = e.readFloat(), y = e.readFloat(), _ = e.readInt32()
          p || (p = c)
          var x = this.attachmentLoader.newRegionAttachment(n, c, p)
          return x ? (x.path = p, x.x = d * l, x.y = f * l, x.scaleX = m, x.scaleY = v, x.rotation = u, x.width = g * l, x.height = y * l, t.Color.rgba8888ToColor(x.color, _), x.updateOffset(), x) : null
        case h.BoundingBox:
          var w = e.readInt(!0), b = this.readVertices(e, w), _ = o ? e.readInt32() : 0,
            S = this.attachmentLoader.newBoundingBoxAttachment(n, c)
          return S ? (S.worldVerticesLength = w << 1, S.vertices = b.vertices, S.bones = b.bones, o && t.Color.rgba8888ToColor(S.color, _), S) : null
        case h.Mesh:
          var p = e.readStringRef(), _ = e.readInt32(), w = e.readInt(!0), A = this.readFloatArray(e, w << 1, 1),
            k = this.readShortArray(e), b = this.readVertices(e, w), T = e.readInt(!0), M = null, g = 0, y = 0
          o && (M = this.readShortArray(e), g = e.readFloat(), y = e.readFloat()), p || (p = c)
          var C = this.attachmentLoader.newMeshAttachment(n, c, p)
          return C ? (C.path = p, t.Color.rgba8888ToColor(C.color, _), C.bones = b.bones, C.vertices = b.vertices, C.worldVerticesLength = w << 1, C.triangles = k, C.regionUVs = A, C.updateUVs(), C.hullLength = T << 1, o && (C.edges = M, C.width = g * l, C.height = y * l), C) : null
        case h.LinkedMesh:
          var p = e.readStringRef(), _ = e.readInt32(), I = e.readStringRef(), F = e.readStringRef(),
            Y = e.readBoolean(), g = 0, y = 0
          o && (g = e.readFloat(), y = e.readFloat()), p || (p = c)
          var C = this.attachmentLoader.newMeshAttachment(n, c, p)
          return C ? (C.path = p, t.Color.rgba8888ToColor(C.color, _), o && (C.width = g * l, C.height = y * l), this.linkedMeshes.push(new s(C, I, i, F, Y)), C) : null
        case h.Path:
          for (var R = e.readBoolean(), X = e.readBoolean(), w = e.readInt(!0), b = this.readVertices(e, w), E = t.Utils.newArray(w / 3, 0), U = 0, B = E.length; B > U; U++) E[U] = e.readFloat() * l
          var _ = o ? e.readInt32() : 0, p = this.attachmentLoader.newPathAttachment(n, c)
          return p ? (p.closed = R, p.constantSpeed = X, p.worldVerticesLength = w << 1, p.vertices = b.vertices, p.bones = b.bones, p.lengths = E, o && t.Color.rgba8888ToColor(p.color, _), p) : null
        case h.Point:
          var u = e.readFloat(), d = e.readFloat(), f = e.readFloat(), _ = o ? e.readInt32() : 0,
            P = this.attachmentLoader.newPointAttachment(n, c)
          return P ? (P.x = d * l, P.y = f * l, P.rotation = u, o && t.Color.rgba8888ToColor(P.color, _), P) : null
        case h.Clipping:
          var D = e.readInt(!0), w = e.readInt(!0), b = this.readVertices(e, w), _ = o ? e.readInt32() : 0,
            V = this.attachmentLoader.newClippingAttachment(n, c)
          return V ? (V.endSlot = r.slots[D], V.worldVerticesLength = w << 1, V.vertices = b.vertices, V.bones = b.bones, o && t.Color.rgba8888ToColor(V.color, _), V) : null
      }
      return null
    }, i.prototype.readVertices = function (e, r) {
      var n = this.scale, i = r << 1, a = new o
      if (!e.readBoolean()) return a.vertices = this.readFloatArray(e, i, n), a
      for (var s = new Array, h = new Array, l = 0; r > l; l++) {
        var c = e.readInt(!0)
        h.push(c)
        for (var p = 0; c > p; p++) h.push(e.readInt(!0)), s.push(e.readFloat() * n), s.push(e.readFloat() * n), s.push(e.readFloat())
      }
      return a.vertices = t.Utils.toFloatArray(s), a.bones = h, a
    }, i.prototype.readFloatArray = function (t, e, r) {
      var n = new Array(e)
      if (1 == r) for (var i = 0; e > i; i++) n[i] = t.readFloat() else for (var i = 0; e > i; i++) n[i] = t.readFloat() * r
      return n
    }, i.prototype.readShortArray = function (t) {
      for (var e = t.readInt(!0), r = new Array(e), n = 0; e > n; n++) r[n] = t.readShort()
      return r
    }, i.prototype.readAnimation = function (i, a, s) {
      i.readInt(!0)
      for (var o = new Array, h = this.scale, F = (new t.Color, new t.Color, 0), Y = i.readInt(!0); Y > F; F++) {
        for (var R = i.readInt(!0), X = 0, E = i.readInt(!0); E > X; X++) {
          var U = i.readByte(), B = i.readInt(!0), P = B - 1
          switch (U) {
            case _:
              for (var D = new t.AttachmentTimeline(B, R), V = 0; B > V; V++) D.setFrame(V, i.readFloat(), i.readStringRef())
              o.push(D)
              break
            case x:
              for (var L = i.readInt(!0), D = new t.RGBATimeline(B, L, R), N = i.readFloat(), O = i.readUnsignedByte() / 255, W = i.readUnsignedByte() / 255, q = i.readUnsignedByte() / 255, z = i.readUnsignedByte() / 255, H = 0, G = 0; D.setFrame(H, N, O, W, q, z), H != P; H++) {
                var j = i.readFloat(), J = i.readUnsignedByte() / 255, $ = i.readUnsignedByte() / 255,
                  Q = i.readUnsignedByte() / 255, K = i.readUnsignedByte() / 255
                switch (i.readByte()) {
                  case C:
                    D.setStepped(H)
                    break
                  case I:
                    n(i, D, G++, H, 0, N, j, O, J, 1), n(i, D, G++, H, 1, N, j, W, $, 1), n(i, D, G++, H, 2, N, j, q, Q, 1), n(i, D, G++, H, 3, N, j, z, K, 1)
                }
                N = j, O = J, W = $, q = Q, z = K
              }
              o.push(D)
              break
            case w:
              for (var L = i.readInt(!0), D = new t.RGBTimeline(B, L, R), N = i.readFloat(), O = i.readUnsignedByte() / 255, W = i.readUnsignedByte() / 255, q = i.readUnsignedByte() / 255, Z = 0, G = 0; D.setFrame(Z, N, O, W, q), Z != P; Z++) {
                var j = i.readFloat(), J = i.readUnsignedByte() / 255, $ = i.readUnsignedByte() / 255,
                  Q = i.readUnsignedByte() / 255
                switch (i.readByte()) {
                  case C:
                    D.setStepped(Z)
                    break
                  case I:
                    n(i, D, G++, Z, 0, N, j, O, J, 1), n(i, D, G++, Z, 1, N, j, W, $, 1), n(i, D, G++, Z, 2, N, j, q, Q, 1)
                }
                N = j, O = J, W = $, q = Q
              }
              o.push(D)
              break
            case b:
              for (var L = i.readInt(!0), D = new t.RGBA2Timeline(B, L, R), N = i.readFloat(), O = i.readUnsignedByte() / 255, W = i.readUnsignedByte() / 255, q = i.readUnsignedByte() / 255, z = i.readUnsignedByte() / 255, J = i.readUnsignedByte() / 255, $ = i.readUnsignedByte() / 255, Q = i.readUnsignedByte() / 255, te = 0, G = 0; D.setFrame(te, N, O, W, q, z, J, $, Q), te != P; te++) {
                var j = i.readFloat(), ee = i.readUnsignedByte() / 255, re = i.readUnsignedByte() / 255,
                  ne = i.readUnsignedByte() / 255, ie = i.readUnsignedByte() / 255, ae = i.readUnsignedByte() / 255,
                  se = i.readUnsignedByte() / 255, oe = i.readUnsignedByte() / 255
                switch (i.readByte()) {
                  case C:
                    D.setStepped(te)
                    break
                  case I:
                    n(i, D, G++, te, 0, N, j, O, ee, 1), n(i, D, G++, te, 1, N, j, W, re, 1), n(i, D, G++, te, 2, N, j, q, ne, 1), n(i, D, G++, te, 3, N, j, z, ie, 1), n(i, D, G++, te, 4, N, j, J, ae, 1), n(i, D, G++, te, 5, N, j, $, se, 1), n(i, D, G++, te, 6, N, j, Q, oe, 1)
                }
                N = j, O = ee, W = re, q = ne, z = ie, J = ae, $ = se, Q = oe
              }
              o.push(D)
              break
            case S:
              for (var L = i.readInt(!0), D = new t.RGB2Timeline(B, L, R), N = i.readFloat(), O = i.readUnsignedByte() / 255, W = i.readUnsignedByte() / 255, q = i.readUnsignedByte() / 255, J = i.readUnsignedByte() / 255, $ = i.readUnsignedByte() / 255, Q = i.readUnsignedByte() / 255, he = 0, G = 0; D.setFrame(he, N, O, W, q, J, $, Q), he != P; he++) {
                var j = i.readFloat(), ee = i.readUnsignedByte() / 255, re = i.readUnsignedByte() / 255,
                  ne = i.readUnsignedByte() / 255, ae = i.readUnsignedByte() / 255, se = i.readUnsignedByte() / 255,
                  oe = i.readUnsignedByte() / 255
                switch (i.readByte()) {
                  case C:
                    D.setStepped(he)
                    break
                  case I:
                    n(i, D, G++, he, 0, N, j, O, ee, 1), n(i, D, G++, he, 1, N, j, W, re, 1), n(i, D, G++, he, 2, N, j, q, ne, 1), n(i, D, G++, he, 3, N, j, J, ae, 1), n(i, D, G++, he, 4, N, j, $, se, 1), n(i, D, G++, he, 5, N, j, Q, oe, 1)
                }
                N = j, O = ee, W = re, q = ne, J = ae, $ = se, Q = oe
              }
              o.push(D)
              break
            case A:
              for (var D = new t.AlphaTimeline(B, i.readInt(!0), R), N = i.readFloat(), z = i.readUnsignedByte() / 255, le = 0, G = 0; D.setFrame(le, N, z), le != P; le++) {
                var j = i.readFloat(), K = i.readUnsignedByte() / 255
                switch (i.readByte()) {
                  case C:
                    D.setStepped(le)
                    break
                  case I:
                    n(i, D, G++, le, 0, N, j, z, K, 1)
                }
                N = j, z = K
              }
              o.push(D)
          }
        }
      }
      for (var F = 0, Y = i.readInt(!0); Y > F; F++) {
        for (var ce = i.readInt(!0), X = 0, E = i.readInt(!0); E > X; X++) {
          var pe = i.readByte(), B = i.readInt(!0), L = i.readInt(!0)
          switch (pe) {
            case l:
              o.push(e(i, new t.RotateTimeline(B, L, ce), 1))
              break
            case c:
              o.push(r(i, new t.TranslateTimeline(B, L, ce), h))
              break
            case p:
              o.push(e(i, new t.TranslateXTimeline(B, L, ce), h))
              break
            case u:
              o.push(e(i, new t.TranslateYTimeline(B, L, ce), h))
              break
            case d:
              o.push(r(i, new t.ScaleTimeline(B, L, ce), 1))
              break
            case f:
              o.push(e(i, new t.ScaleXTimeline(B, L, ce), 1))
              break
            case m:
              o.push(e(i, new t.ScaleYTimeline(B, L, ce), 1))
              break
            case v:
              o.push(r(i, new t.ShearTimeline(B, L, ce), 1))
              break
            case g:
              o.push(e(i, new t.ShearXTimeline(B, L, ce), 1))
              break
            case y:
              o.push(e(i, new t.ShearYTimeline(B, L, ce), 1))
          }
        }
      }
      for (var F = 0, Y = i.readInt(!0); Y > F; F++) {
        for (var ue = i.readInt(!0), B = i.readInt(!0), P = B - 1, D = new t.IkConstraintTimeline(B, i.readInt(!0), ue), N = i.readFloat(), de = i.readFloat(), fe = i.readFloat() * h, me = 0, G = 0; D.setFrame(me, N, de, fe, i.readByte(), i.readBoolean(), i.readBoolean()), me != P; me++) {
          var j = i.readFloat(), ve = i.readFloat(), ge = i.readFloat() * h
          switch (i.readByte()) {
            case C:
              D.setStepped(me)
              break
            case I:
              n(i, D, G++, me, 0, N, j, de, ve, 1), n(i, D, G++, me, 1, N, j, fe, ge, h)
          }
          N = j, de = ve, fe = ge
        }
        o.push(D)
      }
      for (var F = 0, Y = i.readInt(!0); Y > F; F++) {
        for (var ue = i.readInt(!0), B = i.readInt(!0), P = B - 1, D = new t.TransformConstraintTimeline(B, i.readInt(!0), ue), N = i.readFloat(), ye = i.readFloat(), _e = i.readFloat(), xe = i.readFloat(), we = i.readFloat(), be = i.readFloat(), Se = i.readFloat(), Ae = 0, G = 0; D.setFrame(Ae, N, ye, _e, xe, we, be, Se), Ae != P; Ae++) {
          var j = i.readFloat(), ke = i.readFloat(), Te = i.readFloat(), Me = i.readFloat(), Ce = i.readFloat(),
            Ie = i.readFloat(), Fe = i.readFloat()
          switch (i.readByte()) {
            case C:
              D.setStepped(Ae)
              break
            case I:
              n(i, D, G++, Ae, 0, N, j, ye, ke, 1), n(i, D, G++, Ae, 1, N, j, _e, Te, 1), n(i, D, G++, Ae, 2, N, j, xe, Me, 1), n(i, D, G++, Ae, 3, N, j, we, Ce, 1), n(i, D, G++, Ae, 4, N, j, be, Ie, 1), n(i, D, G++, Ae, 5, N, j, Se, Fe, 1)
          }
          N = j, ye = ke, _e = Te, xe = Me, we = Ce, be = Ie, Se = Fe
        }
        o.push(D)
      }
      for (var F = 0, Y = i.readInt(!0); Y > F; F++) {
        for (var ue = i.readInt(!0), Ye = s.pathConstraints[ue], X = 0, E = i.readInt(!0); E > X; X++) {
          switch (i.readByte()) {
            case k:
              o.push(e(i, new t.PathConstraintPositionTimeline(i.readInt(!0), i.readInt(!0), ue), Ye.positionMode == t.PositionMode.Fixed ? h : 1))
              break
            case T:
              o.push(e(i, new t.PathConstraintSpacingTimeline(i.readInt(!0), i.readInt(!0), ue), Ye.spacingMode == t.SpacingMode.Length || Ye.spacingMode == t.SpacingMode.Fixed ? h : 1))
              break
            case M:
              for (var D = new t.PathConstraintMixTimeline(i.readInt(!0), i.readInt(!0), ue), N = i.readFloat(), ye = i.readFloat(), _e = i.readFloat(), xe = i.readFloat(), Re = 0, G = 0, P = D.getFrameCount() - 1; D.setFrame(Re, N, ye, _e, xe), Re != P; Re++) {
                var j = i.readFloat(), ke = i.readFloat(), Te = i.readFloat(), Me = i.readFloat()
                switch (i.readByte()) {
                  case C:
                    D.setStepped(Re)
                    break
                  case I:
                    n(i, D, G++, Re, 0, N, j, ye, ke, 1), n(i, D, G++, Re, 1, N, j, _e, Te, 1), n(i, D, G++, Re, 2, N, j, xe, Me, 1)
                }
                N = j, ye = ke, _e = Te, xe = Me
              }
              o.push(D)
          }
        }
      }
      for (var F = 0, Y = i.readInt(!0); Y > F; F++) {
        for (var Xe = s.skins[i.readInt(!0)], X = 0, E = i.readInt(!0); E > X; X++) {
          for (var R = i.readInt(!0), Ee = 0, Ue = i.readInt(!0); Ue > Ee; Ee++) {
            for (var Be = i.readStringRef(), Pe = Xe.getAttachment(R, Be), De = Pe.bones, Ve = Pe.vertices, Le = De ? Ve.length / 3 * 2 : Ve.length, B = i.readInt(!0), P = B - 1, L = i.readInt(!0), D = new t.DeformTimeline(B, L, R, Pe), N = i.readFloat(), Ne = 0, G = 0; ; Ne++) {
              var Oe = void 0, We = i.readInt(!0)
              if (0 == We) {
                Oe = De ? t.Utils.newFloatArray(Le) : Ve
              } else {
                Oe = t.Utils.newFloatArray(Le)
                var qe = i.readInt(!0)
                if (We += qe, 1 == h) for (var ze = qe; We > ze; ze++) Oe[ze] = i.readFloat() else for (var ze = qe; We > ze; ze++) Oe[ze] = i.readFloat() * h
                if (!De) for (var ze = 0, He = Oe.length; He > ze; ze++) Oe[ze] += Ve[ze]
              }
              if (D.setFrame(Ne, N, Oe), Ne == P) break
              var j = i.readFloat()
              switch (i.readByte()) {
                case C:
                  D.setStepped(Ne)
                  break
                case I:
                  n(i, D, G++, Ne, 0, N, j, 0, 1, 1)
              }
              N = j
            }
            o.push(D)
          }
        }
      }
      var Ge = i.readInt(!0)
      if (Ge > 0) {
        for (var D = new t.DrawOrderTimeline(Ge), je = s.slots.length, F = 0; Ge > F; F++) {
          for (var N = i.readFloat(), Je = i.readInt(!0), $e = t.Utils.newArray(je, 0), X = je - 1; X >= 0; X--) $e[X] = -1
          for (var Qe = t.Utils.newArray(je - Je, 0), Ke = 0, Ze = 0, X = 0; Je > X; X++) {
            for (var R = i.readInt(!0); Ke != R;) Qe[Ze++] = Ke++
            $e[Ke + i.readInt(!0)] = Ke++
          }
          for (; je > Ke;) Qe[Ze++] = Ke++
          for (var X = je - 1; X >= 0; X--) -1 == $e[X] && ($e[X] = Qe[--Ze])
          D.setFrame(F, N, $e)
        }
        o.push(D)
      }
      var tr = i.readInt(!0)
      if (tr > 0) {
        for (var D = new t.EventTimeline(tr), F = 0; tr > F; F++) {
          var N = i.readFloat(), er = s.events[i.readInt(!0)], rr = new t.Event(N, er)
          rr.intValue = i.readInt(!1), rr.floatValue = i.readFloat(), rr.stringValue = i.readBoolean() ? i.readString() : er.stringValue, rr.data.audioPath && (rr.volume = i.readFloat(), rr.balance = i.readFloat()), D.setFrame(F, rr)
        }
        o.push(D)
      }
      for (var nr = 0, F = 0, Y = o.length; Y > F; F++) nr = Math.max(nr, o[F].getDuration())
      return new t.Animation(a, o, nr)
    }, i
  }()
  t.SkeletonBinary = i, __reflect(i.prototype, 'spine.SkeletonBinary')
  var a = function () {
    function t (t, e, r, n) {
      void 0 === e && (e = new Array), void 0 === r && (r = 0), void 0 === n && (n = new DataView(t.buffer)), this.strings = e, this.index = r, this.buffer = n
    }

    return t.prototype.readByte = function () {
      return this.buffer.getInt8(this.index++)
    }, t.prototype.readUnsignedByte = function () {
      return this.buffer.getUint8(this.index++)
    }, t.prototype.readShort = function () {
      var t = this.buffer.getInt16(this.index)
      return this.index += 2, t
    }, t.prototype.readInt32 = function () {
      var t = this.buffer.getInt32(this.index)
      return this.index += 4, t
    }, t.prototype.readInt = function (t) {
      var e = this.readByte(), r = 127 & e
      return 0 != (128 & e) && (e = this.readByte(), r |= (127 & e) << 7, 0 != (128 & e) && (e = this.readByte(), r |= (127 & e) << 14, 0 != (128 & e) && (e = this.readByte(), r |= (127 & e) << 21, 0 != (128 & e) && (e = this.readByte(), r |= (127 & e) << 28)))), t ? r : r >>> 1 ^ -(1 & r)
    }, t.prototype.readStringRef = function () {
      var t = this.readInt(!0)
      return 0 == t ? null : this.strings[t - 1]
    }, t.prototype.readString = function () {
      var t = this.readInt(!0)
      switch (t) {
        case 0:
          return null
        case 1:
          return ''
      }
      t--
      for (var e = '', r = 0; t > r;) {
        var n = this.readUnsignedByte()
        switch (n >> 4) {
          case 12:
          case 13:
            e += String.fromCharCode((31 & n) << 6 | 63 & this.readByte()), r += 2
            break
          case 14:
            e += String.fromCharCode((15 & n) << 12 | (63 & this.readByte()) << 6 | 63 & this.readByte()), r += 3
            break
          default:
            e += String.fromCharCode(n), r++
        }
      }
      return e
    }, t.prototype.readFloat = function () {
      var t = this.buffer.getFloat32(this.index)
      return this.index += 4, t
    }, t.prototype.readBoolean = function () {
      return 0 != this.readByte()
    }, t
  }()
  t.BinaryInput = a, __reflect(a.prototype, 'spine.BinaryInput')
  var s = function () {
    function t (t, e, r, n, i) {
      this.mesh = t, this.skin = e, this.slotIndex = r, this.parent = n, this.inheritDeform = i
    }

    return t
  }()
  __reflect(s.prototype, 'LinkedMesh')
  var o = function () {
    function t (t, e) {
      void 0 === t && (t = null), void 0 === e && (e = null), this.bones = t, this.vertices = e
    }

    return t
  }()
  __reflect(o.prototype, 'Vertices')
  var h
  !function (t) {
    t[t.Region = 0] = 'Region', t[t.BoundingBox = 1] = 'BoundingBox', t[t.Mesh = 2] = 'Mesh', t[t.LinkedMesh = 3] = 'LinkedMesh', t[t.Path = 4] = 'Path', t[t.Point = 5] = 'Point', t[t.Clipping = 6] = 'Clipping'
  }(h || (h = {}))
  var l = 0, c = 1, p = 2, u = 3, d = 4, f = 5, m = 6, v = 7, g = 8, y = 9, _ = 0, x = 1, w = 2, b = 3, S = 4, A = 5,
    k = 0, T = 1, M = 2, C = 1, I = 2
}(spine || (spine = {}))
var __reflect = this && this.__reflect || function (t, e, r) {
  t.__class__ = e, r ? r.push(e) : r = [e], t.__types__ = t.__types__ ? r.concat(t.__types__) : r
}, spine
!function (t) {
  var e = function () {
    function e () {
      this.minX = 0, this.minY = 0, this.maxX = 0, this.maxY = 0, this.boundingBoxes = new Array, this.polygons = new Array, this.polygonPool = new t.Pool(function () {
        return t.Utils.newFloatArray(16)
      })
    }

    return e.prototype.update = function (e, r) {
      if (!e) throw new Error('skeleton cannot be null.')
      var n = this.boundingBoxes, i = this.polygons, a = this.polygonPool, s = e.slots, o = s.length
      n.length = 0, a.freeAll(i), i.length = 0
      for (var h = 0; o > h; h++) {
        var l = s[h]
        if (l.bone.active) {
          var c = l.getAttachment()
          if (c instanceof t.BoundingBoxAttachment) {
            var p = c
            n.push(p)
            var u = a.obtain()
            u.length != p.worldVerticesLength && (u = t.Utils.newFloatArray(p.worldVerticesLength)), i.push(u), p.computeWorldVertices(l, 0, p.worldVerticesLength, u, 0, 2)
          }
        }
      }
      r ? this.aabbCompute() : (this.minX = Number.POSITIVE_INFINITY, this.minY = Number.POSITIVE_INFINITY, this.maxX = Number.NEGATIVE_INFINITY, this.maxY = Number.NEGATIVE_INFINITY)
    }, e.prototype.aabbCompute = function () {
      for (var t = Number.POSITIVE_INFINITY, e = Number.POSITIVE_INFINITY, r = Number.NEGATIVE_INFINITY, n = Number.NEGATIVE_INFINITY, i = this.polygons, a = 0, s = i.length; s > a; a++) {
        for (var o = i[a], h = o, l = 0, c = o.length; c > l; l += 2) {
          var p = h[l], u = h[l + 1]
          t = Math.min(t, p), e = Math.min(e, u), r = Math.max(r, p), n = Math.max(n, u)
        }
      }
      this.minX = t, this.minY = e, this.maxX = r, this.maxY = n
    }, e.prototype.aabbContainsPoint = function (t, e) {
      return t >= this.minX && t <= this.maxX && e >= this.minY && e <= this.maxY
    }, e.prototype.aabbIntersectsSegment = function (t, e, r, n) {
      var i = this.minX, a = this.minY, s = this.maxX, o = this.maxY
      if (i >= t && i >= r || a >= e && a >= n || t >= s && r >= s || e >= o && n >= o) return !1
      var h = (n - e) / (r - t), l = h * (i - t) + e
      if (l > a && o > l) return !0
      if (l = h * (s - t) + e, l > a && o > l) return !0
      var c = (a - e) / h + t
      return c > i && s > c ? !0 : (c = (o - e) / h + t, c > i && s > c ? !0 : !1)
    }, e.prototype.aabbIntersectsSkeleton = function (t) {
      return this.minX < t.maxX && this.maxX > t.minX && this.minY < t.maxY && this.maxY > t.minY
    }, e.prototype.containsPoint = function (t, e) {
      for (var r = this.polygons, n = 0, i = r.length; i > n; n++) if (this.containsPointPolygon(r[n], t, e)) return this.boundingBoxes[n]
      return null
    }, e.prototype.containsPointPolygon = function (t, e, r) {
      for (var n = t, i = t.length, a = i - 2, s = !1, o = 0; i > o; o += 2) {
        var h = n[o + 1], l = n[a + 1]
        if (r > h && l >= r || r > l && h >= r) {
          var c = n[o]
          c + (r - h) / (l - h) * (n[a] - c) < e && (s = !s)
        }
        a = o
      }
      return s
    }, e.prototype.intersectsSegment = function (t, e, r, n) {
      for (var i = this.polygons, a = 0, s = i.length; s > a; a++) if (this.intersectsSegmentPolygon(i[a], t, e, r, n)) return this.boundingBoxes[a]
      return null
    }, e.prototype.intersectsSegmentPolygon = function (t, e, r, n, i) {
      for (var a = t, s = t.length, o = e - n, h = r - i, l = e * i - r * n, c = a[s - 2], p = a[s - 1], u = 0; s > u; u += 2) {
        var d = a[u], f = a[u + 1], m = c * f - p * d, v = c - d, g = p - f, y = o * g - h * v, _ = (l * v - o * m) / y
        if ((_ >= c && d >= _ || _ >= d && c >= _) && (_ >= e && n >= _ || _ >= n && e >= _)) {
          var x = (l * g - h * m) / y
          if ((x >= p && f >= x || x >= f && p >= x) && (x >= r && i >= x || x >= i && r >= x)) return !0
        }
        c = d, p = f
      }
      return !1
    }, e.prototype.getPolygon = function (t) {
      if (!t) throw new Error('boundingBox cannot be null.')
      var e = this.boundingBoxes.indexOf(t)
      return -1 == e ? null : this.polygons[e]
    }, e.prototype.getWidth = function () {
      return this.maxX - this.minX
    }, e.prototype.getHeight = function () {
      return this.maxY - this.minY
    }, e
  }()
  t.SkeletonBounds = e, __reflect(e.prototype, 'spine.SkeletonBounds')
}(spine || (spine = {}))
var __reflect = this && this.__reflect || function (t, e, r) {
  t.__class__ = e, r ? r.push(e) : r = [e], t.__types__ = t.__types__ ? r.concat(t.__types__) : r
}, spine
!function (t) {
  var e = function () {
    function e () {
      this.triangulator = new t.Triangulator, this.clippingPolygon = new Array, this.clipOutput = new Array, this.clippedVertices = new Array, this.clippedTriangles = new Array, this.scratch = new Array
    }

    return e.prototype.clipStart = function (r, n) {
      if (this.clipAttachment) return 0
      this.clipAttachment = n
      var i = n.worldVerticesLength, a = t.Utils.setArraySize(this.clippingPolygon, i)
      n.computeWorldVertices(r, 0, i, a, 0, 2)
      var s = this.clippingPolygon
      e.makeClockwise(s)
      for (var o = this.clippingPolygons = this.triangulator.decompose(s, this.triangulator.triangulate(s)), h = 0, l = o.length; l > h; h++) {
        var c = o[h]
        e.makeClockwise(c), c.push(c[0]), c.push(c[1])
      }
      return o.length
    }, e.prototype.clipEndWithSlot = function (t) {
      this.clipAttachment && this.clipAttachment.endSlot == t.data && this.clipEnd()
    }, e.prototype.clipEnd = function () {
      this.clipAttachment && (this.clipAttachment = null, this.clippingPolygons = null, this.clippedVertices.length = 0, this.clippedTriangles.length = 0, this.clippingPolygon.length = 0)
    }, e.prototype.isClipping = function () {
      return null != this.clipAttachment
    }, e.prototype.clipTriangles = function (e, r, n, i, a, s, o, h) {
      var l = this.clipOutput, c = this.clippedVertices, p = this.clippedTriangles, u = this.clippingPolygons,
        d = this.clippingPolygons.length, f = h ? 12 : 8, m = 0
      c.length = 0, p.length = 0
      t:for (var v = 0; i > v; v += 3) {
        var g = n[v] << 1, y = e[g], _ = e[g + 1], x = a[g], w = a[g + 1]
        g = n[v + 1] << 1
        var b = e[g], S = e[g + 1], A = a[g], k = a[g + 1]
        g = n[v + 2] << 1
        for (var T = e[g], M = e[g + 1], C = a[g], I = a[g + 1], F = 0; d > F; F++) {
          var Y = c.length
          if (!this.clip(y, _, b, S, T, M, u[F], l)) {
            var R = t.Utils.setArraySize(c, Y + 3 * f)
            R[Y] = y, R[Y + 1] = _, R[Y + 2] = s.r, R[Y + 3] = s.g, R[Y + 4] = s.b, R[Y + 5] = s.a, h ? (R[Y + 6] = x, R[Y + 7] = w, R[Y + 8] = o.r, R[Y + 9] = o.g, R[Y + 10] = o.b, R[Y + 11] = o.a, R[Y + 12] = b, R[Y + 13] = S, R[Y + 14] = s.r, R[Y + 15] = s.g, R[Y + 16] = s.b, R[Y + 17] = s.a, R[Y + 18] = A, R[Y + 19] = k, R[Y + 20] = o.r, R[Y + 21] = o.g, R[Y + 22] = o.b, R[Y + 23] = o.a, R[Y + 24] = T, R[Y + 25] = M, R[Y + 26] = s.r, R[Y + 27] = s.g, R[Y + 28] = s.b, R[Y + 29] = s.a, R[Y + 30] = C, R[Y + 31] = I, R[Y + 32] = o.r, R[Y + 33] = o.g, R[Y + 34] = o.b, R[Y + 35] = o.a) : (R[Y + 6] = x, R[Y + 7] = w, R[Y + 8] = b, R[Y + 9] = S, R[Y + 10] = s.r, R[Y + 11] = s.g, R[Y + 12] = s.b, R[Y + 13] = s.a, R[Y + 14] = A, R[Y + 15] = k, R[Y + 16] = T, R[Y + 17] = M, R[Y + 18] = s.r, R[Y + 19] = s.g, R[Y + 20] = s.b, R[Y + 21] = s.a, R[Y + 22] = C, R[Y + 23] = I), Y = p.length
            var X = t.Utils.setArraySize(p, Y + 3)
            X[Y] = m, X[Y + 1] = m + 1, X[Y + 2] = m + 2, m += 3
            continue t
          }
          var E = l.length
          if (0 != E) {
            for (var U = S - M, B = T - b, P = y - T, D = M - _, V = 1 / (U * P + B * (_ - M)), L = E >> 1, N = this.clipOutput, R = t.Utils.setArraySize(c, Y + L * f), O = 0; E > O; O += 2) {
              var W = N[O], q = N[O + 1]
              R[Y] = W, R[Y + 1] = q, R[Y + 2] = s.r, R[Y + 3] = s.g, R[Y + 4] = s.b, R[Y + 5] = s.a
              var z = W - T, H = q - M, G = (U * z + B * H) * V, j = (D * z + P * H) * V, J = 1 - G - j
              R[Y + 6] = x * G + A * j + C * J, R[Y + 7] = w * G + k * j + I * J, h && (R[Y + 8] = o.r, R[Y + 9] = o.g, R[Y + 10] = o.b, R[Y + 11] = o.a), Y += f
            }
            Y = p.length
            var X = t.Utils.setArraySize(p, Y + 3 * (L - 2))
            L--
            for (var O = 1; L > O; O++) X[Y] = m, X[Y + 1] = m + O, X[Y + 2] = m + O + 1, Y += 3
            m += L + 1
          }
        }
      }
    }, e.prototype.clip = function (t, e, r, n, i, a, s, o) {
      var h = o, l = !1, c = null
      s.length % 4 >= 2 ? (c = o, o = this.scratch) : c = this.scratch, c.length = 0, c.push(t), c.push(e), c.push(r), c.push(n), c.push(i), c.push(a), c.push(t), c.push(e), o.length = 0
      for (var p = s, u = s.length - 4, d = 0; ; d += 2) {
        for (var f = p[d], m = p[d + 1], v = p[d + 2], g = p[d + 3], y = f - v, _ = m - g, x = c, w = c.length - 2, b = o.length, S = 0; w > S; S += 2) {
          var A = x[S], k = x[S + 1], T = x[S + 2], M = x[S + 3], C = y * (M - g) - _ * (T - v) > 0
          if (y * (k - g) - _ * (A - v) > 0) {
            if (C) {
              o.push(T), o.push(M)
              continue
            }
            var I = M - k, F = T - A, Y = I * (v - f) - F * (g - m)
            if (Math.abs(Y) > 1e-6) {
              var R = (F * (m - k) - I * (f - A)) / Y
              o.push(f + (v - f) * R), o.push(m + (g - m) * R)
            } else {
              o.push(f), o.push(m)
            }
          } else if (C) {
            var I = M - k, F = T - A, Y = I * (v - f) - F * (g - m)
            if (Math.abs(Y) > 1e-6) {
              var R = (F * (m - k) - I * (f - A)) / Y
              o.push(f + (v - f) * R), o.push(m + (g - m) * R)
            } else {
              o.push(f), o.push(m)
            }
            o.push(T), o.push(M)
          }
          l = !0
        }
        if (b == o.length) return h.length = 0, !0
        if (o.push(o[0]), o.push(o[1]), d == u) break
        var X = o
        o = c, o.length = 0, c = X
      }
      if (h != o) {
        h.length = 0
        for (var d = 0, E = o.length - 2; E > d; d++) h[d] = o[d]
      } else {
        h.length = h.length - 2
      }
      return l
    }, e.makeClockwise = function (t) {
      for (var e = t, r = t.length, n = e[r - 2] * e[1] - e[0] * e[r - 1], i = 0, a = 0, s = 0, o = 0, h = 0, l = r - 3; l > h; h += 2) i = e[h], a = e[h + 1], s = e[h + 2], o = e[h + 3], n += i * o - s * a
      if (!(0 > n)) {
        for (var h = 0, c = r - 2, l = r >> 1; l > h; h += 2) {
          var p = e[h], u = e[h + 1], d = c - h
          e[h] = e[d], e[h + 1] = e[d + 1], e[d] = p, e[d + 1] = u
        }
      }
    }, e
  }()
  t.SkeletonClipping = e, __reflect(e.prototype, 'spine.SkeletonClipping')
}(spine || (spine = {}))
var __reflect = this && this.__reflect || function (t, e, r) {
  t.__class__ = e, r ? r.push(e) : r = [e], t.__types__ = t.__types__ ? r.concat(t.__types__) : r
}, spine
!function (t) {
  var e = function () {
    function t () {
      this.name = null, this.bones = new Array, this.slots = new Array, this.skins = new Array, this.defaultSkin = null, this.events = new Array, this.animations = new Array, this.ikConstraints = new Array, this.transformConstraints = new Array, this.pathConstraints = new Array, this.x = 0, this.y = 0, this.width = 0, this.height = 0, this.version = null, this.hash = null, this.fps = 0, this.imagesPath = null, this.audioPath = null
    }

    return t.prototype.findBone = function (t) {
      if (!t) throw new Error('boneName cannot be null.')
      for (var e = this.bones, r = 0, n = e.length; n > r; r++) {
        var i = e[r]
        if (i.name == t) return i
      }
      return null
    }, t.prototype.findSlot = function (t) {
      if (!t) throw new Error('slotName cannot be null.')
      for (var e = this.slots, r = 0, n = e.length; n > r; r++) {
        var i = e[r]
        if (i.name == t) return i
      }
      return null
    }, t.prototype.findSkin = function (t) {
      if (!t) throw new Error('skinName cannot be null.')
      for (var e = this.skins, r = 0, n = e.length; n > r; r++) {
        var i = e[r]
        if (i.name == t) return i
      }
      return null
    }, t.prototype.findEvent = function (t) {
      if (!t) throw new Error('eventDataName cannot be null.')
      for (var e = this.events, r = 0, n = e.length; n > r; r++) {
        var i = e[r]
        if (i.name == t) return i
      }
      return null
    }, t.prototype.findAnimation = function (t) {
      if (!t) throw new Error('animationName cannot be null.')
      for (var e = this.animations, r = 0, n = e.length; n > r; r++) {
        var i = e[r]
        if (i.name == t) return i
      }
      return null
    }, t.prototype.findIkConstraint = function (t) {
      if (!t) throw new Error('constraintName cannot be null.')
      for (var e = this.ikConstraints, r = 0, n = e.length; n > r; r++) {
        var i = e[r]
        if (i.name == t) return i
      }
      return null
    }, t.prototype.findTransformConstraint = function (t) {
      if (!t) throw new Error('constraintName cannot be null.')
      for (var e = this.transformConstraints, r = 0, n = e.length; n > r; r++) {
        var i = e[r]
        if (i.name == t) return i
      }
      return null
    }, t.prototype.findPathConstraint = function (t) {
      if (!t) throw new Error('constraintName cannot be null.')
      for (var e = this.pathConstraints, r = 0, n = e.length; n > r; r++) {
        var i = e[r]
        if (i.name == t) return i
      }
      return null
    }, t
  }()
  t.SkeletonData = e, __reflect(e.prototype, 'spine.SkeletonData')
}(spine || (spine = {}))
var __reflect = this && this.__reflect || function (t, e, r) {
  t.__class__ = e, r ? r.push(e) : r = [e], t.__types__ = t.__types__ ? r.concat(t.__types__) : r
}, spine
!function (t) {
  function e (t, e, r, a) {
    for (var s = t[0], o = i(s, 'time', 0), h = i(s, 'value', r) * a, l = 0, c = 0; ; c++) {
      e.setFrame(c, o, h)
      var p = t[c + 1]
      if (!p) return e.shrink(l), e
      var u = i(p, 'time', 0), d = i(p, 'value', r) * a
      s.curve && (l = n(s.curve, e, l, c, 0, o, u, h, d, a)), o = u, h = d, s = p
    }
  }

  function r (t, e, r, a, s, o) {
    for (var h = t[0], l = i(h, 'time', 0), c = i(h, r, s) * o, p = i(h, a, s) * o, u = 0, d = 0; ; d++) {
      e.setFrame(d, l, c, p)
      var f = t[d + 1]
      if (!f) return e.shrink(u), e
      var m = i(f, 'time', 0), v = i(f, r, s) * o, g = i(f, a, s) * o, y = h.curve
      y && (u = n(y, e, u, d, 0, l, m, c, v, o), u = n(y, e, u, d, 1, l, m, p, g, o)), l = m, c = v, p = g, h = f
    }
  }

  function n (t, e, r, n, i, a, s, o, h, l) {
    if ('stepped' == t) return e.setStepped(n), r
    var c = i << 2, p = t[c], u = t[c + 1] * l, d = t[c + 2], f = t[c + 3] * l
    return e.setBezier(r, n, i, a, o, p, u, d, f, s, h), r + 1
  }

  function i (t, e, r) {
    return void 0 !== t[e] ? t[e] : r
  }

  var a = function () {
    function a (t) {
      this.attachmentLoader = null, this.scale = 1, this.linkedMeshes = new Array, this.attachmentLoader = t
    }

    return a.prototype.readSkeletonData = function (e) {
      var r = this.scale, n = new t.SkeletonData, a = 'string' == typeof e ? JSON.parse(e) : e, s = a.skeleton
      if (s && (n.hash = s.hash, n.version = s.spine, n.x = s.x, n.y = s.y, n.width = s.width, n.height = s.height, n.fps = s.fps, n.imagesPath = s.images), a.bones) {
        for (var o = 0; o < a.bones.length; o++) {
          var h = a.bones[o], l = null, c = i(h, 'parent', null)
          c && (l = n.findBone(c))
          var p = new t.BoneData(n.bones.length, h.name, l)
          p.length = i(h, 'length', 0) * r, p.x = i(h, 'x', 0) * r, p.y = i(h, 'y', 0) * r, p.rotation = i(h, 'rotation', 0), p.scaleX = i(h, 'scaleX', 1), p.scaleY = i(h, 'scaleY', 1), p.shearX = i(h, 'shearX', 0), p.shearY = i(h, 'shearY', 0), p.transformMode = t.Utils.enumValue(t.TransformMode, i(h, 'transform', 'Normal')), p.skinRequired = i(h, 'skin', !1)
          var u = i(h, 'color', null)
          u && p.color.setFromString(u), n.bones.push(p)
        }
      }
      if (a.slots) {
        for (var o = 0; o < a.slots.length; o++) {
          var d = a.slots[o], f = n.findBone(d.bone), p = new t.SlotData(n.slots.length, d.name, f),
            u = i(d, 'color', null)
          u && p.color.setFromString(u)
          var m = i(d, 'dark', null)
          m && (p.darkColor = t.Color.fromString(m)), p.attachmentName = i(d, 'attachment', null), p.blendMode = t.Utils.enumValue(t.BlendMode, i(d, 'blend', 'normal')), n.slots.push(p)
        }
      }
      if (a.ik) {
        for (var o = 0; o < a.ik.length; o++) {
          var v = a.ik[o], p = new t.IkConstraintData(v.name)
          p.order = i(v, 'order', 0), p.skinRequired = i(v, 'skin', !1)
          for (var g = 0; g < v.bones.length; g++) p.bones.push(n.findBone(v.bones[g]))
          p.target = n.findBone(v.target), p.mix = i(v, 'mix', 1), p.softness = i(v, 'softness', 0) * r, p.bendDirection = i(v, 'bendPositive', !0) ? 1 : -1, p.compress = i(v, 'compress', !1), p.stretch = i(v, 'stretch', !1), p.uniform = i(v, 'uniform', !1), n.ikConstraints.push(p)
        }
      }
      if (a.transform) {
        for (var o = 0; o < a.transform.length; o++) {
          var v = a.transform[o], p = new t.TransformConstraintData(v.name)
          p.order = i(v, 'order', 0), p.skinRequired = i(v, 'skin', !1)
          for (var g = 0; g < v.bones.length; g++) p.bones.push(n.findBone(v.bones[g]))
          var y = v.target
          p.target = n.findBone(y), p.local = i(v, 'local', !1), p.relative = i(v, 'relative', !1), p.offsetRotation = i(v, 'rotation', 0), p.offsetX = i(v, 'x', 0) * r, p.offsetY = i(v, 'y', 0) * r, p.offsetScaleX = i(v, 'scaleX', 0), p.offsetScaleY = i(v, 'scaleY', 0), p.offsetShearY = i(v, 'shearY', 0), p.mixRotate = i(v, 'mixRotate', 1), p.mixX = i(v, 'mixX', 1), p.mixY = i(v, 'mixY', p.mixX), p.mixScaleX = i(v, 'mixScaleX', 1), p.mixScaleY = i(v, 'mixScaleY', p.mixScaleX), p.mixShearY = i(v, 'mixShearY', 1), n.transformConstraints.push(p)
        }
      }
      if (a.path) {
        for (var o = 0; o < a.path.length; o++) {
          var v = a.path[o], p = new t.PathConstraintData(v.name)
          p.order = i(v, 'order', 0), p.skinRequired = i(v, 'skin', !1)
          for (var g = 0; g < v.bones.length; g++) p.bones.push(n.findBone(v.bones[g]))
          var y = v.target
          p.target = n.findSlot(y), p.positionMode = t.Utils.enumValue(t.PositionMode, i(v, 'positionMode', 'Percent')), p.spacingMode = t.Utils.enumValue(t.SpacingMode, i(v, 'spacingMode', 'Length')), p.rotateMode = t.Utils.enumValue(t.RotateMode, i(v, 'rotateMode', 'Tangent')), p.offsetRotation = i(v, 'rotation', 0), p.position = i(v, 'position', 0), p.positionMode == t.PositionMode.Fixed && (p.position *= r), p.spacing = i(v, 'spacing', 0), (p.spacingMode == t.SpacingMode.Length || p.spacingMode == t.SpacingMode.Fixed) && (p.spacing *= r), p.mixRotate = i(v, 'mixRotate', 1), p.mixX = i(v, 'mixX', 1), p.mixY = i(v, 'mixY', p.mixX), n.pathConstraints.push(p)
        }
      }
      if (a.skins) {
        for (var o = 0; o < a.skins.length; o++) {
          var _ = a.skins[o], x = new t.Skin(_.name)
          if (_.bones) for (var g = 0; g < _.bones.length; g++) x.bones.push(n.findBone(_.bones[g]))
          if (_.ik) for (var g = 0; g < _.ik.length; g++) x.constraints.push(n.findIkConstraint(_.ik[g]))
          if (_.transform) for (var g = 0; g < _.transform.length; g++) x.constraints.push(n.findTransformConstraint(_.transform[g]))
          if (_.path) for (var g = 0; g < _.path.length; g++) x.constraints.push(n.findPathConstraint(_.path[g]))
          for (var w in _.attachments) {
            var b = n.findSlot(w), d = _.attachments[w]
            for (var S in d) {
              var A = this.readAttachment(d[S], x, b.index, S, n)
              A && x.setAttachment(b.index, S, A)
            }
          }
          n.skins.push(x), 'default' == x.name && (n.defaultSkin = x)
        }
      }
      for (var o = 0, k = this.linkedMeshes.length; k > o; o++) {
        var T = this.linkedMeshes[o], x = T.skin ? n.findSkin(T.skin) : n.defaultSkin,
          M = x.getAttachment(T.slotIndex, T.parent)
        T.mesh.deformAttachment = T.inheritDeform ? M : T.mesh, T.mesh.setParentMesh(M), T.mesh.updateUVs()
      }
      if (this.linkedMeshes.length = 0, a.events) {
        for (var C in a.events) {
          var I = a.events[C], p = new t.EventData(C)
          p.intValue = i(I, 'int', 0), p.floatValue = i(I, 'float', 0), p.stringValue = i(I, 'string', ''), p.audioPath = i(I, 'audio', null), p.audioPath && (p.volume = i(I, 'volume', 1), p.balance = i(I, 'balance', 0)), n.events.push(p)
        }
      }
      if (a.animations) {
        for (var F in a.animations) {
          var Y = a.animations[F]
          this.readAnimation(Y, F, n)
        }
      }
      return n
    }, a.prototype.readAttachment = function (e, r, n, a, o) {
      var h = this.scale
      switch (a = i(e, 'name', a), i(e, 'type', 'region')) {
        case'region':
          var l = i(e, 'path', a), c = this.attachmentLoader.newRegionAttachment(r, a, l)
          if (!c) return null
          c.path = l, c.x = i(e, 'x', 0) * h, c.y = i(e, 'y', 0) * h, c.scaleX = i(e, 'scaleX', 1), c.scaleY = i(e, 'scaleY', 1), c.rotation = i(e, 'rotation', 0), c.width = e.width * h, c.height = e.height * h
          var p = i(e, 'color', null)
          return p && c.color.setFromString(p), c.updateOffset(), c
        case'boundingbox':
          var u = this.attachmentLoader.newBoundingBoxAttachment(r, a)
          if (!u) return null
          this.readVertices(e, u, e.vertexCount << 1)
          var p = i(e, 'color', null)
          return p && u.color.setFromString(p), u
        case'mesh':
        case'linkedmesh':
          var l = i(e, 'path', a), d = this.attachmentLoader.newMeshAttachment(r, a, l)
          if (!d) return null
          d.path = l
          var p = i(e, 'color', null)
          p && d.color.setFromString(p), d.width = i(e, 'width', 0) * h, d.height = i(e, 'height', 0) * h
          var f = i(e, 'parent', null)
          if (f) return this.linkedMeshes.push(new s(d, i(e, 'skin', null), n, f, i(e, 'deform', !0))), d
          var m = e.uvs
          return this.readVertices(e, d, m.length), d.triangles = e.triangles, d.regionUVs = m, d.updateUVs(), d.edges = i(e, 'edges', null), d.hullLength = 2 * i(e, 'hull', 0), d
        case'path':
          var l = this.attachmentLoader.newPathAttachment(r, a)
          if (!l) return null
          l.closed = i(e, 'closed', !1), l.constantSpeed = i(e, 'constantSpeed', !0)
          var v = e.vertexCount
          this.readVertices(e, l, v << 1)
          for (var g = t.Utils.newArray(v / 3, 0), y = 0; y < e.lengths.length; y++) g[y] = e.lengths[y] * h
          l.lengths = g
          var p = i(e, 'color', null)
          return p && l.color.setFromString(p), l
        case'point':
          var _ = this.attachmentLoader.newPointAttachment(r, a)
          if (!_) return null
          _.x = i(e, 'x', 0) * h, _.y = i(e, 'y', 0) * h, _.rotation = i(e, 'rotation', 0)
          var p = i(e, 'color', null)
          return p && _.color.setFromString(p), _
        case'clipping':
          var x = this.attachmentLoader.newClippingAttachment(r, a)
          if (!x) return null
          var w = i(e, 'end', null)
          w && (x.endSlot = o.findSlot(w))
          var v = e.vertexCount
          this.readVertices(e, x, v << 1)
          var p = i(e, 'color', null)
          return p && x.color.setFromString(p), x
      }
      return null
    }, a.prototype.readVertices = function (e, r, n) {
      var i = this.scale
      r.worldVerticesLength = n
      var a = e.vertices
      if (n == a.length) {
        var s = t.Utils.toFloatArray(a)
        if (1 != i) for (var o = 0, h = a.length; h > o; o++) s[o] *= i
        return void (r.vertices = s)
      }
      for (var l = new Array, c = new Array, o = 0, h = a.length; h > o;) {
        var p = a[o++]
        c.push(p)
        for (var u = o + 4 * p; u > o; o += 4) c.push(a[o]), l.push(a[o + 1] * i), l.push(a[o + 2] * i), l.push(a[o + 3])
      }
      r.bones = c, r.vertices = t.Utils.toFloatArray(l)
    }, a.prototype.readAnimation = function (a, s, o) {
      var h = this.scale, l = new Array
      if (a.slots) {
        for (var c in a.slots) {
          var p = a.slots[c], u = o.findSlot(c).index
          for (var d in p) {
            var f = p[d]
            if (f) {
              var m = f.length
              if ('attachment' == d) {
                for (var v = new t.AttachmentTimeline(m, u), g = 0; m > g; g++) {
                  var y = f[g]
                  v.setFrame(g, i(y, 'time', 0), y.name)
                }
                l.push(v)
              } else if ('rgba' == d) {
                for (var v = new t.RGBATimeline(m, m << 2, u), y = f[0], _ = i(y, 'time', 0), x = t.Color.fromString(y.color), w = 0, b = 0; ; w++) {
                  v.setFrame(w, _, x.r, x.g, x.b, x.a)
                  var S = f[w + 1]
                  if (!S) {
                    v.shrink(b)
                    break
                  }
                  var A = i(S, 'time', 0), k = t.Color.fromString(S.color), T = y.curve
                  T && (b = n(T, v, b, w, 0, _, A, x.r, k.r, 1), b = n(T, v, b, w, 1, _, A, x.g, k.g, 1), b = n(T, v, b, w, 2, _, A, x.b, k.b, 1), b = n(T, v, b, w, 3, _, A, x.a, k.a, 1)), _ = A, x = k, y = S
                }
                l.push(v)
              } else if ('rgb' == d) {
                for (var v = new t.RGBTimeline(m, 3 * m, u), y = f[0], _ = i(y, 'time', 0), x = t.Color.fromString(y.color), M = 0, b = 0; ; M++) {
                  v.setFrame(M, _, x.r, x.g, x.b)
                  var S = f[M + 1]
                  if (!S) {
                    v.shrink(b)
                    break
                  }
                  var A = i(S, 'time', 0), k = t.Color.fromString(S.color), T = y.curve
                  T && (b = n(T, v, b, M, 0, _, A, x.r, k.r, 1), b = n(T, v, b, M, 1, _, A, x.g, k.g, 1), b = n(T, v, b, M, 2, _, A, x.b, k.b, 1)), _ = A, x = k, y = S
                }
                l.push(v)
              } else if ('alpha' == d) {
                l.push(e(f, new t.AlphaTimeline(m, m, u), 0, 1))
              } else if ('rgba2' == d) {
                for (var v = new t.RGBA2Timeline(m, 7 * m, u), y = f[0], _ = i(y, 'time', 0), x = t.Color.fromString(y.light), C = t.Color.fromString(y.dark), I = 0, b = 0; ; I++) {
                  v.setFrame(I, _, x.r, x.g, x.b, x.a, C.r, C.g, C.b)
                  var S = f[I + 1]
                  if (!S) {
                    v.shrink(b)
                    break
                  }
                  var A = i(S, 'time', 0), k = t.Color.fromString(S.light), F = t.Color.fromString(S.dark), T = y.curve
                  T && (b = n(T, v, b, I, 0, _, A, x.r, k.r, 1), b = n(T, v, b, I, 1, _, A, x.g, k.g, 1), b = n(T, v, b, I, 2, _, A, x.b, k.b, 1), b = n(T, v, b, I, 3, _, A, x.a, k.a, 1), b = n(T, v, b, I, 4, _, A, C.r, F.r, 1), b = n(T, v, b, I, 5, _, A, C.g, F.g, 1), b = n(T, v, b, I, 6, _, A, C.b, F.b, 1)), _ = A, x = k, C = F, y = S
                }
                l.push(v)
              } else if ('rgb2' == d) {
                for (var v = new t.RGB2Timeline(m, 6 * m, u), y = f[0], _ = i(y, 'time', 0), x = t.Color.fromString(y.light), C = t.Color.fromString(y.dark), Y = 0, b = 0; ; Y++) {
                  v.setFrame(Y, _, x.r, x.g, x.b, C.r, C.g, C.b)
                  var S = f[Y + 1]
                  if (!S) {
                    v.shrink(b)
                    break
                  }
                  var A = i(S, 'time', 0), k = t.Color.fromString(S.light), F = t.Color.fromString(S.dark), T = y.curve
                  T && (b = n(T, v, b, Y, 0, _, A, x.r, k.r, 1), b = n(T, v, b, Y, 1, _, A, x.g, k.g, 1), b = n(T, v, b, Y, 2, _, A, x.b, k.b, 1), b = n(T, v, b, Y, 3, _, A, C.r, F.r, 1), b = n(T, v, b, Y, 4, _, A, C.g, F.g, 1), b = n(T, v, b, Y, 5, _, A, C.b, F.b, 1)), _ = A, x = k, C = F, y = S
                }
                l.push(v)
              }
            }
          }
        }
      }
      if (a.bones) {
        for (var R in a.bones) {
          var X = a.bones[R], E = o.findBone(R).index
          for (var d in X) {
            var f = X[d], U = f.length
            if (0 != U) {
              if ('rotate' === d) {
                l.push(e(f, new t.RotateTimeline(U, U, E), 0, 1))
              } else if ('translate' === d) {
                var v = new t.TranslateTimeline(U, U << 1, E)
                l.push(r(f, v, 'x', 'y', 0, h))
              } else if ('translatex' === d) {
                var v = new t.TranslateXTimeline(U, U, E)
                l.push(e(f, v, 0, h))
              } else if ('translatey' === d) {
                var v = new t.TranslateYTimeline(U, U, E)
                l.push(e(f, v, 0, h))
              } else if ('scale' === d) {
                var v = new t.ScaleTimeline(U, U << 1, E)
                l.push(r(f, v, 'x', 'y', 1, 1))
              } else if ('scalex' === d) {
                var v = new t.ScaleXTimeline(U, U, E)
                l.push(e(f, v, 1, 1))
              } else if ('scaley' === d) {
                var v = new t.ScaleYTimeline(U, U, E)
                l.push(e(f, v, 1, 1))
              } else if ('shear' === d) {
                var v = new t.ShearTimeline(U, U << 1, E)
                l.push(r(f, v, 'x', 'y', 0, 1))
              } else if ('shearx' === d) {
                var v = new t.ShearXTimeline(U, U, E)
                l.push(e(f, v, 0, 1))
              } else if ('sheary' === d) {
                var v = new t.ShearYTimeline(U, U, E)
                l.push(e(f, v, 0, 1))
              }
            }
          }
        }
      }
      if (a.ik) {
        for (var B in a.ik) {
          var P = a.ik[B], y = P[0]
          if (y) {
            for (var D = o.findIkConstraint(B), V = o.ikConstraints.indexOf(D), v = new t.IkConstraintTimeline(P.length, P.length << 1, V), _ = i(y, 'time', 0), L = i(y, 'mix', 1), N = i(y, 'softness', 0) * h, O = 0, b = 0; ; O++) {
              v.setFrame(O, _, L, N, i(y, 'bendPositive', !0) ? 1 : -1, i(y, 'compress', !1), i(y, 'stretch', !1))
              var S = P[O + 1]
              if (!S) {
                v.shrink(b)
                break
              }
              var A = i(S, 'time', 0), W = i(S, 'mix', 1), q = i(S, 'softness', 0) * h, T = y.curve
              T && (b = n(T, v, b, O, 0, _, A, L, W, 1), b = n(T, v, b, O, 1, _, A, N, q, h)), _ = A, L = W, N = q, y = S
            }
            l.push(v)
          }
        }
      }
      if (a.transform) {
        for (var B in a.transform) {
          var f = a.transform[B], y = f[0]
          if (y) {
            for (var D = o.findTransformConstraint(B), V = o.transformConstraints.indexOf(D), v = new t.TransformConstraintTimeline(f.length, 6 * f.length, V), _ = i(y, 'time', 0), z = i(y, 'mixRotate', 1), H = i(y, 'mixX', 1), G = i(y, 'mixY', H), j = i(y, 'mixScaleX', 1), J = i(y, 'mixScaleY', j), $ = i(y, 'mixShearY', 1), Q = 0, b = 0; ; Q++) {
              v.setFrame(Q, _, z, H, G, j, J, $)
              var S = f[Q + 1]
              if (!S) {
                v.shrink(b)
                break
              }
              var A = i(S, 'time', 0), K = i(S, 'mixRotate', 1), Z = i(S, 'mixX', 1), te = i(S, 'mixY', Z),
                ee = i(S, 'mixScaleX', 1), re = i(S, 'mixScaleY', ee), ne = i(S, 'mixShearY', 1), T = y.curve
              T && (b = n(T, v, b, Q, 0, _, A, z, K, 1), b = n(T, v, b, Q, 1, _, A, H, Z, 1), b = n(T, v, b, Q, 2, _, A, G, te, 1), b = n(T, v, b, Q, 3, _, A, j, ee, 1), b = n(T, v, b, Q, 4, _, A, J, re, 1), b = n(T, v, b, Q, 5, _, A, $, ne, 1)), _ = A, z = K, H = Z, G = te, j = ee, J = re, j = ee, y = S
            }
            l.push(v)
          }
        }
      }
      if (a.path) {
        for (var B in a.path) {
          var P = a.path[B], D = o.findPathConstraint(B), V = o.pathConstraints.indexOf(D)
          for (var d in P) {
            var f = P[d], y = f[0]
            if (y) {
              var ie = f.length
              if ('position' === d) {
                var v = new t.PathConstraintPositionTimeline(ie, ie, V)
                l.push(e(f, v, 0, D.positionMode == t.PositionMode.Fixed ? h : 1))
              } else if ('spacing' === d) {
                var v = new t.PathConstraintSpacingTimeline(ie, ie, V)
                l.push(e(f, v, 0, D.spacingMode == t.SpacingMode.Length || D.spacingMode == t.SpacingMode.Fixed ? h : 1))
              } else if ('mix' === d) {
                for (var v = new t.PathConstraintMixTimeline(ie, 3 * ie, V), _ = i(y, 'time', 0), z = i(y, 'mixRotate', 1), H = i(y, 'mixX', 1), G = i(y, 'mixY', H), ae = 0, b = 0; ; ae++) {
                  v.setFrame(ae, _, z, H, G)
                  var S = f[ae + 1]
                  if (!S) {
                    v.shrink(b)
                    break
                  }
                  var A = i(S, 'time', 0), K = i(S, 'mixRotate', 1), Z = i(S, 'mixX', 1), te = i(S, 'mixY', Z),
                    T = y.curve
                  T && (b = n(T, v, b, ae, 0, _, A, z, K, 1), b = n(T, v, b, ae, 1, _, A, H, Z, 1), b = n(T, v, b, ae, 2, _, A, G, te, 1)), _ = A, z = K, H = Z, G = te, y = S
                }
                l.push(v)
              }
            }
          }
        }
      }
      if (a.deform) {
        for (var se in a.deform) {
          var oe = a.deform[se], he = o.findSkin(se)
          for (var c in oe) {
            var p = oe[c], u = o.findSlot(c).index
            for (var d in p) {
              var f = p[d], y = f[0]
              if (y) {
                for (var le = he.getAttachment(u, d), ce = le.bones, pe = le.vertices, ue = ce ? pe.length / 3 * 2 : pe.length, v = new t.DeformTimeline(f.length, f.length, u, le), _ = i(y, 'time', 0), de = 0, b = 0; ; de++) {
                  var fe = void 0, me = i(y, 'vertices', null)
                  if (me) {
                    fe = t.Utils.newFloatArray(ue)
                    var ve = i(y, 'offset', 0)
                    if (t.Utils.arrayCopy(me, 0, fe, ve, me.length), 1 != h) for (var ge = ve, ye = ge + me.length; ye > ge; ge++) fe[ge] *= h
                    if (!ce) for (var ge = 0; ue > ge; ge++) fe[ge] += pe[ge]
                  } else {
                    fe = ce ? t.Utils.newFloatArray(ue) : pe
                  }
                  v.setFrame(de, _, fe)
                  var S = f[de + 1]
                  if (!S) {
                    v.shrink(b)
                    break
                  }
                  var A = i(S, 'time', 0), T = y.curve
                  T && (b = n(T, v, b, de, 0, _, A, 0, 1, 1)), _ = A, y = S
                }
                l.push(v)
              }
            }
          }
        }
      }
      if (a.drawOrder) {
        for (var v = new t.DrawOrderTimeline(a.drawOrder.length), _e = o.slots.length, xe = 0, ge = 0; ge < a.drawOrder.length; ge++, xe++) {
          var we = a.drawOrder[ge], be = null, Se = i(we, 'offsets', null)
          if (Se) {
            be = t.Utils.newArray(_e, -1)
            for (var Ae = t.Utils.newArray(_e - Se.length, 0), ke = 0, Te = 0, Me = 0; Me < Se.length; Me++) {
              for (var Ce = Se[Me], u = o.findSlot(Ce.slot).index; ke != u;) Ae[Te++] = ke++
              be[ke + Ce.offset] = ke++
            }
            for (; _e > ke;) Ae[Te++] = ke++
            for (var Me = _e - 1; Me >= 0; Me--) -1 == be[Me] && (be[Me] = Ae[--Te])
          }
          v.setFrame(xe, i(we, 'time', 0), be)
        }
        l.push(v)
      }
      if (a.events) {
        for (var v = new t.EventTimeline(a.events.length), Ie = 0, ge = 0; ge < a.events.length; ge++, Ie++) {
          var Fe = a.events[ge], Ye = o.findEvent(Fe.name),
            Re = new t.Event(t.Utils.toSinglePrecision(i(Fe, 'time', 0)), Ye)
          Re.intValue = i(Fe, 'int', Ye.intValue), Re.floatValue = i(Fe, 'float', Ye.floatValue), Re.stringValue = i(Fe, 'string', Ye.stringValue), Re.data.audioPath && (Re.volume = i(Fe, 'volume', 1), Re.balance = i(Fe, 'balance', 0)), v.setFrame(Ie, Re)
        }
        l.push(v)
      }
      for (var Xe = 0, ge = 0, ye = l.length; ye > ge; ge++) Xe = Math.max(Xe, l[ge].getDuration())
      o.animations.push(new t.Animation(s, l, Xe))
    }, a
  }()
  t.SkeletonJson = a, __reflect(a.prototype, 'spine.SkeletonJson')
  var s = function () {
    function t (t, e, r, n, i) {
      this.mesh = t, this.skin = e, this.slotIndex = r, this.parent = n, this.inheritDeform = i
    }

    return t
  }()
  __reflect(s.prototype, 'LinkedMesh')
}(spine || (spine = {}))
var __reflect = this && this.__reflect || function (t, e, r) {
  t.__class__ = e, r ? r.push(e) : r = [e], t.__types__ = t.__types__ ? r.concat(t.__types__) : r
}, spine
!function (t) {
  var e = function () {
    function t (t, e, r) {
      void 0 === t && (t = 0), void 0 === e && (e = null), void 0 === r && (r = null), this.slotIndex = t, this.name = e, this.attachment = r
    }

    return t
  }()
  t.SkinEntry = e, __reflect(e.prototype, 'spine.SkinEntry')
  var r = function () {
    function r (t) {
      if (this.name = null, this.attachments = new Array, this.bones = Array(), this.constraints = new Array, !t) throw new Error('name cannot be null.')
      this.name = t
    }

    return r.prototype.setAttachment = function (t, e, r) {
      if (!r) throw new Error('attachment cannot be null.')
      var n = this.attachments
      t >= n.length && (n.length = t + 1), n[t] || (n[t] = {}), n[t][e] = r
    }, r.prototype.addSkin = function (t) {
      for (var e = 0; e < t.bones.length; e++) {
        for (var r = t.bones[e], n = !1, i = 0; i < this.bones.length; i++) {
          if (this.bones[i] == r) {
            n = !0
            break
          }
        }
        n || this.bones.push(r)
      }
      for (var e = 0; e < t.constraints.length; e++) {
        for (var a = t.constraints[e], n = !1, i = 0; i < this.constraints.length; i++) {
          if (this.constraints[i] == a) {
            n = !0
            break
          }
        }
        n || this.constraints.push(a)
      }
      for (var s = t.getAttachments(), e = 0; e < s.length; e++) {
        var o = s[e]
        this.setAttachment(o.slotIndex, o.name, o.attachment)
      }
    }, r.prototype.copySkin = function (e) {
      for (var r = 0; r < e.bones.length; r++) {
        for (var n = e.bones[r], i = !1, a = 0; a < this.bones.length; a++) {
          if (this.bones[a] == n) {
            i = !0
            break
          }
        }
        i || this.bones.push(n)
      }
      for (var r = 0; r < e.constraints.length; r++) {
        for (var s = e.constraints[r], i = !1, a = 0; a < this.constraints.length; a++) {
          if (this.constraints[a] == s) {
            i = !0
            break
          }
        }
        i || this.constraints.push(s)
      }
      for (var o = e.getAttachments(), r = 0; r < o.length; r++) {
        var h = o[r]
        h.attachment && (h.attachment instanceof t.MeshAttachment ? (h.attachment = h.attachment.newLinkedMesh(), this.setAttachment(h.slotIndex, h.name, h.attachment)) : (h.attachment = h.attachment.copy(), this.setAttachment(h.slotIndex, h.name, h.attachment)))
      }
    }, r.prototype.getAttachment = function (t, e) {
      var r = this.attachments[t]
      return r ? r[e] : null
    }, r.prototype.removeAttachment = function (t, e) {
      var r = this.attachments[t]
      r && (r[e] = null)
    }, r.prototype.getAttachments = function () {
      for (var t = new Array, r = 0; r < this.attachments.length; r++) {
        var n = this.attachments[r]
        if (n) {
          for (var i in n) {
            var a = n[i]
            a && t.push(new e(r, i, a))
          }
        }
      }
      return t
    }, r.prototype.getAttachmentsForSlot = function (t, r) {
      var n = this.attachments[t]
      if (n) {
        for (var i in n) {
          var a = n[i]
          a && r.push(new e(t, i, a))
        }
      }
    }, r.prototype.clear = function () {
      this.attachments.length = 0, this.bones.length = 0, this.constraints.length = 0
    }, r.prototype.attachAll = function (t, e) {
      for (var r = 0, n = 0; n < t.slots.length; n++) {
        var i = t.slots[n], a = i.getAttachment()
        if (a && r < e.attachments.length) {
          var s = e.attachments[r]
          for (var o in s) {
            var h = s[o]
            if (a == h) {
              var l = this.getAttachment(r, o)
              l && i.setAttachment(l)
              break
            }
          }
        }
        r++
      }
    }, r
  }()
  t.Skin = r, __reflect(r.prototype, 'spine.Skin')
}(spine || (spine = {}))
var __reflect = this && this.__reflect || function (t, e, r) {
  t.__class__ = e, r ? r.push(e) : r = [e], t.__types__ = t.__types__ ? r.concat(t.__types__) : r
}, spine
!function (t) {
  var e = function () {
    function e (e, r) {
      if (this.data = null, this.bone = null, this.color = null, this.darkColor = null, this.attachment = null, this.attachmentTime = 0, this.attachmentState = 0, this.deform = new Array, !e) throw new Error('data cannot be null.')
      if (!r) throw new Error('bone cannot be null.')
      this.data = e, this.bone = r, this.color = new t.Color, this.darkColor = e.darkColor ? new t.Color : null, this.setToSetupPose()
    }

    return e.prototype.getSkeleton = function () {
      return this.bone.skeleton
    }, e.prototype.getAttachment = function () {
      return this.attachment
    }, e.prototype.setAttachment = function (e) {
      this.attachment != e && (e instanceof t.VertexAttachment && this.attachment instanceof t.VertexAttachment && e.deformAttachment == this.attachment.deformAttachment || (this.deform.length = 0), this.attachment = e, this.attachmentTime = this.bone.skeleton.time)
    }, e.prototype.setAttachmentTime = function (t) {
      this.attachmentTime = this.bone.skeleton.time - t
    }, e.prototype.getAttachmentTime = function () {
      return this.bone.skeleton.time - this.attachmentTime
    }, e.prototype.setToSetupPose = function () {
      this.color.setFromColor(this.data.color), this.darkColor && this.darkColor.setFromColor(this.data.darkColor), this.data.attachmentName ? (this.attachment = null, this.setAttachment(this.bone.skeleton.getAttachment(this.data.index, this.data.attachmentName))) : this.attachment = null
    }, e
  }()
  t.Slot = e, __reflect(e.prototype, 'spine.Slot')
}(spine || (spine = {}))
var __reflect = this && this.__reflect || function (t, e, r) {
  t.__class__ = e, r ? r.push(e) : r = [e], t.__types__ = t.__types__ ? r.concat(t.__types__) : r
}, spine
!function (t) {
  var e = function () {
    function e (e) {
      this.data = null, this.tracks = new Array, this.timeScale = 1, this.unkeyedState = 0, this.events = new Array, this.listeners = new Array, this.queue = new n(this), this.propertyIDs = new t.StringSet, this.animationsChanged = !1, this.trackEntryPool = new t.Pool(function () {
        return new r
      }), this.data = e
    }

    return e.emptyAnimation = function () {
      return s || (s = new t.Animation('<empty>', [], 0)), s
    }, e.prototype.update = function (t) {
      t *= this.timeScale
      for (var e = this.tracks, r = 0, n = e.length; n > r; r++) {
        var i = e[r]
        if (i) {
          i.animationLast = i.nextAnimationLast, i.trackLast = i.nextTrackLast
          var a = t * i.timeScale
          if (i.delay > 0) {
            if (i.delay -= a, i.delay > 0) continue
            a = -i.delay, i.delay = 0
          }
          var s = i.next
          if (s) {
            var o = i.trackLast - s.delay
            if (o >= 0) {
              for (s.delay = 0, s.trackTime += 0 == i.timeScale ? 0 : (o / i.timeScale + t) * s.timeScale, i.trackTime += a, this.setCurrent(r, s, !0); s.mixingFrom;) s.mixTime += t, s = s.mixingFrom
              continue
            }
          } else if (i.trackLast >= i.trackEnd && !i.mixingFrom) {
            e[r] = null, this.queue.end(i), this.clearNext(i)
            continue
          }
          if (i.mixingFrom && this.updateMixingFrom(i, t)) {
            var h = i.mixingFrom
            for (i.mixingFrom = null, h && (h.mixingTo = null); h;) this.queue.end(h), h = h.mixingFrom
          }
          i.trackTime += a
        }
      }
      this.queue.drain()
    }, e.prototype.updateMixingFrom = function (t, e) {
      var r = t.mixingFrom
      if (!r) return !0
      var n = this.updateMixingFrom(r, e)
      return r.animationLast = r.nextAnimationLast, r.trackLast = r.nextTrackLast, t.mixTime > 0 && t.mixTime >= t.mixDuration ? ((0 == r.totalAlpha || 0 == t.mixDuration) && (t.mixingFrom = r.mixingFrom, r.mixingFrom && (r.mixingFrom.mixingTo = t), t.interruptAlpha = r.interruptAlpha, this.queue.end(r)), n) : (r.trackTime += e * r.timeScale, t.mixTime += e, !1)
    }, e.prototype.apply = function (e) {
      if (!e) throw new Error('skeleton cannot be null.')
      this.animationsChanged && this._animationsChanged()
      for (var r = this.events, n = this.tracks, i = !1, a = 0, s = n.length; s > a; a++) {
        var o = n[a]
        if (o && !(o.delay > 0)) {
          i = !0
          var h = 0 == a ? t.MixBlend.first : o.mixBlend, l = o.alpha
          o.mixingFrom ? l *= this.applyMixingFrom(o, e, h) : o.trackTime >= o.trackEnd && !o.next && (l = 0)
          var c = o.animationLast, p = o.getAnimationTime(), u = p, d = r
          o.reverse && (u = o.animation.duration - u, d = null)
          var f = o.animation.timelines, m = f.length
          if (0 == a && 1 == l || h == t.MixBlend.add) {
            for (var v = 0; m > v; v++) {
              t.Utils.webkit602BugfixHelper(l, h)
              var g = f[v]
              g instanceof t.AttachmentTimeline ? this.applyAttachmentTimeline(g, e, u, h, !0) : g.apply(e, c, u, d, l, h, t.MixDirection.mixIn)
            }
          } else {
            var y = o.timelineMode, _ = o.timelinesRotation.length != m << 1
            _ && (o.timelinesRotation.length = m << 1)
            for (var v = 0; m > v; v++) {
              var x = f[v], w = y[v] == t.SUBSEQUENT ? h : t.MixBlend.setup
              x instanceof t.RotateTimeline ? this.applyRotateTimeline(x, e, u, l, w, o.timelinesRotation, v << 1, _) : x instanceof t.AttachmentTimeline ? this.applyAttachmentTimeline(x, e, u, h, !0) : (t.Utils.webkit602BugfixHelper(l, h), x.apply(e, c, u, d, l, w, t.MixDirection.mixIn))
            }
          }
          this.queueEvents(o, p), r.length = 0, o.nextAnimationLast = p, o.nextTrackLast = o.trackTime
        }
      }
      for (var b = this.unkeyedState + t.SETUP, S = e.slots, A = 0, k = e.slots.length; k > A; A++) {
        var T = S[A]
        if (T.attachmentState == b) {
          var M = T.data.attachmentName
          T.setAttachment(M ? e.getAttachment(T.data.index, M) : null)
        }
      }
      return this.unkeyedState += 2, this.queue.drain(), i
    }, e.prototype.applyMixingFrom = function (e, r, n) {
      var i = e.mixingFrom
      i.mixingFrom && this.applyMixingFrom(i, r, n)
      var a = 0
      0 == e.mixDuration ? (a = 1, n == t.MixBlend.first && (n = t.MixBlend.setup)) : (a = e.mixTime / e.mixDuration, a > 1 && (a = 1), n != t.MixBlend.first && (n = i.mixBlend))
      var s = a < i.attachmentThreshold, o = a < i.drawOrderThreshold, h = i.animation.timelines, l = h.length,
        c = i.alpha * e.interruptAlpha, p = c * (1 - a), u = i.animationLast, d = i.getAnimationTime(), f = d, m = null
      if (i.reverse ? f = i.animation.duration - f : a < i.eventThreshold && (m = this.events), n == t.MixBlend.add) {
        for (var v = 0; l > v; v++) h[v].apply(r, u, f, m, p, n, t.MixDirection.mixOut)
      } else {
        var g = i.timelineMode, y = i.timelineHoldMix, _ = i.timelinesRotation.length != l << 1
        _ && (i.timelinesRotation.length = l << 1), i.totalAlpha = 0
        for (var v = 0; l > v; v++) {
          var x = h[v], w = t.MixDirection.mixOut, b = void 0, S = 0
          switch (g[v]) {
            case t.SUBSEQUENT:
              if (!o && x instanceof t.DrawOrderTimeline) continue
              b = n, S = p
              break
            case t.FIRST:
              b = t.MixBlend.setup, S = p
              break
            case t.HOLD_SUBSEQUENT:
              b = n, S = c
              break
            case t.HOLD_FIRST:
              b = t.MixBlend.setup, S = c
              break
            default:
              b = t.MixBlend.setup
              var A = y[v]
              S = c * Math.max(0, 1 - A.mixTime / A.mixDuration)
          }
          i.totalAlpha += S, x instanceof t.RotateTimeline ? this.applyRotateTimeline(x, r, f, S, b, i.timelinesRotation, v << 1, _) : x instanceof t.AttachmentTimeline ? this.applyAttachmentTimeline(x, r, f, b, s) : (t.Utils.webkit602BugfixHelper(S, n), o && x instanceof t.DrawOrderTimeline && b == t.MixBlend.setup && (w = t.MixDirection.mixIn), x.apply(r, u, f, m, S, b, w))
        }
      }
      return e.mixDuration > 0 && this.queueEvents(i, d), this.events.length = 0, i.nextAnimationLast = d, i.nextTrackLast = i.trackTime, a
    }, e.prototype.applyAttachmentTimeline = function (e, r, n, i, a) {
      var s = r.slots[e.slotIndex]
      s.bone.active && (n < e.frames[0] ? (i == t.MixBlend.setup || i == t.MixBlend.first) && this.setAttachment(r, s, s.data.attachmentName, a) : this.setAttachment(r, s, e.attachmentNames[t.Timeline.search1(e.frames, n)], a), s.attachmentState <= this.unkeyedState && (s.attachmentState = this.unkeyedState + t.SETUP))
    }, e.prototype.setAttachment = function (e, r, n, i) {
      r.setAttachment(n ? e.getAttachment(r.data.index, n) : null), i && (r.attachmentState = this.unkeyedState + t.CURRENT)
    }, e.prototype.applyRotateTimeline = function (e, r, n, i, a, s, o, h) {
      if (h && (s[o] = 0), 1 == i) return void e.apply(r, 0, n, null, 1, a, t.MixDirection.mixIn)
      var l = r.bones[e.boneIndex]
      if (l.active) {
        var c = e.frames, p = 0, u = 0
        if (n < c[0]) {
          switch (a) {
            case t.MixBlend.setup:
              l.rotation = l.data.rotation
            default:
              return
            case t.MixBlend.first:
              p = l.rotation, u = l.data.rotation
          }
        } else {
          p = a == t.MixBlend.setup ? l.data.rotation : l.rotation, u = l.data.rotation + e.getCurveValue(n)
        }
        var d = 0, f = u - p
        if (f -= 360 * (16384 - (16384.499999999996 - f / 360 | 0)), 0 == f) {
          d = s[o]
        } else {
          var m = 0, v = 0
          h ? (m = 0, v = f) : (m = s[o], v = s[o + 1])
          var g = f > 0, y = m >= 0
          t.MathUtils.signum(v) != t.MathUtils.signum(f) && Math.abs(v) <= 90 && (Math.abs(m) > 180 && (m += 360 * t.MathUtils.signum(m)), y = g), d = f + m - m % 360, y != g && (d += 360 * t.MathUtils.signum(m)), s[o] = d
        }
        s[o + 1] = f, l.rotation = p + d * i
      }
    }, e.prototype.queueEvents = function (t, e) {
      for (var r = t.animationStart, n = t.animationEnd, i = n - r, a = t.trackLast % i, s = this.events, o = 0, h = s.length; h > o; o++) {
        var l = s[o]
        if (l.time < a) break
        l.time > n || this.queue.event(t, l)
      }
      var c = !1
      for (c = t.loop ? 0 == i || a > t.trackTime % i : e >= n && t.animationLast < n, c && this.queue.complete(t); h > o; o++) {
        var p = s[o]
        p.time < r || this.queue.event(t, p)
      }
    }, e.prototype.clearTracks = function () {
      var t = this.queue.drainDisabled
      this.queue.drainDisabled = !0
      for (var e = 0, r = this.tracks.length; r > e; e++) this.clearTrack(e)
      this.tracks.length = 0, this.queue.drainDisabled = t, this.queue.drain()
    }, e.prototype.clearTrack = function (t) {
      if (!(t >= this.tracks.length)) {
        var e = this.tracks[t]
        if (e) {
          this.queue.end(e), this.clearNext(e)
          for (var r = e; ;) {
            var n = r.mixingFrom
            if (!n) break
            this.queue.end(n), r.mixingFrom = null, r.mixingTo = null, r = n
          }
          this.tracks[e.trackIndex] = null, this.queue.drain()
        }
      }
    }, e.prototype.setCurrent = function (t, e, r) {
      var n = this.expandToIndex(t)
      this.tracks[t] = e, e.previous = null, n && (r && this.queue.interrupt(n), e.mixingFrom = n, n.mixingTo = e, e.mixTime = 0, n.mixingFrom && n.mixDuration > 0 && (e.interruptAlpha *= Math.min(1, n.mixTime / n.mixDuration)), n.timelinesRotation.length = 0), this.queue.start(e)
    }, e.prototype.setAnimation = function (t, e, r) {
      void 0 === r && (r = !1)
      var n = this.data.skeletonData.findAnimation(e)
      if (!n) throw new Error('Animation not found: ' + e)
      return this.setAnimationWith(t, n, r)
    }, e.prototype.setAnimationWith = function (t, e, r) {
      if (void 0 === r && (r = !1), !e) throw new Error('animation cannot be null.')
      var n = !0, i = this.expandToIndex(t)
      i && (-1 == i.nextTrackLast ? (this.tracks[t] = i.mixingFrom, this.queue.interrupt(i), this.queue.end(i), this.clearNext(i), i = i.mixingFrom, n = !1) : this.clearNext(i))
      var a = this.trackEntry(t, e, r, i)
      return this.setCurrent(t, a, n), this.queue.drain(), a
    }, e.prototype.addAnimation = function (t, e, r, n) {
      void 0 === r && (r = !1), void 0 === n && (n = 0)
      var i = this.data.skeletonData.findAnimation(e)
      if (!i) throw new Error('Animation not found: ' + e)
      return this.addAnimationWith(t, i, r, n)
    }, e.prototype.addAnimationWith = function (t, e, r, n) {
      if (void 0 === r && (r = !1), void 0 === n && (n = 0), !e) throw new Error('animation cannot be null.')
      var i = this.expandToIndex(t)
      if (i) for (; i.next;) i = i.next
      var a = this.trackEntry(t, e, r, i)
      return i ? (i.next = a, a.previous = i, 0 >= n && (n += i.getTrackComplete() - a.mixDuration)) : (this.setCurrent(t, a, !0), this.queue.drain()), a.delay = n, a
    }, e.prototype.setEmptyAnimation = function (t, r) {
      void 0 === r && (r = 0)
      var n = this.setAnimationWith(t, e.emptyAnimation(), !1)
      return n.mixDuration = r, n.trackEnd = r, n
    }, e.prototype.addEmptyAnimation = function (t, r, n) {
      void 0 === r && (r = 0), void 0 === n && (n = 0)
      var i = this.addAnimationWith(t, e.emptyAnimation(), !1, n)
      return 0 >= n && (i.delay += i.mixDuration - r), i.mixDuration = r, i.trackEnd = r, i
    }, e.prototype.setEmptyAnimations = function (t) {
      void 0 === t && (t = 0)
      var e = this.queue.drainDisabled
      this.queue.drainDisabled = !0
      for (var r = 0, n = this.tracks.length; n > r; r++) {
        var i = this.tracks[r]
        i && this.setEmptyAnimation(i.trackIndex, t)
      }
      this.queue.drainDisabled = e, this.queue.drain()
    }, e.prototype.expandToIndex = function (e) {
      return e < this.tracks.length ? this.tracks[e] : (t.Utils.ensureArrayCapacity(this.tracks, e + 1, null), this.tracks.length = e + 1, null)
    }, e.prototype.trackEntry = function (e, r, n, i) {
      var a = this.trackEntryPool.obtain()
      return a.reset(), a.trackIndex = e, a.animation = r, a.loop = n, a.holdPrevious = !1, a.eventThreshold = 0, a.attachmentThreshold = 0, a.drawOrderThreshold = 0, a.animationStart = 0, a.animationEnd = r.duration, a.animationLast = -1, a.nextAnimationLast = -1, a.delay = 0, a.trackTime = 0, a.trackLast = -1, a.nextTrackLast = -1, a.trackEnd = Number.MAX_VALUE, a.timeScale = 1, a.alpha = 1, a.interruptAlpha = 1, a.mixTime = 0, a.mixDuration = i ? this.data.getMix(i.animation, r) : 0, a.mixBlend = t.MixBlend.replace, a
    }, e.prototype.clearNext = function (t) {
      for (var e = t.next; e;) this.queue.dispose(e), e = e.next
      t.next = null
    }, e.prototype._animationsChanged = function () {
      this.animationsChanged = !1, this.propertyIDs.clear()
      for (var e = this.tracks, r = 0, n = e.length; n > r; r++) {
        var i = e[r]
        if (i) {
          for (; i.mixingFrom;) i = i.mixingFrom
          do i.mixingTo && i.mixBlend == t.MixBlend.add || this.computeHold(i), i = i.mixingTo while (i)
        }
      }
    }, e.prototype.computeHold = function (e) {
      var r = e.mixingTo, n = e.animation.timelines, i = e.animation.timelines.length, a = e.timelineMode
      a.length = i
      var s = e.timelineHoldMix
      s.length = 0
      var o = this.propertyIDs
      if (r && r.holdPrevious) {
        for (var h = 0; i > h; h++) a[h] = o.addAll(n[h].getPropertyIds()) ? t.HOLD_FIRST : t.HOLD_SUBSEQUENT
      } else {
        t:for (var h = 0; i > h; h++) {
          var l = n[h], c = l.getPropertyIds()
          if (o.addAll(c)) {
            if (!r || l instanceof t.AttachmentTimeline || l instanceof t.DrawOrderTimeline || l instanceof t.EventTimeline || !r.animation.hasTimeline(c)) {
              a[h] = t.FIRST
            } else {
              for (var p = r.mixingTo; p; p = p.mixingTo) {
                if (!p.animation.hasTimeline(c)) {
                  if (e.mixDuration > 0) {
                    a[h] = t.HOLD_MIX, s[h] = p
                    continue t
                  }
                  break
                }
              }
              a[h] = t.HOLD_FIRST
            }
          } else {
            a[h] = t.SUBSEQUENT
          }
        }
      }
    }, e.prototype.getCurrent = function (t) {
      return t >= this.tracks.length ? null : this.tracks[t]
    }, e.prototype.addListener = function (t) {
      if (!t) throw new Error('listener cannot be null.')
      this.listeners.push(t)
    }, e.prototype.removeListener = function (t) {
      var e = this.listeners.indexOf(t)
      e >= 0 && this.listeners.splice(e, 1)
    }, e.prototype.clearListeners = function () {
      this.listeners.length = 0
    }, e.prototype.clearListenerNotifications = function () {
      this.queue.clear()
    }, e
  }()
  t.AnimationState = e, __reflect(e.prototype, 'spine.AnimationState')
  var r = function () {
    function e () {
      this.animation = null, this.previous = null, this.next = null, this.mixingFrom = null, this.mixingTo = null, this.listener = null, this.trackIndex = 0, this.loop = !1, this.holdPrevious = !1, this.reverse = !1, this.eventThreshold = 0, this.attachmentThreshold = 0, this.drawOrderThreshold = 0, this.animationStart = 0, this.animationEnd = 0, this.animationLast = 0, this.nextAnimationLast = 0, this.delay = 0, this.trackTime = 0, this.trackLast = 0, this.nextTrackLast = 0, this.trackEnd = 0, this.timeScale = 0, this.alpha = 0, this.mixTime = 0, this.mixDuration = 0, this.interruptAlpha = 0, this.totalAlpha = 0, this.mixBlend = t.MixBlend.replace, this.timelineMode = new Array, this.timelineHoldMix = new Array, this.timelinesRotation = new Array
    }

    return e.prototype.reset = function () {
      this.next = null, this.previous = null, this.mixingFrom = null, this.mixingTo = null, this.animation = null, this.listener = null, this.timelineMode.length = 0, this.timelineHoldMix.length = 0, this.timelinesRotation.length = 0
    }, e.prototype.getAnimationTime = function () {
      if (this.loop) {
        var t = this.animationEnd - this.animationStart
        return 0 == t ? this.animationStart : this.trackTime % t + this.animationStart
      }
      return Math.min(this.trackTime + this.animationStart, this.animationEnd)
    }, e.prototype.setAnimationLast = function (t) {
      this.animationLast = t, this.nextAnimationLast = t
    }, e.prototype.isComplete = function () {
      return this.trackTime >= this.animationEnd - this.animationStart
    }, e.prototype.resetRotationDirections = function () {
      this.timelinesRotation.length = 0
    }, e.prototype.getTrackComplete = function () {
      var t = this.animationEnd - this.animationStart
      if (0 != t) {
        if (this.loop) return t * (1 + (this.trackTime / t | 0))
        if (this.trackTime < t) return t
      }
      return this.trackTime
    }, e
  }()
  t.TrackEntry = r, __reflect(r.prototype, 'spine.TrackEntry')
  var n = function () {
    function t (t) {
      this.objects = [], this.drainDisabled = !1, this.animState = null, this.animState = t
    }

    return t.prototype.start = function (t) {
      this.objects.push(i.start), this.objects.push(t), this.animState.animationsChanged = !0
    }, t.prototype.interrupt = function (t) {
      this.objects.push(i.interrupt), this.objects.push(t)
    }, t.prototype.end = function (t) {
      this.objects.push(i.end), this.objects.push(t), this.animState.animationsChanged = !0
    }, t.prototype.dispose = function (t) {
      this.objects.push(i.dispose), this.objects.push(t)
    }, t.prototype.complete = function (t) {
      this.objects.push(i.complete), this.objects.push(t)
    }, t.prototype.event = function (t, e) {
      this.objects.push(i.event), this.objects.push(t), this.objects.push(e)
    }, t.prototype.drain = function () {
      if (!this.drainDisabled) {
        this.drainDisabled = !0
        for (var t = this.objects, e = this.animState.listeners, r = 0; r < t.length; r += 2) {
          var n = t[r], a = t[r + 1]
          switch (n) {
            case i.start:
              a.listener && a.listener.start && a.listener.start(a)
              for (var s = 0; s < e.length; s++) e[s].start && e[s].start(a)
              break
            case i.interrupt:
              a.listener && a.listener.interrupt && a.listener.interrupt(a)
              for (var s = 0; s < e.length; s++) e[s].interrupt && e[s].interrupt(a)
              break
            case i.end:
              a.listener && a.listener.end && a.listener.end(a)
              for (var s = 0; s < e.length; s++) e[s].end && e[s].end(a)
            case i.dispose:
              a.listener && a.listener.dispose && a.listener.dispose(a)
              for (var s = 0; s < e.length; s++) e[s].dispose && e[s].dispose(a)
              this.animState.trackEntryPool.free(a)
              break
            case i.complete:
              a.listener && a.listener.complete && a.listener.complete(a)
              for (var s = 0; s < e.length; s++) e[s].complete && e[s].complete(a)
              break
            case i.event:
              var o = t[r++ + 2]
              a.listener && a.listener.event && a.listener.event(a, o)
              for (var s = 0; s < e.length; s++) e[s].event && e[s].event(a, o)
          }
        }
        this.clear(), this.drainDisabled = !1
      }
    }, t.prototype.clear = function () {
      this.objects.length = 0
    }, t
  }()
  t.EventQueue = n, __reflect(n.prototype, 'spine.EventQueue')
  var i
  !function (t) {
    t[t.start = 0] = 'start', t[t.interrupt = 1] = 'interrupt', t[t.end = 2] = 'end', t[t.dispose = 3] = 'dispose', t[t.complete = 4] = 'complete', t[t.event = 5] = 'event'
  }(i = t.EventType || (t.EventType = {}))
  var a = function () {
    function t () {
    }

    return t.prototype.start = function (t) {
    }, t.prototype.interrupt = function (t) {
    }, t.prototype.end = function (t) {
    }, t.prototype.dispose = function (t) {
    }, t.prototype.complete = function (t) {
    }, t.prototype.event = function (t, e) {
    }, t
  }()
  t.AnimationStateAdapter = a, __reflect(a.prototype, 'spine.AnimationStateAdapter', ['spine.AnimationStateListener']), t.SUBSEQUENT = 0, t.FIRST = 1, t.HOLD_SUBSEQUENT = 2, t.HOLD_FIRST = 3, t.HOLD_MIX = 4, t.SETUP = 1, t.CURRENT = 2
  var s = null
}(spine || (spine = {}))
var __reflect = this && this.__reflect || function (t, e, r) {
  t.__class__ = e, r ? r.push(e) : r = [e], t.__types__ = t.__types__ ? r.concat(t.__types__) : r
}, __extends = this && this.__extends || function (t, e) {
  function r () {
    this.constructor = t
  }

  for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
  r.prototype = e.prototype, t.prototype = new r
}, spine
!function (t) {
  var e = function () {
    function e (t, e, r) {
      if (this.timelines = null, this.timelineIds = null, !t) throw new Error('name cannot be null.')
      this.name = t, this.setTimelines(e), this.duration = r
    }

    return e.prototype.setTimelines = function (e) {
      if (!e) throw new Error('timelines cannot be null.')
      this.timelines = e, this.timelineIds = new t.StringSet
      for (var r = 0; r < e.length; r++) this.timelineIds.addAll(e[r].getPropertyIds())
    }, e.prototype.hasTimeline = function (t) {
      for (var e = 0; e < t.length; e++) if (this.timelineIds.contains(t[e])) return !0
      return !1
    }, e.prototype.apply = function (t, e, r, n, i, a, s, o) {
      if (!t) throw new Error('skeleton cannot be null.')
      n && 0 != this.duration && (r %= this.duration, e > 0 && (e %= this.duration))
      for (var h = this.timelines, l = 0, c = h.length; c > l; l++) h[l].apply(t, e, r, i, a, s, o)
    }, e
  }()
  t.Animation = e, __reflect(e.prototype, 'spine.Animation')
  var r
  !function (t) {
    t[t.setup = 0] = 'setup', t[t.first = 1] = 'first', t[t.replace = 2] = 'replace', t[t.add = 3] = 'add'
  }(r = t.MixBlend || (t.MixBlend = {}))
  var n
  !function (t) {
    t[t.mixIn = 0] = 'mixIn', t[t.mixOut = 1] = 'mixOut'
  }(n = t.MixDirection || (t.MixDirection = {}))
  var i = {
    rotate: 0,
    x: 1,
    y: 2,
    scaleX: 3,
    scaleY: 4,
    shearX: 5,
    shearY: 6,
    rgb: 7,
    alpha: 8,
    rgb2: 9,
    attachment: 10,
    deform: 11,
    event: 12,
    drawOrder: 13,
    ikConstraint: 14,
    transformConstraint: 15,
    pathConstraintPosition: 16,
    pathConstraintSpacing: 17,
    pathConstraintMix: 18
  }, a = function () {
    function e (e, r) {
      this.propertyIds = null, this.frames = null, this.propertyIds = r, this.frames = t.Utils.newFloatArray(e * this.getFrameEntries())
    }

    return e.prototype.getPropertyIds = function () {
      return this.propertyIds
    }, e.prototype.getFrameEntries = function () {
      return 1
    }, e.prototype.getFrameCount = function () {
      return this.frames.length / this.getFrameEntries()
    }, e.prototype.getDuration = function () {
      return this.frames[this.frames.length - this.getFrameEntries()]
    }, e.search1 = function (t, e) {
      for (var r = t.length, n = 1; r > n; n++) if (t[n] > e) return n - 1
      return r - 1
    }, e.search = function (t, e, r) {
      for (var n = t.length, i = r; n > i; i += r) if (t[i] > e) return i - r
      return n - r
    }, e
  }()
  t.Timeline = a, __reflect(a.prototype, 'spine.Timeline')
  var s = function (e) {
    function r (r, n, i) {
      var a = e.call(this, r, i) || this
      return a.curves = null, a.curves = t.Utils.newFloatArray(r + 18 * n), a.curves[r - 1] = 1, a
    }

    return __extends(r, e), r.prototype.setLinear = function (t) {
      this.curves[t] = 0
    }, r.prototype.setStepped = function (t) {
      this.curves[t] = 1
    }, r.prototype.shrink = function (e) {
      var r = this.getFrameCount() + 18 * e
      if (this.curves.length > r) {
        var n = t.Utils.newFloatArray(r)
        t.Utils.arrayCopy(this.curves, 0, n, 0, r), this.curves = n
      }
    }, r.prototype.setBezier = function (t, e, r, n, i, a, s, o, h, l, c) {
      var p = this.curves, u = this.getFrameCount() + 18 * t
      0 == r && (p[e] = 2 + u)
      for (var d = .03 * (n - 2 * a + o), f = .03 * (i - 2 * s + h), m = .006 * (3 * (a - o) - n + l), v = .006 * (3 * (s - h) - i + c), g = 2 * d + m, y = 2 * f + v, _ = .3 * (a - n) + d + .16666667 * m, x = .3 * (s - i) + f + .16666667 * v, w = n + _, b = i + x, S = u + 18; S > u; u += 2) p[u] = w, p[u + 1] = b, _ += g, x += y, g += m, y += v, w += _, b += x
    }, r.prototype.getBezierValue = function (t, e, r, n) {
      var i = this.curves
      if (i[n] > t) {
        var a = this.frames[e], s = this.frames[e + r]
        return s + (t - a) / (i[n] - a) * (i[n + 1] - s)
      }
      var o = n + 18
      for (n += 2; o > n; n += 2) {
        if (i[n] >= t) {
          var h = i[n - 2], l = i[n - 1]
          return l + (t - h) / (i[n] - h) * (i[n + 1] - l)
        }
      }
      e += this.getFrameEntries()
      var c = i[o - 2], p = i[o - 1]
      return p + (t - c) / (this.frames[e] - c) * (this.frames[e + r] - p)
    }, r
  }(a)
  t.CurveTimeline = s, __reflect(s.prototype, 'spine.CurveTimeline')
  var o = function (t) {
    function e (e, r, n) {
      return t.call(this, e, r, [n]) || this
    }

    return __extends(e, t), e.prototype.getFrameEntries = function () {
      return 2
    }, e.prototype.setFrame = function (t, e, r) {
      t <<= 1, this.frames[t] = e, this.frames[t + 1] = r
    }, e.prototype.getCurveValue = function (t) {
      for (var e = this.frames, r = e.length - 2, n = 2; r >= n; n += 2) {
        if (e[n] > t) {
          r = n - 2
          break
        }
      }
      var i = this.curves[r >> 1]
      switch (i) {
        case 0:
          var a = e[r], s = e[r + 1]
          return s + (t - a) / (e[r + 2] - a) * (e[r + 2 + 1] - s)
        case 1:
          return e[r + 1]
      }
      return this.getBezierValue(t, r, 1, i - 2)
    }, e
  }(s)
  t.CurveTimeline1 = o, __reflect(o.prototype, 'spine.CurveTimeline1')
  var h = function (t) {
    function e (e, r, n, i) {
      return t.call(this, e, r, [n, i]) || this
    }

    return __extends(e, t), e.prototype.getFrameEntries = function () {
      return 3
    }, e.prototype.setFrame = function (t, e, r, n) {
      t *= 3, this.frames[t] = e, this.frames[t + 1] = r, this.frames[t + 2] = n
    }, e
  }(s)
  t.CurveTimeline2 = h, __reflect(h.prototype, 'spine.CurveTimeline2')
  var l = function (t) {
    function e (e, r, n) {
      var a = t.call(this, e, r, i.rotate + '|' + n) || this
      return a.boneIndex = 0, a.boneIndex = n, a
    }

    return __extends(e, t), e.prototype.apply = function (t, e, n, i, a, s, o) {
      var h = t.bones[this.boneIndex]
      if (h.active) {
        var l = this.frames
        if (n < l[0]) {
          switch (s) {
            case r.setup:
              return void (h.rotation = h.data.rotation)
            case r.first:
              h.rotation += (h.data.rotation - h.rotation) * a
          }
        } else {
          var c = this.getCurveValue(n)
          switch (s) {
            case r.setup:
              h.rotation = h.data.rotation + c * a
              break
            case r.first:
            case r.replace:
              c += h.data.rotation - h.rotation
            case r.add:
              h.rotation += c * a
          }
        }
      }
    }, e
  }(o)
  t.RotateTimeline = l, __reflect(l.prototype, 'spine.RotateTimeline', ['spine.BoneTimeline'])
  var c = function (t) {
    function e (e, r, n) {
      var a = t.call(this, e, r, i.x + '|' + n, i.y + '|' + n) || this
      return a.boneIndex = 0, a.boneIndex = n, a
    }

    return __extends(e, t), e.prototype.apply = function (t, e, n, i, s, o, h) {
      var l = t.bones[this.boneIndex]
      if (l.active) {
        var c = this.frames
        if (n < c[0]) {
          switch (o) {
            case r.setup:
              return l.x = l.data.x, void (l.y = l.data.y)
            case r.first:
              l.x += (l.data.x - l.x) * s, l.y += (l.data.y - l.y) * s
          }
        } else {
          var p = 0, u = 0, d = a.search(c, n, 3), f = this.curves[d / 3]
          switch (f) {
            case 0:
              var m = c[d]
              p = c[d + 1], u = c[d + 2]
              var v = (n - m) / (c[d + 3] - m)
              p += (c[d + 3 + 1] - p) * v, u += (c[d + 3 + 2] - u) * v
              break
            case 1:
              p = c[d + 1], u = c[d + 2]
              break
            default:
              p = this.getBezierValue(n, d, 1, f - 2), u = this.getBezierValue(n, d, 2, f + 18 - 2)
          }
          switch (o) {
            case r.setup:
              l.x = l.data.x + p * s, l.y = l.data.y + u * s
              break
            case r.first:
            case r.replace:
              l.x += (l.data.x + p - l.x) * s, l.y += (l.data.y + u - l.y) * s
              break
            case r.add:
              l.x += p * s, l.y += u * s
          }
        }
      }
    }, e
  }(h)
  t.TranslateTimeline = c, __reflect(c.prototype, 'spine.TranslateTimeline', ['spine.BoneTimeline'])
  var p = function (t) {
    function e (e, r, n) {
      var a = t.call(this, e, r, i.x + '|' + n) || this
      return a.boneIndex = 0, a.boneIndex = n, a
    }

    return __extends(e, t), e.prototype.apply = function (t, e, n, i, a, s, o) {
      var h = t.bones[this.boneIndex]
      if (h.active) {
        var l = this.frames
        if (n < l[0]) {
          switch (s) {
            case r.setup:
              return void (h.x = h.data.x)
            case r.first:
              h.x += (h.data.x - h.x) * a
          }
        } else {
          var c = this.getCurveValue(n)
          switch (s) {
            case r.setup:
              h.x = h.data.x + c * a
              break
            case r.first:
            case r.replace:
              h.x += (h.data.x + c - h.x) * a
              break
            case r.add:
              h.x += c * a
          }
        }
      }
    }, e
  }(o)
  t.TranslateXTimeline = p, __reflect(p.prototype, 'spine.TranslateXTimeline', ['spine.BoneTimeline'])
  var u = function (t) {
    function e (e, r, n) {
      var a = t.call(this, e, r, i.y + '|' + n) || this
      return a.boneIndex = 0, a.boneIndex = n, a
    }

    return __extends(e, t), e.prototype.apply = function (t, e, n, i, a, s, o) {
      var h = t.bones[this.boneIndex]
      if (h.active) {
        var l = this.frames
        if (n < l[0]) {
          switch (s) {
            case r.setup:
              return void (h.y = h.data.y)
            case r.first:
              h.y += (h.data.y - h.y) * a
          }
        } else {
          var c = this.getCurveValue(n)
          switch (s) {
            case r.setup:
              h.y = h.data.y + c * a
              break
            case r.first:
            case r.replace:
              h.y += (h.data.y + c - h.y) * a
              break
            case r.add:
              h.y += c * a
          }
        }
      }
    }, e
  }(o)
  t.TranslateYTimeline = u, __reflect(u.prototype, 'spine.TranslateYTimeline', ['spine.BoneTimeline'])
  var d = function (e) {
    function s (t, r, n) {
      var a = e.call(this, t, r, i.scaleX + '|' + n, i.scaleY + '|' + n) || this
      return a.boneIndex = 0, a.boneIndex = n, a
    }

    return __extends(s, e), s.prototype.apply = function (e, i, s, o, h, l, c) {
      var p = e.bones[this.boneIndex]
      if (p.active) {
        var u = this.frames
        if (s < u[0]) {
          switch (l) {
            case r.setup:
              return p.scaleX = p.data.scaleX, void (p.scaleY = p.data.scaleY)
            case r.first:
              p.scaleX += (p.data.scaleX - p.scaleX) * h, p.scaleY += (p.data.scaleY - p.scaleY) * h
          }
        } else {
          var d, f, m = a.search(u, s, 3), v = this.curves[m / 3]
          switch (v) {
            case 0:
              var g = u[m]
              d = u[m + 1], f = u[m + 2]
              var y = (s - g) / (u[m + 3] - g)
              d += (u[m + 3 + 1] - d) * y, f += (u[m + 3 + 2] - f) * y
              break
            case 1:
              d = u[m + 1], f = u[m + 2]
              break
            default:
              d = this.getBezierValue(s, m, 1, v - 2), f = this.getBezierValue(s, m, 2, v + 18 - 2)
          }
          if (d *= p.data.scaleX, f *= p.data.scaleY, 1 == h) {
            l == r.add ? (p.scaleX += d - p.data.scaleX, p.scaleY += f - p.data.scaleY) : (p.scaleX = d, p.scaleY = f)
          } else {
            var _ = 0, x = 0
            if (c == n.mixOut) {
              switch (l) {
                case r.setup:
                  _ = p.data.scaleX, x = p.data.scaleY, p.scaleX = _ + (Math.abs(d) * t.MathUtils.signum(_) - _) * h, p.scaleY = x + (Math.abs(f) * t.MathUtils.signum(x) - x) * h
                  break
                case r.first:
                case r.replace:
                  _ = p.scaleX, x = p.scaleY, p.scaleX = _ + (Math.abs(d) * t.MathUtils.signum(_) - _) * h, p.scaleY = x + (Math.abs(f) * t.MathUtils.signum(x) - x) * h
                  break
                case r.add:
                  p.scaleX += (d - p.data.scaleX) * h, p.scaleY += (f - p.data.scaleY) * h
              }
            } else {
              switch (l) {
                case r.setup:
                  _ = Math.abs(p.data.scaleX) * t.MathUtils.signum(d), x = Math.abs(p.data.scaleY) * t.MathUtils.signum(f), p.scaleX = _ + (d - _) * h, p.scaleY = x + (f - x) * h
                  break
                case r.first:
                case r.replace:
                  _ = Math.abs(p.scaleX) * t.MathUtils.signum(d), x = Math.abs(p.scaleY) * t.MathUtils.signum(f), p.scaleX = _ + (d - _) * h, p.scaleY = x + (f - x) * h
                  break
                case r.add:
                  p.scaleX += (d - p.data.scaleX) * h, p.scaleY += (f - p.data.scaleY) * h
              }
            }
          }
        }
      }
    }, s
  }(h)
  t.ScaleTimeline = d, __reflect(d.prototype, 'spine.ScaleTimeline', ['spine.BoneTimeline'])
  var f = function (e) {
    function a (t, r, n) {
      var a = e.call(this, t, r, i.scaleX + '|' + n) || this
      return a.boneIndex = 0, a.boneIndex = n, a
    }

    return __extends(a, e), a.prototype.apply = function (e, i, a, s, o, h, l) {
      var c = e.bones[this.boneIndex]
      if (c.active) {
        var p = this.frames
        if (a < p[0]) {
          switch (h) {
            case r.setup:
              return void (c.scaleX = c.data.scaleX)
            case r.first:
              c.scaleX += (c.data.scaleX - c.scaleX) * o
          }
        } else {
          var u = this.getCurveValue(a) * c.data.scaleX
          if (1 == o) {
            h == r.add ? c.scaleX += u - c.data.scaleX : c.scaleX = u
          } else {
            var d = 0
            if (l == n.mixOut) {
              switch (h) {
                case r.setup:
                  d = c.data.scaleX, c.scaleX = d + (Math.abs(u) * t.MathUtils.signum(d) - d) * o
                  break
                case r.first:
                case r.replace:
                  d = c.scaleX, c.scaleX = d + (Math.abs(u) * t.MathUtils.signum(d) - d) * o
                  break
                case r.add:
                  c.scaleX += (u - c.data.scaleX) * o
              }
            } else {
              switch (h) {
                case r.setup:
                  d = Math.abs(c.data.scaleX) * t.MathUtils.signum(u), c.scaleX = d + (u - d) * o
                  break
                case r.first:
                case r.replace:
                  d = Math.abs(c.scaleX) * t.MathUtils.signum(u), c.scaleX = d + (u - d) * o
                  break
                case r.add:
                  c.scaleX += (u - c.data.scaleX) * o
              }
            }
          }
        }
      }
    }, a
  }(o)
  t.ScaleXTimeline = f, __reflect(f.prototype, 'spine.ScaleXTimeline', ['spine.BoneTimeline'])
  var m = function (e) {
    function a (t, r, n) {
      var a = e.call(this, t, r, i.scaleY + '|' + n) || this
      return a.boneIndex = 0, a.boneIndex = n, a
    }

    return __extends(a, e), a.prototype.apply = function (e, i, a, s, o, h, l) {
      var c = e.bones[this.boneIndex]
      if (c.active) {
        var p = this.frames
        if (a < p[0]) {
          switch (h) {
            case r.setup:
              return void (c.scaleY = c.data.scaleY)
            case r.first:
              c.scaleY += (c.data.scaleY - c.scaleY) * o
          }
        } else {
          var u = this.getCurveValue(a) * c.data.scaleY
          if (1 == o) {
            h == r.add ? c.scaleY += u - c.data.scaleY : c.scaleY = u
          } else {
            var d = 0
            if (l == n.mixOut) {
              switch (h) {
                case r.setup:
                  d = c.data.scaleY, c.scaleY = d + (Math.abs(u) * t.MathUtils.signum(d) - d) * o
                  break
                case r.first:
                case r.replace:
                  d = c.scaleY, c.scaleY = d + (Math.abs(u) * t.MathUtils.signum(d) - d) * o
                  break
                case r.add:
                  c.scaleY += (u - c.data.scaleY) * o
              }
            } else {
              switch (h) {
                case r.setup:
                  d = Math.abs(c.data.scaleY) * t.MathUtils.signum(u), c.scaleY = d + (u - d) * o
                  break
                case r.first:
                case r.replace:
                  d = Math.abs(c.scaleY) * t.MathUtils.signum(u), c.scaleY = d + (u - d) * o
                  break
                case r.add:
                  c.scaleY += (u - c.data.scaleY) * o
              }
            }
          }
        }
      }
    }, a
  }(o)
  t.ScaleYTimeline = m, __reflect(m.prototype, 'spine.ScaleYTimeline', ['spine.BoneTimeline'])
  var v = function (t) {
    function e (e, r, n) {
      var a = t.call(this, e, r, i.shearX + '|' + n, i.shearY + '|' + n) || this
      return a.boneIndex = 0, a.boneIndex = n, a
    }

    return __extends(e, t), e.prototype.apply = function (t, e, n, i, s, o, h) {
      var l = t.bones[this.boneIndex]
      if (l.active) {
        var c = this.frames
        if (n < c[0]) {
          switch (o) {
            case r.setup:
              return l.shearX = l.data.shearX, void (l.shearY = l.data.shearY)
            case r.first:
              l.shearX += (l.data.shearX - l.shearX) * s, l.shearY += (l.data.shearY - l.shearY) * s
          }
        } else {
          var p = 0, u = 0, d = a.search(c, n, 3), f = this.curves[d / 3]
          switch (f) {
            case 0:
              var m = c[d]
              p = c[d + 1], u = c[d + 2]
              var v = (n - m) / (c[d + 3] - m)
              p += (c[d + 3 + 1] - p) * v, u += (c[d + 3 + 2] - u) * v
              break
            case 1:
              p = c[d + 1], u = c[d + 2]
              break
            default:
              p = this.getBezierValue(n, d, 1, f - 2), u = this.getBezierValue(n, d, 2, f + 18 - 2)
          }
          switch (o) {
            case r.setup:
              l.shearX = l.data.shearX + p * s, l.shearY = l.data.shearY + u * s
              break
            case r.first:
            case r.replace:
              l.shearX += (l.data.shearX + p - l.shearX) * s, l.shearY += (l.data.shearY + u - l.shearY) * s
              break
            case r.add:
              l.shearX += p * s, l.shearY += u * s
          }
        }
      }
    }, e
  }(h)
  t.ShearTimeline = v, __reflect(v.prototype, 'spine.ShearTimeline', ['spine.BoneTimeline'])
  var g = function (t) {
    function e (e, r, n) {
      var a = t.call(this, e, r, i.shearX + '|' + n) || this
      return a.boneIndex = 0, a.boneIndex = n, a
    }

    return __extends(e, t), e.prototype.apply = function (t, e, n, i, a, s, o) {
      var h = t.bones[this.boneIndex]
      if (h.active) {
        var l = this.frames
        if (n < l[0]) {
          switch (s) {
            case r.setup:
              return void (h.shearX = h.data.shearX)
            case r.first:
              h.shearX += (h.data.shearX - h.shearX) * a
          }
        } else {
          var c = this.getCurveValue(n)
          switch (s) {
            case r.setup:
              h.shearX = h.data.shearX + c * a
              break
            case r.first:
            case r.replace:
              h.shearX += (h.data.shearX + c - h.shearX) * a
              break
            case r.add:
              h.shearX += c * a
          }
        }
      }
    }, e
  }(o)
  t.ShearXTimeline = g, __reflect(g.prototype, 'spine.ShearXTimeline', ['spine.BoneTimeline'])
  var y = function (t) {
    function e (e, r, n) {
      var a = t.call(this, e, r, i.shearY + '|' + n) || this
      return a.boneIndex = 0, a.boneIndex = n, a
    }

    return __extends(e, t), e.prototype.apply = function (t, e, n, i, a, s, o) {
      var h = t.bones[this.boneIndex]
      if (h.active) {
        var l = this.frames
        if (n < l[0]) {
          switch (s) {
            case r.setup:
              return void (h.shearY = h.data.shearY)
            case r.first:
              h.shearY += (h.data.shearY - h.shearY) * a
          }
        } else {
          var c = this.getCurveValue(n)
          switch (s) {
            case r.setup:
              h.shearY = h.data.shearY + c * a
              break
            case r.first:
            case r.replace:
              h.shearY += (h.data.shearY + c - h.shearY) * a
              break
            case r.add:
              h.shearY += c * a
          }
        }
      }
    }, e
  }(o)
  t.ShearYTimeline = y, __reflect(y.prototype, 'spine.ShearYTimeline', ['spine.BoneTimeline'])
  var _ = function (t) {
    function e (e, r, n) {
      var a = t.call(this, e, r, [i.rgb + '|' + n, i.alpha + '|' + n]) || this
      return a.slotIndex = 0, a.slotIndex = n, a
    }

    return __extends(e, t), e.prototype.getFrameEntries = function () {
      return 5
    }, e.prototype.setFrame = function (t, e, r, n, i, a) {
      t *= 5, this.frames[t] = e, this.frames[t + 1] = r, this.frames[t + 2] = n, this.frames[t + 3] = i, this.frames[t + 4] = a
    }, e.prototype.apply = function (t, e, n, i, s, o, h) {
      var l = t.slots[this.slotIndex]
      if (l.bone.active) {
        var c = this.frames, p = l.color
        if (n < c[0]) {
          var u = l.data.color
          switch (o) {
            case r.setup:
              return void p.setFromColor(u)
            case r.first:
              p.add((u.r - p.r) * s, (u.g - p.g) * s, (u.b - p.b) * s, (u.a - p.a) * s)
          }
        } else {
          var d = 0, f = 0, m = 0, v = 0, g = a.search(c, n, 5), y = this.curves[g / 5]
          switch (y) {
            case 0:
              var _ = c[g]
              d = c[g + 1], f = c[g + 2], m = c[g + 3], v = c[g + 4]
              var x = (n - _) / (c[g + 5] - _)
              d += (c[g + 5 + 1] - d) * x, f += (c[g + 5 + 2] - f) * x, m += (c[g + 5 + 3] - m) * x, v += (c[g + 5 + 4] - v) * x
              break
            case 1:
              d = c[g + 1], f = c[g + 2], m = c[g + 3], v = c[g + 4]
              break
            default:
              d = this.getBezierValue(n, g, 1, y - 2), f = this.getBezierValue(n, g, 2, y + 18 - 2), m = this.getBezierValue(n, g, 3, y + 36 - 2), v = this.getBezierValue(n, g, 4, y + 54 - 2)
          }
          1 == s ? p.set(d, f, m, v) : (o == r.setup && p.setFromColor(l.data.color), p.add((d - p.r) * s, (f - p.g) * s, (m - p.b) * s, (v - p.a) * s))
        }
      }
    }, e
  }(s)
  t.RGBATimeline = _, __reflect(_.prototype, 'spine.RGBATimeline', ['spine.SlotTimeline'])
  var x = function (t) {
    function e (e, r, n) {
      var a = t.call(this, e, r, [i.rgb + '|' + n]) || this
      return a.slotIndex = 0, a.slotIndex = n, a
    }

    return __extends(e, t), e.prototype.getFrameEntries = function () {
      return 4
    }, e.prototype.setFrame = function (t, e, r, n, i) {
      t <<= 2, this.frames[t] = e, this.frames[t + 1] = r, this.frames[t + 2] = n, this.frames[t + 3] = i
    }, e.prototype.apply = function (t, e, n, i, s, o, h) {
      var l = t.slots[this.slotIndex]
      if (l.bone.active) {
        var c = this.frames, p = l.color
        if (n < c[0]) {
          var u = l.data.color
          switch (o) {
            case r.setup:
              return p.r = u.r, p.g = u.g, void (p.b = u.b)
            case r.first:
              p.r += (u.r - p.r) * s, p.g += (u.g - p.g) * s, p.b += (u.b - p.b) * s
          }
        } else {
          var d = 0, f = 0, m = 0, v = a.search(c, n, 4), g = this.curves[v >> 2]
          switch (g) {
            case 0:
              var y = c[v]
              d = c[v + 1], f = c[v + 2], m = c[v + 3]
              var _ = (n - y) / (c[v + 4] - y)
              d += (c[v + 4 + 1] - d) * _, f += (c[v + 4 + 2] - f) * _, m += (c[v + 4 + 3] - m) * _
              break
            case 1:
              d = c[v + 1], f = c[v + 2], m = c[v + 3]
              break
            default:
              d = this.getBezierValue(n, v, 1, g - 2), f = this.getBezierValue(n, v, 2, g + 18 - 2), m = this.getBezierValue(n, v, 3, g + 36 - 2)
          }
          if (1 == s) {
            p.r = d, p.g = f, p.b = m
          } else {
            if (o == r.setup) {
              var u = l.data.color
              p.r = u.r, p.g = u.g, p.b = u.b
            }
            p.r += (d - p.r) * s, p.g += (f - p.g) * s, p.b += (m - p.b) * s
          }
        }
      }
    }, e
  }(s)
  t.RGBTimeline = x, __reflect(x.prototype, 'spine.RGBTimeline', ['spine.SlotTimeline'])
  var w = function (t) {
    function e (e, r, n) {
      var a = t.call(this, e, r, i.alpha + '|' + n) || this
      return a.slotIndex = 0, a.slotIndex = n, a
    }

    return __extends(e, t), e.prototype.apply = function (t, e, n, i, a, s, o) {
      var h = t.slots[this.slotIndex]
      if (h.bone.active) {
        var l = h.color
        if (n < this.frames[0]) {
          var c = h.data.color
          switch (s) {
            case r.setup:
              return void (l.a = c.a)
            case r.first:
              l.a += (c.a - l.a) * a
          }
        } else {
          var p = this.getCurveValue(n)
          1 == a ? l.a = p : (s == r.setup && (l.a = h.data.color.a), l.a += (p - l.a) * a)
        }
      }
    }, e
  }(o)
  t.AlphaTimeline = w, __reflect(w.prototype, 'spine.AlphaTimeline', ['spine.SlotTimeline'])
  var b = function (t) {
    function e (e, r, n) {
      var a = t.call(this, e, r, [i.rgb + '|' + n, i.alpha + '|' + n, i.rgb2 + '|' + n]) || this
      return a.slotIndex = 0, a.slotIndex = n, a
    }

    return __extends(e, t), e.prototype.getFrameEntries = function () {
      return 8
    }, e.prototype.setFrame = function (t, e, r, n, i, a, s, o, h) {
      t <<= 3, this.frames[t] = e, this.frames[t + 1] = r, this.frames[t + 2] = n, this.frames[t + 3] = i, this.frames[t + 4] = a, this.frames[t + 5] = s, this.frames[t + 6] = o, this.frames[t + 7] = h
    }, e.prototype.apply = function (t, e, n, i, s, o, h) {
      var l = t.slots[this.slotIndex]
      if (l.bone.active) {
        var c = this.frames, p = l.color, u = l.darkColor
        if (n < c[0]) {
          var d = l.data.color, f = l.data.darkColor
          switch (o) {
            case r.setup:
              return p.setFromColor(d), u.r = f.r, u.g = f.g, void (u.b = f.b)
            case r.first:
              p.add((d.r - p.r) * s, (d.g - p.g) * s, (d.b - p.b) * s, (d.a - p.a) * s), u.r += (f.r - u.r) * s, u.g += (f.g - u.g) * s, u.b += (f.b - u.b) * s
          }
        } else {
          var m = 0, v = 0, g = 0, y = 0, _ = 0, x = 0, w = 0, b = a.search(c, n, 8), S = this.curves[b >> 3]
          switch (S) {
            case 0:
              var A = c[b]
              m = c[b + 1], v = c[b + 2], g = c[b + 3], y = c[b + 4], _ = c[b + 5], x = c[b + 6], w = c[b + 7]
              var k = (n - A) / (c[b + 8] - A)
              m += (c[b + 8 + 1] - m) * k, v += (c[b + 8 + 2] - v) * k, g += (c[b + 8 + 3] - g) * k, y += (c[b + 8 + 4] - y) * k, _ += (c[b + 8 + 5] - _) * k, x += (c[b + 8 + 6] - x) * k, w += (c[b + 8 + 7] - w) * k
              break
            case 1:
              m = c[b + 1], v = c[b + 2], g = c[b + 3], y = c[b + 4], _ = c[b + 5], x = c[b + 6], w = c[b + 7]
              break
            default:
              m = this.getBezierValue(n, b, 1, S - 2), v = this.getBezierValue(n, b, 2, S + 18 - 2), g = this.getBezierValue(n, b, 3, S + 36 - 2), y = this.getBezierValue(n, b, 4, S + 54 - 2), _ = this.getBezierValue(n, b, 5, S + 72 - 2), x = this.getBezierValue(n, b, 6, S + 90 - 2), w = this.getBezierValue(n, b, 7, S + 108 - 2)
          }
          if (1 == s) {
            p.set(m, v, g, y), u.r = _, u.g = x, u.b = w
          } else {
            if (o == r.setup) {
              p.setFromColor(l.data.color)
              var f = l.data.darkColor
              u.r = f.r, u.g = f.g, u.b = f.b
            }
            p.add((m - p.r) * s, (v - p.g) * s, (g - p.b) * s, (y - p.a) * s), u.r += (_ - u.r) * s, u.g += (x - u.g) * s, u.b += (w - u.b) * s
          }
        }
      }
    }, e
  }(s)
  t.RGBA2Timeline = b, __reflect(b.prototype, 'spine.RGBA2Timeline', ['spine.SlotTimeline'])
  var S = function (t) {
    function e (e, r, n) {
      var a = t.call(this, e, r, [i.rgb + '|' + n, i.rgb2 + '|' + n]) || this
      return a.slotIndex = 0, a.slotIndex = n, a
    }

    return __extends(e, t), e.prototype.getFrameEntries = function () {
      return 7
    }, e.prototype.setFrame = function (t, e, r, n, i, a, s, o) {
      t *= 7, this.frames[t] = e, this.frames[t + 1] = r, this.frames[t + 2] = n, this.frames[t + 3] = i, this.frames[t + 4] = a, this.frames[t + 5] = s, this.frames[t + 6] = o
    }, e.prototype.apply = function (t, e, n, i, s, o, h) {
      var l = t.slots[this.slotIndex]
      if (l.bone.active) {
        var c = this.frames, p = l.color, u = l.darkColor
        if (n < c[0]) {
          var d = l.data.color, f = l.data.darkColor
          switch (o) {
            case r.setup:
              return p.r = d.r, p.g = d.g, p.b = d.b, u.r = f.r, u.g = f.g, void (u.b = f.b)
            case r.first:
              p.r += (d.r - p.r) * s, p.g += (d.g - p.g) * s, p.b += (d.b - p.b) * s, u.r += (f.r - u.r) * s, u.g += (f.g - u.g) * s, u.b += (f.b - u.b) * s
          }
        } else {
          var m = 0, v = 0, g = 0, y = 0, _ = 0, x = 0, w = a.search(c, n, 7), b = this.curves[w / 7]
          switch (b) {
            case 0:
              var S = c[w]
              m = c[w + 1], v = c[w + 2], g = c[w + 3], y = c[w + 4], _ = c[w + 5], x = c[w + 6]
              var A = (n - S) / (c[w + 7] - S)
              m += (c[w + 7 + 1] - m) * A, v += (c[w + 7 + 2] - v) * A, g += (c[w + 7 + 3] - g) * A, y += (c[w + 7 + 4] - y) * A, _ += (c[w + 7 + 5] - _) * A, x += (c[w + 7 + 6] - x) * A
              break
            case 1:
              m = c[w + 1], v = c[w + 2], g = c[w + 3], y = c[w + 4], _ = c[w + 5], x = c[w + 6]
              break
            default:
              m = this.getBezierValue(n, w, 1, b - 2), v = this.getBezierValue(n, w, 2, b + 18 - 2), g = this.getBezierValue(n, w, 3, b + 36 - 2), y = this.getBezierValue(n, w, 4, b + 54 - 2), _ = this.getBezierValue(n, w, 5, b + 72 - 2), x = this.getBezierValue(n, w, 6, b + 90 - 2)
          }
          if (1 == s) {
            p.r = m, p.g = v, p.b = g, u.r = y, u.g = _, u.b = x
          } else {
            if (o == r.setup) {
              var d = l.data.color, f = l.data.darkColor
              p.r = d.r, p.g = d.g, p.b = d.b, u.r = f.r, u.g = f.g, u.b = f.b
            }
            p.r += (m - p.r) * s, p.g += (v - p.g) * s, p.b += (g - p.b) * s, u.r += (y - u.r) * s, u.g += (_ - u.g) * s, u.b += (x - u.b) * s
          }
        }
      }
    }, e
  }(s)
  t.RGB2Timeline = S, __reflect(S.prototype, 'spine.RGB2Timeline', ['spine.SlotTimeline'])
  var A = function (t) {
    function e (e, r) {
      var n = t.call(this, e, [i.attachment + '|' + r]) || this
      return n.slotIndex = 0, n.slotIndex = r, n.attachmentNames = new Array(e), n
    }

    return __extends(e, t), e.prototype.getFrameCount = function () {
      return this.frames.length
    }, e.prototype.setFrame = function (t, e, r) {
      this.frames[t] = e, this.attachmentNames[t] = r
    }, e.prototype.apply = function (t, e, i, s, o, h, l) {
      var c = t.slots[this.slotIndex]
      if (c.bone.active) return l == n.mixOut ? void (h == r.setup && this.setAttachment(t, c, c.data.attachmentName)) : i < this.frames[0] ? void ((h == r.setup || h == r.first) && this.setAttachment(t, c, c.data.attachmentName)) : void this.setAttachment(t, c, this.attachmentNames[a.search1(this.frames, i)])
    }, e.prototype.setAttachment = function (t, e, r) {
      e.setAttachment(r ? t.getAttachment(this.slotIndex, r) : null)
    }, e
  }(a)
  t.AttachmentTimeline = A, __reflect(A.prototype, 'spine.AttachmentTimeline', ['spine.SlotTimeline'])
  var k = function (e) {
    function n (t, r, n, a) {
      var s = e.call(this, t, r, [i.deform + '|' + n + '|' + a.id]) || this
      return s.slotIndex = 0, s.attachment = null, s.vertices = null, s.slotIndex = n, s.attachment = a, s.vertices = new Array(t), s
    }

    return __extends(n, e), n.prototype.getFrameCount = function () {
      return this.frames.length
    }, n.prototype.setFrame = function (t, e, r) {
      this.frames[t] = e, this.vertices[t] = r
    }, n.prototype.setBezier = function (t, e, r, n, i, a, s, o, h, l, c) {
      var p = this.curves, u = this.getFrameCount() + 18 * t
      0 == r && (p[e] = 2 + u)
      for (var d = .03 * (n - 2 * a + o), f = .03 * h - .06 * s, m = .006 * (3 * (a - o) - n + l), v = .018 * (s - h + .33333333), g = 2 * d + m, y = 2 * f + v, _ = .3 * (a - n) + d + .16666667 * m, x = .3 * s + f + .16666667 * v, w = n + _, b = x, S = u + 18; S > u; u += 2) p[u] = w, p[u + 1] = b, _ += g, x += y, g += m, y += v, w += _, b += x
    }, n.prototype.getCurvePercent = function (t, e) {
      var r = this.curves, n = r[e]
      switch (n) {
        case 0:
          var i = this.frames[e]
          return (t - i) / (this.frames[e + this.getFrameEntries()] - i)
        case 1:
          return 0
      }
      if (n -= 2, r[n] > t) {
        var a = this.frames[e]
        return r[n + 1] * (t - a) / (r[n] - a)
      }
      var s = n + 18
      for (n += 2; s > n; n += 2) {
        if (r[n] >= t) {
          var o = r[n - 2], h = r[n - 1]
          return h + (t - o) / (r[n] - o) * (r[n + 1] - h)
        }
      }
      var l = r[s - 2], c = r[s - 1]
      return c + (1 - c) * (t - l) / (this.frames[e + this.getFrameEntries()] - l)
    }, n.prototype.apply = function (e, n, i, s, o, h, l) {
      var c = e.slots[this.slotIndex]
      if (c.bone.active) {
        var p = c.getAttachment()
        if (p instanceof t.VertexAttachment && p.deformAttachment == this.attachment) {
          var u = c.deform
          0 == u.length && (h = r.setup)
          var d = this.vertices, f = d[0].length, m = this.frames
          if (i < m[0]) {
            var v = p
            switch (h) {
              case r.setup:
                return void (u.length = 0)
              case r.first:
                if (1 == o) return void (u.length = 0)
                if (u.length = f, v.bones) {
                  o = 1 - o
                  for (var g = 0; f > g; g++) u[g] *= o
                } else {
                  for (var y = v.vertices, g = 0; f > g; g++) u[g] += (y[g] - u[g]) * o
                }
            }
          } else if (u.length = f, i >= m[m.length - 1]) {
            var _ = d[m.length - 1]
            if (1 == o) {
              if (h == r.add) {
                var v = p
                if (v.bones) for (var x = 0; f > x; x++) u[x] += _[x] else for (var y = v.vertices, w = 0; f > w; w++) u[w] += _[w] - y[w]
              } else {
                t.Utils.arrayCopy(_, 0, u, 0, f)
              }
            } else {
              switch (h) {
                case r.setup:
                  var b = p
                  if (b.bones) {
                    for (var S = 0; f > S; S++) u[S] = _[S] * o
                  } else {
                    for (var y = b.vertices, A = 0; f > A; A++) {
                      var k = y[A]
                      u[A] = k + (_[A] - k) * o
                    }
                  }
                  break
                case r.first:
                case r.replace:
                  for (var T = 0; f > T; T++) u[T] += (_[T] - u[T]) * o
                  break
                case r.add:
                  var v = p
                  if (v.bones) for (var M = 0; f > M; M++) u[M] += _[M] * o else for (var y = v.vertices, C = 0; f > C; C++) u[C] += (_[C] - y[C]) * o
              }
            }
          } else {
            var I = a.search1(m, i), F = this.getCurvePercent(i, I), Y = d[I], R = d[I + 1]
            if (1 == o) {
              if (h == r.add) {
                var v = p
                if (v.bones) {
                  for (var X = 0; f > X; X++) {
                    var E = Y[X]
                    u[X] += E + (R[X] - E) * F
                  }
                } else {
                  for (var y = v.vertices, U = 0; f > U; U++) {
                    var E = Y[U]
                    u[U] += E + (R[U] - E) * F - y[U]
                  }
                }
              } else {
                for (var B = 0; f > B; B++) {
                  var E = Y[B]
                  u[B] = E + (R[B] - E) * F
                }
              }
            } else {
              switch (h) {
                case r.setup:
                  var P = p
                  if (P.bones) {
                    for (var D = 0; f > D; D++) {
                      var E = Y[D]
                      u[D] = (E + (R[D] - E) * F) * o
                    }
                  } else {
                    for (var y = P.vertices, V = 0; f > V; V++) {
                      var E = Y[V], k = y[V]
                      u[V] = k + (E + (R[V] - E) * F - k) * o
                    }
                  }
                  break
                case r.first:
                case r.replace:
                  for (var L = 0; f > L; L++) {
                    var E = Y[L]
                    u[L] += (E + (R[L] - E) * F - u[L]) * o
                  }
                  break
                case r.add:
                  var v = p
                  if (v.bones) {
                    for (var N = 0; f > N; N++) {
                      var E = Y[N]
                      u[N] += (E + (R[N] - E) * F) * o
                    }
                  } else {
                    for (var y = v.vertices, O = 0; f > O; O++) {
                      var E = Y[O]
                      u[O] += (E + (R[O] - E) * F - y[O]) * o
                    }
                  }
              }
            }
          }
        }
      }
    }, n
  }(s)
  t.DeformTimeline = k, __reflect(k.prototype, 'spine.DeformTimeline', ['spine.SlotTimeline'])
  var T = function (t) {
    function e (r) {
      var n = t.call(this, r, e.propertyIds) || this
      return n.events = null, n.events = new Array(r), n
    }

    return __extends(e, t), e.prototype.getFrameCount = function () {
      return this.frames.length
    }, e.prototype.setFrame = function (t, e) {
      this.frames[t] = e.time, this.events[t] = e
    }, e.prototype.apply = function (t, e, r, n, i, s, o) {
      if (n) {
        var h = this.frames, l = this.frames.length
        if (e > r) this.apply(t, e, Number.MAX_VALUE, n, i, s, o), e = -1 else if (e >= h[l - 1]) return
        if (!(r < h[0])) {
          var c = 0
          if (e < h[0]) {
            c = 0
          } else {
            c = a.search1(h, e) + 1
            for (var p = h[c]; c > 0 && h[c - 1] == p;) c--
          }
          for (; l > c && r >= h[c]; c++) n.push(this.events[c])
        }
      }
    }, e.propertyIds = ['' + i.event], e
  }(a)
  t.EventTimeline = T, __reflect(T.prototype, 'spine.EventTimeline')
  var M = function (e) {
    function s (t) {
      var r = e.call(this, t, s.propertyIds) || this
      return r.drawOrders = null, r.drawOrders = new Array(t), r
    }

    return __extends(s, e), s.prototype.getFrameCount = function () {
      return this.frames.length
    }, s.prototype.setFrame = function (t, e, r) {
      this.frames[t] = e, this.drawOrders[t] = r
    }, s.prototype.apply = function (e, i, s, o, h, l, c) {
      if (c == n.mixOut) return void (l == r.setup && t.Utils.arrayCopy(e.slots, 0, e.drawOrder, 0, e.slots.length))
      if (s < this.frames[0]) return void ((l == r.setup || l == r.first) && t.Utils.arrayCopy(e.slots, 0, e.drawOrder, 0, e.slots.length))
      var p = this.drawOrders[a.search1(this.frames, s)]
      if (p) for (var u = e.drawOrder, d = e.slots, f = 0, m = p.length; m > f; f++) u[f] = d[p[f]] else t.Utils.arrayCopy(e.slots, 0, e.drawOrder, 0, e.slots.length)
    }, s.propertyIds = ['' + i.drawOrder], s
  }(a)
  t.DrawOrderTimeline = M, __reflect(M.prototype, 'spine.DrawOrderTimeline')
  var C = function (t) {
    function e (e, r, n) {
      var a = t.call(this, e, r, [i.ikConstraint + '|' + n]) || this
      return a.ikConstraintIndex = 0, a.ikConstraintIndex = n, a
    }

    return __extends(e, t), e.prototype.getFrameEntries = function () {
      return 6
    }, e.prototype.setFrame = function (t, e, r, n, i, a, s) {
      t *= 6, this.frames[t] = e, this.frames[t + 1] = r, this.frames[t + 2] = n, this.frames[t + 3] = i, this.frames[t + 4] = a ? 1 : 0, this.frames[t + 5] = s ? 1 : 0
    }, e.prototype.apply = function (t, e, i, s, o, h, l) {
      var c = t.ikConstraints[this.ikConstraintIndex]
      if (c.active) {
        var p = this.frames
        if (i < p[0]) {
          switch (h) {
            case r.setup:
              return c.mix = c.data.mix, c.softness = c.data.softness, c.bendDirection = c.data.bendDirection, c.compress = c.data.compress, void (c.stretch = c.data.stretch)
            case r.first:
              c.mix += (c.data.mix - c.mix) * o, c.softness += (c.data.softness - c.softness) * o, c.bendDirection = c.data.bendDirection, c.compress = c.data.compress, c.stretch = c.data.stretch
          }
        } else {
          var u = 0, d = 0, f = a.search(p, i, 6), m = this.curves[f / 6]
          switch (m) {
            case 0:
              var v = p[f]
              u = p[f + 1], d = p[f + 2]
              var g = (i - v) / (p[f + 6] - v)
              u += (p[f + 6 + 1] - u) * g, d += (p[f + 6 + 2] - d) * g
              break
            case 1:
              u = p[f + 1], d = p[f + 2]
              break
            default:
              u = this.getBezierValue(i, f, 1, m - 2), d = this.getBezierValue(i, f, 2, m + 18 - 2)
          }
          h == r.setup ? (c.mix = c.data.mix + (u - c.data.mix) * o, c.softness = c.data.softness + (d - c.data.softness) * o, l == n.mixOut ? (c.bendDirection = c.data.bendDirection, c.compress = c.data.compress, c.stretch = c.data.stretch) : (c.bendDirection = p[f + 3], c.compress = 0 != p[f + 4], c.stretch = 0 != p[f + 5])) : (c.mix += (u - c.mix) * o, c.softness += (d - c.softness) * o, l == n.mixIn && (c.bendDirection = p[f + 3], c.compress = 0 != p[f + 4], c.stretch = 0 != p[f + 5]))
        }
      }
    }, e
  }(s)
  t.IkConstraintTimeline = C, __reflect(C.prototype, 'spine.IkConstraintTimeline')
  var I = function (t) {
    function e (e, r, n) {
      var a = t.call(this, e, r, [i.transformConstraint + '|' + n]) || this
      return a.transformConstraintIndex = 0, a.transformConstraintIndex = n, a
    }

    return __extends(e, t), e.prototype.getFrameEntries = function () {
      return 7
    }, e.prototype.setFrame = function (t, e, r, n, i, a, s, o) {
      var h = this.frames
      t *= 7, h[t] = e, h[t + 1] = r, h[t + 2] = n, h[t + 3] = i, h[t + 4] = a, h[t + 5] = s, h[t + 6] = o
    }, e.prototype.apply = function (t, e, n, i, s, o, h) {
      var l = t.transformConstraints[this.transformConstraintIndex]
      if (l.active) {
        var c = this.frames
        if (n < c[0]) {
          var p = l.data
          switch (o) {
            case r.setup:
              return l.mixRotate = p.mixRotate, l.mixX = p.mixX, l.mixY = p.mixY, l.mixScaleX = p.mixScaleX, l.mixScaleY = p.mixScaleY, void (l.mixShearY = p.mixShearY)
            case r.first:
              l.mixRotate += (p.mixRotate - l.mixRotate) * s, l.mixX += (p.mixX - l.mixX) * s, l.mixY += (p.mixY - l.mixY) * s, l.mixScaleX += (p.mixScaleX - l.mixScaleX) * s, l.mixScaleY += (p.mixScaleY - l.mixScaleY) * s, l.mixShearY += (p.mixShearY - l.mixShearY) * s
          }
        } else {
          var u, d, f, m, v, g, y = a.search(c, n, 7), _ = this.curves[y / 7]
          switch (_) {
            case 0:
              var x = c[y]
              u = c[y + 1], d = c[y + 2], f = c[y + 3], m = c[y + 4], v = c[y + 5], g = c[y + 6]
              var w = (n - x) / (c[y + 7] - x)
              u += (c[y + 7 + 1] - u) * w, d += (c[y + 7 + 2] - d) * w, f += (c[y + 7 + 3] - f) * w, m += (c[y + 7 + 4] - m) * w, v += (c[y + 7 + 5] - v) * w, g += (c[y + 7 + 6] - g) * w
              break
            case 1:
              u = c[y + 1], d = c[y + 2], f = c[y + 3], m = c[y + 4], v = c[y + 5], g = c[y + 6]
              break
            default:
              u = this.getBezierValue(n, y, 1, _ - 2), d = this.getBezierValue(n, y, 2, _ + 18 - 2), f = this.getBezierValue(n, y, 3, _ + 36 - 2), m = this.getBezierValue(n, y, 4, _ + 54 - 2), v = this.getBezierValue(n, y, 5, _ + 72 - 2), g = this.getBezierValue(n, y, 6, _ + 90 - 2)
          }
          if (o == r.setup) {
            var p = l.data
            l.mixRotate = p.mixRotate + (u - p.mixRotate) * s, l.mixX = p.mixX + (d - p.mixX) * s, l.mixY = p.mixY + (f - p.mixY) * s, l.mixScaleX = p.mixScaleX + (m - p.mixScaleX) * s, l.mixScaleY = p.mixScaleY + (v - p.mixScaleY) * s, l.mixShearY = p.mixShearY + (g - p.mixShearY) * s
          } else {
            l.mixRotate += (u - l.mixRotate) * s, l.mixX += (d - l.mixX) * s, l.mixY += (f - l.mixY) * s, l.mixScaleX += (m - l.mixScaleX) * s, l.mixScaleY += (v - l.mixScaleY) * s, l.mixShearY += (g - l.mixShearY) * s
          }
        }
      }
    }, e
  }(s)
  t.TransformConstraintTimeline = I, __reflect(I.prototype, 'spine.TransformConstraintTimeline')
  var F = function (t) {
    function e (e, r, n) {
      var a = t.call(this, e, r, i.pathConstraintPosition + '|' + n) || this
      return a.pathConstraintIndex = 0, a.pathConstraintIndex = n, a
    }

    return __extends(e, t), e.prototype.apply = function (t, e, n, i, a, s, o) {
      var h = t.pathConstraints[this.pathConstraintIndex]
      if (h.active) {
        var l = this.frames
        if (n < l[0]) {
          switch (s) {
            case r.setup:
              return void (h.position = h.data.position)
            case r.first:
              h.position += (h.data.position - h.position) * a
          }
        } else {
          var c = this.getCurveValue(n)
          s == r.setup ? h.position = h.data.position + (c - h.data.position) * a : h.position += (c - h.position) * a
        }
      }
    }, e
  }(o)
  t.PathConstraintPositionTimeline = F, __reflect(F.prototype, 'spine.PathConstraintPositionTimeline')
  var Y = function (t) {
    function e (e, r, n) {
      var a = t.call(this, e, r, i.pathConstraintSpacing + '|' + n) || this
      return a.pathConstraintIndex = 0, a.pathConstraintIndex = n, a
    }

    return __extends(e, t), e.prototype.apply = function (t, e, n, i, a, s, o) {
      var h = t.pathConstraints[this.pathConstraintIndex]
      if (h.active) {
        var l = this.frames
        if (n < l[0]) {
          switch (s) {
            case r.setup:
              return void (h.spacing = h.data.spacing)
            case r.first:
              h.spacing += (h.data.spacing - h.spacing) * a
          }
        } else {
          var c = this.getCurveValue(n)
          s == r.setup ? h.spacing = h.data.spacing + (c - h.data.spacing) * a : h.spacing += (c - h.spacing) * a
        }
      }
    }, e
  }(o)
  t.PathConstraintSpacingTimeline = Y, __reflect(Y.prototype, 'spine.PathConstraintSpacingTimeline')
  var R = function (t) {
    function e (e, r, n) {
      var a = t.call(this, e, r, [i.pathConstraintMix + '|' + n]) || this
      return a.pathConstraintIndex = 0, a.pathConstraintIndex = n, a
    }

    return __extends(e, t), e.prototype.getFrameEntries = function () {
      return 4
    }, e.prototype.setFrame = function (t, e, r, n, i) {
      var a = this.frames
      t <<= 2, a[t] = e, a[t + 1] = r, a[t + 2] = n, a[t + 3] = i
    }, e.prototype.apply = function (t, e, n, i, s, o, h) {
      var l = t.pathConstraints[this.pathConstraintIndex]
      if (l.active) {
        var c = this.frames
        if (n < c[0]) {
          switch (o) {
            case r.setup:
              return l.mixRotate = l.data.mixRotate, l.mixX = l.data.mixX, void (l.mixY = l.data.mixY)
            case r.first:
              l.mixRotate += (l.data.mixRotate - l.mixRotate) * s, l.mixX += (l.data.mixX - l.mixX) * s, l.mixY += (l.data.mixY - l.mixY) * s
          }
        } else {
          var p, u, d, f = a.search(c, n, 4), m = this.curves[f >> 2]
          switch (m) {
            case 0:
              var v = c[f]
              p = c[f + 1], u = c[f + 2], d = c[f + 3]
              var g = (n - v) / (c[f + 4] - v)
              p += (c[f + 4 + 1] - p) * g, u += (c[f + 4 + 2] - u) * g, d += (c[f + 4 + 3] - d) * g
              break
            case 1:
              p = c[f + 1], u = c[f + 2], d = c[f + 3]
              break
            default:
              p = this.getBezierValue(n, f, 1, m - 2), u = this.getBezierValue(n, f, 2, m + 18 - 2), d = this.getBezierValue(n, f, 3, m + 36 - 2)
          }
          if (o == r.setup) {
            var y = l.data
            l.mixRotate = y.mixRotate + (p - y.mixRotate) * s, l.mixX = y.mixX + (u - y.mixX) * s, l.mixY = y.mixY + (d - y.mixY) * s
          } else {
            l.mixRotate += (p - l.mixRotate) * s, l.mixX += (u - l.mixX) * s, l.mixY += (d - l.mixY) * s
          }
        }
      }
    }, e
  }(s)
  t.PathConstraintMixTimeline = R, __reflect(R.prototype, 'spine.PathConstraintMixTimeline')
}(spine || (spine = {}))
var __reflect = this && this.__reflect || function (t, e, r) {
  t.__class__ = e, r ? r.push(e) : r = [e], t.__types__ = t.__types__ ? r.concat(t.__types__) : r
}, __extends = this && this.__extends || function (t, e) {
  function r () {
    this.constructor = t
  }

  for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
  r.prototype = e.prototype, t.prototype = new r
}, spine
!function (t) {
  var e = function () {
    function e (e) {
      this.pages = new Array, this.regions = new Array
      var a = new r(e), s = new Array(4), o = null, h = null, l = {}
      l.size = function () {
        o.width = parseInt(s[1]), o.height = parseInt(s[2])
      }, l.format = function () {
      }, l.filter = function () {
        o.minFilter = t.Utils.enumValue(t.TextureFilter, s[1]), o.magFilter = t.Utils.enumValue(t.TextureFilter, s[2])
      }, l.repeat = function () {
        -1 != s[1].indexOf('x') && (o.uWrap = t.TextureWrap.Repeat), -1 != s[1].indexOf('y') && (o.vWrap = t.TextureWrap.Repeat)
      }, l.pma = function () {
        o.pma = 'true' == s[1]
      }
      var c = {}
      c.xy = function () {
        h.x = parseInt(s[1]), h.y = parseInt(s[2])
      }, c.size = function () {
        h.width = parseInt(s[1]), h.height = parseInt(s[2])
      }, c.bounds = function () {
        h.x = parseInt(s[1]), h.y = parseInt(s[2]), h.width = parseInt(s[3]), h.height = parseInt(s[4])
      }, c.offset = function () {
        h.offsetX = parseInt(s[1]), h.offsetY = parseInt(s[2])
      }, c.orig = function () {
        h.originalWidth = parseInt(s[1]), h.originalHeight = parseInt(s[2])
      }, c.offsets = function () {
        h.offsetX = parseInt(s[1]), h.offsetY = parseInt(s[2]), h.originalWidth = parseInt(s[3]), h.originalHeight = parseInt(s[4])
      }, c.rotate = function () {
        var t = s[1]
        'true' == t ? h.degrees = 90 : 'false' != t && (h.degrees = parseInt(t))
      }, c.index = function () {
        h.index = parseInt(s[1])
      }
      for (var p = a.readLine(); p && 0 == p.trim().length;) p = a.readLine()
      for (; ;) {
        if (!p || 0 == p.trim().length) break
        if (0 == a.readEntry(s, p)) break
        p = a.readLine()
      }
      for (var u = null, d = null; ;) {
        if (null === p) break
        if (0 == p.trim().length) {
          o = null, p = a.readLine()
        } else if (o) {
          for (h = new i, h.page = o, h.name = p; ;) {
            var f = a.readEntry(s, p = a.readLine())
            if (0 == f) break
            var m = c[s[0]]
            if (m) {
              m()
            } else {
              u || (u = [], d = []), u.push(s[0])
              for (var v = [], g = 0; f > g; g++) v.push(parseInt(s[g + 1]))
              d.push(v)
            }
          }
          0 == h.originalWidth && 0 == h.originalHeight && (h.originalWidth = h.width, h.originalHeight = h.height), u && u.length > 0 && (h.names = u, h.values = d, u = null, d = null), h.u = h.x / o.width, h.v = h.y / o.height, 90 == h.degrees ? (h.u2 = (h.x + h.height) / o.width, h.v2 = (h.y + h.width) / o.height) : (h.u2 = (h.x + h.width) / o.width, h.v2 = (h.y + h.height) / o.height), this.regions.push(h)
        } else {
          for (o = new n, o.name = p.trim(); ;) {
            if (0 == a.readEntry(s, p = a.readLine())) break
            var m = l[s[0]]
            m && m()
          }
          this.pages.push(o)
        }
      }
    }

    return e.prototype.findRegion = function (t) {
      for (var e = 0; e < this.regions.length; e++) if (this.regions[e].name == t) return this.regions[e]
      return null
    }, e.prototype.setTextures = function (t, e) {
      void 0 === e && (e = '')
      for (var r = 0, n = this.pages; r < n.length; r++) {
        var i = n[r]
        i.setTexture(t.get(e + i.name))
      }
    }, e.prototype.dispose = function () {
      for (var t = 0; t < this.pages.length; t++) this.pages[t].texture.dispose()
    }, e
  }()
  t.TextureAtlas = e, __reflect(e.prototype, 'spine.TextureAtlas', ['spine.Disposable'])
  var r = function () {
    function t (t) {
      this.lines = null, this.index = 0, this.lines = t.split(/\r\n|\r|\n/)
    }

    return t.prototype.readLine = function () {
      return this.index >= this.lines.length ? null : this.lines[this.index++]
    }, t.prototype.readEntry = function (t, e) {
      if (!e) return 0
      if (e = e.trim(), 0 == e.length) return 0
      var r = e.indexOf(':')
      if (-1 == r) return 0
      t[0] = e.substr(0, r).trim()
      for (var n = 1, i = r + 1; ; n++) {
        var a = e.indexOf(',', i)
        if (-1 == a) return t[n] = e.substr(i).trim(), n
        if (t[n] = e.substr(i, a - i).trim(), i = a + 1, 4 == n) return 4
      }
    }, t
  }()
  __reflect(r.prototype, 'TextureAtlasReader')
  var n = function () {
    function e () {
      this.name = null, this.minFilter = t.TextureFilter.Nearest, this.magFilter = t.TextureFilter.Nearest, this.uWrap = t.TextureWrap.ClampToEdge, this.vWrap = t.TextureWrap.ClampToEdge, this.texture = null, this.width = 0, this.height = 0, this.pma = !1
    }

    return e.prototype.setTexture = function (e) {
      this.texture = e, e.setFilters(this.minFilter, this.magFilter), e.setWraps(this.uWrap, this.vWrap), e instanceof t.EgretTexture && (e.premultipliedAlpha = this.pma)
    }, e
  }()
  t.TextureAtlasPage = n, __reflect(n.prototype, 'spine.TextureAtlasPage')
  var i = function (t) {
    function e () {
      var e = null !== t && t.apply(this, arguments) || this
      return e.page = null, e.name = null, e.x = 0, e.y = 0, e.offsetX = 0, e.offsetY = 0, e.originalWidth = 0, e.originalHeight = 0, e.index = 0, e.degrees = 0, e.names = null, e.values = null, e
    }

    return __extends(e, t), e
  }(t.TextureRegion)
  t.TextureAtlasRegion = i, __reflect(i.prototype, 'spine.TextureAtlasRegion')
}(spine || (spine = {}))
var __reflect = this && this.__reflect || function (t, e, r) {
  t.__class__ = e, r ? r.push(e) : r = [e], t.__types__ = t.__types__ ? r.concat(t.__types__) : r
}, spine
!function (t) {
  var e = function () {
    function e (e, r) {
      if (this.data = null, this.bones = null, this.target = null, this.mixRotate = 0, this.mixX = 0, this.mixY = 0, this.mixScaleX = 0, this.mixScaleY = 0, this.mixShearY = 0, this.temp = new t.Vector2, this.active = !1, !e) throw new Error('data cannot be null.')
      if (!r) throw new Error('skeleton cannot be null.')
      this.data = e, this.mixRotate = e.mixRotate, this.mixX = e.mixX, this.mixY = e.mixY, this.mixScaleX = e.mixScaleX, this.mixScaleY = e.mixScaleY, this.mixShearY = e.mixShearY, this.bones = new Array
      for (var n = 0; n < e.bones.length; n++) this.bones.push(r.findBone(e.bones[n].name))
      this.target = r.findBone(e.target.name)
    }

    return e.prototype.isActive = function () {
      return this.active
    }, e.prototype.update = function () {
      (0 != this.mixRotate || 0 != this.mixX || 0 != this.mixY || 0 != this.mixScaleX || 0 != this.mixScaleX || 0 != this.mixShearY) && (this.data.local ? this.data.relative ? this.applyRelativeLocal() : this.applyAbsoluteLocal() : this.data.relative ? this.applyRelativeWorld() : this.applyAbsoluteWorld())
    }, e.prototype.applyAbsoluteWorld = function () {
      for (var e = this.mixRotate, r = this.mixX, n = this.mixY, i = this.mixScaleX, a = this.mixScaleY, s = this.mixShearY, o = 0 != r || 0 != n, h = this.target, l = h.a, c = h.b, p = h.c, u = h.d, d = l * u - c * p > 0 ? t.MathUtils.degRad : -t.MathUtils.degRad, f = this.data.offsetRotation * d, m = this.data.offsetShearY * d, v = this.bones, g = 0, y = v.length; y > g; g++) {
        var _ = v[g]
        if (0 != e) {
          var x = _.a, w = _.b, b = _.c, S = _.d, A = Math.atan2(p, l) - Math.atan2(b, x) + f
          A > t.MathUtils.PI ? A -= t.MathUtils.PI2 : A < -t.MathUtils.PI && (A += t.MathUtils.PI2), A *= e
          var k = Math.cos(A), T = Math.sin(A)
          _.a = k * x - T * b, _.b = k * w - T * S, _.c = T * x + k * b, _.d = T * w + k * S
        }
        if (o) {
          var M = this.temp
          h.localToWorld(M.set(this.data.offsetX, this.data.offsetY)), _.worldX += (M.x - _.worldX) * r, _.worldY += (M.y - _.worldY) * n
        }
        if (0 != i) {
          var C = Math.sqrt(_.a * _.a + _.c * _.c)
          0 != C && (C = (C + (Math.sqrt(l * l + p * p) - C + this.data.offsetScaleX) * i) / C), _.a *= C, _.c *= C
        }
        if (0 != a) {
          var C = Math.sqrt(_.b * _.b + _.d * _.d)
          0 != C && (C = (C + (Math.sqrt(c * c + u * u) - C + this.data.offsetScaleY) * a) / C), _.b *= C, _.d *= C
        }
        if (s > 0) {
          var w = _.b, S = _.d, I = Math.atan2(S, w),
            A = Math.atan2(u, c) - Math.atan2(p, l) - (I - Math.atan2(_.c, _.a))
          A > t.MathUtils.PI ? A -= t.MathUtils.PI2 : A < -t.MathUtils.PI && (A += t.MathUtils.PI2), A = I + (A + m) * s
          var C = Math.sqrt(w * w + S * S)
          _.b = Math.cos(A) * C, _.d = Math.sin(A) * C
        }
        _.updateAppliedTransform()
      }
    }, e.prototype.applyRelativeWorld = function () {
      for (var e = this.mixRotate, r = this.mixX, n = this.mixY, i = this.mixScaleX, a = this.mixScaleY, s = this.mixShearY, o = 0 != r || 0 != n, h = this.target, l = h.a, c = h.b, p = h.c, u = h.d, d = l * u - c * p > 0 ? t.MathUtils.degRad : -t.MathUtils.degRad, f = this.data.offsetRotation * d, m = this.data.offsetShearY * d, v = this.bones, g = 0, y = v.length; y > g; g++) {
        var _ = v[g]
        if (0 != e) {
          var x = _.a, w = _.b, b = _.c, S = _.d, A = Math.atan2(p, l) + f
          A > t.MathUtils.PI ? A -= t.MathUtils.PI2 : A < -t.MathUtils.PI && (A += t.MathUtils.PI2), A *= e
          var k = Math.cos(A), T = Math.sin(A)
          _.a = k * x - T * b, _.b = k * w - T * S, _.c = T * x + k * b, _.d = T * w + k * S
        }
        if (o) {
          var M = this.temp
          h.localToWorld(M.set(this.data.offsetX, this.data.offsetY)), _.worldX += M.x * r, _.worldY += M.y * n
        }
        if (0 != i) {
          var C = (Math.sqrt(l * l + p * p) - 1 + this.data.offsetScaleX) * i + 1
          _.a *= C, _.c *= C
        }
        if (0 != a) {
          var C = (Math.sqrt(c * c + u * u) - 1 + this.data.offsetScaleY) * a + 1
          _.b *= C, _.d *= C
        }
        if (s > 0) {
          var A = Math.atan2(u, c) - Math.atan2(p, l)
          A > t.MathUtils.PI ? A -= t.MathUtils.PI2 : A < -t.MathUtils.PI && (A += t.MathUtils.PI2)
          var w = _.b, S = _.d
          A = Math.atan2(S, w) + (A - t.MathUtils.PI / 2 + m) * s
          var C = Math.sqrt(w * w + S * S)
          _.b = Math.cos(A) * C, _.d = Math.sin(A) * C
        }
        _.updateAppliedTransform()
      }
    }, e.prototype.applyAbsoluteLocal = function () {
      for (var t = this.mixRotate, e = this.mixX, r = this.mixY, n = this.mixScaleX, i = this.mixScaleY, a = this.mixShearY, s = this.target, o = this.bones, h = 0, l = o.length; l > h; h++) {
        var c = o[h], p = c.arotation
        if (0 != t) {
          var u = s.arotation - p + this.data.offsetRotation
          u -= 360 * (16384 - (16384.499999999996 - u / 360 | 0)), p += u * t
        }
        var d = c.ax, f = c.ay
        d += (s.ax - d + this.data.offsetX) * e, f += (s.ay - f + this.data.offsetY) * r
        var m = c.ascaleX, v = c.ascaleY
        0 != n && 0 != m && (m = (m + (s.ascaleX - m + this.data.offsetScaleX) * n) / m), 0 != i && 0 != v && (v = (v + (s.ascaleY - v + this.data.offsetScaleY) * i) / v)
        var g = c.ashearY
        if (0 != a) {
          var u = s.ashearY - g + this.data.offsetShearY
          u -= 360 * (16384 - (16384.499999999996 - u / 360 | 0)), g += u * a
        }
        c.updateWorldTransformWith(d, f, p, m, v, c.ashearX, g)
      }
    }, e.prototype.applyRelativeLocal = function () {
      for (var t = this.mixRotate, e = this.mixX, r = this.mixY, n = this.mixScaleX, i = this.mixScaleY, a = this.mixShearY, s = this.target, o = this.bones, h = 0, l = o.length; l > h; h++) {
        var c = o[h], p = c.arotation + (s.arotation + this.data.offsetRotation) * t,
          u = c.ax + (s.ax + this.data.offsetX) * e, d = c.ay + (s.ay + this.data.offsetY) * r,
          f = c.ascaleX * ((s.ascaleX - 1 + this.data.offsetScaleX) * n + 1),
          m = c.ascaleY * ((s.ascaleY - 1 + this.data.offsetScaleY) * i + 1),
          v = c.ashearY + (s.ashearY + this.data.offsetShearY) * a
        c.updateWorldTransformWith(u, d, p, f, m, c.ashearX, v)
      }
    }, e
  }()
  t.TransformConstraint = e, __reflect(e.prototype, 'spine.TransformConstraint', ['spine.Updatable'])
}(spine || (spine = {}))
var __reflect = this && this.__reflect || function (t, e, r) {
  t.__class__ = e, r ? r.push(e) : r = [e], t.__types__ = t.__types__ ? r.concat(t.__types__) : r
}, __extends = this && this.__extends || function (t, e) {
  function r () {
    this.constructor = t
  }

  for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
  r.prototype = e.prototype, t.prototype = new r
}, spine
!function (t) {
  var e = function (t) {
    function e (e) {
      var r = t.call(this, e, 0, !1) || this
      return r.bones = new Array, r.target = null, r.mixRotate = 0, r.mixX = 0, r.mixY = 0, r.mixScaleX = 0, r.mixScaleY = 0, r.mixShearY = 0, r.offsetRotation = 0, r.offsetX = 0, r.offsetY = 0, r.offsetScaleX = 0, r.offsetScaleY = 0, r.offsetShearY = 0, r.relative = !1, r.local = !1, r
    }

    return __extends(e, t), e
  }(t.ConstraintData)
  t.TransformConstraintData = e, __reflect(e.prototype, 'spine.TransformConstraintData')
}(spine || (spine = {}))
var __reflect = this && this.__reflect || function (t, e, r) {
  t.__class__ = e, r ? r.push(e) : r = [e], t.__types__ = t.__types__ ? r.concat(t.__types__) : r
}, spine
!function (t) {
  var e = function () {
    function e () {
      this.convexPolygons = new Array, this.convexPolygonsIndices = new Array, this.indicesArray = new Array, this.isConcaveArray = new Array, this.triangles = new Array, this.polygonPool = new t.Pool(function () {
        return new Array
      }), this.polygonIndicesPool = new t.Pool(function () {
        return new Array
      })
    }

    return e.prototype.triangulate = function (t) {
      var r = t, n = t.length >> 1, i = this.indicesArray
      i.length = 0
      for (var a = 0; n > a; a++) i[a] = a
      var s = this.isConcaveArray
      s.length = 0
      for (var a = 0, o = n; o > a; ++a) s[a] = e.isConcave(a, n, r, i)
      var h = this.triangles
      for (h.length = 0; n > 3;) {
        for (var l = n - 1, a = 0, c = 1; ;) {
          t:if (!s[a]) {
            for (var p = i[l] << 1, u = i[a] << 1, d = i[c] << 1, f = r[p], m = r[p + 1], v = r[u], g = r[u + 1], y = r[d], _ = r[d + 1], x = (c + 1) % n; x != l; x = (x + 1) % n) {
              if (s[x]) {
                var w = i[x] << 1, b = r[w], S = r[w + 1]
                if (e.positiveArea(y, _, f, m, b, S) && e.positiveArea(f, m, v, g, b, S) && e.positiveArea(v, g, y, _, b, S)) break t
              }
            }
            break
          }
          if (0 == c) {
            do {
              if (!s[a]) break
              a--
            } while (a > 0)
            break
          }
          l = a, a = c, c = (c + 1) % n
        }
        h.push(i[(n + a - 1) % n]), h.push(i[a]), h.push(i[(a + 1) % n]), i.splice(a, 1), s.splice(a, 1), n--
        var A = (n + a - 1) % n, k = a == n ? 0 : a
        s[A] = e.isConcave(A, n, r, i), s[k] = e.isConcave(k, n, r, i)
      }
      return 3 == n && (h.push(i[2]), h.push(i[0]), h.push(i[1])), h
    }, e.prototype.decompose = function (t, r) {
      var n = t, i = this.convexPolygons
      this.polygonPool.freeAll(i), i.length = 0
      var a = this.convexPolygonsIndices
      this.polygonIndicesPool.freeAll(a), a.length = 0
      var s = this.polygonIndicesPool.obtain()
      s.length = 0
      var o = this.polygonPool.obtain()
      o.length = 0
      for (var h = -1, l = 0, c = 0, p = r.length; p > c; c += 3) {
        var u = r[c] << 1, d = r[c + 1] << 1, f = r[c + 2] << 1, m = n[u], v = n[u + 1], g = n[d], y = n[d + 1],
          _ = n[f], x = n[f + 1], w = !1
        if (h == u) {
          var b = o.length - 4, S = e.winding(o[b], o[b + 1], o[b + 2], o[b + 3], _, x),
            A = e.winding(_, x, o[0], o[1], o[2], o[3])
          S == l && A == l && (o.push(_), o.push(x), s.push(f), w = !0)
        }
        w || (o.length > 0 ? (i.push(o), a.push(s)) : (this.polygonPool.free(o), this.polygonIndicesPool.free(s)), o = this.polygonPool.obtain(), o.length = 0, o.push(m), o.push(v), o.push(g), o.push(y), o.push(_), o.push(x), s = this.polygonIndicesPool.obtain(), s.length = 0, s.push(u), s.push(d), s.push(f), l = e.winding(m, v, g, y, _, x), h = u)
      }
      o.length > 0 && (i.push(o), a.push(s))
      for (var c = 0, p = i.length; p > c; c++) {
        if (s = a[c], 0 != s.length) {
          var k = s[0], T = s[s.length - 1]
          o = i[c]
          for (var b = o.length - 4, M = o[b], C = o[b + 1], I = o[b + 2], F = o[b + 3], Y = o[0], R = o[1], X = o[2], E = o[3], U = e.winding(M, C, I, F, Y, R), B = 0; p > B; B++) {
            if (B != c) {
              var P = a[B]
              if (3 == P.length) {
                var D = P[0], V = P[1], L = P[2], N = i[B], _ = N[N.length - 2], x = N[N.length - 1]
                if (D == k && V == T) {
                  var S = e.winding(M, C, I, F, _, x), A = e.winding(_, x, Y, R, X, E)
                  S == U && A == U && (N.length = 0, P.length = 0, o.push(_), o.push(x), s.push(L), M = I, C = F, I = _, F = x, B = 0)
                }
              }
            }
          }
        }
      }
      for (var c = i.length - 1; c >= 0; c--) o = i[c], 0 == o.length && (i.splice(c, 1), this.polygonPool.free(o), s = a[c], a.splice(c, 1), this.polygonIndicesPool.free(s))
      return i
    }, e.isConcave = function (t, e, r, n) {
      var i = n[(e + t - 1) % e] << 1, a = n[t] << 1, s = n[(t + 1) % e] << 1
      return !this.positiveArea(r[i], r[i + 1], r[a], r[a + 1], r[s], r[s + 1])
    }, e.positiveArea = function (t, e, r, n, i, a) {
      return t * (a - n) + r * (e - a) + i * (n - e) >= 0
    }, e.winding = function (t, e, r, n, i, a) {
      var s = r - t, o = n - e
      return i * o - a * s + s * e - t * o >= 0 ? 1 : -1
    }, e
  }()
  t.Triangulator = e, __reflect(e.prototype, 'spine.Triangulator')
}(spine || (spine = {}))
var __reflect = this && this.__reflect || function (t, e, r) {
  t.__class__ = e, r ? r.push(e) : r = [e], t.__types__ = t.__types__ ? r.concat(t.__types__) : r
}, __extends = this && this.__extends || function (t, e) {
  function r () {
    this.constructor = t
  }

  for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
  r.prototype = e.prototype, t.prototype = new r
}, spine
!function (t) {
  function e () {
    return window.performance ? window.performance.now() / 1e3 : Date.now() / 1e3
  }

  t.getNowTime = e
  var r = function () {
    function t () {
      this.array = new Array
    }

    return t.prototype.add = function (t) {
      var e = this.contains(t)
      return this.array[0 | t] = 0 | t, !e
    }, t.prototype.contains = function (t) {
      return void 0 != this.array[0 | t]
    }, t.prototype.remove = function (t) {
      this.array[0 | t] = void 0
    }, t.prototype.clear = function () {
      this.array.length = 0
    }, t
  }()
  t.IntSet = r, __reflect(r.prototype, 'spine.IntSet')
  var n = function () {
    function t () {
      this.entries = {}, this.size = 0
    }

    return t.prototype.add = function (t) {
      var e = this.entries[t]
      return this.entries[t] = !0, e ? !1 : (this.size++, !0)
    }, t.prototype.addAll = function (t) {
      for (var e = this.size, r = 0, n = t.length; n > r; r++) this.add(t[r])
      return e != this.size
    }, t.prototype.contains = function (t) {
      return this.entries[t]
    }, t.prototype.clear = function () {
      this.entries = {}, this.size = 0
    }, t
  }()
  t.StringSet = n, __reflect(n.prototype, 'spine.StringSet')
  var i = function () {
    function t (t, e, r, n) {
      void 0 === t && (t = 0), void 0 === e && (e = 0), void 0 === r && (r = 0), void 0 === n && (n = 0), this.r = t, this.g = e, this.b = r, this.a = n
    }

    return t.prototype.set = function (t, e, r, n) {
      return this.r = t, this.g = e, this.b = r, this.a = n, this.clamp()
    }, t.prototype.setFromColor = function (t) {
      return this.r = t.r, this.g = t.g, this.b = t.b, this.a = t.a, this
    }, t.prototype.setFromString = function (t) {
      return t = '#' == t.charAt(0) ? t.substr(1) : t, this.r = parseInt(t.substr(0, 2), 16) / 255, this.g = parseInt(t.substr(2, 2), 16) / 255, this.b = parseInt(t.substr(4, 2), 16) / 255, this.a = 8 != t.length ? 1 : parseInt(t.substr(6, 2), 16) / 255, this
    }, t.prototype.add = function (t, e, r, n) {
      return this.r += t, this.g += e, this.b += r, this.a += n, this.clamp()
    }, t.prototype.clamp = function () {
      return this.r < 0 ? this.r = 0 : this.r > 1 && (this.r = 1), this.g < 0 ? this.g = 0 : this.g > 1 && (this.g = 1), this.b < 0 ? this.b = 0 : this.b > 1 && (this.b = 1), this.a < 0 ? this.a = 0 : this.a > 1 && (this.a = 1), this
    }, t.rgba8888ToColor = function (t, e) {
      t.r = ((4278190080 & e) >>> 24) / 255, t.g = ((16711680 & e) >>> 16) / 255, t.b = ((65280 & e) >>> 8) / 255, t.a = (255 & e) / 255
    }, t.rgb888ToColor = function (t, e) {
      t.r = ((16711680 & e) >>> 16) / 255, t.g = ((65280 & e) >>> 8) / 255, t.b = (255 & e) / 255
    }, t.fromString = function (e) {
      return (new t).setFromString(e)
    }, t.WHITE = new t(1, 1, 1, 1), t.RED = new t(1, 0, 0, 1), t.GREEN = new t(0, 1, 0, 1), t.BLUE = new t(0, 0, 1, 1), t.MAGENTA = new t(1, 0, 1, 1), t
  }()
  t.Color = i, __reflect(i.prototype, 'spine.Color')
  var a = function () {
    function t () {
    }

    return t.clamp = function (t, e, r) {
      return e > t ? e : t > r ? r : t
    }, t.cosDeg = function (e) {
      return Math.cos(e * t.degRad)
    }, t.sinDeg = function (e) {
      return Math.sin(e * t.degRad)
    }, t.signum = function (t) {
      return t > 0 ? 1 : 0 > t ? -1 : 0
    }, t.toInt = function (t) {
      return t > 0 ? Math.floor(t) : Math.ceil(t)
    }, t.cbrt = function (t) {
      var e = Math.pow(Math.abs(t), 1 / 3)
      return 0 > t ? -e : e
    }, t.randomTriangular = function (e, r) {
      return t.randomTriangularWith(e, r, .5 * (e + r))
    }, t.randomTriangularWith = function (t, e, r) {
      var n = Math.random(), i = e - t
      return (r - t) / i >= n ? t + Math.sqrt(n * i * (r - t)) : e - Math.sqrt((1 - n) * i * (e - r))
    }, t.isPowerOfTwo = function (t) {
      return t && 0 === (t & t - 1)
    }, t.PI = 3.1415927, t.PI2 = 2 * t.PI, t.radiansToDegrees = 180 / t.PI, t.radDeg = t.radiansToDegrees, t.degreesToRadians = t.PI / 180, t.degRad = t.degreesToRadians, t
  }()
  t.MathUtils = a, __reflect(a.prototype, 'spine.MathUtils')
  var s = function () {
    function t () {
    }

    return t.prototype.apply = function (t, e, r) {
      return t + (e - t) * this.applyInternal(r)
    }, t
  }()
  t.Interpolation = s, __reflect(s.prototype, 'spine.Interpolation')
  var o = function (t) {
    function e (e) {
      var r = t.call(this) || this
      return r.power = 2, r.power = e, r
    }

    return __extends(e, t), e.prototype.applyInternal = function (t) {
      return .5 >= t ? Math.pow(2 * t, this.power) / 2 : Math.pow(2 * (t - 1), this.power) / (this.power % 2 == 0 ? -2 : 2) + 1
    }, e
  }(s)
  t.Pow = o, __reflect(o.prototype, 'spine.Pow')
  var h = function (t) {
    function e (e) {
      return t.call(this, e) || this
    }

    return __extends(e, t), e.prototype.applyInternal = function (t) {
      return Math.pow(t - 1, this.power) * (this.power % 2 == 0 ? -1 : 1) + 1
    }, e
  }(o)
  t.PowOut = h, __reflect(h.prototype, 'spine.PowOut')
  var l = function () {
    function t () {
    }

    return t.arrayCopy = function (t, e, r, n, i) {
      for (var a = e, s = n; e + i > a; a++, s++) r[s] = t[a]
    }, t.arrayFill = function (t, e, r, n) {
      for (var i = e; r > i; i++) t[i] = n
    }, t.setArraySize = function (t, e, r) {
      void 0 === r && (r = 0)
      var n = t.length
      if (n == e) return t
      if (t.length = e, e > n) for (var i = n; e > i; i++) t[i] = r
      return t
    }, t.ensureArrayCapacity = function (e, r, n) {
      return void 0 === n && (n = 0), e.length >= r ? e : t.setArraySize(e, r, n)
    }, t.newArray = function (t, e) {
      for (var r = new Array(t), n = 0; t > n; n++) r[n] = e
      return r
    }, t.newFloatArray = function (e) {
      if (t.SUPPORTS_TYPED_ARRAYS) return new Float32Array(e)
      for (var r = new Array(e), n = 0; n < r.length; n++) r[n] = 0
      return r
    }, t.newShortArray = function (e) {
      if (t.SUPPORTS_TYPED_ARRAYS) return new Int16Array(e)
      for (var r = new Array(e), n = 0; n < r.length; n++) r[n] = 0
      return r
    }, t.toFloatArray = function (e) {
      return t.SUPPORTS_TYPED_ARRAYS ? new Float32Array(e) : e
    }, t.toSinglePrecision = function (e) {
      return t.SUPPORTS_TYPED_ARRAYS ? Math.fround(e) : e
    }, t.webkit602BugfixHelper = function (t, e) {
    }, t.contains = function (t, e, r) {
      void 0 === r && (r = !0)
      for (var n = 0; n < t.length; n++) if (t[n] == e) return !0
      return !1
    }, t.enumValue = function (t, e) {
      return t[e[0].toUpperCase() + e.slice(1)]
    }, t.SUPPORTS_TYPED_ARRAYS = 'undefined' != typeof Float32Array, t
  }()
  t.Utils = l, __reflect(l.prototype, 'spine.Utils')
  var c = function () {
    function t () {
    }

    return t.logBones = function (t) {
      for (var e = 0; e < t.bones.length; e++) {
        var r = t.bones[e]
        console.log(r.data.name + ', ' + r.a + ', ' + r.b + ', ' + r.c + ', ' + r.d + ', ' + r.worldX + ', ' + r.worldY)
      }
    }, t
  }()
  t.DebugUtils = c, __reflect(c.prototype, 'spine.DebugUtils')
  var p = function () {
    function t (t) {
      this.items = new Array, this.instantiator = t
    }

    return t.prototype.obtain = function () {
      return this.items.length > 0 ? this.items.pop() : this.instantiator()
    }, t.prototype.free = function (t) {
      t.reset && t.reset(), this.items.push(t)
    }, t.prototype.freeAll = function (t) {
      for (var e = 0; e < t.length; e++) this.free(t[e])
    }, t.prototype.clear = function () {
      this.items.length = 0
    }, t
  }()
  t.Pool = p, __reflect(p.prototype, 'spine.Pool')
  var u = function () {
    function t (t, e) {
      void 0 === t && (t = 0), void 0 === e && (e = 0), this.x = t, this.y = e
    }

    return t.prototype.set = function (t, e) {
      return this.x = t, this.y = e, this
    }, t.prototype.length = function () {
      var t = this.x, e = this.y
      return Math.sqrt(t * t + e * e)
    }, t.prototype.normalize = function () {
      var t = this.length()
      return 0 != t && (this.x /= t, this.y /= t), this
    }, t
  }()
  t.Vector2 = u, __reflect(u.prototype, 'spine.Vector2')
  var d = function () {
    function t () {
      this.maxDelta = .064, this.framesPerSecond = 0, this.delta = 0, this.totalTime = 0, this.lastTime = e(), this.frameCount = 0, this.frameTime = 0
    }

    return t.prototype.update = function () {
      var t = e()
      this.delta = t - this.lastTime, this.frameTime += this.delta, this.totalTime += this.delta, this.delta > this.maxDelta && (this.delta = this.maxDelta), this.lastTime = t, this.frameCount++, this.frameTime > 1 && (this.framesPerSecond = this.frameCount / this.frameTime, this.frameTime = 0, this.frameCount = 0)
    }, t
  }()
  t.TimeKeeper = d, __reflect(d.prototype, 'spine.TimeKeeper')
  var f = function () {
    function t (t) {
      void 0 === t && (t = 32), this.addedValues = 0, this.lastValue = 0, this.mean = 0, this.dirty = !0, this.values = new Array(t)
    }

    return t.prototype.hasEnoughData = function () {
      return this.addedValues >= this.values.length
    }, t.prototype.addValue = function (t) {
      this.addedValues < this.values.length && this.addedValues++, this.values[this.lastValue++] = t, this.lastValue > this.values.length - 1 && (this.lastValue = 0), this.dirty = !0
    }, t.prototype.getMean = function () {
      if (this.hasEnoughData()) {
        if (this.dirty) {
          for (var t = 0, e = 0; e < this.values.length; e++) t += this.values[e]
          this.mean = t / this.values.length, this.dirty = !1
        }
        return this.mean
      }
      return 0
    }, t
  }()
  t.WindowedMean = f, __reflect(f.prototype, 'spine.WindowedMean')
}(spine || (spine = {}))
var __reflect = this && this.__reflect || function (t, e, r) {
  t.__class__ = e, r ? r.push(e) : r = [e], t.__types__ = t.__types__ ? r.concat(t.__types__) : r
}, spine
!function (t) {
  var e = function () {
    function e (t) {
      this.atlas = null, this.atlas = t
    }

    return e.prototype.newRegionAttachment = function (e, r, n) {
      var i = this.atlas.findRegion(n)
      if (!i) throw new Error('Region not found in atlas: ' + n + ' (region attachment: ' + r + ')')
      i.renderObject = i
      var a = new t.RegionAttachment(r)
      return a.setRegion(i), a
    }, e.prototype.newMeshAttachment = function (e, r, n) {
      var i = this.atlas.findRegion(n)
      if (!i) throw new Error('Region not found in atlas: ' + n + ' (mesh attachment: ' + r + ')')
      i.renderObject = i
      var a = new t.MeshAttachment(r)
      return a.region = i, a
    }, e.prototype.newBoundingBoxAttachment = function (e, r) {
      return new t.BoundingBoxAttachment(r)
    }, e.prototype.newPathAttachment = function (e, r) {
      return new t.PathAttachment(r)
    }, e.prototype.newPointAttachment = function (e, r) {
      return new t.PointAttachment(r)
    }, e.prototype.newClippingAttachment = function (e, r) {
      return new t.ClippingAttachment(r)
    }, e
  }()
  t.AtlasAttachmentLoader = e, __reflect(e.prototype, 'spine.AtlasAttachmentLoader', ['spine.AttachmentLoader'])
}(spine || (spine = {}))
var __reflect = this && this.__reflect || function (t, e, r) {
  t.__class__ = e, r ? r.push(e) : r = [e], t.__types__ = t.__types__ ? r.concat(t.__types__) : r
}, __extends = this && this.__extends || function (t, e) {
  function r () {
    this.constructor = t
  }

  for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
  r.prototype = e.prototype, t.prototype = new r
}, spine
!function (t) {
  var e = function (e) {
    function r (r) {
      var n = e.call(this, r) || this
      return n.color = new t.Color(1, 1, 1, 1), n
    }

    return __extends(r, e), r.prototype.copy = function () {
      var t = new r(this.name)
      return this.copyTo(t), t.color.setFromColor(this.color), t
    }, r
  }(t.VertexAttachment)
  t.BoundingBoxAttachment = e, __reflect(e.prototype, 'spine.BoundingBoxAttachment')
}(spine || (spine = {}))
var __reflect = this && this.__reflect || function (t, e, r) {
  t.__class__ = e, r ? r.push(e) : r = [e], t.__types__ = t.__types__ ? r.concat(t.__types__) : r
}, __extends = this && this.__extends || function (t, e) {
  function r () {
    this.constructor = t
  }

  for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
  r.prototype = e.prototype, t.prototype = new r
}, spine
!function (t) {
  var e = function (e) {
    function r (r) {
      var n = e.call(this, r) || this
      return n.endSlot = null, n.color = new t.Color(.2275, .2275, .8078, 1), n
    }

    return __extends(r, e), r.prototype.copy = function () {
      var t = new r(this.name)
      return this.copyTo(t), t.endSlot = this.endSlot, t.color.setFromColor(this.color), t
    }, r
  }(t.VertexAttachment)
  t.ClippingAttachment = e, __reflect(e.prototype, 'spine.ClippingAttachment')
}(spine || (spine = {}))
var __reflect = this && this.__reflect || function (t, e, r) {
  t.__class__ = e, r ? r.push(e) : r = [e], t.__types__ = t.__types__ ? r.concat(t.__types__) : r
}, __extends = this && this.__extends || function (t, e) {
  function r () {
    this.constructor = t
  }

  for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
  r.prototype = e.prototype, t.prototype = new r
}, spine
!function (t) {
  var e = function (e) {
    function r (r) {
      var n = e.call(this, r) || this
      return n.region = null, n.path = null, n.regionUVs = null, n.uvs = null, n.triangles = null, n.color = new t.Color(1, 1, 1, 1), n.width = 0, n.height = 0, n.hullLength = 0, n.edges = null, n.parentMesh = null, n.tempColor = new t.Color(0, 0, 0, 0), n
    }

    return __extends(r, e), r.prototype.updateUVs = function () {
      var e = this.regionUVs
      this.uvs && this.uvs.length == e.length || (this.uvs = t.Utils.newFloatArray(e.length))
      var r = this.uvs, n = this.uvs.length, i = this.region.u, a = this.region.v, s = 0, o = 0
      if (this.region instanceof t.TextureAtlasRegion) {
        var h = this.region, l = h.page.texture.getImage(), c = l.width, p = l.height
        switch (h.degrees) {
          case 90:
            i -= (h.originalHeight - h.offsetY - h.height) / c, a -= (h.originalWidth - h.offsetX - h.width) / p, s = h.originalHeight / c, o = h.originalWidth / p
            for (var u = 0; n > u; u += 2) r[u] = i + e[u + 1] * s, r[u + 1] = a + (1 - e[u]) * o
            return
          case 180:
            i -= (h.originalWidth - h.offsetX - h.width) / c, a -= h.offsetY / p, s = h.originalWidth / c, o = h.originalHeight / p
            for (var u = 0; n > u; u += 2) r[u] = i + (1 - e[u]) * s, r[u + 1] = a + (1 - e[u + 1]) * o
            return
          case 270:
            i -= h.offsetY / c, a -= h.offsetX / p, s = h.originalHeight / c, o = h.originalWidth / p
            for (var u = 0; n > u; u += 2) r[u] = i + (1 - e[u + 1]) * s, r[u + 1] = a + e[u] * o
            return
        }
        i -= h.offsetX / c, a -= (h.originalHeight - h.offsetY - h.height) / p, s = h.originalWidth / c, o = h.originalHeight / p
      } else {
        this.region ? (s = this.region.u2 - i, o = this.region.v2 - a) : (i = a = 0, s = o = 1)
      }
      for (var u = 0; n > u; u += 2) r[u] = i + e[u] * s, r[u + 1] = a + e[u + 1] * o
    }, r.prototype.getParentMesh = function () {
      return this.parentMesh
    }, r.prototype.setParentMesh = function (t) {
      this.parentMesh = t, t && (this.bones = t.bones, this.vertices = t.vertices, this.worldVerticesLength = t.worldVerticesLength, this.regionUVs = t.regionUVs, this.triangles = t.triangles, this.hullLength = t.hullLength, this.worldVerticesLength = t.worldVerticesLength)
    }, r.prototype.copy = function () {
      if (this.parentMesh) return this.newLinkedMesh()
      var e = new r(this.name)
      return e.region = this.region, e.path = this.path, e.color.setFromColor(this.color), this.copyTo(e), e.regionUVs = new Array(this.regionUVs.length), t.Utils.arrayCopy(this.regionUVs, 0, e.regionUVs, 0, this.regionUVs.length), e.uvs = new Array(this.uvs.length), t.Utils.arrayCopy(this.uvs, 0, e.uvs, 0, this.uvs.length), e.triangles = new Array(this.triangles.length), t.Utils.arrayCopy(this.triangles, 0, e.triangles, 0, this.triangles.length), e.hullLength = this.hullLength, this.edges && (e.edges = new Array(this.edges.length), t.Utils.arrayCopy(this.edges, 0, e.edges, 0, this.edges.length)), e.width = this.width, e.height = this.height, e
    }, r.prototype.newLinkedMesh = function () {
      var t = new r(this.name)
      return t.region = this.region, t.path = this.path, t.color.setFromColor(this.color), t.deformAttachment = this.deformAttachment, t.setParentMesh(this.parentMesh ? this.parentMesh : this), t.updateUVs(), t
    }, r
  }(t.VertexAttachment)
  t.MeshAttachment = e, __reflect(e.prototype, 'spine.MeshAttachment')
}(spine || (spine = {}))
var __reflect = this && this.__reflect || function (t, e, r) {
  t.__class__ = e, r ? r.push(e) : r = [e], t.__types__ = t.__types__ ? r.concat(t.__types__) : r
}, __extends = this && this.__extends || function (t, e) {
  function r () {
    this.constructor = t
  }

  for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
  r.prototype = e.prototype, t.prototype = new r
}, spine
!function (t) {
  var e = function (e) {
    function r (r) {
      var n = e.call(this, r) || this
      return n.lengths = null, n.closed = !1, n.constantSpeed = !1, n.color = new t.Color(1, 1, 1, 1), n
    }

    return __extends(r, e), r.prototype.copy = function () {
      var e = new r(this.name)
      return this.copyTo(e), e.lengths = new Array(this.lengths.length), t.Utils.arrayCopy(this.lengths, 0, e.lengths, 0, this.lengths.length), e.closed = closed, e.constantSpeed = this.constantSpeed, e.color.setFromColor(this.color), e
    }, r
  }(t.VertexAttachment)
  t.PathAttachment = e, __reflect(e.prototype, 'spine.PathAttachment')
}(spine || (spine = {}))
var __reflect = this && this.__reflect || function (t, e, r) {
  t.__class__ = e, r ? r.push(e) : r = [e], t.__types__ = t.__types__ ? r.concat(t.__types__) : r
}, __extends = this && this.__extends || function (t, e) {
  function r () {
    this.constructor = t
  }

  for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
  r.prototype = e.prototype, t.prototype = new r
}, spine
!function (t) {
  var e = function (e) {
    function r (r) {
      var n = e.call(this, r) || this
      return n.x = 0, n.y = 0, n.rotation = 0, n.color = new t.Color(.38, .94, 0, 1), n
    }

    return __extends(r, e), r.prototype.computeWorldPosition = function (t, e) {
      return e.x = this.x * t.a + this.y * t.b + t.worldX, e.y = this.x * t.c + this.y * t.d + t.worldY, e
    }, r.prototype.computeWorldRotation = function (e) {
      var r = t.MathUtils.cosDeg(this.rotation), n = t.MathUtils.sinDeg(this.rotation), i = r * e.a + n * e.b,
        a = r * e.c + n * e.d
      return Math.atan2(a, i) * t.MathUtils.radDeg
    }, r.prototype.copy = function () {
      var t = new r(this.name)
      return t.x = this.x, t.y = this.y, t.rotation = this.rotation, t.color.setFromColor(this.color), t
    }, r
  }(t.VertexAttachment)
  t.PointAttachment = e, __reflect(e.prototype, 'spine.PointAttachment')
}(spine || (spine = {}))
var __reflect = this && this.__reflect || function (t, e, r) {
  t.__class__ = e, r ? r.push(e) : r = [e], t.__types__ = t.__types__ ? r.concat(t.__types__) : r
}, __extends = this && this.__extends || function (t, e) {
  function r () {
    this.constructor = t
  }

  for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
  r.prototype = e.prototype, t.prototype = new r
}, spine
!function (t) {
  var e = function (e) {
    function r (r) {
      var n = e.call(this, r) || this
      return n.x = 0, n.y = 0, n.scaleX = 1, n.scaleY = 1, n.rotation = 0, n.width = 0, n.height = 0, n.color = new t.Color(1, 1, 1, 1), n.path = null, n.rendererObject = null, n.region = null, n.offset = t.Utils.newFloatArray(8), n.uvs = t.Utils.newFloatArray(8), n.tempColor = new t.Color(1, 1, 1, 1), n
    }

    return __extends(r, e), r.prototype.updateOffset = function () {
      var t = (this.region, this.width / this.region.originalWidth * this.scaleX),
        e = this.height / this.region.originalHeight * this.scaleY,
        r = -this.width / 2 * this.scaleX + this.region.offsetX * t,
        n = -this.height / 2 * this.scaleY + this.region.offsetY * e, i = r + this.region.width * t,
        a = n + this.region.height * e, s = this.rotation * Math.PI / 180, o = Math.cos(s), h = Math.sin(s), l = this.x,
        c = this.y, p = r * o + l, u = r * h, d = n * o + c, f = n * h, m = i * o + l, v = i * h, g = a * o + c,
        y = a * h, _ = this.offset
      _[0] = p - f, _[1] = d + u, _[2] = p - y, _[3] = g + u, _[4] = m - y, _[5] = g + v, _[6] = m - f, _[7] = d + v
    }, r.prototype.setRegion = function (t) {
      this.region = t
      var e = this.uvs
      90 == t.degrees ? (e[2] = t.u, e[3] = t.v2, e[4] = t.u, e[5] = t.v, e[6] = t.u2, e[7] = t.v, e[0] = t.u2, e[1] = t.v2) : (e[0] = t.u, e[1] = t.v2, e[2] = t.u, e[3] = t.v, e[4] = t.u2, e[5] = t.v, e[6] = t.u2, e[7] = t.v2)
    }, r.prototype.computeWorldVertices = function (t, e, r, n) {
      var i = this.offset, a = t.worldX, s = t.worldY, o = t.a, h = t.b, l = t.c, c = t.d, p = 0, u = 0
      p = i[0], u = i[1], e[r] = p * o + u * h + a, e[r + 1] = p * l + u * c + s, r += n, p = i[2], u = i[3], e[r] = p * o + u * h + a, e[r + 1] = p * l + u * c + s, r += n, p = i[4], u = i[5], e[r] = p * o + u * h + a, e[r + 1] = p * l + u * c + s, r += n, p = i[6], u = i[7], e[r] = p * o + u * h + a, e[r + 1] = p * l + u * c + s
    }, r.prototype.copy = function () {
      var e = new r(this.name)
      return e.region = this.region, e.rendererObject = this.rendererObject, e.path = this.path, e.x = this.x, e.y = this.y, e.scaleX = this.scaleX, e.scaleY = this.scaleY, e.rotation = this.rotation, e.width = this.width, e.height = this.height, t.Utils.arrayCopy(this.uvs, 0, e.uvs, 0, 8), t.Utils.arrayCopy(this.offset, 0, e.offset, 0, 8), e.color.setFromColor(this.color), e
    }, r.X1 = 0, r.Y1 = 1, r.C1R = 2, r.C1G = 3, r.C1B = 4, r.C1A = 5, r.U1 = 6, r.V1 = 7, r.X2 = 8, r.Y2 = 9, r.C2R = 10, r.C2G = 11, r.C2B = 12, r.C2A = 13, r.U2 = 14, r.V2 = 15, r.X3 = 16, r.Y3 = 17, r.C3R = 18, r.C3G = 19, r.C3B = 20, r.C3A = 21, r.U3 = 22, r.V3 = 23, r.X4 = 24, r.Y4 = 25, r.C4R = 26, r.C4G = 27, r.C4B = 28, r.C4A = 29, r.U4 = 30, r.V4 = 31, r
  }(t.Attachment)
  t.RegionAttachment = e, __reflect(e.prototype, 'spine.RegionAttachment')
}(spine || (spine = {}))
var __reflect = this && this.__reflect || function (t, e, r) {
  t.__class__ = e, r ? r.push(e) : r = [e], t.__types__ = t.__types__ ? r.concat(t.__types__) : r
}, __extends = this && this.__extends || function (t, e) {
  function r () {
    this.constructor = t
  }

  for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
  r.prototype = e.prototype, t.prototype = new r
}, spine
!function (t) {
  var e = function (e) {
    function r (r) {
      return void 0 === r && (r = ''), e.call(this, function (e) {
        return new t.EgretTexture(e)
      }, r) || this
    }

    return __extends(r, e), r.prototype.loadBinary = function (t, e, r) {
      var n = this
      void 0 === e && (e = null), void 0 === r && (r = null)
      var i = function (r) {
        r instanceof ArrayBuffer && (r = new Uint8Array(r)), n.success(e, t, r)
      }
      try {
        RES.hasRes(t) ? (this.start(t), i(RES.getRes(t))) : (t = this.start(t), RES.getResByUrl(t, i))
      } catch (a) {
        this.error(r, t, 'Couldn\'t load binary ' + t)
      }
    }, r.prototype.loadText = function (t, e, r) {
      var n = this
      void 0 === e && (e = null), void 0 === r && (r = null)
      var i = function (r) {
        n.success(e, t, r)
      }
      try {
        RES.hasRes(t) ? (this.start(t), i(RES.getRes(t))) : (t = this.start(t), RES.getResByUrl(t, i))
      } catch (a) {
        this.error(r, t, 'Couldn\'t load text ' + t)
      }
    }, r.prototype.loadJson = function (t, e, r) {
      var n = this
      void 0 === e && (e = null), void 0 === r && (r = null)
      var i = function (r) {
        n.success(e, t, r)
      }
      try {
        RES.hasRes(t) ? (this.start(t), i(RES.getRes(t))) : (t = this.start(t), RES.getResByUrl(t, i))
      } catch (a) {
        this.error(r, t, 'Couldn\'t load JSON ' + t)
      }
    }, r.prototype.loadTexture = function (t, e, r) {
      var n = this
      void 0 === e && (e = null), void 0 === r && (r = null)
      var i = function (r) {
        var i = r
        r instanceof egret.BitmapData && (i = new egret.Texture, i.bitmapData = r), n.success(e, t, n.textureLoader(i))
      }
      try {
        RES.hasRes(t) ? (this.start(t), i(RES.getRes(t))) : (t = this.start(t), RES.getResByUrl(t, i))
      } catch (a) {
        this.error(r, t, 'Couldn\'t load image: ' + t)
      }
    }, r.prototype.loadTextureAtlas = function (e, r, n) {
      var i = this
      void 0 === r && (r = null), void 0 === n && (n = null)
      var a = '', s = !!e.match(/_atlas$/i), o = function (o) {
        try {
          for (var h = new t.TextureAtlas(o), l = h.pages.length, c = !1, p = function (t) {
            var n = a + t.name
            s && (n = n.replace(/\./g, '_')), i.loadTexture(n, function (n, a) {
              c || (t.setTexture(a), 0 == --l && i.success(r, e, h))
            })
          }, u = 0, d = h.pages; u < d.length; u++) {
            var f = d[u]
            p(f)
          }
        } catch (m) {
          i.error(n, e, 'Couldn\'t parse texture atlas ' + e + ': ' + m.message)
        }
      }
      try {
        if (RES.hasRes(e)) {
          this.start(e), o(RES.getRes(e))
        } else {
          var h = e.lastIndexOf('/')
          a = h >= 0 ? e.substring(0, h + 1) : '', e = this.start(e), RES.getResByUrl(e, o)
        }
      } catch (l) {
        this.error(n, e, 'Couldn\'t load texture atlas ' + e)
      }
    }, r.prototype.get = function (t) {
      return t.match(/\.(skel|png|atlas|ktx2)$/i) && (t = this.pathPrefix + t), this.assets[t]
    }, r.prototype.require = function (t) {
      t.match(/\.(skel|png|atlas|ktx2)$/i) && (t = this.pathPrefix + t)
      var e = this.assets[t]
      if (e) return e
      var r = this.errors[t]
      throw Error('Asset not found: ' + t + (r ? '\n' + r : ''))
    }, r.prototype.remove = function (t) {
      return t.match(/\.(skel|png|atlas|ktx2)$/i) && (t = this.pathPrefix + t), this.disposeAsset(t)
    }, r.prototype.removeAll = function () {
      for (var t in this.assets) this.disposeAsset(t)
      this.assets = {}
    }, r.prototype.disposeAsset = function (t) {
      var e = this.assets[t]
      if (e.dispose && e.dispose(), delete this.assets[t], t.match(/\.(skel|png|atlas|ktx2)$/i)) {
        var r = url.URLHank.RE_MODIFY_URL_CALLBACK(t)
        RES.hasRes(r) && RES.destroyRes(r)
      }
      return e
    }, r
  }(t.AssetManagerBase)
  t.EgretAssetManager = e, __reflect(e.prototype, 'spine.EgretAssetManager')
}(spine || (spine = {}))
var __reflect = this && this.__reflect || function (t, e, r) {
  t.__class__ = e, r ? r.push(e) : r = [e], t.__types__ = t.__types__ ? r.concat(t.__types__) : r
}, __extends = this && this.__extends || function (t, e) {
  function r () {
    this.constructor = t
  }

  for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
  r.prototype = e.prototype, t.prototype = new r
}, spine
!function (t) {
  var e = function (e) {
    function r (t) {
      var r = e.call(this, t.bitmapData.source) || this
      return r.original = t, r.smoothing = !1, r._premultipliedAlpha = !1, r
    }

    return __extends(r, e), Object.defineProperty(r.prototype, 'premultipliedAlpha', {
      get: function () {
        return this._premultipliedAlpha
      }, set: function (t) {
        this._premultipliedAlpha !== t && (this._premultipliedAlpha = t, this._image && (this._image.premultipliedAlpha = !0))
      }, enumerable: !0, configurable: !0
    }), r.prototype.getImage = function () {
      return this.original.bitmapData
    }, r.prototype.setFilters = function (e, n) {
      this._image && (this._image.TEXTURE_MIN_FILTER = e, this._image.TEXTURE_MAG_FILTER = r.validateMagFilter(n))
      var i = t.TextureFilter.Nearest, a = t.TextureFilter.MipMapNearestNearest, s = e !== i && e !== a,
        o = n !== i && n !== a
      this.smoothing = s || o
    }, r.validateMagFilter = function (e) {
      switch (e) {
        case t.TextureFilter.MipMap:
        case t.TextureFilter.MipMapLinearLinear:
        case t.TextureFilter.MipMapLinearNearest:
        case t.TextureFilter.MipMapNearestLinear:
        case t.TextureFilter.MipMapNearestNearest:
          return t.TextureFilter.Linear
        default:
          return e
      }
    }, r.prototype.setWraps = function (t, e) {
      this._image && (this._image.TEXTURE_WRAP_S = t, this._image.TEXTURE_WRAP_T = e)
    }, r.prototype.dispose = function () {
      this.original.dispose(), this._image = null
    }, r
  }(t.Texture)
  t.EgretTexture = e, __reflect(e.prototype, 'spine.EgretTexture')
}(spine || (spine = {}))
var __reflect = this && this.__reflect || function (t, e, r) {
  t.__class__ = e, r ? r.push(e) : r = [e], t.__types__ = t.__types__ ? r.concat(t.__types__) : r
}, spine
!function (t) {
  var e = function () {
    function e (t, e, r) {
      if (this.data = null, this.skeleton = null, this.parent = null, this.children = new Array, this.x = 0, this.y = 0, this.rotation = 0, this.scaleX = 0, this.scaleY = 0, this.shearX = 0, this.shearY = 0, this.ax = 0, this.ay = 0, this.arotation = 0, this.ascaleX = 0, this.ascaleY = 0, this.ashearX = 0, this.ashearY = 0, this.a = 0, this.b = 0, this.c = 0, this.d = 0, this.worldY = 0, this.worldX = 0, this.sorted = !1, this.active = !1, !t) throw new Error('data cannot be null.')
      if (!e) throw new Error('skeleton cannot be null.')
      this.data = t, this.skeleton = e, this.parent = r, this.setToSetupPose()
    }

    return e.prototype.isActive = function () {
      return this.active
    }, e.prototype.update = function () {
      this.updateWorldTransformWith(this.ax, this.ay, this.arotation, this.ascaleX, this.ascaleY, this.ashearX, this.ashearY)
    }, e.prototype.updateWorldTransform = function () {
      this.updateWorldTransformWith(this.x, this.y, this.rotation, this.scaleX, this.scaleY, this.shearX, this.shearY)
    }, e.prototype.updateWorldTransformWith = function (e, r, n, i, a, s, o) {
      this.ax = e, this.ay = r, this.arotation = n, this.ascaleX = i, this.ascaleY = a, this.ashearX = s, this.ashearY = o
      var h = this.parent
      if (!h) {
        var l = this.skeleton, c = n + 90 + o, p = l.scaleX, u = l.scaleY
        return this.a = t.MathUtils.cosDeg(n + s) * i * p, this.b = t.MathUtils.cosDeg(c) * a * p, this.c = t.MathUtils.sinDeg(n + s) * i * u, this.d = t.MathUtils.sinDeg(c) * a * u, this.worldX = e * p + l.x, void (this.worldY = r * u + l.y)
      }
      var d = h.a, f = h.b, m = h.c, v = h.d
      switch (this.worldX = d * e + f * r + h.worldX, this.worldY = m * e + v * r + h.worldY, this.data.transformMode) {
        case t.TransformMode.Normal:
          var c = n + 90 + o, g = t.MathUtils.cosDeg(n + s) * i, y = t.MathUtils.cosDeg(c) * a,
            _ = t.MathUtils.sinDeg(n + s) * i, x = t.MathUtils.sinDeg(c) * a
          return this.a = d * g + f * _, this.b = d * y + f * x, this.c = m * g + v * _, void (this.d = m * y + v * x)
        case t.TransformMode.OnlyTranslation:
          var c = n + 90 + o
          this.a = t.MathUtils.cosDeg(n + s) * i, this.b = t.MathUtils.cosDeg(c) * a, this.c = t.MathUtils.sinDeg(n + s) * i, this.d = t.MathUtils.sinDeg(c) * a
          break
        case t.TransformMode.NoRotationOrReflection:
          var w = d * d + m * m, b = 0
          w > 1e-4 ? (w = Math.abs(d * v - f * m) / w, d /= this.skeleton.scaleX, m /= this.skeleton.scaleY, f = m * w, v = d * w, b = Math.atan2(m, d) * t.MathUtils.radDeg) : (d = 0, m = 0, b = 90 - Math.atan2(v, f) * t.MathUtils.radDeg)
          var S = n + s - b, A = n + o - b + 90, g = t.MathUtils.cosDeg(S) * i, y = t.MathUtils.cosDeg(A) * a,
            _ = t.MathUtils.sinDeg(S) * i, x = t.MathUtils.sinDeg(A) * a
          this.a = d * g - f * _, this.b = d * y - f * x, this.c = m * g + v * _, this.d = m * y + v * x
          break
        case t.TransformMode.NoScale:
        case t.TransformMode.NoScaleOrReflection:
          var k = t.MathUtils.cosDeg(n), T = t.MathUtils.sinDeg(n), M = (d * k + f * T) / this.skeleton.scaleX,
            C = (m * k + v * T) / this.skeleton.scaleY, w = Math.sqrt(M * M + C * C)
          w > 1e-5 && (w = 1 / w), M *= w, C *= w, w = Math.sqrt(M * M + C * C), this.data.transformMode == t.TransformMode.NoScale && 0 > d * v - f * m != (this.skeleton.scaleX < 0 != this.skeleton.scaleY < 0) && (w = -w)
          var I = Math.PI / 2 + Math.atan2(C, M), F = Math.cos(I) * w, Y = Math.sin(I) * w,
            g = t.MathUtils.cosDeg(s) * i, y = t.MathUtils.cosDeg(90 + o) * a, _ = t.MathUtils.sinDeg(s) * i,
            x = t.MathUtils.sinDeg(90 + o) * a
          this.a = M * g + F * _, this.b = M * y + F * x, this.c = C * g + Y * _, this.d = C * y + Y * x
      }
      this.a *= this.skeleton.scaleX, this.b *= this.skeleton.scaleX, this.c *= this.skeleton.scaleY, this.d *= this.skeleton.scaleY
    }, e.prototype.setToSetupPose = function () {
      var t = this.data
      this.x = t.x, this.y = t.y, this.rotation = t.rotation, this.scaleX = t.scaleX, this.scaleY = t.scaleY, this.shearX = t.shearX, this.shearY = t.shearY
    }, e.prototype.getWorldRotationX = function () {
      return Math.atan2(this.c, this.a) * t.MathUtils.radDeg
    }, e.prototype.getWorldRotationY = function () {
      return Math.atan2(this.d, this.b) * t.MathUtils.radDeg
    }, e.prototype.getWorldScaleX = function () {
      return Math.sqrt(this.a * this.a + this.c * this.c)
    }, e.prototype.getWorldScaleY = function () {
      return Math.sqrt(this.b * this.b + this.d * this.d)
    }, e.prototype.updateAppliedTransform = function () {
      var e = this.parent
      if (!e) return this.ax = this.worldX - this.skeleton.x, this.ay = this.worldY - this.skeleton.y, this.arotation = Math.atan2(this.c, this.a) * t.MathUtils.radDeg, this.ascaleX = Math.sqrt(this.a * this.a + this.c * this.c), this.ascaleY = Math.sqrt(this.b * this.b + this.d * this.d), this.ashearX = 0, void (this.ashearY = Math.atan2(this.a * this.b + this.c * this.d, this.a * this.d - this.b * this.c) * t.MathUtils.radDeg)
      var r = e.a, n = e.b, i = e.c, a = e.d, s = 1 / (r * a - n * i), o = this.worldX - e.worldX,
        h = this.worldY - e.worldY
      this.ax = o * a * s - h * n * s, this.ay = h * r * s - o * i * s
      var l = s * a, c = s * r, p = s * n, u = s * i, d = l * this.a - p * this.c, f = l * this.b - p * this.d,
        m = c * this.c - u * this.a, v = c * this.d - u * this.b
      if (this.ashearX = 0, this.ascaleX = Math.sqrt(d * d + m * m), this.ascaleX > 1e-4) {
        var g = d * v - f * m
        this.ascaleY = g / this.ascaleX, this.ashearY = Math.atan2(d * f + m * v, g) * t.MathUtils.radDeg, this.arotation = Math.atan2(m, d) * t.MathUtils.radDeg
      } else {
        this.ascaleX = 0, this.ascaleY = Math.sqrt(f * f + v * v), this.ashearY = 0, this.arotation = 90 - Math.atan2(v, f) * t.MathUtils.radDeg
      }
    }, e.prototype.worldToLocal = function (t) {
      var e = 1 / (this.a * this.d - this.b * this.c), r = t.x - this.worldX, n = t.y - this.worldY
      return t.x = r * this.d * e - n * this.b * e, t.y = n * this.a * e - r * this.c * e, t
    }, e.prototype.localToWorld = function (t) {
      var e = t.x, r = t.y
      return t.x = e * this.a + r * this.b + this.worldX, t.y = e * this.c + r * this.d + this.worldY, t
    }, e.prototype.worldToLocalRotation = function (e) {
      var r = t.MathUtils.sinDeg(e), n = t.MathUtils.cosDeg(e)
      return Math.atan2(this.a * r - this.c * n, this.d * n - this.b * r) * t.MathUtils.radDeg + this.rotation - this.shearX
    }, e.prototype.localToWorldRotation = function (e) {
      e -= this.rotation - this.shearX
      var r = t.MathUtils.sinDeg(e), n = t.MathUtils.cosDeg(e)
      return Math.atan2(n * this.c + r * this.d, n * this.a + r * this.b) * t.MathUtils.radDeg
    }, e.prototype.rotateWorld = function (e) {
      var r = this.a, n = this.b, i = this.c, a = this.d, s = t.MathUtils.cosDeg(e), o = t.MathUtils.sinDeg(e)
      this.a = s * r - o * i, this.b = s * n - o * a, this.c = o * r + s * i, this.d = o * n + s * a
    }, e
  }()
  t.Bone = e, __reflect(e.prototype, 'spine.Bone', ['spine.Updatable'])
}(spine || (spine = {}))
var __reflect = this && this.__reflect || function (t, e, r) {
  t.__class__ = e, r ? r.push(e) : r = [e], t.__types__ = t.__types__ ? r.concat(t.__types__) : r
}, __extends = this && this.__extends || function (t, e) {
  function r () {
    this.constructor = t
  }

  for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
  r.prototype = e.prototype, t.prototype = new r
}, spine
!function (t) {
  var e = function (e) {
    function r (r) {
      var n = e.call(this) || this
      return n.lastTime = 0, n.renderer = new t.SkeletonRenderer(r), n.state = n.renderer.state, n.stateData = n.renderer.stateData, n.skeleton = n.renderer.skeleton, n.skeletonData = n.renderer.skeletonData, n.addChild(n.renderer), n.addEventListener(egret.Event.ADDED_TO_STAGE, n.onAddedToStage, n), n
    }

    return __extends(r, e), Object.defineProperty(r.prototype, 'flipX', {
      get: function () {
        return -1 == this.renderer.scaleX
      }, set: function (t) {
        this.renderer.scaleX = t ? -1 : 1
      }, enumerable: !0, configurable: !0
    }), Object.defineProperty(r.prototype, 'flipY', {
      get: function () {
        return 1 == this.renderer.scaleY
      }, set: function (t) {
        this.renderer.scaleY = t ? 1 : -1
      }, enumerable: !0, configurable: !0
    }), r.prototype.setTimeScale = function (t) {
      this.state.timeScale = t
    }, r.prototype.setMix = function (t, e, r) {
      e && r ? this.stateData.setMix(e, r, t) : this.stateData.defaultMix = t
    }, r.prototype.getAllSkinNames = function () {
      return this.skeletonData.skins.map(function (t) {
        return t.name
      })
    }, r.prototype.setSkinByName = function (t) {
      this.skeleton.setSkinByName(t), this.skeleton.setToSetupPose()
    }, r.prototype.setRandomSkin = function () {
      var t = this.getAllSkinNames()
      this.skeleton.setSkinByName(t[Math.floor(Math.random() * t.length)]), this.skeleton.setToSetupPose()
    }, r.prototype.playRandom = function (t) {
      void 0 === t && (t = 0)
      var e = this.skeletonData.animations.map(function (t) {
        return t.name
      })
      return this.play(e[Math.floor(Math.random() * e.length)], 0, t)
    }, r.prototype.playAll = function (t, e) {
      void 0 === t && (t = 0), void 0 === e && (e = 0)
      for (var r = this.start(e), n = 0, i = this.skeletonData.animations; n < i.length; n++) {
        var a = i[n]
        r.add(a.name, t)
      }
      return r
    }, r.prototype.showAllName = function (t) {
      void 0 === t && (t = 0)
      for (var e = 0, r = this.skeletonData.animations; e < r.length; e++) {
        var n = r[e]
        console.log(n.name, t)
      }
    }, r.prototype.playList = function (t, e, r) {
      void 0 === e && (e = 0), void 0 === r && (r = 0)
      for (var n = this.start(r), i = 0, a = t; i < a.length; i++) {
        var s = a[i]
        n.add(s, e)
      }
      return n
    }, r.prototype.play = function (t, e, r, n) {
      return void 0 === e && (e = 0), void 0 === r && (r = 0), this.start(r).add(t, e, n)
    }, r.prototype.playDefault = function (t, e, r, n) {
      return void 0 === e && (e = 0), void 0 === r && (r = 0), t || (t = this.skeletonData.animations[0].name), this.start(r).add(t, e, n)
    }, r.prototype.start = function (e) {
      return void 0 === e && (e = 0), this.skeleton.setToSetupPose(), new t.Track(this, e)
    }, r.prototype.stop = function (t) {
      this.state.clearTrack(t)
    }, r.prototype.stopAll = function (t) {
      this.state.clearTracks(), t && this.skeleton.setToSetupPose()
    }, r.prototype.onAddedToStage = function () {
      this.lastTime = t.getNowTime(), this.addEventListener(egret.Event.ENTER_FRAME, this.onEnterFrame, this), this.addEventListener(egret.Event.REMOVED_FROM_STAGE, this.onRemovedFromStage, this)
    }, r.prototype.onRemovedFromStage = function () {
      this.removeEventListener(egret.Event.ENTER_FRAME, this.onEnterFrame, this), this.removeEventListener(egret.Event.REMOVED_FROM_STAGE, this.onRemovedFromStage, this)
    }, r.prototype.onEnterFrame = function () {
      var e = t.getNowTime()
      this.renderer.update(e - this.lastTime), this.lastTime = e
    }, r
  }(egret.DisplayObjectContainer)
  t.SkeletonAnimation = e, __reflect(e.prototype, 'spine.SkeletonAnimation')
}(spine || (spine = {}))
var __reflect = this && this.__reflect || function (t, e, r) {
  t.__class__ = e, r ? r.push(e) : r = [e], t.__types__ = t.__types__ ? r.concat(t.__types__) : r
}, __extends = this && this.__extends || function (t, e) {
  function r () {
    this.constructor = t
  }

  for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
  r.prototype = e.prototype, t.prototype = new r
}, spine
!function (t) {
  var e = function (e) {
    function r (r) {
      var n = e.call(this) || this
      n.slotRenderers = [], n.clipper = new t.SkeletonClipping, n.sortableChildren = !0, n.scaleY = -1, n.touchEnabled = !0, n.skeletonData = r, n.stateData = new t.AnimationStateData(r), n.state = new t.AnimationState(n.stateData), n.skeleton = new t.Skeleton(r), n.skeleton.updateWorldTransform(), n.skeleton.setSlotsToSetupPose()
      for (var i = 0, a = n.skeleton.slots; i < a.length; i++) {
        var s = a[i], o = new t.SlotRenderer(s, n.clipper)
        o.renderSlot(), n.addChild(o), n.slotRenderers.push(o)
      }
      return n
    }

    return __extends(r, e), r.prototype.findSlotRenderer = function (t) {
      return this.slotRenderers.find(function (e) {
        return e.name === t
      })
    }, r.prototype.update = function (t) {
      this.state.update(t), this.state.apply(this.skeleton), this.skeleton.updateWorldTransform()
      for (var e = this.skeleton.drawOrder, r = 0; r < e.length; r++) {
        var n = e[r].data.index, i = this.slotRenderers[n]
        i.zIndex !== r && (i.zIndex = r), i.renderSlot()
      }
      this.clipper.clipEnd()
    }, r
  }(egret.DisplayObjectContainer)
  t.SkeletonRenderer = e, __reflect(e.prototype, 'spine.SkeletonRenderer')
}(spine || (spine = {}))
var __reflect = this && this.__reflect || function (t, e, r) {
  t.__class__ = e, r ? r.push(e) : r = [e], t.__types__ = t.__types__ ? r.concat(t.__types__) : r
}, __extends = this && this.__extends || function (t, e) {
  function r () {
    this.constructor = t
  }

  for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
  r.prototype = e.prototype, t.prototype = new r
}, spine
!function (t) {
  t.SHOW_DEBUG_MESH = !1
  var e = [0, 1, 2, 2, 3, 0], r = function (r) {
    function n (e, n) {
      var i = r.call(this) || this
      i.slot = e, i.clipper = n, i.premultipliedAlpha = !1, i.finalColor = new t.Color, i.darkColor = new t.Color, i.vertexSize = 2, i.name = e.data.name, (e.data.blendMode === t.BlendMode.Additive || e.data.blendMode === t.BlendMode.Screen) && (i.blendMode = egret.BlendMode.ADD)
      var a = i.$renderNode
      return a.vertices = t.Utils.newFloatArray(1024 * i.vertexSize), t.SHOW_DEBUG_MESH && (i.addEventListener(egret.Event.ADDED_TO_STAGE, i.addDebugRenderer, i), i.addEventListener(egret.Event.REMOVED_FROM_STAGE, i.removeDebugRenderer, i)), i
    }

    return __extends(n, r), n.prototype.addDebugRenderer = function () {
      this.debugRenderer || (this.debugRenderer = new egret.Shape), this.parent.addChildAt(this.debugRenderer, 9999)
    }, n.prototype.removeDebugRenderer = function () {
      this.debugRenderer && this.debugRenderer.parent && this.debugRenderer.parent.removeChild(this.debugRenderer)
    }, n.prototype.renderSlot = function () {
      var e = this.slot.bone.active, r = this.slot.getAttachment()
      if (this.debugRenderer && this.debugRenderer.graphics.clear(), e && r) {
        if (this.visible = !0, r.region && r.region.page && r.region.page.pma === !0 && (this.premultipliedAlpha = !0), r instanceof t.RegionAttachment) this.updateColor(r.color), this.updateRegionAttachment(r) else if (r instanceof t.MeshAttachment) this.updateColor(r.color), this.updateMeshAttachment(r) else if (r instanceof t.ClippingAttachment) return void this.clipper.clipStart(this.slot, r)
        if (this.clipper.clipEndWithSlot(this.slot), this.debugRenderer) {
          var n = this.$renderNode
          if (!this.boneColor) {
            var i = this.slot.bone.data.color
            this.boneColor = (255 * i.r << 16) + (255 * i.g << 8) + (255 * i.b | 0)
          }
          this.debugRenderer.graphics.lineStyle(1, this.boneColor || 255)
          for (var a = n.indices.length / 3, s = 0; a > s; s++) this.debugRenderer.graphics.moveTo(n.vertices[2 * n.indices[3 * s]], n.vertices[2 * n.indices[3 * s] + 1]), this.debugRenderer.graphics.lineTo(n.vertices[2 * n.indices[3 * s + 1]], n.vertices[2 * n.indices[3 * s + 1] + 1]), this.debugRenderer.graphics.lineTo(n.vertices[2 * n.indices[3 * s + 2]], n.vertices[2 * n.indices[3 * s + 2] + 1]), this.debugRenderer.graphics.lineTo(n.vertices[2 * n.indices[3 * s]], n.vertices[2 * n.indices[3 * s] + 1])
          this.debugRenderer.graphics.lineStyle(1, 16777215)
          for (var o = .5 * n.vertices.length, s = 0; o > s; s++) this.debugRenderer.graphics.drawCircle(n.vertices[2 * s], n.vertices[2 * s + 1], 1)
        }
      } else {
        this.clipper.clipEndWithSlot(this.slot), this.visible = !1
      }
    }, n.prototype.updateColor = function (t) {
      var e = this.premultipliedAlpha, r = this.slot.bone.skeleton.color, n = this.slot.color
      this.finalColor.r = r.r * n.r * t.r, this.finalColor.g = r.g * n.g * t.g, this.finalColor.b = r.b * n.b * t.b, this.finalColor.a = r.a * n.a * t.a, e && (this.finalColor.r *= this.finalColor.a, this.finalColor.g *= this.finalColor.a, this.finalColor.b *= this.finalColor.a)
      var i = this.darkColor
      this.slot.darkColor ? (e ? (i.r = this.slot.darkColor.r * this.finalColor.a, i.g = this.slot.darkColor.g * this.finalColor.a, i.b = this.slot.darkColor.b * this.finalColor.a) : i.setFromColor(this.slot.darkColor), i.a = e ? 1 : 0) : i.set(0, 0, 0, 1), this.tint = (255 * this.finalColor.r << 16) + (255 * this.finalColor.g << 8) + (255 * this.finalColor.b | 0), this.alpha = this.finalColor.a
    }, n.prototype.updateRegionAttachment = function (r) {
      var n = r.region, i = n.page.texture, a = this.$renderNode, s = this.vertexSize << 2
      if (a.uvs = new Float32Array(r.uvs), a.indices = e, a.vertices.length < s && (a.vertices = t.Utils.newFloatArray(s)), r.computeWorldVertices(this.slot.bone, a.vertices, 0, this.vertexSize), this.clipper.isClipping()) {
        this.clipper.clipTriangles(a.vertices, s, a.indices, a.indices.length, a.uvs, this.finalColor, this.darkColor, !1)
        var o = new Float32Array(this.clipper.clippedVertices)
        a.indices = this.clipper.clippedTriangles.concat()
        var h = .125 * o.length, l = h << 1
        a.vertices.length < l && (a.vertices = t.Utils.newFloatArray(l)), a.uvs.length < l && (a.uvs = t.Utils.newFloatArray(l))
        for (var c = 0; h > c; c++) a.vertices[2 * c] = o[8 * c], a.vertices[2 * c + 1] = o[8 * c + 1], a.uvs[2 * c] = o[8 * c + 6], a.uvs[2 * c + 1] = o[8 * c + 7]
        var p = a.vertices.subarray(0, l)
        a.vertices = p
      } else {
        var p = a.vertices.subarray(0, s)
        a.vertices = p
      }
      this.$updateVertices(), this.texture = i.original, this.smoothing = i.smoothing
    }, n.prototype.updateMeshAttachment = function (e) {
      var r = e.region, n = r.page.texture, i = this.$renderNode, a = e.worldVerticesLength
      if (i.uvs = new Float32Array(e.uvs), i.indices = e.triangles, i.vertices.length < a && (i.vertices = t.Utils.newFloatArray(a)), e.computeWorldVertices(this.slot, 0, a, i.vertices, 0, this.vertexSize), this.clipper.isClipping()) {
        this.clipper.clipTriangles(i.vertices, a, i.indices, i.indices.length, i.uvs, this.finalColor, this.darkColor, !1)
        var s = new Float32Array(this.clipper.clippedVertices)
        i.indices = this.clipper.clippedTriangles.concat()
        var o = .125 * s.length, h = o << 1
        i.vertices.length < h && (i.vertices = t.Utils.newFloatArray(h)), i.uvs.length < h && (i.uvs = t.Utils.newFloatArray(h))
        for (var l = 0; o > l; l++) i.vertices[2 * l] = s[8 * l], i.vertices[2 * l + 1] = s[8 * l + 1], i.uvs[2 * l] = s[8 * l + 6], i.uvs[2 * l + 1] = s[8 * l + 7]
        i.vertices = i.vertices.subarray(0, h)
      } else {
        i.vertices = i.vertices.subarray(0, a)
      }
      this.$updateVertices(), this.texture = n.original, this.smoothing = n.smoothing
    }, n
  }(egret.Mesh)
  t.SlotRenderer = r, __reflect(r.prototype, 'spine.SlotRenderer')
}(spine || (spine = {}))
var __reflect = this && this.__reflect || function (t, e, r) {
  t.__class__ = e, r ? r.push(e) : r = [e], t.__types__ = t.__types__ ? r.concat(t.__types__) : r
}, __extends = this && this.__extends || function (t, e) {
  function r () {
    this.constructor = t
  }

  for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
  r.prototype = e.prototype, t.prototype = new r
}, spine
!function (t) {
  var e = function (t) {
    function e (e, r) {
      var n = t.call(this) || this
      return n.animations = [], n.disposed = !1, n.loop = 0, n.trackID = r, n.skelAnimation = e, n.stateListener = {
        complete: function () {
          return n.onComplete()
        }, interrupt: function () {
          return n.onInterrupt()
        }, event: function (t, e) {
          return n.onCustomEvent(e)
        }, start: void 0, end: void 0, dispose: void 0
      }, n
    }

    return __extends(e, t), e.prototype.setToLastFrame = function () {
      this.trackEntry.animationStart = this.trackEntry.animationLast = this.trackEntry.animationEnd
    }, e.prototype.waitPlayStart = function () {
      var t = this
      return new Promise(function (e) {
        return t.once(0, e)
      })
    }, e.prototype.waitPlayEnd = function () {
      var t = this
      return new Promise(function (e) {
        return t.once(1, e)
      })
    }, e.prototype.waitLoopStart = function () {
      var t = this
      return new Promise(function (e) {
        return t.once(2, e)
      })
    }, e.prototype.waitLoopEnd = function () {
      var t = this
      return new Promise(function (e) {
        return t.once(3, e)
      })
    }, e.prototype.waitInterrupt = function () {
      var t = this
      return new Promise(function (e) {
        return t.once(4, e)
      })
    }, e.prototype.waitTrackEnd = function () {
      var t = this
      return new Promise(function (e) {
        return t.once(6, e)
      })
    }, e.prototype.waitEvent = function () {
      var t = this
      return new Promise(function (e) {
        return t.once(5, e)
      })
    }, e.prototype.waitNamedEvent = function (t) {
      var e = this
      return new Promise(function (r) {
        var n = function (i) {
          i.data.name == t && (e.off(5, n), r(i))
        }
        e.on(5, n)
      })
    }, e.prototype.add = function (t, e, r) {
      return void 0 === e && (e = 1), this.disposed || (this.animations.push({
        name: t,
        loop: e,
        listener: r
      }), 1 == this.animations.length && this.playNextAnimation()), this
    }, e.prototype.setAnimation = function (t, e) {
      this.trackEntry && (this.trackEntry.listener = void 0), this.trackEntry = this.skelAnimation.state.setAnimation(this.trackID, t, e), this.trackEntry.listener = this.stateListener, this.skelAnimation.renderer.update(0)
    }, e.prototype.playNextAnimation = function () {
      if (!this.disposed && this.animations.length > 0) {
        var t = this.animations[0], e = t.name, r = t.listener
        r && (r.playStart && this.on(0, r.playStart, r), r.playEnd && this.on(1, r.playEnd, r), r.loopStart && this.on(2, r.loopStart, r), r.loopEnd && this.on(3, r.loopEnd, r), r.interrupt && this.on(4, r.interrupt, r), r.custom && this.on(5, r.custom, r)), this.loop = 0, this.setAnimation(e, !1), this.emit(0), this.emit(2)
      }
    }, e.prototype.onComplete = function () {
      if (!this.disposed) {
        var t = this.animations[0]
        if (this.emit(3), ++this.loop != t.loop) {
          this.setAnimation(t.name, !1), this.emit(2)
        } else {
          var e = t.listener
          this.emit(1), this.animations.shift(), e && (this.off(0, e.playStart), this.off(1, e.playEnd), this.off(2, e.loopStart), this.off(3, e.loopEnd), this.off(4, e.interrupt), this.off(5, e.custom)), this.animations.length > 0 ? this.playNextAnimation() : (this.trackEntry.listener = void 0, this.trackEntry = void 0, this.disposed = !0, this.emit(6))
        }
      }
    }, e.prototype.onInterrupt = function () {
      this.disposed || (this.disposed = !0, this.animations.length = 0, this.emit(4))
    }, e.prototype.onCustomEvent = function (t) {
      this.disposed || this.emit(5, t)
    }, e
  }(t.EventEmitter)
  t.Track = e, __reflect(e.prototype, 'spine.Track')
}(spine || (spine = {}))
var __reflect = this && this.__reflect || function (e, t, i) {
  e.__class__ = t, i ? i.push(t) : i = [t], e.__types__ = e.__types__ ? i.concat(e.__types__) : i
}, __awaiter = this && this.__awaiter || function (e, t, i, n) {
  return new (i || (i = Promise))(function (a, s) {
    function o (e) {
      try {
        l(n.next(e))
      } catch (t) {
        s(t)
      }
    }

    function r (e) {
      try {
        l(n['throw'](e))
      } catch (t) {
        s(t)
      }
    }

    function l (e) {
      e.done ? a(e.value) : new i(function (t) {
        t(e.value)
      }).then(o, r)
    }

    l((n = n.apply(e, t || [])).next())
  })
}, __generator = this && this.__generator || function (e, t) {
  function i (e) {
    return function (t) {
      return n([e, t])
    }
  }

  function n (i) {
    if (a) throw new TypeError('Generator is already executing.')
    for (; l;) {
      try {
        if (a = 1, s && (o = s[2 & i[0] ? 'return' : i[0] ? 'throw' : 'next']) && !(o = o.call(s, i[1])).done) return o
        switch (s = 0, o && (i = [0, o.value]), i[0]) {
          case 0:
          case 1:
            o = i
            break
          case 4:
            return l.label++, {value: i[1], done: !1}
          case 5:
            l.label++, s = i[1], i = [0]
            continue
          case 7:
            i = l.ops.pop(), l.trys.pop()
            continue
          default:
            if (o = l.trys, !(o = o.length > 0 && o[o.length - 1]) && (6 === i[0] || 2 === i[0])) {
              l = 0
              continue
            }
            if (3 === i[0] && (!o || i[1] > o[0] && i[1] < o[3])) {
              l.label = i[1]
              break
            }
            if (6 === i[0] && l.label < o[1]) {
              l.label = o[1], o = i
              break
            }
            if (o && l.label < o[2]) {
              l.label = o[2], l.ops.push(i)
              break
            }
            o[2] && l.ops.pop(), l.trys.pop()
            continue
        }
        i = t.call(e, l)
      } catch (n) {
        i = [6, n], s = 0
      } finally {
        a = o = 0
      }
    }
    if (5 & i[0]) throw i[1]
    return {value: i[0] ? i[1] : void 0, done: !0}
  }

  var a, s, o, r, l = {
    label: 0, sent: function () {
      if (1 & o[0]) throw o[1]
      return o[1]
    }, trys: [], ops: []
  }
  return r = {
    next: i(0),
    'throw': i(1),
    'return': i(2)
  }, 'function' == typeof Symbol && (r[Symbol.iterator] = function () {
    return this
  }), r
}, spinePlayer
!function (e) {
  e.debugPlayAnim = function (e, t, i) {
    if (void 0 === i && (i = !1), e.anim && e.anim.skeletonData) {
      var n = e.anim.skeletonData, a = window.otherTool || new dat.GUI
      if (n.animations) {
        var s = {
          animName: n.animations[0].name, outConfig: function () {
            if (!e.anim) return void MFC.bubbleAlert.showAlert('idspine')
            for (var t = e.anim.skeletonData.animations, i = '', n = [], a = 0; a < t.length; a++) n.push(t[a].name)
            n.indexOf('special') > -1 && (i += ' specialSkillArr=""', i += ' specialUseDistance="400"'), n.indexOf('attack') > -1 && (i += ' attackUseDistance="400"'), n.indexOf('skill') > -1 && (i += ' skillUseDistance="400"'), n.indexOf('elem') > -1 && (i += ' elemUseDistance="400"'), n.indexOf('in') > -1 && (i += ' inUseDistance="400"'), console.log(i + ' isSpine="true"')
          }
        }, o = function () {
          return e.play(s.animName, t || 0)
        }, r = window.datSpineAnimController, l = window.outController
        r && r.destroy(), l && l.destroy(), window.datSpineAnimController = a.add(s, 'animName', n.animations.map(function (e) {
          return e.name
        })).name('').onFinishChange(function () {
          o()
        }), window.outController = a.add(s, 'outConfig').name('spine'), i && o()
      } else {
        e.playDefault(null, t)
      }
    }
  }
  var t = function () {
    function t () {
      var e = this
      this.dropbox = document.querySelector('.egret-player'), this.isActiveDrag = !1, this._offsetX = 0, this._offsetY = 0, this.dragenter = function (e) {
        e.stopPropagation(), e.preventDefault()
      }, this.dragover = function (e) {
        e.stopPropagation(), e.preventDefault()
      }, this.drop = function (t) {
        return __awaiter(e, void 0, void 0, function () {
          return __generator(this, function (e) {
            return t.stopPropagation(), t.preventDefault(), this.handleFiles(t.dataTransfer.files, t), [2]
          })
        })
      }
    }

    return t.prototype.startDragInput = function () {
      return this.isActiveDrag ? void this.stopDragInput() : (this.isActiveDrag = !0, window.MFC && MFC.bubbleAlert ? MFC.bubbleAlert.showAlert('') : console.warn(''), this.dropbox.addEventListener('dragenter', this.dragenter), this.dropbox.addEventListener('dragover', this.dragover), void this.dropbox.addEventListener('drop', this.drop))
    }, t.prototype.stopDragInput = function () {
      this.isActiveDrag = !1, window.MFC && MFC.bubbleAlert ? MFC.bubbleAlert.showAlert('') : console.warn(''), this.dropbox.removeEventListener('dragenter', this.dragenter), this.dropbox.removeEventListener('dragover', this.dragover), this.dropbox.removeEventListener('drop', this.drop)
    }, t.prototype.handleFiles = function (t, i) {
      for (var n = this, a = new egret.Point, s = {}, o = {}, r = {}, l = function (e) {
        var i = t[e], n = i.name.split('.')[0], a = new FileReader
        i.name.indexOf('json') > -1 || i.name.indexOf('atlas') > -1 ? a.readAsText(i, 'utf-8') : a.readAsArrayBuffer(i), a.onload = function () {
          if (i.name.indexOf('json') > -1) {
            s[n] = a.result.toString(), h()
          } else if (i.name.indexOf('atlas') > -1) {
            o[n] = a.result.toString(), h()
          } else if (i.name.indexOf('skel') > -1) {
            var e = a.result.slice(0)
            s[n] = new Uint8Array(e), h()
          } else {
            var e = a.result.slice(0)
            egret.BitmapData.create('arraybuffer', e, function (e) {
              var t = new egret.Texture
              t.bitmapData = e, r[i.name] = new spine.EgretTexture(t), h()
            })
          }
        }
      }, p = 0; p < t.length; p++) {
        l(p)
      }
      var h = function () {
        for (var t in s) {
          var l = s[t], p = o[t]
          if (l && p) {
            for (var h = new spine.TextureAtlas(p), c = 0, d = h.pages; c < d.length; c++) {
              var u = d[c]
              if (!r[u.name]) return
              u.setTexture(r[u.name])
            }
            var f = new spine.AtlasAttachmentLoader(h), m = void 0
            if ('string' != typeof l) {
              var v = new spine.SkeletonBinary(f)
              m = v.readSkeletonData(l)
            } else {
              var g = new spine.SkeletonJson(f)
              m = g.readSkeletonData(l)
            }
            +m.version[0] < 4 && console.warn('spine(' + m.version + ')4.0')
            var y = new spine.SkeletonAnimation(m), _ = new e.SpineObject(y), w = 0
            m.animations && m.animations[0] && 0 == m.animations[0].duration && (w = 1), _.name = 'sp_' + t, egret.lifecycle.stage.addChild(_), i && (a.x = i.x / n.dropbox.clientWidth * egret.lifecycle.stage.stageWidth, a.y = i.y / n.dropbox.clientHeight * egret.lifecycle.stage.stageHeight, _.x = Math.round(a.x), _.y = Math.round(a.y)), _.addEventListener(egret.TouchEvent.TOUCH_BEGIN, n.onTouchBegin, n), _.addEventListener(egret.TouchEvent.TOUCH_END, n.onTouchEnd, n), _.touchEnabled = !0, _.touchChildren = !1, console.log('' + t, _), e.debugPlayAnim(_, w, !0), AxesHelper.add(_, {
              draggable: !0,
              resizable: !0
            }), delete s[t], delete o[t], delete r[t]
          }
        }
      }
    }, t.prototype.onTouchBegin = function (t) {
      var i = t.target
      e.debugPlayAnim(t.target), t.stopImmediatePropagation(), this.curTarget = i, this._offsetX = i.x - t.stageX, this._offsetY = i.y - t.stageY, egret.lifecycle.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE, this.onTouchMove, this)
    }, t.prototype.onTouchMove = function (e) {
      var t = this.curTarget
      t && (t.x = e.stageX + this._offsetX, t.y = e.stageY + this._offsetY)
    }, t.prototype.onTouchEnd = function (e) {
      var t = this.curTarget
      t && (e.stopImmediatePropagation(), t.x = Math.round(t.x), t.y = Math.round(t.y)), egret.lifecycle.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE, this.onTouchMove, this)
    }, t.prototype.testSpine = function () {
      'canvas' != egret.Capabilities.renderMode || egret.CanvasRenderer.prototype.drawMesh || console.warn('movieClip')
      var t = egret.lifecycle.stage, i = e.load('sp_longzun_bg.skel', 'sp_longzun.atlas')
      i.x = t.stageWidth / 2, i.y = 260, i.playDefault(), i.name = 'sp_longzun_bg'
      var n = e.load('sp_longzun.skel', 'sp_longzun.atlas')
      n.x = t.stageWidth / 2, n.y = 260, n.playDefault(), n.name = 'sp_longzun', t.addChild(i), t.addChild(n), BC.addEvent(i, t, egret.Event.RESIZE, function () {
        i.x = t.stageWidth / 2, n.x = t.stageWidth / 2
      })
    }, t
  }()
  e.DebugLoader = t, __reflect(t.prototype, 'spinePlayer.DebugLoader')
}(spinePlayer || (spinePlayer = {}))
var __reflect = this && this.__reflect || function (e, t, i) {
  e.__class__ = t, i ? i.push(t) : i = [t], e.__types__ = e.__types__ ? i.concat(e.__types__) : i
}, spinePlayer
!function (e) {
  var t = function () {
    function t (e) {
      this.assets = {}, this.factoryDic = {}, this.toLoad = 0, this.pathPrefix = e, this.loadList = {}, this.assets = {}
    }

    return t.prototype.load = function (t, i, n) {
      var a = t.replace('.json', '').replace('.skel', '')
      if (this.factoryDic[a]) return this.loadMovieClip(this.factoryDic[a], n)
      t = t.replace('.skel', '.json'), i = i.replace('.atlas', '.png'), this.loadAssets(t), this.loadAssets(i)
      var s = new e.SpineObject
      return s.spineName = a, s.isMovieClip = !0, this.loadList[a] || (this.loadList[a] = {
        jsonUrl: t,
        pngUrl: i,
        initialAnimation: n,
        tempObj: []
      }), this.loadList[a].tempObj.push(s), s
    }, t.prototype.loadAssets = function (e) {
      var t = this
      this.toLoad++
      var i = RES.ResourceItem.TYPE_IMAGE
      e.indexOf('.json') > -1 && (i = RES.ResourceItem.TYPE_JSON), RES.getResByUrl(this.pathPrefix + e, function (i) {
        t.toLoad--, t.assets[e] = i, t.onLoadComplete()
      }, this, i)['catch'](function (i) {
        t.toLoad--, console.error('Spine MovieClip loaded error: ' + t.pathPrefix + e)
      })
    }, t.prototype.onLoadComplete = function () {
      if (0 == this.toLoad) {
        for (var e in this.loadList) {
          var t = this.loadList[e].jsonUrl, i = this.loadList[e].pngUrl, n = this.get(t), a = this.get(i)
          if (n && a) {
            var s = new egret.MovieClipDataFactory(n, a)
            this.factoryDic[e] = s, this.loadMovieClip(s, this.loadList[e].initialAnimation, this.loadList[e].tempObj), this.loadList[e].tempObj = null, delete this.loadList[e]
          }
        }
      }
    }, t.prototype.loadMovieClip = function (t, i, n) {
      if (!n) {
        var a = new egret.MovieClip(t.generateMovieClipData(i)), s = new e.SpineObject(a)
        return s.isMovieClip = !0, i && s.play(i), s
      }
      for (var o = 0, r = n; o < r.length; o++) {
        var s = r[o], a = new egret.MovieClip(t.generateMovieClipData(i))
        s.init(a), i && s.play(i)
      }
      return null
    }, t.prototype.get = function (e) {
      return this.assets[e] || null
    }, t.prototype.destroy = function () {
      BC.removeEvent(this)
    }, t
  }()
  e.MovieClipLoader = t, __reflect(t.prototype, 'spinePlayer.MovieClipLoader', ['spinePlayer.LoaderInterface'])
}(spinePlayer || (spinePlayer = {}))
var __reflect = this && this.__reflect || function (e, t, i) {
  e.__class__ = t, i ? i.push(t) : i = [t], e.__types__ = e.__types__ ? i.concat(e.__types__) : i
}, spinePlayer
!function (e) {
  var t = function () {
    function t (e) {
      this.assetManager = new spine.EgretAssetManager(e), this.loadList = {}, this.skeletonDic = new Map, BC.addEvent(this, this.assetManager, egret.Event.COMPLETE, this.onLoadComplete)
    }

    return t.prototype.onLoadComplete = function (e) {
      if (this.assetManager.isLoadingComplete()) {
        for (var t in this.loadList) {
          var i = this.loadList[t].skelUrl, n = this.loadList[t].atlasUrl
          this.assetManager.get(i) && this.assetManager.get(n) && (this.loadSkeletonData(i, n, this.loadList[t].initialAnimation, this.loadList[t].skinName, this.loadList[t].tempObj), this.loadList[t].tempObj = null, delete this.loadList[t])
        }
      }
    }, t.prototype.load = function (t, i, n, a) {
      var s = t.match(/.*(?=(\.skel|_skel)$)/i)
      if (!s) throw new Error('skelUrl ' + t)
      var o = s[0], r = this.skeletonDic.get(o)
      if (r || (r = {
        data: null,
        count: 0,
        isPreload: !!t.match(/_skel$/i)
      }, this.skeletonDic.set(o, r)), ++r.count, r.data) {
        var l = this.loadSkeleton(r.data, n, a)
        return l.spineName = o, l
      }
      t.match(/(\.skel|_skel)$/i) ? this.assetManager.loadBinary(t) : this.assetManager.loadText(t), this.assetManager.loadTextureAtlas(i)
      var p = new e.SpineObject
      return p.spineName = o, r.isPreload ? this.loadSkeletonData(t, i, n, a, [p]) : (this.loadList[o] || (this.loadList[o] = {
        skelUrl: t,
        atlasUrl: i,
        initialAnimation: n,
        skinName: a,
        tempObj: []
      }), this.loadList[o].tempObj.push(p)), p
    }, t.prototype.disposeSpine = function (e) {
      var t = this, i = this.skeletonDic.get(e)
      if (i && i.count > 1) return --i.count, !1
      this.skeletonDic['delete'](e)
      try {
        var n = i && i.isPreload ? e + '_atlas' : e + '.atlas', a = i && i.isPreload ? e + '_skel' : e + '.skel'
        if (this.assetManager.get(a) && this.assetManager.remove(a), this.assetManager.get(n)) {
          var s = this.assetManager.remove(n), o = e.slice(0, e.lastIndexOf('/') + 1)
          s.pages.map(function (e) {
            return i && i.isPreload ? (o + e.name).replace(/\./g, '_') : o + e.name
          }).forEach(function (e) {
            t.assetManager.get(e) && t.assetManager.remove(e)
          })
        }
        return !0
      } catch (r) {
        console.warn(e + ' '), console.error(r)
      }
      return !1
    }, t.prototype.disposePet = function (e) {
      var t = this
      return e.reduce(function (e, i) {
        var n = t.disposeSpine(i)
        return e = e && n
      }, !0)
    }, t.prototype.loadSkeletonData = function (e, t, i, n, a) {
      var s, o = new spine.AtlasAttachmentLoader(this.assetManager.require(t))
      if (e.match(/(\.skel|_skel)$/i)) {
        var r = new spine.SkeletonBinary(o)
        s = r.readSkeletonData(this.assetManager.require(e))
      } else {
        var l = new spine.SkeletonJson(o)
        s = l.readSkeletonData(this.assetManager.require(e))
      }
      var p = e.match(/.*(?=(\.skel|_skel)$)/i)
      if (!p) throw new Error('skelUrl ' + e)
      var h = p[0], c = this.skeletonDic.get(h)
      c ? c.data = s : console.warn(''), this.loadSkeleton(s, i, n, a)
    }, t.prototype.loadSkeleton = function (t, i, n, a) {
      if (!a) {
        var s = new spine.SkeletonAnimation(t), o = new e.SpineObject(s)
        return i && o.play(i), n && o.setSkinByName(n), o
      }
      for (var r = 0, l = a; r < l.length; r++) {
        var o = l[r], s = new spine.SkeletonAnimation(t)
        o.init(s), i && o.play(i), n && o.setSkinByName(n)
      }
      return null
    }, t.prototype.destroy = function () {
      BC.removeEvent(this)
    }, t
  }()
  e.SpineLoader = t, __reflect(t.prototype, 'spinePlayer.SpineLoader', ['spinePlayer.LoaderInterface'])
}(spinePlayer || (spinePlayer = {}))
var __reflect = this && this.__reflect || function (e, t, i) {
  e.__class__ = t, i ? i.push(t) : i = [t], e.__types__ = e.__types__ ? i.concat(e.__types__) : i
}, __extends = this && this.__extends || function (e, t) {
  function i () {
    this.constructor = e
  }

  for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n])
  i.prototype = t.prototype, e.prototype = new i
}, spinePlayer
!function (e) {
  var t = function (e) {
    function t (t) {
      var i = e.call(this) || this
      return i.isMovieClip = !1, i.callOnInitialized = [], t && i.init(t), i
    }

    return __extends(t, e), t.prototype.init = function (e) {
      if (this.anim = e, this.anim instanceof egret.MovieClip) {
        this.anim.scaleX = this.anim.scaleY = .5
        var t = 0, i = 0
        for (var n in this.anim.movieClipData.textureData) t = Math.max(t, this.anim.movieClipData.textureData[n].w), i = Math.max(i, this.anim.movieClipData.textureData[n].h)
        this.width = t * this.anim.scaleX, this.height = i * this.anim.scaleY
      } else {
        this.anim instanceof spine.SkeletonAnimation && (this.width = this.anim.width * this.anim.scaleX, this.height = this.anim.height * this.anim.scaleY)
      }
      if (this.anim && (this.addChild(this.anim), this.callOnInitialized && this.callOnInitialized.length > 0)) {
        for (var a = 0, s = this.callOnInitialized; a < s.length; a++) {
          var o = s[a]
          this[o.funcName].apply(this, o.args)
        }
        this.callOnInitialized = null
      }
      this.isMovieClip = e instanceof egret.MovieClip
    }, t.prototype.setScale = function (e) {
      if (!this.anim) return void this.callOnInitialized.push({funcName: 'setScale', args: arguments})
      if (this.anim.scaleX = this.anim.scaleY = e, this.anim instanceof egret.MovieClip) {
        var t = 0, i = 0
        for (var n in this.anim.movieClipData.textureData) t = Math.max(t, this.anim.movieClipData.textureData[n].w), i = Math.max(i, this.anim.movieClipData.textureData[n].h)
        this.width = t * this.anim.scaleX, this.height = i * this.anim.scaleY
      } else {
        this.anim instanceof spine.SkeletonAnimation && (this.width = this.anim.width * this.anim.scaleX, this.height = this.anim.height * this.anim.scaleY)
      }
    }, t.prototype.fixAnchorOffset = function (e, t) {
      return void 0 === e && (e = 0), void 0 === t && (t = 0), this.anim ? void (this.anim instanceof spine.SkeletonAnimation && (this.anim.anchorOffsetX = this.anim.skeletonData.x - e, this.anim.anchorOffsetY = -this.anim.height - this.anim.skeletonData.y - t)) : void this.callOnInitialized.push({
        funcName: 'fixAnchorOffset',
        args: arguments
      })
    }, t.prototype.play = function (e, t, i, n) {
      return void 0 === t && (t = 0), void 0 === i && (i = 0), this.anim ? this.anim instanceof spine.SkeletonAnimation ? this.anim.play(e, t, i, n) : (this.anim instanceof egret.MovieClip && (this.anim.gotoAndPlay(1, 0 == t ? -1 : t), n && n.playEnd && this.anim.once(egret.Event.COMPLETE, n.playEnd, this), n && n.loopEnd && this.anim.addEventListener(egret.Event.COMPLETE, n.loopEnd, this)), null) : void this.callOnInitialized.push({
        funcName: 'play',
        args: arguments
      })
    }, t.prototype.gotoAndStop = function (e, t, i, n) {
      if (void 0 === n && (n = 60), this.anim instanceof spine.SkeletonAnimation) {
        var a = this.anim.state.setAnimation(t, e, !1), s = Math.min(a.animationEnd, i / n)
        a.animationStart = s, a.animationEnd = s
      }
    }, t.prototype.playToStop = function (e, t, i, n) {
      if (void 0 === n && (n = 60), this.anim instanceof spine.SkeletonAnimation) {
        var a = this.anim.state.setAnimation(t, e, !1), s = Math.min(a.animationEnd, i / n)
        a.animationEnd = s
      }
    }, t.prototype.gotoAndPlay = function (e, t, i, n, a) {
      if (void 0 === n && (n = 60), void 0 === a && (a = !0), this.anim instanceof spine.SkeletonAnimation) {
        var s = this.anim.state.setAnimation(t, e, a), o = Math.min(s.getAnimationTime(), i / n)
        s.animationStart = o
      }
    }, t.prototype.ShowAllName = function (e) {
      return void 0 === e && (e = 0), this.anim ? void (this.anim instanceof spine.SkeletonAnimation && this.anim.showAllName(e)) : void this.callOnInitialized.push({
        funcName: 'ShowAllName',
        args: arguments
      })
    }, t.prototype.PlayLastFrame = function (e, t) {
      if (!this.anim) return void this.callOnInitialized.push({funcName: 'PlayLastFrame', args: arguments})
      var i
      i = this.play(e, 1, 0, t), i.setToLastFrame()
    }, t.prototype.playDefault = function (e, t, i, n) {
      return void 0 === t && (t = 0), void 0 === i && (i = 0), this.anim ? this.anim instanceof spine.SkeletonAnimation ? this.anim.playDefault(e, t, i, n) : (this.anim instanceof egret.MovieClip && (this.anim.gotoAndPlay(1, 0 == t ? -1 : t), n && n.playEnd && this.anim.once(egret.Event.COMPLETE, n.playEnd, this), n && n.loopEnd && this.anim.addEventListener(egret.Event.COMPLETE, n.loopEnd, this)), null) : void this.callOnInitialized.push({
        funcName: 'playDefault',
        args: arguments
      })
    }, t.prototype.setTimeScale = function (e) {
      return this.anim ? void (this.anim instanceof spine.SkeletonAnimation ? this.anim.setTimeScale(e) : this.anim instanceof egret.MovieClip && (this.originFrameRate || (this.originFrameRate = this.anim.frameRate), this.anim.frameRate = Math.floor(e * this.anim.frameRate))) : void this.callOnInitialized.push({
        funcName: 'setTimeScale',
        args: arguments
      })
    }, t.prototype.stop = function (e) {
      void 0 === e && (e = 0), this.anim instanceof spine.SkeletonAnimation ? this.anim.stop(e) : this.anim instanceof egret.MovieClip && this.anim.stop()
    }, t.prototype.pause = function () {
      this.anim instanceof spine.SkeletonAnimation ? this.anim.setTimeScale(0) : this.anim instanceof egret.MovieClip && this.anim.stop()
    }, t.prototype.resume = function () {
      this.anim instanceof spine.SkeletonAnimation ? this.anim.setTimeScale(1) : this.anim instanceof egret.MovieClip && this.anim.play()
    }, t.prototype.stopAll = function (e) {
      this.anim instanceof spine.SkeletonAnimation ? this.anim.stopAll(e) : this.anim instanceof egret.MovieClip && (e ? this.anim.gotoAndStop(1) : this.anim.stop())
    }, t.prototype.setSkinByName = function (e) {
      return this.anim ? void (this.anim instanceof spine.SkeletonAnimation && this.anim.setSkinByName(e)) : void this.callOnInitialized.push({
        funcName: 'setSkinByName',
        args: arguments
      })
    }, t.prototype.destroy = function () {
      this.removeChildren(), this.anim = null, this.callOnInitialized = null
    }, t
  }(eui.Component)
  e.SpineObject = t, __reflect(t.prototype, 'spinePlayer.SpineObject')
}(spinePlayer || (spinePlayer = {}))
var __reflect = this && this.__reflect || function (e, t, i) {
  e.__class__ = t, i ? i.push(t) : i = [t], e.__types__ = e.__types__ ? i.concat(e.__types__) : i
}, __extends = this && this.__extends || function (e, t) {
  function i () {
    this.constructor = e
  }

  for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n])
  i.prototype = t.prototype, e.prototype = new i
}, spinePlayer
!function (e) {
  function t (e, t, i) {
    var a = e + '.skel', s = e + '.atlas'
    return n(a, s, t, i)
  }

  function i (e, t, i) {
    var a = e + '_skel', s = e + '_atlas'
    return n(a, s, t, i)
  }

  function n (e, t, i, n) {
    return r.getInstance().load(e, t, i, n)
  }

  function a (e) {
    return r.getInstance().disposePet(e)
  }

  function s (e) {
    return r.getInstance().disposeSpine(e)
  }

  e.create = t, e.createByPreload = i, e.load = n, e.disposePet = a, e.disposeSpine = s
  var o = function (e) {
    return 'resource/' + e
  }, r = function (t) {
    function i (i, n) {
      var a = t.call(this) || this
      return 'canvas' == egret.Capabilities.renderMode && !egret.CanvasRenderer.prototype.drawMesh || n ? (i = i || 'spine/movieClip/', i = o(i), a.loader = new e.MovieClipLoader(i)) : (i = i || 'spine/spine/', i = o(i), a.loader = new e.SpineLoader(i)), a
    }

    return __extends(i, t), i.getInstance = function () {
      if (!this._instance && (this._instance = new i, window.DEBUG)) {
        var t = new e.DebugLoader
        if (this._instance.debug = t, window.dat) {
          var a = {
            spineTestCount: 0, spineModelId: 0, spineInput: function () {
              t.startDragInput()
            }, spineConfig: function () {
              var e = n(Path.getSpineSkel(a.spineModelId), Path.getSpineAtlas(a.spineModelId))
              setTimeout(function () {
                if (!e.anim) return void MFC.bubbleAlert.showAlert('idspine')
                for (var t = e.anim.skeletonData.animations, i = '<model id="' + a.spineModelId + '" name="' + a.spineModelId + '"', n = [], s = 0; s < t.length; s++) n.push(t[s].name)
                n.indexOf('special') > -1 && (i += ' specialSkillArr=""', i += ' specialUseDistance="400"'), n.indexOf('attack') > -1 && (i += ' attackUseDistance="400"'), n.indexOf('skill') > -1 && (i += ' skillUseDistance="400"'), n.indexOf('elem') > -1 && (i += ' elemUseDistance="400"'), n.indexOf('in') > -1 && (i += ' inUseDistance="400"'), console.log(i + ' isSpine="true" />')
              }, 100)
            }
          }, s = window.otherTool || new dat.GUI
          s.add(a, 'spineInput').name('spine'), s.add(a, 'spineModelId').name('Id'), s.add(a, 'spineConfig').name('spine')
        }
      }
      return this._instance
    }, i.prototype.create = function (e, t, i) {
      var n = e + '.skel', a = e + '.atlas'
      return this.load(n, a, t, i)
    }, i.prototype.load = function (e, t, i, n) {
      return this.loader.load(e, t, i, n)
    }, i.prototype.disposeSpine = function (e) {
      return this.loader.disposeSpine(e)
    }, i.prototype.disposePet = function (e) {
      return this.loader.disposePet(e)
    }, i
  }(egret.EventDispatcher)
  e.SpinePlayer = r, __reflect(r.prototype, 'spinePlayer.SpinePlayer')
}(spinePlayer || (spinePlayer = {}))/*!
 * GSAP 3.9.1
 * https://greensock.com
 *
 * @license Copyright 2021, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
 */

!function (t, e) {
  'object' == typeof exports && 'undefined' != typeof module ? e(exports) : 'function' == typeof define && define.amd ? define(['exports'], e) : e((t = t || self).window = t.window || {})
}(this, function (e) {
  'use strict'

  function _inheritsLoose (t, e) {
    t.prototype = Object.create(e.prototype), (t.prototype.constructor = t).__proto__ = e
  }

  function _assertThisInitialized (t) {
    if (void 0 === t) throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called')
    return t
  }

  function o (t) {
    return 'string' == typeof t
  }

  function p (t) {
    return 'function' == typeof t
  }

  function q (t) {
    return 'number' == typeof t
  }

  function r (t) {
    return void 0 === t
  }

  function s (t) {
    return 'object' == typeof t
  }

  function t (t) {
    return !1 !== t
  }

  function u () {
    return 'undefined' != typeof window
  }

  function v (t) {
    return p(t) || o(t)
  }

  function M (t) {
    return (h = mt(t, ot)) && oe
  }

  function N (t, e) {
    return console.warn('Invalid property', t, 'set to', e, 'Missing plugin? gsap.registerPlugin()')
  }

  function O (t, e) {
    return !e && console.warn(t)
  }

  function P (t, e) {
    return t && (ot[t] = e) && h && (h[t] = e) || ot
  }

  function Q () {
    return 0
  }

  function $ (t) {
    var e, r, i = t[0]
    if (s(i) || p(i) || (t = [t]), !(e = (i._gsap || {}).harness)) {
      for (r = ct.length; r-- && !ct[r].targetTest(i);)
      e = ct[r]
    }
    for (r = t.length; r--;) t[r] && (t[r]._gsap || (t[r]._gsap = new Lt(t[r], e))) || t.splice(r, 1)
    return t
  }

  function _ (t) {
    return t._gsap || $(xt(t))[0]._gsap
  }

  function aa (t, e, i) {
    return (i = t[e]) && p(i) ? t[e]() : r(i) && t.getAttribute && t.getAttribute(e) || i
  }

  function ba (t, e) {
    return (t = t.split(',')).forEach(e) || t
  }

  function ca (t) {
    return Math.round(1e5 * t) / 1e5 || 0
  }

  function da (t) {
    return Math.round(1e7 * t) / 1e7 || 0
  }

  function ea (t, e) {
    for (var r = e.length, i = 0; t.indexOf(e[i]) < 0 && ++i < r;)
    return i < r
  }

  function fa () {
    var t, e, r = ht.length, i = ht.slice(0)
    for (lt = {}, t = ht.length = 0; t < r; t++) (e = i[t]) && e._lazy && (e.render(e._lazy[0], e._lazy[1], !0)._lazy = 0)
  }

  function ga (t, e, r, i) {
    ht.length && fa(), t.render(e, r, i), ht.length && fa()
  }

  function ha (t) {
    var e = parseFloat(t)
    return (e || 0 === e) && (t + '').match(at).length < 2 ? e : o(t) ? t.trim() : t
  }

  function ia (t) {
    return t
  }

  function ja (t, e) {
    for (var r in e) r in t || (t[r] = e[r])
    return t
  }

  function ma (t, e) {
    for (var r in e) '__proto__' !== r && 'constructor' !== r && 'prototype' !== r && (t[r] = s(e[r]) ? ma(t[r] || (t[r] = {}), e[r]) : e[r])
    return t
  }

  function na (t, e) {
    var r, i = {}
    for (r in t) r in e || (i[r] = t[r])
    return i
  }

  function oa (e) {
    var r = e.parent || I, i = e.keyframes ? function _setKeyframeDefaults (i) {
      return function (t, e) {
        for (var r in e) r in t || 'duration' === r && i || 'ease' === r || (t[r] = e[r])
      }
    }(W(e.keyframes)) : ja
    if (t(e.inherit)) for (; r;) i(e, r.vars.defaults), r = r.parent || r._dp
    return e
  }

  function ra (t, e, r, i) {
    void 0 === r && (r = '_first'), void 0 === i && (i = '_last')
    var n = e._prev, a = e._next
    n ? n._next = a : t[r] === e && (t[r] = a), a ? a._prev = n : t[i] === e && (t[i] = n), e._next = e._prev = e.parent = null
  }

  function sa (t, e) {
    !t.parent || e && !t.parent.autoRemoveChildren || t.parent.remove(t), t._act = 0
  }

  function ta (t, e) {
    if (t && (!e || e._end > t._dur || e._start < 0)) for (var r = t; r;) r._dirty = 1, r = r.parent
    return t
  }

  function wa (t) {
    return t._repeat ? gt(t._tTime, t = t.duration() + t._rDelay) * t : 0
  }

  function ya (t, e) {
    return (t - e._start) * e._ts + (0 <= e._ts ? 0 : e._dirty ? e.totalDuration() : e._tDur)
  }

  function za (t) {
    return t._end = da(t._start + (t._tDur / Math.abs(t._ts || t._rts || X) || 0))
  }

  function Aa (t, e) {
    var r = t._dp
    return r && r.smoothChildTiming && t._ts && (t._start = da(r._time - (0 < t._ts ? e / t._ts : ((t._dirty ? t.totalDuration() : t._tDur) - e) / -t._ts)), za(t), r._dirty || ta(r, t)), t
  }

  function Ba (t, e) {
    var r
    if ((e._time || e._initted && !e._dur) && (r = ya(t.rawTime(), e), (!e._dur || Tt(0, e.totalDuration(), r) - e._tTime > X) && e.render(r, !0)), ta(t, e)._dp && t._initted && t._time >= t._dur && t._ts) {
      if (t._dur < t.duration()) for (r = t; r._dp;) 0 <= r.rawTime() && r.totalTime(r._tTime), r = r._dp
      t._zTime = -X
    }
  }

  function Ca (t, e, r, i) {
    return e.parent && sa(e), e._start = da((q(r) ? r : r || t !== I ? bt(t, r, e) : t._time) + e._delay), e._end = da(e._start + (e.totalDuration() / Math.abs(e.timeScale()) || 0)), function _addLinkedListItem (t, e, r, i, n) {
      void 0 === r && (r = '_first'), void 0 === i && (i = '_last')
      var a, s = t[i]
      if (n) for (a = e[n]; s && s[n] > a;) s = s._prev
      s ? (e._next = s._next, s._next = e) : (e._next = t[r], t[r] = e), e._next ? e._next._prev = e : t[i] = e, e._prev = s, e.parent = e._dp = t
    }(t, e, '_first', '_last', t._sort ? '_start' : 0), vt(e) || (t._recent = e), i || Ba(t, e), t
  }

  function Da (t, e) {
    return (ot.ScrollTrigger || N('scrollTrigger', e)) && ot.ScrollTrigger.create(e, t)
  }

  function Ea (t, e, r, i) {
    return jt(t, e), t._initted ? !r && t._pt && (t._dur && !1 !== t.vars.lazy || !t._dur && t.vars.lazy) && f !== St.frame ? (ht.push(t), t._lazy = [e, i], 1) : void 0 : 1
  }

  function Ja (t, e, r, i) {
    var n = t._repeat, a = da(e) || 0, s = t._tTime / t._tDur
    return s && !i && (t._time *= a / t._dur), t._dur = a, t._tDur = n ? n < 0 ? 1e10 : da(a * (n + 1) + t._rDelay * n) : a, 0 < s && !i ? Aa(t, t._tTime = t._tDur * s) : t.parent && za(t), r || ta(t.parent, t), t
  }

  function Ka (t) {
    return t instanceof Nt ? ta(t) : Ja(t, t._dur)
  }

  function Na (e, r, i) {
    var n, a, s = q(r[1]), o = (s ? 2 : 1) + (e < 2 ? 0 : 1), u = r[o]
    if (s && (u.duration = r[1]), u.parent = i, e) {
      for (n = u, a = i; a && !("immediateRender" in n);) n = a.vars.defaults || {}, a = t(a.vars.inherit) && a.parent
      u.immediateRender = t(n.immediateRender), e < 2 ? u.runBackwards = 1 : u.startAt = r[o - 1]
    }
    return new Jt(r[0], u, r[1 + o])
  }

  function Oa (t, e) {
    return t || 0 === t ? e(t) : e
  }

  function Qa (t, e) {
    return o(t) && (e = st.exec(t)) ? t.substr(e.index + e[0].length) : ''
  }

  function Ta (t, e) {
    return t && s(t) && 'length' in t && (!e && !t.length || t.length - 1 in t && s(t[0])) && !t.nodeType && t !== i
  }

  function Xa (t) {
    return t.sort(function () {
      return .5 - Math.random()
    })
  }

  function Ya (t) {
    if (p(t)) return t
    var c = s(t) ? t : {each: t}, _ = Rt(c.ease), m = c.from || 0, g = parseFloat(c.base) || 0, v = {},
      e = 0 < m && m < 1, y = isNaN(m) || e, b = c.axis, T = m, w = m
    return o(m) ? T = w = {
      center: .5,
      edges: .5,
      end: 1
    }[m] || 0 : !e && y && (T = m[0], w = m[1]), function (t, e, r) {
      var i, n, a, s, o, u, h, l, f, d = (r || c).length, p = v[d]
      if (!p) {
        if (!(f = 'auto' === c.grid ? 0 : (c.grid || [1, j])[1])) {
          for (h = -j; h < (h = r[f++].getBoundingClientRect().left) && f < d;)
          f--
        }
        for (p = v[d] = [], i = y ? Math.min(f, d) * T - .5 : m % f, n = f === j ? 0 : y ? d * w / f - .5 : m / f | 0, l = j, u = h = 0; u < d; u++) a = u % f - i, s = n - (u / f | 0), p[u] = o = b ? Math.abs('y' === b ? s : a) : G(a * a + s * s), h < o && (h = o), o < l && (l = o)
        'random' === m && Xa(p), p.max = h - l, p.min = l, p.v = d = (parseFloat(c.amount) || parseFloat(c.each) * (d < f ? d - 1 : b ? 'y' === b ? d / f : f : Math.max(f, d / f)) || 0) * ('edges' === m ? -1 : 1), p.b = d < 0 ? g - d : g, p.u = Qa(c.amount || c.each) || 0, _ = _ && d < 0 ? Bt(_) : _
      }
      return d = (p[t] - p.min) / p.max || 0, da(p.b + (_ ? _(d) : d) * p.v) + p.u
    }
  }

  function Za (r) {
    var i = Math.pow(10, ((r + '').split('.')[1] || '').length)
    return function (t) {
      var e = Math.round(parseFloat(t) / r) * r * i
      return (e - e % 1) / i + (q(t) ? 0 : Qa(t))
    }
  }

  function $a (u, t) {
    var h, l, e = W(u)
    return !e && s(u) && (h = e = u.radius || j, u.values ? (u = xt(u.values), (l = !q(u[0])) && (h *= h)) : u = Za(u.increment)), Oa(t, e ? p(u) ? function (t) {
      return l = u(t), Math.abs(l - t) <= h ? l : t
    } : function (t) {
      for (var e, r, i = parseFloat(l ? t.x : t), n = parseFloat(l ? t.y : 0), a = j, s = 0, o = u.length; o--;) (e = l ? (e = u[o].x - i) * e + (r = u[o].y - n) * r : Math.abs(u[o] - i)) < a && (a = e, s = o)
      return s = !h || a <= h ? u[s] : t, l || s === t || q(t) ? s : s + Qa(t)
    } : Za(u))
  }

  function _a (t, e, r, i) {
    return Oa(W(t) ? !e : !0 === r ? !!(r = 0) : !i, function () {
      return W(t) ? t[~~(Math.random() * t.length)] : (r = r || 1e-5) && (i = r < 1 ? Math.pow(10, (r + '').length - 2) : 1) && Math.floor(Math.round((t - r / 2 + Math.random() * (e - t + .99 * r)) / r) * r * i) / i
    })
  }

  function db (e, r, t) {
    return Oa(t, function (t) {
      return e[~~r(t)]
    })
  }

  function gb (t) {
    for (var e, r, i, n, a = 0, s = ''; ~(e = t.indexOf("random(", a));) i = t.indexOf(')', e), n = '[' === t.charAt(e + 7), r = t.substr(e + 7, i - e - 7).match(n ? at : tt), s += t.substr(a, e - a) + _a(n ? r : +r[0], n ? 0 : +r[1], +r[2] || 1e-5), a = i + 1
    return s + t.substr(a, t.length - a)
  }

  function jb (t, e, r) {
    var i, n, a, s = t.labels, o = j
    for (i in s) (n = s[i] - e) < 0 == !!r && n && o > (n = Math.abs(n)) && (a = i, o = n)
    return a
  }

  function lb (t) {
    return sa(t), t.scrollTrigger && t.scrollTrigger.kill(!1), t.progress() < 1 && Mt(t, 'onInterrupt'), t
  }

  function qb (t, e, r) {
    return (6 * (t += t < 0 ? 1 : 1 < t ? -1 : 0) < 1 ? e + (r - e) * t * 6 : t < .5 ? r : 3 * t < 2 ? e + (r - e) * (2 / 3 - t) * 6 : e) * kt + .5 | 0
  }

  function rb (t, e, r) {
    var i, n, a, s, o, u, h, l, f, d, p = t ? q(t) ? [t >> 16, t >> 8 & kt, t & kt] : 0 : Ct.black
    if (!p) {
      if (',' === t.substr(-1) && (t = t.substr(0, t.length - 1)), Ct[t]) {
        p = Ct[t]
      } else if ('#' === t.charAt(0)) {
        if (t.length < 6 && (t = '#' + (i = t.charAt(1)) + i + (n = t.charAt(2)) + n + (a = t.charAt(3)) + a + (5 === t.length ? t.charAt(4) + t.charAt(4) : '')), 9 === t.length) return [(p = parseInt(t.substr(1, 6), 16)) >> 16, p >> 8 & kt, p & kt, parseInt(t.substr(7), 16) / 255]
        p = [(t = parseInt(t.substr(1), 16)) >> 16, t >> 8 & kt, t & kt]
      } else if ('hsl' === t.substr(0, 3)) {
        if (p = d = t.match(tt), e) {
          if (~t.indexOf('=')) return p = t.match(et), r && p.length < 4 && (p[3] = 1), p
        } else {
          s = +p[0] % 360 / 360, o = p[1] / 100, i = 2 * (u = p[2] / 100) - (n = u <= .5 ? u * (o + 1) : u + o - u * o), 3 < p.length && (p[3] *= 1), p[0] = qb(s + 1 / 3, i, n), p[1] = qb(s, i, n), p[2] = qb(s - 1 / 3, i, n)
        }
      } else {
        p = t.match(tt) || Ct.transparent
      }
      p = p.map(Number)
    }
    return e && !d && (i = p[0] / kt, n = p[1] / kt, a = p[2] / kt, u = ((h = Math.max(i, n, a)) + (l = Math.min(i, n, a))) / 2, h === l ? s = o = 0 : (f = h - l, o = .5 < u ? f / (2 - h - l) : f / (h + l), s = h === i ? (n - a) / f + (n < a ? 6 : 0) : h === n ? (a - i) / f + 2 : (i - n) / f + 4, s *= 60), p[0] = ~~(s + .5), p[1] = ~~(100 * o + .5), p[2] = ~~(100 * u + .5)), r && p.length < 4 && (p[3] = 1), p
  }

  function sb (t) {
    var r = [], i = [], n = -1
    return t.split(Pt).forEach(function (t) {
      var e = t.match(rt) || []
      r.push.apply(r, e), i.push(n += e.length + 1)
    }), r.c = i, r
  }

  function tb (t, e, r) {
    var i, n, a, s, o = '', u = (t + o).match(Pt), h = e ? 'hsla(' : 'rgba(', l = 0
    if (!u) return t
    if (u = u.map(function (t) {
      return (t = rb(t, e, 1)) && h + (e ? t[0] + ',' + t[1] + '%,' + t[2] + '%,' + t[3] : t.join(',')) + ')'
    }), r && (a = sb(t), (i = r.c).join(o) !== a.c.join(o))) {
      for (s = (n = t.replace(Pt, '1').split(rt)).length - 1; l < s; l++) o += n[l] + (~i.indexOf(l) ? u.shift() || h + '0,0,0,0)' : (a.length ? a : u.length ? u : r).shift())
    }
    if (!n) for (s = (n = t.split(Pt)).length - 1; l < s; l++) o += n[l] + u[l]
    return o + n[s]
  }

  function wb (t) {
    var e, r = t.join(' ')
    if (Pt.lastIndex = 0, Pt.test(r)) return e = At.test(r), t[1] = tb(t[1], e), t[0] = tb(t[0], e, sb(t[1])), !0
  }

  function Fb (t) {
    var e = (t + '').split('('), r = zt[e[0]]
    return r && 1 < e.length && r.config ? r.config.apply(null, ~t.indexOf('{') ? [function _parseObjectInString (t) {
      for (var e, r, i, n = {}, a = t.substr(1, t.length - 3).split(':'), s = a[0], o = 1, u = a.length; o < u; o++) r = a[o], e = o !== u - 1 ? r.lastIndexOf(',') : r.length, i = r.substr(0, e), n[s] = isNaN(i) ? i.replace(Et, '').trim() : +i, s = r.substr(e + 1).trim()
      return n
    }(e[1])] : function _valueInParentheses (t) {
      var e = t.indexOf('(') + 1, r = t.indexOf(')'), i = t.indexOf('(', e)
      return t.substring(e, ~i && i < r ? t.indexOf(')', r + 1) : r)
    }(t).split(',').map(ha)) : zt._CE && Ft.test(t) ? zt._CE('', t) : r
  }

  function Hb (t, e) {
    for (var r, i = t._first; i;) i instanceof Nt ? Hb(i, e) : !i.vars.yoyoEase || i._yoyo && i._repeat || i._yoyo === e || (i.timeline ? Hb(i.timeline, e) : (r = i._ease, i._ease = i._yEase, i._yEase = r, i._yoyo = e)), i = i._next
  }

  function Jb (t, e, r, i) {
    void 0 === r && (r = function easeOut (t) {
      return 1 - e(1 - t)
    }), void 0 === i && (i = function easeInOut (t) {
      return t < .5 ? e(2 * t) / 2 : 1 - e(2 * (1 - t)) / 2
    })
    var n, a = {easeIn: e, easeOut: r, easeInOut: i}
    return ba(t, function (t) {
      for (var e in zt[t] = ot[t] = a, zt[n = t.toLowerCase()] = r, a) zt[n + ('easeIn' === e ? '.in' : 'easeOut' === e ? '.out' : '.inOut')] = zt[t + '.' + e] = a[e]
    }), a
  }

  function Kb (e) {
    return function (t) {
      return t < .5 ? (1 - e(1 - 2 * t)) / 2 : .5 + e(2 * (t - .5)) / 2
    }
  }

  function Lb (r, t, e) {
    function Sl (t) {
      return 1 === t ? 1 : i * Math.pow(2, -10 * t) * K((t - a) * n) + 1
    }

    var i = 1 <= t ? t : 1, n = (e || (r ? .3 : .45)) / (t < 1 ? t : 1), a = n / U * (Math.asin(1 / i) || 0),
      s = 'out' === r ? Sl : 'in' === r ? function (t) {
        return 1 - Sl(1 - t)
      } : Kb(Sl)
    return n = U / n, s.config = function (t, e) {
      return Lb(r, t, e)
    }, s
  }

  function Mb (e, r) {
    function $l (t) {
      return t ? --t * t * ((r + 1) * t + r) + 1 : 0
    }

    void 0 === r && (r = 1.70158)
    var t = 'out' === e ? $l : 'in' === e ? function (t) {
      return 1 - $l(1 - t)
    } : Kb($l)
    return t.config = function (t) {
      return Mb(e, t)
    }, t
  }

  var R, I, i, n, a, h, l, f, d, c, m, g, y, b, T, w, x, k, C, A, S, D, z, F, E, B,
    Y = {autoSleep: 120, force3D: 'auto', nullTargetWarn: 1, units: {lineHeight: ''}},
    L = {duration: .5, overwrite: !1, delay: 0}, j = 1e8, X = 1 / j, U = 2 * Math.PI, V = U / 4, J = 0, G = Math.sqrt,
    Z = Math.cos, K = Math.sin, H = 'function' == typeof ArrayBuffer && ArrayBuffer.isView || function () {
    }, W = Array.isArray, tt = /(?:-?\.?\d|\.)+/gi, et = /[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,
    rt = /[-+=.]*\d+[.e-]*\d*[a-z%]*/g, it = /[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi, nt = /[+-]=-?[.\d]+/,
    at = /[^,'"\[\]\s]+/gi, st = /[\d.+\-=]+(?:e[-+]\d*)*/i, ot = {}, ut = {}, ht = [], lt = {}, ft = {}, dt = {},
    pt = 30, ct = [], _t = '', mt = function _merge (t, e) {
      for (var r in e) t[r] = e[r]
      return t
    }, gt = function _animationCycle (t, e) {
      var r = Math.floor(t /= e)
      return t && r === t ? r - 1 : r
    }, vt = function _isFromOrFromStart (t) {
      var e = t.data
      return 'isFromStart' === e || 'isStart' === e
    }, yt = {_start: 0, endTime: Q, totalDuration: Q}, bt = function _parsePosition (t, e, r) {
      var i, n, a, s = t.labels, u = t._recent || yt, h = t.duration() >= j ? u.endTime(!1) : t._dur
      return o(e) && (isNaN(e) || e in s) ? (n = e.charAt(0), a = '%' === e.substr(-1), i = e.indexOf('='), '<' === n || '>' === n ? (0 <= i && (e = e.replace(/=/, '')), ('<' === n ? u._start : u.endTime(0 <= u._repeat)) + (parseFloat(e.substr(1)) || 0) * (a ? (i < 0 ? u : r).totalDuration() / 100 : 1)) : i < 0 ? (e in s || (s[e] = h), s[e]) : (n = parseFloat(e.charAt(i - 1) + e.substr(i + 1)), a && r && (n = n / 100 * (W(r) ? r[0] : r).totalDuration()), 1 < i ? _parsePosition(t, e.substr(0, i - 1), r) + n : h + n)) : null == e ? h : +e
    }, Tt = function _clamp (t, e, r) {
      return r < t ? t : e < r ? e : r
    }, wt = [].slice, xt = function toArray (t, e, r) {
      return !o(t) || r || !n && Dt() ? W(t) ? function _flatten (t, e, r) {
        return void 0 === r && (r = []), t.forEach(function (t) {
          return o(t) && !e || Ta(t, 1) ? r.push.apply(r, xt(t)) : r.push(t)
        }) || r
      }(t, r) : Ta(t) ? wt.call(t, 0) : t ? [t] : [] : wt.call((e || a).querySelectorAll(t), 0)
    }, Ot = function mapRange (e, t, r, i, n) {
      var a = t - e, s = i - r
      return Oa(n, function (t) {
        return r + ((t - e) / a * s || 0)
      })
    }, Mt = function _callback (t, e, r) {
      var i, n, a = t.vars, s = a[e]
      if (s) return i = a[e + 'Params'], n = a.callbackScope || t, r && ht.length && fa(), i ? s.apply(n, i) : s.call(n)
    }, kt = 255, Ct = {
      aqua: [0, kt, kt],
      lime: [0, kt, 0],
      silver: [192, 192, 192],
      black: [0, 0, 0],
      maroon: [128, 0, 0],
      teal: [0, 128, 128],
      blue: [0, 0, kt],
      navy: [0, 0, 128],
      white: [kt, kt, kt],
      olive: [128, 128, 0],
      yellow: [kt, kt, 0],
      orange: [kt, 165, 0],
      gray: [128, 128, 128],
      purple: [128, 0, 128],
      green: [0, 128, 0],
      red: [kt, 0, 0],
      pink: [kt, 192, 203],
      cyan: [0, kt, kt],
      transparent: [kt, kt, kt, 0]
    }, Pt = function () {
      var t, e = '(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b'
      for (t in Ct) e += '|' + t + '\\b'
      return new RegExp(e + ')', 'gi')
    }(), At = /hsl[a]?\(/, St = (x = Date.now, k = 500, C = 33, A = x(), S = A, z = D = 1e3 / 240, b = {
      time: 0,
      frame: 0,
      tick: function tick () {
        Ok(!0)
      },
      deltaRatio: function deltaRatio (t) {
        return T / (1e3 / (t || 60))
      },
      wake: function wake () {
        l && (!n && u() && (i = n = window, a = i.document || {}, ot.gsap = oe, (i.gsapVersions || (i.gsapVersions = [])).push(oe.version), M(h || i.GreenSockGlobals || !i.gsap && i || {}), y = i.requestAnimationFrame), m && b.sleep(), g = y || function (t) {
          return setTimeout(t, z - 1e3 * b.time + 1 | 0)
        }, c = 1, Ok(2))
      },
      sleep: function sleep () {
        (y ? i.cancelAnimationFrame : clearTimeout)(m), c = 0, g = Q
      },
      lagSmoothing: function lagSmoothing (t, e) {
        k = t || 1e8, C = Math.min(e, k, 0)
      },
      fps: function fps (t) {
        D = 1e3 / (t || 240), z = 1e3 * b.time + D
      },
      add: function add (t) {
        F.indexOf(t) < 0 && F.push(t), Dt()
      },
      remove: function remove (t, e) {
        ~(e = F.indexOf(t)) && F.splice(e, 1) && e <= w && w--
      },
      _listeners: F = []
    }), Dt = function _wake () {
      return !c && St.wake()
    }, zt = {}, Ft = /^[\d.\-M][\d.\-,\s]/, Et = /["']/g, Bt = function _invertEase (e) {
      return function (t) {
        return 1 - e(1 - t)
      }
    }, Rt = function _parseEase (t, e) {
      return t && (p(t) ? t : zt[t] || Fb(t)) || e
    }

  function Ok (t) {
    var e, r, i, n, a = x() - S, s = !0 === t
    if (k < a && (A += a - C), (0 < (e = (i = (S += a) - A) - z) || s) && (n = ++b.frame, T = i - 1e3 * b.time, b.time = i /= 1e3, z += e + (D <= e ? 4 : D - e), r = 1), s || (m = g(Ok)), r) for (w = 0; w < F.length; w++) F[w](i, T, n, t)
  }

  function pm (t) {
    return t < B ? E * t * t : t < .7272727272727273 ? E * Math.pow(t - 1.5 / 2.75, 2) + .75 : t < .9090909090909092 ? E * (t -= 2.25 / 2.75) * t + .9375 : E * Math.pow(t - 2.625 / 2.75, 2) + .984375
  }

  ba('Linear,Quad,Cubic,Quart,Quint,Strong', function (t, e) {
    var r = e < 5 ? e + 1 : e
    Jb(t + ',Power' + (r - 1), e ? function (t) {
      return Math.pow(t, r)
    } : function (t) {
      return t
    }, function (t) {
      return 1 - Math.pow(1 - t, r)
    }, function (t) {
      return t < .5 ? Math.pow(2 * t, r) / 2 : 1 - Math.pow(2 * (1 - t), r) / 2
    })
  }), zt.Linear.easeNone = zt.none = zt.Linear.easeIn, Jb('Elastic', Lb('in'), Lb('out'), Lb()), E = 7.5625, B = 1 / 2.75, Jb('Bounce', function (t) {
    return 1 - pm(1 - t)
  }, pm), Jb('Expo', function (t) {
    return t ? Math.pow(2, 10 * (t - 1)) : 0
  }), Jb('Circ', function (t) {
    return -(G(1 - t * t) - 1)
  }), Jb('Sine', function (t) {
    return 1 === t ? 1 : 1 - Z(t * V)
  }), Jb('Back', Mb('in'), Mb('out'), Mb()), zt.SteppedEase = zt.steps = ot.SteppedEase = {
    config: function config (t, e) {
      void 0 === t && (t = 1)
      var r = 1 / t, i = t + (e ? 0 : 1), n = e ? 1 : 0
      return function (t) {
        return ((i * Tt(0, .99999999, t) | 0) + n) * r
      }
    }
  }, L.ease = zt['quad.out'], ba('onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt', function (t) {
    return _t += t + ',' + t + 'Params,'
  })
  var It, Lt = function GSCache (t, e) {
    this.id = J++, (t._gsap = this).target = t, this.harness = e, this.get = e ? e.get : aa, this.set = e ? e.getSetter : Kt
  }, qt = ((It = Animation.prototype).delay = function delay (t) {
    return t || 0 === t ? (this.parent && this.parent.smoothChildTiming && this.startTime(this._start + t - this._delay), this._delay = t, this) : this._delay
  }, It.duration = function duration (t) {
    return arguments.length ? this.totalDuration(0 < this._repeat ? t + (t + this._rDelay) * this._repeat : t) : this.totalDuration() && this._dur
  }, It.totalDuration = function totalDuration (t) {
    return arguments.length ? (this._dirty = 0, Ja(this, this._repeat < 0 ? t : (t - this._repeat * this._rDelay) / (this._repeat + 1))) : this._tDur
  }, It.totalTime = function totalTime (t, e) {
    if (Dt(), !arguments.length) return this._tTime
    var r = this._dp
    if (r && r.smoothChildTiming && this._ts) {
      for (Aa(this, t), !r._dp || r.parent || Ba(r, this); r && r.parent;) r.parent._time !== r._start + (0 <= r._ts ? r._tTime / r._ts : (r.totalDuration() - r._tTime) / -r._ts) && r.totalTime(r._tTime, !0), r = r.parent
      !this.parent && this._dp.autoRemoveChildren && (0 < this._ts && t < this._tDur || this._ts < 0 && 0 < t || !this._tDur && !t) && Ca(this._dp, this, this._start - this._delay)
    }
    return (this._tTime !== t || !this._dur && !e || this._initted && Math.abs(this._zTime) === X || !t && !this._initted && (this.add || this._ptLookup)) && (this._ts || (this._pTime = t), ga(this, t, e)), this
  }, It.time = function time (t, e) {
    return arguments.length ? this.totalTime(Math.min(this.totalDuration(), t + wa(this)) % (this._dur + this._rDelay) || (t ? this._dur : 0), e) : this._time
  }, It.totalProgress = function totalProgress (t, e) {
    return arguments.length ? this.totalTime(this.totalDuration() * t, e) : this.totalDuration() ? Math.min(1, this._tTime / this._tDur) : this.ratio
  }, It.progress = function progress (t, e) {
    return arguments.length ? this.totalTime(this.duration() * (!this._yoyo || 1 & this.iteration() ? t : 1 - t) + wa(this), e) : this.duration() ? Math.min(1, this._time / this._dur) : this.ratio
  }, It.iteration = function iteration (t, e) {
    var r = this.duration() + this._rDelay
    return arguments.length ? this.totalTime(this._time + (t - 1) * r, e) : this._repeat ? gt(this._tTime, r) + 1 : 1
  }, It.timeScale = function timeScale (t) {
    if (!arguments.length) return this._rts === -X ? 0 : this._rts
    if (this._rts === t) return this
    var e = this.parent && this._ts ? ya(this.parent._time, this) : this._tTime
    return this._rts = +t || 0, this._ts = this._ps || t === -X ? 0 : this._rts, function _recacheAncestors (t) {
      for (var e = t.parent; e && e.parent;) e._dirty = 1, e.totalDuration(), e = e.parent
    }(this.totalTime(Tt(-this._delay, this._tDur, e), !0)), za(this), this
  }, It.paused = function paused (t) {
    return arguments.length ? (this._ps !== t && ((this._ps = t) ? (this._pTime = this._tTime || Math.max(-this._delay, this.rawTime()), this._ts = this._act = 0) : (Dt(), this._ts = this._rts, this.totalTime(this.parent && !this.parent.smoothChildTiming ? this.rawTime() : this._tTime || this._pTime, 1 === this.progress() && Math.abs(this._zTime) !== X && (this._tTime -= X)))), this) : this._ps
  }, It.startTime = function startTime (t) {
    if (arguments.length) {
      this._start = t
      var e = this.parent || this._dp
      return !e || !e._sort && this.parent || Ca(e, this, t - this._delay), this
    }
    return this._start
  }, It.endTime = function endTime (e) {
    return this._start + (t(e) ? this.totalDuration() : this.duration()) / Math.abs(this._ts || 1)
  }, It.rawTime = function rawTime (t) {
    var e = this.parent || this._dp
    return e ? t && (!this._ts || this._repeat && this._time && this.totalProgress() < 1) ? this._tTime % (this._dur + this._rDelay) : this._ts ? ya(e.rawTime(t), this) : this._tTime : this._tTime
  }, It.globalTime = function globalTime (t) {
    for (var e = this, r = arguments.length ? t : e.rawTime(); e;) r = e._start + r / (e._ts || 1), e = e._dp
    return r
  }, It.repeat = function repeat (t) {
    return arguments.length ? (this._repeat = t === 1 / 0 ? -2 : t, Ka(this)) : -2 === this._repeat ? 1 / 0 : this._repeat
  }, It.repeatDelay = function repeatDelay (t) {
    if (arguments.length) {
      var e = this._time
      return this._rDelay = t, Ka(this), e ? this.time(e) : this
    }
    return this._rDelay
  }, It.yoyo = function yoyo (t) {
    return arguments.length ? (this._yoyo = t, this) : this._yoyo
  }, It.seek = function seek (e, r) {
    return this.totalTime(bt(this, e), t(r))
  }, It.restart = function restart (e, r) {
    return this.play().totalTime(e ? -this._delay : 0, t(r))
  }, It.play = function play (t, e) {
    return null != t && this.seek(t, e), this.reversed(!1).paused(!1)
  }, It.reverse = function reverse (t, e) {
    return null != t && this.seek(t || this.totalDuration(), e), this.reversed(!0).paused(!1)
  }, It.pause = function pause (t, e) {
    return null != t && this.seek(t, e), this.paused(!0)
  }, It.resume = function resume () {
    return this.paused(!1)
  }, It.reversed = function reversed (t) {
    return arguments.length ? (!!t !== this.reversed() && this.timeScale(-this._rts || (t ? -X : 0)), this) : this._rts < 0
  }, It.invalidate = function invalidate () {
    return this._initted = this._act = 0, this._zTime = -X, this
  }, It.isActive = function isActive () {
    var t, e = this.parent || this._dp, r = this._start
    return !(e && !(this._ts && this._initted && e.isActive() && (t = e.rawTime(!0)) >= r && t < this.endTime(!0) - X))
  }, It.eventCallback = function eventCallback (t, e, r) {
    var i = this.vars
    return 1 < arguments.length ? (e ? (i[t] = e, r && (i[t + 'Params'] = r), 'onUpdate' === t && (this._onUpdate = e)) : delete i[t], this) : i[t]
  }, It.then = function then (t) {
    var i = this
    return new Promise(function (e) {
      function Gn () {
        var t = i.then
        i.then = null, p(r) && (r = r(i)) && (r.then || r === i) && (i.then = t), e(r), i.then = t
      }

      var r = p(t) ? t : ia
      i._initted && 1 === i.totalProgress() && 0 <= i._ts || !i._tTime && i._ts < 0 ? Gn() : i._prom = Gn
    })
  }, It.kill = function kill () {
    lb(this)
  }, Animation)

  function Animation (t) {
    this.vars = t, this._delay = +t.delay || 0, (this._repeat = t.repeat === 1 / 0 ? -2 : t.repeat || 0) && (this._rDelay = t.repeatDelay || 0, this._yoyo = !!t.yoyo || !!t.yoyoEase), this._ts = 1, Ja(this, +t.duration, 1, 1), this.data = t.data, c || St.wake()
  }

  ja(qt.prototype, {
    _time: 0,
    _start: 0,
    _end: 0,
    _tTime: 0,
    _tDur: 0,
    _dirty: 0,
    _repeat: 0,
    _yoyo: !1,
    parent: null,
    _initted: !1,
    _rDelay: 0,
    _ts: 1,
    _dp: 0,
    ratio: 0,
    _zTime: -X,
    _prom: 0,
    _ps: !1,
    _rts: 1
  })
  var Nt = function (n) {
    function Timeline (e, r) {
      var i
      return void 0 === e && (e = {}), (i = n.call(this, e) || this).labels = {}, i.smoothChildTiming = !!e.smoothChildTiming, i.autoRemoveChildren = !!e.autoRemoveChildren, i._sort = t(e.sortChildren), I && Ca(e.parent || I, _assertThisInitialized(i), r), e.reversed && i.reverse(), e.paused && i.paused(!0), e.scrollTrigger && Da(_assertThisInitialized(i), e.scrollTrigger), i
    }

    _inheritsLoose(Timeline, n)
    var e = Timeline.prototype
    return e.to = function to (t, e, r) {
      return Na(0, arguments, this), this
    }, e.from = function from (t, e, r) {
      return Na(1, arguments, this), this
    }, e.fromTo = function fromTo (t, e, r, i) {
      return Na(2, arguments, this), this
    }, e.set = function set (t, e, r) {
      return e.duration = 0, e.parent = this, oa(e).repeatDelay || (e.repeat = 0), e.immediateRender = !!e.immediateRender, new Jt(t, e, bt(this, r), 1), this
    }, e.call = function call (t, e, r) {
      return Ca(this, Jt.delayedCall(0, t, e), r)
    }, e.staggerTo = function staggerTo (t, e, r, i, n, a, s) {
      return r.duration = e, r.stagger = r.stagger || i, r.onComplete = a, r.onCompleteParams = s, r.parent = this, new Jt(t, r, bt(this, n)), this
    }, e.staggerFrom = function staggerFrom (e, r, i, n, a, s, o) {
      return i.runBackwards = 1, oa(i).immediateRender = t(i.immediateRender), this.staggerTo(e, r, i, n, a, s, o)
    }, e.staggerFromTo = function staggerFromTo (e, r, i, n, a, s, o, u) {
      return n.startAt = i, oa(n).immediateRender = t(n.immediateRender), this.staggerTo(e, r, n, a, s, o, u)
    }, e.render = function render (t, e, r) {
      var i, n, a, s, o, u, h, l, f, d, p, c, _ = this._time, m = this._dirty ? this.totalDuration() : this._tDur,
        g = this._dur, v = t <= 0 ? 0 : da(t), y = this._zTime < 0 != t < 0 && (this._initted || !g)
      if (this !== I && m < v && 0 <= t && (v = m), v !== this._tTime || r || y) {
        if (_ !== this._time && g && (v += this._time - _, t += this._time - _), i = v, f = this._start, u = !(l = this._ts), y && (g || (_ = this._zTime), !t && e || (this._zTime = t)), this._repeat) {
          if (p = this._yoyo, o = g + this._rDelay, this._repeat < -1 && t < 0) return this.totalTime(100 * o + t, e, r)
          if (i = da(v % o), v === m ? (s = this._repeat, i = g) : ((s = ~~(v / o)) && s === v / o && (i = g, s--), g < i && (i = g)), d = gt(this._tTime, o), !_ && this._tTime && d !== s && (d = s), p && 1 & s && (i = g - i, c = 1), s !== d && !this._lock) {
            var b = p && 1 & d, T = b === (p && 1 & s)
            if (s < d && (b = !b), _ = b ? 0 : g, this._lock = 1, this.render(_ || (c ? 0 : da(s * o)), e, !g)._lock = 0, this._tTime = v, !e && this.parent && Mt(this, 'onRepeat'), this.vars.repeatRefresh && !c && (this.invalidate()._lock = 1), _ && _ !== this._time || u != !this._ts || this.vars.onRepeat && !this.parent && !this._act) return this
            if (g = this._dur, m = this._tDur, T && (this._lock = 2, _ = b ? g : -1e-4, this.render(_, !0), this.vars.repeatRefresh && !c && this.invalidate()), this._lock = 0, !this._ts && !u) return this
            Hb(this, c)
          }
        }
        if (this._hasPause && !this._forcing && this._lock < 2 && (h = function _findNextPauseTween (t, e, r) {
          var i
          if (e < r) {
            for (i = t._first; i && i._start <= r;) {
              if ('isPause' === i.data && i._start > e) return i
              i = i._next
            }
          } else {
            for (i = t._last; i && i._start >= r;) {
              if ('isPause' === i.data && i._start < e) return i
              i = i._prev
            }
          }
        }(this, da(_), da(i))) && (v -= i - (i = h._start)), this._tTime = v, this._time = i, this._act = !l, this._initted || (this._onUpdate = this.vars.onUpdate, this._initted = 1, this._zTime = t, _ = 0), !_ && i && !e && (Mt(this, 'onStart'), this._tTime !== v)) {
          return this
        }
        if (_ <= i && 0 <= t) {
          for (n = this._first; n;) {
            if (a = n._next, (n._act || i >= n._start) && n._ts && h !== n) {
              if (n.parent !== this) return this.render(t, e, r)
              if (n.render(0 < n._ts ? (i - n._start) * n._ts : (n._dirty ? n.totalDuration() : n._tDur) + (i - n._start) * n._ts, e, r), i !== this._time || !this._ts && !u) {
                h = 0, a && (v += this._zTime = -X)
                break
              }
            }
            n = a
          }
        } else {
          n = this._last
          for (var w = t < 0 ? t : i; n;) {
            if (a = n._prev, (n._act || w <= n._end) && n._ts && h !== n) {
              if (n.parent !== this) return this.render(t, e, r)
              if (n.render(0 < n._ts ? (w - n._start) * n._ts : (n._dirty ? n.totalDuration() : n._tDur) + (w - n._start) * n._ts, e, r), i !== this._time || !this._ts && !u) {
                h = 0, a && (v += this._zTime = w ? -X : X)
                break
              }
            }
            n = a
          }
        }
        if (h && !e && (this.pause(), h.render(_ <= i ? 0 : -X)._zTime = _ <= i ? 1 : -1, this._ts)) return this._start = f, za(this), this.render(t, e, r)
        this._onUpdate && !e && Mt(this, 'onUpdate', !0), (v === m && m >= this.totalDuration() || !v && _) && (f !== this._start && Math.abs(l) === Math.abs(this._ts) || this._lock || (!t && g || !(v === m && 0 < this._ts || !v && this._ts < 0) || sa(this, 1), e || t < 0 && !_ || !v && !_ && m || (Mt(this, v === m && 0 <= t ? 'onComplete' : 'onReverseComplete', !0), !this._prom || v < m && 0 < this.timeScale() || this._prom())))
      }
      return this
    }, e.add = function add (t, e) {
      var r = this
      if (q(e) || (e = bt(this, e, t)), !(t instanceof qt)) {
        if (W(t)) {
          return t.forEach(function (t) {
            return r.add(t, e)
          }), this
        }
        if (o(t)) return this.addLabel(t, e)
        if (!p(t)) return this
        t = Jt.delayedCall(0, t)
      }
      return this !== t ? Ca(this, t, e) : this
    }, e.getChildren = function getChildren (t, e, r, i) {
      void 0 === t && (t = !0), void 0 === e && (e = !0), void 0 === r && (r = !0), void 0 === i && (i = -j)
      for (var n = [], a = this._first; a;) a._start >= i && (a instanceof Jt ? e && n.push(a) : (r && n.push(a), t && n.push.apply(n, a.getChildren(!0, e, r)))), a = a._next
      return n
    }, e.getById = function getById (t) {
      for (var e = this.getChildren(1, 1, 1), r = e.length; r--;) if (e[r].vars.id === t) return e[r]
    }, e.remove = function remove (t) {
      return o(t) ? this.removeLabel(t) : p(t) ? this.killTweensOf(t) : (ra(this, t), t === this._recent && (this._recent = this._last), ta(this))
    }, e.totalTime = function totalTime (t, e) {
      return arguments.length ? (this._forcing = 1, !this._dp && this._ts && (this._start = da(St.time - (0 < this._ts ? t / this._ts : (this.totalDuration() - t) / -this._ts))), n.prototype.totalTime.call(this, t, e), this._forcing = 0, this) : this._tTime
    }, e.addLabel = function addLabel (t, e) {
      return this.labels[t] = bt(this, e), this
    }, e.removeLabel = function removeLabel (t) {
      return delete this.labels[t], this
    }, e.addPause = function addPause (t, e, r) {
      var i = Jt.delayedCall(0, e || Q, r)
      return i.data = 'isPause', this._hasPause = 1, Ca(this, i, bt(this, t))
    }, e.removePause = function removePause (t) {
      var e = this._first
      for (t = bt(this, t); e;) e._start === t && 'isPause' === e.data && sa(e), e = e._next
    }, e.killTweensOf = function killTweensOf (t, e, r) {
      for (var i = this.getTweensOf(t, r), n = i.length; n--;) Qt !== i[n] && i[n].kill(t, e)
      return this
    }, e.getTweensOf = function getTweensOf (t, e) {
      for (var r, i = [], n = xt(t), a = this._first, s = q(e); a;) a instanceof Jt ? ea(a._targets, n) && (s ? (!Qt || a._initted && a._ts) && a.globalTime(0) <= e && a.globalTime(a.totalDuration()) > e : !e || a.isActive()) && i.push(a) : (r = a.getTweensOf(n, e)).length && i.push.apply(i, r), a = a._next
      return i
    }, e.tweenTo = function tweenTo (t, e) {
      e = e || {}
      var r, i = this, n = bt(i, t), a = e.startAt, s = e.onStart, o = e.onStartParams, u = e.immediateRender,
        h = Jt.to(i, ja({
          ease: e.ease || 'none',
          lazy: !1,
          immediateRender: !1,
          time: n,
          overwrite: 'auto',
          duration: e.duration || Math.abs((n - (a && 'time' in a ? a.time : i._time)) / i.timeScale()) || X,
          onStart: function onStart () {
            if (i.pause(), !r) {
              var t = e.duration || Math.abs((n - (a && 'time' in a ? a.time : i._time)) / i.timeScale())
              h._dur !== t && Ja(h, t, 0, 1).render(h._time, !0, !0), r = 1
            }
            s && s.apply(h, o || [])
          }
        }, e))
      return u ? h.render(0) : h
    }, e.tweenFromTo = function tweenFromTo (t, e, r) {
      return this.tweenTo(e, ja({startAt: {time: bt(this, t)}}, r))
    }, e.recent = function recent () {
      return this._recent
    }, e.nextLabel = function nextLabel (t) {
      return void 0 === t && (t = this._time), jb(this, bt(this, t))
    }, e.previousLabel = function previousLabel (t) {
      return void 0 === t && (t = this._time), jb(this, bt(this, t), 1)
    }, e.currentLabel = function currentLabel (t) {
      return arguments.length ? this.seek(t, !0) : this.previousLabel(this._time + X)
    }, e.shiftChildren = function shiftChildren (t, e, r) {
      void 0 === r && (r = 0)
      for (var i, n = this._first, a = this.labels; n;) n._start >= r && (n._start += t, n._end += t), n = n._next
      if (e) for (i in a) a[i] >= r && (a[i] += t)
      return ta(this)
    }, e.invalidate = function invalidate () {
      var t = this._first
      for (this._lock = 0; t;) t.invalidate(), t = t._next
      return n.prototype.invalidate.call(this)
    }, e.clear = function clear (t) {
      void 0 === t && (t = !0)
      for (var e, r = this._first; r;) e = r._next, this.remove(r), r = e
      return this._dp && (this._time = this._tTime = this._pTime = 0), t && (this.labels = {}), ta(this)
    }, e.totalDuration = function totalDuration (t) {
      var e, r, i, n = 0, a = this, s = a._last, o = j
      if (arguments.length) return a.timeScale((a._repeat < 0 ? a.duration() : a.totalDuration()) / (a.reversed() ? -t : t))
      if (a._dirty) {
        for (i = a.parent; s;) e = s._prev, s._dirty && s.totalDuration(), o < (r = s._start) && a._sort && s._ts && !a._lock ? (a._lock = 1, Ca(a, s, r - s._delay, 1)._lock = 0) : o = r, r < 0 && s._ts && (n -= r, (!i && !a._dp || i && i.smoothChildTiming) && (a._start += r / a._ts, a._time -= r, a._tTime -= r), a.shiftChildren(-r, !1, -Infinity), o = 0), s._end > n && s._ts && (n = s._end), s = e
        Ja(a, a === I && a._time > n ? a._time : n, 1, 1), a._dirty = 0
      }
      return a._tDur
    }, Timeline.updateRoot = function updateRoot (t) {
      if (I._ts && (ga(I, ya(t, I)), f = St.frame), St.frame >= pt) {
        pt += Y.autoSleep || 120
        var e = I._first
        if ((!e || !e._ts) && Y.autoSleep && St._listeners.length < 2) {
          for (; e && !e._ts;) e = e._next
          e || St.sleep()
        }
      }
    }, Timeline
  }(qt)
  ja(Nt.prototype, {_lock: 0, _hasPause: 0, _forcing: 0})

  function Tb (t, e, r, i, n, a) {
    var u, h, l, f
    if (ft[t] && !1 !== (u = new ft[t]).init(n, u.rawVars ? e[t] : function _processVars (t, e, r, i, n) {
      if (p(t) && (t = Xt(t, n, e, r, i)), !s(t) || t.style && t.nodeType || W(t) || H(t)) return o(t) ? Xt(t, n, e, r, i) : t
      var a, u = {}
      for (a in t) u[a] = Xt(t[a], n, e, r, i)
      return u
    }(e[t], i, n, a, r), r, i, a) && (r._pt = h = new ae(r._pt, n, t, 0, 1, u.render, u, 0, u.priority), r !== d)) {
      for (l = r._ptLookup[r._targets.indexOf(n)], f = u._props.length; f--;) l[u._props[f]] = h
    }
    return u
  }

  function Xb (t, r, e, i) {
    var n, a, s = r.ease || i || 'power1.inOut'
    if (W(r)) {
      a = e[t] || (e[t] = []), r.forEach(function (t, e) {
        return a.push({t: e / (r.length - 1) * 100, v: t, e: s})
      })
    } else {
      for (n in r) a = e[n] || (e[n] = []), 'ease' === n || a.push({t: parseFloat(t), v: r[n], e: s})
    }
  }

  var Qt, Yt = function _addPropTween (t, e, r, i, n, a, s, u, h) {
    p(i) && (i = i(n || 0, t, a))
    var l, f = t[e],
      d = 'get' !== r ? r : p(f) ? h ? t[e.indexOf('set') || !p(t['get' + e.substr(3)]) ? e : 'get' + e.substr(3)](h) : t[e]() : f,
      c = p(f) ? h ? Zt : $t : Gt
    if (o(i) && (~i.indexOf('random(') && (i = gb(i)), '=' === i.charAt(1) && (!(l = parseFloat(d) + parseFloat(i.substr(2)) * ('-' === i.charAt(0) ? -1 : 1) + (Qa(d) || 0)) && 0 !== l || (i = l))), d !== i) {
      return isNaN(d * i) || '' === i ? (f || e in t || N(e, i), function _addComplexStringPropTween (t, e, r, i, n, a, s) {
        var o, u, h, l, f, d, p, c, _ = new ae(this._pt, t, e, 0, 1, te, null, n), m = 0, g = 0
        for (_.b = r, _.e = i, r += '', (p = ~(i += '').indexOf('random(')) && (i = gb(i)), a && (a(c = [r, i], t, e), r = c[0], i = c[1]), u = r.match(it) || []; o = it.exec(i);) {
          l = o[0], f = i.substring(m, o.index), h ? h = (h + 1) % 5 : 'rgba(' === f.substr(-5) && (h = 1), l !== u[g++] && (d = parseFloat(u[g - 1]) || 0, _._pt = {
            _next: _._pt,
            p: f || 1 === g ? f : ',',
            s: d,
            c: '=' === l.charAt(1) ? parseFloat(l.substr(2)) * ('-' === l.charAt(0) ? -1 : 1) : parseFloat(l) - d,
            m: h && h < 4 ? Math.round : 0
          }, m = it.lastIndex)
        }
        return _.c = m < i.length ? i.substring(m, i.length) : '', _.fp = s, (nt.test(i) || p) && (_.e = 0), this._pt = _
      }.call(this, t, e, d, i, c, u || Y.stringFilter, h)) : (l = new ae(this._pt, t, e, +d || 0, i - (d || 0), 'boolean' == typeof f ? Wt : Ht, 0, c), h && (l.fp = h), s && l.modifier(s, this, t), this._pt = l)
    }
  }, jt = function _initTween (e, r) {
    var i, n, a, s, o, u, h, l, f, d, p, c, m, g = e.vars, v = g.ease, y = g.startAt, b = g.immediateRender, T = g.lazy,
      w = g.onUpdate, x = g.onUpdateParams, O = g.callbackScope, M = g.runBackwards, k = g.yoyoEase, C = g.keyframes,
      P = g.autoRevert, A = e._dur, S = e._startAt, D = e._targets, z = e.parent,
      F = z && 'nested' === z.data ? z.parent._targets : D, E = 'auto' === e._overwrite && !R, B = e.timeline
    if (!B || C && v || (v = 'none'), e._ease = Rt(v, L.ease), e._yEase = k ? Bt(Rt(!0 === k ? v : k, L.ease)) : 0, k && e._yoyo && !e._repeat && (k = e._yEase, e._yEase = e._ease, e._ease = k), e._from = !B && !!g.runBackwards, !B || C && !g.stagger) {
      if (c = (l = D[0] ? _(D[0]).harness : 0) && g[l.prop], i = na(g, ut), S && sa(S.render(-1, !0)), y) {
        if (sa(e._startAt = Jt.set(D, ja({
          data: 'isStart',
          overwrite: !1,
          parent: z,
          immediateRender: !0,
          lazy: t(T),
          startAt: null,
          delay: 0,
          onUpdate: w,
          onUpdateParams: x,
          callbackScope: O,
          stagger: 0
        }, y))), r < 0 && !b && !P && e._startAt.render(-1, !0), b) {
          if (0 < r && !P && (e._startAt = 0), A && r <= 0) return void (r && (e._zTime = r))
        } else {
          !1 === P && (e._startAt = 0)
        }
      } else if (M && A) {
        if (S) {
          P || (e._startAt = 0)
        } else if (r && (b = !1), a = ja({
          overwrite: !1,
          data: 'isFromStart',
          lazy: b && t(T),
          immediateRender: b,
          stagger: 0,
          parent: z
        }, i), c && (a[l.prop] = c), sa(e._startAt = Jt.set(D, a)), r < 0 && e._startAt.render(-1, !0), e._zTime = r, b) {
          if (!r) return
        } else {
          _initTween(e._startAt, X)
        }
      }
      for (e._pt = 0, T = A && t(T) || T && !A, n = 0; n < D.length; n++) {
        if (h = (o = D[n])._gsap || $(D)[n]._gsap, e._ptLookup[n] = d = {}, lt[h.id] && ht.length && fa(), p = F === D ? n : F.indexOf(o), l && !1 !== (f = new l).init(o, c || i, e, p, F) && (e._pt = s = new ae(e._pt, o, f.name, 0, 1, f.render, f, 0, f.priority), f._props.forEach(function (t) {
          d[t] = s
        }), f.priority && (u = 1)), !l || c) {
          for (a in i) ft[a] && (f = Tb(a, i, e, p, o, F)) ? f.priority && (u = 1) : d[a] = s = Yt.call(e, o, a, 'get', i[a], p, F, 0, g.stringFilter)
        }
        e._op && e._op[n] && e.kill(o, e._op[n]), E && e._pt && (Qt = e, I.killTweensOf(o, d, e.globalTime(r)), m = !e.parent, Qt = 0), e._pt && T && (lt[h.id] = 1)
      }
      u && ne(e), e._onInit && e._onInit(e)
    }
    e._onUpdate = w, e._initted = (!e._op || e._pt) && !m, C && r <= 0 && B.render(j, !0, !0)
  }, Xt = function _parseFuncOrString (t, e, r, i, n) {
    return p(t) ? t.call(e, r, i, n) : o(t) && ~t.indexOf('random(') ? gb(t) : t
  }, Ut = _t + 'repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase', Vt = {}
  ba(Ut + ',id,stagger,delay,duration,paused,scrollTrigger', function (t) {
    return Vt[t] = 1
  })
  var Jt = function (F) {
    function Tween (e, r, i, n) {
      var a
      'number' == typeof r && (i.duration = r, r = i, i = null)
      var o, u, h, l, f, d, p, c, _ = (a = F.call(this, n ? r : oa(r)) || this).vars, m = _.duration, g = _.delay,
        y = _.immediateRender, b = _.stagger, T = _.overwrite, w = _.keyframes, x = _.defaults, M = _.scrollTrigger,
        k = _.yoyoEase, C = r.parent || I, P = (W(e) || H(e) ? q(e[0]) : 'length' in r) ? [e] : xt(e)
      if (a._targets = P.length ? $(P) : O('GSAP target ' + e + ' not found. https://greensock.com', !Y.nullTargetWarn) || [], a._ptLookup = [], a._overwrite = T, w || b || v(m) || v(g)) {
        if (r = a.vars, (o = a.timeline = new Nt({
          data: 'nested',
          defaults: x || {}
        })).kill(), o.parent = o._dp = _assertThisInitialized(a), o._start = 0, b || v(m) || v(g)) {
          if (l = P.length, p = b && Ya(b), s(b)) for (f in b) ~Ut.indexOf(f) && ((c = c || {})[f] = b[f])
          for (u = 0; u < l; u++) (h = na(r, Vt)).stagger = 0, k && (h.yoyoEase = k), c && mt(h, c), d = P[u], h.duration = +Xt(m, _assertThisInitialized(a), u, d, P), h.delay = (+Xt(g, _assertThisInitialized(a), u, d, P) || 0) - a._delay, !b && 1 === l && h.delay && (a._delay = g = h.delay, a._start += g, h.delay = 0), o.to(d, h, p ? p(u, d, P) : 0), o._ease = zt.none
          o.duration() ? m = g = 0 : a.timeline = 0
        } else if (w) {
          oa(ja(o.vars.defaults, {ease: 'none'})), o._ease = Rt(w.ease || r.ease || 'none')
          var A, S, D, z = 0
          if (W(w)) {
            w.forEach(function (t) {
              return o.to(P, t, '>')
            })
          } else {
            for (f in h = {}, w) 'ease' === f || 'easeEach' === f || Xb(f, w[f], h, w.easeEach)
            for (f in h) {
              for (A = h[f].sort(function (t, e) {
                return t.t - e.t
              }), u = z = 0; u < A.length; u++) {
                (D = {
                  ease: (S = A[u]).e,
                  duration: (S.t - (u ? A[u - 1].t : 0)) / 100 * m
                })[f] = S.v, o.to(P, D, z), z += D.duration
              }
            }
            o.duration() < m && o.to({}, {duration: m - o.duration()})
          }
        }
        m || a.duration(m = o.duration())
      } else {
        a.timeline = 0
      }
      return !0 !== T || R || (Qt = _assertThisInitialized(a), I.killTweensOf(P), Qt = 0), Ca(C, _assertThisInitialized(a), i), r.reversed && a.reverse(), r.paused && a.paused(!0), (y || !m && !w && a._start === da(C._time) && t(y) && function _hasNoPausedAncestors (t) {
        return !t || t._ts && _hasNoPausedAncestors(t.parent)
      }(_assertThisInitialized(a)) && 'nested' !== C.data) && (a._tTime = -X, a.render(Math.max(0, -g))), M && Da(_assertThisInitialized(a), M), a
    }

    _inheritsLoose(Tween, F)
    var e = Tween.prototype
    return e.render = function render (t, e, r) {
      var i, n, a, s, o, u, h, l, f, d = this._time, p = this._tDur, c = this._dur,
        _ = p - X < t && 0 <= t ? p : t < X ? 0 : t
      if (c) {
        if (_ !== this._tTime || !t || r || !this._initted && this._tTime || this._startAt && this._zTime < 0 != t < 0) {
          if (i = _, l = this.timeline, this._repeat) {
            if (s = c + this._rDelay, this._repeat < -1 && t < 0) return this.totalTime(100 * s + t, e, r)
            if (i = da(_ % s), _ === p ? (a = this._repeat, i = c) : ((a = ~~(_ / s)) && a === _ / s && (i = c, a--), c < i && (i = c)), (u = this._yoyo && 1 & a) && (f = this._yEase, i = c - i), o = gt(this._tTime, s), i === d && !r && this._initted) return this
            a !== o && (l && this._yEase && Hb(l, u), !this.vars.repeatRefresh || u || this._lock || (this._lock = r = 1, this.render(da(s * a), !0).invalidate()._lock = 0))
          }
          if (!this._initted) {
            if (Ea(this, t < 0 ? t : i, r, e)) return this._tTime = 0, this
            if (c !== this._dur) return this.render(t, e, r)
          }
          if (this._tTime = _, this._time = i, !this._act && this._ts && (this._act = 1, this._lazy = 0), this.ratio = h = (f || this._ease)(i / c), this._from && (this.ratio = h = 1 - h), i && !d && !e && (Mt(this, 'onStart'), this._tTime !== _)) return this
          for (n = this._pt; n;) n.r(h, n.d), n = n._next
          l && l.render(t < 0 ? t : !i && u ? -X : l._dur * l._ease(i / this._dur), e, r) || this._startAt && (this._zTime = t), this._onUpdate && !e && (t < 0 && this._startAt && this._startAt.render(t, !0, r), Mt(this, 'onUpdate')), this._repeat && a !== o && this.vars.onRepeat && !e && this.parent && Mt(this, 'onRepeat'), _ !== this._tDur && _ || this._tTime !== _ || (t < 0 && this._startAt && !this._onUpdate && this._startAt.render(t, !0, !0), !t && c || !(_ === this._tDur && 0 < this._ts || !_ && this._ts < 0) || sa(this, 1), e || t < 0 && !d || !_ && !d || (Mt(this, _ === p ? 'onComplete' : 'onReverseComplete', !0), !this._prom || _ < p && 0 < this.timeScale() || this._prom()))
        }
      } else {
        !function _renderZeroDurationTween (t, e, r, i) {
          var n, a, s, o = t.ratio, u = e < 0 || !e && (!t._start && function _parentPlayheadIsBeforeStart (t) {
            var e = t.parent
            return e && e._ts && e._initted && !e._lock && (e.rawTime() < 0 || _parentPlayheadIsBeforeStart(e))
          }(t) && (t._initted || !vt(t)) || (t._ts < 0 || t._dp._ts < 0) && !vt(t)) ? 0 : 1, h = t._rDelay, l = 0
          if (h && t._repeat && (l = Tt(0, t._tDur, e), a = gt(l, h), t._yoyo && 1 & a && (u = 1 - u), a !== gt(t._tTime, h) && (o = 1 - u, t.vars.repeatRefresh && t._initted && t.invalidate())), u !== o || i || t._zTime === X || !e && t._zTime) {
            if (!t._initted && Ea(t, e, i, r)) return
            for (s = t._zTime, t._zTime = e || (r ? X : 0), r = r || e && !s, t.ratio = u, t._from && (u = 1 - u), t._time = 0, t._tTime = l, n = t._pt; n;) n.r(u, n.d), n = n._next
            t._startAt && e < 0 && t._startAt.render(e, !0, !0), t._onUpdate && !r && Mt(t, 'onUpdate'), l && t._repeat && !r && t.parent && Mt(t, 'onRepeat'), (e >= t._tDur || e < 0) && t.ratio === u && (u && sa(t, 1), r || (Mt(t, u ? 'onComplete' : 'onReverseComplete', !0), t._prom && t._prom()))
          } else {
            t._zTime || (t._zTime = e)
          }
        }(this, t, e, r)
      }
      return this
    }, e.targets = function targets () {
      return this._targets
    }, e.invalidate = function invalidate () {
      return this._pt = this._op = this._startAt = this._onUpdate = this._lazy = this.ratio = 0, this._ptLookup = [], this.timeline && this.timeline.invalidate(), F.prototype.invalidate.call(this)
    }, e.kill = function kill (t, e) {
      if (void 0 === e && (e = 'all'), !(t || e && 'all' !== e)) return this._lazy = this._pt = 0, this.parent ? lb(this) : this
      if (this.timeline) {
        var r = this.timeline.totalDuration()
        return this.timeline.killTweensOf(t, e, Qt && !0 !== Qt.vars.overwrite)._first || lb(this), this.parent && r !== this.timeline.totalDuration() && Ja(this, this._dur * this.timeline._tDur / r, 0, 1), this
      }
      var i, n, a, s, u, h, l, f = this._targets, d = t ? xt(t) : f, p = this._ptLookup, c = this._pt
      if ((!e || 'all' === e) && function _arraysMatch (t, e) {
        for (var r = t.length, i = r === e.length; i && r-- && t[r] === e[r];)
        return r < 0
      }(f, d)) {
        return 'all' === e && (this._pt = 0), lb(this)
      }
      for (i = this._op = this._op || [], 'all' !== e && (o(e) && (u = {}, ba(e, function (t) {
        return u[t] = 1
      }), e = u), e = function _addAliasesToVars (t, e) {
        var r, i, n, a, s = t[0] ? _(t[0]).harness : 0, o = s && s.aliases
        if (!o) return e
        for (i in r = mt({}, e), o) if (i in r) for (n = (a = o[i].split(',')).length; n--;) r[a[n]] = r[i]
        return r
      }(f, e)), l = f.length; l--;) {
        if (~d.indexOf(f[l])) for (u in n = p[l], 'all' === e ? (i[l] = e, s = n, a = {}) : (a = i[l] = i[l] || {}, s = e), s) (h = n && n[u]) && ('kill' in h.d && !0 !== h.d.kill(u) || ra(this, h, '_pt'), delete n[u]), 'all' !== a && (a[u] = 1)
      }
      return this._initted && !this._pt && c && lb(this), this
    }, Tween.to = function to (t, e, r) {
      return new Tween(t, e, r)
    }, Tween.from = function from (t, e) {
      return Na(1, arguments)
    }, Tween.delayedCall = function delayedCall (t, e, r, i) {
      return new Tween(e, 0, {
        immediateRender: !1,
        lazy: !1,
        overwrite: !1,
        delay: t,
        onComplete: e,
        onReverseComplete: e,
        onCompleteParams: r,
        onReverseCompleteParams: r,
        callbackScope: i
      })
    }, Tween.fromTo = function fromTo (t, e, r) {
      return Na(2, arguments)
    }, Tween.set = function set (t, e) {
      return e.duration = 0, e.repeatDelay || (e.repeat = 0), new Tween(t, e)
    }, Tween.killTweensOf = function killTweensOf (t, e, r) {
      return I.killTweensOf(t, e, r)
    }, Tween
  }(qt)
  ja(Jt.prototype, {
    _targets: [],
    _lazy: 0,
    _startAt: 0,
    _op: 0,
    _onInit: 0
  }), ba('staggerTo,staggerFrom,staggerFromTo', function (r) {
    Jt[r] = function () {
      var t = new Nt, e = wt.call(arguments, 0)
      return e.splice('staggerFromTo' === r ? 5 : 4, 0, 0), t[r].apply(t, e)
    }
  })

  function dc (t, e, r) {
    return t.setAttribute(e, r)
  }

  function lc (t, e, r, i) {
    i.mSet(t, e, i.m.call(i.tween, r, i.mt), i)
  }

  var Gt = function _setterPlain (t, e, r) {
    return t[e] = r
  }, $t = function _setterFunc (t, e, r) {
    return t[e](r)
  }, Zt = function _setterFuncWithParam (t, e, r, i) {
    return t[e](i.fp, r)
  }, Kt = function _getSetter (t, e) {
    return p(t[e]) ? $t : r(t[e]) && t.setAttribute ? dc : Gt
  }, Ht = function _renderPlain (t, e) {
    return e.set(e.t, e.p, Math.round(1e6 * (e.s + e.c * t)) / 1e6, e)
  }, Wt = function _renderBoolean (t, e) {
    return e.set(e.t, e.p, !!(e.s + e.c * t), e)
  }, te = function _renderComplexString (t, e) {
    var r = e._pt, i = ''
    if (!t && e.b) {
      i = e.b
    } else if (1 === t && e.e) {
      i = e.e
    } else {
      for (; r;) i = r.p + (r.m ? r.m(r.s + r.c * t) : Math.round(1e4 * (r.s + r.c * t)) / 1e4) + i, r = r._next
      i += e.c
    }
    e.set(e.t, e.p, i, e)
  }, ee = function _renderPropTweens (t, e) {
    for (var r = e._pt; r;) r.r(t, r.d), r = r._next
  }, re = function _addPluginModifier (t, e, r, i) {
    for (var n, a = this._pt; a;) n = a._next, a.p === i && a.modifier(t, e, r), a = n
  }, ie = function _killPropTweensOf (t) {
    for (var e, r, i = this._pt; i;) r = i._next, i.p === t && !i.op || i.op === t ? ra(this, i, '_pt') : i.dep || (e = 1), i = r
    return !e
  }, ne = function _sortPropTweensByPriority (t) {
    for (var e, r, i, n, a = t._pt; a;) {
      for (e = a._next, r = i; r && r.pr > a.pr;) r = r._next;
      (a._prev = r ? r._prev : n) ? a._prev._next = a : i = a, (a._next = r) ? r._prev = a : n = a, a = e
    }
    t._pt = i
  }, ae = (PropTween.prototype.modifier = function modifier (t, e, r) {
    this.mSet = this.mSet || this.set, this.set = lc, this.m = t, this.mt = r, this.tween = e
  }, PropTween)

  function PropTween (t, e, r, i, n, a, s, o, u) {
    this.t = e, this.s = i, this.c = n, this.p = r, this.r = a || Ht, this.d = s || this, this.set = o || Gt, this.pr = u || 0, (this._next = t) && (t._prev = this)
  }

  ba(_t + 'parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger', function (t) {
    return ut[t] = 1
  }), ot.TweenMax = ot.TweenLite = Jt, ot.TimelineLite = ot.TimelineMax = Nt, I = new Nt({
    sortChildren: !1,
    defaults: L,
    autoRemoveChildren: !0,
    id: 'root',
    smoothChildTiming: !0
  }), Y.stringFilter = wb
  var se = {
    registerPlugin: function registerPlugin () {
      for (var t = arguments.length, e = new Array(t), r = 0; r < t; r++) e[r] = arguments[r]
      e.forEach(function (t) {
        return function _createPlugin (t) {
          var e = (t = !t.name && t.default || t).name, r = p(t), i = e && !r && t.init ? function () {
              this._props = []
            } : t, n = {init: Q, render: ee, add: Yt, kill: ie, modifier: re, rawVars: 0},
            a = {targetTest: 0, get: 0, getSetter: Kt, aliases: {}, register: 0}
          if (Dt(), t !== i) {
            if (ft[e]) return
            ja(i, ja(na(t, n), a)), mt(i.prototype, mt(n, na(t, a))), ft[i.prop = e] = i, t.targetTest && (ct.push(i), ut[e] = 1), e = ('css' === e ? 'CSS' : e.charAt(0).toUpperCase() + e.substr(1)) + 'Plugin'
          }
          P(e, i), t.register && t.register(oe, i, ae)
        }(t)
      })
    },
    timeline: function timeline (t) {
      return new Nt(t)
    },
    getTweensOf: function getTweensOf (t, e) {
      return I.getTweensOf(t, e)
    },
    getProperty: function getProperty (i, t, e, r) {
      o(i) && (i = xt(i)[0])
      var n = _(i || {}).get, a = e ? ia : ha
      return 'native' === e && (e = ''), i ? t ? a((ft[t] && ft[t].get || n)(i, t, e, r)) : function (t, e, r) {
        return a((ft[t] && ft[t].get || n)(i, t, e, r))
      } : i
    },
    quickSetter: function quickSetter (r, e, i) {
      if (1 < (r = xt(r)).length) {
        var n = r.map(function (t) {
          return oe.quickSetter(t, e, i)
        }), a = n.length
        return function (t) {
          for (var e = a; e--;) n[e](t)
        }
      }
      r = r[0] || {}
      var s = ft[e], o = _(r), u = o.harness && (o.harness.aliases || {})[e] || e, h = s ? function (t) {
        var e = new s
        d._pt = 0, e.init(r, i ? t + i : t, d, 0, [r]), e.render(1, e), d._pt && ee(1, d)
      } : o.set(r, u)
      return s ? h : function (t) {
        return h(r, u, i ? t + i : t, o, 1)
      }
    },
    isTweening: function isTweening (t) {
      return 0 < I.getTweensOf(t, !0).length
    },
    defaults: function defaults (t) {
      return t && t.ease && (t.ease = Rt(t.ease, L.ease)), ma(L, t || {})
    },
    config: function config (t) {
      return ma(Y, t || {})
    },
    registerEffect: function registerEffect (t) {
      var i = t.name, n = t.effect, e = t.plugins, a = t.defaults, r = t.extendTimeline;
      (e || '').split(',').forEach(function (t) {
        return t && !ft[t] && !ot[t] && O(i + ' effect requires ' + t + ' plugin.')
      }), dt[i] = function (t, e, r) {
        return n(xt(t), ja(e || {}, a), r)
      }, r && (Nt.prototype[i] = function (t, e, r) {
        return this.add(dt[i](t, s(e) ? e : (r = e) && {}, this), r)
      })
    },
    registerEase: function registerEase (t, e) {
      zt[t] = Rt(e)
    },
    parseEase: function parseEase (t, e) {
      return arguments.length ? Rt(t, e) : zt
    },
    getById: function getById (t) {
      return I.getById(t)
    },
    exportRoot: function exportRoot (e, r) {
      void 0 === e && (e = {})
      var i, n, a = new Nt(e)
      for (a.smoothChildTiming = t(e.smoothChildTiming), I.remove(a), a._dp = 0, a._time = a._tTime = I._time, i = I._first; i;) n = i._next, !r && !i._dur && i instanceof Jt && i.vars.onComplete === i._targets[0] || Ca(a, i, i._start - i._delay), i = n
      return Ca(I, a, 0), a
    },
    utils: {
      wrap: function wrap (e, t, r) {
        var i = t - e
        return W(e) ? db(e, wrap(0, e.length), t) : Oa(r, function (t) {
          return (i + (t - e) % i) % i + e
        })
      }, wrapYoyo: function wrapYoyo (e, t, r) {
        var i = t - e, n = 2 * i
        return W(e) ? db(e, wrapYoyo(0, e.length - 1), t) : Oa(r, function (t) {
          return e + (i < (t = (n + (t - e) % n) % n || 0) ? n - t : t)
        })
      }, distribute: Ya, random: _a, snap: $a, normalize: function normalize (t, e, r) {
        return Ot(t, e, 0, 1, r)
      }, getUnit: Qa, clamp: function clamp (e, r, t) {
        return Oa(t, function (t) {
          return Tt(e, r, t)
        })
      }, splitColor: rb, toArray: xt, selector: function selector (r) {
        return r = xt(r)[0] || O('Invalid scope') || {}, function (t) {
          var e = r.current || r.nativeElement || r
          return xt(t, e.querySelectorAll ? e : e === r ? O('Invalid scope') || a.createElement('div') : r)
        }
      }, mapRange: Ot, pipe: function pipe () {
        for (var t = arguments.length, e = new Array(t), r = 0; r < t; r++) e[r] = arguments[r]
        return function (t) {
          return e.reduce(function (t, e) {
            return e(t)
          }, t)
        }
      }, unitize: function unitize (e, r) {
        return function (t) {
          return e(parseFloat(t)) + (r || Qa(t))
        }
      }, interpolate: function interpolate (e, r, t, i) {
        var n = isNaN(e + r) ? 0 : function (t) {
          return (1 - t) * e + t * r
        }
        if (!n) {
          var a, s, u, h, l, f = o(e), d = {}
          if (!0 === t && (i = 1) && (t = null), f) {
            e = {p: e}, r = {p: r}
          } else if (W(e) && !W(r)) {
            for (u = [], h = e.length, l = h - 2, s = 1; s < h; s++) u.push(interpolate(e[s - 1], e[s]))
            h--, n = function func (t) {
              t *= h
              var e = Math.min(l, ~~t)
              return u[e](t - e)
            }, t = r
          } else {
            i || (e = mt(W(e) ? [] : {}, e))
          }
          if (!u) {
            for (a in r) Yt.call(d, e, a, 'get', r[a])
            n = function func (t) {
              return ee(t, d) || (f ? e.p : e)
            }
          }
        }
        return Oa(t, n)
      }, shuffle: Xa
    },
    install: M,
    effects: dt,
    ticker: St,
    updateRoot: Nt.updateRoot,
    plugins: ft,
    globalTimeline: I,
    core: {
      PropTween: ae,
      globals: P,
      Tween: Jt,
      Timeline: Nt,
      Animation: qt,
      getCache: _,
      _removeLinkedListItem: ra,
      suppressOverwrites: function suppressOverwrites (t) {
        return R = t
      }
    }
  }
  ba('to,from,fromTo,delayedCall,set,killTweensOf', function (t) {
    return se[t] = Jt[t]
  }), St.add(Nt.updateRoot), d = se.to({}, {duration: 0})

  function pc (t, e) {
    for (var r = t._pt; r && r.p !== e && r.op !== e && r.fp !== e;) r = r._next
    return r
  }

  function rc (t, n) {
    return {
      name: t, rawVars: 1, init: function init (t, i, e) {
        e._onInit = function (t) {
          var e, r
          if (o(i) && (e = {}, ba(i, function (t) {
            return e[t] = 1
          }), i = e), n) {
            for (r in e = {}, i) e[r] = n(i[r])
            i = e
          }
          !function _addModifiers (t, e) {
            var r, i, n, a = t._targets
            for (r in e) for (i = a.length; i--;) (n = (n = t._ptLookup[i][r]) && n.d) && (n._pt && (n = pc(n, r)), n && n.modifier && n.modifier(e[r], t, a[i], r))
          }(t, i)
        }
      }
    }
  }

  var oe = se.registerPlugin({
    name: 'attr', init: function init (t, e, r, i, n) {
      var a, s
      for (a in e) (s = this.add(t, 'setAttribute', (t.getAttribute(a) || 0) + '', e[a], i, n, 0, 0, a)) && (s.op = a), this._props.push(a)
    }
  }, {
    name: 'endArray', init: function init (t, e) {
      for (var r = e.length; r--;) this.add(t, r, t[r] || 0, e[r])
    }
  }, rc('roundProps', Za), rc('modifiers'), rc('snap', $a)) || se
  Jt.version = Nt.version = oe.version = '3.9.1', l = 1, u() && Dt()

  function ad (t, e) {
    return e.set(e.t, e.p, Math.round(1e4 * (e.s + e.c * t)) / 1e4 + e.u, e)
  }

  function bd (t, e) {
    return e.set(e.t, e.p, 1 === t ? e.e : Math.round(1e4 * (e.s + e.c * t)) / 1e4 + e.u, e)
  }

  function cd (t, e) {
    return e.set(e.t, e.p, t ? Math.round(1e4 * (e.s + e.c * t)) / 1e4 + e.u : e.b, e)
  }

  function dd (t, e) {
    var r = e.s + e.c * t
    e.set(e.t, e.p, ~~(r + (r < 0 ? -.5 : .5)) + e.u, e)
  }

  function ed (t, e) {
    return e.set(e.t, e.p, t ? e.e : e.b, e)
  }

  function fd (t, e) {
    return e.set(e.t, e.p, 1 !== t ? e.b : e.e, e)
  }

  function gd (t, e, r) {
    return t.style[e] = r
  }

  function hd (t, e, r) {
    return t.style.setProperty(e, r)
  }

  function id (t, e, r) {
    return t._gsap[e] = r
  }

  function jd (t, e, r) {
    return t._gsap.scaleX = t._gsap.scaleY = r
  }

  function kd (t, e, r, i, n) {
    var a = t._gsap
    a.scaleX = a.scaleY = r, a.renderTransform(n, a)
  }

  function ld (t, e, r, i, n) {
    var a = t._gsap
    a[e] = r, a.renderTransform(n, a)
  }

  function pd (t, e) {
    var r = he.createElementNS ? he.createElementNS((e || 'http://www.w3.org/1999/xhtml').replace(/^https/, 'http'), t) : he.createElement(t)
    return r.style ? r : he.createElement(t)
  }

  function qd (t, e, r) {
    var i = getComputedStyle(t)
    return i[e] || i.getPropertyValue(e.replace(Ie, '-$1').toLowerCase()) || i.getPropertyValue(e) || !r && qd(t, Xe(e) || e, 1) || ''
  }

  function td () {
    (function _windowExists () {
      return 'undefined' != typeof window
    })() && window.document && (ue = window, he = ue.document, le = he.documentElement, de = pd('div') || {style: {}}, pd('div'), Qe = Xe(Qe), Ye = Qe + 'Origin', de.style.cssText = 'border-width:0;line-height:0;position:absolute;padding:0', ce = !!Xe('perspective'), fe = 1)
  }

  function ud (t) {
    var e,
      r = pd('svg', this.ownerSVGElement && this.ownerSVGElement.getAttribute('xmlns') || 'http://www.w3.org/2000/svg'),
      i = this.parentNode, n = this.nextSibling, a = this.style.cssText
    if (le.appendChild(r), r.appendChild(this), this.style.display = 'block', t) {
      try {
        e = this.getBBox(), this._gsapBBox = this.getBBox, this.getBBox = ud
      } catch (t) {
      }
    } else {
      this._gsapBBox && (e = this._gsapBBox())
    }
    return i && (n ? i.insertBefore(this, n) : i.appendChild(this)), le.removeChild(r), this.style.cssText = a, e
  }

  function vd (t, e) {
    for (var r = e.length; r--;) if (t.hasAttribute(e[r])) return t.getAttribute(e[r])
  }

  function wd (e) {
    var r
    try {
      r = e.getBBox()
    } catch (t) {
      r = ud.call(e, !0)
    }
    return r && (r.width || r.height) || e.getBBox === ud || (r = ud.call(e, !0)), !r || r.width || r.x || r.y ? r : {
      x: +vd(e, ['x', 'cx', 'x1']) || 0,
      y: +vd(e, ['y', 'cy', 'y1']) || 0,
      width: 0,
      height: 0
    }
  }

  function xd (t) {
    return !(!t.getCTM || t.parentNode && !t.ownerSVGElement || !wd(t))
  }

  function yd (t, e) {
    if (e) {
      var r = t.style
      e in Fe && e !== Ye && (e = Qe), r.removeProperty ? ('ms' !== e.substr(0, 2) && 'webkit' !== e.substr(0, 6) || (e = '-' + e), r.removeProperty(e.replace(Ie, '-$1').toLowerCase())) : r.removeAttribute(e)
    }
  }

  function zd (t, e, r, i, n, a) {
    var s = new ae(t._pt, e, r, 0, 1, a ? fd : ed)
    return (t._pt = s).b = i, s.e = n, t._props.push(r), s
  }

  function Bd (t, e, r, i) {
    var n, a, s, o, u = parseFloat(r) || 0, h = (r + '').trim().substr((u + '').length) || 'px', l = de.style,
      f = Le.test(e), d = 'svg' === t.tagName.toLowerCase(), p = (d ? 'client' : 'offset') + (f ? 'Width' : 'Height'),
      c = 'px' === i, m = '%' === i
    return i === h || !u || Ue[i] || Ue[h] ? u : ('px' === h || c || (u = Bd(t, e, r, 'px')), o = t.getCTM && xd(t), !m && '%' !== h || !Fe[e] && !~e.indexOf('adius') ? (l[f ? 'width' : 'height'] = 100 + (c ? h : i), a = ~e.indexOf('adius') || 'em' === i && t.appendChild && !d ? t : t.parentNode, o && (a = (t.ownerSVGElement || {}).parentNode), a && a !== he && a.appendChild || (a = he.body), (s = a._gsap) && m && s.width && f && s.time === St.time ? ca(u / s.width * 100) : (!m && '%' !== h || (l.position = qd(t, 'position')), a === t && (l.position = 'static'), a.appendChild(de), n = de[p], a.removeChild(de), l.position = 'absolute', f && m && ((s = _(a)).time = St.time, s.width = a[p]), ca(c ? n * u / 100 : n && u ? 100 / n * u : 0))) : (n = o ? t.getBBox()[f ? 'width' : 'height'] : t[p], ca(m ? u / n * 100 : u / 100 * n)))
  }

  function Cd (t, e, r, i) {
    var n
    return fe || td(), e in Ne && 'transform' !== e && ~(e = Ne[e]).indexOf(',') && (e = e.split(',')[0]), Fe[e] && 'transform' !== e ? (n = Ze(t, i), n = 'transformOrigin' !== e ? n[e] : n.svg ? n.origin : Ke(qd(t, Ye)) + ' ' + n.zOrigin + 'px') : (n = t.style[e]) && 'auto' !== n && !i && !~(n + '').indexOf('calc(') || (n = Je[e] && Je[e](t, e, r) || qd(t, e) || aa(t, e) || ('opacity' === e ? 1 : 0)), r && !~(n + '').trim().indexOf(' ') ? Bd(t, e, n, r) + r : n
  }

  function Dd (t, e, r, i) {
    if (!r || 'none' === r) {
      var n = Xe(e, t, 1), a = n && qd(t, n, 1)
      a && a !== r ? (e = n, r = a) : 'borderColor' === e && (r = qd(t, 'borderTopColor'))
    }
    var s, o, u, h, l, f, d, p, c, _, m, g, v = new ae(this._pt, t.style, e, 0, 1, te), y = 0, b = 0
    if (v.b = r, v.e = i, r += '', 'auto' === (i += '') && (t.style[e] = i, i = qd(t, e) || i, t.style[e] = r), wb(s = [r, i]), i = s[1], u = (r = s[0]).match(rt) || [], (i.match(rt) || []).length) {
      for (; o = rt.exec(i);) {
        d = o[0], c = i.substring(y, o.index), l ? l = (l + 1) % 5 : 'rgba(' !== c.substr(-5) && 'hsla(' !== c.substr(-5) || (l = 1), d !== (f = u[b++] || '') && (h = parseFloat(f) || 0, m = f.substr((h + '').length), (g = '=' === d.charAt(1) ? +(d.charAt(0) + '1') : 0) && (d = d.substr(2)), p = parseFloat(d), _ = d.substr((p + '').length), y = rt.lastIndex - _.length, _ || (_ = _ || Y.units[e] || m, y === i.length && (i += _, v.e += _)), m !== _ && (h = Bd(t, e, f, _) || 0), v._pt = {
          _next: v._pt,
          p: c || 1 === b ? c : ',',
          s: h,
          c: g ? g * p : p - h,
          m: l && l < 4 || 'zIndex' === e ? Math.round : 0
        })
      }
      v.c = y < i.length ? i.substring(y, i.length) : ''
    } else {
      v.r = 'display' === e && 'none' === i ? fd : ed
    }
    return nt.test(i) && (v.e = 0), this._pt = v
  }

  function Fd (t) {
    var e = t.split(' '), r = e[0], i = e[1] || '50%'
    return 'top' !== r && 'bottom' !== r && 'left' !== i && 'right' !== i || (t = r, r = i, i = t), e[0] = Ve[r] || r, e[1] = Ve[i] || i, e.join(' ')
  }

  function Gd (t, e) {
    if (e.tween && e.tween._time === e.tween._dur) {
      var r, i, n, a = e.t, s = a.style, o = e.u, u = a._gsap
      if ('all' === o || !0 === o) s.cssText = '', i = 1 else for (n = (o = o.split(',')).length; -1 < --n;) r = o[n], Fe[r] && (i = 1, r = 'transformOrigin' === r ? Ye : Qe), yd(a, r)
      i && (yd(a, Qe), u && (u.svg && a.removeAttribute('transform'), Ze(a, 1), u.uncache = 1))
    }
  }

  function Kd (t) {
    return 'matrix(1, 0, 0, 1, 0, 0)' === t || 'none' === t || !t
  }

  function Ld (t) {
    var e = qd(t, Qe)
    return Kd(e) ? Ge : e.substr(7).match(et).map(ca)
  }

  function Md (t, e) {
    var r, i, n, a, s = t._gsap || _(t), o = t.style, u = Ld(t)
    return s.svg && t.getAttribute('transform') ? '1,0,0,1,0,0' === (u = [(n = t.transform.baseVal.consolidate().matrix).a, n.b, n.c, n.d, n.e, n.f]).join(',') ? Ge : u : (u !== Ge || t.offsetParent || t === le || s.svg || (n = o.display, o.display = 'block', (r = t.parentNode) && t.offsetParent || (a = 1, i = t.nextSibling, le.appendChild(t)), u = Ld(t), n ? o.display = n : yd(t, 'display'), a && (i ? r.insertBefore(t, i) : r ? r.appendChild(t) : le.removeChild(t))), e && 6 < u.length ? [u[0], u[1], u[4], u[5], u[12], u[13]] : u)
  }

  function Nd (t, e, r, i, n, a) {
    var s, o, u, h = t._gsap, l = n || Md(t, !0), f = h.xOrigin || 0, d = h.yOrigin || 0, p = h.xOffset || 0,
      c = h.yOffset || 0, _ = l[0], m = l[1], g = l[2], v = l[3], y = l[4], b = l[5], T = e.split(' '),
      w = parseFloat(T[0]) || 0, x = parseFloat(T[1]) || 0
    r ? l !== Ge && (o = _ * v - m * g) && (u = w * (-m / o) + x * (_ / o) - (_ * b - m * y) / o, w = w * (v / o) + x * (-g / o) + (g * b - v * y) / o, x = u) : (w = (s = wd(t)).x + (~T[0].indexOf('%') ? w / 100 * s.width : w), x = s.y + (~(T[1] || T[0]).indexOf('%') ? x / 100 * s.height : x)), i || !1 !== i && h.smooth ? (y = w - f, b = x - d, h.xOffset = p + (y * _ + b * g) - y, h.yOffset = c + (y * m + b * v) - b) : h.xOffset = h.yOffset = 0, h.xOrigin = w, h.yOrigin = x, h.smooth = !!i, h.origin = e, h.originIsAbsolute = !!r, t.style[Ye] = '0px 0px', a && (zd(a, h, 'xOrigin', f, w), zd(a, h, 'yOrigin', d, x), zd(a, h, 'xOffset', p, h.xOffset), zd(a, h, 'yOffset', c, h.yOffset)), t.setAttribute('data-svg-origin', w + ' ' + x)
  }

  function Qd (t, e, r) {
    var i = Qa(e)
    return ca(parseFloat(e) + parseFloat(Bd(t, 'x', r + 'px', i))) + i
  }

  function Xd (t, e, r, i, n, a) {
    var s, u, h = 360, l = o(n), f = parseFloat(n) * (l && ~n.indexOf('rad') ? Ee : 1), d = a ? f * a : f - i,
      p = i + d + 'deg'
    return l && ('short' === (s = n.split('_')[1]) && (d %= h) !== d % 180 && (d += d < 0 ? h : -h), 'cw' === s && d < 0 ? d = (d + 36e9) % h - ~~(d / h) * h : 'ccw' === s && 0 < d && (d = (d - 36e9) % h - ~~(d / h) * h)), t._pt = u = new ae(t._pt, e, r, i, d, bd), u.e = p, u.u = 'deg', t._props.push(r), u
  }

  function Yd (t, e) {
    for (var r in e) t[r] = e[r]
    return t
  }

  function Zd (t, e, r) {
    var i, n, a, s, o, u, h, l = Yd({}, r._gsap), f = r.style
    for (n in l.svg ? (a = r.getAttribute('transform'), r.setAttribute('transform', ''), f[Qe] = e, i = Ze(r, 1), yd(r, Qe), r.setAttribute('transform', a)) : (a = getComputedStyle(r)[Qe], f[Qe] = e, i = Ze(r, 1), f[Qe] = a), Fe) (a = l[n]) !== (s = i[n]) && 'perspective,force3D,transformOrigin,svgOrigin'.indexOf(n) < 0 && (o = Qa(a) !== (h = Qa(s)) ? Bd(r, n, a, h) : parseFloat(a), u = parseFloat(s), t._pt = new ae(t._pt, i, n, o, u - o, ad), t._pt.u = h || 0, t._props.push(n))
    Yd(i, l)
  }

  var ue, he, le, fe, de, pe, ce, _e = zt.Power0, me = zt.Power1, ge = zt.Power2, ve = zt.Power3, ye = zt.Power4,
    be = zt.Linear, Te = zt.Quad, we = zt.Cubic, xe = zt.Quart, Oe = zt.Quint, Me = zt.Strong, ke = zt.Elastic,
    Ce = zt.Back, Pe = zt.SteppedEase, Ae = zt.Bounce, Se = zt.Sine, De = zt.Expo, ze = zt.Circ, Fe = {},
    Ee = 180 / Math.PI, Be = Math.PI / 180, Re = Math.atan2, Ie = /([A-Z])/g,
    Le = /(?:left|right|width|margin|padding|x)/i, qe = /[\s,\(]\S/,
    Ne = {autoAlpha: 'opacity,visibility', scale: 'scaleX,scaleY', alpha: 'opacity'}, Qe = 'transform',
    Ye = Qe + 'Origin', je = 'O,Moz,ms,Ms,Webkit'.split(','), Xe = function _checkPropPrefix (t, e, r) {
      var i = (e || de).style, n = 5
      if (t in i && !r) return t
      for (t = t.charAt(0).toUpperCase() + t.substr(1); n-- && !(je[n] + t in i);)
      return n < 0 ? null : (3 === n ? 'ms' : 0 <= n ? je[n] : '') + t
    }, Ue = {deg: 1, rad: 1, turn: 1}, Ve = {top: '0%', bottom: '100%', left: '0%', right: '100%', center: '50%'}, Je = {
      clearProps: function clearProps (t, e, r, i, n) {
        if ('isFromStart' !== n.data) {
          var a = t._pt = new ae(t._pt, e, r, 0, 0, Gd)
          return a.u = i, a.pr = -10, a.tween = n, t._props.push(r), 1
        }
      }
    }, Ge = [1, 0, 0, 1, 0, 0], $e = {}, Ze = function _parseTransform (t, e) {
      var r = t._gsap || new Lt(t)
      if ('x' in r && !e && !r.uncache) return r
      var i, n, a, s, o, u, h, l, f, d, p, c, _, m, g, v, y, b, T, w, x, O, M, k, C, P, A, S, D, z, F, E, B = t.style,
        R = r.scaleX < 0, I = 'deg', L = qd(t, Ye) || '0'
      return i = n = a = u = h = l = f = d = p = 0, s = o = 1, r.svg = !(!t.getCTM || !xd(t)), m = Md(t, r.svg), r.svg && (k = (!r.uncache || '0px 0px' === L) && !e && t.getAttribute('data-svg-origin'), Nd(t, k || L, !!k || r.originIsAbsolute, !1 !== r.smooth, m)), c = r.xOrigin || 0, _ = r.yOrigin || 0, m !== Ge && (b = m[0], T = m[1], w = m[2], x = m[3], i = O = m[4], n = M = m[5], 6 === m.length ? (s = Math.sqrt(b * b + T * T), o = Math.sqrt(x * x + w * w), u = b || T ? Re(T, b) * Ee : 0, (f = w || x ? Re(w, x) * Ee + u : 0) && (o *= Math.abs(Math.cos(f * Be))), r.svg && (i -= c - (c * b + _ * w), n -= _ - (c * T + _ * x))) : (E = m[6], z = m[7], A = m[8], S = m[9], D = m[10], F = m[11], i = m[12], n = m[13], a = m[14], h = (g = Re(E, D)) * Ee, g && (k = O * (v = Math.cos(-g)) + A * (y = Math.sin(-g)), C = M * v + S * y, P = E * v + D * y, A = O * -y + A * v, S = M * -y + S * v, D = E * -y + D * v, F = z * -y + F * v, O = k, M = C, E = P), l = (g = Re(-w, D)) * Ee, g && (v = Math.cos(-g), F = x * (y = Math.sin(-g)) + F * v, b = k = b * v - A * y, T = C = T * v - S * y, w = P = w * v - D * y), u = (g = Re(T, b)) * Ee, g && (k = b * (v = Math.cos(g)) + T * (y = Math.sin(g)), C = O * v + M * y, T = T * v - b * y, M = M * v - O * y, b = k, O = C), h && 359.9 < Math.abs(h) + Math.abs(u) && (h = u = 0, l = 180 - l), s = ca(Math.sqrt(b * b + T * T + w * w)), o = ca(Math.sqrt(M * M + E * E)), g = Re(O, M), f = 2e-4 < Math.abs(g) ? g * Ee : 0, p = F ? 1 / (F < 0 ? -F : F) : 0), r.svg && (k = t.getAttribute('transform'), r.forceCSS = t.setAttribute('transform', '') || !Kd(qd(t, Qe)), k && t.setAttribute('transform', k))), 90 < Math.abs(f) && Math.abs(f) < 270 && (R ? (s *= -1, f += u <= 0 ? 180 : -180, u += u <= 0 ? 180 : -180) : (o *= -1, f += f <= 0 ? 180 : -180)), r.x = i - ((r.xPercent = i && (r.xPercent || (Math.round(t.offsetWidth / 2) === Math.round(-i) ? -50 : 0))) ? t.offsetWidth * r.xPercent / 100 : 0) + 'px', r.y = n - ((r.yPercent = n && (r.yPercent || (Math.round(t.offsetHeight / 2) === Math.round(-n) ? -50 : 0))) ? t.offsetHeight * r.yPercent / 100 : 0) + 'px', r.z = a + 'px', r.scaleX = ca(s), r.scaleY = ca(o), r.rotation = ca(u) + I, r.rotationX = ca(h) + I, r.rotationY = ca(l) + I, r.skewX = f + I, r.skewY = d + I, r.transformPerspective = p + 'px', (r.zOrigin = parseFloat(L.split(' ')[2]) || 0) && (B[Ye] = Ke(L)), r.xOffset = r.yOffset = 0, r.force3D = Y.force3D, r.renderTransform = r.svg ? ir : ce ? rr : He, r.uncache = 0, r
    }, Ke = function _firstTwoOnly (t) {
      return (t = t.split(' '))[0] + ' ' + t[1]
    }, He = function _renderNon3DTransforms (t, e) {
      e.z = '0px', e.rotationY = e.rotationX = '0deg', e.force3D = 0, rr(t, e)
    }, We = '0deg', tr = '0px', er = ') ', rr = function _renderCSSTransforms (t, e) {
      var r = e || this, i = r.xPercent, n = r.yPercent, a = r.x, s = r.y, o = r.z, u = r.rotation, h = r.rotationY,
        l = r.rotationX, f = r.skewX, d = r.skewY, p = r.scaleX, c = r.scaleY, _ = r.transformPerspective, m = r.force3D,
        g = r.target, v = r.zOrigin, y = '', b = 'auto' === m && t && 1 !== t || !0 === m
      if (v && (l !== We || h !== We)) {
        var T, w = parseFloat(h) * Be, x = Math.sin(w), O = Math.cos(w)
        w = parseFloat(l) * Be, T = Math.cos(w), a = Qd(g, a, x * T * -v), s = Qd(g, s, -Math.sin(w) * -v), o = Qd(g, o, O * T * -v + v)
      }
      _ !== tr && (y += 'perspective(' + _ + er), (i || n) && (y += 'translate(' + i + '%, ' + n + '%) '), !b && a === tr && s === tr && o === tr || (y += o !== tr || b ? 'translate3d(' + a + ', ' + s + ', ' + o + ') ' : 'translate(' + a + ', ' + s + er), u !== We && (y += 'rotate(' + u + er), h !== We && (y += 'rotateY(' + h + er), l !== We && (y += 'rotateX(' + l + er), f === We && d === We || (y += 'skew(' + f + ', ' + d + er), 1 === p && 1 === c || (y += 'scale(' + p + ', ' + c + er), g.style[Qe] = y || 'translate(0, 0)'
    }, ir = function _renderSVGTransforms (t, e) {
      var r, i, n, a, s, o = e || this, u = o.xPercent, h = o.yPercent, l = o.x, f = o.y, d = o.rotation, p = o.skewX,
        c = o.skewY, _ = o.scaleX, m = o.scaleY, g = o.target, v = o.xOrigin, y = o.yOrigin, b = o.xOffset, T = o.yOffset,
        w = o.forceCSS, x = parseFloat(l), O = parseFloat(f)
      d = parseFloat(d), p = parseFloat(p), (c = parseFloat(c)) && (p += c = parseFloat(c), d += c), d || p ? (d *= Be, p *= Be, r = Math.cos(d) * _, i = Math.sin(d) * _, n = Math.sin(d - p) * -m, a = Math.cos(d - p) * m, p && (c *= Be, s = Math.tan(p - c), n *= s = Math.sqrt(1 + s * s), a *= s, c && (s = Math.tan(c), r *= s = Math.sqrt(1 + s * s), i *= s)), r = ca(r), i = ca(i), n = ca(n), a = ca(a)) : (r = _, a = m, i = n = 0), (x && !~(l + '').indexOf('px') || O && !~(f + '').indexOf('px')) && (x = Bd(g, 'x', l, 'px'), O = Bd(g, 'y', f, 'px')), (v || y || b || T) && (x = ca(x + v - (v * r + y * n) + b), O = ca(O + y - (v * i + y * a) + T)), (u || h) && (s = g.getBBox(), x = ca(x + u / 100 * s.width), O = ca(O + h / 100 * s.height)), s = 'matrix(' + r + ',' + i + ',' + n + ',' + a + ',' + x + ',' + O + ')', g.setAttribute('transform', s), w && (g.style[Qe] = s)
    }
  ba('padding,margin,Width,Radius', function (e, r) {
    var t = 'Right', i = 'Bottom', n = 'Left',
      o = (r < 3 ? ['Top', t, i, n] : ['Top' + n, 'Top' + t, i + t, i + n]).map(function (t) {
        return r < 2 ? e + t : 'border' + t + e
      })
    Je[1 < r ? 'border' + e : e] = function (e, t, r, i, n) {
      var a, s
      if (arguments.length < 4) {
        return a = o.map(function (t) {
          return Cd(e, t, r)
        }), 5 === (s = a.join(' ')).split(a[0]).length ? a[0] : s
      }
      a = (i + '').split(' '), s = {}, o.forEach(function (t, e) {
        return s[t] = a[e] = a[e] || a[(e - 1) / 2 | 0]
      }), e.init(t, s, n)
    }
  })
  var nr, ar, sr, or = {
    name: 'css', register: td, targetTest: function targetTest (t) {
      return t.style && t.nodeType
    }, init: function init (t, e, r, i, n) {
      var a, s, u, h, l, f, d, p, c, _, m, g, v, y, b, T = this._props, w = t.style, x = r.vars.startAt
      for (d in fe || td(), e) {
        if ('autoRound' !== d && (s = e[d], !ft[d] || !Tb(d, e, r, i, t, n))) {
          if (l = typeof s, f = Je[d], 'function' === l && (l = typeof (s = s.call(r, i, t, n))), 'string' === l && ~s.indexOf('random(') && (s = gb(s)), f) {
            f(this, t, d, s, r) && (b = 1)
          } else if ('--' === d.substr(0, 2)) {
            a = (getComputedStyle(t).getPropertyValue(d) + '').trim(), s += '', Pt.lastIndex = 0, Pt.test(a) || (p = Qa(a), c = Qa(s)), c ? p !== c && (a = Bd(t, d, a, c) + c) : p && (s += p), this.add(w, 'setProperty', a, s, i, n, 0, 0, d), T.push(d)
          } else if ('undefined' !== l) {
            if (x && d in x ? (a = 'function' == typeof x[d] ? x[d].call(r, i, t, n) : x[d], o(a) && ~a.indexOf('random(') && (a = gb(a)), Qa(a + '') || (a += Y.units[d] || Qa(Cd(t, d)) || ''), '=' === (a + '').charAt(1) && (a = Cd(t, d))) : a = Cd(t, d), h = parseFloat(a), (_ = 'string' === l && '=' === s.charAt(1) ? +(s.charAt(0) + '1') : 0) && (s = s.substr(2)), u = parseFloat(s), d in Ne && ('autoAlpha' === d && (1 === h && 'hidden' === Cd(t, 'visibility') && u && (h = 0), zd(this, w, 'visibility', h ? 'inherit' : 'hidden', u ? 'inherit' : 'hidden', !u)), 'scale' !== d && 'transform' !== d && ~(d = Ne[d]).indexOf(',') && (d = d.split(',')[0])), m = d in Fe) {
              if (g || ((v = t._gsap).renderTransform && !e.parseTransform || Ze(t, e.parseTransform), y = !1 !== e.smoothOrigin && v.smooth, (g = this._pt = new ae(this._pt, w, Qe, 0, 1, v.renderTransform, v, 0, -1)).dep = 1), 'scale' === d) {
                this._pt = new ae(this._pt, v, 'scaleY', v.scaleY, (_ ? _ * u : u - v.scaleY) || 0), T.push('scaleY', d), d += 'X'
              } else {
                if ('transformOrigin' === d) {
                  s = Fd(s), v.svg ? Nd(t, s, 0, y, 0, this) : ((c = parseFloat(s.split(' ')[2]) || 0) !== v.zOrigin && zd(this, v, 'zOrigin', v.zOrigin, c), zd(this, w, d, Ke(a), Ke(s)))
                  continue
                }
                if ('svgOrigin' === d) {
                  Nd(t, s, 1, y, 0, this)
                  continue
                }
                if (d in $e) {
                  Xd(this, v, d, h, s, _)
                  continue
                }
                if ('smoothOrigin' === d) {
                  zd(this, v, 'smooth', v.smooth, s)
                  continue
                }
                if ('force3D' === d) {
                  v[d] = s
                  continue
                }
                if ('transform' === d) {
                  Zd(this, s, t)
                  continue
                }
              }
            } else {
              d in w || (d = Xe(d) || d)
            }
            if (m || (u || 0 === u) && (h || 0 === h) && !qe.test(s) && d in w) {
              u = u || 0, (p = (a + '').substr((h + '').length)) !== (c = Qa(s) || (d in Y.units ? Y.units[d] : p)) && (h = Bd(t, d, a, c)), this._pt = new ae(this._pt, m ? v : w, d, h, _ ? _ * u : u - h, m || 'px' !== c && 'zIndex' !== d || !1 === e.autoRound ? ad : dd), this._pt.u = c || 0, p !== c && '%' !== c && (this._pt.b = a, this._pt.r = cd)
            } else if (d in w) {
              Dd.call(this, t, d, a, s)
            } else {
              if (!(d in t)) {
                N(d, s)
                continue
              }
              this.add(t, d, a || t[d], s, i, n)
            }
            T.push(d)
          }
        }
      }
      b && ne(this)
    }, get: Cd, aliases: Ne, getSetter: function getSetter (t, e, i) {
      var n = Ne[e]
      return n && n.indexOf(',') < 0 && (e = n), e in Fe && e !== Ye && (t._gsap.x || Cd(t, 'x')) ? i && pe === i ? 'scale' === e ? jd : id : (pe = i || {}) && ('scale' === e ? kd : ld) : t.style && !r(t.style[e]) ? gd : ~e.indexOf('-') ? hd : Kt(t, e)
    }, core: {_removeProperty: yd, _getMatrix: Md}
  }
  oe.utils.checkPrefix = Xe, sr = ba((nr = 'x,y,z,scale,scaleX,scaleY,xPercent,yPercent') + ',' + (ar = 'rotation,rotationX,rotationY,skewX,skewY') + ',transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective', function (t) {
    Fe[t] = 1
  }), ba(ar, function (t) {
    Y.units[t] = 'deg', $e[t] = 1
  }), Ne[sr[13]] = nr + ',' + ar, ba('0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY', function (t) {
    var e = t.split(':')
    Ne[e[1]] = sr[e[0]]
  }), ba('x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective', function (t) {
    Y.units[t] = 'px'
  }), oe.registerPlugin(or)
  var ur = oe.registerPlugin(or) || oe, hr = ur.core.Tween
  e.Back = Ce, e.Bounce = Ae, e.CSSPlugin = or, e.Circ = ze, e.Cubic = we, e.Elastic = ke, e.Expo = De, e.Linear = be, e.Power0 = _e, e.Power1 = me, e.Power2 = ge, e.Power3 = ve, e.Power4 = ye, e.Quad = Te, e.Quart = xe, e.Quint = Oe, e.Sine = Se, e.SteppedEase = Pe, e.Strong = Me, e.TimelineLite = Nt, e.TimelineMax = Nt, e.TweenLite = Jt, e.TweenMax = hr, e.default = ur, e.gsap = ur
  if (typeof (window) === 'undefined' || window !== e) {
    Object.defineProperty(e, '__esModule', {value: !0})
  } else {
    delete e.default
  }
})

/*!
 * CustomEase 3.9.1
 * https://greensock.com
 *
 * @license Copyright 2021, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
 */

!function (e, t) {
  'object' == typeof exports && 'undefined' != typeof module ? t(exports) : 'function' == typeof define && define.amd ? define(['exports'], t) : t((e = e || self).window = e.window || {})
}(this, function (e) {
  'use strict'

  function m (e) {
    return Math.round(1e5 * e) / 1e5 || 0
  }

  var b = /[achlmqstvz]|(-?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi, w = /[\+\-]?\d*\.?\d+e[\+\-]?\d+/gi, Y = Math.PI / 180,
    k = Math.sin, B = Math.cos, F = Math.abs, J = Math.sqrt

  function arcToSegment (e, t, n, s, a, r, i, o, h) {
    if (e !== o || t !== h) {
      n = F(n), s = F(s)
      var u = a % 360 * Y, f = B(u), c = k(u), l = Math.PI, g = 2 * l, x = (e - o) / 2, d = (t - h) / 2,
        m = f * x + c * d, p = -c * x + f * d, y = m * m, M = p * p, v = y / (n * n) + M / (s * s)
      1 < v && (n = J(v) * n, s = J(v) * s)
      var C = n * n, E = s * s, b = (C * E - C * M - E * y) / (C * M + E * y)
      b < 0 && (b = 0)
      var w = (r === i ? -1 : 1) * J(b), P = n * p / s * w, S = -s * m / n * w, N = f * P - c * S + (e + o) / 2,
        D = c * P + f * S + (t + h) / 2, T = (m - P) / n, V = (p - S) / s, _ = (-m - P) / n, q = (-p - S) / s,
        A = T * T + V * V, R = (V < 0 ? -1 : 1) * Math.acos(T / J(A)),
        G = (T * q - V * _ < 0 ? -1 : 1) * Math.acos((T * _ + V * q) / J(A * (_ * _ + q * q)))
      isNaN(G) && (G = l), !i && 0 < G ? G -= g : i && G < 0 && (G += g), R %= g, G %= g
      var L, O = Math.ceil(F(G) / (g / 4)), j = [], z = G / O, I = 4 / 3 * k(z / 2) / (1 + B(z / 2)), H = f * n,
        Q = c * n, Z = c * -s, U = f * s
      for (L = 0; L < O; L++) m = B(a = R + L * z), p = k(a), T = B(a += z), V = k(a), j.push(m - I * p, p + I * m, T + I * V, V - I * T, T, V)
      for (L = 0; L < j.length; L += 2) m = j[L], p = j[L + 1], j[L] = m * H + p * Z + N, j[L + 1] = m * Q + p * U + D
      return j[L - 2] = o, j[L - 1] = h, j
    }
  }

  function stringToRawPath (e) {
    function db (e, t, n, s) {
      f = (n - e) / 3, c = (s - t) / 3, o.push(e + f, t + c, n - f, s - c, n, s)
    }

    var t, n, s, a, r, i, o, h, u, f, c, l, g, x, d, m = (e + '').replace(w, function (e) {
      var t = +e
      return t < 1e-4 && -1e-4 < t ? 0 : t
    }).match(b) || [], p = [], y = 0, M = 0, v = m.length, C = 0, E = 'ERROR: malformed path: ' + e
    if (!e || !isNaN(m[0]) || isNaN(m[1])) return console.log(E), p
    for (t = 0; t < v; t++) {
      if (g = r, isNaN(m[t]) ? i = (r = m[t].toUpperCase()) !== m[t] : t--, s = +m[t + 1], a = +m[t + 2], i && (s += y, a += M), t || (h = s, u = a), 'M' === r) {
        o && (o.length < 8 ? --p.length : C += o.length), y = h = s, M = u = a, o = [s, a], p.push(o), t += 2, r = 'L'
      } else if ('C' === r) {
        i || (y = M = 0), (o = o || [0, 0]).push(s, a, y + 1 * m[t + 3], M + 1 * m[t + 4], y += 1 * m[t + 5], M += 1 * m[t + 6]), t += 6
      } else if ('S' === r) {
        f = y, c = M, 'C' !== g && 'S' !== g || (f += y - o[o.length - 4], c += M - o[o.length - 3]), i || (y = M = 0), o.push(f, c, s, a, y += 1 * m[t + 3], M += 1 * m[t + 4]), t += 4
      } else if ('Q' === r) {
        f = y + 2 / 3 * (s - y), c = M + 2 / 3 * (a - M), i || (y = M = 0), y += 1 * m[t + 3], M += 1 * m[t + 4], o.push(f, c, y + 2 / 3 * (s - y), M + 2 / 3 * (a - M), y, M), t += 4
      } else if ('T' === r) {
        f = y - o[o.length - 4], c = M - o[o.length - 3], o.push(y + f, M + c, s + 2 / 3 * (y + 1.5 * f - s), a + 2 / 3 * (M + 1.5 * c - a), y = s, M = a), t += 2
      } else if ('H' === r) {
        db(y, M, y = s, M), t += 1
      } else if ('V' === r) {
        db(y, M, y, M = s + (i ? M - y : 0)), t += 1
      } else if ('L' === r || 'Z' === r) {
        'Z' === r && (s = h, a = u, o.closed = !0), ('L' === r || .5 < F(y - s) || .5 < F(M - a)) && (db(y, M, s, a), 'L' === r && (t += 2)), y = s, M = a
      } else if ('A' === r) {
        if (x = m[t + 4], d = m[t + 5], f = m[t + 6], c = m[t + 7], n = 7, 1 < x.length && (x.length < 3 ? (c = f, f = d, n--) : (c = d, f = x.substr(2), n -= 2), d = x.charAt(1), x = x.charAt(0)), l = arcToSegment(y, M, +m[t + 1], +m[t + 2], +m[t + 3], +x, +d, (i ? y : 0) + 1 * f, (i ? M : 0) + 1 * c), t += n, l) for (n = 0; n < l.length; n++) o.push(l[n])
        y = o[o.length - 2], M = o[o.length - 1]
      } else {
        console.log(E)
      }
    }
    return (t = o.length) < 6 ? (p.pop(), t = 0) : o[0] === o[t - 2] && o[1] === o[t - 1] && (o.closed = !0), p.totalPoints = C + t, p
  }

  function p () {
    return M || 'undefined' != typeof window && (M = window.gsap) && M.registerPlugin && M
  }

  function q () {
    (M = p()) ? (M.registerEase('_CE', n.create), a = 1) : console.warn('Please gsap.registerPlugin(CustomEase)')
  }

  function s (e) {
    return ~~(1e3 * e + (e < 0 ? -.5 : .5)) / 1e3
  }

  function x (e, t, n, s, a, r, i, o, h, u, f) {
    var c, l = (e + n) / 2, g = (t + s) / 2, d = (n + a) / 2, m = (s + r) / 2, p = (a + i) / 2, y = (r + o) / 2,
      M = (l + d) / 2, v = (g + m) / 2, C = (d + p) / 2, E = (m + y) / 2, b = (M + C) / 2, w = (v + E) / 2, P = i - e,
      S = o - t, N = Math.abs((n - i) * S - (s - o) * P), D = Math.abs((a - i) * S - (r - o) * P)
    return u || (u = [{x: e, y: t}, {x: i, y: o}], f = 1), u.splice(f || u.length - 1, 0, {
      x: b,
      y: w
    }), h * (P * P + S * S) < (N + D) * (N + D) && (c = u.length, x(e, t, l, g, M, v, b, w, h, u, f), x(b, w, C, E, p, y, i, o, h, u, f + 1 + (u.length - c))), u
  }

  var M, a, t, y = /[-+=\.]*\d+[\.e\-\+]*\d*[e\-\+]*\d*/gi, v = /[cLlsSaAhHvVtTqQ]/g,
    n = ((t = CustomEase.prototype).setData = function setData (e, t) {
      t = t || {}
      var n, s, a, r, i, o, h, u, f, c = (e = e || '0,0,1,1').match(y), l = 1, g = [], d = [], m = t.precision || 1,
        p = m <= 1
      if (this.data = e, (v.test(e) || ~e.indexOf('M') && e.indexOf('C') < 0) && (c = stringToRawPath(e)[0]), 4 === (n = c.length)) c.unshift(0, 0), c.push(1, 1), n = 8 else if ((n - 2) % 6) throw 'Invalid CustomEase'
      for (0 == +c[0] && 1 == +c[n - 2] || function _normalize (e, t, n) {
        n || 0 === n || (n = Math.max(+e[e.length - 1], +e[1]))
        var s, a = -1 * e[0], r = -n, i = e.length, o = 1 / (+e[i - 2] + a),
          h = -t || (Math.abs(e[i - 1] - e[1]) < .01 * (e[i - 2] - e[0]) ? function _findMinimum (e) {
            var t, n = e.length, s = 1e20
            for (t = 1; t < n; t += 6) +e[t] < s && (s = +e[t])
            return s
          }(e) + r : +e[i - 1] + r)
        for (h = h ? 1 / h : -o, s = 0; s < i; s += 2) e[s] = (+e[s] + a) * o, e[s + 1] = (+e[s + 1] + r) * h
      }(c, t.height, t.originY), this.segment = c, r = 2; r < n; r += 6) {
        s = {
          x: +c[r - 2],
          y: +c[r - 1]
        }, a = {
          x: +c[r + 4],
          y: +c[r + 5]
        }, g.push(s, a), x(s.x, s.y, +c[r], +c[r + 1], +c[r + 2], +c[r + 3], a.x, a.y, 1 / (2e5 * m), g, g.length - 1)
      }
      for (n = g.length, r = 0; r < n; r++) h = g[r], u = g[r - 1] || h, (h.x > u.x || u.y !== h.y && u.x === h.x || h === u) && h.x <= 1 ? (u.cx = h.x - u.x, u.cy = h.y - u.y, u.n = h, u.nx = h.x, p && 1 < r && 2 < Math.abs(u.cy / u.cx - g[r - 2].cy / g[r - 2].cx) && (p = 0), u.cx < l && (u.cx ? l = u.cx : (u.cx = .001, r === n - 1 && (u.x -= .001, l = Math.min(l, .001), p = 0)))) : (g.splice(r--, 1), n--)
      if (i = 1 / (n = 1 / l + 1 | 0), h = g[o = 0], p) {
        for (r = 0; r < n; r++) {
          f = r * i, h.nx < f && (h = g[++o]), s = h.y + (f - h.x) / h.cx * h.cy, d[r] = {
            x: f,
            cx: i,
            y: s,
            cy: 0,
            nx: 9
          }, r && (d[r - 1].cy = s - d[r - 1].y)
        }
        d[n - 1].cy = g[g.length - 1].y - s
      } else {
        for (r = 0; r < n; r++) h.nx < r * i && (h = g[++o]), d[r] = h
        o < g.length - 1 && (d[r - 1] = g[g.length - 2])
      }
      return this.ease = function (e) {
        var t = d[e * n | 0] || d[n - 1]
        return t.nx < e && (t = t.n), t.y + (e - t.x) / t.cx * t.cy
      }, (this.ease.custom = this).id && M && M.registerEase(this.id, this.ease), this
    }, t.getSVGData = function getSVGData (e) {
      return CustomEase.getSVGData(this, e)
    }, CustomEase.create = function create (e, t, n) {
      return new CustomEase(e, t, n).ease
    }, CustomEase.register = function register (e) {
      M = e, q()
    }, CustomEase.get = function get (e) {
      return M.parseEase(e)
    }, CustomEase.getSVGData = function getSVGData (e, t) {
      var n, a, r, i, o, h, u, f, c, l, g = (t = t || {}).width || 100, x = t.height || 100, d = t.x || 0,
        p = (t.y || 0) + x, y = M.utils.toArray(t.path)[0]
      if (t.invert && (x = -x, p = 0), 'string' == typeof e && (e = M.parseEase(e)), e.custom && (e = e.custom), e instanceof CustomEase) {
        n = function rawPathToString (e) {
          !function _isNumber (e) {
            return 'number' == typeof e
          }(e[0]) || (e = [e])
          var t, n, s, a, r = '', i = e.length
          for (n = 0; n < i; n++) {
            for (a = e[n], r += 'M' + m(a[0]) + ',' + m(a[1]) + ' C', t = a.length, s = 2; s < t; s++) r += m(a[s++]) + ',' + m(a[s++]) + ' ' + m(a[s++]) + ',' + m(a[s++]) + ' ' + m(a[s++]) + ',' + m(a[s]) + ' '
            a.closed && (r += 'z')
          }
          return r
        }(function transformRawPath (e, t, n, s, a, r, i) {
          for (var o, h, u, f, c, l = e.length; -1 < --l;) for (h = (o = e[l]).length, u = 0; u < h; u += 2) f = o[u], c = o[u + 1], o[u] = f * t + c * s + r, o[u + 1] = f * n + c * a + i
          return e._dirty = 1, e
        }([e.segment], g, 0, 0, -x, d, p))
      } else {
        for (n = [d, p], i = 1 / (u = Math.max(5, 200 * (t.precision || 1))), f = 5 / (u += 2), c = s(d + i * g), a = ((l = s(p + e(i) * -x)) - p) / (c - d), r = 2; r < u; r++) o = s(d + r * i * g), h = s(p + e(r * i) * -x), (Math.abs((h - l) / (o - c) - a) > f || r === u - 1) && (n.push(c, l), a = (h - l) / (o - c)), c = o, l = h
        n = 'M' + n.join(',')
      }
      return y && y.setAttribute('d', n), n
    }, CustomEase)

  function CustomEase (e, t, n) {
    a || q(), this.id = e, this.setData(t, n)
  }

  p() && M.registerPlugin(n), n.version = '3.9.1', e.CustomEase = n, e.default = n
  if (typeof (window) === 'undefined' || window !== e) {
    Object.defineProperty(e, '__esModule', {value: !0})
  } else {
    delete e.default
  }
})

/*!
 * MotionPathPlugin 3.9.1
 * https://greensock.com
 *
 * @license Copyright 2021, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
 */

!function (t, e) {
  'object' == typeof exports && 'undefined' != typeof module ? e(exports) : 'function' == typeof define && define.amd ? define(['exports'], e) : e((t = t || self).window = t.window || {})
}(this, function (t) {
  'use strict'

  function p (t) {
    return 'string' == typeof t
  }

  function x (t) {
    return Math.round(1e10 * t) / 1e10 || 0
  }

  function y (t, e, n, r) {
    var a = t[e], o = 1 === r ? 6 : subdivideSegment(a, n, r)
    if (o && o + n + 2 < a.length) return t.splice(e, 0, a.slice(0, n + o + 2)), a.splice(0, n + o), 1
  }

  function C (t, e) {
    var n = t.length, r = t[n - 1] || [], a = r.length
    n && e[0] === r[a - 2] && e[1] === r[a - 1] && (e = r.concat(e.slice(2)), n--), t[n] = e
  }

  var M = /[achlmqstvz]|(-?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi, T = /(?:(-)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,
    L = /[\+\-]?\d*\.?\d+e[\+\-]?\d+/gi, r = /(^[#\.][a-z]|[a-y][a-z])/i, q = Math.PI / 180, s = 180 / Math.PI,
    F = Math.sin, U = Math.cos, H = Math.abs, $ = Math.sqrt, S = Math.atan2, A = 1e8, l = function _isNumber (t) {
      return 'number' == typeof t
    }, N = {}, _ = {}, e = 1e5, d = function _wrapProgress (t) {
      return Math.round((t + A) % 1 * e) / e || (t < 0 ? 0 : 1)
    }, B = function _round (t) {
      return Math.round(t * e) / e || 0
    }, m = function _getSampleIndex (t, e, n) {
      var r = t.length, a = ~~(n * r)
      if (t[a] > e) for (; --a && t[a] > e;)  else for (; t[++a] < e && a < r;)
      return a < r ? a : r - 1
    }, O = function _copyMetaData (t, e) {
      return e.totalLength = t.totalLength, t.samples ? (e.samples = t.samples.slice(0), e.lookup = t.lookup.slice(0), e.minLength = t.minLength, e.resolution = t.resolution) : t.totalPoints && (e.totalPoints = t.totalPoints), e
    }

  function getRawPath (t) {
    var e, n = (t = p(t) && r.test(t) && document.querySelector(t) || t).getAttribute ? t : 0
    return n && (t = t.getAttribute('d')) ? (n._gsPath || (n._gsPath = {}), (e = n._gsPath[t]) && !e._dirty ? e : n._gsPath[t] = stringToRawPath(t)) : t ? p(t) ? stringToRawPath(t) : l(t[0]) ? [t] : t : console.warn('Expecting a <path> element or an SVG path data string')
  }

  function reverseSegment (t) {
    var e, n = 0
    for (t.reverse(); n < t.length; n += 2) e = t[n], t[n] = t[n + 1], t[n + 1] = e
    t.reversed = !t.reversed
  }

  var I = {rect: 'rx,ry,x,y,width,height', circle: 'r,cx,cy', ellipse: 'rx,ry,cx,cy', line: 'x1,x2,y1,y2'}

  function convertToPath (t, e) {
    var n, r, a, o, i, s, l, h, u, g, f, c, p, d, m, v, x, y, P, w, b, M, R = t.tagName.toLowerCase(),
      L = .552284749831
    return 'path' !== R && t.getBBox ? (s = function _createPath (t, e) {
      var n, r = document.createElementNS('http://www.w3.org/2000/svg', 'path'), a = [].slice.call(t.attributes),
        o = a.length
      for (e = ',' + e + ','; -1 < --o;) n = a[o].nodeName.toLowerCase(), e.indexOf(',' + n + ',') < 0 && r.setAttributeNS(null, n, a[o].nodeValue)
      return r
    }(t, 'x,y,width,height,cx,cy,rx,ry,r,x1,x2,y1,y2,points'), M = function _attrToObj (t, e) {
      for (var n = e ? e.split(',') : [], r = {}, a = n.length; -1 < --a;) r[n[a]] = +t.getAttribute(n[a]) || 0
      return r
    }(t, I[R]), 'rect' === R ? (o = M.rx, i = M.ry || o, r = M.x, a = M.y, g = M.width - 2 * o, f = M.height - 2 * i, n = o || i ? 'M' + (v = (d = (p = r + o) + g) + o) + ',' + (y = a + i) + ' V' + (P = y + f) + ' C' + [v, w = P + i * L, m = d + o * L, b = P + i, d, b, d - (d - p) / 3, b, p + (d - p) / 3, b, p, b, c = r + o * (1 - L), b, r, w, r, P, r, P - (P - y) / 3, r, y + (P - y) / 3, r, y, r, x = a + i * (1 - L), c, a, p, a, p + (d - p) / 3, a, d - (d - p) / 3, a, d, a, m, a, v, x, v, y].join(',') + 'z' : 'M' + (r + g) + ',' + a + ' v' + f + ' h' + -g + ' v' + -f + ' h' + g + 'z') : 'circle' === R || 'ellipse' === R ? (h = 'circle' === R ? (o = i = M.r) * L : (o = M.rx, (i = M.ry) * L), n = 'M' + ((r = M.cx) + o) + ',' + (a = M.cy) + ' C' + [r + o, a + h, r + (l = o * L), a + i, r, a + i, r - l, a + i, r - o, a + h, r - o, a, r - o, a - h, r - l, a - i, r, a - i, r + l, a - i, r + o, a - h, r + o, a].join(',') + 'z') : 'line' === R ? n = 'M' + M.x1 + ',' + M.y1 + ' L' + M.x2 + ',' + M.y2 : 'polyline' !== R && 'polygon' !== R || (n = 'M' + (r = (u = (t.getAttribute('points') + '').match(T) || []).shift()) + ',' + (a = u.shift()) + ' L' + u.join(','), 'polygon' === R && (n += ',' + r + ',' + a + 'z')), s.setAttribute('d', rawPathToString(s._gsRawPath = stringToRawPath(n))), e && t.parentNode && (t.parentNode.insertBefore(s, t), t.parentNode.removeChild(t)), s) : t
  }

  function getRotationAtBezierT (t, e, n) {
    var r, a = t[e], o = t[e + 2], i = t[e + 4]
    return a += (o - a) * n, a += ((o += (i - o) * n) - a) * n, r = o + (i + (t[e + 6] - i) * n - o) * n - a, a = t[e + 1], a += ((o = t[e + 3]) - a) * n, a += ((o += ((i = t[e + 5]) - o) * n) - a) * n, B(S(o + (i + (t[e + 7] - i) * n - o) * n - a, r) * s)
  }

  function sliceRawPath (t, e, n) {
    n = function _isUndefined (t) {
      return void 0 === t
    }(n) ? 1 : x(n) || 0, e = x(e) || 0
    var r = Math.max(0, ~~(H(n - e) - 1e-8)), a = function copyRawPath (t) {
      for (var e = [], n = 0; n < t.length; n++) e[n] = O(t[n], t[n].slice(0))
      return O(t, e)
    }(t)
    if (n < e && (e = 1 - e, n = 1 - n, function _reverseRawPath (t, e) {
      var n = t.length
      for (e || t.reverse(); n--;) t[n].reversed || reverseSegment(t[n])
    }(a), a.totalLength = 0), e < 0 || n < 0) {
      var o = Math.abs(~~Math.min(e, n)) + 1
      e += o, n += o
    }
    a.totalLength || cacheRawPathMeasurements(a)
    var i, s, l, h, u, g, f, c, p = 1 < n, d = getProgressData(a, e, N, !0), m = getProgressData(a, n, _),
      v = m.segment, P = d.segment, w = m.segIndex, b = d.segIndex, M = m.i, R = d.i, L = b === w, T = M === R && L
    if (p || r) {
      for (i = w < b || L && M < R || T && m.t < d.t, y(a, b, R, d.t) && (b++, i || (w++, T ? (m.t = (m.t - d.t) / (1 - d.t), M = 0) : L && (M -= R))), Math.abs(1 - (n - e)) < 1e-5 ? w = b - 1 : !m.t && w ? w-- : y(a, w, M, m.t) && i && b++, 1 === d.t && (b = (b + 1) % a.length), u = [], f = 1 + (g = a.length) * r, f += (g - (c = b) + w) % g, h = 0; h < f; h++) C(u, a[c++ % g])
      a = u
    } else if (l = 1 === m.t ? 6 : subdivideSegment(v, M, m.t), e !== n) for (s = subdivideSegment(P, R, T ? d.t / m.t : d.t), L && (l += s), v.splice(M + l + 2), (s || R) && P.splice(0, R + s), h = a.length; h--;) (h < b || w < h) && a.splice(h, 1) else v.angle = getRotationAtBezierT(v, M + l, 0), d = v[M += l], m = v[M + 1], v.length = v.totalLength = 0, v.totalPoints = a.totalPoints = 8, v.push(d, m, d, m, d, m, d, m)
    return a.totalLength = 0, a
  }

  function measureSegment (t, e, n) {
    e = e || 0, t.samples || (t.samples = [], t.lookup = [])
    var r, a, o, i, s, l, h, u, g, f, c, p, d, m, v, x, y, P = ~~t.resolution || 12, w = 1 / P,
      b = n ? e + 6 * n + 1 : t.length, M = t[e], R = t[e + 1], L = e ? e / 6 * P : 0, T = t.samples, S = t.lookup,
      N = (e ? t.minLength : A) || A, _ = T[L + n * P - 1], C = e ? T[L - 1] : 0
    for (T.length = S.length = 0, a = e + 2; a < b; a += 6) {
      if (o = t[a + 4] - M, i = t[a + 2] - M, s = t[a] - M, u = t[a + 5] - R, g = t[a + 3] - R, f = t[a + 1] - R, l = h = c = p = 0, H(o) < .01 && H(u) < .01 && H(s) + H(f) < .01) 8 < t.length && (t.splice(a, 6), a -= 6, b -= 6) else for (r = 1; r <= P; r++) l = h - (h = ((m = w * r) * m * o + 3 * (d = 1 - m) * (m * i + d * s)) * m), c = p - (p = (m * m * u + 3 * d * (m * g + d * f)) * m), (x = $(c * c + l * l)) < N && (N = x), C += x, T[L++] = C
      M += o, R += u
    }
    if (_) for (_ -= C; L < T.length; L++) T[L] += _
    if (T.length && N) {
      if (t.totalLength = y = T[T.length - 1] || 0, y / (t.minLength = N) < 9999) for (x = v = 0, r = 0; r < y; r += N) S[x++] = T[v] < r ? ++v : v
    } else {
      t.totalLength = T[0] = 0
    }
    return e ? C - T[e / 2 - 1] : C
  }

  function cacheRawPathMeasurements (t, e) {
    var n, r, a
    for (a = n = r = 0; a < t.length; a++) t[a].resolution = ~~e || 12, r += t[a].length, n += measureSegment(t[a])
    return t.totalPoints = r, t.totalLength = n, t
  }

  function subdivideSegment (t, e, n) {
    if (n <= 0 || 1 <= n) return 0
    var r = t[e], a = t[e + 1], o = t[e + 2], i = t[e + 3], s = t[e + 4], l = t[e + 5], h = r + (o - r) * n,
      u = o + (s - o) * n, g = a + (i - a) * n, f = i + (l - i) * n, c = h + (u - h) * n, p = g + (f - g) * n,
      d = s + (t[e + 6] - s) * n, m = l + (t[e + 7] - l) * n
    return u += (d - u) * n, f += (m - f) * n, t.splice(e + 2, 4, B(h), B(g), B(c), B(p), B(c + (u - c) * n), B(p + (f - p) * n), B(u), B(f), B(d), B(m)), t.samples && t.samples.splice(e / 6 * t.resolution | 0, 0, 0, 0, 0, 0, 0, 0), 6
  }

  function getProgressData (t, e, n, r) {
    n = n || {}, t.totalLength || cacheRawPathMeasurements(t), (e < 0 || 1 < e) && (e = d(e))
    var a, o, i, s, l, h, u, g = 0, f = t[0]
    if (e) {
      if (1 === e) {
        u = 1, h = (f = t[g = t.length - 1]).length - 8
      } else {
        if (1 < t.length) {
          for (i = t.totalLength * e, l = h = 0; (l += t[h++].totalLength) < i;) g = h
          e = (i - (s = l - (f = t[g]).totalLength)) / (l - s) || 0
        }
        a = f.samples, o = f.resolution, i = f.totalLength * e, s = (h = f.lookup.length ? f.lookup[~~(i / f.minLength)] || 0 : m(a, i, e)) ? a[h - 1] : 0, (l = a[h]) < i && (s = l, l = a[++h]), u = 1 / o * ((i - s) / (l - s) + h % o), h = 6 * ~~(h / o), r && 1 === u && (h + 6 < f.length ? (h += 6, u = 0) : g + 1 < t.length && (h = u = 0, f = t[++g]))
      }
    } else {
      u = h = g = 0, f = t[0]
    }
    return n.t = u, n.i = h, n.path = t, n.segment = f, n.segIndex = g, n
  }

  function getPositionOnPath (t, e, n, r) {
    var a, o, i, s, l, h, u, g, f, c = t[0], p = r || {}
    if ((e < 0 || 1 < e) && (e = d(e)), 1 < t.length) {
      for (i = t.totalLength * e, l = h = 0; (l += t[h++].totalLength) < i;) c = t[h]
      e = (i - (s = l - c.totalLength)) / (l - s) || 0
    }
    return a = c.samples, o = c.resolution, i = c.totalLength * e, s = (h = c.lookup.length ? c.lookup[e < 1 ? ~~(i / c.minLength) : c.lookup.length - 1] || 0 : m(a, i, e)) ? a[h - 1] : 0, (l = a[h]) < i && (s = l, l = a[++h]), f = 1 - (u = 1 / o * ((i - s) / (l - s) + h % o) || 0), g = c[h = 6 * ~~(h / o)], p.x = B((u * u * (c[h + 6] - g) + 3 * f * (u * (c[h + 4] - g) + f * (c[h + 2] - g))) * u + g), p.y = B((u * u * (c[h + 7] - (g = c[h + 1])) + 3 * f * (u * (c[h + 5] - g) + f * (c[h + 3] - g))) * u + g), n && (p.angle = c.totalLength ? getRotationAtBezierT(c, h, 1 <= u ? 1 - 1e-9 : u || 1e-9) : c.angle || 0), p
  }

  function transformRawPath (t, e, n, r, a, o, i) {
    for (var s, l, h, u, g, f = t.length; -1 < --f;) for (l = (s = t[f]).length, h = 0; h < l; h += 2) u = s[h], g = s[h + 1], s[h] = u * e + g * r + o, s[h + 1] = u * n + g * a + i
    return t._dirty = 1, t
  }

  function arcToSegment (t, e, n, r, a, o, i, s, l) {
    if (t !== s || e !== l) {
      n = H(n), r = H(r)
      var h = a % 360 * q, u = U(h), g = F(h), f = Math.PI, c = 2 * f, p = (t - s) / 2, d = (e - l) / 2,
        m = u * p + g * d, v = -g * p + u * d, x = m * m, y = v * v, P = x / (n * n) + y / (r * r)
      1 < P && (n = $(P) * n, r = $(P) * r)
      var w = n * n, b = r * r, M = (w * b - w * y - b * x) / (w * y + b * x)
      M < 0 && (M = 0)
      var R = (o === i ? -1 : 1) * $(M), L = n * v / r * R, T = -r * m / n * R, S = u * L - g * T + (t + s) / 2,
        N = g * L + u * T + (e + l) / 2, _ = (m - L) / n, C = (v - T) / r, A = (-m - L) / n, B = (-v - T) / r,
        O = _ * _ + C * C, I = (C < 0 ? -1 : 1) * Math.acos(_ / $(O)),
        E = (_ * B - C * A < 0 ? -1 : 1) * Math.acos((_ * A + C * B) / $(O * (A * A + B * B)))
      isNaN(E) && (E = f), !i && 0 < E ? E -= c : i && E < 0 && (E += c), I %= c, E %= c
      var G, D = Math.ceil(H(E) / (c / 4)), X = [], z = E / D, k = 4 / 3 * F(z / 2) / (1 + U(z / 2)), Z = u * n,
        V = g * n, Y = g * -r, j = u * r
      for (G = 0; G < D; G++) m = U(a = I + G * z), v = F(a), _ = U(a += z), C = F(a), X.push(m - k * v, v + k * m, _ + k * C, C - k * _, _, C)
      for (G = 0; G < X.length; G += 2) m = X[G], v = X[G + 1], X[G] = m * Z + v * Y + S, X[G + 1] = m * V + v * j + N
      return X[G - 2] = s, X[G - 1] = l, X
    }
  }

  function stringToRawPath (t) {
    function Af (t, e, n, r) {
      u = (n - t) / 3, g = (r - e) / 3, s.push(t + u, e + g, n - u, r - g, n, r)
    }

    var e, n, r, a, o, i, s, l, h, u, g, f, c, p, d, m = (t + '').replace(L, function (t) {
      var e = +t
      return e < 1e-4 && -1e-4 < e ? 0 : e
    }).match(M) || [], v = [], x = 0, y = 0, P = m.length, w = 0, b = 'ERROR: malformed path: ' + t
    if (!t || !isNaN(m[0]) || isNaN(m[1])) return console.log(b), v
    for (e = 0; e < P; e++) {
      if (c = o, isNaN(m[e]) ? i = (o = m[e].toUpperCase()) !== m[e] : e--, r = +m[e + 1], a = +m[e + 2], i && (r += x, a += y), e || (l = r, h = a), 'M' === o) {
        s && (s.length < 8 ? --v.length : w += s.length), x = l = r, y = h = a, s = [r, a], v.push(s), e += 2, o = 'L'
      } else if ('C' === o) {
        i || (x = y = 0), (s = s || [0, 0]).push(r, a, x + 1 * m[e + 3], y + 1 * m[e + 4], x += 1 * m[e + 5], y += 1 * m[e + 6]), e += 6
      } else if ('S' === o) {
        u = x, g = y, 'C' !== c && 'S' !== c || (u += x - s[s.length - 4], g += y - s[s.length - 3]), i || (x = y = 0), s.push(u, g, r, a, x += 1 * m[e + 3], y += 1 * m[e + 4]), e += 4
      } else if ('Q' === o) {
        u = x + 2 / 3 * (r - x), g = y + 2 / 3 * (a - y), i || (x = y = 0), x += 1 * m[e + 3], y += 1 * m[e + 4], s.push(u, g, x + 2 / 3 * (r - x), y + 2 / 3 * (a - y), x, y), e += 4
      } else if ('T' === o) {
        u = x - s[s.length - 4], g = y - s[s.length - 3], s.push(x + u, y + g, r + 2 / 3 * (x + 1.5 * u - r), a + 2 / 3 * (y + 1.5 * g - a), x = r, y = a), e += 2
      } else if ('H' === o) {
        Af(x, y, x = r, y), e += 1
      } else if ('V' === o) {
        Af(x, y, x, y = r + (i ? y - x : 0)), e += 1
      } else if ('L' === o || 'Z' === o) {
        'Z' === o && (r = l, a = h, s.closed = !0), ('L' === o || .5 < H(x - r) || .5 < H(y - a)) && (Af(x, y, r, a), 'L' === o && (e += 2)), x = r, y = a
      } else if ('A' === o) {
        if (p = m[e + 4], d = m[e + 5], u = m[e + 6], g = m[e + 7], n = 7, 1 < p.length && (p.length < 3 ? (g = u, u = d, n--) : (g = d, u = p.substr(2), n -= 2), d = p.charAt(1), p = p.charAt(0)), f = arcToSegment(x, y, +m[e + 1], +m[e + 2], +m[e + 3], +p, +d, (i ? x : 0) + 1 * u, (i ? y : 0) + 1 * g), e += n, f) for (n = 0; n < f.length; n++) s.push(f[n])
        x = s[s.length - 2], y = s[s.length - 1]
      } else {
        console.log(b)
      }
    }
    return (e = s.length) < 6 ? (v.pop(), e = 0) : s[0] === s[e - 2] && s[1] === s[e - 1] && (s.closed = !0), v.totalPoints = w + e, v
  }

  function flatPointsToSegment (t, e) {
    void 0 === e && (e = 1)
    for (var n = t[0], r = 0, a = [n, r], o = 2; o < t.length; o += 2) a.push(n, r, t[o], r = (t[o] - n) * e / 2, n = t[o], -r)
    return a
  }

  function pointsToSegment (t, e, n) {
    H(t[0] - t[2]) < 1e-4 && H(t[1] - t[3]) < 1e-4 && (t = t.slice(2))
    var r, a, o, i, s, l, h, u, g, f, c, p, d, m, v = t.length - 2, x = +t[0], y = +t[1], P = +t[2], w = +t[3],
      b = [x, y, x, y], M = P - x, R = w - y, L = Math.abs(t[v] - x) < .001 && Math.abs(t[v + 1] - y) < .001
    for (isNaN(n) && (n = Math.PI / 10), L && (t.push(P, w), P = x, w = y, x = t[v - 2], y = t[v - 1], t.unshift(x, y), v += 4), e = e || 0 === e ? +e : 1, s = 2; s < v; s += 2) r = x, a = y, x = P, y = w, P = +t[s + 2], w = +t[s + 3], x === P && y === w || (p = (l = M) * l + (u = R) * u, d = (M = P - x) * M + (R = w - y) * R, m = (h = P - r) * h + (g = w - a) * g, c = (o = Math.acos((p + d - m) / $(4 * p * d))) / Math.PI * e, f = $(p) * c, c *= $(d), x === r && y === a || (n < o ? (i = S(g, h), b.push(B(x - U(i) * f), B(y - F(i) * f), B(x), B(y), B(x + U(i) * c), B(y + F(i) * c))) : (i = S(u, l), b.push(B(x - U(i) * f), B(y - F(i) * f)), i = S(R, M), b.push(B(x), B(y), B(x + U(i) * c), B(y + F(i) * c)))))
    return x !== P || y !== w || b.length < 4 ? b.push(B(P), B(w), B(P), B(w)) : b.length -= 2, L && (b.splice(0, 6), b.length = b.length - 6), b
  }

  function rawPathToString (t) {
    l(t[0]) && (t = [t])
    var e, n, r, a, o = '', i = t.length
    for (n = 0; n < i; n++) {
      for (a = t[n], o += 'M' + B(a[0]) + ',' + B(a[1]) + ' C', e = a.length, r = 2; r < e; r++) o += B(a[r++]) + ',' + B(a[r++]) + ' ' + B(a[r++]) + ',' + B(a[r++]) + ' ' + B(a[r++]) + ',' + B(a[r]) + ' '
      a.closed && (o += 'z')
    }
    return o
  }

  function R (t) {
    var e = t.ownerDocument || t
    !(z in t.style) && 'msTransform' in t.style && (k = (z = 'msTransform') + 'Origin')
    for (; e.parentNode && (e = e.parentNode);)
    if (v = window, E = new j, e) {
      P = (c = e).documentElement, w = e.body, (G = c.createElementNS('http://www.w3.org/2000/svg', 'g')).style.transform = 'none'
      var n = e.createElement('div'), r = e.createElement('div')
      w.appendChild(n), n.appendChild(r), n.style.position = 'static', n.style[z] = 'translate3d(0,0,1px)', D = r.offsetParent !== n, w.removeChild(n)
    }
    return e
  }

  function X (t) {
    return t.ownerSVGElement || ('svg' === (t.tagName + '').toLowerCase() ? t : null)
  }

  function Z (t, e) {
    if (t.parentNode && (c || R(t))) {
      var n = X(t), r = n ? n.getAttribute('xmlns') || 'http://www.w3.org/2000/svg' : 'http://www.w3.org/1999/xhtml',
        a = n ? e ? 'rect' : 'g' : 'div', o = 2 !== e ? 0 : 100, i = 3 === e ? 100 : 0,
        s = 'position:absolute;display:block;pointer-events:none;margin:0;padding:0;',
        l = c.createElementNS ? c.createElementNS(r.replace(/^https/, 'http'), a) : c.createElement(a)
      return e && (n ? (b = b || Z(t), l.setAttribute('width', .01), l.setAttribute('height', .01), l.setAttribute('transform', 'translate(' + o + ',' + i + ')'), b.appendChild(l)) : (f || ((f = Z(t)).style.cssText = s), l.style.cssText = s + 'width:0.1px;height:0.1px;top:' + i + 'px;left:' + o + 'px', f.appendChild(l))), l
    }
    throw 'Need document and parent.'
  }

  function aa (t, e) {
    var n, r, a, o, i, s, l = X(t), h = t === l, u = l ? V : Y, g = t.parentNode
    if (t === v) return t
    if (u.length || u.push(Z(t, 1), Z(t, 2), Z(t, 3)), n = l ? b : f, l) {
      h ? (o = -(a = function _getCTM (t) {
        var e, n = t.getCTM()
        return n || (e = t.style[z], t.style[z] = 'none', t.appendChild(G), n = G.getCTM(), t.removeChild(G), e ? t.style[z] = e : t.style.removeProperty(z.replace(/([A-Z])/g, '-$1').toLowerCase())), n || E.clone()
      }(t)).e / a.a, i = -a.f / a.d, r = E) : (a = t.getBBox(), o = (r = (r = t.transform ? t.transform.baseVal : {}).numberOfItems ? 1 < r.numberOfItems ? function _consolidate (t) {
        for (var e = new j, n = 0; n < t.numberOfItems; n++) e.multiply(t.getItem(n).matrix)
        return e
      }(r) : r.getItem(0).matrix : E).a * a.x + r.c * a.y, i = r.b * a.x + r.d * a.y), e && 'g' === t.tagName.toLowerCase() && (o = i = 0), (h ? l : g).appendChild(n), n.setAttribute('transform', 'matrix(' + r.a + ',' + r.b + ',' + r.c + ',' + r.d + ',' + (r.e + o) + ',' + (r.f + i) + ')')
    } else {
      if (o = i = 0, D) for (r = t.offsetParent, a = t; (a = a && a.parentNode) && a !== r && a.parentNode;) 4 < (v.getComputedStyle(a)[z] + '').length && (o = a.offsetLeft, i = a.offsetTop, a = 0)
      if ('absolute' !== (s = v.getComputedStyle(t)).position && 'fixed' !== s.position) for (r = t.offsetParent; g && g !== r;) o += g.scrollLeft || 0, i += g.scrollTop || 0, g = g.parentNode;
      (a = n.style).top = t.offsetTop - i + 'px', a.left = t.offsetLeft - o + 'px', a[z] = s[z], a[k] = s[k], a.position = 'fixed' === s.position ? 'fixed' : 'absolute', t.parentNode.appendChild(n)
    }
    return n
  }

  function ba (t, e, n, r, a, o, i) {
    return t.a = e, t.b = n, t.c = r, t.d = a, t.e = o, t.f = i, t
  }

  var c, v, P, w, f, b, E, G, D, n, z = 'transform', k = z + 'Origin', V = [], Y = [],
    j = ((n = Matrix2D.prototype).inverse = function inverse () {
      var t = this.a, e = this.b, n = this.c, r = this.d, a = this.e, o = this.f, i = t * r - e * n || 1e-10
      return ba(this, r / i, -e / i, -n / i, t / i, (n * o - r * a) / i, -(t * o - e * a) / i)
    }, n.multiply = function multiply (t) {
      var e = this.a, n = this.b, r = this.c, a = this.d, o = this.e, i = this.f, s = t.a, l = t.c, h = t.b, u = t.d,
        g = t.e, f = t.f
      return ba(this, s * e + h * r, s * n + h * a, l * e + u * r, l * n + u * a, o + g * e + f * r, i + g * n + f * a)
    }, n.clone = function clone () {
      return new Matrix2D(this.a, this.b, this.c, this.d, this.e, this.f)
    }, n.equals = function equals (t) {
      var e = this.a, n = this.b, r = this.c, a = this.d, o = this.e, i = this.f
      return e === t.a && n === t.b && r === t.c && a === t.d && o === t.e && i === t.f
    }, n.apply = function apply (t, e) {
      void 0 === e && (e = {})
      var n = t.x, r = t.y, a = this.a, o = this.b, i = this.c, s = this.d, l = this.e, h = this.f
      return e.x = n * a + r * i + l || 0, e.y = n * o + r * s + h || 0, e
    }, Matrix2D)

  function Matrix2D (t, e, n, r, a, o) {
    void 0 === t && (t = 1), void 0 === e && (e = 0), void 0 === n && (n = 0), void 0 === r && (r = 1), void 0 === a && (a = 0), void 0 === o && (o = 0), ba(this, t, e, n, r, a, o)
  }

  function getGlobalMatrix (t, e, n, r) {
    if (!t || !t.parentNode || (c || R(t)).documentElement === t) return new j
    var a = function _forceNonZeroScale (t) {
        for (var e, n; t && t !== w;) (n = t._gsap) && n.uncache && n.get(t, 'x'), n && !n.scaleX && !n.scaleY && n.renderTransform && (n.scaleX = n.scaleY = 1e-4, n.renderTransform(1, n), e ? e.push(n) : e = [n]), t = t.parentNode
        return e
      }(t), o = X(t) ? V : Y, i = aa(t, n), s = o[0].getBoundingClientRect(), l = o[1].getBoundingClientRect(),
      h = o[2].getBoundingClientRect(), u = i.parentNode, g = !r && function _isFixed (t) {
        return 'fixed' === v.getComputedStyle(t).position || ((t = t.parentNode) && 1 === t.nodeType ? _isFixed(t) : void 0)
      }(t),
      f = new j((l.left - s.left) / 100, (l.top - s.top) / 100, (h.left - s.left) / 100, (h.top - s.top) / 100, s.left + (g ? 0 : function _getDocScrollLeft () {
        return v.pageXOffset || c.scrollLeft || P.scrollLeft || w.scrollLeft || 0
      }()), s.top + (g ? 0 : function _getDocScrollTop () {
        return v.pageYOffset || c.scrollTop || P.scrollTop || w.scrollTop || 0
      }()))
    if (u.removeChild(i), a) for (s = a.length; s--;) (l = a[s]).scaleX = l.scaleY = 0, l.renderTransform(1, l)
    return e ? f.inverse() : f
  }

  function la (t, e, n, r) {
    for (var a = e.length, o = 2 === r ? 0 : r, i = 0; i < a; i++) t[o] = parseFloat(e[i][n]), 2 === r && (t[o + 1] = 0), o += 2
    return t
  }

  function ma (t, e, n) {
    return parseFloat(t._gsap.get(t, e, n || 'px')) || 0
  }

  function na (t) {
    var e, n = t[0], r = t[1]
    for (e = 2; e < t.length; e += 2) n = t[e] += n, r = t[e + 1] += r
  }

  function oa (t, e, n, r, a, o, i, s, l) {
    return e = 'cubic' === i.type ? [e] : (!1 !== i.fromCurrent && e.unshift(ma(n, r, s), a ? ma(n, a, l) : 0), i.relative && na(e), [(a ? pointsToSegment : flatPointsToSegment)(e, i.curviness)]), e = o(nt(e, n, i)), rt(t, n, r, e, 'x', s), a && rt(t, n, a, e, 'y', l), cacheRawPathMeasurements(e, i.resolution || (0 === i.curviness ? 20 : 12))
  }

  function pa (t) {
    return t
  }

  function ra (t, e, n) {
    var r, a = getGlobalMatrix(t), o = 0, i = 0
    return 'svg' === (t.tagName + '').toLowerCase() ? (r = t.viewBox.baseVal).width || (r = {
      width: +t.getAttribute('width'),
      height: +t.getAttribute('height')
    }) : r = e && t.getBBox && t.getBBox(), e && 'auto' !== e && (o = e.push ? e[0] * (r ? r.width : t.offsetWidth || 0) : e.x, i = e.push ? e[1] * (r ? r.height : t.offsetHeight || 0) : e.y), n.apply(o || i ? a.apply({
      x: o,
      y: i
    }) : {x: a.e, y: a.f})
  }

  function sa (t, e, n, r) {
    var a, o = getGlobalMatrix(t.parentNode, !0, !0), i = o.clone().multiply(getGlobalMatrix(e)), s = ra(t, n, o),
      l = ra(e, r, o), h = l.x, u = l.y
    return i.e = i.f = 0, 'auto' === r && e.getTotalLength && 'path' === e.tagName.toLowerCase() && (a = e.getAttribute('d').match(et) || [], h += (a = i.apply({
      x: +a[0],
      y: +a[1]
    })).x, u += a.y), (a || e.getBBox && t.getBBox && e.ownerSVGElement === t.ownerSVGElement) && (h -= (a = i.apply(e.getBBox())).x, u -= a.y), i.e = h - s.x, i.f = u - s.y, i
  }

  var Q, g, W, J, K = 'x,translateX,left,marginLeft,xPercent'.split(','),
    tt = 'y,translateY,top,marginTop,yPercent'.split(','), o = Math.PI / 180, et = /[-+\.]*\d+\.?(?:e-|e\+)?\d*/g,
    nt = function _align (t, e, n) {
      var r, a, o, i = n.align, s = n.matrix, l = n.offsetX, h = n.offsetY, u = n.alignOrigin, g = t[0][0], f = t[0][1],
        c = ma(e, 'x'), p = ma(e, 'y')
      return t && t.length ? (i && ('self' === i || (r = J(i)[0] || e) === e ? transformRawPath(t, 1, 0, 0, 1, c - g, p - f) : (u && !1 !== u[2] ? Q.set(e, {transformOrigin: 100 * u[0] + '% ' + 100 * u[1] + '%'}) : u = [ma(e, 'xPercent') / -100, ma(e, 'yPercent') / -100], o = (a = sa(e, r, u, 'auto')).apply({
        x: g,
        y: f
      }), transformRawPath(t, a.a, a.b, a.c, a.d, c + a.e - (o.x - a.e), p + a.f - (o.y - a.f)))), s ? transformRawPath(t, s.a, s.b, s.c, s.d, s.e, s.f) : (l || h) && transformRawPath(t, 1, 0, 0, 1, l || 0, h || 0), t) : getRawPath('M0,0L0,0')
    }, rt = function _addDimensionalPropTween (t, e, n, r, a, o) {
      var i = e._gsap, s = i.harness, l = s && s.aliases && s.aliases[n], h = l && l.indexOf(',') < 0 ? l : n,
        u = t._pt = new g(t._pt, e, h, 0, 0, pa, 0, i.set(e, h, t))
      u.u = W(i.get(e, h, o)) || 0, u.path = r, u.pp = a, t._props.push(h)
    }, a = {
      version: '3.9.1',
      name: 'motionPath',
      register: function register (t, e, n) {
        W = (Q = t).utils.getUnit, J = Q.utils.toArray, g = n
      },
      init: function init (t, e) {
        if (!Q) return console.warn('Please gsap.registerPlugin(MotionPathPlugin)'), !1
        'object' == typeof e && !e.style && e.path || (e = {path: e})
        var n, r, a = [], o = e.path, i = e.autoRotate, s = e.unitX, l = e.unitY, h = e.x, u = e.y, g = o[0],
          f = function _sliceModifier (e, n) {
            return function (t) {
              return e || 1 !== n ? sliceRawPath(t, e, n) : t
            }
          }(e.start, 'end' in e ? e.end : 1)
        if (this.rawPaths = a, this.target = t, (this.rotate = i || 0 === i) && (this.rOffset = parseFloat(i) || 0, this.radians = !!e.useRadians, this.rProp = e.rotation || 'rotation', this.rSet = t._gsap.set(t, this.rProp, this), this.ru = W(t._gsap.get(t, this.rProp)) || 0), !Array.isArray(o) || 'closed' in o || 'number' == typeof g) {
          cacheRawPathMeasurements(n = f(nt(getRawPath(e.path), t, e)), e.resolution), a.push(n), rt(this, t, e.x || 'x', n, 'x', e.unitX || 'px'), rt(this, t, e.y || 'y', n, 'y', e.unitY || 'px')
        } else {
          for (r in g) !h && ~K.indexOf(r) ? h = r : !u && ~tt.indexOf(r) && (u = r)
          for (r in h && u ? a.push(oa(this, la(la([], o, h, 0), o, u, 1), t, h, u, f, e, s || W(o[0][h]), l || W(o[0][u]))) : h = u = 0, g) r !== h && r !== u && a.push(oa(this, la([], o, r, 2), t, r, 0, f, e, W(o[0][r])))
        }
      },
      render: function render (t, e) {
        var n = e.rawPaths, r = n.length, a = e._pt
        for (1 < t ? t = 1 : t < 0 && (t = 0); r--;) getPositionOnPath(n[r], t, !r && e.rotate, n[r])
        for (; a;) a.set(a.t, a.p, a.path[a.pp] + a.u, a.d, t), a = a._next
        e.rotate && e.rSet(e.target, e.rProp, n[0].angle * (e.radians ? o : 1) + e.rOffset + e.ru, e, t)
      },
      getLength: function getLength (t) {
        return cacheRawPathMeasurements(getRawPath(t)).totalLength
      },
      sliceRawPath: sliceRawPath,
      getRawPath: getRawPath,
      pointsToSegment: pointsToSegment,
      stringToRawPath: stringToRawPath,
      rawPathToString: rawPathToString,
      transformRawPath: transformRawPath,
      getGlobalMatrix: getGlobalMatrix,
      getPositionOnPath: getPositionOnPath,
      cacheRawPathMeasurements: cacheRawPathMeasurements,
      convertToPath: function convertToPath$1 (t, e) {
        return J(t).map(function (t) {
          return convertToPath(t, !1 !== e)
        })
      },
      convertCoordinates: function convertCoordinates (t, e, n) {
        var r = getGlobalMatrix(e, !0, !0).multiply(getGlobalMatrix(t))
        return n ? r.apply(n) : r
      },
      getAlignMatrix: sa,
      getRelativePosition: function getRelativePosition (t, e, n, r) {
        var a = sa(t, e, n, r)
        return {x: a.e, y: a.f}
      },
      arrayToRawPath: function arrayToRawPath (t, e) {
        var n = la(la([], t, (e = e || {}).x || 'x', 0), t, e.y || 'y', 1)
        return e.relative && na(n), ['cubic' === e.type ? n : pointsToSegment(n, e.curviness)]
      }
    }
  !function _getGSAP () {
    return Q || 'undefined' != typeof window && (Q = window.gsap) && Q.registerPlugin && Q
  }() || Q.registerPlugin(a), t.MotionPathPlugin = a, t.default = a
  if (typeof (window) === 'undefined' || window !== t) {
    Object.defineProperty(t, '__esModule', {value: !0})
  } else {
    delete t.default
  }
})

!function () {
  function e (e, n) {
    var i = document, t = i.head || i.getElementsByTagName('head')[0] || i.documentElement,
      a = i.createElement('script')
    a.onload = n, a.onerror = function () {
    }, a.async = !0, a.src = e[0], t.appendChild(a)
  }

  function n (e) {
    e.WXconfig && c([r], function (n) {
      n.config || (n = window.wx)
      var i = e.WXconfig
      n.config({
        debug: !1,
        appId: i.appId,
        timestamp: i.timestamp,
        nonceStr: i.nonceStr,
        signature: i.signature,
        jsApiList: ['onMenuShareTimeline', 'onMenuShareAppMessage', 'onMenuShareQQ', 'onMenuShareQZone']
      }), n.error(function (e) {
      }), n.ready(function () {
        var t = {
          title: e.title,
          desc: e.summary,
          link: e.url,
          imgUrl: e.pic,
          type: '',
          dataUrl: '',
          success: function () {
            e.callback && e.callback()
          },
          cancel: function () {
          }
        }
        n.onMenuShareAppMessage(t), n.onMenuShareQQ(t), n.onMenuShareQZone(t), i.swapTitleInWX ? n.onMenuShareTimeline({
          title: e.summary,
          desc: e.title,
          link: e.url,
          imgUrl: e.pic,
          type: '',
          dataUrl: '',
          success: function () {
            e.callback && e.callback()
          },
          cancel: function () {
          }
        }) : n.onMenuShareTimeline(t)
      })
    })
  }

  function i (e) {
    function n () {
      try {
        e.callback ? window.mqq.ui.setOnShareHandler(function (n) {
          3 == n && (e.swapTitle || e.WXconfig && e.WXconfig.swapTitleInWX) ? i.title = e.summary : i.title = e.title, i.share_type = n, i.back = !0, window.mqq.ui.shareMessage(i, function (n) {
            0 === n.retCode && e.callback && e.callback.call(this, n)
          })
        }) : window.mqq.data.setShareInfo(i)
      } catch (e) {
      }
    }

    var i = {title: e.title, desc: e.summary, share_url: e.url, image_url: e.pic}
    window.mqq ? n() : c([o], function () {
      n()
    })
  }

  function t (e) {
    function n () {
      if (QZAppExternal && QZAppExternal.setShare) {
        for (var n = [], i = [], t = [], a = [], c = 0; c < 5; c++) n.push(e.pic), a.push(e.url), 4 === c && (e.swapTitle || e.WXconfig && e.WXconfig.swapTitleInWX) ? (i.push(e.summary), t.push(e.title)) : (i.push(e.title), t.push(e.summary))
        QZAppExternal.setShare(function (e) {
        }, {type: 'share', image: n, title: i, summary: t, shareURL: a})
      }
    }

    window.QZAppExternal ? n() : c([s], function () {
      n()
    })
  }

  function a (e) {
    var a = navigator.userAgent, c = a.match(/MicroMessenger\/([\d\.]+)/), r = a.match(/QQ\/([\d\.]+)/),
      o = -1 !== a.indexOf('Qzone/')
    c && n(e), r && i(e), o && t(e)
  }

  var c, r = '//res.wx.qq.com/open/js/jweixin-1.0.0.js', o = '//open.mobile.qq.com/sdk/qqapi.js?_bid=152',
    s = '//qzonestyle.gtimg.cn/qzone/phone/m/v4/widget/mobile/jsbridge.js?_bid=339'
  'function' == typeof define && (define.cmd || define.amd) ? (define.cmd ? c = seajs.use : define.amd && (c = window.require), define(function () {
    return a
  })) : (c = e, window.setShareInfo = a)
}()
try {
  setShareInfo({title: '', summary: '', url: 'http://s.61.com/'})
} catch (e) {
  console.warn('qqWebShare init failed', e)
}
var __reflect = this && this.__reflect || function (t, e, i) {
  t.__class__ = e, i ? i.push(e) : i = [e], t.__types__ = t.__types__ ? i.concat(t.__types__) : i
}, plugin
!function (t) {
  var e
  !function (t) {
    var e = function () {
      function t () {
        this.type = t.getClassName(this)
        var e = t.instances[this.type] || (t.instances[this.type] = [])
        e.push(this)
      }

      return t.prototype.load = function (t, e, i) {
        this.$onLoadFinishCallback = e, this.item = i
      }, t.prototype.onLoadFinish = function (e, i) {
        this.$onLoadFinishCallback(e, i), this.$onLoadFinishCallback = null
        var n = t.instances[this.type]
        n.splice(n.indexOf(this), 1), this.item.cache || this.destroyRes(e, i)
      }, t.prototype.destroyRes = function (t, e) {
      }, t.getClassName = function (t) {
        return t.constructor.name
      }, t.instances = {}, t
    }()
    t.LoaderBaseAdapter = e, __reflect(e.prototype, 'plugin.applicationDrive.LoaderBaseAdapter')
  }(e = t.applicationDrive || (t.applicationDrive = {}))
}(plugin || (plugin = {}))
var __reflect = this && this.__reflect || function (t, e, i) {
  t.__class__ = e, i ? i.push(e) : i = [e], t.__types__ = t.__types__ ? i.concat(t.__types__) : i
}, plugin
!function (t) {
  var e
  !function (t) {
    var e = function () {
      function t (e) {
        this.$environmentVariableDic = {}, this.$assistDic = {}, this.$ns = {}, this.$running = !1, this.$length = 0, this.$currentLoadedCount = 0, this.$loaderCount = 0, this.$currentProcessItemIndex = -1, this.$currentNameSpace = e, t.$applicationDriveDic[e] = this, this.setEnvironmentVariable({})
      }

      return Object.defineProperty(t.prototype, 'running', {
        get: function () {
          return this.$running
        }, enumerable: !0, configurable: !0
      }), t.prototype.getNameSpace = function (t) {
        return this.$ns['ns_' + t]
      }, t.prototype.setNameSpace = function (t, e) {
        this.$ns['ns_' + t] = e
      }, t.registerAnalyzer = function (e, i) {
        t.$adapaterDic[e] = i
      }, t.getInstance = function (e) {
        return t.$applicationDriveDic[e] || new t(e)
      }, Object.defineProperty(t.prototype, 'driveName', {
        get: function () {
          return this.$currentNameSpace
        }, enumerable: !0, configurable: !0
      }), Object.defineProperty(t.prototype, 'data', {
        set: function (t) {
          var e = this.$xml2obj(t)
          this.$data = e, 'package' == e.values[0].localName ? (this.$main = e.values[0].values, this.$assist = e.values[1].values) : (this.$main = e.values[1].values, this.$assist = e.values[0].values)
          for (var i = 0; i < this.$assist.length; i++) this.$assistDic[this.$assist[i].id] = this.$assist[i]
          for (var n in this.$data) 'string' == typeof n && 0 == n.search('ns_') && (this.$ns[n] = this.$ns[n] || this.$data[n])
          this.$length = this.$main.length, this.$loaderGroups = this.$getLoaderGroups(), parseInt(e.auto_start) && this.start()
        }, enumerable: !0, configurable: !0
      }), t.prototype.$getLoaderGroups = function () {
        for (var t, e, i = this.$main.length, n = [], r = 0; i > r; r++) 'loader' == this.$main[r].localName ? (this.$loaderCount++, t = this.$main[r], t.action_type = 1, n.push(t)) : (e = this.$main[r], e.action_type = 2)
        return n
      }, t.prototype.$xml2obj = function (t) {
        var e = {}
        for (var i in t.attributes) e[i] = t.attributes[i]
        e.localName = t.localName
        var n = t.children.length
        if (n) {
          e.values = []
          for (var r = 0; n > r; r++) e.values.push(this.$xml2obj(t.children[r]))
        }
        return e
      }, t.prototype.start = function () {
        if (!this.$running) {
          if (this.$running = !0, this.dispatchAdapter) {
            var e = this.$loaderCount, i = this.$length, n = this.$currentNameSpace
            this.dispatchAdapter.dispatchBefore(t.BEGIN, {
              driveName: n,
              itemsLoaded: 0,
              itemsTotal: e,
              driveIndex: 0,
              driveCount: i
            })
          }
          this.$actions = [], this.$nextAction()
        }
      }, t.prototype.next = function () {
        this.$doNextAssistAction()
      }, t.prototype.destroy = function () {
        var e = this.$loaderCount, i = this.$length, n = this.$currentNameSpace
        this.$environmentVariableDic = {}, delete t.$applicationDriveDic[this.$currentNameSpace], this.$currentLoaderData = null, this.$returnData = null, this.$data = null, console.log('>>:' + this.$currentNameSpace + '->.'), window.slog = null, this.dispatchAdapter && this.dispatchAdapter.dispatchBefore(t.FINISHED, {
          driveName: n,
          itemsLoaded: 0,
          itemsTotal: e,
          driveIndex: 0,
          driveCount: i
        })
      }, t.prototype.$nextAction = function (t) {
        if (this.$running) {
          if (this.$currentProcessItemIndex++, this.$currentProcessItemIndex < this.$length) {
            var e = this.$main[this.$currentProcessItemIndex]
            if (e.module) {
              var i = ''
              e.static_fun_k && (i += e.module + '.' + e.static_fun_k + (e.static_fun_v ? '(' + e.static_fun_v + ');' : '();')), e.instance_fun_k && (i += 'new ' + e.module + '().' + e.instance_fun_k + (e.instance_fun_v ? '(' + e.instance_fun_v + ');' : '();')), console.log('>>:' + this.$currentNameSpace + '->' + (this.$currentProcessItemIndex + 1) + '/' + this.$length + '', i)
            } else {
              console.log('>>:' + this.$currentNameSpace + '->' + (this.$currentProcessItemIndex + 1) + '/' + this.$length + '', e.url)
            }
            window.slog = this.$currentProcessItemIndex + 1 + '/' + this.$length, this.$doAction(this.$main[this.$currentProcessItemIndex], !0, t)
          } else {
            parseInt(this.$data.auto_destroy) ? (this.$running = !1, this.destroy()) : this.$running = !1
          }
        }
      }, t.prototype.$doAction = function (e, i, n) {
        var r = this
        if (void 0 === i && (i = !0), void 0 === n && (n = null), this.$running) {
          var s = e.action_type
          this.$currentProcessItemIndex
          switch (s) {
            case 1:
              this.$action_loader(e)
              break
            case 2:
              if (this.$action_class(e, n), parseInt(e.delay) ? this.$actions.push([function () {
                r.$doNextAssistAction()
              }]) : this.$doNextAssistAction(), this.dispatchAdapter) {
                var a = this.$currentLoadedCount, o = this.$loaderCount, c = this.$currentProcessItemIndex + 1,
                  h = this.$length, u = this.$currentLoaderItem, l = this.$currentNameSpace
                this.dispatchAdapter.dispatchBefore(t.DRIVE_PROGRESS, {
                  itemInfo: e,
                  currentLoaderData: u,
                  isLoader: !1,
                  driveName: l,
                  itemsLoaded: a,
                  itemsTotal: o,
                  driveIndex: c,
                  driveCount: h
                })
              }
          }
        }
      }, t.$getAnalyzer = function (e) {
        var i
        return t.$adapaterDic[e] ? i = new t.$adapaterDic[e] : console.error('!'), i
      }, t.prototype.$action_loader = function (e) {
        var i = this
        e.original_url = e.url
        var n = this.$checkParameter(e.url)
        if (n = this.$ns['ns_' + e.app_type] ? this.$ns['ns_' + e.app_type] + n : n, e.url = n, this.reModifyUrlCallback && (n = this.reModifyUrlCallback(n, e, this.$currentNameSpace)), t.RE_MODIFY_URL_CALLBACK && (n = t.RE_MODIFY_URL_CALLBACK(n, e, this.$currentNameSpace)), this.$currentLoaderItem = e, this.$loaderGroups.length) {
          this.$loaderGroups.shift()
          var r = t.$getAnalyzer(e.app_type)
          r.load(n, function (t, n) {
            e.url = n, i.$onResLoaded(t, n)
          }, this.$currentLoaderItem)
        }
      }, t.prototype.$onResLoaded = function (e, i) {
        if (this.$currentLoadedCount++, void 0 != e || null != e ? (this.$currentLoaderData = e, this.$doAssistAction(this.$currentLoaderItem.complite, this.$currentLoaderItem)) : (this.$doAssistAction(this.$currentLoaderItem.error, this.$currentLoaderItem), console.error(this.$currentNameSpace + ':' + i + '')), this.dispatchAdapter) {
          var n = this.$currentLoadedCount, r = this.$loaderCount, s = this.$currentProcessItemIndex + 1,
            a = this.$length, o = this.$currentLoaderItem, c = this.$currentNameSpace
          this.dispatchAdapter.dispatchBefore(t.LOADER_PROGRESS, {
            itemInfo: o,
            currentLoaderData: e,
            isLoader: !0,
            driveName: c,
            itemsLoaded: n,
            itemsTotal: r,
            driveIndex: s,
            driveCount: a
          })
        }
      }, t.prototype.$doAssistAction = function (t, e, i) {
        for (var n = t.split(','), r = [], s = 0; s < n.length; s++) r.push([n[s], e, i])
        this.$actions = r.concat(this.$actions), this.$doNextAssistAction()
      }, t.prototype.$doNextAssistAction = function () {
        if (this.$actions.length) {
          var t = this.$actions.shift()
          1 == t.length ? t[0]() : this.$createDoAssistAction.apply(this, t)
        } else {
          this.$nextAction()
        }
      }, t.prototype.$createDoAssistAction = function (t, e, i) {
        if ('{NULL}' != t) {
          var n = this.$assistDic[t]
          n ? (console.log('>>>>:' + t + ''), this.$action_class(n, i), parseInt(n.delay) || this.$doNextAssistAction()) : console.error(this.$currentNameSpace + ',assist ID:' + t + ' .')
        }
      }, t.prototype.setEnvironmentVariable = function (t) {
        this.$environmentVariableDic['{CURRENT_LOADER_DATA}'] = this.$getCurrentLoaderData, this.$environmentVariableDic['{CURRENT_LOADER_INFO}'] = this.$getCurrentLoaderInfo, this.$environmentVariableDic['{DATA}'] = this.$getReturnData, this.$environmentVariableDic['{NEXT_FUN}'] = this.$getNextDelegate, this.$environmentVariableDic['{THIS}'] = this, this.$environmentVariableDic['{EVENT_HANDLER}'] = this.$getFunction, this.$environmentVariableDic['{EVENT_HANDLER_VALUE}'] = null, this.$environmentVariableDic['{TRUE}'] = !0, this.$environmentVariableDic['{FALSE}'] = !1, this.$environmentVariableDic['{NULL}'] = null
        for (var e in t) this.$environmentVariableDic['{' + e + '}'] = t[e]
      }, t.prototype.$action_class = function (t, e) {
        var i, n, r, s = t.module, a = 0, o = 0
        if (r = this.$checkParameter(s), 'number' == typeof r || 'string' == typeof r && r == s && (r = null), r) {
          r.prototype || (n = r, r = null)
        } else {
          try {
            r = egret.getDefinitionByName(s), !r && window[s] && (r = window[s])
          } catch (c) {
            console.error(this.$currentNameSpace + ':' + s + '| ' + t + ' | ' + c.message)
          }
        }
        if (r || n) {
          e && (this.$environmentVariableDic['{EVENT_HANDLER_VALUE}'] = function () {
            return e.length && (o += e.length - 1, e.unshift(a), e.unshift(1), i.splice.apply(this, e)), e[0]
          })
          var h = t.static_fun_k, u = t.static_fun_v, l = t.static_k, p = t.static_v, d = t.instance_fun_k,
            $ = t.instance_fun_v, _ = t.instance_k, f = t.instance_v
          h ? (!r && n ? (r = n.constructor, this.$do_static_action(r, t, h, u)) : n = this.$do_static_action(r, t, h, u), d ? n = this.$do_instance_action(n, t, d, $, e) : _ && (n = this.$do_get_set_instance_action(n, t, _, f))) : l ? (!r && n ? (r = n.constructor, this.$do_get_set_static_action(r, t, l, p)) : n = this.$do_get_set_static_action(r, t, l, p), d ? n = this.$do_instance_action(n, t, d, $, e) : _ && (n = this.$do_get_set_instance_action(n, t, _, f))) : d ? n = this.$do_instance_action(n ? n : new r, t, d, $, e) : _ && (n = this.$do_get_set_instance_action(n ? n : new r, t, _, f)), this.$environmentVariableDic['{EVENT_HANDLER_VALUE}'] = null, this.$returnData = n
        } else {
          console.error(this.$currentNameSpace + ':' + s + '/n' + t)
        }
      }, t.prototype.$checkParameter = function (t) {
        if (this.$environmentVariableDic.hasOwnProperty(t)) return 'string' == typeof this.$environmentVariableDic[t] ? this.$environmentVariableDic[t] : this.$environmentVariableDic[t] instanceof Function ? this.$environmentVariableDic[t].apply(this) : this.$environmentVariableDic[t]
        if ('string' == typeof t && '{' == t.substr(0, 1) && '}' == t.substring(t.length - 1)) {
          var e = this.$returnData
          this.$returnData = null
          var i = t.substring(1, t.length - 1).split(','), n = i.shift()
          this.$doAssistAction(n, null, i), this.$returnData && (t = this.$returnData), this.$returnData = e
        }
        return t
      }, t.prototype.$do_get_set_instance_action = function (t, e, i, n, r) {
        void 0 === r && (r = null)
        var s, a = 0, o = 0
        if (n) {
          var c = n.split(','), h = []
          for (o = c.length, a = 0; o > a; a++) {
            if (c[a] = this.$checkParameter(c[a]), c[a] instanceof Function) {
              h.push(1)
              var u = 'event_handler_' + h.length
              c[a] = function () {
                for (var t = [], i = 0; i < arguments.length; i++) t[i] = arguments[i]
                this.$doAssistAction(e[u], e, t)
              }
            }
          }
          h = null
          try {
            t[i] = c[0]
          } catch (l) {
            console.error(t + '' + i + './n')
          }
          s = t[i]
        } else {
          try {
            s = t[i]
          } catch (l) {
            console.error(t + '' + i + './n')
          }
        }
        return s
      }, t.prototype.$do_get_set_static_action = function (t, e, i, n) {
        var r, s, a = 0, o = 0
        if (n) {
          s = n.split(','), o = s.length
          var c = []
          for (a = 0; o > a; a++) {
            if (s[a] = this.$checkParameter(s[a]), s[a] instanceof Function) {
              c.push(1)
              var h = 'event_handler_' + c.length
              s[a] = function () {
                for (var t = [], i = 0; i < arguments.length; i++) t[i] = arguments[i]
                this.$doAssistAction(e[h], e, t)
              }
            }
          }
          c = null
          try {
            t[i] = s[0]
          } catch (u) {
            console.error(this.$getClassName(t), '' + i + '.(' + s[0] + '),:/n')
          }
          r = t[i]
        } else {
          try {
            r = t[i]
          } catch (u) {
            console.error(this.$getClassName(t), '' + i + '.(' + s[0] + '),:/n')
          }
        }
        return r
      }, t.prototype.$do_instance_action = function (t, e, i, n, r) {
        void 0 === r && (r = null)
        var s, a, o = 0, c = 0
        if (n) {
          var h = n.split(','), u = []
          for (c = h.length, o = 0; c > o; o++) {
            if (h[o] = this.$checkParameter(h[o]), h[o] instanceof Function) {
              u.push(1)
              var l = 'event_handler_' + u.length, p = h[o]
              h[o] = this.$getCallback(l, p, e)
            }
          }
          u = null, a = t[i], a || console.error(t + '' + i + '.'), a == this.next ? (h = r.concat(h), s = a.apply(t, h)) : s = a.apply(t, h)
        } else {
          a = t[i], a || console.error(t + '' + i + '.'), s = a == this.next ? a.apply(t, r) : a.apply(t)
        }
        return s
      }, t.prototype.$do_static_action = function (t, e, i, n, r) {
        void 0 === r && (r = null)
        var s, a, o = 0, c = 0
        if (n) {
          a = n.split(','), c = a.length
          var h = []
          for (o = 0; c > o; o++) {
            if (a[o] = this.$checkParameter(a[o]), a[o] instanceof Function) {
              h.push(1)
              var u = 'event_handler_' + h.length, l = a[o]
              a[o] = this.$getCallback(u, l, e)
            }
          }
          h = null, t[i] || console.error(this.$getClassName(t), '' + i + '.'), s = t[i].apply(t, a)
        } else {
          t[i] || console.error(this.$getClassName(t), '' + i + '.'), s = t[i].apply(t)
        }
        return s
      }, t.prototype.$getCallback = function (t, e, i) {
        var n = this, r = function () {
          for (var r = [], s = 0; s < arguments.length; s++) r[s] = arguments[s]
          var a = i[t]
          a ? n.$doAssistAction(a, i, r) : (r.unshift(this), e.apply(n, r))
        }
        return r
      }, t.prototype.$getCurrentLoaderData = function () {
        return this.$currentLoaderData
      }, t.prototype.$getCurrentLoaderInfo = function () {
        return this.$currentLoaderItem
      }, t.prototype.$getFunction = function () {
        return this.$getFunction
      }, t.prototype.$getReturnData = function () {
        return this.$returnData
      }, t.prototype.$getNextDelegate = function () {
        var t = this
        return function () {
          t.next()
        }
      }, t.prototype.$getClassName = function (t) {
        return t.constructor.name
      }, t.BEGIN = 'begin', t.FINISHED = 'finished', t.LOADER_PROGRESS = 'loader_progress', t.DRIVE_PROGRESS = 'drive_progress', t.$applicationDriveDic = {}, t.$adapaterDic = {}, t
    }()
    t.ApplicationDrive = e, __reflect(e.prototype, 'plugin.applicationDrive.ApplicationDrive')
  }(e = t.applicationDrive || (t.applicationDrive = {}))
}(plugin || (plugin = {}))
var __reflect = this && this.__reflect || function (t, e, i) {
  t.__class__ = e, i ? i.push(e) : i = [e], t.__types__ = t.__types__ ? i.concat(t.__types__) : i
}, __extends = this && this.__extends || function (t, e) {
  function i () {
    this.constructor = t
  }

  for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
  i.prototype = e.prototype, t.prototype = new i
}, egretAdapter
!function (t) {
  var e = function (t) {
    function e () {
      return t.call(this) || this
    }

    return __extends(e, t), e.prototype.load = function (e, i, n) {
      var r = this
      t.prototype.load.call(this, e, i, n), 'group' == n.type ? (RES.loadConfig(e, 'resource/ui/'), BC.addOnceEvent(this, RES, RES.ResourceEvent.CONFIG_COMPLETE, function () {
        BC.addOnceEvent(r, RES, RES.ResourceEvent.GROUP_COMPLETE, function (t) {
          r.onLoadFinish({}, e)
        }), BC.addOnceEvent(r, RES, RES.ResourceEvent.GROUP_LOAD_ERROR, function (t) {
        }), RES.loadGroup(n.name)
      }), BC.addOnceEvent(this, RES, RES.ResourceEvent.CONFIG_LOAD_ERROR, function () {
      })) : RES.getResByUrl(e, this.onLoadFinish, this, n.type)
    }, e.prototype.onLoadFinish = function (e, i) {
      t.prototype.onLoadFinish.call(this, e, i)
    }, e.prototype.destroyRes = function (t, e) {
      RES.destroyRes(e)
    }, e
  }(plugin.applicationDrive.LoaderBaseAdapter)
  t.EgretLoaderAdapter = e, __reflect(e.prototype, 'egretAdapter.EgretLoaderAdapter')
  var i = function (t) {
    function e (e) {
      return t.call(this, e) || this
    }

    return __extends(e, t), e.prototype.dispatchBefore = function (t, e) {
      this.dispatchEventWith(t, !1, e)
    }, e
  }(egret.EventDispatcher)
  t.EgretDispatcherAdapter = i, __reflect(i.prototype, 'egretAdapter.EgretDispatcherAdapter', ['plugin.applicationDrive.IDriveDispatch'])
  var n = function (t) {
    function e (e, i, n) {
      return void 0 === i && (i = !1), void 0 === n && (n = !1), t.call(this, e, i, n) || this
    }

    return __extends(e, t), e.BEGIN = 'begin', e.FINISHED = 'finished', e.LOADER_PROGRESS = 'loader_progress', e.DRIVE_PROGRESS = 'drive_progress', e
  }(egret.Event)
  t.ApplicationDriveEvent = n, __reflect(n.prototype, 'egretAdapter.ApplicationDriveEvent')
}(egretAdapter || (egretAdapter = {}))
var plugin
!function (e) {
  var i = function () {
    function i (e) {
      this._version = 0, this._versionNameSpace = e
    }

    var t = (__define, i), r = t.prototype
    return r.close = function () {
    }, r.load = function (e) {
      this._fileURL = e, this._loadHeader()
    }, r._loadHeader = function () {
      var i = this, t = window, r = t.bootStrap.Ajax, n = e.PandaVersionManager.getInstance(this._versionNameSpace)
      n.hasHeader ? egret.Capabilities.runtimeType == egret.RuntimeType.NATIVE ? e.PandaVersionManager.addCallbackOnInitialize(this._loadBody, this) : this._loadBody() : r.get(this._fileURL).then(function (t) {
        var r = JSON.parse(t)
        i._version = r['zzz_config.txt'], n.header = t, n.flushHeader(r), egret.Capabilities.runtimeType == egret.RuntimeType.NATIVE ? e.PandaVersionManager.addCallbackOnInitialize(i._loadBody, i) : i._loadBody()
      }, function () {
        setTimeout(function () {
          i._loadHeader()
        }, 1e3)
      })
    }, r._loadBody = function () {
      var i = this, t = window, r = t.bootStrap.Ajax, n = e.PandaVersionManager.getInstance(this._versionNameSpace)
      if (n.hasBody) {
        this.onBodyLoadedFun()
      } else {
        var a = this._fileURL.split('?')[0].split('/').slice(0, -1).join('/'), o = a
        o = o + '/version/version' + this._version + '.swf', 0 == o.indexOf('/') && (o = o.slice(1)), r.get(o, 'arraybuffer').then(function (e) {
          n.file = e, i._onComplete(e, o)
        }, function () {
          setTimeout(function () {
            i._loadHeader()
          }, 1e3)
        })
      }
    }, r._ioErrorFun = function () {
      this.onLoadErrorFun()
    }, r._onComplete = function (i, t) {
      var r = this, n = function (i) {
        var t = JSON.parse(i), n = e.PandaVersionManager.getInstance(r._versionNameSpace)
        n.flushBody(t), r.onBodyLoadedFun()
      }
      if ('string' == typeof i) return void n(i)
      if (e.PandaVersionManager.HAS_DEDEN_NATIVE) {
        egret.ExternalInterface.addCallback('upzip', function (e) {
          var i = e.replace(/\.swf/, '/body')
          RES.getResByUrl(i, function (e, i) {
            n(e)
          }, r, RES.ResourceItem.TYPE_TEXT)
        }), egret.ExternalInterface.call('upzip', t)
      } else {
        try {
          var a = new JSZip
          a.loadAsync(i).then(function () {
            a.file('body').async('string').then(function (e) {
              n(e)
            })['catch'](function (e) {
              alert('e:' + e)
            })
          })
        } catch (o) {
          alert(o)
        }
      }
    }, i
  }()
  e.PandaVersionLoader = i, egret.registerClass(i, 'plugin.PandaVersionLoader')
}(plugin || (plugin = {}))
var plugin
!function (e) {
  var i = function () {
    function i (e) {
      this._headerObj = {}, this._lastModifiedTime = 0, this.vertionInfo = {}, this._hasBody = !1, this._hasHeader = !1, this.currentNameSpace = e, i.pvmDic[e] = this
    }

    var t = __define, r = i, n = r.prototype
    return n.getVersionView = function () {
      var e = this.lastModifiedDate,
        i = e.getFullYear() + '.' + (e.getMonth() + 1) + '.' + e.getDate() + ' ' + e.toLocaleTimeString()
      return i
    }, i.getInstance = function (e) {
      return void 0 === e && (e = 'all'), i.hasDoCheck || egret.Capabilities.runtimeType != egret.RuntimeType.NATIVE || i.HAS_DEDEN_NATIVE || (i.hasDoCheck = !0, egret.ExternalInterface.addCallback('checkHasDedenNative', function (e) {
        i.HAS_DEDEN_NATIVE = !0, i.$hasInitialize = !0, i.addCallbackOnInitialize(null)
      }), egret.ExternalInterface.call('checkHasDedenNative', '')), i.pvmDic[e] ? i.pvmDic[e] : new i(e)
    }, i.getVerURLByNameSpace = function (e, t, r, n) {
      if (void 0 === t && (t = !1), void 0 === r && (r = !1), void 0 === n && (n = 'all'), !e || -1 != e.search(/^\/|^\w+:\/\//)) return e
      var a = e.match(/(^[^\?]+)([^\r\n]*)/)
      if (a) {
        var o = a[1], s = (a[2], i.getInstance(n).getModifiedValue(o, r))
        s && (e = e.replace(/[^\/]+$/, function (e) {
          var i = ~~(s / 1e3), t = e.lastIndexOf('.')
          return e = -1 == t ? e + '.' + i : e.slice(0, t) + '.' + i + e.slice(t)
        })), t && (e = e + (-1 == e.indexOf('?') ? '?' : '&') + Date.now())
      }
      return i.RE_MODIFY_URL_CALLBACK && (e = i.RE_MODIFY_URL_CALLBACK(e)), i.DEBUG && console.log('[URL]', e, '-', s), e
    }, t(n, 'v', function () {
      return this._bodyObj ? +this._bodyObj.v : 0
    }), i.addCallbackOnInitialize = function (e, t) {
      var r = i.$addCallbackOnInitialize || []
      e && r.unshift([e, t || this]), i.$addCallbackOnInitialize = r, i.$hasInitialize && egret.callLater(function () {
        for (; r.length;) {
          var e = r.pop()
          e[0].call(e[1])
        }
      }, this)
    }, n.destroy = function () {
      i.pvmDic[this.currentNameSpace] = null, delete i.pvmDic[this.currentNameSpace], this._bodyObj = null, this._headerObj = null
    }, n.flushBody = function (e) {
      this._bodyObj = e, this._hasBody = !0
    }, t(n, 'hasBody', function () {
      return this._hasBody
    }), i.getModifiedValueByData = function (e) {
      var i = Array.isArray(e) ? +e[0] : +e
      return isNaN(i) ? 0 : i
    }, i.getSizeValueByData = function (e) {
      var i = Array.isArray(e) ? +e[1] : 0
      return isNaN(i) ? 0 : i
    }, i.getMD5ValueByData = function (e) {
      var i = Array.isArray(e) ? e[2] : null
      return i
    }, n.flushHeader = function (e) {
      this._headerObj = e, this._lastModifiedTime = 1e3 * i.getModifiedValueByData(e['zzz_config.txt']), this._hasHeader = !0
    }, t(n, 'hasHeader', function () {
      return this._hasHeader
    }), n.getModifiedDate = function (e, i) {
      return void 0 === i && (i = !0), new Date(this.getModifiedValue(e, i))
    }, n.getModifiedValue = function (e, i) {
      void 0 === i && (i = !1)
      var t = 0 / 0
      if (this._hasHeader && (t = this.getHeaderVersion(e)), !t && this._bodyObj) {
        if (+this._bodyObj.v >= 2) return 1e3 * this.getBodyVersionNumber(e, this._bodyObj.files, i)
        var r = e.split('/'), n = r.pop().split('?')[0], a = r.join('/'), o = this._bodyObj.folders[a],
          s = this._bodyObj.files[o + ':' + n]
        if (i) for (t = s ? +s : +this._bodyObj.folderTimeList[o]; !t && r.length;) r.pop(), a = r.join('/'), o = this._bodyObj.folders[a], t = +this._bodyObj.folderTimeList[o] else s && (t = +s)
      }
      return t ? t *= 1e3 : t = i ? 1e3 * this._bodyObj.version : 0, t
    }, n.getRevisionVersion = function (e) {
      var i = this.getFolderNOByPath(e)
      if (this.vertionInfo[i]) {
        var t = e.split('?')[0]
        return t = e.split('/').pop(), i = i + ':' + t, this.vertionInfo[i]
      }
      return 0
    }, n.getAllVersionUrl = function (e) {
      void 0 === e && (e = !1)
      var i = this.getVersionUrlByHeader(this._headerObj, '', e)
      return i = i.concat(this.getVersionUrlByBody(e))
    }, n.getVersionUrlByHeader = function (e, i, t) {
      var r = []
      if (+this._headerObj.v >= 2) {
        var n = this._headerObj.v
        delete this._headerObj.v
        var a, o
        if (t) {
          a = function (e, i) {
            for (var t in e) o = e[t], isNaN(o) ? Array.isArray(o) ? r.push(i + t) : a(o, i + t + '/') : ':mtime' != t && r.push(i + t)
          }
        } else {
          var s = function (e) {
            var i = e.split('?')
            e = i[0]
            var t = i[1], r = t, n = e.lastIndexOf('.')
            return e = -1 == n ? e + '.' + r : e.slice(0, n) + '.' + r + e.slice(n)
          }
          a = function (e, i) {
            for (var t in e) o = e[t], isNaN(o) ? Array.isArray(o) ? (t = t + '?' + o[0], t = t.replace(/[^\/]+$/, s), r.push(i + t)) : a(o, i + t + '/') : ':mtime' != t && (t = t + '?' + o, t = t.replace(/[^\/]+$/, s), r.push(i + t))
          }
        }
        return a(this._headerObj, ''), this._headerObj.v = n, r
      }
      var r = []
      if (t) for (var l in e) isNaN(+e[l]) ? r = r.concat(this.getVersionUrlByHeader(e[l], i + l + '/', t)) : r.push(i + l) else for (var l in e) isNaN(+e[l]) ? r = r.concat(this.getVersionUrlByHeader(e[l], i + l + '/', t)) : r.push(i + l + '?' + e[l].toString(36))
      return r
    }, n.getVersionUrlByBody = function (e) {
      var i = []
      if (+this._bodyObj.v >= 2) {
        var t, r
        if (e) {
          t = function (e, n) {
            for (var a in e) r = e[a], isNaN(r) ? Array.isArray(r) ? i.push(n + a) : t(r, n + a + '/') : ':mtime' != a && i.push(n + a)
          }
        } else {
          var n = function (e) {
            var i = e.split('?')
            e = i[0]
            var t = i[1], r = t, n = e.lastIndexOf('.')
            return e = -1 == n ? e + '.' + r : e.slice(0, n) + '.' + r + e.slice(n)
          }
          t = function (e, a) {
            for (var o in e) r = e[o], isNaN(r) ? Array.isArray(r) ? (o = o + '?' + r[0], o = o.replace(/[^\/]+$/, n), i.push(a + o)) : t(r, a + o + '/') : ':mtime' != o && (o = o + '?' + r, o = o.replace(/[^\/]+$/, n), i.push(a + o))
          }
        }
        return t(this._bodyObj.files, ''), i
      }
      var a = [], o = this._bodyObj.folders
      for (var s in o) a[o[s]] = s
      var l = this._bodyObj.files
      if (e) {
        for (var s in l) {
          var d = /(\d+):(.*)/.exec(s)
          d ? i.push(a[d[1]] + '/' + d[2]) : i.push(d[2])
        }
      } else {
        for (var s in l) {
          var d = /(\d+):(.*)/.exec(s)
          d ? i.push(a[d[1]] + '/' + d[2] + '?' + l[s].toString(36)) : i.push(d[2] + '?' + l[s].toString(36))
        }
      }
      return i
    }, n.getHeaderVersion = function (e) {
      if (0 == e.search(/^zzz_config\.txt/)) return 0
      var t = 0
      return this._headerObj.v >= 2 && (t = i.getModifiedValueByData(this._headerObj[e])), t ? t : this.getBodyVersionNumber(e, this._headerObj, !1)
    }, n.getBodyVersionNumber = function (e, t, r) {
      for (var n = e.split('/'), a = n.pop(), o = 0, s = t, l = n.length, d = 0; s && l > d; d++) s = s[n[d]]
      return s && (o = i.getModifiedValueByData(s[a])), 0 == o && r && (o = s && i.getModifiedValueByData(s[':mtime']) || this._lastModifiedTime / 1e3), o
    }, i.getFileValues = function (e, i) {
      for (var t, r = e.split('/'), n = r.pop(), a = i, o = r.length, s = 0; a && o > s; s++) a = a[r[s]]
      return a && (t = a[n]), t
    }, n.getFileSize = function (e) {
      try {
        var t = i.getFileValues(e, this._headerObj)
        return t || (t = i.getFileValues(e, this._bodyObj.files)), t = i.getSizeValueByData(t)
      } catch (r) {
        return 0
      }
    }, n.getFileMD5 = function (e) {
      try {
        var t = i.getFileValues(e, this._headerObj)
        return t || (t = i.getFileValues(e, this._bodyObj.files)), t = i.getMD5ValueByData(t)
      } catch (r) {
        return null
      }
    }, n.getFilesSize = function (e, i) {
      for (var t = e.length, r = 0, n = 0, a = 0; t > a; a++) {
        var o = e[a]
        n = this.getFileSize(o), n && i && !i(o) || (r += n)
      }
      return r
    }, n.getFolderNOByPath = function (e) {
      e = e.split('?')[0]
      var i = ''
      if (this._headerObj && this._headerObj[e] && (i = e), !i && this._bodyObj) {
        var t = e.split('/'), r = t.slice(0, t.length - 1).join('/'), n = (t[t.length - 1], this._bodyObj.folders[r])
        i = n
      }
      return i
    }, n.getVersionUrl = function (e, t, r) {
      return void 0 === t && (t = !1), void 0 === r && (r = !1), e = i.getVerURLByNameSpace(e, t, r, this.currentNameSpace)
    }, t(n, 'lastModifiedDate', function () {
      return new Date(this._lastModifiedTime)
    }), t(n, 'lastModifiedValue', function () {
      return this._lastModifiedTime
    }), n.load = function (i, t) {
      var r = this
      void 0 === t && (t = null), this.fileLoader = new e.PandaVersionLoader(this.currentNameSpace), this.fileLoader.onLoadErrorFun = function () {
        r.onLoadErrorFun.apply(r, [])
      }, this.fileLoader.onBodyLoadedFun = function () {
        r.onBodyLoaded.apply(r, [])
      }, this.fileLoader.load(i), this._onBodyLoadedFun = t
    }, n.onBodyLoaded = function () {
      this._onBodyLoadedFun && this._onBodyLoadedFun(), this.fileLoader.close(), this.fileLoader = null
    }, n.onLoadErrorFun = function () {
    }, n.onHeaderLoed = function () {
    }, i.getIncrementalFiles = function (e, i, t) {
      if (void 0 === i && (i = !1), void 0 === t && (t = !1), !e || e.length < 2) return []
      var r = e.slice()
      r.sort(function (e, i) {
        return e.lastModifiedValue < i.lastModifiedValue ? -1 : 1
      }), r = [r[0], r[r.length - 1]]
      var n, a, o = [], s = {}, l = r.shift()
      n = l.getAllVersionUrl(!0), a = n.length
      for (var d = 0; a > d; d++) {
        var u = n[d]
        s[u] = l.getModifiedValue(u)
      }
      for (; r.length;) {
        var h = r.shift()
        n = h.getAllVersionUrl(!0), a = n.length
        for (var d = 0; a > d; d++) {
          var u = n[d]
          s[u] ? s[u] != h.getModifiedValue(u) && (i ? o.push(u) : o.push(h.getVersionUrl(u, !1, !1))) : t || (i ? o.push(u) : o.push(h.getVersionUrl(u, !1, !1)))
        }
      }
      return o
    }, i.DEBUG = !1, i.HAS_DEDEN_NATIVE = !1, i.pvmDic = {}, i.hasDoCheck = !1, i.$hasInitialize = !1, i
  }()
  e.PandaVersionManager = i, egret.registerClass(i, 'plugin.PandaVersionManager', ['plugin.IPandaVersionManager'])
}(plugin || (plugin = {}))
var webgl2Support
!function (e) {
  var r = window.bootStrap, t = r.env
  if (t.isWebGL2 = !1, e.forceWebGL1 = 'webgl' === localStorage.getItem('forceRenderMode'), window.RELEASE && !navigator.gpu) {
    var o = navigator.userAgent.toLowerCase()
    if (o.indexOf('android') > -1) {
      var n = o.match(/android([^;]+)/)
      if (n && n[1]) {
        var a = n[1].trim()
        n[1].indexOf('.') > -1 && (a = a.split('.')[0])
        var i = +a
        10 >= i && (e.forceWebGL1 = !0)
      }
    }
  }
  if ('webgl' === t.egretOption.renderMode && !e.forceWebGL1) {
    var l = document.createElement('canvas')
    t.isWebGL2 = !!l.getContext('webgl2'), t.isWebGL2 && (egret.sys.getContextWebGL = function (e) {
      for (var r = {
        antialias: egret.web.WebGLRenderContext.antialias,
        powerPreference: 'high-performance',
        stencil: !0
      }, o = null, n = ['webgl2', 'webgl'], a = 0; a < n.length; ++a) {
        try {
          o = e.getContext(n[a], r)
        } catch (i) {
        }
        if (o) break
      }
      return o || egret.$error(1021), t.WebGL2RenderingContext = o, t.gl = o, ktx2Loader.setRenderingContext(o), o
    }, egret.web.EgretShaderLib.default_vert = '#version 300 es\nin vec2 aVertexPosition;\nin vec2 aTextureCoord;\nin vec4 aColor;\nuniform vec2 projectionVector;\n// uniform vec2 offsetVector;\nout vec2 vTextureCoord;\nout vec4 vColor;\nconst vec2 center = vec2(-1.0, 1.0);\nvoid main(void) {\n    gl_Position = vec4( (aVertexPosition / projectionVector) + center, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n    vColor = aColor;\n}\n                ', egret.web.EgretShaderLib.texture_frag = '#version 300 es\nprecision lowp float;\nin vec2 vTextureCoord;\nin vec4 vColor;\nuniform sampler2D uSampler;\nout vec4 outColor;\nvoid main(void) {\n    outColor = texture(uSampler, vTextureCoord) * vColor;\n}\n                ', egret.web.EgretShaderLib.colorTransform_frag = '#version 300 es\nprecision mediump float;\nin vec2 vTextureCoord;\nin vec4 vColor;\nuniform mat4 matrix;\nuniform vec4 colorAdd;\nuniform sampler2D uSampler;\nout vec4 outColor;\nvoid main(void) {\n    vec4 texColor = texture(uSampler, vTextureCoord);\n    if(texColor.a > 0.) {\n        texColor = vec4(texColor.rgb / texColor.a, texColor.a);\n    }\n    vec4 locColor = clamp(texColor * matrix + colorAdd, 0., 1.);\n    outColor = vColor * vec4(locColor.rgb * locColor.a, locColor.a);\n}\n                ', egret.web.EgretShaderLib.blur_frag = '#version 300 es\nprecision highp float;\nin vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float dist;\nuniform float angle;\nuniform vec4 color;\nuniform float alpha;\nuniform float blurX;\nuniform float blurY;\n// uniform vec4 quality;\n\nuniform float strength;\nuniform float inner;\nuniform float knockout;\nuniform float hideObject;\nuniform vec2 uTextureSize;\nout vec4  mColor;\nfloat random(vec2 scale) {\n    return fract(sin(dot(gl_FragCoord.xy, scale)) * 43758.5453);\n}\nvoid main(void) {\n    vec2 px = vec2(1.0 / uTextureSize.x, 1.0 / uTextureSize.y);\n    // TODO \n    \n    const float linearSamplingTimes = 7.0;\n    const float circleSamplingTimes = 12.0;\n    vec4 ownColor = texture(uSampler, vTextureCoord);\n    vec4 curColor;\n    float totalAlpha = 0.0;\n    float maxTotalAlpha = 0.0;\n    float curDistanceX = 0.0;\n    float curDistanceY = 0.0;\n    float offsetX = dist * cos(angle) * px.x;\n    float offsetY = dist * sin(angle) * px.y;\n    const float PI = 3.14159265358979323846264;\n    float cosAngle;\n    float sinAngle;\n    float offset = PI * 2.0 / circleSamplingTimes * random(vec2(12.9898, 78.233));\n    float stepX = blurX * px.x / linearSamplingTimes;\n    float stepY = blurY * px.y / linearSamplingTimes;\n    for (float a = 0.0; a <= PI * 2.0; a += PI * 2.0 / circleSamplingTimes) {\n        cosAngle = cos(a + offset);\n        sinAngle = sin(a + offset);\n        for (float i = 1.0; i <= linearSamplingTimes; i++) {\n            curDistanceX = i * stepX * cosAngle;\n            curDistanceY = i * stepY * sinAngle;\n            if (vTextureCoord.x + curDistanceX - offsetX >= 0.0 && vTextureCoord.y + curDistanceY + offsetY <= 1.0) {\n                curColor = texture(uSampler, vec2(vTextureCoord.x + curDistanceX - offsetX, vTextureCoord.y + curDistanceY + offsetY));\n                totalAlpha += (linearSamplingTimes - i) * curColor.a;\n            }\n            maxTotalAlpha += (linearSamplingTimes - i);\n        }\n\n    }\n    ownColor.a = max(ownColor.a, 0.0001);\n    ownColor.rgb = ownColor.rgb / ownColor.a;\n    float outerGlowAlpha = (totalAlpha / maxTotalAlpha) * strength * alpha * (1. - inner) * max(min(hideObject, knockout), 1. - ownColor.a);\n    float innerGlowAlpha = ((maxTotalAlpha - totalAlpha) / maxTotalAlpha) * strength * alpha * inner * ownColor.a;\n    ownColor.a = max(ownColor.a * knockout * (1. - hideObject), 0.0001);\n    vec3 mix1 = mix(ownColor.rgb, color.rgb, innerGlowAlpha / (innerGlowAlpha + ownColor.a));\n    vec3 mix2 = mix(mix1, color.rgb, outerGlowAlpha / (innerGlowAlpha + ownColor.a + outerGlowAlpha));\n    float resultAlpha = min(ownColor.a + outerGlowAlpha + innerGlowAlpha, 1.);\n    mColor = vec4(mix2 * resultAlpha, resultAlpha);\n}\n                 ', egret.web.EgretShaderLib.glow_frag = '#version 300 es\r\nprecision highp float;\r\nin vec2 vTextureCoord;\r\n\r\nuniform sampler2D uSampler;\r\n\r\nuniform float dist;\r\nuniform float angle;\r\nuniform vec4 color;\r\nuniform float alpha;\r\nuniform float blurX;\r\nuniform float blurY;\r\n// uniform vec4 quality;\r\nuniform float strength;\r\nuniform float inner;\r\nuniform float knockout;\r\nuniform float hideObject;\r\n\r\nuniform vec2 uTextureSize;\r\nout vec4 outColor;\r\n\r\nfloat random(vec2 scale)\r\n{\r\n    return fract(sin(dot(gl_FragCoord.xy, scale)) * 43758.5453);\r\n}\r\n\r\nvoid main(void) {\r\n    vec2 px = vec2(1.0 / uTextureSize.x, 1.0 / uTextureSize.y);\r\n    // TODO \r\n    const float linearSamplingTimes = 7.0;\r\n    const float circleSamplingTimes = 12.0;\r\n    vec4 ownColor = texture(uSampler, vTextureCoord);\r\n    vec4 curColor;\r\n    float totalAlpha = 0.0;\r\n    float maxTotalAlpha = 0.0;\r\n    float curDistanceX = 0.0;\r\n    float curDistanceY = 0.0;\r\n    float offsetX = dist * cos(angle) * px.x;\r\n    float offsetY = dist * sin(angle) * px.y;\r\n\r\n    const float PI = 3.14159265358979323846264;\r\n    float cosAngle;\r\n    float sinAngle;\r\n    float offset = PI * 2.0 / circleSamplingTimes * random(vec2(12.9898, 78.233));\r\n    float stepX = blurX * px.x / linearSamplingTimes;\r\n    float stepY = blurY * px.y / linearSamplingTimes;\r\n    for (float a = 0.0; a <= PI * 2.0; a += PI * 2.0 / circleSamplingTimes) {\r\n        cosAngle = cos(a + offset);\r\n        sinAngle = sin(a + offset);\r\n        for (float i = 1.0; i <= linearSamplingTimes; i++) {\r\n            curDistanceX = i * stepX * cosAngle;\r\n            curDistanceY = i * stepY * sinAngle;\r\n            if (vTextureCoord.x + curDistanceX - offsetX >= 0.0 && vTextureCoord.y + curDistanceY + offsetY <= 1.0){\r\n                curColor = texture(uSampler, vec2(vTextureCoord.x + curDistanceX - offsetX, vTextureCoord.y + curDistanceY + offsetY));\r\n                totalAlpha += (linearSamplingTimes - i) * curColor.a;\r\n            }\r\n            maxTotalAlpha += (linearSamplingTimes - i);\r\n        }\r\n    }\r\n\r\n    ownColor.a = max(ownColor.a, 0.0001);\r\n    ownColor.rgb = ownColor.rgb / ownColor.a;\r\n\r\n    float outerGlowAlpha = (totalAlpha / maxTotalAlpha) * strength * alpha * (1. - inner) * max(min(hideObject, knockout), 1. - ownColor.a);\r\n    float innerGlowAlpha = ((maxTotalAlpha - totalAlpha) / maxTotalAlpha) * strength * alpha * inner * ownColor.a;\r\n\r\n    ownColor.a = max(ownColor.a * knockout * (1. - hideObject), 0.0001);\r\n    vec3 mix1 = mix(ownColor.rgb, color.rgb, innerGlowAlpha / (innerGlowAlpha + ownColor.a));\r\n    vec3 mix2 = mix(mix1, color.rgb, outerGlowAlpha / (innerGlowAlpha + ownColor.a + outerGlowAlpha));\r\n    float resultAlpha = min(ownColor.a + outerGlowAlpha + innerGlowAlpha, 1.);\r\n    outColor = vec4(mix2 * resultAlpha, resultAlpha);\r\n}', egret.web.EgretShaderLib.primitive_frag = '#version 300 es\r\nprecision lowp float;\r\nin vec2 vTextureCoord;\r\nin vec4 vColor;\r\nout vec4 outColor;\r\n\r\nvoid main(void) {\r\n    outColor = vColor;\r\n}', egret.web.EgretShaderLib.texture_etc_alphamask_frag = '#version 300 es\r\nprecision lowp float;\r\nin vec2 vTextureCoord;\r\nin vec4 vColor;\r\nuniform sampler2D uSampler;\r\nuniform sampler2D uSamplerAlphaMask;\r\nout vec4 outColor;\r\nvoid main(void) {\r\nfloat alpha = texture(uSamplerAlphaMask, vTextureCoord).r;\r\nif (alpha < 0.0039) { discard; }\r\nvec4 v4Color = texture(uSampler, vTextureCoord);\r\nv4Color.rgb = v4Color.rgb * alpha;\r\nv4Color.a = alpha;\r\noutColor = v4Color * vColor;\r\n}', egret.web.EgretShaderLib.colorTransform_frag_etc_alphamask_frag = '#version 300 es\r\nprecision mediump float;\r\nin vec2 vTextureCoord;\r\nin vec4 vColor;\r\nuniform mat4 matrix;\r\nuniform vec4 colorAdd;\r\nuniform sampler2D uSampler;\r\nuniform sampler2D uSamplerAlphaMask;\r\nout vec4 outColor;\r\n\r\nvoid main(void){\r\nfloat alpha = texture(uSamplerAlphaMask, vTextureCoord).r;\r\nif (alpha < 0.0039) { discard; }\r\nvec4 texColor = texture(uSampler, vTextureCoord);\r\nif(texColor.a > 0.0) {\r\n // alpha\r\ntexColor = vec4(texColor.rgb / texColor.a, texColor.a);\r\n}\r\nvec4 v4Color = clamp(texColor * matrix + colorAdd, 0.0, 1.0);\r\nv4Color.rgb = v4Color.rgb * alpha;\r\nv4Color.a = alpha;\r\noutColor = v4Color * vColor;\r\n}')
  }
  t.isWebGL2 || (egret.sys.getContextWebGL = function (e) {
    for (var r = {
      antialias: egret.web.WebGLRenderContext.antialias,
      powerPreference: 'high-performance',
      stencil: !0
    }, o = null, n = ['webgl', 'experimental-webgl'], a = 0; a < n.length; ++a) {
      try {
        o = e.getContext(n[a], r)
      } catch (i) {
      }
      if (o) break
    }
    return o || egret.$error(1021), t.gl = o, ktx2Loader.setRenderingContext(o), o
  }), egret.web.EgretShaderLib.fallback_vert = egret.web.EgretShaderLib.default_vert, egret.web.EgretShaderLib.fallback_frag = egret.web.EgretShaderLib.texture_frag
}(webgl2Support || (webgl2Support = {}))
var webgl2Support
!function (e) {
  function r () {
    localStorage.setItem('webgl_info', 'true')
    var e = window.webgl_info_div
    if (e) return void document.body.appendChild(e)
    var r = document.createElement('script')
    r.type = 'text/javascript', r.onload = function () {
      var e = document.querySelector('.webgl-show-info')
      e.style.removeProperty('top'), e.style.background = 'none', e.style.textShadow = '0 0 5px rgb(0,0,0)', e.style.pointerEvents = 'none', e.style.bottom = '0', e.style.fontSize = '10px', window.webgl_info_div = e
    }, r.onerror = function (e) {
      console.error(e)
    }
    var t = '/config/webgl-show-info.js';
    ['s.61.com', 's-tyf.61.com', 's.test.61.com', 'splan-test.61.com'].indexOf(location.host) < 0 && (t = '/publish' + t), r.src = t, document.head.appendChild(r)
  }

  function t () {
    var e = document.querySelector('.webgl-show-info')
    e && e.parentNode && e.parentNode.removeChild(e), localStorage.removeItem('webgl_info')
  }

  function o () {
    var r = e.debugCount && e.debugCount.div
    r && document.body.appendChild(r)
  }

  function n () {
    var r = document.createElement('div')
    r.style.backgroundColor = 'rgba(0, 0, 0, 0.3)', r.style.color = 'white', r.style.padding = '0px 5px', r.style.fontSize = '10px', r.style.position = 'fixed', r.style.right = '0px', r.style.bottom = '0px', r.style.whiteSpace = 'pre-line', r.style.touchAction = 'none', r.style.pointerEvents = 'none', r.style.zIndex = '99999', e.debugCount.div = r
    var t, o = {
        set: function (e, t, o) {
          return e[t] = o, r.textContent = Object.keys(e).reduce(function (r, t) {
            return e[t] && !isNaN(e[t]) && (r += 'gpuMem' === t ? 'gpuMem:' + ktx2Loader.byteToMb(e[t]).toFixed(2) + 'mb\n' : t + ':' + e[t] + '\n'), r
          }, ''), !0
        }
      }, n = new Proxy(e.debugCount, o),
      a = window.WebGL2RenderingContext ? window.WebGL2RenderingContext.prototype : window.WebGLRenderingContext.prototype,
      i = a.bindTexture, l = a.createTexture, u = a.deleteTexture, c = a.createBuffer, s = a.deleteBuffer,
      d = a.createFramebuffer, g = a.deleteFramebuffer, f = a.createRenderbuffer, m = a.deleteRenderbuffer,
      v = a.createProgram, p = a.deleteProgram, h = a.createShader, x = a.deleteShader, b = a.texImage2D,
      C = a.compressedTexImage2D
    a.bindTexture = function (e, r) {
      return t = r, i.apply(this, arguments)
    }, a.texImage2D = function () {
      return t.internalFormat && (n.gpuMem -= ktx2Loader.calcGpuMemoryByInternalFormat(t.width, t.height, t.internalFormat, t.type)), 9 === arguments.length ? (t.internalFormat = arguments[2], t.width = arguments[3], t.height = arguments[4], t.type = arguments[7]) : 6 === arguments.length ? (t.internalFormat = arguments[2], t.type = arguments[4], arguments[5] ? (t.width = arguments[5].width, t.height = arguments[5].height) : t.width = t.height = 2) : console.warn(' ' + arguments.length), arguments[8] || arguments[5] ? n.gpuMem += ktx2Loader.calcGpuMemoryByInternalFormat(t.width, t.height, t.internalFormat, t.type) : delete t.internalFormat, ++n.texImage, b.apply(this, arguments)
    }, a.compressedTexImage2D = function () {
      return t.internalFormat && (n.gpuMem -= ktx2Loader.calcGpuMemoryByInternalFormat(t.width, t.height, t.internalFormat, t.type)), t.internalFormat = arguments[2], t.width = arguments[3], t.height = arguments[4], n.gpuMem += ktx2Loader.calcGpuMemoryByInternalFormat(t.width, t.height, t.internalFormat), ++n.texImageC, C.apply(this, arguments)
    }
    var S = 0, T = function () {
      return S++
    }
    a.createTexture = function () {
      var r = l.apply(this, arguments)
      if (r) {
        var t = T()
        r.uid = t, e.debugCount.textureList.push(r), n.texture = e.debugCount.textureList.length
      }
      return r
    }, a.deleteTexture = function (r) {
      if (r) {
        var t = e.debugCount.textureList.indexOf(r)
        t > -1 && (e.debugCount.textureList.splice(t, 1), n.texture = e.debugCount.textureList.length), r.internalFormat && (n.gpuMem -= ktx2Loader.calcGpuMemoryByInternalFormat(r.width, r.height, r.internalFormat, r.type), delete r.width, delete r.height, delete r.internalFormat, delete r.type)
      }
      u.apply(this, arguments)
    }, a.createBuffer = function () {
      return ++n.buffer, c.apply(this, arguments)
    }, a.deleteBuffer = function (e) {
      --n.buffer, s.apply(this, arguments)
    }, a.createFramebuffer = function () {
      return ++n.framebuffer, d.apply(this, arguments)
    }, a.deleteFramebuffer = function (e) {
      --n.framebuffer, g.apply(this, arguments)
    }, a.createRenderbuffer = function () {
      return ++n.renderbuffer, f.apply(this, arguments)
    }, a.deleteRenderbuffer = function (e) {
      --n.renderbuffer, m.apply(this, arguments)
    }, a.createProgram = function () {
      return ++n.program, v.apply(this, arguments)
    }, a.deleteProgram = function (e) {
      --n.program, p.apply(this, arguments)
    }, a.createShader = function (e) {
      return ++n.shader, h.apply(this, arguments)
    }, a.deleteShader = function (e) {
      --n.shader, x.apply(this, arguments)
    }
  }

  function a (r) {
    function t (e, r, t, o, n) {
      var a = r, i = r + o, l = t, u = t + n
      e.bufferData(e.ARRAY_BUFFER, new Float32Array([a, l, i, l, a, u, a, u, i, l, i, u]), e.STATIC_DRAW)
    }

    if (egret && egret.ticker.pause(), 'number' == typeof r && (r = e.debugCount.textureList.filter(function (e) {
      return e.uid === r
    })[0]), !r) {
      return void console.error('no texture given')
    }
    var o = MFC.entryInfo.WebGL2RenderingContext
    if (!u) {
      var n = '#version 300 es\n            in vec2 a_position;\n            in vec2 a_texCoord;\n            \n            uniform vec2 u_resolution;\n            \n            out vec2 v_texCoord;\n            \n            void main() {\n            \n              vec2 zeroToOne = a_position / u_resolution;\n            \n              // convert from 0->1 to 0->2\n              vec2 zeroToTwo = zeroToOne * 2.0;\n            \n              // convert from 0->2 to -1->+1 (clipspace)\n              vec2 clipSpace = zeroToTwo - 1.0;\n            \n              gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);\n            \n              v_texCoord = a_texCoord;\n            }\n            ',
        a = '#version 300 es\n            \n            precision highp float;\n            \n            uniform sampler2D u_image;\n            \n            in vec2 v_texCoord;\n            \n            out vec4 outColor;\n            \n            void main() {\n              outColor = texture(u_image, v_texCoord);\n            }\n            ',
        i = WebglUtils.createProgramFromSources(o, [n, a]), l = o.getAttribLocation(i, 'a_position'),
        s = o.getAttribLocation(i, 'a_texCoord'), d = o.getUniformLocation(i, 'u_resolution'),
        g = o.getUniformLocation(i, 'u_image'), f = o.createVertexArray()
      o.bindVertexArray(f)
      var m = o.createBuffer()
      o.enableVertexAttribArray(l), o.bindBuffer(o.ARRAY_BUFFER, m)
      var v = 2, p = o.FLOAT, h = !1, x = 0, b = 0
      o.vertexAttribPointer(l, v, p, h, x, b)
      var C = o.createBuffer()
      o.bindBuffer(o.ARRAY_BUFFER, C), o.bufferData(o.ARRAY_BUFFER, new Float32Array([0, 0, 1, 0, 0, 1, 0, 1, 1, 0, 1, 1]), o.STATIC_DRAW), o.enableVertexAttribArray(s)
      var v = 2, p = o.FLOAT, h = !1, x = 0, b = 0
      o.vertexAttribPointer(s, v, p, h, x, b), o.useProgram(i), o.bindVertexArray(f), o.uniform2f(d, o.canvas.width, o.canvas.height), o.uniform1i(g, 0), u = i, c = m
    }
    o.activeTexture(o.TEXTURE0 + 0), o.bindTexture(o.TEXTURE_2D, r), o.texParameteri(o.TEXTURE_2D, o.TEXTURE_WRAP_S, o.CLAMP_TO_EDGE), o.texParameteri(o.TEXTURE_2D, o.TEXTURE_WRAP_T, o.CLAMP_TO_EDGE), o.texParameteri(o.TEXTURE_2D, o.TEXTURE_MIN_FILTER, o.NEAREST), o.texParameteri(o.TEXTURE_2D, o.TEXTURE_MAG_FILTER, o.NEAREST), o.viewport(0, 0, o.canvas.width, o.canvas.height), o.clearColor(0, 0, 0, 0), o.clear(o.COLOR_BUFFER_BIT | o.DEPTH_BUFFER_BIT), o.bindBuffer(o.ARRAY_BUFFER, c)
    var S = r.__SPECTOR_Object_CustomData ? r.__SPECTOR_Object_CustomData : {width: 1024, height: 1024}, T = S.width,
      w = S.height, A = Math.max(0, Math.floor((o.canvas.width - T) / 2)),
      L = Math.max(0, Math.floor((o.canvas.height - w) / 2))
    t(o, A, L, T, w)
    var E = o.TRIANGLES, b = 0, y = 6
    o.drawArrays(E, b, y)
  }

  e.showWebglInfo = r, e.hideWebglInfo = t, 'true' === localStorage.getItem('webgl_info') && r(), e.debugCount = {
    texture: 0,
    texImage: 0,
    texImageC: 0,
    gpuMem: 0,
    buffer: 0,
    framebuffer: 0,
    renderbuffer: 0,
    program: 0,
    shader: 0,
    textureList: [],
    textureIds: function () {
      return Object.keys(e.debugCount.textureList).map(function (r) {
        return e.debugCount.textureList[r].uid
      })
    }
  }, e.showCountDiv = o, e.glCommandsCount = n
  var i = window.bootStrap, l = i.env
  'webgl' === l.egretOption.renderMode && (localStorage.getItem('show_debug_count') ? (n(), o()) : window.DEBUG && n())
  var u, c
  e.showTexture = a
}(webgl2Support || (webgl2Support = {}))
var webgl2Support
!function (e) {
  egret.web.WebGLRenderContext.prototype.uploadIndicesArray = function (e) {
    var r = this.context
    r.bufferData(r.ELEMENT_ARRAY_BUFFER, e, this.vao.isMesh() ? r.STREAM_DRAW : r.STATIC_DRAW), this.bindIndices = !0
  }, egret.web.WebGLRenderTarget.prototype.dispose = function () {
    var e = this.gl
    egret.WebGLUtils.deleteWebGLTexture(this.texture), this.frameBuffer && (e.deleteFramebuffer(this.frameBuffer), this.frameBuffer = null), this.stencilBuffer && (e.deleteRenderbuffer(this.stencilBuffer), this.stencilBuffer = null)
  }, egret.web.WebGLRenderBuffer.prototype.disableScissor = function () {
    if (this.$scissorState && (this.$scissorState = !1, this.scissorRect.setEmpty(), this.context.disableScissorTest()), this.rootRenderTarget && this.rootRenderTarget.stencilBuffer) {
      var e = this.rootRenderTarget.gl
      e.deleteRenderbuffer(this.rootRenderTarget.stencilBuffer), this.rootRenderTarget.stencilBuffer = null
    }
  }
  var r = window.bootStrap, t = r.env, o = function () {
    var e = navigator.userAgent.toLowerCase()
    return -1 != e.indexOf('mobile') || -1 != e.indexOf('android')
  }
  t.isApp || (egret.web.WebTouchHandler.prototype.addListeners = function () {
    var e = this, r = o(), t = function (r) {
      return function (t) {
        for (var o = t.changedTouches.length, n = 0; o > n; n++) e[r](t.changedTouches[n])
        e.prevent(t)
      }
    }, n = t('onTouchBegin'), a = t('onMouseMove'), i = t('onTouchEnd'), l = function () {
      e.canvas.removeEventListener('touchstart', n), e.canvas.removeEventListener('touchmove', a), e.canvas.removeEventListener('touchend', i), e.canvas.removeEventListener('touchcancel', i), e.canvas.removeEventListener('mousedown', e.onTouchBegin), e.canvas.removeEventListener('mousemove', e.onMouseMove), e.canvas.removeEventListener('mouseup', e.onTouchEnd), r ? (e.canvas.addEventListener('touchstart', n), e.canvas.addEventListener('touchmove', a), e.canvas.addEventListener('touchend', i), e.canvas.addEventListener('touchcancel', i)) : (e.canvas.addEventListener('mousedown', e.onTouchBegin), e.canvas.addEventListener('mousemove', e.onMouseMove), e.canvas.addEventListener('mouseup', e.onTouchEnd))
    }
    l(), window.addEventListener('resize', function () {
      setTimeout(function () {
        r !== o() && (r = o(), window.DEBUG && MFC && MFC.bubbleAlert && MFC.bubbleAlert.showAlert('' + (r ? '' : '') + '~'), l())
      }, 1e3)
    })
  }), (localStorage.getItem('webgl_dispose_test') || 'webgl' === t.egretOption.renderMode && !e.forceWebGL1) && (egret.DisplayObject.prototype.$setHasDisplayList = function (e) {
    var r = this, t = !!r.$displayList
    if (t != e) {
      if (r.$displayList && r.$displayList.renderBuffer && r.$displayList.renderBuffer.surface && r.$displayList.renderBuffer.surface.dispose(), e) {
        var o = egret.sys.DisplayList.create(r)
        o && (r.$displayList = o, r.$cacheDirty = !0)
      } else {
        r.$displayList = null
      }
    }
  }, egret.DisplayObject.prototype.$onAddToStage = function (e, r) {
    var t = this
    if (t.$stage = e, t.$nestLevel = r, t.$hasAddToStage = !0, t instanceof egret.TextField && !t.$renderNode && t.$renderDirty) {
      var o = new egret.sys.TextNode
      o.fontFamily = egret.TextField.default_fontFamily, t.textNode = o, t.$renderNode = o
    }
    egret.Sprite.$EVENT_ADD_TO_STAGE_LIST.push(t)
  }, egret.DisplayObject.prototype.$onRemoveFromStage = function () {
    var e = this
    e.$nestLevel = 0
    var r = e.$displayList
    if (r && r.renderBuffer && r.renderBuffer.surface && (r.renderBuffer.surface.dispose(), e.$displayList = null), e instanceof egret.TextField) {
      var t
      if (t = r ? r.$renderNode : e.$renderNode, t && t.$texture) {
        var o = egret.web.WebGLRenderContext.getInstance().context
        o && (t.cleanBeforeRender(), o.deleteTexture(t.$texture), t.$texture = null, r ? (r.$renderNode = null, r.$renderDirty = !0) : (e.$renderNode = null, e.$renderDirty = !0))
      }
    }
    egret.Sprite.$EVENT_REMOVE_FROM_STAGE_LIST.push(e)
  })
}(webgl2Support || (webgl2Support = {}))
var webgl2Support
!function (e) {
  function r (e, r, t) {
    var o = e.createShader(r)
    e.shaderSource(o, t), e.compileShader(o)
    var n = e.getShaderParameter(o, e.COMPILE_STATUS)
    return n || (console.log('shader not compiled! ' + r), console.log(e.getShaderInfoLog(o))), o
  }

  function t (e, r, t) {
    var o = e.createProgram()
    return e.attachShader(o, r), e.attachShader(o, t), e.linkProgram(o), o
  }

  function o (e, r) {
    for (var t = {}, o = e.getProgramParameter(r, e.ACTIVE_ATTRIBUTES), n = 0; o > n; n++) {
      var a = e.getActiveAttrib(r, n), i = a.name, l = new egret.web.EgretWebGLAttribute(e, r, a)
      t[i] = l
    }
    return t
  }

  function n (e, r) {
    for (var t = {}, o = e.getProgramParameter(r, e.ACTIVE_UNIFORMS), n = 0; o > n; n++) {
      var a = e.getActiveUniform(r, n), i = a.name, l = new egret.web.EgretWebGLUniform(e, r, a)
      t[i] = l
    }
    return t
  }

  var a = window.bootStrap, i = a.env,
    l = '\nattribute vec2 aVertexPosition;\nuniform vec2 projectionVector;\nconst vec2 center = vec2(-1.0, 1.0);\nvoid main(void) {\n    gl_Position = vec4( (aVertexPosition / projectionVector) + center, 0.0, 1.0);\n}\n    ',
    u = '\nprecision lowp float;\nvoid main(void) {\n    gl_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n}\n    ',
    c = '#version 300 es\nin vec2 aVertexPosition;\nuniform vec2 projectionVector;\nconst vec2 center = vec2(-1.0, 1.0);\nvoid main(void) {\n    gl_Position = vec4( (aVertexPosition / projectionVector) + center, 0.0, 1.0);\n}\n    ',
    s = '#version 300 es\nprecision lowp float;\nout vec4 outColor;\nvoid main(void) {\n    outColor = vec4(1.0, 0.0, 1.0, 1.0);\n}\n    '
  egret.web.EgretWebGLProgram.deleteProgram = function (e, r) {
    var t = this
    'string' == typeof r ? this.programCache[r] && (this.programCache[r].id && e.deleteProgram(this.programCache[r].id), delete this.programCache[r]) : (Object.keys(this.programCache).forEach(function (e) {
      t.programCache[e] === r && delete t.programCache[e]
    }), r && r.id && e.deleteProgram(r.id))
  }, egret.web.WebGLRenderContext.prototype.activeProgram = function (e, a) {
    if (a != this.currentProgram) {
      if (e.validateProgram(a.id), e.getProgramParameter(a.id, e.LINK_STATUS) && e.getProgramParameter(a.id, e.VALIDATE_STATUS)) {
        e.useProgram(a.id)
      } else {
        if (e.isContextLost && e.isContextLost()) return void console.error('WebGL context lost !')
        console.error('Shader ')
        var d = void 0, g = void 0
        for (var f in egret.web.EgretShaderLib) 'fallback_vert' !== f && 'fallback_frag' !== f && (egret.web.EgretShaderLib[f] === a.vshaderSource && (console.warn('VertexShader => egret.web.EgretShaderLib.' + f), d = f), egret.web.EgretShaderLib[f] === a.fshaderSource && (console.warn('FragmentShader => egret.web.EgretShaderLib.' + f), g = f))
        if (a.id ? console.warn('Program Info: ' + e.getProgramInfoLog(a.id)) : console.warn('Program '), a.vertexShader ? console.warn('VertexShader Info: ' + e.getShaderInfoLog(a.vertexShader)) : console.warn('VertexShader '), a.fragmentShader ? console.warn('FragmentShader Info: ' + e.getShaderInfoLog(a.fragmentShader)) : console.warn('FragmentShader '), egret.web.EgretWebGLProgram.deleteProgram(e, a), 'default_vert' === d && 'texture_frag' === g) {
          console.log(' texture Program'), a = egret.web.EgretWebGLProgram.getProgram(e, egret.web.EgretShaderLib.default_vert, egret.web.EgretShaderLib.texture_frag, 'texture'), e.validateProgram(a.id), e.getProgramParameter(a.id, e.LINK_STATUS) && e.getProgramParameter(a.id, e.VALIDATE_STATUS) && (e.useProgram(a.id), console.log(' texture Program '))
        } else {
          try {
            var m = i.isWebGL2 ? c : l, v = i.isWebGL2 ? s : u
            a.vshaderSource = m, a.fshaderSource = v, a.vertexShader = r(e, e.VERTEX_SHADER, a.vshaderSource), a.fragmentShader = r(e, e.FRAGMENT_SHADER, a.fshaderSource), a.id = t(e, a.vertexShader, a.fragmentShader), a.uniforms = n(e, a.id), a.attributes = o(e, a.id), e.validateProgram(a.id), e.getProgramParameter(a.id, e.LINK_STATUS) && e.getProgramParameter(a.id, e.VALIDATE_STATUS) && (e.useProgram(a.id), console.log(' Validate Program '))
          } catch (p) {
            return console.error('Create Validate Program Error'), console.error(p), a.id && a.id instanceof WebGLProgram && e.deleteProgram(a.id), a.vertexShader && a.vertexShader instanceof WebGLShader && e.deleteShader(a.vertexShader), void (a.fragmentShader && a.fragmentShader instanceof WebGLShader && e.deleteShader(a.fragmentShader))
          }
        }
        window.Sentry && window.Sentry.captureMessageAll('Shader v:' + d + ' f:' + g)
      }
      var h = a.attributes
      for (var f in h) 'aVertexPosition' === f ? (e.vertexAttribPointer(h.aVertexPosition.location, 2, e.FLOAT, !1, 20, 0), e.enableVertexAttribArray(h.aVertexPosition.location)) : 'aTextureCoord' === f ? (e.vertexAttribPointer(h.aTextureCoord.location, 2, e.FLOAT, !1, 20, 8), e.enableVertexAttribArray(h.aTextureCoord.location)) : 'aColor' === f && (e.vertexAttribPointer(h.aColor.location, 4, e.UNSIGNED_BYTE, !0, 20, 16), e.enableVertexAttribArray(h.aColor.location))
      this.currentProgram = a
    }
  }
}(webgl2Support || (webgl2Support = {}))
var WebglUtils
!function (e) {
  function r (e) {
    u.console && (u.console.error ? u.console.error(e) : u.console.log && u.console.log(e))
  }

  function t (e, r) {
    void 0 === r && (r = '')
    var t = r.matchAll(c).slice(), o = new Map(t.map(function (e, o) {
      var n = parseInt(e[1]), a = t[o + 1], i = a ? a.index : r.length, l = r.substring(e.index, i)
      return [n - 1, l]
    }))
    return e.split('\n').map(function (e, r) {
      var t = o.get(r)
      return r + 1 + ': ' + e + (t ? '\n\n^^^ ' + t : '')
    }).join('\n')
  }

  function o (e, o, n, a) {
    var i = a || r, l = e.createShader(n)
    e.shaderSource(l, o), e.compileShader(l)
    var u = e.getShaderParameter(l, e.COMPILE_STATUS)
    if (!u) {
      var c = e.getShaderInfoLog(l)
      return i('Error compiling shader: ' + c + '\n' + t(o, c)), e.deleteShader(l), null
    }
    return l
  }

  function n (e, o, n, i, l) {
    var u = l || r, c = e.createProgram()
    o.forEach(function (r) {
      e.attachShader(c, r)
    }), n && n.forEach(function (r, t) {
      e.bindAttribLocation(c, i ? i[t] : t, r)
    }), e.linkProgram(c)
    var s = e.getProgramParameter(c, e.LINK_STATUS)
    if (!s) {
      var d = e.getProgramInfoLog(c)
      return u('Error in program linking: ' + d + '\n' + o.map(function (r) {
        var o = t(e.getShaderSource(r)), n = e.getShaderParameter(r, e.SHADER_TYPE)
        return a(e, n) + ':\n' + o
      }).join('\n')), e.deleteProgram(c), null
    }
    return c
  }

  function a (e, r) {
    for (var t in e) if (e[t] === r) return t
    return null
  }

  function i (e, r, t, a, i) {
    for (var l = [], u = 0; u < r.length; ++u) l.push(o(e, r[u], e[s[u]], i))
    return n(e, l, t, a, i)
  }

  function l (e, r) {
    r = r || 1
    var t = e.clientWidth * r | 0, o = e.clientHeight * r | 0
    return e.width !== t || e.height !== o ? (e.width = t, e.height = o, !0) : !1
  }

  var u = window['this']
  e.error = r
  var c = /ERROR:\s*\d+:(\d+)/gi, s = ['VERTEX_SHADER', 'FRAGMENT_SHADER']
  e.createProgramFromSources = i, e.resizeCanvasToDisplaySize = l
}(WebglUtils || (WebglUtils = {}))
var glsl
!function (e) {
  e.sharpen_frag = '#version 300 es\nprecision lowp float;\n\nin vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nout vec4 outColor;\n\nvoid main() {\n    float amount = 0.1;\n\n    vec2 texSize   = vec2(textureSize(uSampler, 0).xy);\n    vec2 fragCoord = vTextureCoord * texSize;\n    // vec2 texCoord  = fragCoord / texSize;\n\n    float neighbor = amount * -1.0;\n    float center   = amount *  4.0 + 1.0;\n\n    vec3 color =\n        texture(uSampler, (fragCoord + vec2( 0,  1)) / texSize).rgb\n        * neighbor\n\n        + texture(uSampler, (fragCoord + vec2(-1,  0)) / texSize).rgb\n        * neighbor\n        + texture(uSampler, (fragCoord + vec2( 0,  0)) / texSize).rgb\n        * center\n        + texture(uSampler, (fragCoord + vec2( 1,  0)) / texSize).rgb\n        * neighbor\n\n        + texture(uSampler, (fragCoord + vec2( 0, -1)) / texSize).rgb\n        * neighbor\n        ;\n\n    outColor = vec4(color, texture(uSampler, vTextureCoord).a);\n}'
}(glsl || (glsl = {}))
var glsl
!function (e) {
  e.sharpen_vert = '#version 300 es\nin vec2 aVertexPosition;\nin vec2 aTextureCoord;\nuniform vec2 projectionVector;\nout vec2 vTextureCoord;\nconst vec2 center = vec2(-1.0, 1.0);\nvoid main(void) {\n    gl_Position = vec4( (aVertexPosition / projectionVector) + center, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}'
}(glsl || (glsl = {}))
!function (t, e) {
  'object' == typeof exports ? module.exports = exports = e() : 'function' == typeof define && define.amd ? define([], e) : t.CryptoJS = e()
}(this, function () {
  var t = t || function (t, e) {
    var r
    if ('undefined' != typeof window && window.crypto && (r = window.crypto), 'undefined' != typeof self && self.crypto && (r = self.crypto), 'undefined' != typeof globalThis && globalThis.crypto && (r = globalThis.crypto), !r && 'undefined' != typeof window && window.msCrypto && (r = window.msCrypto), !r && 'undefined' != typeof global && global.crypto && (r = global.crypto), !r && 'function' == typeof require) {
      try {
        r = require('crypto')
      } catch (t) {
      }
    }
    var i = function () {
      if (r) {
        if ('function' == typeof r.getRandomValues) {
          try {
            return r.getRandomValues(new Uint32Array(1))[0]
          } catch (t) {
          }
        }
        if ('function' == typeof r.randomBytes) {
          try {
            return r.randomBytes(4).readInt32LE()
          } catch (t) {
          }
        }
      }
      throw new Error('Native crypto module could not be used to get secure random number.')
    }, n = Object.create || function () {
      function t () {
      }

      return function (e) {
        var r
        return t.prototype = e, r = new t, t.prototype = null, r
      }
    }(), o = {}, s = o.lib = {}, a = s.Base = function () {
      return {
        extend: function (t) {
          var e = n(this)
          return t && e.mixIn(t), e.hasOwnProperty('init') && this.init !== e.init || (e.init = function () {
            e.$super.init.apply(this, arguments)
          }), e.init.prototype = e, e.$super = this, e
        }, create: function () {
          var t = this.extend()
          return t.init.apply(t, arguments), t
        }, init: function () {
        }, mixIn: function (t) {
          for (var e in t) t.hasOwnProperty(e) && (this[e] = t[e])
          t.hasOwnProperty('toString') && (this.toString = t.toString)
        }, clone: function () {
          return this.init.prototype.extend(this)
        }
      }
    }(), c = s.WordArray = a.extend({
      init: function (t, e) {
        t = this.words = t || [], this.sigBytes = void 0 != e ? e : 4 * t.length
      }, toString: function (t) {
        return (t || f).stringify(this)
      }, concat: function (t) {
        var e = this.words, r = t.words, i = this.sigBytes, n = t.sigBytes
        if (this.clamp(), i % 4) {
          for (var o = 0; o < n; o++) {
            var s = r[o >>> 2] >>> 24 - o % 4 * 8 & 255
            e[i + o >>> 2] |= s << 24 - (i + o) % 4 * 8
          }
        } else {
          for (var a = 0; a < n; a += 4) e[i + a >>> 2] = r[a >>> 2]
        }
        return this.sigBytes += n, this
      }, clamp: function () {
        var e = this.words, r = this.sigBytes
        e[r >>> 2] &= 4294967295 << 32 - r % 4 * 8, e.length = t.ceil(r / 4)
      }, clone: function () {
        var t = a.clone.call(this)
        return t.words = this.words.slice(0), t
      }, random: function (t) {
        for (var e = [], r = 0; r < t; r += 4) e.push(i())
        return new c.init(e, t)
      }
    }), h = o.enc = {}, f = h.Hex = {
      stringify: function (t) {
        for (var e = t.words, r = t.sigBytes, i = [], n = 0; n < r; n++) {
          var o = e[n >>> 2] >>> 24 - n % 4 * 8 & 255
          i.push((o >>> 4).toString(16)), i.push((15 & o).toString(16))
        }
        return i.join('')
      }, parse: function (t) {
        for (var e = t.length, r = [], i = 0; i < e; i += 2) r[i >>> 3] |= parseInt(t.substr(i, 2), 16) << 24 - i % 8 * 4
        return new c.init(r, e / 2)
      }
    }, l = h.Latin1 = {
      stringify: function (t) {
        for (var e = t.words, r = t.sigBytes, i = [], n = 0; n < r; n++) {
          var o = e[n >>> 2] >>> 24 - n % 4 * 8 & 255
          i.push(String.fromCharCode(o))
        }
        return i.join('')
      }, parse: function (t) {
        for (var e = t.length, r = [], i = 0; i < e; i++) r[i >>> 2] |= (255 & t.charCodeAt(i)) << 24 - i % 4 * 8
        return new c.init(r, e)
      }
    }, u = h.Utf8 = {
      stringify: function (t) {
        try {
          return decodeURIComponent(escape(l.stringify(t)))
        } catch (t) {
          throw new Error('Malformed UTF-8 data')
        }
      }, parse: function (t) {
        return l.parse(unescape(encodeURIComponent(t)))
      }
    }, d = s.BufferedBlockAlgorithm = a.extend({
      reset: function () {
        this._data = new c.init, this._nDataBytes = 0
      }, _append: function (t) {
        'string' == typeof t && (t = u.parse(t)), this._data.concat(t), this._nDataBytes += t.sigBytes
      }, _process: function (e) {
        var r, i = this._data, n = i.words, o = i.sigBytes, s = this.blockSize, a = o / (4 * s),
          h = (a = e ? t.ceil(a) : t.max((0 | a) - this._minBufferSize, 0)) * s, f = t.min(4 * h, o)
        if (h) {
          for (var l = 0; l < h; l += s) this._doProcessBlock(n, l)
          r = n.splice(0, h), i.sigBytes -= f
        }
        return new c.init(r, f)
      }, clone: function () {
        var t = a.clone.call(this)
        return t._data = this._data.clone(), t
      }, _minBufferSize: 0
    }), p = (s.Hasher = d.extend({
      cfg: a.extend(), init: function (t) {
        this.cfg = this.cfg.extend(t), this.reset()
      }, reset: function () {
        d.reset.call(this), this._doReset()
      }, update: function (t) {
        return this._append(t), this._process(), this
      }, finalize: function (t) {
        return t && this._append(t), this._doFinalize()
      }, blockSize: 16, _createHelper: function (t) {
        return function (e, r) {
          return new t.init(r).finalize(e)
        }
      }, _createHmacHelper: function (t) {
        return function (e, r) {
          return new p.HMAC.init(t, r).finalize(e)
        }
      }
    }), o.algo = {})
    return o
  }(Math)
  return function (e) {
    var r = t, i = r.lib, n = i.Base, o = i.WordArray, s = r.x64 = {}
    s.Word = n.extend({
      init: function (t, e) {
        this.high = t, this.low = e
      }
    }), s.WordArray = n.extend({
      init: function (t, e) {
        t = this.words = t || [], this.sigBytes = void 0 != e ? e : 8 * t.length
      }, toX32: function () {
        for (var t = this.words, e = t.length, r = [], i = 0; i < e; i++) {
          var n = t[i]
          r.push(n.high), r.push(n.low)
        }
        return o.create(r, this.sigBytes)
      }, clone: function () {
        for (var t = n.clone.call(this), e = t.words = this.words.slice(0), r = e.length, i = 0; i < r; i++) e[i] = e[i].clone()
        return t
      }
    })
  }(), function () {
    if ('function' == typeof ArrayBuffer) {
      var e = t.lib.WordArray, r = e.init;
      (e.init = function (t) {
        if (t instanceof ArrayBuffer && (t = new Uint8Array(t)), (t instanceof Int8Array || 'undefined' != typeof Uint8ClampedArray && t instanceof Uint8ClampedArray || t instanceof Int16Array || t instanceof Uint16Array || t instanceof Int32Array || t instanceof Uint32Array || t instanceof Float32Array || t instanceof Float64Array) && (t = new Uint8Array(t.buffer, t.byteOffset, t.byteLength)), t instanceof Uint8Array) {
          for (var e = t.byteLength, i = [], n = 0; n < e; n++) i[n >>> 2] |= t[n] << 24 - n % 4 * 8
          r.call(this, i, e)
        } else {
          r.apply(this, arguments)
        }
      }).prototype = e
    }
  }(), function () {
    function e (t) {
      return t << 8 & 4278255360 | t >>> 8 & 16711935
    }

    var r = t, i = r.lib.WordArray, n = r.enc
    n.Utf16 = n.Utf16BE = {
      stringify: function (t) {
        for (var e = t.words, r = t.sigBytes, i = [], n = 0; n < r; n += 2) {
          var o = e[n >>> 2] >>> 16 - n % 4 * 8 & 65535
          i.push(String.fromCharCode(o))
        }
        return i.join('')
      }, parse: function (t) {
        for (var e = t.length, r = [], n = 0; n < e; n++) r[n >>> 1] |= t.charCodeAt(n) << 16 - n % 2 * 16
        return i.create(r, 2 * e)
      }
    }
    n.Utf16LE = {
      stringify: function (t) {
        for (var r = t.words, i = t.sigBytes, n = [], o = 0; o < i; o += 2) {
          var s = e(r[o >>> 2] >>> 16 - o % 4 * 8 & 65535)
          n.push(String.fromCharCode(s))
        }
        return n.join('')
      }, parse: function (t) {
        for (var r = t.length, n = [], o = 0; o < r; o++) n[o >>> 1] |= e(t.charCodeAt(o) << 16 - o % 2 * 16)
        return i.create(n, 2 * r)
      }
    }
  }(), function () {
    function e (t, e, r) {
      for (var n = [], o = 0, s = 0; s < e; s++) {
        if (s % 4) {
          var a = r[t.charCodeAt(s - 1)] << s % 4 * 2 | r[t.charCodeAt(s)] >>> 6 - s % 4 * 2
          n[o >>> 2] |= a << 24 - o % 4 * 8, o++
        }
      }
      return i.create(n, o)
    }

    var r = t, i = r.lib.WordArray
    r.enc.Base64 = {
      stringify: function (t) {
        var e = t.words, r = t.sigBytes, i = this._map
        t.clamp()
        for (var n = [], o = 0; o < r; o += 3) for (var s = (e[o >>> 2] >>> 24 - o % 4 * 8 & 255) << 16 | (e[o + 1 >>> 2] >>> 24 - (o + 1) % 4 * 8 & 255) << 8 | e[o + 2 >>> 2] >>> 24 - (o + 2) % 4 * 8 & 255, a = 0; a < 4 && o + .75 * a < r; a++) n.push(i.charAt(s >>> 6 * (3 - a) & 63))
        var c = i.charAt(64)
        if (c) for (; n.length % 4;) n.push(c)
        return n.join('')
      }, parse: function (t) {
        var r = t.length, i = this._map, n = this._reverseMap
        if (!n) {
          n = this._reverseMap = []
          for (var o = 0; o < i.length; o++) n[i.charCodeAt(o)] = o
        }
        var s = i.charAt(64)
        if (s) {
          var a = t.indexOf(s);
          -1 !== a && (r = a)
        }
        return e(t, r, n)
      }, _map: 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/='
    }
  }(), function () {
    function e (t, e, r) {
      for (var n = [], o = 0, s = 0; s < e; s++) {
        if (s % 4) {
          var a = r[t.charCodeAt(s - 1)] << s % 4 * 2 | r[t.charCodeAt(s)] >>> 6 - s % 4 * 2
          n[o >>> 2] |= a << 24 - o % 4 * 8, o++
        }
      }
      return i.create(n, o)
    }

    var r = t, i = r.lib.WordArray
    r.enc.Base64url = {
      stringify: function (t, e) {
        void 0 === e && (e = !0)
        var r = t.words, i = t.sigBytes, n = e ? this._safe_map : this._map
        t.clamp()
        for (var o = [], s = 0; s < i; s += 3) for (var a = (r[s >>> 2] >>> 24 - s % 4 * 8 & 255) << 16 | (r[s + 1 >>> 2] >>> 24 - (s + 1) % 4 * 8 & 255) << 8 | r[s + 2 >>> 2] >>> 24 - (s + 2) % 4 * 8 & 255, c = 0; c < 4 && s + .75 * c < i; c++) o.push(n.charAt(a >>> 6 * (3 - c) & 63))
        var h = n.charAt(64)
        if (h) for (; o.length % 4;) o.push(h)
        return o.join('')
      },
      parse: function (t, r) {
        void 0 === r && (r = !0)
        var i = t.length, n = r ? this._safe_map : this._map, o = this._reverseMap
        if (!o) {
          o = this._reverseMap = []
          for (var s = 0; s < n.length; s++) o[n.charCodeAt(s)] = s
        }
        var a = n.charAt(64)
        if (a) {
          var c = t.indexOf(a);
          -1 !== c && (i = c)
        }
        return e(t, i, o)
      },
      _map: 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=',
      _safe_map: 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_'
    }
  }(), function (e) {
    function r (t, e, r, i, n, o, s) {
      var a = t + (e & r | ~e & i) + n + s
      return (a << o | a >>> 32 - o) + e
    }

    function i (t, e, r, i, n, o, s) {
      var a = t + (e & i | r & ~i) + n + s
      return (a << o | a >>> 32 - o) + e
    }

    function n (t, e, r, i, n, o, s) {
      var a = t + (e ^ r ^ i) + n + s
      return (a << o | a >>> 32 - o) + e
    }

    function o (t, e, r, i, n, o, s) {
      var a = t + (r ^ (e | ~i)) + n + s
      return (a << o | a >>> 32 - o) + e
    }

    var s = t, a = s.lib, c = a.WordArray, h = a.Hasher, f = s.algo, l = []
    !function () {
      for (var t = 0; t < 64; t++) l[t] = 4294967296 * e.abs(e.sin(t + 1)) | 0
    }()
    var u = f.MD5 = h.extend({
      _doReset: function () {
        this._hash = new c.init([1732584193, 4023233417, 2562383102, 271733878])
      }, _doProcessBlock: function (t, e) {
        for (var s = 0; s < 16; s++) {
          var a = e + s, c = t[a]
          t[a] = 16711935 & (c << 8 | c >>> 24) | 4278255360 & (c << 24 | c >>> 8)
        }
        var h = this._hash.words, f = t[e + 0], u = t[e + 1], d = t[e + 2], p = t[e + 3], _ = t[e + 4], v = t[e + 5],
          y = t[e + 6], g = t[e + 7], B = t[e + 8], w = t[e + 9], k = t[e + 10], m = t[e + 11], S = t[e + 12],
          x = t[e + 13], b = t[e + 14], A = t[e + 15], H = h[0], z = h[1], C = h[2], D = h[3]
        z = o(z = o(z = o(z = o(z = n(z = n(z = n(z = n(z = i(z = i(z = i(z = i(z = r(z = r(z = r(z = r(z, C = r(C, D = r(D, H = r(H, z, C, D, f, 7, l[0]), z, C, u, 12, l[1]), H, z, d, 17, l[2]), D, H, p, 22, l[3]), C = r(C, D = r(D, H = r(H, z, C, D, _, 7, l[4]), z, C, v, 12, l[5]), H, z, y, 17, l[6]), D, H, g, 22, l[7]), C = r(C, D = r(D, H = r(H, z, C, D, B, 7, l[8]), z, C, w, 12, l[9]), H, z, k, 17, l[10]), D, H, m, 22, l[11]), C = r(C, D = r(D, H = r(H, z, C, D, S, 7, l[12]), z, C, x, 12, l[13]), H, z, b, 17, l[14]), D, H, A, 22, l[15]), C = i(C, D = i(D, H = i(H, z, C, D, u, 5, l[16]), z, C, y, 9, l[17]), H, z, m, 14, l[18]), D, H, f, 20, l[19]), C = i(C, D = i(D, H = i(H, z, C, D, v, 5, l[20]), z, C, k, 9, l[21]), H, z, A, 14, l[22]), D, H, _, 20, l[23]), C = i(C, D = i(D, H = i(H, z, C, D, w, 5, l[24]), z, C, b, 9, l[25]), H, z, p, 14, l[26]), D, H, B, 20, l[27]), C = i(C, D = i(D, H = i(H, z, C, D, x, 5, l[28]), z, C, d, 9, l[29]), H, z, g, 14, l[30]), D, H, S, 20, l[31]), C = n(C, D = n(D, H = n(H, z, C, D, v, 4, l[32]), z, C, B, 11, l[33]), H, z, m, 16, l[34]), D, H, b, 23, l[35]), C = n(C, D = n(D, H = n(H, z, C, D, u, 4, l[36]), z, C, _, 11, l[37]), H, z, g, 16, l[38]), D, H, k, 23, l[39]), C = n(C, D = n(D, H = n(H, z, C, D, x, 4, l[40]), z, C, f, 11, l[41]), H, z, p, 16, l[42]), D, H, y, 23, l[43]), C = n(C, D = n(D, H = n(H, z, C, D, w, 4, l[44]), z, C, S, 11, l[45]), H, z, A, 16, l[46]), D, H, d, 23, l[47]), C = o(C, D = o(D, H = o(H, z, C, D, f, 6, l[48]), z, C, g, 10, l[49]), H, z, b, 15, l[50]), D, H, v, 21, l[51]), C = o(C, D = o(D, H = o(H, z, C, D, S, 6, l[52]), z, C, p, 10, l[53]), H, z, k, 15, l[54]), D, H, u, 21, l[55]), C = o(C, D = o(D, H = o(H, z, C, D, B, 6, l[56]), z, C, A, 10, l[57]), H, z, y, 15, l[58]), D, H, x, 21, l[59]), C = o(C, D = o(D, H = o(H, z, C, D, _, 6, l[60]), z, C, m, 10, l[61]), H, z, d, 15, l[62]), D, H, w, 21, l[63]), h[0] = h[0] + H | 0, h[1] = h[1] + z | 0, h[2] = h[2] + C | 0, h[3] = h[3] + D | 0
      }, _doFinalize: function () {
        var t = this._data, r = t.words, i = 8 * this._nDataBytes, n = 8 * t.sigBytes
        r[n >>> 5] |= 128 << 24 - n % 32
        var o = e.floor(i / 4294967296), s = i
        r[15 + (n + 64 >>> 9 << 4)] = 16711935 & (o << 8 | o >>> 24) | 4278255360 & (o << 24 | o >>> 8), r[14 + (n + 64 >>> 9 << 4)] = 16711935 & (s << 8 | s >>> 24) | 4278255360 & (s << 24 | s >>> 8), t.sigBytes = 4 * (r.length + 1), this._process()
        for (var a = this._hash, c = a.words, h = 0; h < 4; h++) {
          var f = c[h]
          c[h] = 16711935 & (f << 8 | f >>> 24) | 4278255360 & (f << 24 | f >>> 8)
        }
        return a
      }, clone: function () {
        var t = h.clone.call(this)
        return t._hash = this._hash.clone(), t
      }
    })
    s.MD5 = h._createHelper(u), s.HmacMD5 = h._createHmacHelper(u)
  }(Math), function () {
    var e = t, r = e.lib, i = r.WordArray, n = r.Hasher, o = [], s = e.algo.SHA1 = n.extend({
      _doReset: function () {
        this._hash = new i.init([1732584193, 4023233417, 2562383102, 271733878, 3285377520])
      }, _doProcessBlock: function (t, e) {
        for (var r = this._hash.words, i = r[0], n = r[1], s = r[2], a = r[3], c = r[4], h = 0; h < 80; h++) {
          if (h < 16) {
            o[h] = 0 | t[e + h]
          } else {
            var f = o[h - 3] ^ o[h - 8] ^ o[h - 14] ^ o[h - 16]
            o[h] = f << 1 | f >>> 31
          }
          var l = (i << 5 | i >>> 27) + c + o[h]
          l += h < 20 ? 1518500249 + (n & s | ~n & a) : h < 40 ? 1859775393 + (n ^ s ^ a) : h < 60 ? (n & s | n & a | s & a) - 1894007588 : (n ^ s ^ a) - 899497514, c = a, a = s, s = n << 30 | n >>> 2, n = i, i = l
        }
        r[0] = r[0] + i | 0, r[1] = r[1] + n | 0, r[2] = r[2] + s | 0, r[3] = r[3] + a | 0, r[4] = r[4] + c | 0
      }, _doFinalize: function () {
        var t = this._data, e = t.words, r = 8 * this._nDataBytes, i = 8 * t.sigBytes
        return e[i >>> 5] |= 128 << 24 - i % 32, e[14 + (i + 64 >>> 9 << 4)] = Math.floor(r / 4294967296), e[15 + (i + 64 >>> 9 << 4)] = r, t.sigBytes = 4 * e.length, this._process(), this._hash
      }, clone: function () {
        var t = n.clone.call(this)
        return t._hash = this._hash.clone(), t
      }
    })
    e.SHA1 = n._createHelper(s), e.HmacSHA1 = n._createHmacHelper(s)
  }(), function (e) {
    var r = t, i = r.lib, n = i.WordArray, o = i.Hasher, s = r.algo, a = [], c = []
    !function () {
      function t (t) {
        return 4294967296 * (t - (0 | t)) | 0
      }

      for (var r = 2, i = 0; i < 64;) {
        (function (t) {
          for (var r = e.sqrt(t), i = 2; i <= r; i++) if (!(t % i)) return !1
          return !0
        })(r) && (i < 8 && (a[i] = t(e.pow(r, .5))), c[i] = t(e.pow(r, 1 / 3)), i++), r++
      }
    }()
    var h = [], f = s.SHA256 = o.extend({
      _doReset: function () {
        this._hash = new n.init(a.slice(0))
      }, _doProcessBlock: function (t, e) {
        for (var r = this._hash.words, i = r[0], n = r[1], o = r[2], s = r[3], a = r[4], f = r[5], l = r[6], u = r[7], d = 0; d < 64; d++) {
          if (d < 16) {
            h[d] = 0 | t[e + d]
          } else {
            var p = h[d - 15], _ = (p << 25 | p >>> 7) ^ (p << 14 | p >>> 18) ^ p >>> 3, v = h[d - 2],
              y = (v << 15 | v >>> 17) ^ (v << 13 | v >>> 19) ^ v >>> 10
            h[d] = _ + h[d - 7] + y + h[d - 16]
          }
          var g = i & n ^ i & o ^ n & o, B = (i << 30 | i >>> 2) ^ (i << 19 | i >>> 13) ^ (i << 10 | i >>> 22),
            w = u + ((a << 26 | a >>> 6) ^ (a << 21 | a >>> 11) ^ (a << 7 | a >>> 25)) + (a & f ^ ~a & l) + c[d] + h[d]
          u = l, l = f, f = a, a = s + w | 0, s = o, o = n, n = i, i = w + (B + g) | 0
        }
        r[0] = r[0] + i | 0, r[1] = r[1] + n | 0, r[2] = r[2] + o | 0, r[3] = r[3] + s | 0, r[4] = r[4] + a | 0, r[5] = r[5] + f | 0, r[6] = r[6] + l | 0, r[7] = r[7] + u | 0
      }, _doFinalize: function () {
        var t = this._data, r = t.words, i = 8 * this._nDataBytes, n = 8 * t.sigBytes
        return r[n >>> 5] |= 128 << 24 - n % 32, r[14 + (n + 64 >>> 9 << 4)] = e.floor(i / 4294967296), r[15 + (n + 64 >>> 9 << 4)] = i, t.sigBytes = 4 * r.length, this._process(), this._hash
      }, clone: function () {
        var t = o.clone.call(this)
        return t._hash = this._hash.clone(), t
      }
    })
    r.SHA256 = o._createHelper(f), r.HmacSHA256 = o._createHmacHelper(f)
  }(Math), function () {
    var e = t, r = e.lib.WordArray, i = e.algo, n = i.SHA256, o = i.SHA224 = n.extend({
      _doReset: function () {
        this._hash = new r.init([3238371032, 914150663, 812702999, 4144912697, 4290775857, 1750603025, 1694076839, 3204075428])
      }, _doFinalize: function () {
        var t = n._doFinalize.call(this)
        return t.sigBytes -= 4, t
      }
    })
    e.SHA224 = n._createHelper(o), e.HmacSHA224 = n._createHmacHelper(o)
  }(), function () {
    function e () {
      return o.create.apply(o, arguments)
    }

    var r = t, i = r.lib.Hasher, n = r.x64, o = n.Word, s = n.WordArray, a = r.algo,
      c = [e(1116352408, 3609767458), e(1899447441, 602891725), e(3049323471, 3964484399), e(3921009573, 2173295548), e(961987163, 4081628472), e(1508970993, 3053834265), e(2453635748, 2937671579), e(2870763221, 3664609560), e(3624381080, 2734883394), e(310598401, 1164996542), e(607225278, 1323610764), e(1426881987, 3590304994), e(1925078388, 4068182383), e(2162078206, 991336113), e(2614888103, 633803317), e(3248222580, 3479774868), e(3835390401, 2666613458), e(4022224774, 944711139), e(264347078, 2341262773), e(604807628, 2007800933), e(770255983, 1495990901), e(1249150122, 1856431235), e(1555081692, 3175218132), e(1996064986, 2198950837), e(2554220882, 3999719339), e(2821834349, 766784016), e(2952996808, 2566594879), e(3210313671, 3203337956), e(3336571891, 1034457026), e(3584528711, 2466948901), e(113926993, 3758326383), e(338241895, 168717936), e(666307205, 1188179964), e(773529912, 1546045734), e(1294757372, 1522805485), e(1396182291, 2643833823), e(1695183700, 2343527390), e(1986661051, 1014477480), e(2177026350, 1206759142), e(2456956037, 344077627), e(2730485921, 1290863460), e(2820302411, 3158454273), e(3259730800, 3505952657), e(3345764771, 106217008), e(3516065817, 3606008344), e(3600352804, 1432725776), e(4094571909, 1467031594), e(275423344, 851169720), e(430227734, 3100823752), e(506948616, 1363258195), e(659060556, 3750685593), e(883997877, 3785050280), e(958139571, 3318307427), e(1322822218, 3812723403), e(1537002063, 2003034995), e(1747873779, 3602036899), e(1955562222, 1575990012), e(2024104815, 1125592928), e(2227730452, 2716904306), e(2361852424, 442776044), e(2428436474, 593698344), e(2756734187, 3733110249), e(3204031479, 2999351573), e(3329325298, 3815920427), e(3391569614, 3928383900), e(3515267271, 566280711), e(3940187606, 3454069534), e(4118630271, 4000239992), e(116418474, 1914138554), e(174292421, 2731055270), e(289380356, 3203993006), e(460393269, 320620315), e(685471733, 587496836), e(852142971, 1086792851), e(1017036298, 365543100), e(1126000580, 2618297676), e(1288033470, 3409855158), e(1501505948, 4234509866), e(1607167915, 987167468), e(1816402316, 1246189591)],
      h = []
    !function () {
      for (var t = 0; t < 80; t++) h[t] = e()
    }()
    var f = a.SHA512 = i.extend({
      _doReset: function () {
        this._hash = new s.init([new o.init(1779033703, 4089235720), new o.init(3144134277, 2227873595), new o.init(1013904242, 4271175723), new o.init(2773480762, 1595750129), new o.init(1359893119, 2917565137), new o.init(2600822924, 725511199), new o.init(528734635, 4215389547), new o.init(1541459225, 327033209)])
      }, _doProcessBlock: function (t, e) {
        for (var r = this._hash.words, i = r[0], n = r[1], o = r[2], s = r[3], a = r[4], f = r[5], l = r[6], u = r[7], d = i.high, p = i.low, _ = n.high, v = n.low, y = o.high, g = o.low, B = s.high, w = s.low, k = a.high, m = a.low, S = f.high, x = f.low, b = l.high, A = l.low, H = u.high, z = u.low, C = d, D = p, E = _, R = v, M = y, F = g, P = B, W = w, O = k, I = m, U = S, K = x, X = b, L = A, j = H, T = z, N = 0; N < 80; N++) {
          var q, Z, V = h[N]
          if (N < 16) {
            Z = V.high = 0 | t[e + 2 * N], q = V.low = 0 | t[e + 2 * N + 1]
          } else {
            var G = h[N - 15], J = G.high, Q = G.low, Y = (J >>> 1 | Q << 31) ^ (J >>> 8 | Q << 24) ^ J >>> 7,
              $ = (Q >>> 1 | J << 31) ^ (Q >>> 8 | J << 24) ^ (Q >>> 7 | J << 25), tt = h[N - 2], et = tt.high,
              rt = tt.low, it = (et >>> 19 | rt << 13) ^ (et << 3 | rt >>> 29) ^ et >>> 6,
              nt = (rt >>> 19 | et << 13) ^ (rt << 3 | et >>> 29) ^ (rt >>> 6 | et << 26), ot = h[N - 7], st = ot.high,
              at = ot.low, ct = h[N - 16], ht = ct.high, ft = ct.low
            Z = (Z = (Z = Y + st + ((q = $ + at) >>> 0 < $ >>> 0 ? 1 : 0)) + it + ((q += nt) >>> 0 < nt >>> 0 ? 1 : 0)) + ht + ((q += ft) >>> 0 < ft >>> 0 ? 1 : 0), V.high = Z, V.low = q
          }
          var lt = O & U ^ ~O & X, ut = I & K ^ ~I & L, dt = C & E ^ C & M ^ E & M, pt = D & R ^ D & F ^ R & F,
            _t = (C >>> 28 | D << 4) ^ (C << 30 | D >>> 2) ^ (C << 25 | D >>> 7),
            vt = (D >>> 28 | C << 4) ^ (D << 30 | C >>> 2) ^ (D << 25 | C >>> 7),
            yt = (O >>> 14 | I << 18) ^ (O >>> 18 | I << 14) ^ (O << 23 | I >>> 9),
            gt = (I >>> 14 | O << 18) ^ (I >>> 18 | O << 14) ^ (I << 23 | O >>> 9), Bt = c[N], wt = Bt.high,
            kt = Bt.low, mt = T + gt,
            St = (St = (St = (St = j + yt + (mt >>> 0 < T >>> 0 ? 1 : 0)) + lt + ((mt = mt + ut) >>> 0 < ut >>> 0 ? 1 : 0)) + wt + ((mt = mt + kt) >>> 0 < kt >>> 0 ? 1 : 0)) + Z + ((mt = mt + q) >>> 0 < q >>> 0 ? 1 : 0),
            xt = vt + pt, bt = _t + dt + (xt >>> 0 < vt >>> 0 ? 1 : 0)
          j = X, T = L, X = U, L = K, U = O, K = I, O = P + St + ((I = W + mt | 0) >>> 0 < W >>> 0 ? 1 : 0) | 0, P = M, W = F, M = E, F = R, E = C, R = D, C = St + bt + ((D = mt + xt | 0) >>> 0 < mt >>> 0 ? 1 : 0) | 0
        }
        p = i.low = p + D, i.high = d + C + (p >>> 0 < D >>> 0 ? 1 : 0), v = n.low = v + R, n.high = _ + E + (v >>> 0 < R >>> 0 ? 1 : 0), g = o.low = g + F, o.high = y + M + (g >>> 0 < F >>> 0 ? 1 : 0), w = s.low = w + W, s.high = B + P + (w >>> 0 < W >>> 0 ? 1 : 0), m = a.low = m + I, a.high = k + O + (m >>> 0 < I >>> 0 ? 1 : 0), x = f.low = x + K, f.high = S + U + (x >>> 0 < K >>> 0 ? 1 : 0), A = l.low = A + L, l.high = b + X + (A >>> 0 < L >>> 0 ? 1 : 0), z = u.low = z + T, u.high = H + j + (z >>> 0 < T >>> 0 ? 1 : 0)
      }, _doFinalize: function () {
        var t = this._data, e = t.words, r = 8 * this._nDataBytes, i = 8 * t.sigBytes
        return e[i >>> 5] |= 128 << 24 - i % 32, e[30 + (i + 128 >>> 10 << 5)] = Math.floor(r / 4294967296), e[31 + (i + 128 >>> 10 << 5)] = r, t.sigBytes = 4 * e.length, this._process(), this._hash.toX32()
      }, clone: function () {
        var t = i.clone.call(this)
        return t._hash = this._hash.clone(), t
      }, blockSize: 32
    })
    r.SHA512 = i._createHelper(f), r.HmacSHA512 = i._createHmacHelper(f)
  }(), function () {
    var e = t, r = e.x64, i = r.Word, n = r.WordArray, o = e.algo, s = o.SHA512, a = o.SHA384 = s.extend({
      _doReset: function () {
        this._hash = new n.init([new i.init(3418070365, 3238371032), new i.init(1654270250, 914150663), new i.init(2438529370, 812702999), new i.init(355462360, 4144912697), new i.init(1731405415, 4290775857), new i.init(2394180231, 1750603025), new i.init(3675008525, 1694076839), new i.init(1203062813, 3204075428)])
      }, _doFinalize: function () {
        var t = s._doFinalize.call(this)
        return t.sigBytes -= 16, t
      }
    })
    e.SHA384 = s._createHelper(a), e.HmacSHA384 = s._createHmacHelper(a)
  }(), function (e) {
    var r = t, i = r.lib, n = i.WordArray, o = i.Hasher, s = r.x64.Word, a = r.algo, c = [], h = [], f = []
    !function () {
      for (var t = 1, e = 0, r = 0; r < 24; r++) {
        c[t + 5 * e] = (r + 1) * (r + 2) / 2 % 64
        var i = (2 * t + 3 * e) % 5
        t = e % 5, e = i
      }
      for (t = 0; t < 5; t++) for (e = 0; e < 5; e++) h[t + 5 * e] = e + (2 * t + 3 * e) % 5 * 5
      for (var n = 1, o = 0; o < 24; o++) {
        for (var a = 0, l = 0, u = 0; u < 7; u++) {
          if (1 & n) {
            var d = (1 << u) - 1
            d < 32 ? l ^= 1 << d : a ^= 1 << d - 32
          }
          128 & n ? n = n << 1 ^ 113 : n <<= 1
        }
        f[o] = s.create(a, l)
      }
    }()
    var l = []
    !function () {
      for (var t = 0; t < 25; t++) l[t] = s.create()
    }()
    var u = a.SHA3 = o.extend({
      cfg: o.cfg.extend({outputLength: 512}), _doReset: function () {
        for (var t = this._state = [], e = 0; e < 25; e++) t[e] = new s.init
        this.blockSize = (1600 - 2 * this.cfg.outputLength) / 32
      }, _doProcessBlock: function (t, e) {
        for (var r = this._state, i = this.blockSize / 2, n = 0; n < i; n++) {
          var o = t[e + 2 * n], s = t[e + 2 * n + 1]
          o = 16711935 & (o << 8 | o >>> 24) | 4278255360 & (o << 24 | o >>> 8), s = 16711935 & (s << 8 | s >>> 24) | 4278255360 & (s << 24 | s >>> 8), (z = r[n]).high ^= s, z.low ^= o
        }
        for (var a = 0; a < 24; a++) {
          for (H = 0; H < 5; H++) {
            for (var u = 0, d = 0, p = 0; p < 5; p++) u ^= (z = r[H + 5 * p]).high, d ^= z.low
            var _ = l[H]
            _.high = u, _.low = d
          }
          for (H = 0; H < 5; H++) for (var v = l[(H + 4) % 5], y = l[(H + 1) % 5], g = y.high, B = y.low, u = v.high ^ (g << 1 | B >>> 31), d = v.low ^ (B << 1 | g >>> 31), p = 0; p < 5; p++) (z = r[H + 5 * p]).high ^= u, z.low ^= d
          for (var w = 1; w < 25; w++) {
            var k = (z = r[w]).high, m = z.low, S = c[w]
            S < 32 ? (u = k << S | m >>> 32 - S, d = m << S | k >>> 32 - S) : (u = m << S - 32 | k >>> 64 - S, d = k << S - 32 | m >>> 64 - S)
            var x = l[h[w]]
            x.high = u, x.low = d
          }
          var b = l[0], A = r[0]
          b.high = A.high, b.low = A.low
          for (var H = 0; H < 5; H++) {
            for (p = 0; p < 5; p++) {
              var z = r[w = H + 5 * p], C = l[w], D = l[(H + 1) % 5 + 5 * p], E = l[(H + 2) % 5 + 5 * p]
              z.high = C.high ^ ~D.high & E.high, z.low = C.low ^ ~D.low & E.low
            }
          }
          var z = r[0], R = f[a]
          z.high ^= R.high, z.low ^= R.low
        }
      }, _doFinalize: function () {
        var t = this._data, r = t.words, i = (this._nDataBytes, 8 * t.sigBytes), o = 32 * this.blockSize
        r[i >>> 5] |= 1 << 24 - i % 32, r[(e.ceil((i + 1) / o) * o >>> 5) - 1] |= 128, t.sigBytes = 4 * r.length, this._process()
        for (var s = this._state, a = this.cfg.outputLength / 8, c = a / 8, h = [], f = 0; f < c; f++) {
          var l = s[f], u = l.high, d = l.low
          u = 16711935 & (u << 8 | u >>> 24) | 4278255360 & (u << 24 | u >>> 8), d = 16711935 & (d << 8 | d >>> 24) | 4278255360 & (d << 24 | d >>> 8), h.push(d), h.push(u)
        }
        return new n.init(h, a)
      }, clone: function () {
        for (var t = o.clone.call(this), e = t._state = this._state.slice(0), r = 0; r < 25; r++) e[r] = e[r].clone()
        return t
      }
    })
    r.SHA3 = o._createHelper(u), r.HmacSHA3 = o._createHmacHelper(u)
  }(Math), function (e) {
    function r (t, e, r) {
      return t ^ e ^ r
    }

    function i (t, e, r) {
      return t & e | ~t & r
    }

    function n (t, e, r) {
      return (t | ~e) ^ r
    }

    function o (t, e, r) {
      return t & r | e & ~r
    }

    function s (t, e, r) {
      return t ^ (e | ~r)
    }

    function a (t, e) {
      return t << e | t >>> 32 - e
    }

    var c = t, h = c.lib, f = h.WordArray, l = h.Hasher, u = c.algo,
      d = f.create([0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 7, 4, 13, 1, 10, 6, 15, 3, 12, 0, 9, 5, 2, 14, 11, 8, 3, 10, 14, 4, 9, 15, 8, 1, 2, 7, 0, 6, 13, 11, 5, 12, 1, 9, 11, 10, 0, 8, 12, 4, 13, 3, 7, 15, 14, 5, 6, 2, 4, 0, 5, 9, 7, 12, 2, 10, 14, 1, 3, 8, 11, 6, 15, 13]),
      p = f.create([5, 14, 7, 0, 9, 2, 11, 4, 13, 6, 15, 8, 1, 10, 3, 12, 6, 11, 3, 7, 0, 13, 5, 10, 14, 15, 8, 12, 4, 9, 1, 2, 15, 5, 1, 3, 7, 14, 6, 9, 11, 8, 12, 2, 10, 0, 4, 13, 8, 6, 4, 1, 3, 11, 15, 0, 5, 12, 2, 13, 9, 7, 10, 14, 12, 15, 10, 4, 1, 5, 8, 7, 6, 2, 13, 14, 0, 3, 9, 11]),
      _ = f.create([11, 14, 15, 12, 5, 8, 7, 9, 11, 13, 14, 15, 6, 7, 9, 8, 7, 6, 8, 13, 11, 9, 7, 15, 7, 12, 15, 9, 11, 7, 13, 12, 11, 13, 6, 7, 14, 9, 13, 15, 14, 8, 13, 6, 5, 12, 7, 5, 11, 12, 14, 15, 14, 15, 9, 8, 9, 14, 5, 6, 8, 6, 5, 12, 9, 15, 5, 11, 6, 8, 13, 12, 5, 12, 13, 14, 11, 8, 5, 6]),
      v = f.create([8, 9, 9, 11, 13, 15, 15, 5, 7, 7, 8, 11, 14, 14, 12, 6, 9, 13, 15, 7, 12, 8, 9, 11, 7, 7, 12, 7, 6, 15, 13, 11, 9, 7, 15, 11, 8, 6, 6, 14, 12, 13, 5, 14, 13, 13, 7, 5, 15, 5, 8, 11, 14, 14, 6, 14, 6, 9, 12, 9, 12, 5, 15, 8, 8, 5, 12, 9, 12, 5, 14, 6, 8, 13, 6, 5, 15, 13, 11, 11]),
      y = f.create([0, 1518500249, 1859775393, 2400959708, 2840853838]),
      g = f.create([1352829926, 1548603684, 1836072691, 2053994217, 0]), B = u.RIPEMD160 = l.extend({
        _doReset: function () {
          this._hash = f.create([1732584193, 4023233417, 2562383102, 271733878, 3285377520])
        }, _doProcessBlock: function (t, e) {
          for (F = 0; F < 16; F++) {
            var c = e + F, h = t[c]
            t[c] = 16711935 & (h << 8 | h >>> 24) | 4278255360 & (h << 24 | h >>> 8)
          }
          var f, l, u, B, w, k, m, S, x, b, A = this._hash.words, H = y.words, z = g.words, C = d.words, D = p.words,
            E = _.words, R = v.words
          k = f = A[0], m = l = A[1], S = u = A[2], x = B = A[3], b = w = A[4]
          for (var M, F = 0; F < 80; F += 1) M = f + t[e + C[F]] | 0, M += F < 16 ? r(l, u, B) + H[0] : F < 32 ? i(l, u, B) + H[1] : F < 48 ? n(l, u, B) + H[2] : F < 64 ? o(l, u, B) + H[3] : s(l, u, B) + H[4], M = (M = a(M |= 0, E[F])) + w | 0, f = w, w = B, B = a(u, 10), u = l, l = M, M = k + t[e + D[F]] | 0, M += F < 16 ? s(m, S, x) + z[0] : F < 32 ? o(m, S, x) + z[1] : F < 48 ? n(m, S, x) + z[2] : F < 64 ? i(m, S, x) + z[3] : r(m, S, x) + z[4], M = (M = a(M |= 0, R[F])) + b | 0, k = b, b = x, x = a(S, 10), S = m, m = M
          M = A[1] + u + x | 0, A[1] = A[2] + B + b | 0, A[2] = A[3] + w + k | 0, A[3] = A[4] + f + m | 0, A[4] = A[0] + l + S | 0, A[0] = M
        }, _doFinalize: function () {
          var t = this._data, e = t.words, r = 8 * this._nDataBytes, i = 8 * t.sigBytes
          e[i >>> 5] |= 128 << 24 - i % 32, e[14 + (i + 64 >>> 9 << 4)] = 16711935 & (r << 8 | r >>> 24) | 4278255360 & (r << 24 | r >>> 8), t.sigBytes = 4 * (e.length + 1), this._process()
          for (var n = this._hash, o = n.words, s = 0; s < 5; s++) {
            var a = o[s]
            o[s] = 16711935 & (a << 8 | a >>> 24) | 4278255360 & (a << 24 | a >>> 8)
          }
          return n
        }, clone: function () {
          var t = l.clone.call(this)
          return t._hash = this._hash.clone(), t
        }
      })
    c.RIPEMD160 = l._createHelper(B), c.HmacRIPEMD160 = l._createHmacHelper(B)
  }(Math), function () {
    var e = t, r = e.lib.Base, i = e.enc.Utf8
    e.algo.HMAC = r.extend({
      init: function (t, e) {
        t = this._hasher = new t.init, 'string' == typeof e && (e = i.parse(e))
        var r = t.blockSize, n = 4 * r
        e.sigBytes > n && (e = t.finalize(e)), e.clamp()
        for (var o = this._oKey = e.clone(), s = this._iKey = e.clone(), a = o.words, c = s.words, h = 0; h < r; h++) a[h] ^= 1549556828, c[h] ^= 909522486
        o.sigBytes = s.sigBytes = n, this.reset()
      }, reset: function () {
        var t = this._hasher
        t.reset(), t.update(this._iKey)
      }, update: function (t) {
        return this._hasher.update(t), this
      }, finalize: function (t) {
        var e = this._hasher, r = e.finalize(t)
        return e.reset(), e.finalize(this._oKey.clone().concat(r))
      }
    })
  }(), function () {
    var e = t, r = e.lib, i = r.Base, n = r.WordArray, o = e.algo, s = o.SHA1, a = o.HMAC, c = o.PBKDF2 = i.extend({
      cfg: i.extend({keySize: 4, hasher: s, iterations: 1}), init: function (t) {
        this.cfg = this.cfg.extend(t)
      }, compute: function (t, e) {
        for (var r = this.cfg, i = a.create(r.hasher, t), o = n.create(), s = n.create([1]), c = o.words, h = s.words, f = r.keySize, l = r.iterations; c.length < f;) {
          var u = i.update(e).finalize(s)
          i.reset()
          for (var d = u.words, p = d.length, _ = u, v = 1; v < l; v++) {
            _ = i.finalize(_), i.reset()
            for (var y = _.words, g = 0; g < p; g++) d[g] ^= y[g]
          }
          o.concat(u), h[0]++
        }
        return o.sigBytes = 4 * f, o
      }
    })
    e.PBKDF2 = function (t, e, r) {
      return c.create(r).compute(t, e)
    }
  }(), function () {
    var e = t, r = e.lib, i = r.Base, n = r.WordArray, o = e.algo, s = o.MD5, a = o.EvpKDF = i.extend({
      cfg: i.extend({keySize: 4, hasher: s, iterations: 1}), init: function (t) {
        this.cfg = this.cfg.extend(t)
      }, compute: function (t, e) {
        for (var r, i = this.cfg, o = i.hasher.create(), s = n.create(), a = s.words, c = i.keySize, h = i.iterations; a.length < c;) {
          r && o.update(r), r = o.update(t).finalize(e), o.reset()
          for (var f = 1; f < h; f++) r = o.finalize(r), o.reset()
          s.concat(r)
        }
        return s.sigBytes = 4 * c, s
      }
    })
    e.EvpKDF = function (t, e, r) {
      return a.create(r).compute(t, e)
    }
  }(), t.lib.Cipher || function (e) {
    var r = t, i = r.lib, n = i.Base, o = i.WordArray, s = i.BufferedBlockAlgorithm, a = r.enc, c = (a.Utf8, a.Base64),
      h = r.algo.EvpKDF, f = i.Cipher = s.extend({
        cfg: n.extend(), createEncryptor: function (t, e) {
          return this.create(this._ENC_XFORM_MODE, t, e)
        }, createDecryptor: function (t, e) {
          return this.create(this._DEC_XFORM_MODE, t, e)
        }, init: function (t, e, r) {
          this.cfg = this.cfg.extend(r), this._xformMode = t, this._key = e, this.reset()
        }, reset: function () {
          s.reset.call(this), this._doReset()
        }, process: function (t) {
          return this._append(t), this._process()
        }, finalize: function (t) {
          return t && this._append(t), this._doFinalize()
        }, keySize: 4, ivSize: 4, _ENC_XFORM_MODE: 1, _DEC_XFORM_MODE: 2, _createHelper: function () {
          function t (t) {
            return 'string' == typeof t ? B : y
          }

          return function (e) {
            return {
              encrypt: function (r, i, n) {
                return t(i).encrypt(e, r, i, n)
              }, decrypt: function (r, i, n) {
                return t(i).decrypt(e, r, i, n)
              }
            }
          }
        }()
      }), l = (i.StreamCipher = f.extend({
        _doFinalize: function () {
          return this._process(!0)
        }, blockSize: 1
      }), r.mode = {}), u = i.BlockCipherMode = n.extend({
        createEncryptor: function (t, e) {
          return this.Encryptor.create(t, e)
        }, createDecryptor: function (t, e) {
          return this.Decryptor.create(t, e)
        }, init: function (t, e) {
          this._cipher = t, this._iv = e
        }
      }), d = l.CBC = function () {
        function t (t, r, i) {
          var n, o = this._iv
          o ? (n = o, this._iv = e) : n = this._prevBlock
          for (var s = 0; s < i; s++) t[r + s] ^= n[s]
        }

        var r = u.extend()
        return r.Encryptor = r.extend({
          processBlock: function (e, r) {
            var i = this._cipher, n = i.blockSize
            t.call(this, e, r, n), i.encryptBlock(e, r), this._prevBlock = e.slice(r, r + n)
          }
        }), r.Decryptor = r.extend({
          processBlock: function (e, r) {
            var i = this._cipher, n = i.blockSize, o = e.slice(r, r + n)
            i.decryptBlock(e, r), t.call(this, e, r, n), this._prevBlock = o
          }
        }), r
      }(), p = (r.pad = {}).Pkcs7 = {
        pad: function (t, e) {
          for (var r = 4 * e, i = r - t.sigBytes % r, n = i << 24 | i << 16 | i << 8 | i, s = [], a = 0; a < i; a += 4) s.push(n)
          var c = o.create(s, i)
          t.concat(c)
        }, unpad: function (t) {
          var e = 255 & t.words[t.sigBytes - 1 >>> 2]
          t.sigBytes -= e
        }
      }, _ = (i.BlockCipher = f.extend({
        cfg: f.cfg.extend({mode: d, padding: p}), reset: function () {
          var t
          f.reset.call(this)
          var e = this.cfg, r = e.iv, i = e.mode
          this._xformMode == this._ENC_XFORM_MODE ? t = i.createEncryptor : (t = i.createDecryptor, this._minBufferSize = 1), this._mode && this._mode.__creator == t ? this._mode.init(this, r && r.words) : (this._mode = t.call(i, this, r && r.words), this._mode.__creator = t)
        }, _doProcessBlock: function (t, e) {
          this._mode.processBlock(t, e)
        }, _doFinalize: function () {
          var t, e = this.cfg.padding
          return this._xformMode == this._ENC_XFORM_MODE ? (e.pad(this._data, this.blockSize), t = this._process(!0)) : (t = this._process(!0), e.unpad(t)), t
        }, blockSize: 4
      }), i.CipherParams = n.extend({
        init: function (t) {
          this.mixIn(t)
        }, toString: function (t) {
          return (t || this.formatter).stringify(this)
        }
      })), v = (r.format = {}).OpenSSL = {
        stringify: function (t) {
          var e = t.ciphertext, r = t.salt
          return (r ? o.create([1398893684, 1701076831]).concat(r).concat(e) : e).toString(c)
        }, parse: function (t) {
          var e, r = c.parse(t), i = r.words
          return 1398893684 == i[0] && 1701076831 == i[1] && (e = o.create(i.slice(2, 4)), i.splice(0, 4), r.sigBytes -= 16), _.create({
            ciphertext: r,
            salt: e
          })
        }
      }, y = i.SerializableCipher = n.extend({
        cfg: n.extend({format: v}), encrypt: function (t, e, r, i) {
          i = this.cfg.extend(i)
          var n = t.createEncryptor(r, i), o = n.finalize(e), s = n.cfg
          return _.create({
            ciphertext: o,
            key: r,
            iv: s.iv,
            algorithm: t,
            mode: s.mode,
            padding: s.padding,
            blockSize: t.blockSize,
            formatter: i.format
          })
        }, decrypt: function (t, e, r, i) {
          return i = this.cfg.extend(i), e = this._parse(e, i.format), t.createDecryptor(r, i).finalize(e.ciphertext)
        }, _parse: function (t, e) {
          return 'string' == typeof t ? e.parse(t, this) : t
        }
      }), g = (r.kdf = {}).OpenSSL = {
        execute: function (t, e, r, i) {
          i || (i = o.random(8))
          var n = h.create({keySize: e + r}).compute(t, i), s = o.create(n.words.slice(e), 4 * r)
          return n.sigBytes = 4 * e, _.create({key: n, iv: s, salt: i})
        }
      }, B = i.PasswordBasedCipher = y.extend({
        cfg: y.cfg.extend({kdf: g}), encrypt: function (t, e, r, i) {
          var n = (i = this.cfg.extend(i)).kdf.execute(r, t.keySize, t.ivSize)
          i.iv = n.iv
          var o = y.encrypt.call(this, t, e, n.key, i)
          return o.mixIn(n), o
        }, decrypt: function (t, e, r, i) {
          i = this.cfg.extend(i), e = this._parse(e, i.format)
          var n = i.kdf.execute(r, t.keySize, t.ivSize, e.salt)
          return i.iv = n.iv, y.decrypt.call(this, t, e, n.key, i)
        }
      })
  }(), t.mode.CFB = function () {
    function e (t, e, r, i) {
      var n, o = this._iv
      o ? (n = o.slice(0), this._iv = void 0) : n = this._prevBlock, i.encryptBlock(n, 0)
      for (var s = 0; s < r; s++) t[e + s] ^= n[s]
    }

    var r = t.lib.BlockCipherMode.extend()
    return r.Encryptor = r.extend({
      processBlock: function (t, r) {
        var i = this._cipher, n = i.blockSize
        e.call(this, t, r, n, i), this._prevBlock = t.slice(r, r + n)
      }
    }), r.Decryptor = r.extend({
      processBlock: function (t, r) {
        var i = this._cipher, n = i.blockSize, o = t.slice(r, r + n)
        e.call(this, t, r, n, i), this._prevBlock = o
      }
    }), r
  }(), t.mode.CTR = function () {
    var e = t.lib.BlockCipherMode.extend(), r = e.Encryptor = e.extend({
      processBlock: function (t, e) {
        var r = this._cipher, i = r.blockSize, n = this._iv, o = this._counter
        n && (o = this._counter = n.slice(0), this._iv = void 0)
        var s = o.slice(0)
        r.encryptBlock(s, 0), o[i - 1] = o[i - 1] + 1 | 0
        for (var a = 0; a < i; a++) t[e + a] ^= s[a]
      }
    })
    return e.Decryptor = r, e
  }(), t.mode.CTRGladman = function () {
    function e (t) {
      if (255 == (t >> 24 & 255)) {
        var e = t >> 16 & 255, r = t >> 8 & 255, i = 255 & t
        255 === e ? (e = 0, 255 === r ? (r = 0, 255 === i ? i = 0 : ++i) : ++r) : ++e, t = 0, t += e << 16, t += r << 8, t += i
      } else {
        t += 1 << 24
      }
      return t
    }

    function r (t) {
      return 0 === (t[0] = e(t[0])) && (t[1] = e(t[1])), t
    }

    var i = t.lib.BlockCipherMode.extend(), n = i.Encryptor = i.extend({
      processBlock: function (t, e) {
        var i = this._cipher, n = i.blockSize, o = this._iv, s = this._counter
        o && (s = this._counter = o.slice(0), this._iv = void 0), r(s)
        var a = s.slice(0)
        i.encryptBlock(a, 0)
        for (var c = 0; c < n; c++) t[e + c] ^= a[c]
      }
    })
    return i.Decryptor = n, i
  }(), t.mode.OFB = function () {
    var e = t.lib.BlockCipherMode.extend(), r = e.Encryptor = e.extend({
      processBlock: function (t, e) {
        var r = this._cipher, i = r.blockSize, n = this._iv, o = this._keystream
        n && (o = this._keystream = n.slice(0), this._iv = void 0), r.encryptBlock(o, 0)
        for (var s = 0; s < i; s++) t[e + s] ^= o[s]
      }
    })
    return e.Decryptor = r, e
  }(), t.mode.ECB = function () {
    var e = t.lib.BlockCipherMode.extend()
    return e.Encryptor = e.extend({
      processBlock: function (t, e) {
        this._cipher.encryptBlock(t, e)
      }
    }), e.Decryptor = e.extend({
      processBlock: function (t, e) {
        this._cipher.decryptBlock(t, e)
      }
    }), e
  }(), t.pad.AnsiX923 = {
    pad: function (t, e) {
      var r = t.sigBytes, i = 4 * e, n = i - r % i, o = r + n - 1
      t.clamp(), t.words[o >>> 2] |= n << 24 - o % 4 * 8, t.sigBytes += n
    }, unpad: function (t) {
      var e = 255 & t.words[t.sigBytes - 1 >>> 2]
      t.sigBytes -= e
    }
  }, t.pad.Iso10126 = {
    pad: function (e, r) {
      var i = 4 * r, n = i - e.sigBytes % i
      e.concat(t.lib.WordArray.random(n - 1)).concat(t.lib.WordArray.create([n << 24], 1))
    }, unpad: function (t) {
      var e = 255 & t.words[t.sigBytes - 1 >>> 2]
      t.sigBytes -= e
    }
  }, t.pad.Iso97971 = {
    pad: function (e, r) {
      e.concat(t.lib.WordArray.create([2147483648], 1)), t.pad.ZeroPadding.pad(e, r)
    }, unpad: function (e) {
      t.pad.ZeroPadding.unpad(e), e.sigBytes--
    }
  }, t.pad.ZeroPadding = {
    pad: function (t, e) {
      var r = 4 * e
      t.clamp(), t.sigBytes += r - (t.sigBytes % r || r)
    }, unpad: function (t) {
      for (var e = t.words, r = t.sigBytes - 1, r = t.sigBytes - 1; r >= 0; r--) {
        if (e[r >>> 2] >>> 24 - r % 4 * 8 & 255) {
          t.sigBytes = r + 1
          break
        }
      }
    }
  }, t.pad.NoPadding = {
    pad: function () {
    }, unpad: function () {
    }
  }, function (e) {
    var r = t, i = r.lib.CipherParams, n = r.enc.Hex
    r.format.Hex = {
      stringify: function (t) {
        return t.ciphertext.toString(n)
      }, parse: function (t) {
        var e = n.parse(t)
        return i.create({ciphertext: e})
      }
    }
  }(), function () {
    var e = t, r = e.lib.BlockCipher, i = e.algo, n = [], o = [], s = [], a = [], c = [], h = [], f = [], l = [],
      u = [], d = []
    !function () {
      for (var t = [], e = 0; e < 256; e++) t[e] = e < 128 ? e << 1 : e << 1 ^ 283
      for (var r = 0, i = 0, e = 0; e < 256; e++) {
        var p = i ^ i << 1 ^ i << 2 ^ i << 3 ^ i << 4
        p = p >>> 8 ^ 255 & p ^ 99, n[r] = p, o[p] = r
        var _ = t[r], v = t[_], y = t[v], g = 257 * t[p] ^ 16843008 * p
        s[r] = g << 24 | g >>> 8, a[r] = g << 16 | g >>> 16, c[r] = g << 8 | g >>> 24, h[r] = g
        g = 16843009 * y ^ 65537 * v ^ 257 * _ ^ 16843008 * r
        f[p] = g << 24 | g >>> 8, l[p] = g << 16 | g >>> 16, u[p] = g << 8 | g >>> 24, d[p] = g, r ? (r = _ ^ t[t[t[y ^ _]]], i ^= t[t[i]]) : r = i = 1
      }
    }()
    var p = [0, 1, 2, 4, 8, 16, 32, 64, 128, 27, 54], _ = i.AES = r.extend({
      _doReset: function () {
        if (!this._nRounds || this._keyPriorReset !== this._key) {
          for (var t = this._keyPriorReset = this._key, e = t.words, r = t.sigBytes / 4, i = 4 * ((this._nRounds = r + 6) + 1), o = this._keySchedule = [], s = 0; s < i; s++) s < r ? o[s] = e[s] : (h = o[s - 1], s % r ? r > 6 && s % r == 4 && (h = n[h >>> 24] << 24 | n[h >>> 16 & 255] << 16 | n[h >>> 8 & 255] << 8 | n[255 & h]) : (h = n[(h = h << 8 | h >>> 24) >>> 24] << 24 | n[h >>> 16 & 255] << 16 | n[h >>> 8 & 255] << 8 | n[255 & h], h ^= p[s / r | 0] << 24), o[s] = o[s - r] ^ h)
          for (var a = this._invKeySchedule = [], c = 0; c < i; c++) {
            s = i - c
            if (c % 4) h = o[s] else var h = o[s - 4]
            a[c] = c < 4 || s <= 4 ? h : f[n[h >>> 24]] ^ l[n[h >>> 16 & 255]] ^ u[n[h >>> 8 & 255]] ^ d[n[255 & h]]
          }
        }
      }, encryptBlock: function (t, e) {
        this._doCryptBlock(t, e, this._keySchedule, s, a, c, h, n)
      }, decryptBlock: function (t, e) {
        r = t[e + 1]
        t[e + 1] = t[e + 3], t[e + 3] = r, this._doCryptBlock(t, e, this._invKeySchedule, f, l, u, d, o)
        var r = t[e + 1]
        t[e + 1] = t[e + 3], t[e + 3] = r
      }, _doCryptBlock: function (t, e, r, i, n, o, s, a) {
        for (var c = this._nRounds, h = t[e] ^ r[0], f = t[e + 1] ^ r[1], l = t[e + 2] ^ r[2], u = t[e + 3] ^ r[3], d = 4, p = 1; p < c; p++) {
          var _ = i[h >>> 24] ^ n[f >>> 16 & 255] ^ o[l >>> 8 & 255] ^ s[255 & u] ^ r[d++],
            v = i[f >>> 24] ^ n[l >>> 16 & 255] ^ o[u >>> 8 & 255] ^ s[255 & h] ^ r[d++],
            y = i[l >>> 24] ^ n[u >>> 16 & 255] ^ o[h >>> 8 & 255] ^ s[255 & f] ^ r[d++],
            g = i[u >>> 24] ^ n[h >>> 16 & 255] ^ o[f >>> 8 & 255] ^ s[255 & l] ^ r[d++]
          h = _, f = v, l = y, u = g
        }
        var _ = (a[h >>> 24] << 24 | a[f >>> 16 & 255] << 16 | a[l >>> 8 & 255] << 8 | a[255 & u]) ^ r[d++],
          v = (a[f >>> 24] << 24 | a[l >>> 16 & 255] << 16 | a[u >>> 8 & 255] << 8 | a[255 & h]) ^ r[d++],
          y = (a[l >>> 24] << 24 | a[u >>> 16 & 255] << 16 | a[h >>> 8 & 255] << 8 | a[255 & f]) ^ r[d++],
          g = (a[u >>> 24] << 24 | a[h >>> 16 & 255] << 16 | a[f >>> 8 & 255] << 8 | a[255 & l]) ^ r[d++]
        t[e] = _, t[e + 1] = v, t[e + 2] = y, t[e + 3] = g
      }, keySize: 8
    })
    e.AES = r._createHelper(_)
  }(), function () {
    function e (t, e) {
      var r = (this._lBlock >>> t ^ this._rBlock) & e
      this._rBlock ^= r, this._lBlock ^= r << t
    }

    function r (t, e) {
      var r = (this._rBlock >>> t ^ this._lBlock) & e
      this._lBlock ^= r, this._rBlock ^= r << t
    }

    var i = t, n = i.lib, o = n.WordArray, s = n.BlockCipher, a = i.algo,
      c = [57, 49, 41, 33, 25, 17, 9, 1, 58, 50, 42, 34, 26, 18, 10, 2, 59, 51, 43, 35, 27, 19, 11, 3, 60, 52, 44, 36, 63, 55, 47, 39, 31, 23, 15, 7, 62, 54, 46, 38, 30, 22, 14, 6, 61, 53, 45, 37, 29, 21, 13, 5, 28, 20, 12, 4],
      h = [14, 17, 11, 24, 1, 5, 3, 28, 15, 6, 21, 10, 23, 19, 12, 4, 26, 8, 16, 7, 27, 20, 13, 2, 41, 52, 31, 37, 47, 55, 30, 40, 51, 45, 33, 48, 44, 49, 39, 56, 34, 53, 46, 42, 50, 36, 29, 32],
      f = [1, 2, 4, 6, 8, 10, 12, 14, 15, 17, 19, 21, 23, 25, 27, 28], l = [{
        0: 8421888,
        268435456: 32768,
        536870912: 8421378,
        805306368: 2,
        1073741824: 512,
        1342177280: 8421890,
        1610612736: 8389122,
        1879048192: 8388608,
        2147483648: 514,
        2415919104: 8389120,
        2684354560: 33280,
        2952790016: 8421376,
        3221225472: 32770,
        3489660928: 8388610,
        3758096384: 0,
        4026531840: 33282,
        134217728: 0,
        402653184: 8421890,
        671088640: 33282,
        939524096: 32768,
        1207959552: 8421888,
        1476395008: 512,
        1744830464: 8421378,
        2013265920: 2,
        2281701376: 8389120,
        2550136832: 33280,
        2818572288: 8421376,
        3087007744: 8389122,
        3355443200: 8388610,
        3623878656: 32770,
        3892314112: 514,
        4160749568: 8388608,
        1: 32768,
        268435457: 2,
        536870913: 8421888,
        805306369: 8388608,
        1073741825: 8421378,
        1342177281: 33280,
        1610612737: 512,
        1879048193: 8389122,
        2147483649: 8421890,
        2415919105: 8421376,
        2684354561: 8388610,
        2952790017: 33282,
        3221225473: 514,
        3489660929: 8389120,
        3758096385: 32770,
        4026531841: 0,
        134217729: 8421890,
        402653185: 8421376,
        671088641: 8388608,
        939524097: 512,
        1207959553: 32768,
        1476395009: 8388610,
        1744830465: 2,
        2013265921: 33282,
        2281701377: 32770,
        2550136833: 8389122,
        2818572289: 514,
        3087007745: 8421888,
        3355443201: 8389120,
        3623878657: 0,
        3892314113: 33280,
        4160749569: 8421378
      }, {
        0: 1074282512,
        16777216: 16384,
        33554432: 524288,
        50331648: 1074266128,
        67108864: 1073741840,
        83886080: 1074282496,
        100663296: 1073758208,
        117440512: 16,
        134217728: 540672,
        150994944: 1073758224,
        167772160: 1073741824,
        184549376: 540688,
        201326592: 524304,
        218103808: 0,
        234881024: 16400,
        251658240: 1074266112,
        8388608: 1073758208,
        25165824: 540688,
        41943040: 16,
        58720256: 1073758224,
        75497472: 1074282512,
        92274688: 1073741824,
        109051904: 524288,
        125829120: 1074266128,
        142606336: 524304,
        159383552: 0,
        176160768: 16384,
        192937984: 1074266112,
        209715200: 1073741840,
        226492416: 540672,
        243269632: 1074282496,
        260046848: 16400,
        268435456: 0,
        285212672: 1074266128,
        301989888: 1073758224,
        318767104: 1074282496,
        335544320: 1074266112,
        352321536: 16,
        369098752: 540688,
        385875968: 16384,
        402653184: 16400,
        419430400: 524288,
        436207616: 524304,
        452984832: 1073741840,
        469762048: 540672,
        486539264: 1073758208,
        503316480: 1073741824,
        520093696: 1074282512,
        276824064: 540688,
        293601280: 524288,
        310378496: 1074266112,
        327155712: 16384,
        343932928: 1073758208,
        360710144: 1074282512,
        377487360: 16,
        394264576: 1073741824,
        411041792: 1074282496,
        427819008: 1073741840,
        444596224: 1073758224,
        461373440: 524304,
        478150656: 0,
        494927872: 16400,
        511705088: 1074266128,
        528482304: 540672
      }, {
        0: 260,
        1048576: 0,
        2097152: 67109120,
        3145728: 65796,
        4194304: 65540,
        5242880: 67108868,
        6291456: 67174660,
        7340032: 67174400,
        8388608: 67108864,
        9437184: 67174656,
        10485760: 65792,
        11534336: 67174404,
        12582912: 67109124,
        13631488: 65536,
        14680064: 4,
        15728640: 256,
        524288: 67174656,
        1572864: 67174404,
        2621440: 0,
        3670016: 67109120,
        4718592: 67108868,
        5767168: 65536,
        6815744: 65540,
        7864320: 260,
        8912896: 4,
        9961472: 256,
        11010048: 67174400,
        12058624: 65796,
        13107200: 65792,
        14155776: 67109124,
        15204352: 67174660,
        16252928: 67108864,
        16777216: 67174656,
        17825792: 65540,
        18874368: 65536,
        19922944: 67109120,
        20971520: 256,
        22020096: 67174660,
        23068672: 67108868,
        24117248: 0,
        25165824: 67109124,
        26214400: 67108864,
        27262976: 4,
        28311552: 65792,
        29360128: 67174400,
        30408704: 260,
        31457280: 65796,
        32505856: 67174404,
        17301504: 67108864,
        18350080: 260,
        19398656: 67174656,
        20447232: 0,
        21495808: 65540,
        22544384: 67109120,
        23592960: 256,
        24641536: 67174404,
        25690112: 65536,
        26738688: 67174660,
        27787264: 65796,
        28835840: 67108868,
        29884416: 67109124,
        30932992: 67174400,
        31981568: 4,
        33030144: 65792
      }, {
        0: 2151682048,
        65536: 2147487808,
        131072: 4198464,
        196608: 2151677952,
        262144: 0,
        327680: 4198400,
        393216: 2147483712,
        458752: 4194368,
        524288: 2147483648,
        589824: 4194304,
        655360: 64,
        720896: 2147487744,
        786432: 2151678016,
        851968: 4160,
        917504: 4096,
        983040: 2151682112,
        32768: 2147487808,
        98304: 64,
        163840: 2151678016,
        229376: 2147487744,
        294912: 4198400,
        360448: 2151682112,
        425984: 0,
        491520: 2151677952,
        557056: 4096,
        622592: 2151682048,
        688128: 4194304,
        753664: 4160,
        819200: 2147483648,
        884736: 4194368,
        950272: 4198464,
        1015808: 2147483712,
        1048576: 4194368,
        1114112: 4198400,
        1179648: 2147483712,
        1245184: 0,
        1310720: 4160,
        1376256: 2151678016,
        1441792: 2151682048,
        1507328: 2147487808,
        1572864: 2151682112,
        1638400: 2147483648,
        1703936: 2151677952,
        1769472: 4198464,
        1835008: 2147487744,
        1900544: 4194304,
        1966080: 64,
        2031616: 4096,
        1081344: 2151677952,
        1146880: 2151682112,
        1212416: 0,
        1277952: 4198400,
        1343488: 4194368,
        1409024: 2147483648,
        1474560: 2147487808,
        1540096: 64,
        1605632: 2147483712,
        1671168: 4096,
        1736704: 2147487744,
        1802240: 2151678016,
        1867776: 4160,
        1933312: 2151682048,
        1998848: 4194304,
        2064384: 4198464
      }, {
        0: 128,
        4096: 17039360,
        8192: 262144,
        12288: 536870912,
        16384: 537133184,
        20480: 16777344,
        24576: 553648256,
        28672: 262272,
        32768: 16777216,
        36864: 537133056,
        40960: 536871040,
        45056: 553910400,
        49152: 553910272,
        53248: 0,
        57344: 17039488,
        61440: 553648128,
        2048: 17039488,
        6144: 553648256,
        10240: 128,
        14336: 17039360,
        18432: 262144,
        22528: 537133184,
        26624: 553910272,
        30720: 536870912,
        34816: 537133056,
        38912: 0,
        43008: 553910400,
        47104: 16777344,
        51200: 536871040,
        55296: 553648128,
        59392: 16777216,
        63488: 262272,
        65536: 262144,
        69632: 128,
        73728: 536870912,
        77824: 553648256,
        81920: 16777344,
        86016: 553910272,
        90112: 537133184,
        94208: 16777216,
        98304: 553910400,
        102400: 553648128,
        106496: 17039360,
        110592: 537133056,
        114688: 262272,
        118784: 536871040,
        122880: 0,
        126976: 17039488,
        67584: 553648256,
        71680: 16777216,
        75776: 17039360,
        79872: 537133184,
        83968: 536870912,
        88064: 17039488,
        92160: 128,
        96256: 553910272,
        100352: 262272,
        104448: 553910400,
        108544: 0,
        112640: 553648128,
        116736: 16777344,
        120832: 262144,
        124928: 537133056,
        129024: 536871040
      }, {
        0: 268435464,
        256: 8192,
        512: 270532608,
        768: 270540808,
        1024: 268443648,
        1280: 2097152,
        1536: 2097160,
        1792: 268435456,
        2048: 0,
        2304: 268443656,
        2560: 2105344,
        2816: 8,
        3072: 270532616,
        3328: 2105352,
        3584: 8200,
        3840: 270540800,
        128: 270532608,
        384: 270540808,
        640: 8,
        896: 2097152,
        1152: 2105352,
        1408: 268435464,
        1664: 268443648,
        1920: 8200,
        2176: 2097160,
        2432: 8192,
        2688: 268443656,
        2944: 270532616,
        3200: 0,
        3456: 270540800,
        3712: 2105344,
        3968: 268435456,
        4096: 268443648,
        4352: 270532616,
        4608: 270540808,
        4864: 8200,
        5120: 2097152,
        5376: 268435456,
        5632: 268435464,
        5888: 2105344,
        6144: 2105352,
        6400: 0,
        6656: 8,
        6912: 270532608,
        7168: 8192,
        7424: 268443656,
        7680: 270540800,
        7936: 2097160,
        4224: 8,
        4480: 2105344,
        4736: 2097152,
        4992: 268435464,
        5248: 268443648,
        5504: 8200,
        5760: 270540808,
        6016: 270532608,
        6272: 270540800,
        6528: 270532616,
        6784: 8192,
        7040: 2105352,
        7296: 2097160,
        7552: 0,
        7808: 268435456,
        8064: 268443656
      }, {
        0: 1048576,
        16: 33555457,
        32: 1024,
        48: 1049601,
        64: 34604033,
        80: 0,
        96: 1,
        112: 34603009,
        128: 33555456,
        144: 1048577,
        160: 33554433,
        176: 34604032,
        192: 34603008,
        208: 1025,
        224: 1049600,
        240: 33554432,
        8: 34603009,
        24: 0,
        40: 33555457,
        56: 34604032,
        72: 1048576,
        88: 33554433,
        104: 33554432,
        120: 1025,
        136: 1049601,
        152: 33555456,
        168: 34603008,
        184: 1048577,
        200: 1024,
        216: 34604033,
        232: 1,
        248: 1049600,
        256: 33554432,
        272: 1048576,
        288: 33555457,
        304: 34603009,
        320: 1048577,
        336: 33555456,
        352: 34604032,
        368: 1049601,
        384: 1025,
        400: 34604033,
        416: 1049600,
        432: 1,
        448: 0,
        464: 34603008,
        480: 33554433,
        496: 1024,
        264: 1049600,
        280: 33555457,
        296: 34603009,
        312: 1,
        328: 33554432,
        344: 1048576,
        360: 1025,
        376: 34604032,
        392: 33554433,
        408: 34603008,
        424: 0,
        440: 34604033,
        456: 1049601,
        472: 1024,
        488: 33555456,
        504: 1048577
      }, {
        0: 134219808,
        1: 131072,
        2: 134217728,
        3: 32,
        4: 131104,
        5: 134350880,
        6: 134350848,
        7: 2048,
        8: 134348800,
        9: 134219776,
        10: 133120,
        11: 134348832,
        12: 2080,
        13: 0,
        14: 134217760,
        15: 133152,
        2147483648: 2048,
        2147483649: 134350880,
        2147483650: 134219808,
        2147483651: 134217728,
        2147483652: 134348800,
        2147483653: 133120,
        2147483654: 133152,
        2147483655: 32,
        2147483656: 134217760,
        2147483657: 2080,
        2147483658: 131104,
        2147483659: 134350848,
        2147483660: 0,
        2147483661: 134348832,
        2147483662: 134219776,
        2147483663: 131072,
        16: 133152,
        17: 134350848,
        18: 32,
        19: 2048,
        20: 134219776,
        21: 134217760,
        22: 134348832,
        23: 131072,
        24: 0,
        25: 131104,
        26: 134348800,
        27: 134219808,
        28: 134350880,
        29: 133120,
        30: 2080,
        31: 134217728,
        2147483664: 131072,
        2147483665: 2048,
        2147483666: 134348832,
        2147483667: 133152,
        2147483668: 32,
        2147483669: 134348800,
        2147483670: 134217728,
        2147483671: 134219808,
        2147483672: 134350880,
        2147483673: 134217760,
        2147483674: 134219776,
        2147483675: 0,
        2147483676: 133120,
        2147483677: 2080,
        2147483678: 131104,
        2147483679: 134350848
      }], u = [4160749569, 528482304, 33030144, 2064384, 129024, 8064, 504, 2147483679], d = a.DES = s.extend({
        _doReset: function () {
          for (var t = this._key.words, e = [], r = 0; r < 56; r++) {
            var i = c[r] - 1
            e[r] = t[i >>> 5] >>> 31 - i % 32 & 1
          }
          for (var n = this._subKeys = [], o = 0; o < 16; o++) {
            for (var s = n[o] = [], a = f[o], r = 0; r < 24; r++) s[r / 6 | 0] |= e[(h[r] - 1 + a) % 28] << 31 - r % 6, s[4 + (r / 6 | 0)] |= e[28 + (h[r + 24] - 1 + a) % 28] << 31 - r % 6
            s[0] = s[0] << 1 | s[0] >>> 31
            for (r = 1; r < 7; r++) s[r] = s[r] >>> 4 * (r - 1) + 3
            s[7] = s[7] << 5 | s[7] >>> 27
          }
          for (var l = this._invSubKeys = [], r = 0; r < 16; r++) l[r] = n[15 - r]
        }, encryptBlock: function (t, e) {
          this._doCryptBlock(t, e, this._subKeys)
        }, decryptBlock: function (t, e) {
          this._doCryptBlock(t, e, this._invSubKeys)
        }, _doCryptBlock: function (t, i, n) {
          this._lBlock = t[i], this._rBlock = t[i + 1], e.call(this, 4, 252645135), e.call(this, 16, 65535), r.call(this, 2, 858993459), r.call(this, 8, 16711935), e.call(this, 1, 1431655765)
          for (var o = 0; o < 16; o++) {
            for (var s = n[o], a = this._lBlock, c = this._rBlock, h = 0, f = 0; f < 8; f++) h |= l[f][((c ^ s[f]) & u[f]) >>> 0]
            this._lBlock = c, this._rBlock = a ^ h
          }
          var d = this._lBlock
          this._lBlock = this._rBlock, this._rBlock = d, e.call(this, 1, 1431655765), r.call(this, 8, 16711935), r.call(this, 2, 858993459), e.call(this, 16, 65535), e.call(this, 4, 252645135), t[i] = this._lBlock, t[i + 1] = this._rBlock
        }, keySize: 2, ivSize: 2, blockSize: 2
      })
    i.DES = s._createHelper(d)
    var p = a.TripleDES = s.extend({
      _doReset: function () {
        var t = this._key.words
        if (2 !== t.length && 4 !== t.length && t.length < 6) throw new Error('Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.')
        var e = t.slice(0, 2), r = t.length < 4 ? t.slice(0, 2) : t.slice(2, 4),
          i = t.length < 6 ? t.slice(0, 2) : t.slice(4, 6)
        this._des1 = d.createEncryptor(o.create(e)), this._des2 = d.createEncryptor(o.create(r)), this._des3 = d.createEncryptor(o.create(i))
      }, encryptBlock: function (t, e) {
        this._des1.encryptBlock(t, e), this._des2.decryptBlock(t, e), this._des3.encryptBlock(t, e)
      }, decryptBlock: function (t, e) {
        this._des3.decryptBlock(t, e), this._des2.encryptBlock(t, e), this._des1.decryptBlock(t, e)
      }, keySize: 6, ivSize: 2, blockSize: 2
    })
    i.TripleDES = s._createHelper(p)
  }(), function () {
    function e () {
      for (var t = this._S, e = this._i, r = this._j, i = 0, n = 0; n < 4; n++) {
        r = (r + t[e = (e + 1) % 256]) % 256
        var o = t[e]
        t[e] = t[r], t[r] = o, i |= t[(t[e] + t[r]) % 256] << 24 - 8 * n
      }
      return this._i = e, this._j = r, i
    }

    var r = t, i = r.lib.StreamCipher, n = r.algo, o = n.RC4 = i.extend({
      _doReset: function () {
        for (var t = this._key, e = t.words, r = t.sigBytes, i = this._S = [], n = 0; n < 256; n++) i[n] = n
        for (var n = 0, o = 0; n < 256; n++) {
          var s = n % r, a = e[s >>> 2] >>> 24 - s % 4 * 8 & 255
          o = (o + i[n] + a) % 256
          var c = i[n]
          i[n] = i[o], i[o] = c
        }
        this._i = this._j = 0
      }, _doProcessBlock: function (t, r) {
        t[r] ^= e.call(this)
      }, keySize: 8, ivSize: 0
    })
    r.RC4 = i._createHelper(o)
    var s = n.RC4Drop = o.extend({
      cfg: o.cfg.extend({drop: 192}), _doReset: function () {
        o._doReset.call(this)
        for (var t = this.cfg.drop; t > 0; t--) e.call(this)
      }
    })
    r.RC4Drop = i._createHelper(s)
  }(), function () {
    function e () {
      for (var t = this._X, e = this._C, r = 0; r < 8; r++) o[r] = e[r]
      e[0] = e[0] + 1295307597 + this._b | 0, e[1] = e[1] + 3545052371 + (e[0] >>> 0 < o[0] >>> 0 ? 1 : 0) | 0, e[2] = e[2] + 886263092 + (e[1] >>> 0 < o[1] >>> 0 ? 1 : 0) | 0, e[3] = e[3] + 1295307597 + (e[2] >>> 0 < o[2] >>> 0 ? 1 : 0) | 0, e[4] = e[4] + 3545052371 + (e[3] >>> 0 < o[3] >>> 0 ? 1 : 0) | 0, e[5] = e[5] + 886263092 + (e[4] >>> 0 < o[4] >>> 0 ? 1 : 0) | 0, e[6] = e[6] + 1295307597 + (e[5] >>> 0 < o[5] >>> 0 ? 1 : 0) | 0, e[7] = e[7] + 3545052371 + (e[6] >>> 0 < o[6] >>> 0 ? 1 : 0) | 0, this._b = e[7] >>> 0 < o[7] >>> 0 ? 1 : 0
      for (r = 0; r < 8; r++) {
        var i = t[r] + e[r], n = 65535 & i, a = i >>> 16, c = ((n * n >>> 17) + n * a >>> 15) + a * a,
          h = ((4294901760 & i) * i | 0) + ((65535 & i) * i | 0)
        s[r] = c ^ h
      }
      t[0] = s[0] + (s[7] << 16 | s[7] >>> 16) + (s[6] << 16 | s[6] >>> 16) | 0, t[1] = s[1] + (s[0] << 8 | s[0] >>> 24) + s[7] | 0, t[2] = s[2] + (s[1] << 16 | s[1] >>> 16) + (s[0] << 16 | s[0] >>> 16) | 0, t[3] = s[3] + (s[2] << 8 | s[2] >>> 24) + s[1] | 0, t[4] = s[4] + (s[3] << 16 | s[3] >>> 16) + (s[2] << 16 | s[2] >>> 16) | 0, t[5] = s[5] + (s[4] << 8 | s[4] >>> 24) + s[3] | 0, t[6] = s[6] + (s[5] << 16 | s[5] >>> 16) + (s[4] << 16 | s[4] >>> 16) | 0, t[7] = s[7] + (s[6] << 8 | s[6] >>> 24) + s[5] | 0
    }

    var r = t, i = r.lib.StreamCipher, n = [], o = [], s = [], a = r.algo.Rabbit = i.extend({
      _doReset: function () {
        for (var t = this._key.words, r = this.cfg.iv, i = 0; i < 4; i++) t[i] = 16711935 & (t[i] << 8 | t[i] >>> 24) | 4278255360 & (t[i] << 24 | t[i] >>> 8)
        var n = this._X = [t[0], t[3] << 16 | t[2] >>> 16, t[1], t[0] << 16 | t[3] >>> 16, t[2], t[1] << 16 | t[0] >>> 16, t[3], t[2] << 16 | t[1] >>> 16],
          o = this._C = [t[2] << 16 | t[2] >>> 16, 4294901760 & t[0] | 65535 & t[1], t[3] << 16 | t[3] >>> 16, 4294901760 & t[1] | 65535 & t[2], t[0] << 16 | t[0] >>> 16, 4294901760 & t[2] | 65535 & t[3], t[1] << 16 | t[1] >>> 16, 4294901760 & t[3] | 65535 & t[0]]
        this._b = 0
        for (i = 0; i < 4; i++) e.call(this)
        for (i = 0; i < 8; i++) o[i] ^= n[i + 4 & 7]
        if (r) {
          var s = r.words, a = s[0], c = s[1], h = 16711935 & (a << 8 | a >>> 24) | 4278255360 & (a << 24 | a >>> 8),
            f = 16711935 & (c << 8 | c >>> 24) | 4278255360 & (c << 24 | c >>> 8), l = h >>> 16 | 4294901760 & f,
            u = f << 16 | 65535 & h
          o[0] ^= h, o[1] ^= l, o[2] ^= f, o[3] ^= u, o[4] ^= h, o[5] ^= l, o[6] ^= f, o[7] ^= u
          for (i = 0; i < 4; i++) e.call(this)
        }
      }, _doProcessBlock: function (t, r) {
        var i = this._X
        e.call(this), n[0] = i[0] ^ i[5] >>> 16 ^ i[3] << 16, n[1] = i[2] ^ i[7] >>> 16 ^ i[5] << 16, n[2] = i[4] ^ i[1] >>> 16 ^ i[7] << 16, n[3] = i[6] ^ i[3] >>> 16 ^ i[1] << 16
        for (var o = 0; o < 4; o++) n[o] = 16711935 & (n[o] << 8 | n[o] >>> 24) | 4278255360 & (n[o] << 24 | n[o] >>> 8), t[r + o] ^= n[o]
      }, blockSize: 4, ivSize: 2
    })
    r.Rabbit = i._createHelper(a)
  }(), function () {
    function e () {
      for (var t = this._X, e = this._C, r = 0; r < 8; r++) o[r] = e[r]
      e[0] = e[0] + 1295307597 + this._b | 0, e[1] = e[1] + 3545052371 + (e[0] >>> 0 < o[0] >>> 0 ? 1 : 0) | 0, e[2] = e[2] + 886263092 + (e[1] >>> 0 < o[1] >>> 0 ? 1 : 0) | 0, e[3] = e[3] + 1295307597 + (e[2] >>> 0 < o[2] >>> 0 ? 1 : 0) | 0, e[4] = e[4] + 3545052371 + (e[3] >>> 0 < o[3] >>> 0 ? 1 : 0) | 0, e[5] = e[5] + 886263092 + (e[4] >>> 0 < o[4] >>> 0 ? 1 : 0) | 0, e[6] = e[6] + 1295307597 + (e[5] >>> 0 < o[5] >>> 0 ? 1 : 0) | 0, e[7] = e[7] + 3545052371 + (e[6] >>> 0 < o[6] >>> 0 ? 1 : 0) | 0, this._b = e[7] >>> 0 < o[7] >>> 0 ? 1 : 0
      for (r = 0; r < 8; r++) {
        var i = t[r] + e[r], n = 65535 & i, a = i >>> 16, c = ((n * n >>> 17) + n * a >>> 15) + a * a,
          h = ((4294901760 & i) * i | 0) + ((65535 & i) * i | 0)
        s[r] = c ^ h
      }
      t[0] = s[0] + (s[7] << 16 | s[7] >>> 16) + (s[6] << 16 | s[6] >>> 16) | 0, t[1] = s[1] + (s[0] << 8 | s[0] >>> 24) + s[7] | 0, t[2] = s[2] + (s[1] << 16 | s[1] >>> 16) + (s[0] << 16 | s[0] >>> 16) | 0, t[3] = s[3] + (s[2] << 8 | s[2] >>> 24) + s[1] | 0, t[4] = s[4] + (s[3] << 16 | s[3] >>> 16) + (s[2] << 16 | s[2] >>> 16) | 0, t[5] = s[5] + (s[4] << 8 | s[4] >>> 24) + s[3] | 0, t[6] = s[6] + (s[5] << 16 | s[5] >>> 16) + (s[4] << 16 | s[4] >>> 16) | 0, t[7] = s[7] + (s[6] << 8 | s[6] >>> 24) + s[5] | 0
    }

    var r = t, i = r.lib.StreamCipher, n = [], o = [], s = [], a = r.algo.RabbitLegacy = i.extend({
      _doReset: function () {
        var t = this._key.words, r = this.cfg.iv,
          i = this._X = [t[0], t[3] << 16 | t[2] >>> 16, t[1], t[0] << 16 | t[3] >>> 16, t[2], t[1] << 16 | t[0] >>> 16, t[3], t[2] << 16 | t[1] >>> 16],
          n = this._C = [t[2] << 16 | t[2] >>> 16, 4294901760 & t[0] | 65535 & t[1], t[3] << 16 | t[3] >>> 16, 4294901760 & t[1] | 65535 & t[2], t[0] << 16 | t[0] >>> 16, 4294901760 & t[2] | 65535 & t[3], t[1] << 16 | t[1] >>> 16, 4294901760 & t[3] | 65535 & t[0]]
        this._b = 0
        for (u = 0; u < 4; u++) e.call(this)
        for (u = 0; u < 8; u++) n[u] ^= i[u + 4 & 7]
        if (r) {
          var o = r.words, s = o[0], a = o[1], c = 16711935 & (s << 8 | s >>> 24) | 4278255360 & (s << 24 | s >>> 8),
            h = 16711935 & (a << 8 | a >>> 24) | 4278255360 & (a << 24 | a >>> 8), f = c >>> 16 | 4294901760 & h,
            l = h << 16 | 65535 & c
          n[0] ^= c, n[1] ^= f, n[2] ^= h, n[3] ^= l, n[4] ^= c, n[5] ^= f, n[6] ^= h, n[7] ^= l
          for (var u = 0; u < 4; u++) e.call(this)
        }
      }, _doProcessBlock: function (t, r) {
        var i = this._X
        e.call(this), n[0] = i[0] ^ i[5] >>> 16 ^ i[3] << 16, n[1] = i[2] ^ i[7] >>> 16 ^ i[5] << 16, n[2] = i[4] ^ i[1] >>> 16 ^ i[7] << 16, n[3] = i[6] ^ i[3] >>> 16 ^ i[1] << 16
        for (var o = 0; o < 4; o++) n[o] = 16711935 & (n[o] << 8 | n[o] >>> 24) | 4278255360 & (n[o] << 24 | n[o] >>> 8), t[r + o] ^= n[o]
      }, blockSize: 4, ivSize: 2
    })
    r.RabbitLegacy = i._createHelper(a)
  }(), t
})
!function (e, r, i) {
  'object' == typeof exports ? module.exports = exports = r(require('./core'), require('./enc-base64'), require('./md5'), require('./evpkdf'), require('./cipher-core')) : 'function' == typeof define && define.amd ? define(['./core', './enc-base64', './md5', './evpkdf', './cipher-core'], r) : r(e.CryptoJS)
}(this, function (e) {
  return function () {
    var r = e, i = r.lib.BlockCipher, o = r.algo, t = [], n = [], c = [], s = [], d = [], f = [], u = [], h = [],
      a = [], y = []
    !function () {
      for (var e = [], r = 0; r < 256; r++) e[r] = r < 128 ? r << 1 : r << 1 ^ 283
      for (var i = 0, o = 0, r = 0; r < 256; r++) {
        var p = o ^ o << 1 ^ o << 2 ^ o << 3 ^ o << 4
        p = p >>> 8 ^ 255 & p ^ 99, t[i] = p, n[p] = i
        var v = e[i], _ = e[v], k = e[_], l = 257 * e[p] ^ 16843008 * p
        c[i] = l << 24 | l >>> 8, s[i] = l << 16 | l >>> 16, d[i] = l << 8 | l >>> 24, f[i] = l
        l = 16843009 * k ^ 65537 * _ ^ 257 * v ^ 16843008 * i
        u[p] = l << 24 | l >>> 8, h[p] = l << 16 | l >>> 16, a[p] = l << 8 | l >>> 24, y[p] = l, i ? (i = v ^ e[e[e[k ^ v]]], o ^= e[e[o]]) : i = o = 1
      }
    }()
    var p = [0, 1, 2, 4, 8, 16, 32, 64, 128, 27, 54], v = o.AES = i.extend({
      _doReset: function () {
        if (!this._nRounds || this._keyPriorReset !== this._key) {
          for (var e = this._keyPriorReset = this._key, r = e.words, i = e.sigBytes / 4, o = 4 * ((this._nRounds = i + 6) + 1), n = this._keySchedule = [], c = 0; c < o; c++) c < i ? n[c] = r[c] : (f = n[c - 1], c % i ? i > 6 && c % i == 4 && (f = t[f >>> 24] << 24 | t[f >>> 16 & 255] << 16 | t[f >>> 8 & 255] << 8 | t[255 & f]) : (f = t[(f = f << 8 | f >>> 24) >>> 24] << 24 | t[f >>> 16 & 255] << 16 | t[f >>> 8 & 255] << 8 | t[255 & f], f ^= p[c / i | 0] << 24), n[c] = n[c - i] ^ f)
          for (var s = this._invKeySchedule = [], d = 0; d < o; d++) {
            c = o - d
            if (d % 4) f = n[c] else var f = n[c - 4]
            s[d] = d < 4 || c <= 4 ? f : u[t[f >>> 24]] ^ h[t[f >>> 16 & 255]] ^ a[t[f >>> 8 & 255]] ^ y[t[255 & f]]
          }
        }
      }, encryptBlock: function (e, r) {
        this._doCryptBlock(e, r, this._keySchedule, c, s, d, f, t)
      }, decryptBlock: function (e, r) {
        i = e[r + 1]
        e[r + 1] = e[r + 3], e[r + 3] = i, this._doCryptBlock(e, r, this._invKeySchedule, u, h, a, y, n)
        var i = e[r + 1]
        e[r + 1] = e[r + 3], e[r + 3] = i
      }, _doCryptBlock: function (e, r, i, o, t, n, c, s) {
        for (var d = this._nRounds, f = e[r] ^ i[0], u = e[r + 1] ^ i[1], h = e[r + 2] ^ i[2], a = e[r + 3] ^ i[3], y = 4, p = 1; p < d; p++) {
          var v = o[f >>> 24] ^ t[u >>> 16 & 255] ^ n[h >>> 8 & 255] ^ c[255 & a] ^ i[y++],
            _ = o[u >>> 24] ^ t[h >>> 16 & 255] ^ n[a >>> 8 & 255] ^ c[255 & f] ^ i[y++],
            k = o[h >>> 24] ^ t[a >>> 16 & 255] ^ n[f >>> 8 & 255] ^ c[255 & u] ^ i[y++],
            l = o[a >>> 24] ^ t[f >>> 16 & 255] ^ n[u >>> 8 & 255] ^ c[255 & h] ^ i[y++]
          f = v, u = _, h = k, a = l
        }
        var v = (s[f >>> 24] << 24 | s[u >>> 16 & 255] << 16 | s[h >>> 8 & 255] << 8 | s[255 & a]) ^ i[y++],
          _ = (s[u >>> 24] << 24 | s[h >>> 16 & 255] << 16 | s[a >>> 8 & 255] << 8 | s[255 & f]) ^ i[y++],
          k = (s[h >>> 24] << 24 | s[a >>> 16 & 255] << 16 | s[f >>> 8 & 255] << 8 | s[255 & u]) ^ i[y++],
          l = (s[a >>> 24] << 24 | s[f >>> 16 & 255] << 16 | s[u >>> 8 & 255] << 8 | s[255 & h]) ^ i[y++]
        e[r] = v, e[r + 1] = _, e[r + 2] = k, e[r + 3] = l
      }, keySize: 8
    })
    r.AES = i._createHelper(v)
  }(), e.AES
})
/**
 * Planck.js v1.0.0-beta.16
 * @license The MIT license
 * @copyright Copyright (c) 2021 Erin Catto, Ali Shakiba
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
!function (t, e) {
  'object' == typeof exports && 'undefined' != typeof module ? e(exports) : 'function' == typeof define && define.amd ? define(['exports'], e) : e((t = 'undefined' != typeof globalThis ? globalThis : t || self).planck = {})
}(this, (function (t) {
  'use strict'
  /*! *****************************************************************************
      Copyright (c) Microsoft Corporation.

      Permission to use, copy, modify, and/or distribute this software for any
      purpose with or without fee is hereby granted.

      THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
      REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
      AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
      INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
      LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
      OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
      PERFORMANCE OF THIS SOFTWARE.
      ***************************************************************************** */
  var e = function (t, i) {
    return (e = Object.setPrototypeOf || {__proto__: []} instanceof Array && function (t, e) {
      t.__proto__ = e
    } || function (t, e) {
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
    })(t, i)
  }

  function i (t, i) {
    if ('function' != typeof i && null !== i) throw new TypeError('Class extends value ' + String(i) + ' is not a constructor or null')

    function o () {
      this.constructor = t
    }

    e(t, i), t.prototype = null === i ? Object.create(i) : (o.prototype = i.prototype, new o)
  }

  var o = function () {
    return (o = Object.assign || function (t) {
      for (var e, i = 1, o = arguments.length; i < o; i++) for (var s in e = arguments[i]) Object.prototype.hasOwnProperty.call(e, s) && (t[s] = e[s])
      return t
    }).apply(this, arguments)
  }, s = function (t, e) {
    null == t && (t = {})
    var i = o({}, t)
    for (var s in e) e.hasOwnProperty(s) && void 0 === t[s] && (i[s] = e[s])
    if ('function' == typeof Object.getOwnPropertySymbols) {
      for (var n = Object.getOwnPropertySymbols(e), r = 0; r < n.length; r++) {
        var a = n[r]
        e.propertyIsEnumerable(a) && void 0 === t[a] && (i[a] = e[a])
      }
    }
    return i
  }, n = Math.random, r = 1e-9, a = Number.isFinite

  function m (t, e, i) {
    return void 0 === e ? (i = 1, e = 0) : void 0 === i && (i = e, e = 0), i > e ? (t = (t - e) % (i - e)) + (t < 0 ? i : e) : (t = (t - i) % (e - i)) + (t <= 0 ? e : i)
  }

  function h (t, e, i) {
    return t < e ? e : t > i ? i : t
  }

  var c = Object.create(Math)
  c.EPSILON = r, c.isFinite = a, c.nextPowerOfTwo = function (t) {
    return t |= t >> 1, t |= t >> 2, t |= t >> 4, t |= t >> 8, (t |= t >> 16) + 1
  }, c.isPowerOfTwo = function (t) {
    return t > 0 && 0 == (t & t - 1)
  }, c.mod = m, c.clamp = h, c.random = function (t, e) {
    return void 0 === t ? (e = 1, t = 0) : void 0 === e && (e = t, t = 0), t === e ? t : n() * (e - t) + t
  }
  var _ = Math.abs, l = Math.sqrt, u = Math.max, p = Math.min, y = function () {
    function t (e, i) {
      if (!(this instanceof t)) return new t(e, i)
      void 0 === e ? (this.x = 0, this.y = 0) : 'object' == typeof e ? (this.x = e.x, this.y = e.y) : (this.x = e, this.y = i)
    }

    return t.prototype._serialize = function () {
      return {x: this.x, y: this.y}
    }, t._deserialize = function (e) {
      var i = Object.create(t.prototype)
      return i.x = e.x, i.y = e.y, i
    }, t.zero = function () {
      var e = Object.create(t.prototype)
      return e.x = 0, e.y = 0, e
    }, t.neo = function (e, i) {
      var o = Object.create(t.prototype)
      return o.x = e, o.y = i, o
    }, t.clone = function (e) {
      return t.neo(e.x, e.y)
    }, t.prototype.toString = function () {
      return JSON.stringify(this)
    }, t.isValid = function (t) {
      return null != t && (Number.isFinite(t.x) && Number.isFinite(t.y))
    }, t.assert = function (t) {
    }, t.prototype.clone = function () {
      return t.clone(this)
    }, t.prototype.setZero = function () {
      return this.x = 0, this.y = 0, this
    }, t.prototype.set = function (t, e) {
      return 'object' == typeof t ? (this.x = t.x, this.y = t.y) : (this.x = t, this.y = e), this
    }, t.prototype.setNum = function (t, e) {
      return this.x = t, this.y = e, this
    }, t.prototype.setVec2 = function (t) {
      return this.x = t.x, this.y = t.y, this
    }, t.prototype.wSet = function (t, e, i, o) {
      return void 0 !== i || void 0 !== o ? this.setCombine(t, e, i, o) : this.setMul(t, e)
    }, t.prototype.setCombine = function (t, e, i, o) {
      var s = t * e.x + i * o.x, n = t * e.y + i * o.y
      return this.x = s, this.y = n, this
    }, t.prototype.setMul = function (t, e) {
      var i = t * e.x, o = t * e.y
      return this.x = i, this.y = o, this
    }, t.prototype.add = function (t) {
      return this.x += t.x, this.y += t.y, this
    }, t.prototype.wAdd = function (t, e, i, o) {
      return void 0 !== i || void 0 !== o ? this.addCombine(t, e, i, o) : this.addMul(t, e)
    }, t.prototype.addCombine = function (t, e, i, o) {
      var s = t * e.x + i * o.x, n = t * e.y + i * o.y
      return this.x += s, this.y += n, this
    }, t.prototype.addMul = function (t, e) {
      var i = t * e.x, o = t * e.y
      return this.x += i, this.y += o, this
    }, t.prototype.wSub = function (t, e, i, o) {
      return void 0 !== i || void 0 !== o ? this.subCombine(t, e, i, o) : this.subMul(t, e)
    }, t.prototype.subCombine = function (t, e, i, o) {
      var s = t * e.x + i * o.x, n = t * e.y + i * o.y
      return this.x -= s, this.y -= n, this
    }, t.prototype.subMul = function (t, e) {
      var i = t * e.x, o = t * e.y
      return this.x -= i, this.y -= o, this
    }, t.prototype.sub = function (t) {
      return this.x -= t.x, this.y -= t.y, this
    }, t.prototype.mul = function (t) {
      return this.x *= t, this.y *= t, this
    }, t.prototype.length = function () {
      return t.lengthOf(this)
    }, t.prototype.lengthSquared = function () {
      return t.lengthSquared(this)
    }, t.prototype.normalize = function () {
      var t = this.length()
      if (t < r) return 0
      var e = 1 / t
      return this.x *= e, this.y *= e, t
    }, t.lengthOf = function (t) {
      return l(t.x * t.x + t.y * t.y)
    }, t.lengthSquared = function (t) {
      return t.x * t.x + t.y * t.y
    }, t.distance = function (t, e) {
      var i = t.x - e.x, o = t.y - e.y
      return l(i * i + o * o)
    }, t.distanceSquared = function (t, e) {
      var i = t.x - e.x, o = t.y - e.y
      return i * i + o * o
    }, t.areEqual = function (t, e) {
      return t === e || 'object' == typeof e && null !== e && t.x === e.x && t.y === e.y
    }, t.skew = function (e) {
      return t.neo(-e.y, e.x)
    }, t.dot = function (t, e) {
      return t.x * e.x + t.y * e.y
    }, t.cross = function (e, i) {
      return 'number' == typeof i ? t.neo(i * e.y, -i * e.x) : 'number' == typeof e ? t.neo(-e * i.y, e * i.x) : e.x * i.y - e.y * i.x
    }, t.crossVec2Vec2 = function (t, e) {
      return t.x * e.y - t.y * e.x
    }, t.crossVec2Num = function (e, i) {
      return t.neo(i * e.y, -i * e.x)
    }, t.crossNumVec2 = function (e, i) {
      return t.neo(-e * i.y, e * i.x)
    }, t.addCross = function (e, i, o) {
      return 'number' == typeof o ? t.neo(o * i.y + e.x, -o * i.x + e.y) : 'number' == typeof i ? t.neo(-i * o.y + e.x, i * o.x + e.y) : void 0
    }, t.addCrossVec2Num = function (e, i, o) {
      return t.neo(o * i.y + e.x, -o * i.x + e.y)
    }, t.addCrossNumVec2 = function (e, i, o) {
      return t.neo(-i * o.y + e.x, i * o.x + e.y)
    }, t.add = function (e, i) {
      return t.neo(e.x + i.x, e.y + i.y)
    }, t.wAdd = function (e, i, o, s) {
      return void 0 !== o || void 0 !== s ? t.combine(e, i, o, s) : t.mulNumVec2(e, i)
    }, t.combine = function (e, i, o, s) {
      return t.zero().setCombine(e, i, o, s)
    }, t.sub = function (e, i) {
      return t.neo(e.x - i.x, e.y - i.y)
    }, t.mul = function (e, i) {
      return 'object' == typeof e ? t.neo(e.x * i, e.y * i) : 'object' == typeof i ? t.neo(e * i.x, e * i.y) : void 0
    }, t.mulVec2Num = function (e, i) {
      return t.neo(e.x * i, e.y * i)
    }, t.mulNumVec2 = function (e, i) {
      return t.neo(e * i.x, e * i.y)
    }, t.prototype.neg = function () {
      return this.x = -this.x, this.y = -this.y, this
    }, t.neg = function (e) {
      return t.neo(-e.x, -e.y)
    }, t.abs = function (e) {
      return t.neo(_(e.x), _(e.y))
    }, t.mid = function (e, i) {
      return t.neo(.5 * (e.x + i.x), .5 * (e.y + i.y))
    }, t.upper = function (e, i) {
      return t.neo(u(e.x, i.x), u(e.y, i.y))
    }, t.lower = function (e, i) {
      return t.neo(p(e.x, i.x), p(e.y, i.y))
    }, t.prototype.clamp = function (t) {
      var e = this.x * this.x + this.y * this.y
      if (e > t * t) {
        var i = t / l(e)
        this.x *= i, this.y *= i
      }
      return this
    }, t.clamp = function (e, i) {
      var o = t.neo(e.x, e.y)
      return o.clamp(i), o
    }, t.scaleFn = function (e, i) {
      return function (o) {
        return t.neo(o.x * e, o.y * i)
      }
    }, t.translateFn = function (e, i) {
      return function (o) {
        return t.neo(o.x + e, o.y + i)
      }
    }, t
  }(), d = Math.max, f = Math.min, v = function () {
    function t (e, i) {
      if (!(this instanceof t)) return new t(e, i)
      this.lowerBound = y.zero(), this.upperBound = y.zero(), 'object' == typeof e && this.lowerBound.setVec2(e), 'object' == typeof i ? this.upperBound.setVec2(i) : 'object' == typeof e && this.upperBound.setVec2(e)
    }

    return t.prototype.isValid = function () {
      return t.isValid(this)
    }, t.isValid = function (t) {
      return null != t && (y.isValid(t.lowerBound) && y.isValid(t.upperBound) && y.sub(t.upperBound, t.lowerBound).lengthSquared() >= 0)
    }, t.assert = function (t) {
    }, t.prototype.getCenter = function () {
      return y.neo(.5 * (this.lowerBound.x + this.upperBound.x), .5 * (this.lowerBound.y + this.upperBound.y))
    }, t.prototype.getExtents = function () {
      return y.neo(.5 * (this.upperBound.x - this.lowerBound.x), .5 * (this.upperBound.y - this.lowerBound.y))
    }, t.prototype.getPerimeter = function () {
      return 2 * (this.upperBound.x - this.lowerBound.x + this.upperBound.y - this.lowerBound.y)
    }, t.prototype.combine = function (t, e) {
      e = e || this
      var i = t.lowerBound, o = t.upperBound, s = e.lowerBound, n = e.upperBound, r = f(i.x, s.x), a = f(i.y, s.y),
        m = d(n.x, o.x), h = d(n.y, o.y)
      this.lowerBound.setNum(r, a), this.upperBound.setNum(m, h)
    }, t.prototype.combinePoints = function (t, e) {
      this.lowerBound.setNum(f(t.x, e.x), f(t.y, e.y)), this.upperBound.setNum(d(t.x, e.x), d(t.y, e.y))
    }, t.prototype.set = function (t) {
      this.lowerBound.setNum(t.lowerBound.x, t.lowerBound.y), this.upperBound.setNum(t.upperBound.x, t.upperBound.y)
    }, t.prototype.contains = function (t) {
      var e = !0
      return e = (e = (e = (e = e && this.lowerBound.x <= t.lowerBound.x) && this.lowerBound.y <= t.lowerBound.y) && t.upperBound.x <= this.upperBound.x) && t.upperBound.y <= this.upperBound.y
    }, t.prototype.extend = function (e) {
      return t.extend(this, e), this
    }, t.extend = function (t, e) {
      return t.lowerBound.x -= e, t.lowerBound.y -= e, t.upperBound.x += e, t.upperBound.y += e, t
    }, t.testOverlap = function (t, e) {
      var i = e.lowerBound.x - t.upperBound.x, o = t.lowerBound.x - e.upperBound.x, s = e.lowerBound.y - t.upperBound.y,
        n = t.lowerBound.y - e.upperBound.y
      return !(i > 0 || s > 0 || o > 0 || n > 0)
    }, t.areEqual = function (t, e) {
      return y.areEqual(t.lowerBound, e.lowerBound) && y.areEqual(t.upperBound, e.upperBound)
    }, t.diff = function (t, e) {
      var i = d(0, f(t.upperBound.x, e.upperBound.x) - d(e.lowerBound.x, t.lowerBound.x)),
        o = d(0, f(t.upperBound.y, e.upperBound.y) - d(e.lowerBound.y, t.lowerBound.y))
      return (t.upperBound.x - t.lowerBound.x) * (t.upperBound.y - t.lowerBound.y) + (e.upperBound.x - e.lowerBound.x) * (e.upperBound.y - e.lowerBound.y) - i * o
    }, t.prototype.rayCast = function (t, e) {
      for (var i = -1 / 0, o = 1 / 0, s = e.p1, n = y.sub(e.p2, e.p1), a = y.abs(n), m = y.zero(), h = 'x'; null !== h; h = 'x' === h ? 'y' : null) {
        if (a.x < r) {
          if (s[h] < this.lowerBound[h] || this.upperBound[h] < s[h]) return !1
        } else {
          var c = 1 / n[h], _ = (this.lowerBound[h] - s[h]) * c, l = (this.upperBound[h] - s[h]) * c, u = -1
          if (_ > l) {
            var p = _
            _ = l, l = p, u = 1
          }
          if (_ > i && (m.setZero(), m[h] = u, i = _), i > (o = f(o, l))) return !1
        }
      }
      return !(i < 0 || e.maxFraction < i) && (t.fraction = i, t.normal = m, !0)
    }, t.prototype.toString = function () {
      return JSON.stringify(this)
    }, t.combinePoints = function (t, e, i) {
      return t.lowerBound.x = f(e.x, i.x), t.lowerBound.y = f(e.y, i.y), t.upperBound.x = d(e.x, i.x), t.upperBound.y = d(e.y, i.y), t
    }, t.combinedPerimeter = function (t, e) {
      var i = f(t.lowerBound.x, e.lowerBound.x), o = f(t.lowerBound.y, e.lowerBound.y)
      return 2 * (d(t.upperBound.x, e.upperBound.x) - i + d(t.upperBound.y, e.upperBound.y) - o)
    }, t
  }(), x = Math.PI, A = function () {
    function t () {
    }

    return Object.defineProperty(t, 'polygonRadius', {
      get: function () {
        return 2 * t.linearSlop
      }, enumerable: !1, configurable: !0
    }), t.lengthUnitsPerMeter = 1, t.maxManifoldPoints = 2, t.maxPolygonVertices = 12, t.aabbExtension = .1, t.aabbMultiplier = 2, t.linearSlop = .005, t.angularSlop = 2 / 180 * x, t.maxSubSteps = 8, t.maxTOIContacts = 32, t.maxTOIIterations = 20, t.maxDistanceIterations = 20, t.velocityThreshold = 1, t.maxLinearCorrection = .2, t.maxAngularCorrection = 8 / 180 * x, t.maxTranslation = 2, t.maxRotation = .5 * x, t.baumgarte = .2, t.toiBaugarte = .75, t.timeToSleep = .5, t.linearSleepTolerance = .01, t.angularSleepTolerance = 2 / 180 * x, t
  }(), g = function () {
    function t () {
    }

    return Object.defineProperty(t, 'maxManifoldPoints', {
      get: function () {
        return A.maxManifoldPoints
      }, enumerable: !1, configurable: !0
    }), Object.defineProperty(t, 'maxPolygonVertices', {
      get: function () {
        return A.maxPolygonVertices
      }, enumerable: !1, configurable: !0
    }), Object.defineProperty(t, 'aabbExtension', {
      get: function () {
        return A.aabbExtension * A.lengthUnitsPerMeter
      }, enumerable: !1, configurable: !0
    }), Object.defineProperty(t, 'aabbMultiplier', {
      get: function () {
        return A.aabbMultiplier
      }, enumerable: !1, configurable: !0
    }), Object.defineProperty(t, 'linearSlop', {
      get: function () {
        return A.linearSlop * A.lengthUnitsPerMeter
      }, enumerable: !1, configurable: !0
    }), Object.defineProperty(t, 'linearSlopSquared', {
      get: function () {
        return A.linearSlop * A.lengthUnitsPerMeter * A.linearSlop * A.lengthUnitsPerMeter
      }, enumerable: !1, configurable: !0
    }), Object.defineProperty(t, 'angularSlop', {
      get: function () {
        return A.angularSlop
      }, enumerable: !1, configurable: !0
    }), Object.defineProperty(t, 'polygonRadius', {
      get: function () {
        return 2 * A.linearSlop
      }, enumerable: !1, configurable: !0
    }), Object.defineProperty(t, 'maxSubSteps', {
      get: function () {
        return A.maxSubSteps
      }, enumerable: !1, configurable: !0
    }), Object.defineProperty(t, 'maxTOIContacts', {
      get: function () {
        return A.maxTOIContacts
      }, enumerable: !1, configurable: !0
    }), Object.defineProperty(t, 'maxTOIIterations', {
      get: function () {
        return A.maxTOIIterations
      }, enumerable: !1, configurable: !0
    }), Object.defineProperty(t, 'maxDistanceIterations', {
      get: function () {
        return A.maxDistanceIterations
      }, enumerable: !1, configurable: !0
    }), Object.defineProperty(t, 'velocityThreshold', {
      get: function () {
        return A.velocityThreshold * A.lengthUnitsPerMeter
      }, enumerable: !1, configurable: !0
    }), Object.defineProperty(t, 'maxLinearCorrection', {
      get: function () {
        return A.maxLinearCorrection * A.lengthUnitsPerMeter
      }, enumerable: !1, configurable: !0
    }), Object.defineProperty(t, 'maxAngularCorrection', {
      get: function () {
        return A.maxAngularCorrection
      }, enumerable: !1, configurable: !0
    }), Object.defineProperty(t, 'maxTranslation', {
      get: function () {
        return A.maxTranslation * A.lengthUnitsPerMeter
      }, enumerable: !1, configurable: !0
    }), Object.defineProperty(t, 'maxTranslationSquared', {
      get: function () {
        return A.maxTranslation * A.lengthUnitsPerMeter * A.maxTranslation * A.lengthUnitsPerMeter
      }, enumerable: !1, configurable: !0
    }), Object.defineProperty(t, 'maxRotation', {
      get: function () {
        return A.maxRotation
      }, enumerable: !1, configurable: !0
    }), Object.defineProperty(t, 'maxRotationSquared', {
      get: function () {
        return A.maxRotation * A.maxRotation
      }, enumerable: !1, configurable: !0
    }), Object.defineProperty(t, 'baumgarte', {
      get: function () {
        return A.baumgarte
      }, enumerable: !1, configurable: !0
    }), Object.defineProperty(t, 'toiBaugarte', {
      get: function () {
        return A.toiBaugarte
      }, enumerable: !1, configurable: !0
    }), Object.defineProperty(t, 'timeToSleep', {
      get: function () {
        return A.timeToSleep
      }, enumerable: !1, configurable: !0
    }), Object.defineProperty(t, 'linearSleepTolerance', {
      get: function () {
        return A.linearSleepTolerance * A.lengthUnitsPerMeter
      }, enumerable: !1, configurable: !0
    }), Object.defineProperty(t, 'linearSleepToleranceSqr', {
      get: function () {
        return A.linearSleepTolerance * A.lengthUnitsPerMeter * A.linearSleepTolerance * A.lengthUnitsPerMeter
      }, enumerable: !1, configurable: !0
    }), Object.defineProperty(t, 'angularSleepTolerance', {
      get: function () {
        return A.angularSleepTolerance
      }, enumerable: !1, configurable: !0
    }), Object.defineProperty(t, 'angularSleepToleranceSqr', {
      get: function () {
        return A.angularSleepTolerance * A.angularSleepTolerance
      }, enumerable: !1, configurable: !0
    }), t
  }(), b = function () {
    function t (t) {
      this._list = [], this._max = 1 / 0, this._hasCreateFn = !1, this._createCount = 0, this._hasAllocateFn = !1, this._allocateCount = 0, this._hasReleaseFn = !1, this._releaseCount = 0, this._hasDisposeFn = !1, this._disposeCount = 0, this._list = [], this._max = t.max || this._max, this._createFn = t.create, this._hasCreateFn = 'function' == typeof this._createFn, this._allocateFn = t.allocate, this._hasAllocateFn = 'function' == typeof this._allocateFn, this._releaseFn = t.release, this._hasReleaseFn = 'function' == typeof this._releaseFn, this._disposeFn = t.dispose, this._hasDisposeFn = 'function' == typeof this._disposeFn
    }

    return t.prototype.max = function (t) {
      return 'number' == typeof t ? (this._max = t, this) : this._max
    }, t.prototype.size = function () {
      return this._list.length
    }, t.prototype.allocate = function () {
      var t
      return this._list.length > 0 ? t = this._list.shift() : (this._createCount++, t = this._hasCreateFn ? this._createFn() : {}), this._allocateCount++, this._hasAllocateFn && this._allocateFn(t), t
    }, t.prototype.release = function (t) {
      this._list.length < this._max ? (this._releaseCount++, this._hasReleaseFn && this._releaseFn(t), this._list.push(t)) : (this._disposeCount++, this._hasDisposeFn && (t = this._disposeFn(t)))
    }, t.prototype.toString = function () {
      return ' +' + this._createCount + ' >' + this._allocateCount + ' <' + this._releaseCount + ' -' + this._disposeCount + ' =' + this._list.length + '/' + this._max
    }, t
  }(), B = Math.abs, w = Math.max, V = function () {
    function t (t) {
      this.aabb = new v, this.userData = null, this.parent = null, this.child1 = null, this.child2 = null, this.height = -1, this.id = t
    }

    return t.prototype.toString = function () {
      return this.id + ': ' + this.userData
    }, t.prototype.isLeaf = function () {
      return null == this.child1
    }, t
  }(), C = new b({
    create: function () {
      return new V
    }, release: function (t) {
      t.userData = null, t.parent = null, t.child1 = null, t.child2 = null, t.height = -1, t.id = void 0
    }
  }), M = function () {
    function t () {
      this.inputPool = new b({
        create: function () {
          return {}
        }, release: function (t) {
        }
      }), this.stackPool = new b({
        create: function () {
          return []
        }, release: function (t) {
          t.length = 0
        }
      }), this.iteratorPool = new b({
        create: function () {
          return new I
        }, release: function (t) {
          t.close()
        }
      }), this.m_root = null, this.m_nodes = {}, this.m_lastProxyId = 0
    }

    return t.prototype.getUserData = function (t) {
      return this.m_nodes[t].userData
    }, t.prototype.getFatAABB = function (t) {
      return this.m_nodes[t].aabb
    }, t.prototype.allocateNode = function () {
      var t = C.allocate()
      return t.id = ++this.m_lastProxyId, this.m_nodes[t.id] = t, t
    }, t.prototype.freeNode = function (t) {
      delete this.m_nodes[t.id], C.release(t)
    }, t.prototype.createProxy = function (t, e) {
      var i = this.allocateNode()
      return i.aabb.set(t), v.extend(i.aabb, g.aabbExtension), i.userData = e, i.height = 0, this.insertLeaf(i), i.id
    }, t.prototype.destroyProxy = function (t) {
      var e = this.m_nodes[t]
      this.removeLeaf(e), this.freeNode(e)
    }, t.prototype.moveProxy = function (t, e, i) {
      var o = this.m_nodes[t]
      return !o.aabb.contains(e) && (this.removeLeaf(o), o.aabb.set(e), e = o.aabb, v.extend(e, g.aabbExtension), i.x < 0 ? e.lowerBound.x += i.x * g.aabbMultiplier : e.upperBound.x += i.x * g.aabbMultiplier, i.y < 0 ? e.lowerBound.y += i.y * g.aabbMultiplier : e.upperBound.y += i.y * g.aabbMultiplier, this.insertLeaf(o), !0)
    }, t.prototype.insertLeaf = function (t) {
      if (null == this.m_root) return this.m_root = t, void (this.m_root.parent = null)
      for (var e = t.aabb, i = this.m_root; !i.isLeaf();) {
        var o = i.child1, s = i.child2, n = i.aabb.getPerimeter(), r = v.combinedPerimeter(i.aabb, e), a = 2 * r,
          m = 2 * (r - n), h = v.combinedPerimeter(e, o.aabb) + m
        if (!o.isLeaf()) h -= o.aabb.getPerimeter()
        var c = v.combinedPerimeter(e, s.aabb) + m
        if (!s.isLeaf()) c -= s.aabb.getPerimeter()
        if (a < h && a < c) break
        i = h < c ? o : s
      }
      var _ = i, l = _.parent, u = this.allocateNode()
      for (u.parent = l, u.userData = null, u.aabb.combine(e, _.aabb), u.height = _.height + 1, null != l ? (l.child1 === _ ? l.child1 = u : l.child2 = u, u.child1 = _, u.child2 = t, _.parent = u, t.parent = u) : (u.child1 = _, u.child2 = t, _.parent = u, t.parent = u, this.m_root = u), i = t.parent; null != i;) {
        o = (i = this.balance(i)).child1, s = i.child2
        i.height = 1 + w(o.height, s.height), i.aabb.combine(o.aabb, s.aabb), i = i.parent
      }
    }, t.prototype.removeLeaf = function (t) {
      if (t !== this.m_root) {
        var e, i = t.parent, o = i.parent
        if (e = i.child1 === t ? i.child2 : i.child1, null != o) {
          o.child1 === i ? o.child1 = e : o.child2 = e, e.parent = o, this.freeNode(i)
          for (var s = o; null != s;) {
            var n = (s = this.balance(s)).child1, r = s.child2
            s.aabb.combine(n.aabb, r.aabb), s.height = 1 + w(n.height, r.height), s = s.parent
          }
        } else {
          this.m_root = e, e.parent = null, this.freeNode(i)
        }
      } else {
        this.m_root = null
      }
    }, t.prototype.balance = function (t) {
      var e = t
      if (e.isLeaf() || e.height < 2) return t
      var i = e.child1, o = e.child2, s = o.height - i.height
      if (s > 1) {
        var n = o.child1, r = o.child2
        return o.child1 = e, o.parent = e.parent, e.parent = o, null != o.parent ? o.parent.child1 === t ? o.parent.child1 = o : o.parent.child2 = o : this.m_root = o, n.height > r.height ? (o.child2 = n, e.child2 = r, r.parent = e, e.aabb.combine(i.aabb, r.aabb), o.aabb.combine(e.aabb, n.aabb), e.height = 1 + w(i.height, r.height), o.height = 1 + w(e.height, n.height)) : (o.child2 = r, e.child2 = n, n.parent = e, e.aabb.combine(i.aabb, n.aabb), o.aabb.combine(e.aabb, r.aabb), e.height = 1 + w(i.height, n.height), o.height = 1 + w(e.height, r.height)), o
      }
      if (s < -1) {
        var a = i.child1, m = i.child2
        return i.child1 = e, i.parent = e.parent, e.parent = i, null != i.parent ? i.parent.child1 === e ? i.parent.child1 = i : i.parent.child2 = i : this.m_root = i, a.height > m.height ? (i.child2 = a, e.child1 = m, m.parent = e, e.aabb.combine(o.aabb, m.aabb), i.aabb.combine(e.aabb, a.aabb), e.height = 1 + w(o.height, m.height), i.height = 1 + w(e.height, a.height)) : (i.child2 = m, e.child1 = a, a.parent = e, e.aabb.combine(o.aabb, a.aabb), i.aabb.combine(e.aabb, m.aabb), e.height = 1 + w(o.height, a.height), i.height = 1 + w(e.height, m.height)), i
      }
      return e
    }, t.prototype.getHeight = function () {
      return null == this.m_root ? 0 : this.m_root.height
    }, t.prototype.getAreaRatio = function () {
      if (null == this.m_root) return 0
      for (var t, e = this.m_root.aabb.getPerimeter(), i = 0, o = this.iteratorPool.allocate().preorder(this.m_root); t = o.next();) t.height < 0 || (i += t.aabb.getPerimeter())
      return this.iteratorPool.release(o), i / e
    }, t.prototype.computeHeight = function (t) {
      var e
      if ((e = void 0 !== t ? this.m_nodes[t] : this.m_root).isLeaf()) return 0
      var i = this.computeHeight(e.child1.id), o = this.computeHeight(e.child2.id)
      return 1 + w(i, o)
    }, t.prototype.validateStructure = function (t) {
      if (null != t) {
        this.m_root
        var e = t.child1, i = t.child2
        t.isLeaf() || (this.validateStructure(e), this.validateStructure(i))
      }
    }, t.prototype.validateMetrics = function (t) {
      if (null != t) {
        var e = t.child1, i = t.child2
        if (!t.isLeaf()) e.height, i.height, (new v).combine(e.aabb, i.aabb), this.validateMetrics(e), this.validateMetrics(i)
      }
    }, t.prototype.validate = function () {
    }, t.prototype.getMaxBalance = function () {
      for (var t, e = 0, i = this.iteratorPool.allocate().preorder(this.m_root); t = i.next();) {
        if (!(t.height <= 1)) {
          var o = B(t.child2.height - t.child1.height)
          e = w(e, o)
        }
      }
      return this.iteratorPool.release(i), e
    }, t.prototype.rebuildBottomUp = function () {
      for (var t, e = [], i = 0, o = this.iteratorPool.allocate().preorder(this.m_root); t = o.next();) t.height < 0 || (t.isLeaf() ? (t.parent = null, e[i] = t, ++i) : this.freeNode(t))
      for (this.iteratorPool.release(o); i > 1;) {
        for (var s = 1 / 0, n = -1, r = -1, a = 0; a < i; ++a) {
          for (var m = e[a].aabb, h = a + 1; h < i; ++h) {
            var c = e[h].aabb, _ = v.combinedPerimeter(m, c)
            _ < s && (n = a, r = h, s = _)
          }
        }
        var l = e[n], u = e[r], p = this.allocateNode()
        p.child1 = l, p.child2 = u, p.height = 1 + w(l.height, u.height), p.aabb.combine(l.aabb, u.aabb), p.parent = null, l.parent = p, u.parent = p, e[r] = e[i - 1], e[n] = p, --i
      }
      this.m_root = e[0]
    }, t.prototype.shiftOrigin = function (t) {
      for (var e, i = this.iteratorPool.allocate().preorder(this.m_root); e = i.next();) {
        var o = e.aabb
        o.lowerBound.x -= t.x, o.lowerBound.y -= t.y, o.upperBound.x -= t.x, o.upperBound.y -= t.y
      }
      this.iteratorPool.release(i)
    }, t.prototype.query = function (t, e) {
      var i = this.stackPool.allocate()
      for (i.push(this.m_root); i.length > 0;) {
        var o = i.pop()
        if (null != o) {
          if (v.testOverlap(o.aabb, t)) {
            if (o.isLeaf()) {
              if (!1 === e(o.id)) return
            } else {
              i.push(o.child1), i.push(o.child2)
            }
          }
        }
      }
      this.stackPool.release(i)
    }, t.prototype.rayCast = function (t, e) {
      var i = t.p1, o = t.p2, s = y.sub(o, i)
      s.normalize()
      var n = y.crossNumVec2(1, s), r = y.abs(n), a = t.maxFraction, m = new v, h = y.combine(1 - a, i, a, o)
      m.combinePoints(i, h)
      var c = this.stackPool.allocate(), _ = this.inputPool.allocate()
      for (c.push(this.m_root); c.length > 0;) {
        var l = c.pop()
        if (null != l && !1 !== v.testOverlap(l.aabb, m)) {
          var u = l.aabb.getCenter(), p = l.aabb.getExtents()
          if (!(B(y.dot(n, y.sub(i, u))) - y.dot(r, p) > 0)) {
            if (l.isLeaf()) {
              _.p1 = y.clone(t.p1), _.p2 = y.clone(t.p2), _.maxFraction = a
              var d = e(_, l.id)
              if (0 === d) return
              d > 0 && (a = d, h = y.combine(1 - a, i, a, o), m.combinePoints(i, h))
            } else {
              c.push(l.child1), c.push(l.child2)
            }
          }
        }
      }
      this.stackPool.release(c), this.inputPool.release(_)
    }, t
  }(), I = function () {
    function t () {
      this.parents = [], this.states = []
    }

    return t.prototype.preorder = function (t) {
      return this.parents.length = 0, this.parents.push(t), this.states.length = 0, this.states.push(0), this
    }, t.prototype.next = function () {
      for (; this.parents.length > 0;) {
        var t = this.parents.length - 1, e = this.parents[t]
        if (0 === this.states[t]) return this.states[t] = 1, e
        if (1 === this.states[t] && (this.states[t] = 2, e.child1)) return this.parents.push(e.child1), this.states.push(1), e.child1
        if (2 === this.states[t] && (this.states[t] = 3, e.child2)) return this.parents.push(e.child2), this.states.push(1), e.child2
        this.parents.pop(), this.states.pop()
      }
    }, t.prototype.close = function () {
      this.parents.length = 0
    }, t
  }(), P = Math.max, S = Math.min, T = function () {
    function t () {
      var t = this
      this.m_tree = new M, this.m_moveBuffer = [], this.query = function (e, i) {
        t.m_tree.query(e, i)
      }, this.queryCallback = function (e) {
        if (e === t.m_queryProxyId) return !0
        var i = S(e, t.m_queryProxyId), o = P(e, t.m_queryProxyId), s = t.m_tree.getUserData(i),
          n = t.m_tree.getUserData(o)
        return t.m_callback(s, n), !0
      }
    }

    return t.prototype.getUserData = function (t) {
      return this.m_tree.getUserData(t)
    }, t.prototype.testOverlap = function (t, e) {
      var i = this.m_tree.getFatAABB(t), o = this.m_tree.getFatAABB(e)
      return v.testOverlap(i, o)
    }, t.prototype.getFatAABB = function (t) {
      return this.m_tree.getFatAABB(t)
    }, t.prototype.getProxyCount = function () {
      return this.m_moveBuffer.length
    }, t.prototype.getTreeHeight = function () {
      return this.m_tree.getHeight()
    }, t.prototype.getTreeBalance = function () {
      return this.m_tree.getMaxBalance()
    }, t.prototype.getTreeQuality = function () {
      return this.m_tree.getAreaRatio()
    }, t.prototype.rayCast = function (t, e) {
      this.m_tree.rayCast(t, e)
    }, t.prototype.shiftOrigin = function (t) {
      this.m_tree.shiftOrigin(t)
    }, t.prototype.createProxy = function (t, e) {
      var i = this.m_tree.createProxy(t, e)
      return this.bufferMove(i), i
    }, t.prototype.destroyProxy = function (t) {
      this.unbufferMove(t), this.m_tree.destroyProxy(t)
    }, t.prototype.moveProxy = function (t, e, i) {
      this.m_tree.moveProxy(t, e, i) && this.bufferMove(t)
    }, t.prototype.touchProxy = function (t) {
      this.bufferMove(t)
    }, t.prototype.bufferMove = function (t) {
      this.m_moveBuffer.push(t)
    }, t.prototype.unbufferMove = function (t) {
      for (var e = 0; e < this.m_moveBuffer.length; ++e) this.m_moveBuffer[e] === t && (this.m_moveBuffer[e] = null)
    }, t.prototype.updatePairs = function (t) {
      for (this.m_callback = t; this.m_moveBuffer.length > 0;) {
        if (this.m_queryProxyId = this.m_moveBuffer.pop(), null !== this.m_queryProxyId) {
          var e = this.m_tree.getFatAABB(this.m_queryProxyId)
          this.m_tree.query(e, this.queryCallback)
        }
      }
    }, t
  }(), z = Math.sin, F = Math.cos, L = Math.sqrt

  function q (t, e) {
    return {x: t, y: e}
  }

  function k (t, e, i) {
    return t.x = e, t.y = i, t
  }

  function N (t, e) {
    return t.x = e.x, t.y = e.y, t
  }

  function j (t) {
    return t.x = 0, t.y = 0, t
  }

  function D (t) {
    return t.x = -t.x, t.y = -t.y, t
  }

  function O (t, e) {
    return t.x += e.x, t.y += e.y, t
  }

  function R (t, e) {
    return t.x -= e.x, t.y -= e.y, t
  }

  function E (t, e, i) {
    return t.x = e.x - i.x, t.y = e.y - i.y, t
  }

  function J (t, e) {
    return t.x *= e, t.y *= e, t
  }

  function Y (t, e, i) {
    return t.x = e * i.x, t.y = e * i.y, t
  }

  function W (t, e, i) {
    return t.x += e * i.x, t.y += e * i.y, t
  }

  function H (t, e, i) {
    return t.x -= e * i.x, t.y -= e * i.y, t
  }

  function U (t, e, i, o, s) {
    return t.x = e * i.x + o * s.x, t.y = e * i.y + o * s.y, t
  }

  function Z (t) {
    var e = L(t.x * t.x + t.y * t.y)
    if (e > 0) {
      var i = 1 / e
      t.x *= i, t.y *= i
    }
    return t
  }

  function K (t, e, i) {
    var o = i * e.y, s = -i * e.x
    return t.x = o, t.y = s, t
  }

  function X (t, e, i) {
    var o = -e * i.y, s = e * i.x
    return t.x = o, t.y = s, t
  }

  function G (t, e) {
    return t.x * e.y - t.y * e.x
  }

  function Q (t, e) {
    return t.x * e.x + t.y * e.y
  }

  function $ (t) {
    return t.x * t.x + t.y * t.y
  }

  function tt (t, e) {
    var i = t.x - e.x, o = t.y - e.y
    return L(i * i + o * o)
  }

  function et (t, e) {
    var i = t.x - e.x, o = t.y - e.y
    return i * i + o * o
  }

  function it (t, e, i) {
    return t.x = e.c * i.x - e.s * i.y, t.y = e.s * i.x + e.c * i.y, t
  }

  function ot (t, e, i) {
    var o = e.c * i.x + e.s * i.y, s = -e.s * i.x + e.c * i.y
    return t.x = o, t.y = s, t
  }

  function st (t, e, i) {
    return {p: q(t, e), q: (o = i, {s: z(o), c: F(o)})}
    var o
  }

  function nt (t, e) {
    return t.p.x = e.p.x, t.p.y = e.p.y, t.q.s = e.q.s, t.q.c = e.q.c, t
  }

  function rt (t, e, i) {
    var o = e.q.c * i.x - e.q.s * i.y + e.p.x, s = e.q.s * i.x + e.q.c * i.y + e.p.y
    return t.x = o, t.y = s, t
  }

  function at (t, e, i) {
    var o = i.x - e.p.x, s = i.y - e.p.y, n = e.q.c * o + e.q.s * s, r = -e.q.s * o + e.q.c * s
    return t.x = n, t.y = r, t
  }

  function mt (t, e, i, o) {
    var s = e.q.c * o.x - e.q.s * o.y + e.p.x, n = e.q.s * o.x + e.q.c * o.y + e.p.y, r = s - i.p.x, a = n - i.p.y,
      m = i.q.c * r + i.q.s * a, h = -i.q.s * r + i.q.c * a
    return t.x = m, t.y = h, t
  }

  function ht (t, e, i) {
    var o = e.q.c * i.q.c + e.q.s * i.q.s, s = e.q.c * i.q.s - e.q.s * i.q.c,
      n = e.q.c * (i.p.x - e.p.x) + e.q.s * (i.p.y - e.p.y), r = -e.q.s * (i.p.x - e.p.x) + e.q.c * (i.p.y - e.p.y)
    return t.q.c = o, t.q.s = s, t.p.x = n, t.p.y = r, t
  }

  var ct = Math.sin, _t = Math.cos, lt = Math.atan2, ut = function () {
    function t (e) {
      if (!(this instanceof t)) return new t(e)
      'number' == typeof e ? this.setAngle(e) : 'object' == typeof e ? this.setRot(e) : this.setIdentity()
    }

    return t.neo = function (e) {
      var i = Object.create(t.prototype)
      return i.setAngle(e), i
    }, t.clone = function (e) {
      var i = Object.create(t.prototype)
      return i.s = e.s, i.c = e.c, i
    }, t.identity = function () {
      var e = Object.create(t.prototype)
      return e.s = 0, e.c = 1, e
    }, t.isValid = function (t) {
      return null != t && (Number.isFinite(t.s) && Number.isFinite(t.c))
    }, t.assert = function (t) {
    }, t.prototype.setIdentity = function () {
      this.s = 0, this.c = 1
    }, t.prototype.set = function (t) {
      'object' == typeof t ? (this.s = t.s, this.c = t.c) : (this.s = ct(t), this.c = _t(t))
    }, t.prototype.setRot = function (t) {
      this.s = t.s, this.c = t.c
    }, t.prototype.setAngle = function (t) {
      this.s = ct(t), this.c = _t(t)
    }, t.prototype.getAngle = function () {
      return lt(this.s, this.c)
    }, t.prototype.getXAxis = function () {
      return y.neo(this.c, this.s)
    }, t.prototype.getYAxis = function () {
      return y.neo(-this.s, this.c)
    }, t.mul = function (e, i) {
      if ('c' in i && 's' in i) {
        var o = t.identity()
        return o.s = e.s * i.c + e.c * i.s, o.c = e.c * i.c - e.s * i.s, o
      }
      if ('x' in i && 'y' in i) return y.neo(e.c * i.x - e.s * i.y, e.s * i.x + e.c * i.y)
    }, t.mulRot = function (e, i) {
      var o = t.identity()
      return o.s = e.s * i.c + e.c * i.s, o.c = e.c * i.c - e.s * i.s, o
    }, t.mulVec2 = function (t, e) {
      return y.neo(t.c * e.x - t.s * e.y, t.s * e.x + t.c * e.y)
    }, t.mulSub = function (t, e, i) {
      var o = t.c * (e.x - i.x) - t.s * (e.y - i.y), s = t.s * (e.x - i.x) + t.c * (e.y - i.y)
      return y.neo(o, s)
    }, t.mulT = function (e, i) {
      if ('c' in i && 's' in i) {
        var o = t.identity()
        return o.s = e.c * i.s - e.s * i.c, o.c = e.c * i.c + e.s * i.s, o
      }
      if ('x' in i && 'y' in i) return y.neo(e.c * i.x + e.s * i.y, -e.s * i.x + e.c * i.y)
    }, t.mulTRot = function (e, i) {
      var o = t.identity()
      return o.s = e.c * i.s - e.s * i.c, o.c = e.c * i.c + e.s * i.s, o
    }, t.mulTVec2 = function (t, e) {
      return y.neo(t.c * e.x + t.s * e.y, -t.s * e.x + t.c * e.y)
    }, t
  }(), pt = Math.atan2, yt = Math.PI, dt = q(0, 0), ft = function () {
    function t () {
      this.localCenter = y.zero(), this.c = y.zero(), this.a = 0, this.alpha0 = 0, this.c0 = y.zero(), this.a0 = 0
    }

    return t.prototype.recycle = function () {
      j(this.localCenter), j(this.c), this.a = 0, this.alpha0 = 0, j(this.c0), this.a0 = 0
    }, t.prototype.setTransform = function (t) {
      rt(dt, t, this.localCenter), N(this.c, dt), N(this.c0, dt), this.a = this.a0 = pt(t.q.s, t.q.c)
    }, t.prototype.setLocalCenter = function (t, e) {
      N(this.localCenter, t), rt(dt, e, this.localCenter), N(this.c, dt), N(this.c0, dt)
    }, t.prototype.getTransform = function (t, e) {
      void 0 === e && (e = 0), function (t, e) {
        t.c = F(e), t.s = z(e)
      }(t.q, (1 - e) * this.a0 + e * this.a), U(t.p, 1 - e, this.c0, e, this.c), R(t.p, it(dt, t.q, this.localCenter))
    }, t.prototype.advance = function (t) {
      var e = (t - this.alpha0) / (1 - this.alpha0)
      U(this.c0, e, this.c, 1 - e, this.c0), this.a0 = e * this.a + (1 - e) * this.a0, this.alpha0 = t
    }, t.prototype.forward = function () {
      this.a0 = this.a, N(this.c0, this.c)
    }, t.prototype.normalize = function () {
      var t = m(this.a0, -yt, +yt)
      this.a -= this.a0 - t, this.a0 = t
    }, t.prototype.set = function (t) {
      N(this.localCenter, t.localCenter), N(this.c, t.c), this.a = t.a, this.alpha0 = t.alpha0, N(this.c0, t.c0), this.a0 = t.a0
    }, t
  }(), vt = function () {
    function t (e, i) {
      if (!(this instanceof t)) return new t(e, i)
      this.p = y.zero(), this.q = ut.identity(), void 0 !== e && this.p.setVec2(e), void 0 !== i && this.q.setAngle(i)
    }

    return t.clone = function (e) {
      var i = Object.create(t.prototype)
      return i.p = y.clone(e.p), i.q = ut.clone(e.q), i
    }, t.neo = function (e, i) {
      var o = Object.create(t.prototype)
      return o.p = y.clone(e), o.q = ut.clone(i), o
    }, t.identity = function () {
      var e = Object.create(t.prototype)
      return e.p = y.zero(), e.q = ut.identity(), e
    }, t.prototype.setIdentity = function () {
      this.p.setZero(), this.q.setIdentity()
    }, t.prototype.set = function (t, e) {
      void 0 === e ? (this.p.set(t.p), this.q.set(t.q)) : (this.p.set(t), this.q.set(e))
    }, t.prototype.setNum = function (t, e) {
      this.p.setVec2(t), this.q.setAngle(e)
    }, t.prototype.setTransform = function (t) {
      this.p.setVec2(t.p), this.q.setRot(t.q)
    }, t.isValid = function (t) {
      return null != t && (y.isValid(t.p) && ut.isValid(t.q))
    }, t.assert = function (t) {
    }, t.mul = function (e, i) {
      if (Array.isArray(i)) {
        for (var o = [], s = 0; s < i.length; s++) o[s] = t.mul(e, i[s])
        return o
      }
      return 'x' in i && 'y' in i ? t.mulVec2(e, i) : 'p' in i && 'q' in i ? t.mulXf(e, i) : void 0
    }, t.mulAll = function (e, i) {
      for (var o = [], s = 0; s < i.length; s++) o[s] = t.mul(e, i[s])
      return o
    }, t.mulFn = function (e) {
      return function (i) {
        return t.mul(e, i)
      }
    }, t.mulVec2 = function (t, e) {
      var i = t.q.c * e.x - t.q.s * e.y + t.p.x, o = t.q.s * e.x + t.q.c * e.y + t.p.y
      return y.neo(i, o)
    }, t.mulXf = function (e, i) {
      var o = t.identity()
      return o.q = ut.mulRot(e.q, i.q), o.p = y.add(ut.mulVec2(e.q, i.p), e.p), o
    }, t.mulT = function (e, i) {
      return 'x' in i && 'y' in i ? t.mulTVec2(e, i) : 'p' in i && 'q' in i ? t.mulTXf(e, i) : void 0
    }, t.mulTVec2 = function (t, e) {
      var i = e.x - t.p.x, o = e.y - t.p.y, s = t.q.c * i + t.q.s * o, n = -t.q.s * i + t.q.c * o
      return y.neo(s, n)
    }, t.mulTXf = function (e, i) {
      var o = t.identity()
      return o.q.setRot(ut.mulTRot(e.q, i.q)), o.p.setVec2(ut.mulTVec2(e.q, y.sub(i.p, e.p))), o
    }, t
  }(), xt = function () {
    this.v = y.zero(), this.w = 0
  }, At = Math.sin, gt = Math.cos, bt = function () {
    function t () {
      this.c = y.zero(), this.a = 0
    }

    return t.prototype.getTransform = function (t, e) {
      return t.q.c = gt(this.a), t.q.s = At(this.a), t.p.x = this.c.x - (t.q.c * e.x - t.q.s * e.y), t.p.y = this.c.y - (t.q.s * e.x + t.q.c * e.y), t
    }, t
  }()

  function Bt (t, e, i, o) {
    return t.q.c = gt(o), t.q.s = At(o), t.p.x = i.x - (t.q.c * e.x - t.q.s * e.y), t.p.y = i.y - (t.q.s * e.x + t.q.c * e.y), t
  }

  var wt = function () {
      function t () {
      }

      return t.isValid = function (t) {
        return null != t && ('string' == typeof t.m_type && 'number' == typeof t.m_radius)
      }, t
    }(), Vt = new v, Ct = new v, Mt = q(0, 0), It = {
      userData: null,
      friction: .2,
      restitution: 0,
      density: 0,
      isSensor: !1,
      filterGroupIndex: 0,
      filterCategoryBits: 1,
      filterMaskBits: 65535
    }, Pt = function (t, e) {
      this.aabb = new v, this.fixture = t, this.childIndex = e, this.proxyId
    }, St = function () {
      function t (t, e, i) {
        e.shape ? (i = e, e = e.shape) : 'number' == typeof i && (i = {density: i}), i = s(i, It), this.m_body = t, this.m_friction = i.friction, this.m_restitution = i.restitution, this.m_density = i.density, this.m_isSensor = i.isSensor, this.m_filterGroupIndex = i.filterGroupIndex, this.m_filterCategoryBits = i.filterCategoryBits, this.m_filterMaskBits = i.filterMaskBits, this.m_shape = e, this.m_next = null, this.m_proxies = [], this.m_proxyCount = 0
        for (var o = this.m_shape.getChildCount(), n = 0; n < o; ++n) this.m_proxies[n] = new Pt(this, n)
        this.m_userData = i.userData
      }

      return t.prototype._reset = function () {
        var t = this.getBody(), e = t.m_world.m_broadPhase
        this.destroyProxies(e), this.m_shape._reset && this.m_shape._reset()
        for (var i = this.m_shape.getChildCount(), o = 0; o < i; ++o) this.m_proxies[o] = new Pt(this, o)
        this.createProxies(e, t.m_xf), t.resetMassData()
      }, t.prototype._serialize = function () {
        return {
          friction: this.m_friction,
          restitution: this.m_restitution,
          density: this.m_density,
          isSensor: this.m_isSensor,
          filterGroupIndex: this.m_filterGroupIndex,
          filterCategoryBits: this.m_filterCategoryBits,
          filterMaskBits: this.m_filterMaskBits,
          shape: this.m_shape
        }
      }, t._deserialize = function (e, i, o) {
        var s = o(wt, e.shape)
        return s && new t(i, s, e)
      }, t.prototype.getType = function () {
        return this.m_shape.m_type
      }, t.prototype.getShape = function () {
        return this.m_shape
      }, t.prototype.isSensor = function () {
        return this.m_isSensor
      }, t.prototype.setSensor = function (t) {
        t != this.m_isSensor && (this.m_body.setAwake(!0), this.m_isSensor = t)
      }, t.prototype.getUserData = function () {
        return this.m_userData
      }, t.prototype.setUserData = function (t) {
        this.m_userData = t
      }, t.prototype.getBody = function () {
        return this.m_body
      }, t.prototype.getNext = function () {
        return this.m_next
      }, t.prototype.getDensity = function () {
        return this.m_density
      }, t.prototype.setDensity = function (t) {
        this.m_density = t
      }, t.prototype.getFriction = function () {
        return this.m_friction
      }, t.prototype.setFriction = function (t) {
        this.m_friction = t
      }, t.prototype.getRestitution = function () {
        return this.m_restitution
      }, t.prototype.setRestitution = function (t) {
        this.m_restitution = t
      }, t.prototype.testPoint = function (t) {
        return this.m_shape.testPoint(this.m_body.getTransform(), t)
      }, t.prototype.rayCast = function (t, e, i) {
        return this.m_shape.rayCast(t, e, this.m_body.getTransform(), i)
      }, t.prototype.getMassData = function (t) {
        this.m_shape.computeMass(t, this.m_density)
      }, t.prototype.getAABB = function (t) {
        return this.m_proxies[t].aabb
      }, t.prototype.createProxies = function (t, e) {
        this.m_proxyCount = this.m_shape.getChildCount()
        for (var i = 0; i < this.m_proxyCount; ++i) {
          var o = this.m_proxies[i]
          this.m_shape.computeAABB(o.aabb, e, i), o.proxyId = t.createProxy(o.aabb, o)
        }
      }, t.prototype.destroyProxies = function (t) {
        for (var e = 0; e < this.m_proxyCount; ++e) {
          var i = this.m_proxies[e]
          t.destroyProxy(i.proxyId), i.proxyId = null
        }
        this.m_proxyCount = 0
      }, t.prototype.synchronize = function (t, e, i) {
        for (var o = 0; o < this.m_proxyCount; ++o) {
          var s = this.m_proxies[o]
          this.m_shape.computeAABB(Vt, e, s.childIndex), this.m_shape.computeAABB(Ct, i, s.childIndex), s.aabb.combine(Vt, Ct), E(Mt, i.p, e.p), t.moveProxy(s.proxyId, s.aabb, Mt)
        }
      }, t.prototype.setFilterData = function (t) {
        this.m_filterGroupIndex = t.groupIndex, this.m_filterCategoryBits = t.categoryBits, this.m_filterMaskBits = t.maskBits, this.refilter()
      }, t.prototype.getFilterGroupIndex = function () {
        return this.m_filterGroupIndex
      }, t.prototype.setFilterGroupIndex = function (t) {
        this.m_filterGroupIndex = t, this.refilter()
      }, t.prototype.getFilterCategoryBits = function () {
        return this.m_filterCategoryBits
      }, t.prototype.setFilterCategoryBits = function (t) {
        this.m_filterCategoryBits = t, this.refilter()
      }, t.prototype.getFilterMaskBits = function () {
        return this.m_filterMaskBits
      }, t.prototype.setFilterMaskBits = function (t) {
        this.m_filterMaskBits = t, this.refilter()
      }, t.prototype.refilter = function () {
        if (null != this.m_body) {
          for (var t = this.m_body.getContactList(); t;) {
            var e = t.contact, i = e.getFixtureA(), o = e.getFixtureB()
            i != this && o != this || e.flagForFiltering(), t = t.next
          }
          var s = this.m_body.getWorld()
          if (null != s) for (var n = s.m_broadPhase, r = 0; r < this.m_proxyCount; ++r) n.touchProxy(this.m_proxies[r].proxyId)
        }
      }, t.prototype.shouldCollide = function (t) {
        if (t.m_filterGroupIndex === this.m_filterGroupIndex && 0 !== t.m_filterGroupIndex) return t.m_filterGroupIndex > 0
        var e = 0 != (t.m_filterMaskBits & this.m_filterCategoryBits),
          i = 0 != (t.m_filterCategoryBits & this.m_filterMaskBits)
        return e && i
      }, t
    }(), Tt = 'static', zt = 'kinematic', Ft = 'dynamic', Lt = q(0, 0), qt = q(0, 0), kt = q(0, 0), Nt = q(0, 0),
    jt = st(0, 0, 0), Dt = {
      type: Tt,
      position: y.zero(),
      angle: 0,
      linearVelocity: y.zero(),
      angularVelocity: 0,
      linearDamping: 0,
      angularDamping: 0,
      fixedRotation: !1,
      bullet: !1,
      gravityScale: 1,
      allowSleep: !0,
      awake: !0,
      active: !0,
      userData: null
    }, Ot = function () {
      function t (t, e) {
        e = s(e, Dt), this.m_world = t, this.m_awakeFlag = e.awake, this.m_autoSleepFlag = e.allowSleep, this.m_bulletFlag = e.bullet, this.m_fixedRotationFlag = e.fixedRotation, this.m_activeFlag = e.active, this.m_islandFlag = !1, this.m_toiFlag = !1, this.m_userData = e.userData, this.m_type = e.type, this.m_type == Ft ? (this.m_mass = 1, this.m_invMass = 1) : (this.m_mass = 0, this.m_invMass = 0), this.m_I = 0, this.m_invI = 0, this.m_xf = vt.identity(), this.m_xf.p.setVec2(e.position), this.m_xf.q.setAngle(e.angle), this.m_sweep = new ft, this.m_sweep.setTransform(this.m_xf), this.c_velocity = new xt, this.c_position = new bt, this.m_force = y.zero(), this.m_torque = 0, this.m_linearVelocity = y.clone(e.linearVelocity), this.m_angularVelocity = e.angularVelocity, this.m_linearDamping = e.linearDamping, this.m_angularDamping = e.angularDamping, this.m_gravityScale = e.gravityScale, this.m_sleepTime = 0, this.m_jointList = null, this.m_contactList = null, this.m_fixtureList = null, this.m_prev = null, this.m_next = null, this.m_destroyed = !1
      }

      return t.prototype._serialize = function () {
        for (var t = [], e = this.m_fixtureList; e; e = e.m_next) t.push(e)
        return {
          type: this.m_type,
          bullet: this.m_bulletFlag,
          position: this.m_xf.p,
          angle: this.m_xf.q.getAngle(),
          linearVelocity: this.m_linearVelocity,
          angularVelocity: this.m_angularVelocity,
          fixtures: t
        }
      }, t._deserialize = function (e, i, o) {
        var s = new t(i, e)
        if (e.fixtures) {
          for (var n = e.fixtures.length - 1; n >= 0; n--) {
            var r = o(St, e.fixtures[n], s)
            s._addFixture(r)
          }
        }
        return s
      }, t.prototype.isWorldLocked = function () {
        return !(!this.m_world || !this.m_world.isLocked())
      }, t.prototype.getWorld = function () {
        return this.m_world
      }, t.prototype.getNext = function () {
        return this.m_next
      }, t.prototype.setUserData = function (t) {
        this.m_userData = t
      }, t.prototype.getUserData = function () {
        return this.m_userData
      }, t.prototype.getFixtureList = function () {
        return this.m_fixtureList
      }, t.prototype.getJointList = function () {
        return this.m_jointList
      }, t.prototype.getContactList = function () {
        return this.m_contactList
      }, t.prototype.isStatic = function () {
        return this.m_type == Tt
      }, t.prototype.isDynamic = function () {
        return this.m_type == Ft
      }, t.prototype.isKinematic = function () {
        return this.m_type == zt
      }, t.prototype.setStatic = function () {
        return this.setType(Tt), this
      }, t.prototype.setDynamic = function () {
        return this.setType(Ft), this
      }, t.prototype.setKinematic = function () {
        return this.setType(zt), this
      }, t.prototype.getType = function () {
        return this.m_type
      }, t.prototype.setType = function (t) {
        if (1 != this.isWorldLocked() && this.m_type != t) {
          this.m_type = t, this.resetMassData(), this.m_type == Tt && (this.m_linearVelocity.setZero(), this.m_angularVelocity = 0, this.m_sweep.forward(), this.synchronizeFixtures()), this.setAwake(!0), this.m_force.setZero(), this.m_torque = 0
          for (var e = this.m_contactList; e;) {
            var i = e
            e = e.next, this.m_world.destroyContact(i.contact)
          }
          this.m_contactList = null
          for (var o = this.m_world.m_broadPhase, s = this.m_fixtureList; s; s = s.m_next) for (var n = 0; n < s.m_proxyCount; ++n) o.touchProxy(s.m_proxies[n].proxyId)
        }
      }, t.prototype.isBullet = function () {
        return this.m_bulletFlag
      }, t.prototype.setBullet = function (t) {
        this.m_bulletFlag = !!t
      }, t.prototype.isSleepingAllowed = function () {
        return this.m_autoSleepFlag
      }, t.prototype.setSleepingAllowed = function (t) {
        this.m_autoSleepFlag = !!t, 0 == this.m_autoSleepFlag && this.setAwake(!0)
      }, t.prototype.isAwake = function () {
        return this.m_awakeFlag
      }, t.prototype.setAwake = function (t) {
        t ? (this.m_awakeFlag = !0, this.m_sleepTime = 0) : (this.m_awakeFlag = !1, this.m_sleepTime = 0, this.m_linearVelocity.setZero(), this.m_angularVelocity = 0, this.m_force.setZero(), this.m_torque = 0)
      }, t.prototype.isActive = function () {
        return this.m_activeFlag
      }, t.prototype.setActive = function (t) {
        if (t != this.m_activeFlag) {
          if (this.m_activeFlag = !!t, this.m_activeFlag) {
            for (var e = this.m_world.m_broadPhase, i = this.m_fixtureList; i; i = i.m_next) i.createProxies(e, this.m_xf)
            this.m_world.m_newFixture = !0
          } else {
            for (e = this.m_world.m_broadPhase, i = this.m_fixtureList; i; i = i.m_next) i.destroyProxies(e)
            for (var o = this.m_contactList; o;) {
              var s = o
              o = o.next, this.m_world.destroyContact(s.contact)
            }
            this.m_contactList = null
          }
        }
      }, t.prototype.isFixedRotation = function () {
        return this.m_fixedRotationFlag
      }, t.prototype.setFixedRotation = function (t) {
        this.m_fixedRotationFlag != t && (this.m_fixedRotationFlag = !!t, this.m_angularVelocity = 0, this.resetMassData())
      }, t.prototype.getTransform = function () {
        return this.m_xf
      }, t.prototype.setTransform = function (t, e) {
        if (1 != this.isWorldLocked()) {
          this.m_xf.setNum(t, e), this.m_sweep.setTransform(this.m_xf)
          for (var i = this.m_world.m_broadPhase, o = this.m_fixtureList; o; o = o.m_next) o.synchronize(i, this.m_xf, this.m_xf)
          this.setAwake(!0)
        }
      }, t.prototype.synchronizeTransform = function () {
        this.m_sweep.getTransform(this.m_xf, 1)
      }, t.prototype.synchronizeFixtures = function () {
        this.m_sweep.getTransform(jt, 0)
        for (var t = this.m_world.m_broadPhase, e = this.m_fixtureList; e; e = e.m_next) e.synchronize(t, jt, this.m_xf)
      }, t.prototype.advance = function (t) {
        this.m_sweep.advance(t), N(this.m_sweep.c, this.m_sweep.c0), this.m_sweep.a = this.m_sweep.a0, this.m_sweep.getTransform(this.m_xf, 1)
      }, t.prototype.getPosition = function () {
        return this.m_xf.p
      }, t.prototype.setPosition = function (t) {
        this.setTransform(t, this.m_sweep.a)
      }, t.prototype.getAngle = function () {
        return this.m_sweep.a
      }, t.prototype.setAngle = function (t) {
        this.setTransform(this.m_xf.p, t)
      }, t.prototype.getWorldCenter = function () {
        return this.m_sweep.c
      }, t.prototype.getLocalCenter = function () {
        return this.m_sweep.localCenter
      }, t.prototype.getLinearVelocity = function () {
        return this.m_linearVelocity
      }, t.prototype.getLinearVelocityFromWorldPoint = function (t) {
        var e = y.sub(t, this.m_sweep.c)
        return y.add(this.m_linearVelocity, y.crossNumVec2(this.m_angularVelocity, e))
      }, t.prototype.getLinearVelocityFromLocalPoint = function (t) {
        return this.getLinearVelocityFromWorldPoint(this.getWorldPoint(t))
      }, t.prototype.setLinearVelocity = function (t) {
        this.m_type != Tt && (y.dot(t, t) > 0 && this.setAwake(!0), this.m_linearVelocity.setVec2(t))
      }, t.prototype.getAngularVelocity = function () {
        return this.m_angularVelocity
      }, t.prototype.setAngularVelocity = function (t) {
        this.m_type != Tt && (t * t > 0 && this.setAwake(!0), this.m_angularVelocity = t)
      }, t.prototype.getLinearDamping = function () {
        return this.m_linearDamping
      }, t.prototype.setLinearDamping = function (t) {
        this.m_linearDamping = t
      }, t.prototype.getAngularDamping = function () {
        return this.m_angularDamping
      }, t.prototype.setAngularDamping = function (t) {
        this.m_angularDamping = t
      }, t.prototype.getGravityScale = function () {
        return this.m_gravityScale
      }, t.prototype.setGravityScale = function (t) {
        this.m_gravityScale = t
      }, t.prototype.getMass = function () {
        return this.m_mass
      }, t.prototype.getInertia = function () {
        return this.m_I + this.m_mass * y.dot(this.m_sweep.localCenter, this.m_sweep.localCenter)
      }, t.prototype.getMassData = function (t) {
        t.mass = this.m_mass, t.I = this.getInertia(), N(t.center, this.m_sweep.localCenter)
      }, t.prototype.resetMassData = function () {
        if (this.m_mass = 0, this.m_invMass = 0, this.m_I = 0, this.m_invI = 0, j(this.m_sweep.localCenter), this.isStatic() || this.isKinematic()) return N(this.m_sweep.c0, this.m_xf.p), N(this.m_sweep.c, this.m_xf.p), void (this.m_sweep.a0 = this.m_sweep.a)
        j(qt)
        for (var t = this.m_fixtureList; t; t = t.m_next) {
          if (0 != t.m_density) {
            var e = {mass: 0, center: q(0, 0), I: 0}
            t.getMassData(e), this.m_mass += e.mass, W(qt, e.mass, e.center), this.m_I += e.I
          }
        }
        this.m_mass > 0 ? (this.m_invMass = 1 / this.m_mass, Y(qt, this.m_invMass, qt)) : (this.m_mass = 1, this.m_invMass = 1), this.m_I > 0 && 0 == this.m_fixedRotationFlag ? (this.m_I -= this.m_mass * Q(qt, qt), this.m_invI = 1 / this.m_I) : (this.m_I = 0, this.m_invI = 0), N(Lt, this.m_sweep.c), this.m_sweep.setLocalCenter(qt, this.m_xf), E(kt, this.m_sweep.c, Lt), X(Nt, this.m_angularVelocity, kt), O(this.m_linearVelocity, Nt)
      }, t.prototype.setMassData = function (t) {
        1 != this.isWorldLocked() && this.m_type == Ft && (this.m_invMass = 0, this.m_I = 0, this.m_invI = 0, this.m_mass = t.mass, this.m_mass <= 0 && (this.m_mass = 1), this.m_invMass = 1 / this.m_mass, t.I > 0 && 0 == this.m_fixedRotationFlag && (this.m_I = t.I - this.m_mass * Q(t.center, t.center), this.m_invI = 1 / this.m_I), N(Lt, this.m_sweep.c), this.m_sweep.setLocalCenter(t.center, this.m_xf), E(kt, this.m_sweep.c, Lt), X(Nt, this.m_angularVelocity, kt), O(this.m_linearVelocity, Nt))
      }, t.prototype.applyForce = function (t, e, i) {
        void 0 === i && (i = !0), this.m_type == Ft && (i && 0 == this.m_awakeFlag && this.setAwake(!0), this.m_awakeFlag && (this.m_force.add(t), this.m_torque += y.crossVec2Vec2(y.sub(e, this.m_sweep.c), t)))
      }, t.prototype.applyForceToCenter = function (t, e) {
        void 0 === e && (e = !0), this.m_type == Ft && (e && 0 == this.m_awakeFlag && this.setAwake(!0), this.m_awakeFlag && this.m_force.add(t))
      }, t.prototype.applyTorque = function (t, e) {
        void 0 === e && (e = !0), this.m_type == Ft && (e && 0 == this.m_awakeFlag && this.setAwake(!0), this.m_awakeFlag && (this.m_torque += t))
      }, t.prototype.applyLinearImpulse = function (t, e, i) {
        void 0 === i && (i = !0), this.m_type == Ft && (i && 0 == this.m_awakeFlag && this.setAwake(!0), this.m_awakeFlag && (this.m_linearVelocity.addMul(this.m_invMass, t), this.m_angularVelocity += this.m_invI * y.crossVec2Vec2(y.sub(e, this.m_sweep.c), t)))
      }, t.prototype.applyAngularImpulse = function (t, e) {
        void 0 === e && (e = !0), this.m_type == Ft && (e && 0 == this.m_awakeFlag && this.setAwake(!0), this.m_awakeFlag && (this.m_angularVelocity += this.m_invI * t))
      }, t.prototype.shouldCollide = function (t) {
        if (this.m_type != Ft && t.m_type != Ft) return !1
        for (var e = this.m_jointList; e; e = e.next) if (e.other == t && 0 == e.joint.m_collideConnected) return !1
        return !0
      }, t.prototype._addFixture = function (t) {
        if (1 == this.isWorldLocked()) return null
        if (this.m_activeFlag) {
          var e = this.m_world.m_broadPhase
          t.createProxies(e, this.m_xf)
        }
        return t.m_next = this.m_fixtureList, this.m_fixtureList = t, t.m_density > 0 && this.resetMassData(), this.m_world.m_newFixture = !0, t
      }, t.prototype.createFixture = function (t, e) {
        if (1 == this.isWorldLocked()) return null
        var i = new St(this, t, e)
        return this._addFixture(i), i
      }, t.prototype.destroyFixture = function (t) {
        if (1 != this.isWorldLocked()) {
          if (this.m_fixtureList === t) {
            this.m_fixtureList = t.m_next
          } else {
            for (var e = this.m_fixtureList; null != e;) {
              if (e.m_next === t) {
                e.m_next = t.m_next
                break
              }
              e = e.m_next
            }
          }
          for (var i = this.m_contactList; i;) {
            var o = i.contact
            i = i.next
            var s = o.getFixtureA(), n = o.getFixtureB()
            t != s && t != n || this.m_world.destroyContact(o)
          }
          if (this.m_activeFlag) {
            var r = this.m_world.m_broadPhase
            t.destroyProxies(r)
          }
          t.m_body = null, t.m_next = null, this.m_world.publish('remove-fixture', t), this.resetMassData()
        }
      }, t.prototype.getWorldPoint = function (t) {
        return vt.mulVec2(this.m_xf, t)
      }, t.prototype.getWorldVector = function (t) {
        return ut.mulVec2(this.m_xf.q, t)
      }, t.prototype.getLocalPoint = function (t) {
        return vt.mulTVec2(this.m_xf, t)
      }, t.prototype.getLocalVector = function (t) {
        return ut.mulTVec2(this.m_xf.q, t)
      }, t.STATIC = 'static', t.KINEMATIC = 'kinematic', t.DYNAMIC = 'dynamic', t
    }(), Rt = function () {
      this.other = null, this.joint = null, this.prev = null, this.next = null
    }, Et = function () {
      function t (t, e, i) {
        this.m_type = 'unknown-joint', this.m_prev = null, this.m_next = null, this.m_edgeA = new Rt, this.m_edgeB = new Rt, this.m_islandFlag = !1, e = 'bodyA' in t ? t.bodyA : e, i = 'bodyB' in t ? t.bodyB : i, this.m_bodyA = e, this.m_bodyB = i, this.m_collideConnected = !!t.collideConnected, this.m_userData = t.userData
      }

      return t.prototype.isActive = function () {
        return this.m_bodyA.isActive() && this.m_bodyB.isActive()
      }, t.prototype.getType = function () {
        return this.m_type
      }, t.prototype.getBodyA = function () {
        return this.m_bodyA
      }, t.prototype.getBodyB = function () {
        return this.m_bodyB
      }, t.prototype.getNext = function () {
        return this.m_next
      }, t.prototype.getUserData = function () {
        return this.m_userData
      }, t.prototype.setUserData = function (t) {
        this.m_userData = t
      }, t.prototype.getCollideConnected = function () {
        return this.m_collideConnected
      }, t.prototype.shiftOrigin = function (t) {
      }, t
    }(), Jt = {
      gjkCalls: 0,
      gjkIters: 0,
      gjkMaxIters: 0,
      toiTime: 0,
      toiMaxTime: 0,
      toiCalls: 0,
      toiIters: 0,
      toiMaxIters: 0,
      toiRootIters: 0,
      toiMaxRootIters: 0,
      toString: function (t) {
        t = 'string' == typeof t ? t : '\n'
        var e = ''
        for (var i in this) 'function' != typeof this[i] && 'object' != typeof this[i] && (e += i + ': ' + this[i] + t)
        return e
      }
    }, Yt = function () {
      return Date.now()
    }, Wt = function (t) {
      return Date.now() - t
    }, Ht = Math.max, Ut = q(0, 0), Zt = q(0, 0), Kt = q(0, 0), Xt = q(0, 0), Gt = q(0, 0), Qt = q(0, 0), $t = q(0, 0)
  Jt.gjkCalls = 0, Jt.gjkIters = 0, Jt.gjkMaxIters = 0
  var te = function () {
    function t () {
      this.proxyA = new se, this.proxyB = new se, this.transformA = vt.identity(), this.transformB = vt.identity(), this.useRadii = !1
    }

    return t.prototype.recycle = function () {
      this.proxyA.recycle(), this.proxyB.recycle(), this.transformA.setIdentity(), this.transformB.setIdentity(), this.useRadii = !1
    }, t
  }(), ee = function () {
    function t () {
      this.pointA = q(0, 0), this.pointB = q(0, 0), this.distance = 0, this.iterations = 0
    }

    return t.prototype.recycle = function () {
      j(this.pointA), j(this.pointB), this.distance = 0, this.iterations = 0
    }, t
  }(), ie = function () {
    function t () {
      this.metric = 0, this.indexA = [], this.indexB = [], this.count = 0
    }

    return t.prototype.recycle = function () {
      this.metric = 0, this.indexA.length = 0, this.indexB.length = 0, this.count = 0
    }, t
  }(), oe = function (t, e, i) {
    ++Jt.gjkCalls
    var o = i.proxyA, s = i.proxyB, n = i.transformA, a = i.transformB
    he.recycle(), he.readCache(e, o, n, s, a)
    for (var m = he.m_v, h = g.maxDistanceIterations, c = [], _ = [], l = 0, u = 0; u < h;) {
      l = he.m_count
      for (var p = 0; p < l; ++p) c[p] = m[p].indexA, _[p] = m[p].indexB
      if (he.solve(), 3 === he.m_count) break
      var y = he.getSearchDirection()
      if ($(y) < 1e-18) break
      var d = m[he.m_count]
      d.indexA = o.getSupport(ot(Ut, n.q, Y(Ut, -1, y))), rt(d.wA, n, o.getVertex(d.indexA)), d.indexB = s.getSupport(ot(Ut, a.q, y)), rt(d.wB, a, s.getVertex(d.indexB)), E(d.w, d.wB, d.wA), ++u, ++Jt.gjkIters
      var f = !1
      for (p = 0; p < l; ++p) {
        if (d.indexA === c[p] && d.indexB === _[p]) {
          f = !0
          break
        }
      }
      if (f) break
      ++he.m_count
    }
    if (Jt.gjkMaxIters = Ht(Jt.gjkMaxIters, u), he.getWitnessPoints(t.pointA, t.pointB), t.distance = tt(t.pointA, t.pointB), t.iterations = u, he.writeCache(e), i.useRadii) {
      var v = o.m_radius, x = s.m_radius
      if (t.distance > v + x && t.distance > r) {
        t.distance -= v + x, E(Zt, t.pointB, t.pointA), Z(Zt), W(t.pointA, v, Zt), H(t.pointB, x, Zt)
      } else {
        var A = E(Ut, t.pointA, t.pointB)
        N(t.pointA, A), N(t.pointB, A), t.distance = 0
      }
    }
  }, se = function () {
    function t () {
      this.m_vertices = [], this.m_count = 0, this.m_radius = 0
    }

    return t.prototype.recycle = function () {
      this.m_vertices.length = 0, this.m_count = 0, this.m_radius = 0
    }, t.prototype.getVertexCount = function () {
      return this.m_count
    }, t.prototype.getVertex = function (t) {
      return this.m_vertices[t]
    }, t.prototype.getSupport = function (t) {
      for (var e = -1, i = -1 / 0, o = 0; o < this.m_count; ++o) {
        var s = Q(this.m_vertices[o], t)
        s > i && (e = o, i = s)
      }
      return e
    }, t.prototype.getSupportVertex = function (t) {
      return this.m_vertices[this.getSupport(t)]
    }, t.prototype.set = function (t, e) {
      t.computeDistanceProxy(this, e)
    }, t.prototype.setVertices = function (t, e, i) {
      this.m_vertices = t, this.m_count = e, this.m_radius = i
    }, t
  }(), ne = function () {
    function t () {
      this.wA = q(0, 0), this.indexA = 0, this.wB = q(0, 0), this.indexB = 0, this.w = q(0, 0), this.a = 0
    }

    return t.prototype.recycle = function () {
      this.indexA = 0, this.indexB = 0, j(this.wA), j(this.wB), j(this.w), this.a = 0
    }, t.prototype.set = function (t) {
      this.indexA = t.indexA, this.indexB = t.indexB, N(this.wA, t.wA), N(this.wB, t.wB), N(this.w, t.w), this.a = t.a
    }, t
  }(), re = q(0, 0), ae = q(0, 0), me = function () {
    function t () {
      this.m_v1 = new ne, this.m_v2 = new ne, this.m_v3 = new ne, this.m_v = [this.m_v1, this.m_v2, this.m_v3]
    }

    return t.prototype.recycle = function () {
      this.m_v1.recycle(), this.m_v2.recycle(), this.m_v3.recycle(), this.m_count = 0
    }, t.prototype.toString = function () {
      return 3 === this.m_count ? ['+' + this.m_count, this.m_v1.a, this.m_v1.wA.x, this.m_v1.wA.y, this.m_v1.wB.x, this.m_v1.wB.y, this.m_v2.a, this.m_v2.wA.x, this.m_v2.wA.y, this.m_v2.wB.x, this.m_v2.wB.y, this.m_v3.a, this.m_v3.wA.x, this.m_v3.wA.y, this.m_v3.wB.x, this.m_v3.wB.y].toString() : 2 === this.m_count ? ['+' + this.m_count, this.m_v1.a, this.m_v1.wA.x, this.m_v1.wA.y, this.m_v1.wB.x, this.m_v1.wB.y, this.m_v2.a, this.m_v2.wA.x, this.m_v2.wA.y, this.m_v2.wB.x, this.m_v2.wB.y].toString() : 1 === this.m_count ? ['+' + this.m_count, this.m_v1.a, this.m_v1.wA.x, this.m_v1.wA.y, this.m_v1.wB.x, this.m_v1.wB.y].toString() : '+' + this.m_count
    }, t.prototype.readCache = function (t, e, i, o, s) {
      this.m_count = t.count
      for (var n = 0; n < this.m_count; ++n) {
        (_ = this.m_v[n]).indexA = t.indexA[n], _.indexB = t.indexB[n]
        var a = e.getVertex(_.indexA), m = o.getVertex(_.indexB)
        rt(_.wA, i, a), rt(_.wB, s, m), E(_.w, _.wB, _.wA), _.a = 0
      }
      if (this.m_count > 1) {
        var h = t.metric, c = this.getMetric();
        (c < .5 * h || 2 * h < c || c < r) && (this.m_count = 0)
      }
      if (0 === this.m_count) {
        var _;
        (_ = this.m_v[0]).indexA = 0, _.indexB = 0
        a = e.getVertex(0), m = o.getVertex(0)
        rt(_.wA, i, a), rt(_.wB, s, m), E(_.w, _.wB, _.wA), _.a = 1, this.m_count = 1
      }
    }, t.prototype.writeCache = function (t) {
      t.metric = this.getMetric(), t.count = this.m_count
      for (var e = 0; e < this.m_count; ++e) t.indexA[e] = this.m_v[e].indexA, t.indexB[e] = this.m_v[e].indexB
    }, t.prototype.getSearchDirection = function () {
      var t = this.m_v1, e = this.m_v2
      switch (this.m_v3, this.m_count) {
        case 1:
          return k(re, -t.w.x, -t.w.y)
        case 2:
          return E(Kt, e.w, t.w), -G(Kt, t.w) > 0 ? k(re, -Kt.y, Kt.x) : k(re, Kt.y, -Kt.x)
        default:
          return j(re)
      }
    }, t.prototype.getClosestPoint = function () {
      var t = this.m_v1, e = this.m_v2
      switch (this.m_v3, this.m_count) {
        case 0:
          return j(ae)
        case 1:
          return N(ae, t.w)
        case 2:
          return U(ae, t.a, t.w, e.a, e.w)
        case 3:
        default:
          return j(ae)
      }
    }, t.prototype.getWitnessPoints = function (t, e) {
      var i = this.m_v1, o = this.m_v2, s = this.m_v3
      switch (this.m_count) {
        case 0:
          break
        case 1:
          N(t, i.wA), N(e, i.wB)
          break
        case 2:
          U(t, i.a, i.wA, o.a, o.wA), U(e, i.a, i.wB, o.a, o.wB)
          break
        case 3:
          e.x = t.x = i.a * i.wA.x + o.a * o.wA.x + s.a * s.wA.x, e.y = t.y = i.a * i.wA.y + o.a * o.wA.y + s.a * s.wA.y
      }
    }, t.prototype.getMetric = function () {
      switch (this.m_count) {
        case 0:
        case 1:
          return 0
        case 2:
          return tt(this.m_v1.w, this.m_v2.w)
        case 3:
          return G(E(Qt, this.m_v2.w, this.m_v1.w), E($t, this.m_v3.w, this.m_v1.w))
        default:
          return 0
      }
    }, t.prototype.solve = function () {
      switch (this.m_count) {
        case 1:
          break
        case 2:
          this.solve2()
          break
        case 3:
          this.solve3()
      }
    }, t.prototype.solve2 = function () {
      var t = this.m_v1.w, e = this.m_v2.w
      E(Kt, e, t)
      var i = -Q(t, Kt)
      if (i <= 0) return this.m_v1.a = 1, void (this.m_count = 1)
      var o = Q(e, Kt)
      if (o <= 0) return this.m_v2.a = 1, this.m_count = 1, void this.m_v1.set(this.m_v2)
      var s = 1 / (o + i)
      this.m_v1.a = o * s, this.m_v2.a = i * s, this.m_count = 2
    }, t.prototype.solve3 = function () {
      var t = this.m_v1.w, e = this.m_v2.w, i = this.m_v3.w
      E(Kt, e, t)
      var o = Q(t, Kt), s = Q(e, Kt), n = -o
      E(Xt, i, t)
      var r = Q(t, Xt), a = Q(i, Xt), m = -r
      E(Gt, i, e)
      var h = Q(e, Gt), c = Q(i, Gt), _ = -h, l = G(Kt, Xt), u = l * G(e, i), p = l * G(i, t), y = l * G(t, e)
      if (n <= 0 && m <= 0) return this.m_v1.a = 1, void (this.m_count = 1)
      if (s > 0 && n > 0 && y <= 0) {
        var d = 1 / (s + n)
        return this.m_v1.a = s * d, this.m_v2.a = n * d, void (this.m_count = 2)
      }
      if (a > 0 && m > 0 && p <= 0) {
        var f = 1 / (a + m)
        return this.m_v1.a = a * f, this.m_v3.a = m * f, this.m_count = 2, void this.m_v2.set(this.m_v3)
      }
      if (s <= 0 && _ <= 0) return this.m_v2.a = 1, this.m_count = 1, void this.m_v1.set(this.m_v2)
      if (a <= 0 && c <= 0) return this.m_v3.a = 1, this.m_count = 1, void this.m_v1.set(this.m_v3)
      if (c > 0 && _ > 0 && u <= 0) {
        var v = 1 / (c + _)
        return this.m_v2.a = c * v, this.m_v3.a = _ * v, this.m_count = 2, void this.m_v1.set(this.m_v3)
      }
      var x = 1 / (u + p + y)
      this.m_v1.a = u * x, this.m_v2.a = p * x, this.m_v3.a = y * x, this.m_count = 3
    }, t
  }(), he = new me, ce = new te, _e = new ie, le = new ee, ue = function (t, e, i, o, s, n) {
    return ce.recycle(), ce.proxyA.set(t, e), ce.proxyB.set(i, o), nt(ce.transformA, s), nt(ce.transformB, n), ce.useRadii = !0, le.recycle(), _e.recycle(), oe(le, _e, ce), le.distance < 1e-8
  }
  oe.testOverlap = ue, oe.Input = te, oe.Output = ee, oe.Proxy = se, oe.Cache = ie
  var pe, ye = function () {
    function t () {
      this.proxyA = new se, this.proxyB = new se, this.transformA = vt.identity(), this.transformB = vt.identity(), this.translationB = y.zero()
    }

    return t.prototype.recycle = function () {
      this.proxyA.recycle(), this.proxyB.recycle(), this.transformA.setIdentity(), this.transformB.setIdentity(), j(this.translationB)
    }, t
  }(), de = function () {
    this.point = y.zero(), this.normal = y.zero(), this.lambda = 1, this.iterations = 0
  }, fe = function (t, e) {
    t.iterations = 0, t.lambda = 1, t.normal.setZero(), t.point.setZero()
    var i = e.proxyA, o = e.proxyB, s = Ht(i.m_radius, g.polygonRadius), n = s + Ht(o.m_radius, g.polygonRadius),
      r = e.transformA, a = e.transformB, m = e.translationB, h = y.zero(), c = 0, _ = new me
    _.m_count = 0
    for (var l = _.m_v, u = i.getSupport(ut.mulTVec2(r.q, y.neg(m))), p = vt.mulVec2(r, i.getVertex(u)), d = o.getSupport(ut.mulTVec2(a.q, m)), f = vt.mulVec2(a, o.getVertex(d)), v = y.sub(p, f), x = Ht(g.polygonRadius, n - g.polygonRadius), A = .5 * g.linearSlop, b = 0; b < 20 && v.length() - x > A;) {
      t.iterations += 1, u = i.getSupport(ut.mulTVec2(r.q, y.neg(v))), p = vt.mulVec2(r, i.getVertex(u)), d = o.getSupport(ut.mulTVec2(a.q, v)), f = vt.mulVec2(a, o.getVertex(d))
      var B = y.sub(p, f)
      v.normalize()
      var w = y.dot(v, B), V = y.dot(v, m)
      if (w - x > c * V) {
        if (V <= 0) return !1
        if ((c = (w - x) / V) > 1) return !1
        h.setMul(-1, v), _.m_count = 0
      }
      var C = l[_.m_count]
      switch (C.indexA = d, C.wA = y.combine(1, f, c, m), C.indexB = u, C.wB = p, C.w = y.sub(C.wB, C.wA), C.a = 1, _.m_count += 1, _.m_count) {
        case 1:
          break
        case 2:
          _.solve2()
          break
        case 3:
          _.solve3()
      }
      if (3 == _.m_count) return !1
      v.setVec2(_.getClosestPoint()), ++b
    }
    if (0 == b) return !1
    var M = y.zero(), I = y.zero()
    return _.getWitnessPoints(I, M), v.lengthSquared() > 0 && (h.setMul(-1, v), h.normalize()), t.point = y.combine(1, M, s, h), t.normal = h, t.lambda = c, t.iterations = b, !0
  }, ve = Math.abs, xe = Math.max, Ae = function () {
    function t () {
      this.proxyA = new se, this.proxyB = new se, this.sweepA = new ft, this.sweepB = new ft
    }

    return t.prototype.recycle = function () {
      this.proxyA.recycle(), this.proxyB.recycle(), this.sweepA.recycle(), this.sweepB.recycle(), this.tMax = -1
    }, t
  }()
  t.TOIOutputState = void 0, (pe = t.TOIOutputState || (t.TOIOutputState = {}))[pe.e_unset = -1] = 'e_unset', pe[pe.e_unknown = 0] = 'e_unknown', pe[pe.e_failed = 1] = 'e_failed', pe[pe.e_overlapped = 2] = 'e_overlapped', pe[pe.e_touching = 3] = 'e_touching', pe[pe.e_separated = 4] = 'e_separated'
  var ge = function () {
    function e () {
      this.state = t.TOIOutputState.e_unset, this.t = -1
    }

    return e.prototype.recycle = function () {
      this.state = t.TOIOutputState.e_unset, this.t = -1
    }, e
  }()
  Jt.toiTime = 0, Jt.toiMaxTime = 0, Jt.toiCalls = 0, Jt.toiIters = 0, Jt.toiMaxIters = 0, Jt.toiRootIters = 0, Jt.toiMaxRootIters = 0
  var be, Be = new te, we = new ee, Ve = new ie, Ce = st(0, 0, 0), Me = st(0, 0, 0), Ie = q(0, 0), Pe = q(0, 0),
    Se = q(0, 0), Te = q(0, 0), ze = q(0, 0), Fe = q(0, 0), Le = q(0, 0), qe = q(0, 0), ke = function (e, i) {
      var o = Yt()
      ++Jt.toiCalls, e.state = t.TOIOutputState.e_unknown, e.t = i.tMax
      var s = i.proxyA, n = i.proxyB, r = i.sweepA, a = i.sweepB
      r.normalize(), a.normalize()
      var m = i.tMax, h = s.m_radius + n.m_radius, c = xe(g.linearSlop, h - 3 * g.linearSlop), _ = .25 * g.linearSlop,
        l = 0, u = g.maxTOIIterations, p = 0
      for (Ve.recycle(), Be.proxyA.setVertices(s.m_vertices, s.m_count, s.m_radius), Be.proxyB.setVertices(n.m_vertices, n.m_count, n.m_radius), Be.useRadii = !1; ;) {
        if (r.getTransform(Ce, l), a.getTransform(Me, l), nt(Be.transformA, Ce), nt(Be.transformB, Me), oe(we, Ve, Be), we.distance <= 0) {
          e.state = t.TOIOutputState.e_overlapped, e.t = 0
          break
        }
        if (we.distance < c + _) {
          e.state = t.TOIOutputState.e_touching, e.t = l
          break
        }
        Ne.initialize(Ve, s, r, n, a, l)
        for (var y = !1, d = m, f = 0; ;) {
          var v = Ne.findMinSeparation(d)
          if (v > c + _) {
            e.state = t.TOIOutputState.e_separated, e.t = m, y = !0
            break
          }
          if (v > c - _) {
            l = d
            break
          }
          var x = Ne.evaluate(l)
          if (x < c - _) {
            e.state = t.TOIOutputState.e_failed, e.t = l, y = !0
            break
          }
          if (x <= c + _) {
            e.state = t.TOIOutputState.e_touching, e.t = l, y = !0
            break
          }
          for (var A = 0, b = l, B = d; ;) {
            var w = void 0
            w = 1 & A ? b + (c - x) * (B - b) / (v - x) : .5 * (b + B), ++A, ++Jt.toiRootIters
            var V = Ne.evaluate(w)
            if (ve(V - c) < _) {
              d = w
              break
            }
            if (V > c ? (b = w, x = V) : (B = w, v = V), 50 === A) break
          }
          if (Jt.toiMaxRootIters = xe(Jt.toiMaxRootIters, A), ++f === g.maxPolygonVertices) break
        }
        if (++p, ++Jt.toiIters, y) break
        if (p === u) {
          e.state = t.TOIOutputState.e_failed, e.t = l
          break
        }
      }
      Jt.toiMaxIters = xe(Jt.toiMaxIters, p)
      var C = Wt(o)
      Jt.toiMaxTime = xe(Jt.toiMaxTime, C), Jt.toiTime += C, Ne.recycle()
    }
  !function (t) {
    t[t.e_unset = -1] = 'e_unset', t[t.e_points = 1] = 'e_points', t[t.e_faceA = 2] = 'e_faceA', t[t.e_faceB = 3] = 'e_faceB'
  }(be || (be = {}))
  var Ne = new (function () {
    function t () {
      this.m_proxyA = null, this.m_proxyB = null, this.m_sweepA = null, this.m_sweepB = null, this.m_type = be.e_unset, this.m_localPoint = q(0, 0), this.m_axis = q(0, 0), this.indexA = -1, this.indexB = -1
    }

    return t.prototype.recycle = function () {
      this.m_proxyA = null, this.m_proxyB = null, this.m_sweepA = null, this.m_sweepB = null, this.m_type = be.e_unset, j(this.m_localPoint), j(this.m_axis), this.indexA = -1, this.indexB = -1
    }, t.prototype.initialize = function (t, e, i, o, s, n) {
      var r = t.count
      if (this.m_proxyA = e, this.m_proxyB = o, this.m_sweepA = i, this.m_sweepB = s, this.m_sweepA.getTransform(Ce, n), this.m_sweepB.getTransform(Me, n), 1 === r) {
        this.m_type = be.e_points
        var a = this.m_proxyA.getVertex(t.indexA[0]), m = this.m_proxyB.getVertex(t.indexB[0])
        return rt(Pe, Ce, a), rt(Se, Me, m), E(this.m_axis, Se, Pe), p = function (t) {
          var e = L(t.x * t.x + t.y * t.y)
          if (0 !== e) {
            var i = 1 / e
            t.x *= i, t.y *= i
          }
          return e
        }(this.m_axis)
      }
      if (t.indexA[0] === t.indexA[1]) {
        this.m_type = be.e_faceB
        var h = o.getVertex(t.indexB[0]), c = o.getVertex(t.indexB[1])
        K(this.m_axis, E(Ie, c, h), 1), Z(this.m_axis), it(Te, Me.q, this.m_axis), U(this.m_localPoint, .5, h, .5, c), rt(Se, Me, this.m_localPoint)
        var _ = e.getVertex(t.indexA[0])
        return (p = Q(vt.mulVec2(Ce, _), Te) - Q(Se, Te)) < 0 && (D(this.m_axis), p = -p), p
      }
      this.m_type = be.e_faceA
      var l = this.m_proxyA.getVertex(t.indexA[0]), u = this.m_proxyA.getVertex(t.indexA[1])
      K(this.m_axis, E(Ie, u, l), 1), Z(this.m_axis), it(Te, Ce.q, this.m_axis), U(this.m_localPoint, .5, l, .5, u), rt(Pe, Ce, this.m_localPoint)
      var p, y = this.m_proxyB.getVertex(t.indexB[0])
      return rt(Se, Me, y), (p = Q(Se, Te) - Q(Pe, Te)) < 0 && (D(this.m_axis), p = -p), p
    }, t.prototype.compute = function (t, e) {
      switch (this.m_sweepA.getTransform(Ce, e), this.m_sweepB.getTransform(Me, e), this.m_type) {
        case be.e_points:
          return t && (ot(ze, Ce.q, this.m_axis), ot(Fe, Me.q, Y(Ie, -1, this.m_axis)), this.indexA = this.m_proxyA.getSupport(ze), this.indexB = this.m_proxyB.getSupport(Fe)), N(Le, this.m_proxyA.getVertex(this.indexA)), N(qe, this.m_proxyB.getVertex(this.indexB)), rt(Pe, Ce, Le), rt(Se, Me, qe), Q(Se, this.m_axis) - Q(Pe, this.m_axis)
        case be.e_faceA:
          return it(Te, Ce.q, this.m_axis), rt(Pe, Ce, this.m_localPoint), t && (ot(Fe, Me.q, Y(Ie, -1, Te)), this.indexA = -1, this.indexB = this.m_proxyB.getSupport(Fe)), N(qe, this.m_proxyB.getVertex(this.indexB)), rt(Se, Me, qe), Q(Se, Te) - Q(Pe, Te)
        case be.e_faceB:
          return it(Te, Me.q, this.m_axis), rt(Se, Me, this.m_localPoint), t && (ot(ze, Ce.q, Y(Ie, -1, Te)), this.indexB = -1, this.indexA = this.m_proxyA.getSupport(ze)), N(Le, this.m_proxyA.getVertex(this.indexA)), rt(Pe, Ce, Le), Q(Pe, Te) - Q(Se, Te)
        default:
          return t && (this.indexA = -1, this.indexB = -1), 0
      }
    }, t.prototype.findMinSeparation = function (t) {
      return this.compute(!0, t)
    }, t.prototype.evaluate = function (t) {
      return this.compute(!1, t)
    }, t
  }())
  ke.Input = Ae, ke.Output = ge
  var je = Math.abs, De = Math.sqrt, Oe = Math.min, Re = function () {
      function t () {
        this.dt = 0, this.inv_dt = 0, this.velocityIterations = 0, this.positionIterations = 0, this.warmStarting = !1, this.blockSolve = !0, this.inv_dt0 = 0, this.dtRatio = 1
      }

      return t.prototype.reset = function (t) {
        this.dt > 0 && (this.inv_dt0 = this.inv_dt), this.dt = t, this.inv_dt = 0 == t ? 0 : 1 / t, this.dtRatio = t * this.inv_dt0
      }, t
    }(), Ee = new Re, Je = q(0, 0), Ye = q(0, 0), We = q(0, 0), He = new Ae, Ue = new ge, Ze = new ft, Ke = new ft,
    Xe = new ft, Ge = function () {
      function t (t) {
        this.contact = t, this.normals = [], this.tangents = []
      }

      return t.prototype.recycle = function () {
        this.normals.length = 0, this.tangents.length = 0
      }, Object.defineProperty(t.prototype, 'normalImpulses', {
        get: function () {
          var t = this.contact, e = this.normals
          e.length = 0
          for (var i = 0; i < t.v_points.length; ++i) e.push(t.v_points[i].normalImpulse)
          return e
        }, enumerable: !1, configurable: !0
      }), Object.defineProperty(t.prototype, 'tangentImpulses', {
        get: function () {
          var t = this.contact, e = this.tangents
          e.length = 0
          for (var i = 0; i < t.v_points.length; ++i) e.push(t.v_points[i].tangentImpulse)
          return e
        }, enumerable: !1, configurable: !0
      }), t
    }(), Qe = function () {
      function e (t) {
        this.m_world = t, this.m_stack = [], this.m_bodies = [], this.m_contacts = [], this.m_joints = []
      }

      return e.prototype.clear = function () {
        this.m_stack.length = 0, this.m_bodies.length = 0, this.m_contacts.length = 0, this.m_joints.length = 0
      }, e.prototype.addBody = function (t) {
        this.m_bodies.push(t)
      }, e.prototype.addContact = function (t) {
        this.m_contacts.push(t)
      }, e.prototype.addJoint = function (t) {
        this.m_joints.push(t)
      }, e.prototype.solveWorld = function (t) {
        for (var e = this.m_world, i = e.m_bodyList; i; i = i.m_next) i.m_islandFlag = !1
        for (var o = e.m_contactList; o; o = o.m_next) o.m_islandFlag = !1
        for (var s = e.m_jointList; s; s = s.m_next) s.m_islandFlag = !1
        for (var n = this.m_stack, r = e.m_bodyList; r; r = r.m_next) {
          if (!r.m_islandFlag && 0 != r.isAwake() && 0 != r.isActive() && !r.isStatic()) {
            for (this.clear(), n.push(r), r.m_islandFlag = !0; n.length > 0;) {
              i = n.pop()
              if (this.addBody(i), i.m_awakeFlag = !0, !i.isStatic()) {
                for (var a = i.m_contactList; a; a = a.next) {
                  var m = a.contact
                  if (!m.m_islandFlag && (0 != m.isEnabled() && 0 != m.isTouching())) {
                    var h = m.m_fixtureA.m_isSensor, c = m.m_fixtureB.m_isSensor
                    if (!h && !c) this.addContact(m), m.m_islandFlag = !0, (l = a.other).m_islandFlag || (n.push(l), l.m_islandFlag = !0)
                  }
                }
                for (var _ = i.m_jointList; _; _ = _.next) {
                  var l
                  if (1 != _.joint.m_islandFlag) 0 != (l = _.other).isActive() && (this.addJoint(_.joint), _.joint.m_islandFlag = !0, l.m_islandFlag || (n.push(l), l.m_islandFlag = !0))
                }
              }
            }
            this.solveIsland(t)
            for (var u = 0; u < this.m_bodies.length; ++u) {
              (i = this.m_bodies[u]).isStatic() && (i.m_islandFlag = !1)
            }
          }
        }
      }, e.prototype.solveIsland = function (t) {
        for (var e = this.m_world, i = e.m_gravity, o = e.m_allowSleep, s = t.dt, n = 0; n < this.m_bodies.length; ++n) {
          var r = this.m_bodies[n]
          N(Je, r.m_sweep.c)
          var a = r.m_sweep.a
          N(Ye, r.m_linearVelocity)
          var m = r.m_angularVelocity
          N(r.m_sweep.c0, r.m_sweep.c), r.m_sweep.a0 = r.m_sweep.a, r.isDynamic() && (W(Ye, s * r.m_gravityScale, i), W(Ye, s * r.m_invMass, r.m_force), m += s * r.m_invI * r.m_torque, Y(Ye, 1 / (1 + s * r.m_linearDamping), Ye), m *= 1 / (1 + s * r.m_angularDamping)), N(r.c_position.c, Je), r.c_position.a = a, N(r.c_velocity.v, Ye), r.c_velocity.w = m
        }
        for (n = 0; n < this.m_contacts.length; ++n) {
          this.m_contacts[n].initConstraint(t)
        }
        for (n = 0; n < this.m_contacts.length; ++n) {
          this.m_contacts[n].initVelocityConstraint(t)
        }
        if (t.warmStarting) {
          for (n = 0; n < this.m_contacts.length; ++n) {
            this.m_contacts[n].warmStartConstraint(t)
          }
        }
        for (n = 0; n < this.m_joints.length; ++n) {
          this.m_joints[n].initVelocityConstraints(t)
        }
        for (n = 0; n < t.velocityIterations; ++n) {
          for (var h = 0; h < this.m_joints.length; ++h) {
            this.m_joints[h].solveVelocityConstraints(t)
          }
          for (h = 0; h < this.m_contacts.length; ++h) {
            this.m_contacts[h].solveVelocityConstraint(t)
          }
        }
        for (n = 0; n < this.m_contacts.length; ++n) {
          this.m_contacts[n].storeConstraintImpulses(t)
        }
        for (n = 0; n < this.m_bodies.length; ++n) {
          r = this.m_bodies[n]
          N(Je, r.c_position.c)
          a = r.c_position.a
          N(Ye, r.c_velocity.v)
          m = r.c_velocity.w
          Y(We, s, Ye)
          var c = $(We)
          if (c > g.maxTranslationSquared) {
            var _ = g.maxTranslation / De(c)
            J(Ye, _)
          }
          var l = s * m
          if (l * l > g.maxRotationSquared) m *= _ = g.maxRotation / je(l)
          W(Je, s, Ye), a += s * m, N(r.c_position.c, Je), r.c_position.a = a, N(r.c_velocity.v, Ye), r.c_velocity.w = m
        }
        var u = !1
        for (n = 0; n < t.positionIterations; ++n) {
          var p = 0
          for (h = 0; h < this.m_contacts.length; ++h) {
            var y = this.m_contacts[h].solvePositionConstraint(t)
            p = Oe(p, y)
          }
          var d = p >= -3 * g.linearSlop, f = !0
          for (h = 0; h < this.m_joints.length; ++h) {
            var v = this.m_joints[h].solvePositionConstraints(t)
            f = f && v
          }
          if (d && f) {
            u = !0
            break
          }
        }
        for (n = 0; n < this.m_bodies.length; ++n) {
          N((r = this.m_bodies[n]).m_sweep.c, r.c_position.c), r.m_sweep.a = r.c_position.a, N(r.m_linearVelocity, r.c_velocity.v), r.m_angularVelocity = r.c_velocity.w, r.synchronizeTransform()
        }
        if (this.postSolveIsland(), o) {
          var x = 1 / 0, A = g.linearSleepToleranceSqr, b = g.angularSleepToleranceSqr
          for (n = 0; n < this.m_bodies.length; ++n) {
            (r = this.m_bodies[n]).isStatic() || (0 == r.m_autoSleepFlag || r.m_angularVelocity * r.m_angularVelocity > b || $(r.m_linearVelocity) > A ? (r.m_sleepTime = 0, x = 0) : (r.m_sleepTime += s, x = Oe(x, r.m_sleepTime)))
          }
          if (x >= g.timeToSleep && u) {
            for (n = 0; n < this.m_bodies.length; ++n) {
              (r = this.m_bodies[n]).setAwake(!1)
            }
          }
        }
      }, e.prototype.solveWorldTOI = function (e) {
        var i = this.m_world
        if (i.m_stepComplete) {
          for (var o = i.m_bodyList; o; o = o.m_next) o.m_islandFlag = !1, o.m_sweep.alpha0 = 0
          for (var s = i.m_contactList; s; s = s.m_next) s.m_toiFlag = !1, s.m_islandFlag = !1, s.m_toiCount = 0, s.m_toi = 1
        }
        for (; ;) {
          for (var n = null, r = 1, a = i.m_contactList; a; a = a.m_next) {
            if (0 != a.isEnabled() && !(a.m_toiCount > g.maxSubSteps)) {
              var m = 1
              if (a.m_toiFlag) {
                m = a.m_toi
              } else {
                var h = a.getFixtureA(), c = a.getFixtureB()
                if (h.isSensor() || c.isSensor()) continue
                var _ = h.getBody(), l = c.getBody(), u = _.isAwake() && !_.isStatic(), p = l.isAwake() && !l.isStatic()
                if (0 == u && 0 == p) continue
                var y = _.isBullet() || !_.isDynamic(), d = l.isBullet() || !l.isDynamic()
                if (0 == y && 0 == d) continue
                var f = _.m_sweep.alpha0
                _.m_sweep.alpha0 < l.m_sweep.alpha0 ? (f = l.m_sweep.alpha0, _.m_sweep.advance(f)) : l.m_sweep.alpha0 < _.m_sweep.alpha0 && (f = _.m_sweep.alpha0, l.m_sweep.advance(f))
                var v = a.getChildIndexA(), x = a.getChildIndexB()
                _.m_sweep, l.m_sweep, He.proxyA.set(h.getShape(), v), He.proxyB.set(c.getShape(), x), He.sweepA.set(_.m_sweep), He.sweepB.set(l.m_sweep), He.tMax = 1, ke(Ue, He)
                var A = Ue.t
                m = Ue.state == t.TOIOutputState.e_touching ? Oe(f + (1 - f) * A, 1) : 1, a.m_toi = m, a.m_toiFlag = !0
              }
              m < r && (n = a, r = m)
            }
          }
          if (null == n || 1 - 1e-8 < r) {
            i.m_stepComplete = !0
            break
          }
          var b = n.getFixtureA(), B = n.getFixtureB(), w = b.getBody(), V = B.getBody()
          if (Ke.set(w.m_sweep), Xe.set(V.m_sweep), w.advance(r), V.advance(r), n.update(i), n.m_toiFlag = !1, ++n.m_toiCount, 0 != n.isEnabled() && 0 != n.isTouching()) {
            w.setAwake(!0), V.setAwake(!0), this.clear(), this.addBody(w), this.addBody(V), this.addContact(n), w.m_islandFlag = !0, V.m_islandFlag = !0, n.m_islandFlag = !0
            for (var C = [w, V], M = 0; M < C.length; ++M) {
              if ((F = C[M]).isDynamic()) {
                for (var I = F.m_contactList; I; I = I.next) {
                  var P = I.contact
                  if (!P.m_islandFlag) {
                    var S = I.other
                    if (!S.isDynamic() || F.isBullet() || S.isBullet()) {
                      var T = P.m_fixtureA.m_isSensor, z = P.m_fixtureB.m_isSensor
                      T || z || (Ze.set(S.m_sweep), 0 == S.m_islandFlag && S.advance(r), P.update(i), 0 != P.isEnabled() && 0 != P.isTouching() ? (P.m_islandFlag = !0, this.addContact(P), S.m_islandFlag || (S.m_islandFlag = !0, S.isStatic() || S.setAwake(!0), this.addBody(S))) : (S.m_sweep.set(Ze), S.synchronizeTransform()))
                    }
                  }
                }
              }
            }
            Ee.reset((1 - r) * e.dt), Ee.dtRatio = 1, Ee.positionIterations = 20, Ee.velocityIterations = e.velocityIterations, Ee.warmStarting = !1, this.solveIslandTOI(Ee, w, V)
            for (M = 0; M < this.m_bodies.length; ++M) {
              var F
              if ((F = this.m_bodies[M]).m_islandFlag = !1, F.isDynamic()) {
                F.synchronizeFixtures()
                for (I = F.m_contactList; I; I = I.next) I.contact.m_toiFlag = !1, I.contact.m_islandFlag = !1
              }
            }
            if (i.findNewContacts(), i.m_subStepping) {
              i.m_stepComplete = !1
              break
            }
          } else {
            n.setEnabled(!1), w.m_sweep.set(Ke), V.m_sweep.set(Xe), w.synchronizeTransform(), V.synchronizeTransform()
          }
        }
      }, e.prototype.solveIslandTOI = function (t, e, i) {
        for (var o = 0; o < this.m_bodies.length; ++o) {
          N((m = this.m_bodies[o]).c_position.c, m.m_sweep.c), m.c_position.a = m.m_sweep.a, N(m.c_velocity.v, m.m_linearVelocity), m.c_velocity.w = m.m_angularVelocity
        }
        for (o = 0; o < this.m_contacts.length; ++o) {
          this.m_contacts[o].initConstraint(t)
        }
        for (o = 0; o < t.positionIterations; ++o) {
          for (var s = 0, n = 0; n < this.m_contacts.length; ++n) {
            var r = this.m_contacts[n].solvePositionConstraintTOI(t, e, i)
            s = Oe(s, r)
          }
          if (s >= -1.5 * g.linearSlop) break
        }
        N(e.m_sweep.c0, e.c_position.c), e.m_sweep.a0 = e.c_position.a, N(i.m_sweep.c0, i.c_position.c), i.m_sweep.a0 = i.c_position.a
        for (o = 0; o < this.m_contacts.length; ++o) {
          this.m_contacts[o].initVelocityConstraint(t)
        }
        for (o = 0; o < t.velocityIterations; ++o) {
          for (n = 0; n < this.m_contacts.length; ++n) {
            this.m_contacts[n].solveVelocityConstraint(t)
          }
        }
        var a = t.dt
        for (o = 0; o < this.m_bodies.length; ++o) {
          var m = this.m_bodies[o]
          N(Je, m.c_position.c)
          var h = m.c_position.a
          N(Ye, m.c_velocity.v)
          var c = m.c_velocity.w
          Y(We, a, Ye)
          var _ = $(We)
          if (_ > g.maxTranslationSquared) {
            var l = g.maxTranslation / De(_)
            J(Ye, l)
          }
          var u = a * c
          if (u * u > g.maxRotationSquared) c *= l = g.maxRotation / je(u)
          W(Je, a, Ye), h += a * c, N(m.c_position.c, Je), m.c_position.a = h, N(m.c_velocity.v, Ye), m.c_velocity.w = c, N(m.m_sweep.c, Je), m.m_sweep.a = h, N(m.m_linearVelocity, Ye), m.m_angularVelocity = c, m.synchronizeTransform()
        }
        this.postSolveIsland()
      }, e.prototype.postSolveIsland = function () {
        for (var t = 0; t < this.m_contacts.length; ++t) {
          var e = this.m_contacts[t]
          this.m_world.postSolve(e, e.m_impulse)
        }
      }, e
    }()
  Qe.TimeStep = Re
  var $e, ti, ei, ii = function () {
      function t (t, e, i, o) {
        'object' == typeof t && null !== t ? (this.ex = y.clone(t), this.ey = y.clone(e)) : 'number' == typeof t ? (this.ex = y.neo(t, i), this.ey = y.neo(e, o)) : (this.ex = y.zero(), this.ey = y.zero())
      }

      return t.prototype.toString = function () {
        return JSON.stringify(this)
      }, t.isValid = function (t) {
        return null != t && (y.isValid(t.ex) && y.isValid(t.ey))
      }, t.assert = function (t) {
      }, t.prototype.set = function (t, e, i, o) {
        'number' == typeof t && 'number' == typeof e && 'number' == typeof i && 'number' == typeof o ? (this.ex.setNum(t, i), this.ey.setNum(e, o)) : 'object' == typeof t && 'object' == typeof e ? (this.ex.setVec2(t), this.ey.setVec2(e)) : 'object' == typeof t && (this.ex.setVec2(t.ex), this.ey.setVec2(t.ey))
      }, t.prototype.setIdentity = function () {
        this.ex.x = 1, this.ey.x = 0, this.ex.y = 0, this.ey.y = 1
      }, t.prototype.setZero = function () {
        this.ex.x = 0, this.ey.x = 0, this.ex.y = 0, this.ey.y = 0
      }, t.prototype.getInverse = function () {
        var e = this.ex.x, i = this.ey.x, o = this.ex.y, s = this.ey.y, n = e * s - i * o
        0 !== n && (n = 1 / n)
        var r = new t
        return r.ex.x = n * s, r.ey.x = -n * i, r.ex.y = -n * o, r.ey.y = n * e, r
      }, t.prototype.solve = function (t) {
        var e = this.ex.x, i = this.ey.x, o = this.ex.y, s = this.ey.y, n = e * s - i * o
        0 !== n && (n = 1 / n)
        var r = y.zero()
        return r.x = n * (s * t.x - i * t.y), r.y = n * (e * t.y - o * t.x), r
      }, t.mul = function (e, i) {
        if (i && 'x' in i && 'y' in i) {
          var o = e.ex.x * i.x + e.ey.x * i.y, s = e.ex.y * i.x + e.ey.y * i.y
          return y.neo(o, s)
        }
        if (i && 'ex' in i && 'ey' in i) return new t(e.ex.x * i.ex.x + e.ey.x * i.ex.y, e.ex.x * i.ey.x + e.ey.x * i.ey.y, e.ex.y * i.ex.x + e.ey.y * i.ex.y, e.ex.y * i.ey.x + e.ey.y * i.ey.y)
      }, t.mulVec2 = function (t, e) {
        var i = t.ex.x * e.x + t.ey.x * e.y, o = t.ex.y * e.x + t.ey.y * e.y
        return y.neo(i, o)
      }, t.mulMat22 = function (e, i) {
        return new t(e.ex.x * i.ex.x + e.ey.x * i.ex.y, e.ex.x * i.ey.x + e.ey.x * i.ey.y, e.ex.y * i.ex.x + e.ey.y * i.ex.y, e.ex.y * i.ey.x + e.ey.y * i.ey.y)
      }, t.mulT = function (e, i) {
        return i && 'x' in i && 'y' in i ? y.neo(y.dot(i, e.ex), y.dot(i, e.ey)) : i && 'ex' in i && 'ey' in i ? new t(y.neo(y.dot(e.ex, i.ex), y.dot(e.ey, i.ex)), y.neo(y.dot(e.ex, i.ey), y.dot(e.ey, i.ey))) : void 0
      }, t.mulTVec2 = function (t, e) {
        return y.neo(y.dot(e, t.ex), y.dot(e, t.ey))
      }, t.mulTMat22 = function (e, i) {
        return new t(y.neo(y.dot(e.ex, i.ex), y.dot(e.ey, i.ex)), y.neo(y.dot(e.ex, i.ey), y.dot(e.ey, i.ey)))
      }, t.abs = function (e) {
        return new t(y.abs(e.ex), y.abs(e.ey))
      }, t.add = function (e, i) {
        return new t(y.add(e.ex, i.ex), y.add(e.ey, i.ey))
      }, t
    }(), oi = Math.sqrt, si = q(0, 0), ni = q(0, 0), ri = q(0, 0), ai = q(0, 0), mi = q(0, 0), hi = q(0, 0), ci = q(0, 0),
    _i = q(0, 0)
  t.ManifoldType = void 0, ($e = t.ManifoldType || (t.ManifoldType = {}))[$e.e_unset = -1] = 'e_unset', $e[$e.e_circles = 0] = 'e_circles', $e[$e.e_faceA = 1] = 'e_faceA', $e[$e.e_faceB = 2] = 'e_faceB', t.ContactFeatureType = void 0, (ti = t.ContactFeatureType || (t.ContactFeatureType = {}))[ti.e_unset = -1] = 'e_unset', ti[ti.e_vertex = 0] = 'e_vertex', ti[ti.e_face = 1] = 'e_face', t.PointState = void 0, (ei = t.PointState || (t.PointState = {}))[ei.nullState = 0] = 'nullState', ei[ei.addState = 1] = 'addState', ei[ei.persistState = 2] = 'persistState', ei[ei.removeState = 3] = 'removeState'
  var li = function () {
    function t () {
      this.v = q(0, 0), this.id = new yi
    }

    return t.prototype.set = function (t) {
      N(this.v, t.v), this.id.set(t.id)
    }, t.prototype.recycle = function () {
      j(this.v), this.id.recycle()
    }, t
  }(), ui = function () {
    function e () {
      this.localNormal = q(0, 0), this.localPoint = q(0, 0), this.points = [new pi, new pi], this.pointCount = 0
    }

    return e.prototype.set = function (t) {
      this.type = t.type, N(this.localNormal, t.localNormal), N(this.localPoint, t.localPoint), this.pointCount = t.pointCount, this.points[0].set(t.points[0]), this.points[1].set(t.points[1])
    }, e.prototype.recycle = function () {
      this.type = t.ManifoldType.e_unset, j(this.localNormal), j(this.localPoint), this.pointCount = 0, this.points[0].recycle(), this.points[1].recycle()
    }, e.prototype.getWorldManifold = function (e, i, o, s, n) {
      if (0 == this.pointCount) return e;
      (e = e || new di).pointCount = this.pointCount
      var r = e.normal, a = e.points, m = e.separations
      switch (this.type) {
        case t.ManifoldType.e_circles:
          k(r, 1, 0)
          var h = this.points[0]
          rt(si, i, this.localPoint), rt(ni, s, h.localPoint), E(hi, ni, si)
          var c = $(hi)
          if (c > 1e-18) Y(r, 1 / oi(c), hi)
          U(ai, 1, si, o, r), U(mi, 1, ni, -n, r), U(a[0], .5, ai, .5, mi), m[0] = Q(E(ri, mi, ai), r)
          break
        case t.ManifoldType.e_faceA:
          it(r, i.q, this.localNormal), rt(ci, i, this.localPoint)
          for (var _ = 0; _ < this.pointCount; ++_) {
            h = this.points[_]
            rt(_i, s, h.localPoint), U(ai, 1, _i, o - Q(E(ri, _i, ci), r), r), U(mi, 1, _i, -n, r), U(a[_], .5, ai, .5, mi), m[_] = Q(E(ri, mi, ai), r)
          }
          break
        case t.ManifoldType.e_faceB:
          it(r, s.q, this.localNormal), rt(ci, s, this.localPoint)
          for (_ = 0; _ < this.pointCount; ++_) {
            h = this.points[_]
            rt(_i, i, h.localPoint), U(mi, 1, _i, n - Q(E(ri, _i, ci), r), r), U(ai, 1, _i, -o, r), U(a[_], .5, ai, .5, mi), m[_] = Q(E(ri, ai, mi), r)
          }
          D(r)
      }
      return e
    }, e.clipSegmentToLine = vi, e.ClipVertex = li, e.getPointStates = fi, e.PointState = t.PointState, e
  }(), pi = function () {
    function t () {
      this.localPoint = q(0, 0), this.normalImpulse = 0, this.tangentImpulse = 0, this.id = new yi
    }

    return t.prototype.set = function (t) {
      N(this.localPoint, t.localPoint), this.normalImpulse = t.normalImpulse, this.tangentImpulse = t.tangentImpulse, this.id.set(t.id)
    }, t.prototype.recycle = function () {
      j(this.localPoint), this.normalImpulse = 0, this.tangentImpulse = 0, this.id.recycle()
    }, t
  }(), yi = function () {
    function e () {
      this.key = -1, this.indexA = -1, this.indexB = -1, this.typeA = t.ContactFeatureType.e_unset, this.typeB = t.ContactFeatureType.e_unset
    }

    return e.prototype.setFeatures = function (t, e, i, o) {
      this.indexA = t, this.indexB = i, this.typeA = e, this.typeB = o, this.key = this.indexA + 4 * this.indexB + 16 * this.typeA + 64 * this.typeB
    }, e.prototype.set = function (t) {
      this.indexA = t.indexA, this.indexB = t.indexB, this.typeA = t.typeA, this.typeB = t.typeB, this.key = this.indexA + 4 * this.indexB + 16 * this.typeA + 64 * this.typeB
    }, e.prototype.swapFeatures = function () {
      var t = this.indexA, e = this.indexB, i = this.typeA, o = this.typeB
      this.indexA = e, this.indexB = t, this.typeA = o, this.typeB = i, this.key = this.indexA + 4 * this.indexB + 16 * this.typeA + 64 * this.typeB
    }, e.prototype.recycle = function () {
      this.indexA = 0, this.indexB = 0, this.typeA = t.ContactFeatureType.e_unset, this.typeB = t.ContactFeatureType.e_unset, this.key = -1
    }, e
  }(), di = function () {
    function t () {
      this.normal = q(0, 0), this.points = [q(0, 0), q(0, 0)], this.separations = [0, 0], this.pointCount = 0
    }

    return t.prototype.recycle = function () {
      j(this.normal), j(this.points[0]), j(this.points[1]), this.separations[0] = 0, this.separations[1] = 0, this.pointCount = 0
    }, t
  }()

  function fi (e, i, o, s) {
    for (var n = 0; n < o.pointCount; ++n) {
      var r = o.points[n].id
      e[n] = t.PointState.removeState
      for (var a = 0; a < s.pointCount; ++a) {
        if (s.points[a].id.key === r.key) {
          e[n] = t.PointState.persistState
          break
        }
      }
    }
    for (n = 0; n < s.pointCount; ++n) {
      r = s.points[n].id
      i[n] = t.PointState.addState
      for (a = 0; a < o.pointCount; ++a) {
        if (o.points[a].id.key === r.key) {
          i[n] = t.PointState.persistState
          break
        }
      }
    }
  }

  function vi (e, i, o, s, n) {
    var r = 0, a = Q(o, i[0].v) - s, m = Q(o, i[1].v) - s
    if (a <= 0 && e[r++].set(i[0]), m <= 0 && e[r++].set(i[1]), a * m < 0) {
      var h = a / (a - m)
      U(e[r].v, 1 - h, i[0].v, h, i[1].v), e[r].id.setFeatures(n, t.ContactFeatureType.e_vertex, i[0].id.indexB, t.ContactFeatureType.e_face), ++r
    }
    return r
  }

  var xi = Math.sqrt, Ai = Math.max, gi = Math.min, bi = new b({
    create: function () {
      return new io
    }, release: function (t) {
      t.recycle()
    }
  }), Bi = new ui, wi = new di, Vi = function () {
    function t (t) {
      this.prev = null, this.next = null, this.other = null, this.contact = t
    }

    return t.prototype.recycle = function () {
      this.prev = null, this.next = null, this.other = null
    }, t
  }()

  function Ci (t, e) {
    return xi(t * e)
  }

  function Mi (t, e) {
    return t > e ? t : e
  }

  var Ii = [], Pi = function () {
      function t () {
        this.rA = q(0, 0), this.rB = q(0, 0), this.normalImpulse = 0, this.tangentImpulse = 0, this.normalMass = 0, this.tangentMass = 0, this.velocityBias = 0
      }

      return t.prototype.recycle = function () {
        j(this.rA), j(this.rB), this.normalImpulse = 0, this.tangentImpulse = 0, this.normalMass = 0, this.tangentMass = 0, this.velocityBias = 0
      }, t
    }(), Si = q(0, 0), Ti = q(0, 0), zi = q(0, 0), Fi = q(0, 0), Li = q(0, 0), qi = st(0, 0, 0), ki = st(0, 0, 0),
    Ni = q(0, 0), ji = q(0, 0), Di = q(0, 0), Oi = q(0, 0), Ri = q(0, 0), Ei = q(0, 0), Ji = q(0, 0), Yi = q(0, 0),
    Wi = q(0, 0), Hi = q(0, 0), Ui = q(0, 0), Zi = q(0, 0), Ki = q(0, 0), Xi = q(0, 0), Gi = q(0, 0), Qi = q(0, 0),
    $i = q(0, 0), to = q(0, 0), eo = q(0, 0), io = function () {
      function e () {
        this.m_nodeA = new Vi(this), this.m_nodeB = new Vi(this), this.m_fixtureA = null, this.m_fixtureB = null, this.m_indexA = -1, this.m_indexB = -1, this.m_evaluateFcn = null, this.m_manifold = new ui, this.m_prev = null, this.m_next = null, this.m_toi = 1, this.m_toiCount = 0, this.m_toiFlag = !1, this.m_friction = 0, this.m_restitution = 0, this.m_tangentSpeed = 0, this.m_enabledFlag = !0, this.m_islandFlag = !1, this.m_touchingFlag = !1, this.m_filterFlag = !1, this.m_bulletHitFlag = !1, this.m_impulse = new Ge(this), this.v_points = [new Pi, new Pi], this.v_normal = q(0, 0), this.v_normalMass = new ii, this.v_K = new ii, this.v_pointCount = 0, this.v_tangentSpeed = 0, this.v_friction = 0, this.v_restitution = 0, this.v_invMassA = 0, this.v_invMassB = 0, this.v_invIA = 0, this.v_invIB = 0, this.p_localPoints = [q(0, 0), q(0, 0)], this.p_localNormal = q(0, 0), this.p_localPoint = q(0, 0), this.p_localCenterA = q(0, 0), this.p_localCenterB = q(0, 0), this.p_type = t.ManifoldType.e_unset, this.p_radiusA = 0, this.p_radiusB = 0, this.p_pointCount = 0, this.p_invMassA = 0, this.p_invMassB = 0, this.p_invIA = 0, this.p_invIB = 0
      }

      return e.prototype.initialize = function (t, e, i, o, s) {
        this.m_fixtureA = t, this.m_fixtureB = i, this.m_indexA = e, this.m_indexB = o, this.m_evaluateFcn = s, this.m_friction = Ci(this.m_fixtureA.m_friction, this.m_fixtureB.m_friction), this.m_restitution = Mi(this.m_fixtureA.m_restitution, this.m_fixtureB.m_restitution)
      }, e.prototype.recycle = function () {
        this.m_nodeA.recycle(), this.m_nodeB.recycle(), this.m_fixtureA = null, this.m_fixtureB = null, this.m_indexA = -1, this.m_indexB = -1, this.m_evaluateFcn = null, this.m_manifold.recycle(), this.m_prev = null, this.m_next = null, this.m_toi = 1, this.m_toiCount = 0, this.m_toiFlag = !1, this.m_friction = 0, this.m_restitution = 0, this.m_tangentSpeed = 0, this.m_enabledFlag = !0, this.m_islandFlag = !1, this.m_touchingFlag = !1, this.m_filterFlag = !1, this.m_bulletHitFlag = !1, this.m_impulse.recycle()
        for (var e = 0, i = this.v_points; e < i.length; e++) {
          i[e].recycle()
        }
        j(this.v_normal), this.v_normalMass.setZero(), this.v_K.setZero(), this.v_pointCount = 0, this.v_tangentSpeed = 0, this.v_friction = 0, this.v_restitution = 0, this.v_invMassA = 0, this.v_invMassB = 0, this.v_invIA = 0, this.v_invIB = 0
        for (var o = 0, s = this.p_localPoints; o < s.length; o++) {
          j(s[o])
        }
        j(this.p_localNormal), j(this.p_localPoint), j(this.p_localCenterA), j(this.p_localCenterB), this.p_type = t.ManifoldType.e_unset, this.p_radiusA = 0, this.p_radiusB = 0, this.p_pointCount = 0, this.p_invMassA = 0, this.p_invMassB = 0, this.p_invIA = 0, this.p_invIB = 0
      }, e.prototype.initConstraint = function (t) {
        var e = this.m_fixtureA, i = this.m_fixtureB
        if (null !== e && null !== i) {
          var o = e.m_body, s = i.m_body
          if (null !== o && null !== s) {
            var n = e.m_shape, r = i.m_shape
            if (null !== n && null !== r) {
              var a = this.m_manifold, m = a.pointCount
              this.v_invMassA = o.m_invMass, this.v_invMassB = s.m_invMass, this.v_invIA = o.m_invI, this.v_invIB = s.m_invI, this.v_friction = this.m_friction, this.v_restitution = this.m_restitution, this.v_tangentSpeed = this.m_tangentSpeed, this.v_pointCount = m, this.v_K.setZero(), this.v_normalMass.setZero(), this.p_invMassA = o.m_invMass, this.p_invMassB = s.m_invMass, this.p_invIA = o.m_invI, this.p_invIB = s.m_invI, N(this.p_localCenterA, o.m_sweep.localCenter), N(this.p_localCenterB, s.m_sweep.localCenter), this.p_radiusA = n.m_radius, this.p_radiusB = r.m_radius, this.p_type = a.type, N(this.p_localNormal, a.localNormal), N(this.p_localPoint, a.localPoint), this.p_pointCount = m
              for (var h = 0; h < g.maxManifoldPoints; ++h) this.v_points[h].recycle(), j(this.p_localPoints[h])
              for (h = 0; h < m; ++h) {
                var c = a.points[h], _ = this.v_points[h]
                t.warmStarting && (_.normalImpulse = t.dtRatio * c.normalImpulse, _.tangentImpulse = t.dtRatio * c.tangentImpulse), N(this.p_localPoints[h], c.localPoint)
              }
            }
          }
        }
      }, e.prototype.getManifold = function () {
        return this.m_manifold
      }, e.prototype.getWorldManifold = function (t) {
        var e = this.m_fixtureA, i = this.m_fixtureB
        if (null !== e && null !== i) {
          var o = e.m_body, s = i.m_body
          if (null !== o && null !== s) {
            var n = e.m_shape, r = i.m_shape
            if (null !== n && null !== r) return this.m_manifold.getWorldManifold(t, o.getTransform(), n.m_radius, s.getTransform(), r.m_radius)
          }
        }
      }, e.prototype.setEnabled = function (t) {
        this.m_enabledFlag = !!t
      }, e.prototype.isEnabled = function () {
        return this.m_enabledFlag
      }, e.prototype.isTouching = function () {
        return this.m_touchingFlag
      }, e.prototype.getNext = function () {
        return this.m_next
      }, e.prototype.getFixtureA = function () {
        return this.m_fixtureA
      }, e.prototype.getFixtureB = function () {
        return this.m_fixtureB
      }, e.prototype.getChildIndexA = function () {
        return this.m_indexA
      }, e.prototype.getChildIndexB = function () {
        return this.m_indexB
      }, e.prototype.flagForFiltering = function () {
        this.m_filterFlag = !0
      }, e.prototype.setFriction = function (t) {
        this.m_friction = t
      }, e.prototype.getFriction = function () {
        return this.m_friction
      }, e.prototype.resetFriction = function () {
        var t = this.m_fixtureA, e = this.m_fixtureB
        null !== t && null !== e && (this.m_friction = Ci(t.m_friction, e.m_friction))
      }, e.prototype.setRestitution = function (t) {
        this.m_restitution = t
      }, e.prototype.getRestitution = function () {
        return this.m_restitution
      }, e.prototype.resetRestitution = function () {
        var t = this.m_fixtureA, e = this.m_fixtureB
        null !== t && null !== e && (this.m_restitution = Mi(t.m_restitution, e.m_restitution))
      }, e.prototype.setTangentSpeed = function (t) {
        this.m_tangentSpeed = t
      }, e.prototype.getTangentSpeed = function () {
        return this.m_tangentSpeed
      }, e.prototype.evaluate = function (t, e, i) {
        var o = this.m_fixtureA, s = this.m_fixtureB
        null !== o && null !== s && this.m_evaluateFcn(t, e, o, this.m_indexA, i, s, this.m_indexB)
      }, e.prototype.update = function (t) {
        var e = this.m_fixtureA, i = this.m_fixtureB
        if (null !== e && null !== i) {
          var o = e.m_body, s = i.m_body
          if (null !== o && null !== s) {
            var n = e.m_shape, r = i.m_shape
            if (null !== n && null !== r) {
              this.m_enabledFlag = !0
              var a = !1, m = this.m_touchingFlag, h = e.m_isSensor, c = i.m_isSensor, _ = h || c, l = o.m_xf, u = s.m_xf
              if (_) {
                a = ue(n, this.m_indexA, r, this.m_indexB, l, u), this.m_manifold.pointCount = 0
              } else {
                Bi.recycle(), Bi.set(this.m_manifold), this.m_manifold.recycle(), this.evaluate(this.m_manifold, l, u), a = this.m_manifold.pointCount > 0
                for (var p = 0; p < this.m_manifold.pointCount; ++p) {
                  var y = this.m_manifold.points[p]
                  y.normalImpulse = 0, y.tangentImpulse = 0
                  for (var d = 0; d < Bi.pointCount; ++d) {
                    var f = Bi.points[d]
                    if (f.id.key === y.id.key) {
                      y.normalImpulse = f.normalImpulse, y.tangentImpulse = f.tangentImpulse
                      break
                    }
                  }
                }
                a !== m && (o.setAwake(!0), s.setAwake(!0))
              }
              this.m_touchingFlag = a
              var v = 'object' == typeof t && null !== t
              !m && a && v && t.beginContact(this), m && !a && v && t.endContact(this), !_ && a && v && Bi && t.preSolve(this, Bi)
            }
          }
        }
      }, e.prototype.solvePositionConstraint = function (t) {
        return this._solvePositionConstraint(t, null, null)
      }, e.prototype.solvePositionConstraintTOI = function (t, e, i) {
        return this._solvePositionConstraint(t, e, i)
      }, e.prototype._solvePositionConstraint = function (e, i, o) {
        var s = null !== i && null !== o, n = 0, r = this.m_fixtureA, a = this.m_fixtureB
        if (null === r || null === a) return n
        var m = r.m_body, c = a.m_body
        if (null === m || null === c) return n
        m.c_velocity, c.c_velocity
        var _ = m.c_position, l = c.c_position, u = this.p_localCenterA, p = this.p_localCenterB, y = 0, d = 0
        s && m !== i && m !== o || (y = this.p_invMassA, d = this.p_invIA)
        var f = 0, v = 0
        s && c !== i && c !== o || (f = this.p_invMassB, v = this.p_invIB), N(Si, _.c)
        var x = _.a
        N(zi, l.c)
        for (var A = l.a, b = 0; b < this.p_pointCount; ++b) {
          Bt(qi, u, Si, x), Bt(ki, p, zi, A)
          var B = void 0
          switch (this.p_type) {
            case t.ManifoldType.e_circles:
              rt(Ni, qi, this.p_localPoint), rt(ji, ki, this.p_localPoints[0]), E(Yi, ji, Ni), Z(Yi), U(Wi, .5, Ni, .5, ji), B = Q(ji, Yi) - Q(Ni, Yi) - this.p_radiusA - this.p_radiusB
              break
            case t.ManifoldType.e_faceA:
              it(Yi, qi.q, this.p_localNormal), rt(Oi, qi, this.p_localPoint), rt(Di, ki, this.p_localPoints[b]), B = Q(Di, Yi) - Q(Oi, Yi) - this.p_radiusA - this.p_radiusB, N(Wi, Di)
              break
            case t.ManifoldType.e_faceB:
              it(Yi, ki.q, this.p_localNormal), rt(Oi, ki, this.p_localPoint), rt(Di, qi, this.p_localPoints[b]), B = Q(Di, Yi) - Q(Oi, Yi) - this.p_radiusA - this.p_radiusB, N(Wi, Di), D(Yi)
              break
            default:
              return n
          }
          E(Ri, Wi, Si), E(Ei, Wi, zi), n = gi(n, B)
          var w = h((s ? g.toiBaugarte : g.baumgarte) * (B + g.linearSlop), -g.maxLinearCorrection, 0), V = G(Ri, Yi),
            C = G(Ei, Yi), M = y + f + d * V * V + v * C * C
          Y(Ji, M > 0 ? -w / M : 0, Yi), H(Si, y, Ji), x -= d * G(Ri, Ji), W(zi, f, Ji), A += v * G(Ei, Ji)
        }
        return N(_.c, Si), _.a = x, N(l.c, zi), l.a = A, n
      }, e.prototype.initVelocityConstraint = function (t) {
        var e = this.m_fixtureA, i = this.m_fixtureB
        if (null !== e && null !== i) {
          var o = e.m_body, s = i.m_body
          if (null !== o && null !== s) {
            var n = o.c_velocity, r = s.c_velocity, a = o.c_position, m = s.c_position, h = this.p_radiusA,
              c = this.p_radiusB, _ = this.m_manifold, l = this.v_invMassA, u = this.v_invMassB, p = this.v_invIA,
              y = this.v_invIB, d = this.p_localCenterA, f = this.p_localCenterB
            N(Si, a.c)
            var v = a.a
            N(Ti, n.v)
            var x = n.w
            N(zi, m.c)
            var A = m.a
            N(Fi, r.v)
            var b = r.w
            Bt(qi, d, Si, v), Bt(ki, f, zi, A), wi.recycle(), _.getWorldManifold(wi, qi, h, ki, c), N(this.v_normal, wi.normal)
            for (var B = 0; B < this.v_pointCount; ++B) {
              var w = this.v_points[B], V = wi.points[B]
              E(w.rA, V, Si), E(w.rB, V, zi)
              var C = G(w.rA, this.v_normal), M = G(w.rB, this.v_normal), I = l + u + p * C * C + y * M * M
              w.normalMass = I > 0 ? 1 / I : 0, K(Li, this.v_normal, 1)
              var P = G(w.rA, Li), S = G(w.rB, Li), T = l + u + p * P * P + y * S * S
              w.tangentMass = T > 0 ? 1 / T : 0, w.velocityBias = 0
              var z = 0
              z += Q(this.v_normal, Fi), z += Q(this.v_normal, X(eo, b, w.rB)), z -= Q(this.v_normal, Ti), (z -= Q(this.v_normal, X(eo, x, w.rA))) < -g.velocityThreshold && (w.velocityBias = -this.v_restitution * z)
            }
            if (2 == this.v_pointCount && t.blockSolve) {
              var F = this.v_points[0], L = this.v_points[1], q = G(F.rA, this.v_normal), k = G(F.rB, this.v_normal),
                j = G(L.rA, this.v_normal), D = G(L.rB, this.v_normal), O = l + u + p * q * q + y * k * k,
                R = l + u + p * j * j + y * D * D, J = l + u + p * q * j + y * k * D
              if (O * O < 1e3 * (O * R - J * J)) {
                this.v_K.ex.setNum(O, J), this.v_K.ey.setNum(J, R)
                var Y = this.v_K.ex.x, W = this.v_K.ey.x, H = this.v_K.ex.y, U = this.v_K.ey.y, Z = Y * U - W * H
                0 !== Z && (Z = 1 / Z), this.v_normalMass.ex.x = Z * U, this.v_normalMass.ey.x = -Z * W, this.v_normalMass.ex.y = -Z * H, this.v_normalMass.ey.y = Z * Y
              } else {
                this.v_pointCount = 1
              }
            }
            N(a.c, Si), a.a = v, N(n.v, Ti), n.w = x, N(m.c, zi), m.a = A, N(r.v, Fi), r.w = b
          }
        }
      }, e.prototype.warmStartConstraint = function (t) {
        var e = this.m_fixtureA, i = this.m_fixtureB
        if (null !== e && null !== i) {
          var o = e.m_body, s = i.m_body
          if (null !== o && null !== s) {
            var n = o.c_velocity, r = s.c_velocity
            o.c_position, s.c_position
            var a = this.v_invMassA, m = this.v_invIA, h = this.v_invMassB, c = this.v_invIB
            N(Ti, n.v)
            var _ = n.w
            N(Fi, r.v)
            var l = r.w
            N(Yi, this.v_normal), K(Li, Yi, 1)
            for (var u = 0; u < this.v_pointCount; ++u) {
              var p = this.v_points[u]
              U(Ji, p.normalImpulse, Yi, p.tangentImpulse, Li), _ -= m * G(p.rA, Ji), H(Ti, a, Ji), l += c * G(p.rB, Ji), W(Fi, h, Ji)
            }
            N(n.v, Ti), n.w = _, N(r.v, Fi), r.w = l
          }
        }
      }, e.prototype.storeConstraintImpulses = function (t) {
        for (var e = this.m_manifold, i = 0; i < this.v_pointCount; ++i) e.points[i].normalImpulse = this.v_points[i].normalImpulse, e.points[i].tangentImpulse = this.v_points[i].tangentImpulse
      }, e.prototype.solveVelocityConstraint = function (t) {
        var e = this.m_fixtureA, i = this.m_fixtureB
        if (null !== e && null !== i) {
          var o = e.m_body, s = i.m_body
          if (null !== o && null !== s) {
            var n = o.c_velocity
            o.c_position
            var r = s.c_velocity
            s.c_position
            var a = this.v_invMassA, m = this.v_invIA, c = this.v_invMassB, _ = this.v_invIB
            N(Ti, n.v)
            var l = n.w
            N(Fi, r.v)
            var u = r.w
            N(Yi, this.v_normal), K(Li, Yi, 1)
            for (var p = this.v_friction, y = 0; y < this.v_pointCount; ++y) {
              var d = this.v_points[y]
              j(Hi), O(Hi, Fi), O(Hi, X(eo, u, d.rB)), R(Hi, Ti), R(Hi, X(eo, l, d.rA))
              var f = Q(Hi, Li) - this.v_tangentSpeed, v = d.tangentMass * -f, x = p * d.normalImpulse
              v = (g = h(d.tangentImpulse + v, -x, x)) - d.tangentImpulse, d.tangentImpulse = g, Y(Ji, v, Li), H(Ti, a, Ji), l -= m * G(d.rA, Ji), W(Fi, c, Ji), u += _ * G(d.rB, Ji)
            }
            if (1 == this.v_pointCount || 0 == t.blockSolve) {
              for (var A = 0; A < this.v_pointCount; ++A) {
                d = this.v_points[A]
                j(Hi), O(Hi, Fi), O(Hi, X(eo, u, d.rB)), R(Hi, Ti), R(Hi, X(eo, l, d.rA))
                var g, b = Q(Hi, Yi)
                v = -d.normalMass * (b - d.velocityBias)
                v = (g = Ai(d.normalImpulse + v, 0)) - d.normalImpulse, d.normalImpulse = g, Y(Ji, v, Yi), H(Ti, a, Ji), l -= m * G(d.rA, Ji), W(Fi, c, Ji), u += _ * G(d.rB, Ji)
              }
            } else {
              var B = this.v_points[0], w = this.v_points[1]
              k(Xi, B.normalImpulse, w.normalImpulse), j(Ui), O(Ui, Fi), O(Ui, X(eo, u, B.rB)), R(Ui, Ti), R(Ui, X(eo, l, B.rA)), j(Zi), O(Zi, Fi), O(Zi, X(eo, u, w.rB)), R(Zi, Ti), R(Zi, X(eo, l, w.rA))
              var V = Q(Ui, Yi), C = Q(Zi, Yi)
              for (k(Ki, V - B.velocityBias, C - w.velocityBias), Ki.x -= this.v_K.ex.x * Xi.x + this.v_K.ey.x * Xi.y, Ki.y -= this.v_K.ex.y * Xi.x + this.v_K.ey.y * Xi.y; ;) {
                if (j(Gi), Gi.x = -(this.v_normalMass.ex.x * Ki.x + this.v_normalMass.ey.x * Ki.y), Gi.y = -(this.v_normalMass.ex.y * Ki.x + this.v_normalMass.ey.y * Ki.y), Gi.x >= 0 && Gi.y >= 0) {
                  E(Qi, Gi, Xi), Y($i, Qi.x, Yi), Y(to, Qi.y, Yi), H(Ti, a, $i), H(Ti, a, to), l -= m * (G(B.rA, $i) + G(w.rA, to)), W(Fi, c, $i), W(Fi, c, to), u += _ * (G(B.rB, $i) + G(w.rB, to)), B.normalImpulse = Gi.x, w.normalImpulse = Gi.y
                  break
                }
                if (Gi.x = -B.normalMass * Ki.x, Gi.y = 0, V = 0, C = this.v_K.ex.y * Gi.x + Ki.y, Gi.x >= 0 && C >= 0) {
                  E(Qi, Gi, Xi), Y($i, Qi.x, Yi), Y(to, Qi.y, Yi), H(Ti, a, $i), H(Ti, a, to), l -= m * (G(B.rA, $i) + G(w.rA, to)), W(Fi, c, $i), W(Fi, c, to), u += _ * (G(B.rB, $i) + G(w.rB, to)), B.normalImpulse = Gi.x, w.normalImpulse = Gi.y
                  break
                }
                if (Gi.x = 0, Gi.y = -w.normalMass * Ki.y, V = this.v_K.ey.x * Gi.y + Ki.x, C = 0, Gi.y >= 0 && V >= 0) {
                  E(Qi, Gi, Xi), Y($i, Qi.x, Yi), Y(to, Qi.y, Yi), H(Ti, a, $i), H(Ti, a, to), l -= m * (G(B.rA, $i) + G(w.rA, to)), W(Fi, c, $i), W(Fi, c, to), u += _ * (G(B.rB, $i) + G(w.rB, to)), B.normalImpulse = Gi.x, w.normalImpulse = Gi.y
                  break
                }
                if (Gi.x = 0, Gi.y = 0, V = Ki.x, C = Ki.y, V >= 0 && C >= 0) {
                  E(Qi, Gi, Xi), Y($i, Qi.x, Yi), Y(to, Qi.y, Yi), H(Ti, a, $i), H(Ti, a, to), l -= m * (G(B.rA, $i) + G(w.rA, to)), W(Fi, c, $i), W(Fi, c, to), u += _ * (G(B.rB, $i) + G(w.rB, to)), B.normalImpulse = Gi.x, w.normalImpulse = Gi.y
                  break
                }
                break
              }
            }
            N(n.v, Ti), n.w = l, N(r.v, Fi), r.w = u
          }
        }
      }, e.addType = function (t, e, i) {
        Ii[t] = Ii[t] || {}, Ii[t][e] = i
      }, e.create = function (t, e, i, o) {
        var s, n = t.m_shape.m_type, r = i.m_shape.m_type, a = bi.allocate()
        if (s = Ii[n] && Ii[n][r]) {
          a.initialize(t, e, i, o, s)
        } else {
          if (!(s = Ii[r] && Ii[r][n])) return null
          a.initialize(i, o, t, e, s)
        }
        t = a.m_fixtureA, i = a.m_fixtureB, e = a.getChildIndexA(), o = a.getChildIndexB()
        var m = t.m_body, h = i.m_body
        return a.m_nodeA.contact = a, a.m_nodeA.other = h, a.m_nodeA.prev = null, a.m_nodeA.next = m.m_contactList, null != m.m_contactList && (m.m_contactList.prev = a.m_nodeA), m.m_contactList = a.m_nodeA, a.m_nodeB.contact = a, a.m_nodeB.other = m, a.m_nodeB.prev = null, a.m_nodeB.next = h.m_contactList, null != h.m_contactList && (h.m_contactList.prev = a.m_nodeB), h.m_contactList = a.m_nodeB, 0 == t.isSensor() && 0 == i.isSensor() && (m.setAwake(!0), h.setAwake(!0)), a
      }, e.destroy = function (t, e) {
        var i = t.m_fixtureA, o = t.m_fixtureB
        if (null !== i && null !== o) {
          var s = i.m_body, n = o.m_body
          null !== s && null !== n && (t.isTouching() && e.endContact(t), t.m_nodeA.prev && (t.m_nodeA.prev.next = t.m_nodeA.next), t.m_nodeA.next && (t.m_nodeA.next.prev = t.m_nodeA.prev), t.m_nodeA == s.m_contactList && (s.m_contactList = t.m_nodeA.next), t.m_nodeB.prev && (t.m_nodeB.prev.next = t.m_nodeB.next), t.m_nodeB.next && (t.m_nodeB.next.prev = t.m_nodeB.prev), t.m_nodeB == n.m_contactList && (n.m_contactList = t.m_nodeB.next), t.m_manifold.pointCount > 0 && !i.m_isSensor && !o.m_isSensor && (s.setAwake(!0), n.setAwake(!0)), bi.release(t))
        }
      }, e
    }(), oo = {
      gravity: y.zero(),
      allowSleep: !0,
      warmStarting: !0,
      continuousPhysics: !0,
      subStepping: !1,
      blockSolve: !0,
      velocityIterations: 8,
      positionIterations: 3
    }, so = function () {
      function t (e) {
        if (!(this instanceof t)) return new t(e)
        this.s_step = new Re, e && y.isValid(e) && (e = {gravity: e}), e = s(e, oo), this.m_solver = new Qe(this), this.m_broadPhase = new T, this.m_contactList = null, this.m_contactCount = 0, this.m_bodyList = null, this.m_bodyCount = 0, this.m_jointList = null, this.m_jointCount = 0, this.m_stepComplete = !0, this.m_allowSleep = e.allowSleep, this.m_gravity = y.clone(e.gravity), this.m_clearForces = !0, this.m_newFixture = !1, this.m_locked = !1, this.m_warmStarting = e.warmStarting, this.m_continuousPhysics = e.continuousPhysics, this.m_subStepping = e.subStepping, this.m_blockSolve = e.blockSolve, this.m_velocityIterations = e.velocityIterations, this.m_positionIterations = e.positionIterations, this.m_t = 0
      }

      return t.prototype._serialize = function () {
        for (var t = [], e = [], i = this.getBodyList(); i; i = i.getNext()) t.push(i)
        for (var o = this.getJointList(); o; o = o.getNext()) 'function' == typeof o._serialize && e.push(o)
        return {gravity: this.m_gravity, bodies: t, joints: e}
      }, t._deserialize = function (e, i, o) {
        if (!e) return new t
        var s = new t(e.gravity)
        if (e.bodies) for (var n = e.bodies.length - 1; n >= 0; n -= 1) s._addBody(o(Ot, e.bodies[n], s))
        if (e.joints) for (n = e.joints.length - 1; n >= 0; n--) s.createJoint(o(Et, e.joints[n], s))
        return s
      }, t.prototype.getBodyList = function () {
        return this.m_bodyList
      }, t.prototype.getJointList = function () {
        return this.m_jointList
      }, t.prototype.getContactList = function () {
        return this.m_contactList
      }, t.prototype.getBodyCount = function () {
        return this.m_bodyCount
      }, t.prototype.getJointCount = function () {
        return this.m_jointCount
      }, t.prototype.getContactCount = function () {
        return this.m_contactCount
      }, t.prototype.setGravity = function (t) {
        this.m_gravity = t
      }, t.prototype.getGravity = function () {
        return this.m_gravity
      }, t.prototype.isLocked = function () {
        return this.m_locked
      }, t.prototype.setAllowSleeping = function (t) {
        if (t != this.m_allowSleep && (this.m_allowSleep = t, 0 == this.m_allowSleep)) for (var e = this.m_bodyList; e; e = e.m_next) e.setAwake(!0)
      }, t.prototype.getAllowSleeping = function () {
        return this.m_allowSleep
      }, t.prototype.setWarmStarting = function (t) {
        this.m_warmStarting = t
      }, t.prototype.getWarmStarting = function () {
        return this.m_warmStarting
      }, t.prototype.setContinuousPhysics = function (t) {
        this.m_continuousPhysics = t
      }, t.prototype.getContinuousPhysics = function () {
        return this.m_continuousPhysics
      }, t.prototype.setSubStepping = function (t) {
        this.m_subStepping = t
      }, t.prototype.getSubStepping = function () {
        return this.m_subStepping
      }, t.prototype.setAutoClearForces = function (t) {
        this.m_clearForces = t
      }, t.prototype.getAutoClearForces = function () {
        return this.m_clearForces
      }, t.prototype.clearForces = function () {
        for (var t = this.m_bodyList; t; t = t.getNext()) t.m_force.setZero(), t.m_torque = 0
      }, t.prototype.queryAABB = function (t, e) {
        var i = this.m_broadPhase
        this.m_broadPhase.query(t, (function (t) {
          var o = i.getUserData(t)
          return e(o.fixture)
        }))
      }, t.prototype.rayCast = function (t, e, i) {
        var o = this.m_broadPhase
        this.m_broadPhase.rayCast({maxFraction: 1, p1: t, p2: e}, (function (t, e) {
          var s = o.getUserData(e), n = s.fixture, r = s.childIndex, a = {}
          if (n.rayCast(a, t, r)) {
            var m = a.fraction, h = y.add(y.mulNumVec2(1 - m, t.p1), y.mulNumVec2(m, t.p2))
            return i(n, h, a.normal, m)
          }
          return t.maxFraction
        }))
      }, t.prototype.getProxyCount = function () {
        return this.m_broadPhase.getProxyCount()
      }, t.prototype.getTreeHeight = function () {
        return this.m_broadPhase.getTreeHeight()
      }, t.prototype.getTreeBalance = function () {
        return this.m_broadPhase.getTreeBalance()
      }, t.prototype.getTreeQuality = function () {
        return this.m_broadPhase.getTreeQuality()
      }, t.prototype.shiftOrigin = function (t) {
        if (!this.m_locked) {
          for (var e = this.m_bodyList; e; e = e.m_next) e.m_xf.p.sub(t), e.m_sweep.c0.sub(t), e.m_sweep.c.sub(t)
          for (var i = this.m_jointList; i; i = i.m_next) i.shiftOrigin(t)
          this.m_broadPhase.shiftOrigin(t)
        }
      }, t.prototype._addBody = function (t) {
        this.isLocked() || (t.m_prev = null, t.m_next = this.m_bodyList, this.m_bodyList && (this.m_bodyList.m_prev = t), this.m_bodyList = t, ++this.m_bodyCount)
      }, t.prototype.createBody = function (t, e) {
        if (this.isLocked()) return null
        var i = {}
        t && (y.isValid(t) ? i = {position: t, angle: e} : 'object' == typeof t && (i = t))
        var o = new Ot(this, i)
        return this._addBody(o), o
      }, t.prototype.createDynamicBody = function (t, e) {
        var i = {}
        return t && (y.isValid(t) ? i = {
          position: t,
          angle: e
        } : 'object' == typeof t && (i = t)), i.type = 'dynamic', this.createBody(i)
      }, t.prototype.createKinematicBody = function (t, e) {
        var i = {}
        return t && (y.isValid(t) ? i = {
          position: t,
          angle: e
        } : 'object' == typeof t && (i = t)), i.type = 'kinematic', this.createBody(i)
      }, t.prototype.destroyBody = function (t) {
        if (!this.isLocked()) {
          if (t.m_destroyed) return !1
          for (var e = t.m_jointList; e;) {
            var i = e
            e = e.next, this.publish('remove-joint', i.joint), this.destroyJoint(i.joint), t.m_jointList = e
          }
          t.m_jointList = null
          for (var o = t.m_contactList; o;) {
            var s = o
            o = o.next, this.destroyContact(s.contact), t.m_contactList = o
          }
          t.m_contactList = null
          for (var n = t.m_fixtureList; n;) {
            var r = n
            n = n.m_next, this.publish('remove-fixture', r), r.destroyProxies(this.m_broadPhase), t.m_fixtureList = n
          }
          return t.m_fixtureList = null, t.m_prev && (t.m_prev.m_next = t.m_next), t.m_next && (t.m_next.m_prev = t.m_prev), t == this.m_bodyList && (this.m_bodyList = t.m_next), t.m_destroyed = !0, --this.m_bodyCount, this.publish('remove-body', t), !0
        }
      }, t.prototype.createJoint = function (t) {
        if (this.isLocked()) return null
        if (t.m_prev = null, t.m_next = this.m_jointList, this.m_jointList && (this.m_jointList.m_prev = t), this.m_jointList = t, ++this.m_jointCount, t.m_edgeA.joint = t, t.m_edgeA.other = t.m_bodyB, t.m_edgeA.prev = null, t.m_edgeA.next = t.m_bodyA.m_jointList, t.m_bodyA.m_jointList && (t.m_bodyA.m_jointList.prev = t.m_edgeA), t.m_bodyA.m_jointList = t.m_edgeA, t.m_edgeB.joint = t, t.m_edgeB.other = t.m_bodyA, t.m_edgeB.prev = null, t.m_edgeB.next = t.m_bodyB.m_jointList, t.m_bodyB.m_jointList && (t.m_bodyB.m_jointList.prev = t.m_edgeB), t.m_bodyB.m_jointList = t.m_edgeB, 0 == t.m_collideConnected) for (var e = t.m_bodyB.getContactList(); e; e = e.next) e.other == t.m_bodyA && e.contact.flagForFiltering()
        return t
      }, t.prototype.destroyJoint = function (t) {
        if (!this.isLocked()) {
          t.m_prev && (t.m_prev.m_next = t.m_next), t.m_next && (t.m_next.m_prev = t.m_prev), t == this.m_jointList && (this.m_jointList = t.m_next)
          var e = t.m_bodyA, i = t.m_bodyB
          if (e.setAwake(!0), i.setAwake(!0), t.m_edgeA.prev && (t.m_edgeA.prev.next = t.m_edgeA.next), t.m_edgeA.next && (t.m_edgeA.next.prev = t.m_edgeA.prev), t.m_edgeA == e.m_jointList && (e.m_jointList = t.m_edgeA.next), t.m_edgeA.prev = null, t.m_edgeA.next = null, t.m_edgeB.prev && (t.m_edgeB.prev.next = t.m_edgeB.next), t.m_edgeB.next && (t.m_edgeB.next.prev = t.m_edgeB.prev), t.m_edgeB == i.m_jointList && (i.m_jointList = t.m_edgeB.next), t.m_edgeB.prev = null, t.m_edgeB.next = null, --this.m_jointCount, 0 == t.m_collideConnected) for (var o = i.getContactList(); o;) o.other == e && o.contact.flagForFiltering(), o = o.next
          this.publish('remove-joint', t)
        }
      }, t.prototype.step = function (t, e, i) {
        if (this.publish('pre-step', t), (0 | e) !== e && (e = 0), e = e || this.m_velocityIterations, i = i || this.m_positionIterations, this.m_newFixture && (this.findNewContacts(), this.m_newFixture = !1), this.m_locked = !0, this.s_step.reset(t), this.s_step.velocityIterations = e, this.s_step.positionIterations = i, this.s_step.warmStarting = this.m_warmStarting, this.s_step.blockSolve = this.m_blockSolve, this.updateContacts(), this.m_stepComplete && t > 0) {
          this.m_solver.solveWorld(this.s_step)
          for (var o = this.m_bodyList; o; o = o.getNext()) 0 != o.m_islandFlag && (o.isStatic() || o.synchronizeFixtures())
          this.findNewContacts()
        }
        this.m_continuousPhysics && t > 0 && this.m_solver.solveWorldTOI(this.s_step), this.m_clearForces && this.clearForces(), this.m_locked = !1, this.publish('post-step', t)
      }, t.prototype.findNewContacts = function () {
        var t = this
        this.m_broadPhase.updatePairs((function (e, i) {
          return t.createContact(e, i)
        }))
      }, t.prototype.createContact = function (t, e) {
        var i = t.fixture, o = e.fixture, s = t.childIndex, n = e.childIndex, r = i.getBody(), a = o.getBody()
        if (r != a) {
          for (var m = a.getContactList(); m;) {
            if (m.other == r) {
              var h = m.contact.getFixtureA(), c = m.contact.getFixtureB(), _ = m.contact.getChildIndexA(),
                l = m.contact.getChildIndexB()
              if (h == i && c == o && _ == s && l == n) return
              if (h == o && c == i && _ == n && l == s) return
            }
            m = m.next
          }
          if (0 != a.shouldCollide(r) && 0 != o.shouldCollide(i)) {
            var u = io.create(i, s, o, n)
            null != u && (u.m_prev = null, null != this.m_contactList && (u.m_next = this.m_contactList, this.m_contactList.m_prev = u), this.m_contactList = u, ++this.m_contactCount)
          }
        }
      }, t.prototype.updateContacts = function () {
        for (var t, e = this.m_contactList; t = e;) {
          e = t.getNext()
          var i = t.getFixtureA(), o = t.getFixtureB(), s = t.getChildIndexA(), n = t.getChildIndexB(), r = i.getBody(),
            a = o.getBody()
          if (t.m_filterFlag) {
            if (0 == a.shouldCollide(r)) {
              this.destroyContact(t)
              continue
            }
            if (0 == o.shouldCollide(i)) {
              this.destroyContact(t)
              continue
            }
            t.m_filterFlag = !1
          }
          var m = r.isAwake() && !r.isStatic(), h = a.isAwake() && !a.isStatic()
          if (0 != m || 0 != h) {
            var c = i.m_proxies[s].proxyId, _ = o.m_proxies[n].proxyId
            0 != this.m_broadPhase.testOverlap(c, _) ? t.update(this) : this.destroyContact(t)
          }
        }
      }, t.prototype.destroyContact = function (t) {
        t.m_prev && (t.m_prev.m_next = t.m_next), t.m_next && (t.m_next.m_prev = t.m_prev), t == this.m_contactList && (this.m_contactList = t.m_next), io.destroy(t, this), --this.m_contactCount
      }, t.prototype.on = function (t, e) {
        return 'string' != typeof t || 'function' != typeof e || (this._listeners || (this._listeners = {}), this._listeners[t] || (this._listeners[t] = []), this._listeners[t].push(e)), this
      }, t.prototype.off = function (t, e) {
        if ('string' != typeof t || 'function' != typeof e) return this
        var i = this._listeners && this._listeners[t]
        if (!i || !i.length) return this
        var o = i.indexOf(e)
        return o >= 0 && i.splice(o, 1), this
      }, t.prototype.publish = function (t, e, i, o) {
        var s = this._listeners && this._listeners[t]
        if (!s || !s.length) return 0
        for (var n = 0; n < s.length; n++) s[n].call(this, e, i, o)
        return s.length
      }, t.prototype.beginContact = function (t) {
        this.publish('begin-contact', t)
      }, t.prototype.endContact = function (t) {
        this.publish('end-contact', t)
      }, t.prototype.preSolve = function (t, e) {
        this.publish('pre-solve', t, e)
      }, t.prototype.postSolve = function (t, e) {
        this.publish('post-solve', t, e)
      }, t
    }(), no = function () {
      function t (e, i, o) {
        if (!(this instanceof t)) return new t(e, i, o)
        void 0 === e ? (this.x = 0, this.y = 0, this.z = 0) : 'object' == typeof e ? (this.x = e.x, this.y = e.y, this.z = e.z) : (this.x = e, this.y = i, this.z = o)
      }

      return t.prototype._serialize = function () {
        return {x: this.x, y: this.y, z: this.z}
      }, t._deserialize = function (e) {
        var i = Object.create(t.prototype)
        return i.x = e.x, i.y = e.y, i.z = e.z, i
      }, t.neo = function (e, i, o) {
        var s = Object.create(t.prototype)
        return s.x = e, s.y = i, s.z = o, s
      }, t.zero = function () {
        var e = Object.create(t.prototype)
        return e.x = 0, e.y = 0, e.z = 0, e
      }, t.clone = function (e) {
        return t.neo(e.x, e.y, e.z)
      }, t.prototype.toString = function () {
        return JSON.stringify(this)
      }, t.isValid = function (t) {
        return null != t && (Number.isFinite(t.x) && Number.isFinite(t.y) && Number.isFinite(t.z))
      }, t.assert = function (t) {
      }, t.prototype.setZero = function () {
        return this.x = 0, this.y = 0, this.z = 0, this
      }, t.prototype.set = function (t, e, i) {
        return this.x = t, this.y = e, this.z = i, this
      }, t.prototype.add = function (t) {
        return this.x += t.x, this.y += t.y, this.z += t.z, this
      }, t.prototype.sub = function (t) {
        return this.x -= t.x, this.y -= t.y, this.z -= t.z, this
      }, t.prototype.mul = function (t) {
        return this.x *= t, this.y *= t, this.z *= t, this
      }, t.areEqual = function (t, e) {
        return t === e || 'object' == typeof t && null !== t && 'object' == typeof e && null !== e && t.x === e.x && t.y === e.y && t.z === e.z
      }, t.dot = function (t, e) {
        return t.x * e.x + t.y * e.y + t.z * e.z
      }, t.cross = function (e, i) {
        return new t(e.y * i.z - e.z * i.y, e.z * i.x - e.x * i.z, e.x * i.y - e.y * i.x)
      }, t.add = function (e, i) {
        return new t(e.x + i.x, e.y + i.y, e.z + i.z)
      }, t.sub = function (e, i) {
        return new t(e.x - i.x, e.y - i.y, e.z - i.z)
      }, t.mul = function (e, i) {
        return new t(i * e.x, i * e.y, i * e.z)
      }, t.prototype.neg = function () {
        return this.x = -this.x, this.y = -this.y, this.z = -this.z, this
      }, t.neg = function (e) {
        return new t(-e.x, -e.y, -e.z)
      }, t
    }(), ro = q(0, 0), ao = q(0, 0), mo = function (t) {
      function e (i, o) {
        var s = this
        return s instanceof e ? ((s = t.call(this) || this).m_type = e.TYPE, s.m_radius = g.polygonRadius, s.m_vertex1 = i ? y.clone(i) : y.zero(), s.m_vertex2 = o ? y.clone(o) : y.zero(), s.m_vertex0 = y.zero(), s.m_vertex3 = y.zero(), s.m_hasVertex0 = !1, s.m_hasVertex3 = !1, s) : new e(i, o)
      }

      return i(e, t), e.prototype._serialize = function () {
        return {
          type: this.m_type,
          vertex1: this.m_vertex1,
          vertex2: this.m_vertex2,
          vertex0: this.m_vertex0,
          vertex3: this.m_vertex3,
          hasVertex0: this.m_hasVertex0,
          hasVertex3: this.m_hasVertex3
        }
      }, e._deserialize = function (t) {
        var i = new e(t.vertex1, t.vertex2)
        return i.m_hasVertex0 && i.setPrevVertex(t.vertex0), i.m_hasVertex3 && i.setNextVertex(t.vertex3), i
      }, e.prototype._reset = function () {
      }, e.prototype.getRadius = function () {
        return this.m_radius
      }, e.prototype.getType = function () {
        return this.m_type
      }, e.prototype.setNext = function (t) {
        return this.setNextVertex(t)
      }, e.prototype.setNextVertex = function (t) {
        return t ? (this.m_vertex3.setVec2(t), this.m_hasVertex3 = !0) : (this.m_vertex3.setZero(), this.m_hasVertex3 = !1), this
      }, e.prototype.getNextVertex = function () {
        return this.m_vertex3
      }, e.prototype.setPrev = function (t) {
        return this.setPrevVertex(t)
      }, e.prototype.setPrevVertex = function (t) {
        return t ? (this.m_vertex0.setVec2(t), this.m_hasVertex0 = !0) : (this.m_vertex0.setZero(), this.m_hasVertex0 = !1), this
      }, e.prototype.getPrevVertex = function () {
        return this.m_vertex0
      }, e.prototype._set = function (t, e) {
        return this.m_vertex1.setVec2(t), this.m_vertex2.setVec2(e), this.m_hasVertex0 = !1, this.m_hasVertex3 = !1, this
      }, e.prototype._clone = function () {
        var t = new e
        return t.m_type = this.m_type, t.m_radius = this.m_radius, t.m_vertex1.setVec2(this.m_vertex1), t.m_vertex2.setVec2(this.m_vertex2), t.m_vertex0.setVec2(this.m_vertex0), t.m_vertex3.setVec2(this.m_vertex3), t.m_hasVertex0 = this.m_hasVertex0, t.m_hasVertex3 = this.m_hasVertex3, t
      }, e.prototype.getChildCount = function () {
        return 1
      }, e.prototype.testPoint = function (t, e) {
        return !1
      }, e.prototype.rayCast = function (t, e, i, o) {
        var s = ut.mulTVec2(i.q, y.sub(e.p1, i.p)), n = ut.mulTVec2(i.q, y.sub(e.p2, i.p)), r = y.sub(n, s),
          a = this.m_vertex1, m = this.m_vertex2, h = y.sub(m, a), c = y.neo(h.y, -h.x)
        c.normalize()
        var _ = y.dot(c, y.sub(a, s)), l = y.dot(c, r)
        if (0 == l) return !1
        var u = _ / l
        if (u < 0 || e.maxFraction < u) return !1
        var p = y.add(s, y.mulNumVec2(u, r)), d = y.sub(m, a), f = y.dot(d, d)
        if (0 == f) return !1
        var v = y.dot(y.sub(p, a), d) / f
        return !(v < 0 || 1 < v) && (t.fraction = u, t.normal = _ > 0 ? ut.mulVec2(i.q, c).neg() : ut.mulVec2(i.q, c), !0)
      }, e.prototype.computeAABB = function (t, e, i) {
        rt(ro, e, this.m_vertex1), rt(ao, e, this.m_vertex2), v.combinePoints(t, ro, ao), v.extend(t, this.m_radius)
      }, e.prototype.computeMass = function (t, e) {
        t.mass = 0, U(t.center, .5, this.m_vertex1, .5, this.m_vertex2), t.I = 0
      }, e.prototype.computeDistanceProxy = function (t) {
        t.m_vertices[0] = this.m_vertex1, t.m_vertices[1] = this.m_vertex2, t.m_vertices.length = 2, t.m_count = 2, t.m_radius = this.m_radius
      }, e.TYPE = 'edge', e
    }(wt), ho = mo, co = q(0, 0), _o = q(0, 0), lo = function (t) {
      function e (i, o) {
        var s = this
        return s instanceof e ? ((s = t.call(this) || this).m_type = e.TYPE, s.m_radius = g.polygonRadius, s.m_vertices = [], s.m_count = 0, s.m_prevVertex = null, s.m_nextVertex = null, s.m_hasPrevVertex = !1, s.m_hasNextVertex = !1, s.m_isLoop = !!o, i && i.length && (o ? s._createLoop(i) : s._createChain(i)), s) : new e(i, o)
      }

      return i(e, t), e.prototype._serialize = function () {
        var t = {
          type: this.m_type,
          vertices: this.m_vertices,
          isLoop: this.m_isLoop,
          hasPrevVertex: this.m_hasPrevVertex,
          hasNextVertex: this.m_hasNextVertex,
          prevVertex: null,
          nextVertex: null
        }
        return this.m_prevVertex && (t.prevVertex = this.m_prevVertex), this.m_nextVertex && (t.nextVertex = this.m_nextVertex), t
      }, e._deserialize = function (t, i, o) {
        var s = []
        if (t.vertices) for (var n = 0; n < t.vertices.length; n++) s.push(o(y, t.vertices[n]))
        var r = new e(s, t.isLoop)
        return t.prevVertex && r.setPrevVertex(t.prevVertex), t.nextVertex && r.setNextVertex(t.nextVertex), r
      }, e.prototype.getType = function () {
        return this.m_type
      }, e.prototype.getRadius = function () {
        return this.m_radius
      }, e.prototype._createLoop = function (t) {
        if (!(t.length < 3)) {
          for (var e = 1; e < t.length; ++e) t[e - 1], t[e]
          this.m_vertices = [], this.m_count = t.length + 1
          for (e = 0; e < t.length; ++e) this.m_vertices[e] = y.clone(t[e])
          return this.m_vertices[t.length] = y.clone(t[0]), this.m_prevVertex = this.m_vertices[this.m_count - 2], this.m_nextVertex = this.m_vertices[1], this.m_hasPrevVertex = !0, this.m_hasNextVertex = !0, this
        }
      }, e.prototype._createChain = function (t) {
        for (var e = 1; e < t.length; ++e) t[e - 1], t[e]
        this.m_count = t.length
        for (e = 0; e < t.length; ++e) this.m_vertices[e] = y.clone(t[e])
        return this.m_hasPrevVertex = !1, this.m_hasNextVertex = !1, this.m_prevVertex = null, this.m_nextVertex = null, this
      }, e.prototype._reset = function () {
        this.m_isLoop ? this._createLoop(this.m_vertices) : this._createChain(this.m_vertices)
      }, e.prototype.setPrevVertex = function (t) {
        this.m_prevVertex = t, this.m_hasPrevVertex = !0
      }, e.prototype.getPrevVertex = function () {
        return this.m_prevVertex
      }, e.prototype.setNextVertex = function (t) {
        this.m_nextVertex = t, this.m_hasNextVertex = !0
      }, e.prototype.getNextVertex = function () {
        return this.m_nextVertex
      }, e.prototype._clone = function () {
        var t = new e
        return t._createChain(this.m_vertices), t.m_type = this.m_type, t.m_radius = this.m_radius, t.m_prevVertex = this.m_prevVertex, t.m_nextVertex = this.m_nextVertex, t.m_hasPrevVertex = this.m_hasPrevVertex, t.m_hasNextVertex = this.m_hasNextVertex, t
      }, e.prototype.getChildCount = function () {
        return this.m_count - 1
      }, e.prototype.getChildEdge = function (t, e) {
        t.m_type = mo.TYPE, t.m_radius = this.m_radius, t.m_vertex1 = this.m_vertices[e], t.m_vertex2 = this.m_vertices[e + 1], e > 0 ? (t.m_vertex0 = this.m_vertices[e - 1], t.m_hasVertex0 = !0) : (t.m_vertex0 = this.m_prevVertex, t.m_hasVertex0 = this.m_hasPrevVertex), e < this.m_count - 2 ? (t.m_vertex3 = this.m_vertices[e + 2], t.m_hasVertex3 = !0) : (t.m_vertex3 = this.m_nextVertex, t.m_hasVertex3 = this.m_hasNextVertex)
      }, e.prototype.getVertex = function (t) {
        return t < this.m_count ? this.m_vertices[t] : this.m_vertices[0]
      }, e.prototype.isLoop = function () {
        return this.m_isLoop
      }, e.prototype.testPoint = function (t, e) {
        return !1
      }, e.prototype.rayCast = function (t, e, i, o) {
        return new mo(this.getVertex(o), this.getVertex(o + 1)).rayCast(t, e, i, 0)
      }, e.prototype.computeAABB = function (t, e, i) {
        rt(co, e, this.getVertex(i)), rt(_o, e, this.getVertex(i + 1)), v.combinePoints(t, co, _o)
      }, e.prototype.computeMass = function (t, e) {
        t.mass = 0, j(t.center), t.I = 0
      }, e.prototype.computeDistanceProxy = function (t, e) {
        t.m_vertices[0] = this.getVertex(e), t.m_vertices[1] = this.getVertex(e + 1), t.m_count = 2, t.m_radius = this.m_radius
      }, e.TYPE = 'chain', e
    }(wt), uo = lo, po = Math.max, yo = Math.min, fo = q(0, 0), vo = q(0, 0), xo = q(0, 0), Ao = q(0, 0), go = q(0, 0),
    bo = q(0, 0), Bo = function (t) {
      function e (i) {
        var o = this
        return o instanceof e ? ((o = t.call(this) || this).m_type = e.TYPE, o.m_radius = g.polygonRadius, o.m_centroid = y.zero(), o.m_vertices = [], o.m_normals = [], o.m_count = 0, i && i.length && o._set(i), o) : new e(i)
      }

      return i(e, t), e.prototype._serialize = function () {
        return {type: this.m_type, vertices: this.m_vertices}
      }, e._deserialize = function (t, i, o) {
        var s = []
        if (t.vertices) for (var n = 0; n < t.vertices.length; n++) s.push(o(y, t.vertices[n]))
        return new e(s)
      }, e.prototype.getType = function () {
        return this.m_type
      }, e.prototype.getRadius = function () {
        return this.m_radius
      }, e.prototype._clone = function () {
        var t = new e
        t.m_type = this.m_type, t.m_radius = this.m_radius, t.m_count = this.m_count, t.m_centroid.setVec2(this.m_centroid)
        for (var i = 0; i < this.m_count; i++) t.m_vertices.push(this.m_vertices[i].clone())
        for (i = 0; i < this.m_normals.length; i++) t.m_normals.push(this.m_normals[i].clone())
        return t
      }, e.prototype.getChildCount = function () {
        return 1
      }, e.prototype._reset = function () {
        this._set(this.m_vertices)
      }, e.prototype._set = function (t) {
        if (t.length < 3) {
          this._setAsBox(1, 1)
        } else {
          for (var e = yo(t.length, g.maxPolygonVertices), i = [], o = 0; o < e; ++o) {
            for (var s = t[o], n = !0, r = 0; r < i.length; ++r) {
              if (y.distanceSquared(s, i[r]) < .25 * g.linearSlopSquared) {
                n = !1
                break
              }
            }
            n && i.push(y.clone(s))
          }
          if ((e = i.length) < 3) {
            this._setAsBox(1, 1)
          } else {
            var a = 0, m = i[0].x
            for (o = 1; o < e; ++o) {
              var h = i[o].x;
              (h > m || h === m && i[o].y < i[a].y) && (a = o, m = h)
            }
            for (var c = [], _ = 0, l = a; ;) {
              c[_] = l
              var u = 0
              for (r = 1; r < e; ++r) {
                if (u !== l) {
                  var p = y.sub(i[u], i[c[_]]), d = (s = y.sub(i[r], i[c[_]]), y.crossVec2Vec2(p, s))
                  d < 0 && (u = r), 0 === d && s.lengthSquared() > p.lengthSquared() && (u = r)
                } else {
                  u = r
                }
              }
              if (++_, l = u, u === a) break
            }
            if (_ < 3) {
              this._setAsBox(1, 1)
            } else {
              this.m_count = _, this.m_vertices = []
              for (o = 0; o < _; ++o) this.m_vertices[o] = i[c[o]]
              for (o = 0; o < _; ++o) {
                var f = o, v = o + 1 < _ ? o + 1 : 0, x = y.sub(this.m_vertices[v], this.m_vertices[f])
                this.m_normals[o] = y.crossVec2Num(x, 1), this.m_normals[o].normalize()
              }
              this.m_centroid = function (t, e) {
                for (var i = y.zero(), o = 0, s = y.zero(), n = 1 / 3, r = 0; r < e; ++r) {
                  var a = s, m = t[r], h = r + 1 < e ? t[r + 1] : t[0], c = y.sub(m, a), _ = y.sub(h, a),
                    l = .5 * y.crossVec2Vec2(c, _)
                  o += l, i.addMul(l * n, a), i.addMul(l * n, m), i.addMul(l * n, h)
                }
                return i.mul(1 / o), i
              }(this.m_vertices, _)
            }
          }
        }
      }, e.prototype._setAsBox = function (t, e, i, o) {
        if (this.m_vertices[0] = y.neo(t, -e), this.m_vertices[1] = y.neo(t, e), this.m_vertices[2] = y.neo(-t, e), this.m_vertices[3] = y.neo(-t, -e), this.m_normals[0] = y.neo(1, 0), this.m_normals[1] = y.neo(0, 1), this.m_normals[2] = y.neo(-1, 0), this.m_normals[3] = y.neo(0, -1), this.m_count = 4, i && y.isValid(i)) {
          o = o || 0, N(this.m_centroid, i)
          var s = vt.identity()
          s.p.setVec2(i), s.q.setAngle(o)
          for (var n = 0; n < this.m_count; ++n) this.m_vertices[n] = vt.mulVec2(s, this.m_vertices[n]), this.m_normals[n] = ut.mulVec2(s.q, this.m_normals[n])
        }
      }, e.prototype.testPoint = function (t, e) {
        for (var i = at(fo, t, e), o = 0; o < this.m_count; ++o) {
          if (Q(this.m_normals[o], i) - Q(this.m_normals[o], this.m_vertices[o]) > 0) return !1
        }
        return !0
      }, e.prototype.rayCast = function (t, e, i, o) {
        for (var s = ut.mulTVec2(i.q, y.sub(e.p1, i.p)), n = ut.mulTVec2(i.q, y.sub(e.p2, i.p)), r = y.sub(n, s), a = 0, m = e.maxFraction, h = -1, c = 0; c < this.m_count; ++c) {
          var _ = y.dot(this.m_normals[c], y.sub(this.m_vertices[c], s)), l = y.dot(this.m_normals[c], r)
          if (0 == l) {
            if (_ < 0) return !1
          } else {
            l < 0 && _ < a * l ? (a = _ / l, h = c) : l > 0 && _ < m * l && (m = _ / l)
          }
          if (m < a) return !1
        }
        return h >= 0 && (t.fraction = a, t.normal = ut.mulVec2(i.q, this.m_normals[h]), !0)
      }, e.prototype.computeAABB = function (t, e, i) {
        for (var o = 1 / 0, s = 1 / 0, n = -1 / 0, r = -1 / 0, a = 0; a < this.m_count; ++a) {
          var m = rt(fo, e, this.m_vertices[a])
          o = yo(o, m.x), n = po(n, m.x), s = yo(s, m.y), r = po(r, m.y)
        }
        k(t.lowerBound, o - this.m_radius, s - this.m_radius), k(t.upperBound, n + this.m_radius, r + this.m_radius)
      }, e.prototype.computeMass = function (t, e) {
        j(go)
        var i = 0, o = 0
        j(bo)
        for (var s = 0; s < this.m_count; ++s) O(bo, this.m_vertices[s])
        Y(bo, 1 / this.m_count, bo)
        var n = 1 / 3
        for (s = 0; s < this.m_count; ++s) {
          E(xo, this.m_vertices[s], bo), s + 1 < this.m_count ? E(Ao, this.m_vertices[s + 1], bo) : E(Ao, this.m_vertices[0], bo)
          var r = G(xo, Ao), a = .5 * r
          i += a, U(go, 1, go, a * n, xo), U(go, 1, go, a * n, Ao)
          var m = xo.x, h = xo.y, c = Ao.x, _ = Ao.y
          o += .25 * n * r * (m * m + c * m + c * c + (h * h + _ * h + _ * _))
        }
        t.mass = e * i, Y(go, 1 / i, go), function (t, e, i) {
          t.x = e.x + i.x, t.y = e.x + i.y
        }(t.center, go, bo), t.I = e * o, t.I += t.mass * (Q(t.center, t.center) - Q(go, go))
      }, e.prototype.validate = function () {
        for (var t = 0; t < this.m_count; ++t) {
          var e = t, i = t < this.m_count - 1 ? e + 1 : 0, o = this.m_vertices[e]
          E(vo, this.m_vertices[i], o)
          for (var s = 0; s < this.m_count; ++s) {
            if (s != e && s != i) if (G(vo, E(fo, this.m_vertices[s], o)) < 0) return !1
          }
        }
        return !0
      }, e.prototype.computeDistanceProxy = function (t) {
        for (var e = 0; e < this.m_count; ++e) t.m_vertices[e] = this.m_vertices[e]
        t.m_vertices.length = this.m_count, t.m_count = this.m_count, t.m_radius = this.m_radius
      }, e.TYPE = 'polygon', e
    }(wt)
  var wo, Vo = Bo, Co = function (t) {
    function e (i, o, s, n) {
      var r = this
      return r instanceof e ? ((r = t.call(this) || this)._setAsBox(i, o, s, n), r) : new e(i, o, s, n)
    }

    return i(e, t), e.TYPE = 'polygon', e
  }(Bo), Mo = Co, Io = Math.sqrt, Po = Math.PI, So = q(0, 0), To = function (t) {
    function e (i, o) {
      var s = this
      return s instanceof e ? ((s = t.call(this) || this).m_type = e.TYPE, s.m_p = y.zero(), s.m_radius = 1, 'object' == typeof i && y.isValid(i) ? (s.m_p.setVec2(i), 'number' == typeof o && (s.m_radius = o)) : 'number' == typeof i && (s.m_radius = i), s) : new e(i, o)
    }

    return i(e, t), e.prototype._serialize = function () {
      return {type: this.m_type, p: this.m_p, radius: this.m_radius}
    }, e._deserialize = function (t) {
      return new e(t.p, t.radius)
    }, e.prototype._reset = function () {
    }, e.prototype.getType = function () {
      return this.m_type
    }, e.prototype.getRadius = function () {
      return this.m_radius
    }, e.prototype.getCenter = function () {
      return this.m_p
    }, e.prototype._clone = function () {
      var t = new e
      return t.m_type = this.m_type, t.m_radius = this.m_radius, t.m_p = this.m_p.clone(), t
    }, e.prototype.getChildCount = function () {
      return 1
    }, e.prototype.testPoint = function (t, e) {
      return et(e, rt(So, t, this.m_p)) <= this.m_radius * this.m_radius
    }, e.prototype.rayCast = function (t, e, i, o) {
      var s = y.add(i.p, ut.mulVec2(i.q, this.m_p)), n = y.sub(e.p1, s),
        a = y.dot(n, n) - this.m_radius * this.m_radius, m = y.sub(e.p2, e.p1), h = y.dot(n, m), c = y.dot(m, m),
        _ = h * h - c * a
      if (_ < 0 || c < r) return !1
      var l = -(h + Io(_))
      return 0 <= l && l <= e.maxFraction * c && (l /= c, t.fraction = l, t.normal = y.add(n, y.mulNumVec2(l, m)), t.normal.normalize(), !0)
    }, e.prototype.computeAABB = function (t, e, i) {
      var o = rt(So, e, this.m_p)
      k(t.lowerBound, o.x - this.m_radius, o.y - this.m_radius), k(t.upperBound, o.x + this.m_radius, o.y + this.m_radius)
    }, e.prototype.computeMass = function (t, e) {
      t.mass = e * Po * this.m_radius * this.m_radius, N(t.center, this.m_p), t.I = t.mass * (.5 * this.m_radius * this.m_radius + $(this.m_p))
    }, e.prototype.computeDistanceProxy = function (t) {
      t.m_vertices[0] = this.m_p, t.m_vertices.length = 1, t.m_count = 1, t.m_radius = this.m_radius
    }, e.TYPE = 'circle', e
  }(wt), zo = To, Fo = Math.abs, Lo = Math.PI, qo = {frequencyHz: 0, dampingRatio: 0}, ko = function (t) {
    function e (i, o, n, r, a) {
      var m = this
      if (!(m instanceof e)) return new e(i, o, n, r, a)
      if (n && r && 'm_type' in r && 'x' in n && 'y' in n) {
        var h = n
        n = r, r = h
      }
      return i = s(i, qo), o = (m = t.call(this, i, o, n) || this).m_bodyA, n = m.m_bodyB, m.m_type = e.TYPE, m.m_localAnchorA = y.clone(r ? o.getLocalPoint(r) : i.localAnchorA || y.zero()), m.m_localAnchorB = y.clone(a ? n.getLocalPoint(a) : i.localAnchorB || y.zero()), m.m_length = Number.isFinite(i.length) ? i.length : y.distance(o.getWorldPoint(m.m_localAnchorA), n.getWorldPoint(m.m_localAnchorB)), m.m_frequencyHz = i.frequencyHz, m.m_dampingRatio = i.dampingRatio, m.m_impulse = 0, m.m_gamma = 0, m.m_bias = 0, m
    }

    return i(e, t), e.prototype._serialize = function () {
      return {
        type: this.m_type,
        bodyA: this.m_bodyA,
        bodyB: this.m_bodyB,
        collideConnected: this.m_collideConnected,
        frequencyHz: this.m_frequencyHz,
        dampingRatio: this.m_dampingRatio,
        localAnchorA: this.m_localAnchorA,
        localAnchorB: this.m_localAnchorB,
        length: this.m_length,
        impulse: this.m_impulse,
        gamma: this.m_gamma,
        bias: this.m_bias
      }
    }, e._deserialize = function (t, i, s) {
      return (t = o({}, t)).bodyA = s(Ot, t.bodyA, i), t.bodyB = s(Ot, t.bodyB, i), new e(t)
    }, e.prototype._setAnchors = function (t) {
      t.anchorA ? this.m_localAnchorA.setVec2(this.m_bodyA.getLocalPoint(t.anchorA)) : t.localAnchorA && this.m_localAnchorA.setVec2(t.localAnchorA), t.anchorB ? this.m_localAnchorB.setVec2(this.m_bodyB.getLocalPoint(t.anchorB)) : t.localAnchorB && this.m_localAnchorB.setVec2(t.localAnchorB), t.length > 0 ? this.m_length = +t.length : t.length < 0 || (t.anchorA || t.anchorA || t.anchorA || t.anchorA) && (this.m_length = y.distance(this.m_bodyA.getWorldPoint(this.m_localAnchorA), this.m_bodyB.getWorldPoint(this.m_localAnchorB)))
    }, e.prototype.getLocalAnchorA = function () {
      return this.m_localAnchorA
    }, e.prototype.getLocalAnchorB = function () {
      return this.m_localAnchorB
    }, e.prototype.setLength = function (t) {
      this.m_length = t
    }, e.prototype.getLength = function () {
      return this.m_length
    }, e.prototype.setFrequency = function (t) {
      this.m_frequencyHz = t
    }, e.prototype.getFrequency = function () {
      return this.m_frequencyHz
    }, e.prototype.setDampingRatio = function (t) {
      this.m_dampingRatio = t
    }, e.prototype.getDampingRatio = function () {
      return this.m_dampingRatio
    }, e.prototype.getAnchorA = function () {
      return this.m_bodyA.getWorldPoint(this.m_localAnchorA)
    }, e.prototype.getAnchorB = function () {
      return this.m_bodyB.getWorldPoint(this.m_localAnchorB)
    }, e.prototype.getReactionForce = function (t) {
      return y.mulNumVec2(this.m_impulse, this.m_u).mul(t)
    }, e.prototype.getReactionTorque = function (t) {
      return 0
    }, e.prototype.initVelocityConstraints = function (t) {
      this.m_localCenterA = this.m_bodyA.m_sweep.localCenter, this.m_localCenterB = this.m_bodyB.m_sweep.localCenter, this.m_invMassA = this.m_bodyA.m_invMass, this.m_invMassB = this.m_bodyB.m_invMass, this.m_invIA = this.m_bodyA.m_invI, this.m_invIB = this.m_bodyB.m_invI
      var e = this.m_bodyA.c_position.c, i = this.m_bodyA.c_position.a, o = this.m_bodyA.c_velocity.v,
        s = this.m_bodyA.c_velocity.w, n = this.m_bodyB.c_position.c, r = this.m_bodyB.c_position.a,
        a = this.m_bodyB.c_velocity.v, m = this.m_bodyB.c_velocity.w, h = ut.neo(i), c = ut.neo(r)
      this.m_rA = ut.mulVec2(h, y.sub(this.m_localAnchorA, this.m_localCenterA)), this.m_rB = ut.mulVec2(c, y.sub(this.m_localAnchorB, this.m_localCenterB)), this.m_u = y.sub(y.add(n, this.m_rB), y.add(e, this.m_rA))
      var _ = this.m_u.length()
      _ > g.linearSlop ? this.m_u.mul(1 / _) : this.m_u.setNum(0, 0)
      var l = y.crossVec2Vec2(this.m_rA, this.m_u), u = y.crossVec2Vec2(this.m_rB, this.m_u),
        p = this.m_invMassA + this.m_invIA * l * l + this.m_invMassB + this.m_invIB * u * u
      if (this.m_mass = 0 != p ? 1 / p : 0, this.m_frequencyHz > 0) {
        var d = _ - this.m_length, f = 2 * Lo * this.m_frequencyHz, v = 2 * this.m_mass * this.m_dampingRatio * f,
          x = this.m_mass * f * f, A = t.dt
        this.m_gamma = A * (v + A * x), this.m_gamma = 0 != this.m_gamma ? 1 / this.m_gamma : 0, this.m_bias = d * A * x * this.m_gamma, p += this.m_gamma, this.m_mass = 0 != p ? 1 / p : 0
      } else {
        this.m_gamma = 0, this.m_bias = 0
      }
      if (t.warmStarting) {
        this.m_impulse *= t.dtRatio
        var b = y.mulNumVec2(this.m_impulse, this.m_u)
        o.subMul(this.m_invMassA, b), s -= this.m_invIA * y.crossVec2Vec2(this.m_rA, b), a.addMul(this.m_invMassB, b), m += this.m_invIB * y.crossVec2Vec2(this.m_rB, b)
      } else {
        this.m_impulse = 0
      }
      this.m_bodyA.c_velocity.v.setVec2(o), this.m_bodyA.c_velocity.w = s, this.m_bodyB.c_velocity.v.setVec2(a), this.m_bodyB.c_velocity.w = m
    }, e.prototype.solveVelocityConstraints = function (t) {
      var e = this.m_bodyA.c_velocity.v, i = this.m_bodyA.c_velocity.w, o = this.m_bodyB.c_velocity.v,
        s = this.m_bodyB.c_velocity.w, n = y.add(e, y.crossNumVec2(i, this.m_rA)),
        r = y.add(o, y.crossNumVec2(s, this.m_rB)), a = y.dot(this.m_u, r) - y.dot(this.m_u, n),
        m = -this.m_mass * (a + this.m_bias + this.m_gamma * this.m_impulse)
      this.m_impulse += m
      var h = y.mulNumVec2(m, this.m_u)
      e.subMul(this.m_invMassA, h), i -= this.m_invIA * y.crossVec2Vec2(this.m_rA, h), o.addMul(this.m_invMassB, h), s += this.m_invIB * y.crossVec2Vec2(this.m_rB, h), this.m_bodyA.c_velocity.v.setVec2(e), this.m_bodyA.c_velocity.w = i, this.m_bodyB.c_velocity.v.setVec2(o), this.m_bodyB.c_velocity.w = s
    }, e.prototype.solvePositionConstraints = function (t) {
      if (this.m_frequencyHz > 0) return !0
      var e = this.m_bodyA.c_position.c, i = this.m_bodyA.c_position.a, o = this.m_bodyB.c_position.c,
        s = this.m_bodyB.c_position.a, n = ut.neo(i), r = ut.neo(s),
        a = ut.mulSub(n, this.m_localAnchorA, this.m_localCenterA),
        m = ut.mulSub(r, this.m_localAnchorB, this.m_localCenterB), c = y.sub(y.add(o, m), y.add(e, a)),
        _ = h(c.normalize() - this.m_length, -g.maxLinearCorrection, g.maxLinearCorrection), l = -this.m_mass * _,
        u = y.mulNumVec2(l, c)
      return e.subMul(this.m_invMassA, u), i -= this.m_invIA * y.crossVec2Vec2(a, u), o.addMul(this.m_invMassB, u), s += this.m_invIB * y.crossVec2Vec2(m, u), this.m_bodyA.c_position.c.setVec2(e), this.m_bodyA.c_position.a = i, this.m_bodyB.c_position.c.setVec2(o), this.m_bodyB.c_position.a = s, Fo(_) < g.linearSlop
    }, e.TYPE = 'distance-joint', e
  }(Et), No = {maxForce: 0, maxTorque: 0}, jo = function (t) {
    function e (i, o, n, r) {
      var a = this
      return a instanceof e ? (i = s(i, No), o = (a = t.call(this, i, o, n) || this).m_bodyA, n = a.m_bodyB, a.m_type = e.TYPE, a.m_localAnchorA = y.clone(r ? o.getLocalPoint(r) : i.localAnchorA || y.zero()), a.m_localAnchorB = y.clone(r ? n.getLocalPoint(r) : i.localAnchorB || y.zero()), a.m_linearImpulse = y.zero(), a.m_angularImpulse = 0, a.m_maxForce = i.maxForce, a.m_maxTorque = i.maxTorque, a) : new e(i, o, n, r)
    }

    return i(e, t), e.prototype._serialize = function () {
      return {
        type: this.m_type,
        bodyA: this.m_bodyA,
        bodyB: this.m_bodyB,
        collideConnected: this.m_collideConnected,
        maxForce: this.m_maxForce,
        maxTorque: this.m_maxTorque,
        localAnchorA: this.m_localAnchorA,
        localAnchorB: this.m_localAnchorB
      }
    }, e._deserialize = function (t, i, s) {
      return (t = o({}, t)).bodyA = s(Ot, t.bodyA, i), t.bodyB = s(Ot, t.bodyB, i), new e(t)
    }, e.prototype._setAnchors = function (t) {
      t.anchorA ? this.m_localAnchorA.setVec2(this.m_bodyA.getLocalPoint(t.anchorA)) : t.localAnchorA && this.m_localAnchorA.setVec2(t.localAnchorA), t.anchorB ? this.m_localAnchorB.setVec2(this.m_bodyB.getLocalPoint(t.anchorB)) : t.localAnchorB && this.m_localAnchorB.setVec2(t.localAnchorB)
    }, e.prototype.getLocalAnchorA = function () {
      return this.m_localAnchorA
    }, e.prototype.getLocalAnchorB = function () {
      return this.m_localAnchorB
    }, e.prototype.setMaxForce = function (t) {
      this.m_maxForce = t
    }, e.prototype.getMaxForce = function () {
      return this.m_maxForce
    }, e.prototype.setMaxTorque = function (t) {
      this.m_maxTorque = t
    }, e.prototype.getMaxTorque = function () {
      return this.m_maxTorque
    }, e.prototype.getAnchorA = function () {
      return this.m_bodyA.getWorldPoint(this.m_localAnchorA)
    }, e.prototype.getAnchorB = function () {
      return this.m_bodyB.getWorldPoint(this.m_localAnchorB)
    }, e.prototype.getReactionForce = function (t) {
      return y.mulNumVec2(t, this.m_linearImpulse)
    }, e.prototype.getReactionTorque = function (t) {
      return t * this.m_angularImpulse
    }, e.prototype.initVelocityConstraints = function (t) {
      this.m_localCenterA = this.m_bodyA.m_sweep.localCenter, this.m_localCenterB = this.m_bodyB.m_sweep.localCenter, this.m_invMassA = this.m_bodyA.m_invMass, this.m_invMassB = this.m_bodyB.m_invMass, this.m_invIA = this.m_bodyA.m_invI, this.m_invIB = this.m_bodyB.m_invI
      var e = this.m_bodyA.c_position.a, i = this.m_bodyA.c_velocity.v, o = this.m_bodyA.c_velocity.w,
        s = this.m_bodyB.c_position.a, n = this.m_bodyB.c_velocity.v, r = this.m_bodyB.c_velocity.w, a = ut.neo(e),
        m = ut.neo(s)
      this.m_rA = ut.mulVec2(a, y.sub(this.m_localAnchorA, this.m_localCenterA)), this.m_rB = ut.mulVec2(m, y.sub(this.m_localAnchorB, this.m_localCenterB))
      var h = this.m_invMassA, c = this.m_invMassB, _ = this.m_invIA, l = this.m_invIB, u = new ii
      if (u.ex.x = h + c + _ * this.m_rA.y * this.m_rA.y + l * this.m_rB.y * this.m_rB.y, u.ex.y = -_ * this.m_rA.x * this.m_rA.y - l * this.m_rB.x * this.m_rB.y, u.ey.x = u.ex.y, u.ey.y = h + c + _ * this.m_rA.x * this.m_rA.x + l * this.m_rB.x * this.m_rB.x, this.m_linearMass = u.getInverse(), this.m_angularMass = _ + l, this.m_angularMass > 0 && (this.m_angularMass = 1 / this.m_angularMass), t.warmStarting) {
        this.m_linearImpulse.mul(t.dtRatio), this.m_angularImpulse *= t.dtRatio
        var p = y.neo(this.m_linearImpulse.x, this.m_linearImpulse.y)
        i.subMul(h, p), o -= _ * (y.crossVec2Vec2(this.m_rA, p) + this.m_angularImpulse), n.addMul(c, p), r += l * (y.crossVec2Vec2(this.m_rB, p) + this.m_angularImpulse)
      } else {
        this.m_linearImpulse.setZero(), this.m_angularImpulse = 0
      }
      this.m_bodyA.c_velocity.v = i, this.m_bodyA.c_velocity.w = o, this.m_bodyB.c_velocity.v = n, this.m_bodyB.c_velocity.w = r
    }, e.prototype.solveVelocityConstraints = function (t) {
      var e = this.m_bodyA.c_velocity.v, i = this.m_bodyA.c_velocity.w, o = this.m_bodyB.c_velocity.v,
        s = this.m_bodyB.c_velocity.w, n = this.m_invMassA, r = this.m_invMassB, a = this.m_invIA, m = this.m_invIB,
        c = t.dt, _ = s - i, l = -this.m_angularMass * _, u = this.m_angularImpulse, p = c * this.m_maxTorque
      this.m_angularImpulse = h(this.m_angularImpulse + l, -p, p), i -= a * (l = this.m_angularImpulse - u), s += m * l
      _ = y.sub(y.add(o, y.crossNumVec2(s, this.m_rB)), y.add(e, y.crossNumVec2(i, this.m_rA))), l = y.neg(ii.mulVec2(this.m_linearMass, _)), u = this.m_linearImpulse
      this.m_linearImpulse.add(l)
      p = c * this.m_maxForce
      this.m_linearImpulse.lengthSquared() > p * p && (this.m_linearImpulse.normalize(), this.m_linearImpulse.mul(p)), l = y.sub(this.m_linearImpulse, u), e.subMul(n, l), i -= a * y.crossVec2Vec2(this.m_rA, l), o.addMul(r, l), s += m * y.crossVec2Vec2(this.m_rB, l), this.m_bodyA.c_velocity.v = e, this.m_bodyA.c_velocity.w = i, this.m_bodyB.c_velocity.v = o, this.m_bodyB.c_velocity.w = s
    }, e.prototype.solvePositionConstraints = function (t) {
      return !0
    }, e.TYPE = 'friction-joint', e
  }(Et), Do = function () {
    function t (t, e, i) {
      'object' == typeof t && null !== t ? (this.ex = no.clone(t), this.ey = no.clone(e), this.ez = no.clone(i)) : (this.ex = no.zero(), this.ey = no.zero(), this.ez = no.zero())
    }

    return t.prototype.toString = function () {
      return JSON.stringify(this)
    }, t.isValid = function (t) {
      return null != t && (no.isValid(t.ex) && no.isValid(t.ey) && no.isValid(t.ez))
    }, t.assert = function (t) {
    }, t.prototype.setZero = function () {
      return this.ex.setZero(), this.ey.setZero(), this.ez.setZero(), this
    }, t.prototype.solve33 = function (t) {
      var e = this.ey.y * this.ez.z - this.ey.z * this.ez.y, i = this.ey.z * this.ez.x - this.ey.x * this.ez.z,
        o = this.ey.x * this.ez.y - this.ey.y * this.ez.x, s = this.ex.x * e + this.ex.y * i + this.ex.z * o
      0 !== s && (s = 1 / s)
      var n = new no
      return e = this.ey.y * this.ez.z - this.ey.z * this.ez.y, i = this.ey.z * this.ez.x - this.ey.x * this.ez.z, o = this.ey.x * this.ez.y - this.ey.y * this.ez.x, n.x = s * (t.x * e + t.y * i + t.z * o), e = t.y * this.ez.z - t.z * this.ez.y, i = t.z * this.ez.x - t.x * this.ez.z, o = t.x * this.ez.y - t.y * this.ez.x, n.y = s * (this.ex.x * e + this.ex.y * i + this.ex.z * o), e = this.ey.y * t.z - this.ey.z * t.y, i = this.ey.z * t.x - this.ey.x * t.z, o = this.ey.x * t.y - this.ey.y * t.x, n.z = s * (this.ex.x * e + this.ex.y * i + this.ex.z * o), n
    }, t.prototype.solve22 = function (t) {
      var e = this.ex.x, i = this.ey.x, o = this.ex.y, s = this.ey.y, n = e * s - i * o
      0 !== n && (n = 1 / n)
      var r = y.zero()
      return r.x = n * (s * t.x - i * t.y), r.y = n * (e * t.y - o * t.x), r
    }, t.prototype.getInverse22 = function (t) {
      var e = this.ex.x, i = this.ey.x, o = this.ex.y, s = this.ey.y, n = e * s - i * o
      0 !== n && (n = 1 / n), t.ex.x = n * s, t.ey.x = -n * i, t.ex.z = 0, t.ex.y = -n * o, t.ey.y = n * e, t.ey.z = 0, t.ez.x = 0, t.ez.y = 0, t.ez.z = 0
    }, t.prototype.getSymInverse33 = function (t) {
      var e = no.dot(this.ex, no.cross(this.ey, this.ez))
      0 !== e && (e = 1 / e)
      var i = this.ex.x, o = this.ey.x, s = this.ez.x, n = this.ey.y, r = this.ez.y, a = this.ez.z
      t.ex.x = e * (n * a - r * r), t.ex.y = e * (s * r - o * a), t.ex.z = e * (o * r - s * n), t.ey.x = t.ex.y, t.ey.y = e * (i * a - s * s), t.ey.z = e * (s * o - i * r), t.ez.x = t.ex.z, t.ez.y = t.ey.z, t.ez.z = e * (i * n - o * o)
    }, t.mul = function (t, e) {
      if (e && 'z' in e && 'y' in e && 'x' in e) {
        var i = t.ex.x * e.x + t.ey.x * e.y + t.ez.x * e.z, o = t.ex.y * e.x + t.ey.y * e.y + t.ez.y * e.z,
          s = t.ex.z * e.x + t.ey.z * e.y + t.ez.z * e.z
        return new no(i, o, s)
      }
      if (e && 'y' in e && 'x' in e) {
        i = t.ex.x * e.x + t.ey.x * e.y, o = t.ex.y * e.x + t.ey.y * e.y
        return y.neo(i, o)
      }
    }, t.mulVec3 = function (t, e) {
      var i = t.ex.x * e.x + t.ey.x * e.y + t.ez.x * e.z, o = t.ex.y * e.x + t.ey.y * e.y + t.ez.y * e.z,
        s = t.ex.z * e.x + t.ey.z * e.y + t.ez.z * e.z
      return new no(i, o, s)
    }, t.mulVec2 = function (t, e) {
      var i = t.ex.x * e.x + t.ey.x * e.y, o = t.ex.y * e.x + t.ey.y * e.y
      return y.neo(i, o)
    }, t.add = function (e, i) {
      return new t(no.add(e.ex, i.ex), no.add(e.ey, i.ey), no.add(e.ez, i.ez))
    }, t
  }(), Oo = Math.abs
  !function (t) {
    t[t.inactiveLimit = 0] = 'inactiveLimit', t[t.atLowerLimit = 1] = 'atLowerLimit', t[t.atUpperLimit = 2] = 'atUpperLimit', t[t.equalLimits = 3] = 'equalLimits'
  }(wo || (wo = {}))
  var Ro, Eo = 0, Jo = 0, Yo = 0, Wo = 0, Ho = !1, Uo = !1, Zo = function (t) {
    function e (i, o, s, n) {
      var r, a, m, h, c, _, l = this
      return l instanceof e ? (i = null != i ? i : {}, o = (l = t.call(this, i, o, s) || this).m_bodyA, s = l.m_bodyB, l.m_mass = new Do, l.m_limitState = wo.inactiveLimit, l.m_type = e.TYPE, y.isValid(n) ? l.m_localAnchorA = o.getLocalPoint(n) : y.isValid(i.localAnchorA) ? l.m_localAnchorA = y.clone(i.localAnchorA) : l.m_localAnchorA = y.zero(), y.isValid(n) ? l.m_localAnchorB = s.getLocalPoint(n) : y.isValid(i.localAnchorB) ? l.m_localAnchorB = y.clone(i.localAnchorB) : l.m_localAnchorB = y.zero(), Number.isFinite(i.referenceAngle) ? l.m_referenceAngle = i.referenceAngle : l.m_referenceAngle = s.getAngle() - o.getAngle(), l.m_impulse = new no, l.m_motorImpulse = 0, l.m_lowerAngle = null !== (r = i.lowerAngle) && void 0 !== r ? r : Eo, l.m_upperAngle = null !== (a = i.upperAngle) && void 0 !== a ? a : Jo, l.m_maxMotorTorque = null !== (m = i.maxMotorTorque) && void 0 !== m ? m : Yo, l.m_motorSpeed = null !== (h = i.motorSpeed) && void 0 !== h ? h : Wo, l.m_enableLimit = null !== (c = i.enableLimit) && void 0 !== c ? c : Ho, l.m_enableMotor = null !== (_ = i.enableMotor) && void 0 !== _ ? _ : Uo, l) : new e(i, o, s, n)
    }

    return i(e, t), e.prototype._serialize = function () {
      return {
        type: this.m_type,
        bodyA: this.m_bodyA,
        bodyB: this.m_bodyB,
        collideConnected: this.m_collideConnected,
        lowerAngle: this.m_lowerAngle,
        upperAngle: this.m_upperAngle,
        maxMotorTorque: this.m_maxMotorTorque,
        motorSpeed: this.m_motorSpeed,
        enableLimit: this.m_enableLimit,
        enableMotor: this.m_enableMotor,
        localAnchorA: this.m_localAnchorA,
        localAnchorB: this.m_localAnchorB,
        referenceAngle: this.m_referenceAngle
      }
    }, e._deserialize = function (t, i, s) {
      return (t = o({}, t)).bodyA = s(Ot, t.bodyA, i), t.bodyB = s(Ot, t.bodyB, i), new e(t)
    }, e.prototype._setAnchors = function (t) {
      t.anchorA ? this.m_localAnchorA.setVec2(this.m_bodyA.getLocalPoint(t.anchorA)) : t.localAnchorA && this.m_localAnchorA.setVec2(t.localAnchorA), t.anchorB ? this.m_localAnchorB.setVec2(this.m_bodyB.getLocalPoint(t.anchorB)) : t.localAnchorB && this.m_localAnchorB.setVec2(t.localAnchorB)
    }, e.prototype.getLocalAnchorA = function () {
      return this.m_localAnchorA
    }, e.prototype.getLocalAnchorB = function () {
      return this.m_localAnchorB
    }, e.prototype.getReferenceAngle = function () {
      return this.m_referenceAngle
    }, e.prototype.getJointAngle = function () {
      var t = this.m_bodyA
      return this.m_bodyB.m_sweep.a - t.m_sweep.a - this.m_referenceAngle
    }, e.prototype.getJointSpeed = function () {
      var t = this.m_bodyA
      return this.m_bodyB.m_angularVelocity - t.m_angularVelocity
    }, e.prototype.isMotorEnabled = function () {
      return this.m_enableMotor
    }, e.prototype.enableMotor = function (t) {
      t != this.m_enableMotor && (this.m_bodyA.setAwake(!0), this.m_bodyB.setAwake(!0), this.m_enableMotor = t)
    }, e.prototype.getMotorTorque = function (t) {
      return t * this.m_motorImpulse
    }, e.prototype.setMotorSpeed = function (t) {
      t != this.m_motorSpeed && (this.m_bodyA.setAwake(!0), this.m_bodyB.setAwake(!0), this.m_motorSpeed = t)
    }, e.prototype.getMotorSpeed = function () {
      return this.m_motorSpeed
    }, e.prototype.setMaxMotorTorque = function (t) {
      t != this.m_maxMotorTorque && (this.m_bodyA.setAwake(!0), this.m_bodyB.setAwake(!0), this.m_maxMotorTorque = t)
    }, e.prototype.getMaxMotorTorque = function () {
      return this.m_maxMotorTorque
    }, e.prototype.isLimitEnabled = function () {
      return this.m_enableLimit
    }, e.prototype.enableLimit = function (t) {
      t != this.m_enableLimit && (this.m_bodyA.setAwake(!0), this.m_bodyB.setAwake(!0), this.m_enableLimit = t, this.m_impulse.z = 0)
    }, e.prototype.getLowerLimit = function () {
      return this.m_lowerAngle
    }, e.prototype.getUpperLimit = function () {
      return this.m_upperAngle
    }, e.prototype.setLimits = function (t, e) {
      t == this.m_lowerAngle && e == this.m_upperAngle || (this.m_bodyA.setAwake(!0), this.m_bodyB.setAwake(!0), this.m_impulse.z = 0, this.m_lowerAngle = t, this.m_upperAngle = e)
    }, e.prototype.getAnchorA = function () {
      return this.m_bodyA.getWorldPoint(this.m_localAnchorA)
    }, e.prototype.getAnchorB = function () {
      return this.m_bodyB.getWorldPoint(this.m_localAnchorB)
    }, e.prototype.getReactionForce = function (t) {
      return y.neo(this.m_impulse.x, this.m_impulse.y).mul(t)
    }, e.prototype.getReactionTorque = function (t) {
      return t * this.m_impulse.z
    }, e.prototype.initVelocityConstraints = function (t) {
      this.m_localCenterA = this.m_bodyA.m_sweep.localCenter, this.m_localCenterB = this.m_bodyB.m_sweep.localCenter, this.m_invMassA = this.m_bodyA.m_invMass, this.m_invMassB = this.m_bodyB.m_invMass, this.m_invIA = this.m_bodyA.m_invI, this.m_invIB = this.m_bodyB.m_invI
      var e = this.m_bodyA.c_position.a, i = this.m_bodyA.c_velocity.v, o = this.m_bodyA.c_velocity.w,
        s = this.m_bodyB.c_position.a, n = this.m_bodyB.c_velocity.v, r = this.m_bodyB.c_velocity.w, a = ut.neo(e),
        m = ut.neo(s)
      this.m_rA = ut.mulVec2(a, y.sub(this.m_localAnchorA, this.m_localCenterA)), this.m_rB = ut.mulVec2(m, y.sub(this.m_localAnchorB, this.m_localCenterB))
      var h = this.m_invMassA, c = this.m_invMassB, _ = this.m_invIA, l = this.m_invIB, u = _ + l === 0
      if (this.m_mass.ex.x = h + c + this.m_rA.y * this.m_rA.y * _ + this.m_rB.y * this.m_rB.y * l, this.m_mass.ey.x = -this.m_rA.y * this.m_rA.x * _ - this.m_rB.y * this.m_rB.x * l, this.m_mass.ez.x = -this.m_rA.y * _ - this.m_rB.y * l, this.m_mass.ex.y = this.m_mass.ey.x, this.m_mass.ey.y = h + c + this.m_rA.x * this.m_rA.x * _ + this.m_rB.x * this.m_rB.x * l, this.m_mass.ez.y = this.m_rA.x * _ + this.m_rB.x * l, this.m_mass.ex.z = this.m_mass.ez.x, this.m_mass.ey.z = this.m_mass.ez.y, this.m_mass.ez.z = _ + l, this.m_motorMass = _ + l, this.m_motorMass > 0 && (this.m_motorMass = 1 / this.m_motorMass), (0 == this.m_enableMotor || u) && (this.m_motorImpulse = 0), this.m_enableLimit && 0 == u) {
        var p = s - e - this.m_referenceAngle
        Oo(this.m_upperAngle - this.m_lowerAngle) < 2 * g.angularSlop ? this.m_limitState = wo.equalLimits : p <= this.m_lowerAngle ? (this.m_limitState != wo.atLowerLimit && (this.m_impulse.z = 0), this.m_limitState = wo.atLowerLimit) : p >= this.m_upperAngle ? (this.m_limitState != wo.atUpperLimit && (this.m_impulse.z = 0), this.m_limitState = wo.atUpperLimit) : (this.m_limitState = wo.inactiveLimit, this.m_impulse.z = 0)
      } else {
        this.m_limitState = wo.inactiveLimit
      }
      if (t.warmStarting) {
        this.m_impulse.mul(t.dtRatio), this.m_motorImpulse *= t.dtRatio
        var d = y.neo(this.m_impulse.x, this.m_impulse.y)
        i.subMul(h, d), o -= _ * (y.crossVec2Vec2(this.m_rA, d) + this.m_motorImpulse + this.m_impulse.z), n.addMul(c, d), r += l * (y.crossVec2Vec2(this.m_rB, d) + this.m_motorImpulse + this.m_impulse.z)
      } else {
        this.m_impulse.setZero(), this.m_motorImpulse = 0
      }
      this.m_bodyA.c_velocity.v = i, this.m_bodyA.c_velocity.w = o, this.m_bodyB.c_velocity.v = n, this.m_bodyB.c_velocity.w = r
    }, e.prototype.solveVelocityConstraints = function (t) {
      var e = this.m_bodyA.c_velocity.v, i = this.m_bodyA.c_velocity.w, o = this.m_bodyB.c_velocity.v,
        s = this.m_bodyB.c_velocity.w, n = this.m_invMassA, r = this.m_invMassB, a = this.m_invIA, m = this.m_invIB,
        c = a + m === 0
      if (this.m_enableMotor && this.m_limitState != wo.equalLimits && 0 == c) {
        var _ = s - i - this.m_motorSpeed, l = -this.m_motorMass * _, u = this.m_motorImpulse,
          p = t.dt * this.m_maxMotorTorque
        this.m_motorImpulse = h(this.m_motorImpulse + l, -p, p), i -= a * (l = this.m_motorImpulse - u), s += m * l
      }
      if (this.m_enableLimit && this.m_limitState != wo.inactiveLimit && 0 == c) {
        var d = y.zero()
        d.addCombine(1, o, 1, y.crossNumVec2(s, this.m_rB)), d.subCombine(1, e, 1, y.crossNumVec2(i, this.m_rA))
        var f = s - i
        _ = new no(d.x, d.y, f), l = no.neg(this.m_mass.solve33(_))
        if (this.m_limitState == wo.equalLimits) {
          this.m_impulse.add(l)
        } else if (this.m_limitState == wo.atLowerLimit) {
          if (this.m_impulse.z + l.z < 0) {
            var v = y.combine(-1, d, this.m_impulse.z, y.neo(this.m_mass.ez.x, this.m_mass.ez.y)),
              x = this.m_mass.solve22(v)
            l.x = x.x, l.y = x.y, l.z = -this.m_impulse.z, this.m_impulse.x += x.x, this.m_impulse.y += x.y, this.m_impulse.z = 0
          } else {
            this.m_impulse.add(l)
          }
        } else if (this.m_limitState == wo.atUpperLimit) {
          if (this.m_impulse.z + l.z > 0) {
            v = y.combine(-1, d, this.m_impulse.z, y.neo(this.m_mass.ez.x, this.m_mass.ez.y)), x = this.m_mass.solve22(v)
            l.x = x.x, l.y = x.y, l.z = -this.m_impulse.z, this.m_impulse.x += x.x, this.m_impulse.y += x.y, this.m_impulse.z = 0
          } else {
            this.m_impulse.add(l)
          }
        }
        var A = y.neo(l.x, l.y)
        e.subMul(n, A), i -= a * (y.crossVec2Vec2(this.m_rA, A) + l.z), o.addMul(r, A), s += m * (y.crossVec2Vec2(this.m_rB, A) + l.z)
      } else {
        (_ = y.zero()).addCombine(1, o, 1, y.crossNumVec2(s, this.m_rB)), _.subCombine(1, e, 1, y.crossNumVec2(i, this.m_rA))
        l = this.m_mass.solve22(y.neg(_))
        this.m_impulse.x += l.x, this.m_impulse.y += l.y, e.subMul(n, l), i -= a * y.crossVec2Vec2(this.m_rA, l), o.addMul(r, l), s += m * y.crossVec2Vec2(this.m_rB, l)
      }
      this.m_bodyA.c_velocity.v = e, this.m_bodyA.c_velocity.w = i, this.m_bodyB.c_velocity.v = o, this.m_bodyB.c_velocity.w = s
    }, e.prototype.solvePositionConstraints = function (t) {
      var e, i = this.m_bodyA.c_position.c, o = this.m_bodyA.c_position.a, s = this.m_bodyB.c_position.c,
        n = this.m_bodyB.c_position.a, r = ut.neo(o), a = ut.neo(n), m = 0, c = this.m_invIA + this.m_invIB == 0
      if (this.m_enableLimit && this.m_limitState != wo.inactiveLimit && 0 == c) {
        var _ = n - o - this.m_referenceAngle, l = 0
        if (this.m_limitState == wo.equalLimits) {
          var u = h(_ - this.m_lowerAngle, -g.maxAngularCorrection, g.maxAngularCorrection)
          l = -this.m_motorMass * u, m = Oo(u)
        } else if (this.m_limitState == wo.atLowerLimit) {
          m = -(u = _ - this.m_lowerAngle), u = h(u + g.angularSlop, -g.maxAngularCorrection, 0), l = -this.m_motorMass * u
        } else if (this.m_limitState == wo.atUpperLimit) {
          m = u = _ - this.m_upperAngle, u = h(u - g.angularSlop, 0, g.maxAngularCorrection), l = -this.m_motorMass * u
        }
        o -= this.m_invIA * l, n += this.m_invIB * l
      }
      r.setAngle(o), a.setAngle(n)
      var p = ut.mulVec2(r, y.sub(this.m_localAnchorA, this.m_localCenterA)),
        d = ut.mulVec2(a, y.sub(this.m_localAnchorB, this.m_localCenterB));
      (u = y.zero()).addCombine(1, s, 1, d), u.subCombine(1, i, 1, p), e = u.length()
      var f = this.m_invMassA, v = this.m_invMassB, x = this.m_invIA, A = this.m_invIB, b = new ii
      b.ex.x = f + v + x * p.y * p.y + A * d.y * d.y, b.ex.y = -x * p.x * p.y - A * d.x * d.y, b.ey.x = b.ex.y, b.ey.y = f + v + x * p.x * p.x + A * d.x * d.x
      var B = y.neg(b.solve(u))
      return i.subMul(f, B), o -= x * y.crossVec2Vec2(p, B), s.addMul(v, B), n += A * y.crossVec2Vec2(d, B), this.m_bodyA.c_position.c.setVec2(i), this.m_bodyA.c_position.a = o, this.m_bodyB.c_position.c.setVec2(s), this.m_bodyB.c_position.a = n, e <= g.linearSlop && m <= g.angularSlop
    }, e.TYPE = 'revolute-joint', e
  }(Et), Ko = Math.abs, Xo = Math.max, Go = Math.min
  !function (t) {
    t[t.inactiveLimit = 0] = 'inactiveLimit', t[t.atLowerLimit = 1] = 'atLowerLimit', t[t.atUpperLimit = 2] = 'atUpperLimit', t[t.equalLimits = 3] = 'equalLimits'
  }(Ro || (Ro = {}))
  var Qo,
    $o = {enableLimit: !1, lowerTranslation: 0, upperTranslation: 0, enableMotor: !1, maxMotorForce: 0, motorSpeed: 0},
    ts = function (t) {
      function e (i, o, n, r, a) {
        var m = this
        return m instanceof e ? (i = s(i, $o), o = (m = t.call(this, i, o, n) || this).m_bodyA, n = m.m_bodyB, m.m_type = e.TYPE, m.m_localAnchorA = y.clone(r ? o.getLocalPoint(r) : i.localAnchorA || y.zero()), m.m_localAnchorB = y.clone(r ? n.getLocalPoint(r) : i.localAnchorB || y.zero()), m.m_localXAxisA = y.clone(a ? o.getLocalVector(a) : i.localAxisA || y.neo(1, 0)), m.m_localXAxisA.normalize(), m.m_localYAxisA = y.crossNumVec2(1, m.m_localXAxisA), m.m_referenceAngle = Number.isFinite(i.referenceAngle) ? i.referenceAngle : n.getAngle() - o.getAngle(), m.m_impulse = new no, m.m_motorMass = 0, m.m_motorImpulse = 0, m.m_lowerTranslation = i.lowerTranslation, m.m_upperTranslation = i.upperTranslation, m.m_maxMotorForce = i.maxMotorForce, m.m_motorSpeed = i.motorSpeed, m.m_enableLimit = i.enableLimit, m.m_enableMotor = i.enableMotor, m.m_limitState = Ro.inactiveLimit, m.m_axis = y.zero(), m.m_perp = y.zero(), m.m_K = new Do, m) : new e(i, o, n, r, a)
      }

      return i(e, t), e.prototype._serialize = function () {
        return {
          type: this.m_type,
          bodyA: this.m_bodyA,
          bodyB: this.m_bodyB,
          collideConnected: this.m_collideConnected,
          lowerTranslation: this.m_lowerTranslation,
          upperTranslation: this.m_upperTranslation,
          maxMotorForce: this.m_maxMotorForce,
          motorSpeed: this.m_motorSpeed,
          enableLimit: this.m_enableLimit,
          enableMotor: this.m_enableMotor,
          localAnchorA: this.m_localAnchorA,
          localAnchorB: this.m_localAnchorB,
          localAxisA: this.m_localXAxisA,
          referenceAngle: this.m_referenceAngle
        }
      }, e._deserialize = function (t, i, s) {
        return (t = o({}, t)).bodyA = s(Ot, t.bodyA, i), t.bodyB = s(Ot, t.bodyB, i), t.localAxisA = y.clone(t.localAxisA), new e(t)
      }, e.prototype._setAnchors = function (t) {
        t.anchorA ? this.m_localAnchorA.setVec2(this.m_bodyA.getLocalPoint(t.anchorA)) : t.localAnchorA && this.m_localAnchorA.setVec2(t.localAnchorA), t.anchorB ? this.m_localAnchorB.setVec2(this.m_bodyB.getLocalPoint(t.anchorB)) : t.localAnchorB && this.m_localAnchorB.setVec2(t.localAnchorB), t.localAxisA && (this.m_localXAxisA.setVec2(t.localAxisA), this.m_localYAxisA.setVec2(y.crossNumVec2(1, t.localAxisA)))
      }, e.prototype.getLocalAnchorA = function () {
        return this.m_localAnchorA
      }, e.prototype.getLocalAnchorB = function () {
        return this.m_localAnchorB
      }, e.prototype.getLocalAxisA = function () {
        return this.m_localXAxisA
      }, e.prototype.getReferenceAngle = function () {
        return this.m_referenceAngle
      }, e.prototype.getJointTranslation = function () {
        var t = this.m_bodyA.getWorldPoint(this.m_localAnchorA), e = this.m_bodyB.getWorldPoint(this.m_localAnchorB),
          i = y.sub(e, t), o = this.m_bodyA.getWorldVector(this.m_localXAxisA)
        return y.dot(i, o)
      }, e.prototype.getJointSpeed = function () {
        var t = this.m_bodyA, e = this.m_bodyB,
          i = ut.mulVec2(t.m_xf.q, y.sub(this.m_localAnchorA, t.m_sweep.localCenter)),
          o = ut.mulVec2(e.m_xf.q, y.sub(this.m_localAnchorB, e.m_sweep.localCenter)), s = y.add(t.m_sweep.c, i),
          n = y.add(e.m_sweep.c, o), r = y.sub(n, s), a = ut.mulVec2(t.m_xf.q, this.m_localXAxisA),
          m = t.m_linearVelocity, h = e.m_linearVelocity, c = t.m_angularVelocity, _ = e.m_angularVelocity
        return y.dot(r, y.crossNumVec2(c, a)) + y.dot(a, y.sub(y.addCrossNumVec2(h, _, o), y.addCrossNumVec2(m, c, i)))
      }, e.prototype.isLimitEnabled = function () {
        return this.m_enableLimit
      }, e.prototype.enableLimit = function (t) {
        t != this.m_enableLimit && (this.m_bodyA.setAwake(!0), this.m_bodyB.setAwake(!0), this.m_enableLimit = t, this.m_impulse.z = 0)
      }, e.prototype.getLowerLimit = function () {
        return this.m_lowerTranslation
      }, e.prototype.getUpperLimit = function () {
        return this.m_upperTranslation
      }, e.prototype.setLimits = function (t, e) {
        t == this.m_lowerTranslation && e == this.m_upperTranslation || (this.m_bodyA.setAwake(!0), this.m_bodyB.setAwake(!0), this.m_lowerTranslation = t, this.m_upperTranslation = e, this.m_impulse.z = 0)
      }, e.prototype.isMotorEnabled = function () {
        return this.m_enableMotor
      }, e.prototype.enableMotor = function (t) {
        t != this.m_enableMotor && (this.m_bodyA.setAwake(!0), this.m_bodyB.setAwake(!0), this.m_enableMotor = t)
      }, e.prototype.setMotorSpeed = function (t) {
        t != this.m_motorSpeed && (this.m_bodyA.setAwake(!0), this.m_bodyB.setAwake(!0), this.m_motorSpeed = t)
      }, e.prototype.setMaxMotorForce = function (t) {
        t != this.m_maxMotorForce && (this.m_bodyA.setAwake(!0), this.m_bodyB.setAwake(!0), this.m_maxMotorForce = t)
      }, e.prototype.getMaxMotorForce = function () {
        return this.m_maxMotorForce
      }, e.prototype.getMotorSpeed = function () {
        return this.m_motorSpeed
      }, e.prototype.getMotorForce = function (t) {
        return t * this.m_motorImpulse
      }, e.prototype.getAnchorA = function () {
        return this.m_bodyA.getWorldPoint(this.m_localAnchorA)
      }, e.prototype.getAnchorB = function () {
        return this.m_bodyB.getWorldPoint(this.m_localAnchorB)
      }, e.prototype.getReactionForce = function (t) {
        return y.combine(this.m_impulse.x, this.m_perp, this.m_motorImpulse + this.m_impulse.z, this.m_axis).mul(t)
      }, e.prototype.getReactionTorque = function (t) {
        return t * this.m_impulse.y
      }, e.prototype.initVelocityConstraints = function (t) {
        this.m_localCenterA = this.m_bodyA.m_sweep.localCenter, this.m_localCenterB = this.m_bodyB.m_sweep.localCenter, this.m_invMassA = this.m_bodyA.m_invMass, this.m_invMassB = this.m_bodyB.m_invMass, this.m_invIA = this.m_bodyA.m_invI, this.m_invIB = this.m_bodyB.m_invI
        var e = this.m_bodyA.c_position.c, i = this.m_bodyA.c_position.a, o = this.m_bodyA.c_velocity.v,
          s = this.m_bodyA.c_velocity.w, n = this.m_bodyB.c_position.c, r = this.m_bodyB.c_position.a,
          a = this.m_bodyB.c_velocity.v, m = this.m_bodyB.c_velocity.w, h = ut.neo(i), c = ut.neo(r),
          _ = ut.mulVec2(h, y.sub(this.m_localAnchorA, this.m_localCenterA)),
          l = ut.mulVec2(c, y.sub(this.m_localAnchorB, this.m_localCenterB)), u = y.zero()
        u.addCombine(1, n, 1, l), u.subCombine(1, e, 1, _)
        var p = this.m_invMassA, d = this.m_invMassB, f = this.m_invIA, v = this.m_invIB
        this.m_axis = ut.mulVec2(h, this.m_localXAxisA), this.m_a1 = y.crossVec2Vec2(y.add(u, _), this.m_axis), this.m_a2 = y.crossVec2Vec2(l, this.m_axis), this.m_motorMass = p + d + f * this.m_a1 * this.m_a1 + v * this.m_a2 * this.m_a2, this.m_motorMass > 0 && (this.m_motorMass = 1 / this.m_motorMass), this.m_perp = ut.mulVec2(h, this.m_localYAxisA), this.m_s1 = y.crossVec2Vec2(y.add(u, _), this.m_perp), this.m_s2 = y.crossVec2Vec2(l, this.m_perp), y.crossVec2Vec2(_, this.m_perp)
        var x = p + d + f * this.m_s1 * this.m_s1 + v * this.m_s2 * this.m_s2, A = f * this.m_s1 + v * this.m_s2,
          b = f * this.m_s1 * this.m_a1 + v * this.m_s2 * this.m_a2, B = f + v
        0 == B && (B = 1)
        var w = f * this.m_a1 + v * this.m_a2, V = p + d + f * this.m_a1 * this.m_a1 + v * this.m_a2 * this.m_a2
        if (this.m_K.ex.set(x, A, b), this.m_K.ey.set(A, B, w), this.m_K.ez.set(b, w, V), this.m_enableLimit) {
          var C = y.dot(this.m_axis, u)
          Ko(this.m_upperTranslation - this.m_lowerTranslation) < 2 * g.linearSlop ? this.m_limitState = Ro.equalLimits : C <= this.m_lowerTranslation ? this.m_limitState != Ro.atLowerLimit && (this.m_limitState = Ro.atLowerLimit, this.m_impulse.z = 0) : C >= this.m_upperTranslation ? this.m_limitState != Ro.atUpperLimit && (this.m_limitState = Ro.atUpperLimit, this.m_impulse.z = 0) : (this.m_limitState = Ro.inactiveLimit, this.m_impulse.z = 0)
        } else {
          this.m_limitState = Ro.inactiveLimit, this.m_impulse.z = 0
        }
        if (0 == this.m_enableMotor && (this.m_motorImpulse = 0), t.warmStarting) {
          this.m_impulse.mul(t.dtRatio), this.m_motorImpulse *= t.dtRatio
          var M = y.combine(this.m_impulse.x, this.m_perp, this.m_motorImpulse + this.m_impulse.z, this.m_axis),
            I = this.m_impulse.x * this.m_s1 + this.m_impulse.y + (this.m_motorImpulse + this.m_impulse.z) * this.m_a1,
            P = this.m_impulse.x * this.m_s2 + this.m_impulse.y + (this.m_motorImpulse + this.m_impulse.z) * this.m_a2
          o.subMul(p, M), s -= f * I, a.addMul(d, M), m += v * P
        } else {
          this.m_impulse.setZero(), this.m_motorImpulse = 0
        }
        this.m_bodyA.c_velocity.v.setVec2(o), this.m_bodyA.c_velocity.w = s, this.m_bodyB.c_velocity.v.setVec2(a), this.m_bodyB.c_velocity.w = m
      }, e.prototype.solveVelocityConstraints = function (t) {
        var e = this.m_bodyA.c_velocity.v, i = this.m_bodyA.c_velocity.w, o = this.m_bodyB.c_velocity.v,
          s = this.m_bodyB.c_velocity.w, n = this.m_invMassA, r = this.m_invMassB, a = this.m_invIA, m = this.m_invIB
        if (this.m_enableMotor && this.m_limitState != Ro.equalLimits) {
          var c = y.dot(this.m_axis, y.sub(o, e)) + this.m_a2 * s - this.m_a1 * i,
            _ = this.m_motorMass * (this.m_motorSpeed - c), l = this.m_motorImpulse, u = t.dt * this.m_maxMotorForce
          this.m_motorImpulse = h(this.m_motorImpulse + _, -u, u), _ = this.m_motorImpulse - l
          var p = y.mulNumVec2(_, this.m_axis), d = _ * this.m_a1, f = _ * this.m_a2
          e.subMul(n, p), i -= a * d, o.addMul(r, p), s += m * f
        }
        var v = y.zero()
        if (v.x += y.dot(this.m_perp, o) + this.m_s2 * s, v.x -= y.dot(this.m_perp, e) + this.m_s1 * i, v.y = s - i, this.m_enableLimit && this.m_limitState != Ro.inactiveLimit) {
          var x = 0
          x += y.dot(this.m_axis, o) + this.m_a2 * s, x -= y.dot(this.m_axis, e) + this.m_a1 * i
          c = new no(v.x, v.y, x)
          var A = no.clone(this.m_impulse), g = this.m_K.solve33(no.neg(c))
          this.m_impulse.add(g), this.m_limitState == Ro.atLowerLimit ? this.m_impulse.z = Xo(this.m_impulse.z, 0) : this.m_limitState == Ro.atUpperLimit && (this.m_impulse.z = Go(this.m_impulse.z, 0))
          var b = y.combine(-1, v, -(this.m_impulse.z - A.z), y.neo(this.m_K.ez.x, this.m_K.ez.y)),
            B = y.add(this.m_K.solve22(b), y.neo(A.x, A.y))
          this.m_impulse.x = B.x, this.m_impulse.y = B.y, g = no.sub(this.m_impulse, A)
          p = y.combine(g.x, this.m_perp, g.z, this.m_axis), d = g.x * this.m_s1 + g.y + g.z * this.m_a1, f = g.x * this.m_s2 + g.y + g.z * this.m_a2
          e.subMul(n, p), i -= a * d, o.addMul(r, p), s += m * f
        } else {
          g = this.m_K.solve22(y.neg(v))
          this.m_impulse.x += g.x, this.m_impulse.y += g.y
          p = y.mulNumVec2(g.x, this.m_perp), d = g.x * this.m_s1 + g.y, f = g.x * this.m_s2 + g.y
          e.subMul(n, p), i -= a * d, o.addMul(r, p), s += m * f
        }
        this.m_bodyA.c_velocity.v = e, this.m_bodyA.c_velocity.w = i, this.m_bodyB.c_velocity.v = o, this.m_bodyB.c_velocity.w = s
      }, e.prototype.solvePositionConstraints = function (t) {
        var e = this.m_bodyA.c_position.c, i = this.m_bodyA.c_position.a, o = this.m_bodyB.c_position.c,
          s = this.m_bodyB.c_position.a, n = ut.neo(i), r = ut.neo(s), a = this.m_invMassA, m = this.m_invMassB,
          c = this.m_invIA, _ = this.m_invIB, l = ut.mulVec2(n, y.sub(this.m_localAnchorA, this.m_localCenterA)),
          u = ut.mulVec2(r, y.sub(this.m_localAnchorB, this.m_localCenterB)), p = y.sub(y.add(o, u), y.add(e, l)),
          d = ut.mulVec2(n, this.m_localXAxisA), f = y.crossVec2Vec2(y.add(p, l), d), v = y.crossVec2Vec2(u, d),
          x = ut.mulVec2(n, this.m_localYAxisA), A = y.crossVec2Vec2(y.add(p, l), x), b = y.crossVec2Vec2(u, x),
          B = new no, w = y.zero()
        w.x = y.dot(x, p), w.y = s - i - this.m_referenceAngle
        var V = Ko(w.x), C = Ko(w.y), M = g.linearSlop, I = g.maxLinearCorrection, P = !1, S = 0
        if (this.m_enableLimit) {
          var T = y.dot(d, p)
          Ko(this.m_upperTranslation - this.m_lowerTranslation) < 2 * M ? (S = h(T, -I, I), V = Xo(V, Ko(T)), P = !0) : T <= this.m_lowerTranslation ? (S = h(T - this.m_lowerTranslation + M, -I, 0), V = Math.max(V, this.m_lowerTranslation - T), P = !0) : T >= this.m_upperTranslation && (S = h(T - this.m_upperTranslation - M, 0, I), V = Math.max(V, T - this.m_upperTranslation), P = !0)
        }
        if (P) {
          var z = a + m + c * A * A + _ * b * b, F = c * A + _ * b, L = c * A * f + _ * b * v
          0 == (j = c + _) && (j = 1)
          var q = c * f + _ * v, k = a + m + c * f * f + _ * v * v;
          (D = new Do).ex.set(z, F, L), D.ey.set(F, j, q), D.ez.set(L, q, k)
          var N = new no
          N.x = w.x, N.y = w.y, N.z = S, B = D.solve33(no.neg(N))
        } else {
          var j, D
          z = a + m + c * A * A + _ * b * b, F = c * A + _ * b
          0 == (j = c + _) && (j = 1), (D = new ii).ex.setNum(z, F), D.ey.setNum(F, j)
          var O = D.solve(y.neg(w))
          B.x = O.x, B.y = O.y, B.z = 0
        }
        var R = y.combine(B.x, x, B.z, d), E = B.x * A + B.y + B.z * f, J = B.x * b + B.y + B.z * v
        return e.subMul(a, R), i -= c * E, o.addMul(m, R), s += _ * J, this.m_bodyA.c_position.c = e, this.m_bodyA.c_position.a = i, this.m_bodyB.c_position.c = o, this.m_bodyB.c_position.a = s, V <= g.linearSlop && C <= g.angularSlop
      }, e.TYPE = 'prismatic-joint', e
    }(Et), es = {ratio: 1}, is = function (t) {
      function e (i, o, n, r, a, m) {
        var h, c, _ = this
        if (!(_ instanceof e)) return new e(i, o, n, r, a, m)
        i = s(i, es), o = (_ = t.call(this, i, o, n) || this).m_bodyA, n = _.m_bodyB, _.m_type = e.TYPE, _.m_joint1 = r || i.joint1, _.m_joint2 = a || i.joint2, _.m_ratio = Number.isFinite(m) ? m : i.ratio, _.m_type1 = _.m_joint1.getType(), _.m_type2 = _.m_joint2.getType(), _.m_bodyC = _.m_joint1.getBodyA(), _.m_bodyA = _.m_joint1.getBodyB()
        var l = _.m_bodyA.m_xf, u = _.m_bodyA.m_sweep.a, p = _.m_bodyC.m_xf, d = _.m_bodyC.m_sweep.a
        if (_.m_type1 === Zo.TYPE) {
          var f = _.m_joint1
          _.m_localAnchorC = f.m_localAnchorA, _.m_localAnchorA = f.m_localAnchorB, _.m_referenceAngleA = f.m_referenceAngle, _.m_localAxisC = y.zero(), h = u - d - _.m_referenceAngleA
        } else {
          var v = _.m_joint1
          _.m_localAnchorC = v.m_localAnchorA, _.m_localAnchorA = v.m_localAnchorB, _.m_referenceAngleA = v.m_referenceAngle, _.m_localAxisC = v.m_localXAxisA
          var x = _.m_localAnchorC, A = ut.mulTVec2(p.q, y.add(ut.mulVec2(l.q, _.m_localAnchorA), y.sub(l.p, p.p)))
          h = y.dot(A, _.m_localAxisC) - y.dot(x, _.m_localAxisC)
        }
        _.m_bodyD = _.m_joint2.getBodyA(), _.m_bodyB = _.m_joint2.getBodyB()
        var g = _.m_bodyB.m_xf, b = _.m_bodyB.m_sweep.a, B = _.m_bodyD.m_xf, w = _.m_bodyD.m_sweep.a
        if (_.m_type2 === Zo.TYPE) {
          f = _.m_joint2
          _.m_localAnchorD = f.m_localAnchorA, _.m_localAnchorB = f.m_localAnchorB, _.m_referenceAngleB = f.m_referenceAngle, _.m_localAxisD = y.zero(), c = b - w - _.m_referenceAngleB
        } else {
          v = _.m_joint2
          _.m_localAnchorD = v.m_localAnchorA, _.m_localAnchorB = v.m_localAnchorB, _.m_referenceAngleB = v.m_referenceAngle, _.m_localAxisD = v.m_localXAxisA
          var V = _.m_localAnchorD, C = ut.mulTVec2(B.q, y.add(ut.mulVec2(g.q, _.m_localAnchorB), y.sub(g.p, B.p)))
          c = y.dot(C, _.m_localAxisD) - y.dot(V, _.m_localAxisD)
        }
        return _.m_constant = h + _.m_ratio * c, _.m_impulse = 0, _
      }

      return i(e, t), e.prototype._serialize = function () {
        return {
          type: this.m_type,
          bodyA: this.m_bodyA,
          bodyB: this.m_bodyB,
          collideConnected: this.m_collideConnected,
          joint1: this.m_joint1,
          joint2: this.m_joint2,
          ratio: this.m_ratio
        }
      }, e._deserialize = function (t, i, s) {
        return (t = o({}, t)).bodyA = s(Ot, t.bodyA, i), t.bodyB = s(Ot, t.bodyB, i), t.joint1 = s(Et, t.joint1, i), t.joint2 = s(Et, t.joint2, i), new e(t)
      }, e.prototype.getJoint1 = function () {
        return this.m_joint1
      }, e.prototype.getJoint2 = function () {
        return this.m_joint2
      }, e.prototype.setRatio = function (t) {
        this.m_ratio = t
      }, e.prototype.getRatio = function () {
        return this.m_ratio
      }, e.prototype.getAnchorA = function () {
        return this.m_bodyA.getWorldPoint(this.m_localAnchorA)
      }, e.prototype.getAnchorB = function () {
        return this.m_bodyB.getWorldPoint(this.m_localAnchorB)
      }, e.prototype.getReactionForce = function (t) {
        return y.mulNumVec2(this.m_impulse, this.m_JvAC).mul(t)
      }, e.prototype.getReactionTorque = function (t) {
        return t * (this.m_impulse * this.m_JwA)
      }, e.prototype.initVelocityConstraints = function (t) {
        this.m_lcA = this.m_bodyA.m_sweep.localCenter, this.m_lcB = this.m_bodyB.m_sweep.localCenter, this.m_lcC = this.m_bodyC.m_sweep.localCenter, this.m_lcD = this.m_bodyD.m_sweep.localCenter, this.m_mA = this.m_bodyA.m_invMass, this.m_mB = this.m_bodyB.m_invMass, this.m_mC = this.m_bodyC.m_invMass, this.m_mD = this.m_bodyD.m_invMass, this.m_iA = this.m_bodyA.m_invI, this.m_iB = this.m_bodyB.m_invI, this.m_iC = this.m_bodyC.m_invI, this.m_iD = this.m_bodyD.m_invI
        var e = this.m_bodyA.c_position.a, i = this.m_bodyA.c_velocity.v, o = this.m_bodyA.c_velocity.w,
          s = this.m_bodyB.c_position.a, n = this.m_bodyB.c_velocity.v, r = this.m_bodyB.c_velocity.w,
          a = this.m_bodyC.c_position.a, m = this.m_bodyC.c_velocity.v, h = this.m_bodyC.c_velocity.w,
          c = this.m_bodyD.c_position.a, _ = this.m_bodyD.c_velocity.v, l = this.m_bodyD.c_velocity.w, u = ut.neo(e),
          p = ut.neo(s), d = ut.neo(a), f = ut.neo(c)
        if (this.m_mass = 0, this.m_type1 == Zo.TYPE) {
          this.m_JvAC = y.zero(), this.m_JwA = 1, this.m_JwC = 1, this.m_mass += this.m_iA + this.m_iC
        } else {
          var v = ut.mulVec2(d, this.m_localAxisC), x = ut.mulSub(d, this.m_localAnchorC, this.m_lcC),
            A = ut.mulSub(u, this.m_localAnchorA, this.m_lcA)
          this.m_JvAC = v, this.m_JwC = y.crossVec2Vec2(x, v), this.m_JwA = y.crossVec2Vec2(A, v), this.m_mass += this.m_mC + this.m_mA + this.m_iC * this.m_JwC * this.m_JwC + this.m_iA * this.m_JwA * this.m_JwA
        }
        if (this.m_type2 == Zo.TYPE) {
          this.m_JvBD = y.zero(), this.m_JwB = this.m_ratio, this.m_JwD = this.m_ratio, this.m_mass += this.m_ratio * this.m_ratio * (this.m_iB + this.m_iD)
        } else {
          v = ut.mulVec2(f, this.m_localAxisD)
          var g = ut.mulSub(f, this.m_localAnchorD, this.m_lcD), b = ut.mulSub(p, this.m_localAnchorB, this.m_lcB)
          this.m_JvBD = y.mulNumVec2(this.m_ratio, v), this.m_JwD = this.m_ratio * y.crossVec2Vec2(g, v), this.m_JwB = this.m_ratio * y.crossVec2Vec2(b, v), this.m_mass += this.m_ratio * this.m_ratio * (this.m_mD + this.m_mB) + this.m_iD * this.m_JwD * this.m_JwD + this.m_iB * this.m_JwB * this.m_JwB
        }
        this.m_mass = this.m_mass > 0 ? 1 / this.m_mass : 0, t.warmStarting ? (i.addMul(this.m_mA * this.m_impulse, this.m_JvAC), o += this.m_iA * this.m_impulse * this.m_JwA, n.addMul(this.m_mB * this.m_impulse, this.m_JvBD), r += this.m_iB * this.m_impulse * this.m_JwB, m.subMul(this.m_mC * this.m_impulse, this.m_JvAC), h -= this.m_iC * this.m_impulse * this.m_JwC, _.subMul(this.m_mD * this.m_impulse, this.m_JvBD), l -= this.m_iD * this.m_impulse * this.m_JwD) : this.m_impulse = 0, this.m_bodyA.c_velocity.v.setVec2(i), this.m_bodyA.c_velocity.w = o, this.m_bodyB.c_velocity.v.setVec2(n), this.m_bodyB.c_velocity.w = r, this.m_bodyC.c_velocity.v.setVec2(m), this.m_bodyC.c_velocity.w = h, this.m_bodyD.c_velocity.v.setVec2(_), this.m_bodyD.c_velocity.w = l
      }, e.prototype.solveVelocityConstraints = function (t) {
        var e = this.m_bodyA.c_velocity.v, i = this.m_bodyA.c_velocity.w, o = this.m_bodyB.c_velocity.v,
          s = this.m_bodyB.c_velocity.w, n = this.m_bodyC.c_velocity.v, r = this.m_bodyC.c_velocity.w,
          a = this.m_bodyD.c_velocity.v, m = this.m_bodyD.c_velocity.w,
          h = y.dot(this.m_JvAC, e) - y.dot(this.m_JvAC, n) + y.dot(this.m_JvBD, o) - y.dot(this.m_JvBD, a)
        h += this.m_JwA * i - this.m_JwC * r + (this.m_JwB * s - this.m_JwD * m)
        var c = -this.m_mass * h
        this.m_impulse += c, e.addMul(this.m_mA * c, this.m_JvAC), i += this.m_iA * c * this.m_JwA, o.addMul(this.m_mB * c, this.m_JvBD), s += this.m_iB * c * this.m_JwB, n.subMul(this.m_mC * c, this.m_JvAC), r -= this.m_iC * c * this.m_JwC, a.subMul(this.m_mD * c, this.m_JvBD), m -= this.m_iD * c * this.m_JwD, this.m_bodyA.c_velocity.v.setVec2(e), this.m_bodyA.c_velocity.w = i, this.m_bodyB.c_velocity.v.setVec2(o), this.m_bodyB.c_velocity.w = s, this.m_bodyC.c_velocity.v.setVec2(n), this.m_bodyC.c_velocity.w = r, this.m_bodyD.c_velocity.v.setVec2(a), this.m_bodyD.c_velocity.w = m
      }, e.prototype.solvePositionConstraints = function (t) {
        var e, i, o, s, n, r, a, m, h = this.m_bodyA.c_position.c, c = this.m_bodyA.c_position.a,
          _ = this.m_bodyB.c_position.c, l = this.m_bodyB.c_position.a, u = this.m_bodyC.c_position.c,
          p = this.m_bodyC.c_position.a, d = this.m_bodyD.c_position.c, f = this.m_bodyD.c_position.a, v = ut.neo(c),
          x = ut.neo(l), A = ut.neo(p), b = ut.neo(f), B = 0
        if (this.m_type1 == Zo.TYPE) {
          o = y.zero(), n = 1, a = 1, B += this.m_iA + this.m_iC, e = c - p - this.m_referenceAngleA
        } else {
          var w = ut.mulVec2(A, this.m_localAxisC), V = ut.mulSub(A, this.m_localAnchorC, this.m_lcC),
            C = ut.mulSub(v, this.m_localAnchorA, this.m_lcA)
          o = w, a = y.crossVec2Vec2(V, w), n = y.crossVec2Vec2(C, w), B += this.m_mC + this.m_mA + this.m_iC * a * a + this.m_iA * n * n
          var M = y.sub(this.m_localAnchorC, this.m_lcC), I = ut.mulTVec2(A, y.add(C, y.sub(h, u)))
          e = y.dot(y.sub(I, M), this.m_localAxisC)
        }
        if (this.m_type2 == Zo.TYPE) {
          s = y.zero(), r = this.m_ratio, m = this.m_ratio, B += this.m_ratio * this.m_ratio * (this.m_iB + this.m_iD), i = l - f - this.m_referenceAngleB
        } else {
          w = ut.mulVec2(b, this.m_localAxisD)
          var P = ut.mulSub(b, this.m_localAnchorD, this.m_lcD), S = ut.mulSub(x, this.m_localAnchorB, this.m_lcB)
          s = y.mulNumVec2(this.m_ratio, w), m = this.m_ratio * y.crossVec2Vec2(P, w), r = this.m_ratio * y.crossVec2Vec2(S, w), B += this.m_ratio * this.m_ratio * (this.m_mD + this.m_mB) + this.m_iD * m * m + this.m_iB * r * r
          var T = y.sub(this.m_localAnchorD, this.m_lcD), z = ut.mulTVec2(b, y.add(S, y.sub(_, d)))
          i = y.dot(z, this.m_localAxisD) - y.dot(T, this.m_localAxisD)
        }
        var F = e + this.m_ratio * i - this.m_constant, L = 0
        return B > 0 && (L = -F / B), h.addMul(this.m_mA * L, o), c += this.m_iA * L * n, _.addMul(this.m_mB * L, s), l += this.m_iB * L * r, u.subMul(this.m_mC * L, o), p -= this.m_iC * L * a, d.subMul(this.m_mD * L, s), f -= this.m_iD * L * m, this.m_bodyA.c_position.c.setVec2(h), this.m_bodyA.c_position.a = c, this.m_bodyB.c_position.c.setVec2(_), this.m_bodyB.c_position.a = l, this.m_bodyC.c_position.c.setVec2(u), this.m_bodyC.c_position.a = p, this.m_bodyD.c_position.c.setVec2(d), this.m_bodyD.c_position.a = f, 0 < g.linearSlop
      }, e.TYPE = 'gear-joint', e
    }(Et), os = {maxForce: 1, maxTorque: 1, correctionFactor: .3}, ss = function (t) {
      function e (i, o, n) {
        var r = this
        return r instanceof e ? (i = s(i, os), o = (r = t.call(this, i, o, n) || this).m_bodyA, n = r.m_bodyB, r.m_type = e.TYPE, r.m_linearOffset = Number.isFinite(i.linearOffset) ? y.clone(i.linearOffset) : o.getLocalPoint(n.getPosition()), r.m_angularOffset = Number.isFinite(i.angularOffset) ? i.angularOffset : n.getAngle() - o.getAngle(), r.m_linearImpulse = y.zero(), r.m_angularImpulse = 0, r.m_maxForce = i.maxForce, r.m_maxTorque = i.maxTorque, r.m_correctionFactor = i.correctionFactor, r) : new e(i, o, n)
      }

      return i(e, t), e.prototype._serialize = function () {
        return {
          type: this.m_type,
          bodyA: this.m_bodyA,
          bodyB: this.m_bodyB,
          collideConnected: this.m_collideConnected,
          maxForce: this.m_maxForce,
          maxTorque: this.m_maxTorque,
          correctionFactor: this.m_correctionFactor,
          linearOffset: this.m_linearOffset,
          angularOffset: this.m_angularOffset
        }
      }, e._deserialize = function (t, i, s) {
        return (t = o({}, t)).bodyA = s(Ot, t.bodyA, i), t.bodyB = s(Ot, t.bodyB, i), new e(t)
      }, e.prototype._setAnchors = function (t) {
      }, e.prototype.setMaxForce = function (t) {
        this.m_maxForce = t
      }, e.prototype.getMaxForce = function () {
        return this.m_maxForce
      }, e.prototype.setMaxTorque = function (t) {
        this.m_maxTorque = t
      }, e.prototype.getMaxTorque = function () {
        return this.m_maxTorque
      }, e.prototype.setCorrectionFactor = function (t) {
        this.m_correctionFactor = t
      }, e.prototype.getCorrectionFactor = function () {
        return this.m_correctionFactor
      }, e.prototype.setLinearOffset = function (t) {
        t.x == this.m_linearOffset.x && t.y == this.m_linearOffset.y || (this.m_bodyA.setAwake(!0), this.m_bodyB.setAwake(!0), this.m_linearOffset.set(t))
      }, e.prototype.getLinearOffset = function () {
        return this.m_linearOffset
      }, e.prototype.setAngularOffset = function (t) {
        t != this.m_angularOffset && (this.m_bodyA.setAwake(!0), this.m_bodyB.setAwake(!0), this.m_angularOffset = t)
      }, e.prototype.getAngularOffset = function () {
        return this.m_angularOffset
      }, e.prototype.getAnchorA = function () {
        return this.m_bodyA.getPosition()
      }, e.prototype.getAnchorB = function () {
        return this.m_bodyB.getPosition()
      }, e.prototype.getReactionForce = function (t) {
        return y.mulNumVec2(t, this.m_linearImpulse)
      }, e.prototype.getReactionTorque = function (t) {
        return t * this.m_angularImpulse
      }, e.prototype.initVelocityConstraints = function (t) {
        this.m_localCenterA = this.m_bodyA.m_sweep.localCenter, this.m_localCenterB = this.m_bodyB.m_sweep.localCenter, this.m_invMassA = this.m_bodyA.m_invMass, this.m_invMassB = this.m_bodyB.m_invMass, this.m_invIA = this.m_bodyA.m_invI, this.m_invIB = this.m_bodyB.m_invI
        var e = this.m_bodyA.c_position.c, i = this.m_bodyA.c_position.a, o = this.m_bodyA.c_velocity.v,
          s = this.m_bodyA.c_velocity.w, n = this.m_bodyB.c_position.c, r = this.m_bodyB.c_position.a,
          a = this.m_bodyB.c_velocity.v, m = this.m_bodyB.c_velocity.w, h = ut.neo(i), c = ut.neo(r)
        this.m_rA = ut.mulVec2(h, y.sub(this.m_linearOffset, this.m_localCenterA)), this.m_rB = ut.mulVec2(c, y.neg(this.m_localCenterB))
        var _ = this.m_invMassA, l = this.m_invMassB, u = this.m_invIA, p = this.m_invIB, d = new ii
        if (d.ex.x = _ + l + u * this.m_rA.y * this.m_rA.y + p * this.m_rB.y * this.m_rB.y, d.ex.y = -u * this.m_rA.x * this.m_rA.y - p * this.m_rB.x * this.m_rB.y, d.ey.x = d.ex.y, d.ey.y = _ + l + u * this.m_rA.x * this.m_rA.x + p * this.m_rB.x * this.m_rB.x, this.m_linearMass = d.getInverse(), this.m_angularMass = u + p, this.m_angularMass > 0 && (this.m_angularMass = 1 / this.m_angularMass), this.m_linearError = y.zero(), this.m_linearError.addCombine(1, n, 1, this.m_rB), this.m_linearError.subCombine(1, e, 1, this.m_rA), this.m_angularError = r - i - this.m_angularOffset, t.warmStarting) {
          this.m_linearImpulse.mul(t.dtRatio), this.m_angularImpulse *= t.dtRatio
          var f = y.neo(this.m_linearImpulse.x, this.m_linearImpulse.y)
          o.subMul(_, f), s -= u * (y.crossVec2Vec2(this.m_rA, f) + this.m_angularImpulse), a.addMul(l, f), m += p * (y.crossVec2Vec2(this.m_rB, f) + this.m_angularImpulse)
        } else {
          this.m_linearImpulse.setZero(), this.m_angularImpulse = 0
        }
        this.m_bodyA.c_velocity.v = o, this.m_bodyA.c_velocity.w = s, this.m_bodyB.c_velocity.v = a, this.m_bodyB.c_velocity.w = m
      }, e.prototype.solveVelocityConstraints = function (t) {
        var e = this.m_bodyA.c_velocity.v, i = this.m_bodyA.c_velocity.w, o = this.m_bodyB.c_velocity.v,
          s = this.m_bodyB.c_velocity.w, n = this.m_invMassA, r = this.m_invMassB, a = this.m_invIA, m = this.m_invIB,
          c = t.dt, _ = t.inv_dt, l = s - i + _ * this.m_correctionFactor * this.m_angularError,
          u = -this.m_angularMass * l, p = this.m_angularImpulse, d = c * this.m_maxTorque
        this.m_angularImpulse = h(this.m_angularImpulse + u, -d, d), i -= a * (u = this.m_angularImpulse - p), s += m * u, (l = y.zero()).addCombine(1, o, 1, y.crossNumVec2(s, this.m_rB)), l.subCombine(1, e, 1, y.crossNumVec2(i, this.m_rA)), l.addMul(_ * this.m_correctionFactor, this.m_linearError)
        u = y.neg(ii.mulVec2(this.m_linearMass, l)), p = y.clone(this.m_linearImpulse)
        this.m_linearImpulse.add(u)
        d = c * this.m_maxForce
        this.m_linearImpulse.clamp(d), u = y.sub(this.m_linearImpulse, p), e.subMul(n, u), i -= a * y.crossVec2Vec2(this.m_rA, u), o.addMul(r, u), s += m * y.crossVec2Vec2(this.m_rB, u), this.m_bodyA.c_velocity.v = e, this.m_bodyA.c_velocity.w = i, this.m_bodyB.c_velocity.v = o, this.m_bodyB.c_velocity.w = s
      }, e.prototype.solvePositionConstraints = function (t) {
        return !0
      }, e.TYPE = 'motor-joint', e
    }(Et), ns = Math.PI, rs = {maxForce: 0, frequencyHz: 5, dampingRatio: .7}, as = function (t) {
      function e (i, o, n, r) {
        var a = this
        return a instanceof e ? (i = s(i, rs), o = (a = t.call(this, i, o, n) || this).m_bodyA, n = a.m_bodyB, a.m_type = e.TYPE, y.isValid(r) ? a.m_targetA = y.clone(r) : y.isValid(i.target) ? a.m_targetA = y.clone(i.target) : a.m_targetA = y.zero(), a.m_localAnchorB = vt.mulTVec2(n.getTransform(), a.m_targetA), a.m_maxForce = i.maxForce, a.m_impulse = y.zero(), a.m_frequencyHz = i.frequencyHz, a.m_dampingRatio = i.dampingRatio, a.m_beta = 0, a.m_gamma = 0, a.m_rB = y.zero(), a.m_localCenterB = y.zero(), a.m_invMassB = 0, a.m_invIB = 0, a.m_mass = new ii, a.m_C = y.zero(), a) : new e(i, o, n, r)
      }

      return i(e, t), e.prototype._serialize = function () {
        return {
          type: this.m_type,
          bodyA: this.m_bodyA,
          bodyB: this.m_bodyB,
          collideConnected: this.m_collideConnected,
          target: this.m_targetA,
          maxForce: this.m_maxForce,
          frequencyHz: this.m_frequencyHz,
          dampingRatio: this.m_dampingRatio,
          _localAnchorB: this.m_localAnchorB
        }
      }, e._deserialize = function (t, i, s) {
        (t = o({}, t)).bodyA = s(Ot, t.bodyA, i), t.bodyB = s(Ot, t.bodyB, i), t.target = y.clone(t.target)
        var n = new e(t)
        return t._localAnchorB && (n.m_localAnchorB = t._localAnchorB), n
      }, e.prototype.setTarget = function (t) {
        y.areEqual(t, this.m_targetA) || (this.m_bodyB.setAwake(!0), this.m_targetA.set(t))
      }, e.prototype.getTarget = function () {
        return this.m_targetA
      }, e.prototype.setMaxForce = function (t) {
        this.m_maxForce = t
      }, e.prototype.getMaxForce = function () {
        return this.m_maxForce
      }, e.prototype.setFrequency = function (t) {
        this.m_frequencyHz = t
      }, e.prototype.getFrequency = function () {
        return this.m_frequencyHz
      }, e.prototype.setDampingRatio = function (t) {
        this.m_dampingRatio = t
      }, e.prototype.getDampingRatio = function () {
        return this.m_dampingRatio
      }, e.prototype.getAnchorA = function () {
        return y.clone(this.m_targetA)
      }, e.prototype.getAnchorB = function () {
        return this.m_bodyB.getWorldPoint(this.m_localAnchorB)
      }, e.prototype.getReactionForce = function (t) {
        return y.mulNumVec2(t, this.m_impulse)
      }, e.prototype.getReactionTorque = function (t) {
        return 0 * t
      }, e.prototype.shiftOrigin = function (t) {
        this.m_targetA.sub(t)
      }, e.prototype.initVelocityConstraints = function (t) {
        this.m_localCenterB = this.m_bodyB.m_sweep.localCenter, this.m_invMassB = this.m_bodyB.m_invMass, this.m_invIB = this.m_bodyB.m_invI
        var e = this.m_bodyB.c_position, i = this.m_bodyB.c_velocity, o = e.c, s = e.a, n = i.v, r = i.w, a = ut.neo(s),
          m = this.m_bodyB.getMass(), h = 2 * ns * this.m_frequencyHz, c = 2 * m * this.m_dampingRatio * h,
          _ = m * (h * h), l = t.dt
        this.m_gamma = l * (c + l * _), 0 != this.m_gamma && (this.m_gamma = 1 / this.m_gamma), this.m_beta = l * _ * this.m_gamma, this.m_rB = ut.mulVec2(a, y.sub(this.m_localAnchorB, this.m_localCenterB))
        var u = new ii
        u.ex.x = this.m_invMassB + this.m_invIB * this.m_rB.y * this.m_rB.y + this.m_gamma, u.ex.y = -this.m_invIB * this.m_rB.x * this.m_rB.y, u.ey.x = u.ex.y, u.ey.y = this.m_invMassB + this.m_invIB * this.m_rB.x * this.m_rB.x + this.m_gamma, this.m_mass = u.getInverse(), this.m_C.setVec2(o), this.m_C.addCombine(1, this.m_rB, -1, this.m_targetA), this.m_C.mul(this.m_beta), r *= .98, t.warmStarting ? (this.m_impulse.mul(t.dtRatio), n.addMul(this.m_invMassB, this.m_impulse), r += this.m_invIB * y.crossVec2Vec2(this.m_rB, this.m_impulse)) : this.m_impulse.setZero(), i.v.setVec2(n), i.w = r
      }, e.prototype.solveVelocityConstraints = function (t) {
        var e = this.m_bodyB.c_velocity, i = y.clone(e.v), o = e.w, s = y.crossNumVec2(o, this.m_rB)
        s.add(i), s.addCombine(1, this.m_C, this.m_gamma, this.m_impulse), s.neg()
        var n = ii.mulVec2(this.m_mass, s), r = y.clone(this.m_impulse)
        this.m_impulse.add(n)
        var a = t.dt * this.m_maxForce
        this.m_impulse.clamp(a), n = y.sub(this.m_impulse, r), i.addMul(this.m_invMassB, n), o += this.m_invIB * y.crossVec2Vec2(this.m_rB, n), e.v.setVec2(i), e.w = o
      }, e.prototype.solvePositionConstraints = function (t) {
        return !0
      }, e.TYPE = 'mouse-joint', e
    }(Et), ms = Math.abs, hs = {collideConnected: !0}, cs = function (t) {
      function e (i, o, n, r, a, m, h, c) {
        var _ = this
        return _ instanceof e ? (i = s(i, hs), o = (_ = t.call(this, i, o, n) || this).m_bodyA, n = _.m_bodyB, _.m_type = e.TYPE, _.m_groundAnchorA = y.clone(r || (i.groundAnchorA || y.neo(-1, 1))), _.m_groundAnchorB = y.clone(a || (i.groundAnchorB || y.neo(1, 1))), _.m_localAnchorA = y.clone(m ? o.getLocalPoint(m) : i.localAnchorA || y.neo(-1, 0)), _.m_localAnchorB = y.clone(h ? n.getLocalPoint(h) : i.localAnchorB || y.neo(1, 0)), _.m_lengthA = Number.isFinite(i.lengthA) ? i.lengthA : y.distance(m, r), _.m_lengthB = Number.isFinite(i.lengthB) ? i.lengthB : y.distance(h, a), _.m_ratio = Number.isFinite(c) ? c : i.ratio, _.m_constant = _.m_lengthA + _.m_ratio * _.m_lengthB, _.m_impulse = 0, _) : new e(i, o, n, r, a, m, h, c)
      }

      return i(e, t), e.prototype._serialize = function () {
        return {
          type: this.m_type,
          bodyA: this.m_bodyA,
          bodyB: this.m_bodyB,
          collideConnected: this.m_collideConnected,
          groundAnchorA: this.m_groundAnchorA,
          groundAnchorB: this.m_groundAnchorB,
          localAnchorA: this.m_localAnchorA,
          localAnchorB: this.m_localAnchorB,
          lengthA: this.m_lengthA,
          lengthB: this.m_lengthB,
          ratio: this.m_ratio
        }
      }, e._deserialize = function (t, i, s) {
        return (t = o({}, t)).bodyA = s(Ot, t.bodyA, i), t.bodyB = s(Ot, t.bodyB, i), new e(t)
      }, e.prototype.getGroundAnchorA = function () {
        return this.m_groundAnchorA
      }, e.prototype.getGroundAnchorB = function () {
        return this.m_groundAnchorB
      }, e.prototype.getLengthA = function () {
        return this.m_lengthA
      }, e.prototype.getLengthB = function () {
        return this.m_lengthB
      }, e.prototype.getRatio = function () {
        return this.m_ratio
      }, e.prototype.getCurrentLengthA = function () {
        var t = this.m_bodyA.getWorldPoint(this.m_localAnchorA), e = this.m_groundAnchorA
        return y.distance(t, e)
      }, e.prototype.getCurrentLengthB = function () {
        var t = this.m_bodyB.getWorldPoint(this.m_localAnchorB), e = this.m_groundAnchorB
        return y.distance(t, e)
      }, e.prototype.shiftOrigin = function (t) {
        this.m_groundAnchorA.sub(t), this.m_groundAnchorB.sub(t)
      }, e.prototype.getAnchorA = function () {
        return this.m_bodyA.getWorldPoint(this.m_localAnchorA)
      }, e.prototype.getAnchorB = function () {
        return this.m_bodyB.getWorldPoint(this.m_localAnchorB)
      }, e.prototype.getReactionForce = function (t) {
        return y.mulNumVec2(this.m_impulse, this.m_uB).mul(t)
      }, e.prototype.getReactionTorque = function (t) {
        return 0
      }, e.prototype.initVelocityConstraints = function (t) {
        this.m_localCenterA = this.m_bodyA.m_sweep.localCenter, this.m_localCenterB = this.m_bodyB.m_sweep.localCenter, this.m_invMassA = this.m_bodyA.m_invMass, this.m_invMassB = this.m_bodyB.m_invMass, this.m_invIA = this.m_bodyA.m_invI, this.m_invIB = this.m_bodyB.m_invI
        var e = this.m_bodyA.c_position.c, i = this.m_bodyA.c_position.a, o = this.m_bodyA.c_velocity.v,
          s = this.m_bodyA.c_velocity.w, n = this.m_bodyB.c_position.c, r = this.m_bodyB.c_position.a,
          a = this.m_bodyB.c_velocity.v, m = this.m_bodyB.c_velocity.w, h = ut.neo(i), c = ut.neo(r)
        this.m_rA = ut.mulVec2(h, y.sub(this.m_localAnchorA, this.m_localCenterA)), this.m_rB = ut.mulVec2(c, y.sub(this.m_localAnchorB, this.m_localCenterB)), this.m_uA = y.sub(y.add(e, this.m_rA), this.m_groundAnchorA), this.m_uB = y.sub(y.add(n, this.m_rB), this.m_groundAnchorB)
        var _ = this.m_uA.length(), l = this.m_uB.length()
        _ > 10 * g.linearSlop ? this.m_uA.mul(1 / _) : this.m_uA.setZero(), l > 10 * g.linearSlop ? this.m_uB.mul(1 / l) : this.m_uB.setZero()
        var u = y.crossVec2Vec2(this.m_rA, this.m_uA), p = y.crossVec2Vec2(this.m_rB, this.m_uB),
          d = this.m_invMassA + this.m_invIA * u * u, f = this.m_invMassB + this.m_invIB * p * p
        if (this.m_mass = d + this.m_ratio * this.m_ratio * f, this.m_mass > 0 && (this.m_mass = 1 / this.m_mass), t.warmStarting) {
          this.m_impulse *= t.dtRatio
          var v = y.mulNumVec2(-this.m_impulse, this.m_uA), x = y.mulNumVec2(-this.m_ratio * this.m_impulse, this.m_uB)
          o.addMul(this.m_invMassA, v), s += this.m_invIA * y.crossVec2Vec2(this.m_rA, v), a.addMul(this.m_invMassB, x), m += this.m_invIB * y.crossVec2Vec2(this.m_rB, x)
        } else {
          this.m_impulse = 0
        }
        this.m_bodyA.c_velocity.v = o, this.m_bodyA.c_velocity.w = s, this.m_bodyB.c_velocity.v = a, this.m_bodyB.c_velocity.w = m
      }, e.prototype.solveVelocityConstraints = function (t) {
        var e = this.m_bodyA.c_velocity.v, i = this.m_bodyA.c_velocity.w, o = this.m_bodyB.c_velocity.v,
          s = this.m_bodyB.c_velocity.w, n = y.add(e, y.crossNumVec2(i, this.m_rA)),
          r = y.add(o, y.crossNumVec2(s, this.m_rB)), a = -y.dot(this.m_uA, n) - this.m_ratio * y.dot(this.m_uB, r),
          m = -this.m_mass * a
        this.m_impulse += m
        var h = y.mulNumVec2(-m, this.m_uA), c = y.mulNumVec2(-this.m_ratio * m, this.m_uB)
        e.addMul(this.m_invMassA, h), i += this.m_invIA * y.crossVec2Vec2(this.m_rA, h), o.addMul(this.m_invMassB, c), s += this.m_invIB * y.crossVec2Vec2(this.m_rB, c), this.m_bodyA.c_velocity.v = e, this.m_bodyA.c_velocity.w = i, this.m_bodyB.c_velocity.v = o, this.m_bodyB.c_velocity.w = s
      }, e.prototype.solvePositionConstraints = function (t) {
        var e = this.m_bodyA.c_position.c, i = this.m_bodyA.c_position.a, o = this.m_bodyB.c_position.c,
          s = this.m_bodyB.c_position.a, n = ut.neo(i), r = ut.neo(s),
          a = ut.mulVec2(n, y.sub(this.m_localAnchorA, this.m_localCenterA)),
          m = ut.mulVec2(r, y.sub(this.m_localAnchorB, this.m_localCenterB)),
          h = y.sub(y.add(e, this.m_rA), this.m_groundAnchorA), c = y.sub(y.add(o, this.m_rB), this.m_groundAnchorB),
          _ = h.length(), l = c.length()
        _ > 10 * g.linearSlop ? h.mul(1 / _) : h.setZero(), l > 10 * g.linearSlop ? c.mul(1 / l) : c.setZero()
        var u = y.crossVec2Vec2(a, h), p = y.crossVec2Vec2(m, c), d = this.m_invMassA + this.m_invIA * u * u,
          f = this.m_invMassB + this.m_invIB * p * p, v = d + this.m_ratio * this.m_ratio * f
        v > 0 && (v = 1 / v)
        var x = this.m_constant - _ - this.m_ratio * l, A = ms(x), b = -v * x, B = y.mulNumVec2(-b, h),
          w = y.mulNumVec2(-this.m_ratio * b, c)
        return e.addMul(this.m_invMassA, B), i += this.m_invIA * y.crossVec2Vec2(a, B), o.addMul(this.m_invMassB, w), s += this.m_invIB * y.crossVec2Vec2(m, w), this.m_bodyA.c_position.c = e, this.m_bodyA.c_position.a = i, this.m_bodyB.c_position.c = o, this.m_bodyB.c_position.a = s, A < g.linearSlop
      }, e.TYPE = 'pulley-joint', e
    }(Et), _s = Math.min
  !function (t) {
    t[t.inactiveLimit = 0] = 'inactiveLimit', t[t.atLowerLimit = 1] = 'atLowerLimit', t[t.atUpperLimit = 2] = 'atUpperLimit', t[t.equalLimits = 3] = 'equalLimits'
  }(Qo || (Qo = {}))
  var ls = {maxLength: 0}, us = function (t) {
      function e (i, o, n, r) {
        var a = this
        return a instanceof e ? (i = s(i, ls), o = (a = t.call(this, i, o, n) || this).m_bodyA, n = a.m_bodyB, a.m_type = e.TYPE, a.m_localAnchorA = y.clone(r ? o.getLocalPoint(r) : i.localAnchorA || y.neo(-1, 0)), a.m_localAnchorB = y.clone(r ? n.getLocalPoint(r) : i.localAnchorB || y.neo(1, 0)), a.m_maxLength = i.maxLength, a.m_mass = 0, a.m_impulse = 0, a.m_length = 0, a.m_state = Qo.inactiveLimit, a) : new e(i, o, n, r)
      }

      return i(e, t), e.prototype._serialize = function () {
        return {
          type: this.m_type,
          bodyA: this.m_bodyA,
          bodyB: this.m_bodyB,
          collideConnected: this.m_collideConnected,
          localAnchorA: this.m_localAnchorA,
          localAnchorB: this.m_localAnchorB,
          maxLength: this.m_maxLength
        }
      }, e._deserialize = function (t, i, s) {
        return (t = o({}, t)).bodyA = s(Ot, t.bodyA, i), t.bodyB = s(Ot, t.bodyB, i), new e(t)
      }, e.prototype.getLocalAnchorA = function () {
        return this.m_localAnchorA
      }, e.prototype.getLocalAnchorB = function () {
        return this.m_localAnchorB
      }, e.prototype.setMaxLength = function (t) {
        this.m_maxLength = t
      }, e.prototype.getMaxLength = function () {
        return this.m_maxLength
      }, e.prototype.getLimitState = function () {
        return this.m_state
      }, e.prototype.getAnchorA = function () {
        return this.m_bodyA.getWorldPoint(this.m_localAnchorA)
      }, e.prototype.getAnchorB = function () {
        return this.m_bodyB.getWorldPoint(this.m_localAnchorB)
      }, e.prototype.getReactionForce = function (t) {
        return y.mulNumVec2(this.m_impulse, this.m_u).mul(t)
      }, e.prototype.getReactionTorque = function (t) {
        return 0
      }, e.prototype.initVelocityConstraints = function (t) {
        this.m_localCenterA = this.m_bodyA.m_sweep.localCenter, this.m_localCenterB = this.m_bodyB.m_sweep.localCenter, this.m_invMassA = this.m_bodyA.m_invMass, this.m_invMassB = this.m_bodyB.m_invMass, this.m_invIA = this.m_bodyA.m_invI, this.m_invIB = this.m_bodyB.m_invI
        var e = this.m_bodyA.c_position.c, i = this.m_bodyA.c_position.a, o = this.m_bodyA.c_velocity.v,
          s = this.m_bodyA.c_velocity.w, n = this.m_bodyB.c_position.c, r = this.m_bodyB.c_position.a,
          a = this.m_bodyB.c_velocity.v, m = this.m_bodyB.c_velocity.w, h = ut.neo(i), c = ut.neo(r)
        this.m_rA = ut.mulSub(h, this.m_localAnchorA, this.m_localCenterA), this.m_rB = ut.mulSub(c, this.m_localAnchorB, this.m_localCenterB), this.m_u = y.zero(), this.m_u.addCombine(1, n, 1, this.m_rB), this.m_u.subCombine(1, e, 1, this.m_rA), this.m_length = this.m_u.length()
        var _ = this.m_length - this.m_maxLength
        if (this.m_state = _ > 0 ? Qo.atUpperLimit : Qo.inactiveLimit, !(this.m_length > g.linearSlop)) return this.m_u.setZero(), this.m_mass = 0, void (this.m_impulse = 0)
        this.m_u.mul(1 / this.m_length)
        var l = y.crossVec2Vec2(this.m_rA, this.m_u), u = y.crossVec2Vec2(this.m_rB, this.m_u),
          p = this.m_invMassA + this.m_invIA * l * l + this.m_invMassB + this.m_invIB * u * u
        if (this.m_mass = 0 != p ? 1 / p : 0, t.warmStarting) {
          this.m_impulse *= t.dtRatio
          var d = y.mulNumVec2(this.m_impulse, this.m_u)
          o.subMul(this.m_invMassA, d), s -= this.m_invIA * y.crossVec2Vec2(this.m_rA, d), a.addMul(this.m_invMassB, d), m += this.m_invIB * y.crossVec2Vec2(this.m_rB, d)
        } else {
          this.m_impulse = 0
        }
        this.m_bodyA.c_velocity.v.setVec2(o), this.m_bodyA.c_velocity.w = s, this.m_bodyB.c_velocity.v.setVec2(a), this.m_bodyB.c_velocity.w = m
      }, e.prototype.solveVelocityConstraints = function (t) {
        var e = this.m_bodyA.c_velocity.v, i = this.m_bodyA.c_velocity.w, o = this.m_bodyB.c_velocity.v,
          s = this.m_bodyB.c_velocity.w, n = y.addCrossNumVec2(e, i, this.m_rA), r = y.addCrossNumVec2(o, s, this.m_rB),
          a = this.m_length - this.m_maxLength, m = y.dot(this.m_u, y.sub(r, n))
        a < 0 && (m += t.inv_dt * a)
        var h = -this.m_mass * m, c = this.m_impulse
        this.m_impulse = _s(0, this.m_impulse + h), h = this.m_impulse - c
        var _ = y.mulNumVec2(h, this.m_u)
        e.subMul(this.m_invMassA, _), i -= this.m_invIA * y.crossVec2Vec2(this.m_rA, _), o.addMul(this.m_invMassB, _), s += this.m_invIB * y.crossVec2Vec2(this.m_rB, _), this.m_bodyA.c_velocity.v = e, this.m_bodyA.c_velocity.w = i, this.m_bodyB.c_velocity.v = o, this.m_bodyB.c_velocity.w = s
      }, e.prototype.solvePositionConstraints = function (t) {
        var e = this.m_bodyA.c_position.c, i = this.m_bodyA.c_position.a, o = this.m_bodyB.c_position.c,
          s = this.m_bodyB.c_position.a, n = ut.neo(i), r = ut.neo(s),
          a = ut.mulSub(n, this.m_localAnchorA, this.m_localCenterA),
          m = ut.mulSub(r, this.m_localAnchorB, this.m_localCenterB), c = y.zero()
        c.addCombine(1, o, 1, m), c.subCombine(1, e, 1, a)
        var _ = c.normalize(), l = _ - this.m_maxLength
        l = h(l, 0, g.maxLinearCorrection)
        var u = -this.m_mass * l, p = y.mulNumVec2(u, c)
        return e.subMul(this.m_invMassA, p), i -= this.m_invIA * y.crossVec2Vec2(a, p), o.addMul(this.m_invMassB, p), s += this.m_invIB * y.crossVec2Vec2(m, p), this.m_bodyA.c_position.c.setVec2(e), this.m_bodyA.c_position.a = i, this.m_bodyB.c_position.c.setVec2(o), this.m_bodyB.c_position.a = s, _ - this.m_maxLength < g.linearSlop
      }, e.TYPE = 'rope-joint', e
    }(Et), ps = Math.abs, ys = Math.PI, ds = {frequencyHz: 0, dampingRatio: 0}, fs = function (t) {
      function e (i, o, n, r) {
        var a = this
        return a instanceof e ? (i = s(i, ds), o = (a = t.call(this, i, o, n) || this).m_bodyA, n = a.m_bodyB, a.m_type = e.TYPE, a.m_localAnchorA = y.clone(r ? o.getLocalPoint(r) : i.localAnchorA || y.zero()), a.m_localAnchorB = y.clone(r ? n.getLocalPoint(r) : i.localAnchorB || y.zero()), a.m_referenceAngle = Number.isFinite(i.referenceAngle) ? i.referenceAngle : n.getAngle() - o.getAngle(), a.m_frequencyHz = i.frequencyHz, a.m_dampingRatio = i.dampingRatio, a.m_impulse = new no, a.m_bias = 0, a.m_gamma = 0, a.m_rA, a.m_rB, a.m_localCenterA, a.m_localCenterB, a.m_invMassA, a.m_invMassB, a.m_invIA, a.m_invIB, a.m_mass = new Do, a) : new e(i, o, n, r)
      }

      return i(e, t), e.prototype._serialize = function () {
        return {
          type: this.m_type,
          bodyA: this.m_bodyA,
          bodyB: this.m_bodyB,
          collideConnected: this.m_collideConnected,
          frequencyHz: this.m_frequencyHz,
          dampingRatio: this.m_dampingRatio,
          localAnchorA: this.m_localAnchorA,
          localAnchorB: this.m_localAnchorB,
          referenceAngle: this.m_referenceAngle
        }
      }, e._deserialize = function (t, i, s) {
        return (t = o({}, t)).bodyA = s(Ot, t.bodyA, i), t.bodyB = s(Ot, t.bodyB, i), new e(t)
      }, e.prototype._setAnchors = function (t) {
        t.anchorA ? this.m_localAnchorA.setVec2(this.m_bodyA.getLocalPoint(t.anchorA)) : t.localAnchorA && this.m_localAnchorA.setVec2(t.localAnchorA), t.anchorB ? this.m_localAnchorB.setVec2(this.m_bodyB.getLocalPoint(t.anchorB)) : t.localAnchorB && this.m_localAnchorB.setVec2(t.localAnchorB)
      }, e.prototype.getLocalAnchorA = function () {
        return this.m_localAnchorA
      }, e.prototype.getLocalAnchorB = function () {
        return this.m_localAnchorB
      }, e.prototype.getReferenceAngle = function () {
        return this.m_referenceAngle
      }, e.prototype.setFrequency = function (t) {
        this.m_frequencyHz = t
      }, e.prototype.getFrequency = function () {
        return this.m_frequencyHz
      }, e.prototype.setDampingRatio = function (t) {
        this.m_dampingRatio = t
      }, e.prototype.getDampingRatio = function () {
        return this.m_dampingRatio
      }, e.prototype.getAnchorA = function () {
        return this.m_bodyA.getWorldPoint(this.m_localAnchorA)
      }, e.prototype.getAnchorB = function () {
        return this.m_bodyB.getWorldPoint(this.m_localAnchorB)
      }, e.prototype.getReactionForce = function (t) {
        return y.neo(this.m_impulse.x, this.m_impulse.y).mul(t)
      }, e.prototype.getReactionTorque = function (t) {
        return t * this.m_impulse.z
      }, e.prototype.initVelocityConstraints = function (t) {
        this.m_localCenterA = this.m_bodyA.m_sweep.localCenter, this.m_localCenterB = this.m_bodyB.m_sweep.localCenter, this.m_invMassA = this.m_bodyA.m_invMass, this.m_invMassB = this.m_bodyB.m_invMass, this.m_invIA = this.m_bodyA.m_invI, this.m_invIB = this.m_bodyB.m_invI
        var e = this.m_bodyA.c_position.a, i = this.m_bodyA.c_velocity.v, o = this.m_bodyA.c_velocity.w,
          s = this.m_bodyB.c_position.a, n = this.m_bodyB.c_velocity.v, r = this.m_bodyB.c_velocity.w, a = ut.neo(e),
          m = ut.neo(s)
        this.m_rA = ut.mulVec2(a, y.sub(this.m_localAnchorA, this.m_localCenterA)), this.m_rB = ut.mulVec2(m, y.sub(this.m_localAnchorB, this.m_localCenterB))
        var h = this.m_invMassA, c = this.m_invMassB, _ = this.m_invIA, l = this.m_invIB, u = new Do
        if (u.ex.x = h + c + this.m_rA.y * this.m_rA.y * _ + this.m_rB.y * this.m_rB.y * l, u.ey.x = -this.m_rA.y * this.m_rA.x * _ - this.m_rB.y * this.m_rB.x * l, u.ez.x = -this.m_rA.y * _ - this.m_rB.y * l, u.ex.y = u.ey.x, u.ey.y = h + c + this.m_rA.x * this.m_rA.x * _ + this.m_rB.x * this.m_rB.x * l, u.ez.y = this.m_rA.x * _ + this.m_rB.x * l, u.ex.z = u.ez.x, u.ey.z = u.ez.y, u.ez.z = _ + l, this.m_frequencyHz > 0) {
          u.getInverse22(this.m_mass)
          var p = _ + l, d = p > 0 ? 1 / p : 0, f = s - e - this.m_referenceAngle, v = 2 * ys * this.m_frequencyHz,
            x = 2 * d * this.m_dampingRatio * v, A = d * v * v, g = t.dt
          this.m_gamma = g * (x + g * A), this.m_gamma = 0 != this.m_gamma ? 1 / this.m_gamma : 0, this.m_bias = f * g * A * this.m_gamma, p += this.m_gamma, this.m_mass.ez.z = 0 != p ? 1 / p : 0
        } else {
          0 == u.ez.z ? (u.getInverse22(this.m_mass), this.m_gamma = 0, this.m_bias = 0) : (u.getSymInverse33(this.m_mass), this.m_gamma = 0, this.m_bias = 0)
        }
        if (t.warmStarting) {
          this.m_impulse.mul(t.dtRatio)
          var b = y.neo(this.m_impulse.x, this.m_impulse.y)
          i.subMul(h, b), o -= _ * (y.crossVec2Vec2(this.m_rA, b) + this.m_impulse.z), n.addMul(c, b), r += l * (y.crossVec2Vec2(this.m_rB, b) + this.m_impulse.z)
        } else {
          this.m_impulse.setZero()
        }
        this.m_bodyA.c_velocity.v = i, this.m_bodyA.c_velocity.w = o, this.m_bodyB.c_velocity.v = n, this.m_bodyB.c_velocity.w = r
      }, e.prototype.solveVelocityConstraints = function (t) {
        var e = this.m_bodyA.c_velocity.v, i = this.m_bodyA.c_velocity.w, o = this.m_bodyB.c_velocity.v,
          s = this.m_bodyB.c_velocity.w, n = this.m_invMassA, r = this.m_invMassB, a = this.m_invIA, m = this.m_invIB
        if (this.m_frequencyHz > 0) {
          var h = s - i, c = -this.m_mass.ez.z * (h + this.m_bias + this.m_gamma * this.m_impulse.z)
          this.m_impulse.z += c, i -= a * c, s += m * c, (u = y.zero()).addCombine(1, o, 1, y.crossNumVec2(s, this.m_rB)), u.subCombine(1, e, 1, y.crossNumVec2(i, this.m_rA))
          var _ = y.neg(Do.mulVec2(this.m_mass, u))
          this.m_impulse.x += _.x, this.m_impulse.y += _.y
          var l = y.clone(_)
          e.subMul(n, l), i -= a * y.crossVec2Vec2(this.m_rA, l), o.addMul(r, l), s += m * y.crossVec2Vec2(this.m_rB, l)
        } else {
          var u;
          (u = y.zero()).addCombine(1, o, 1, y.crossNumVec2(s, this.m_rB)), u.subCombine(1, e, 1, y.crossNumVec2(i, this.m_rA))
          h = s - i
          var p = new no(u.x, u.y, h), d = no.neg(Do.mulVec3(this.m_mass, p))
          this.m_impulse.add(d)
          l = y.neo(d.x, d.y)
          e.subMul(n, l), i -= a * (y.crossVec2Vec2(this.m_rA, l) + d.z), o.addMul(r, l), s += m * (y.crossVec2Vec2(this.m_rB, l) + d.z)
        }
        this.m_bodyA.c_velocity.v = e, this.m_bodyA.c_velocity.w = i, this.m_bodyB.c_velocity.v = o, this.m_bodyB.c_velocity.w = s
      }, e.prototype.solvePositionConstraints = function (t) {
        var e, i, o = this.m_bodyA.c_position.c, s = this.m_bodyA.c_position.a, n = this.m_bodyB.c_position.c,
          r = this.m_bodyB.c_position.a, a = ut.neo(s), m = ut.neo(r), h = this.m_invMassA, c = this.m_invMassB,
          _ = this.m_invIA, l = this.m_invIB, u = ut.mulVec2(a, y.sub(this.m_localAnchorA, this.m_localCenterA)),
          p = ut.mulVec2(m, y.sub(this.m_localAnchorB, this.m_localCenterB)), d = new Do
        if (d.ex.x = h + c + u.y * u.y * _ + p.y * p.y * l, d.ey.x = -u.y * u.x * _ - p.y * p.x * l, d.ez.x = -u.y * _ - p.y * l, d.ex.y = d.ey.x, d.ey.y = h + c + u.x * u.x * _ + p.x * p.x * l, d.ez.y = u.x * _ + p.x * l, d.ex.z = d.ez.x, d.ey.z = d.ez.y, d.ez.z = _ + l, this.m_frequencyHz > 0) {
          (v = y.zero()).addCombine(1, n, 1, p), v.subCombine(1, o, 1, u), e = v.length(), i = 0
          var f = y.neg(d.solve22(v))
          o.subMul(h, f), s -= _ * y.crossVec2Vec2(u, f), n.addMul(c, f), r += l * y.crossVec2Vec2(p, f)
        } else {
          var v;
          (v = y.zero()).addCombine(1, n, 1, p), v.subCombine(1, o, 1, u)
          var x = r - s - this.m_referenceAngle
          e = v.length(), i = ps(x)
          var A = new no(v.x, v.y, x), b = new no
          if (d.ez.z > 0) {
            b = no.neg(d.solve33(A))
          } else {
            var B = y.neg(d.solve22(v))
            b.set(B.x, B.y, 0)
          }
          f = y.neo(b.x, b.y)
          o.subMul(h, f), s -= _ * (y.crossVec2Vec2(u, f) + b.z), n.addMul(c, f), r += l * (y.crossVec2Vec2(p, f) + b.z)
        }
        return this.m_bodyA.c_position.c = o, this.m_bodyA.c_position.a = s, this.m_bodyB.c_position.c = n, this.m_bodyB.c_position.a = r, e <= g.linearSlop && i <= g.angularSlop
      }, e.TYPE = 'weld-joint', e
    }(Et), vs = Math.abs, xs = Math.PI,
    As = {enableMotor: !1, maxMotorTorque: 0, motorSpeed: 0, frequencyHz: 2, dampingRatio: .7}, gs = function (t) {
      function e (i, o, n, r, a) {
        var m = this
        return m instanceof e ? (i = s(i, As), o = (m = t.call(this, i, o, n) || this).m_bodyA, n = m.m_bodyB, m.m_ax = y.zero(), m.m_ay = y.zero(), m.m_type = e.TYPE, m.m_localAnchorA = y.clone(r ? o.getLocalPoint(r) : i.localAnchorA || y.zero()), m.m_localAnchorB = y.clone(r ? n.getLocalPoint(r) : i.localAnchorB || y.zero()), y.isValid(a) ? m.m_localXAxisA = o.getLocalVector(a) : y.isValid(i.localAxisA) ? m.m_localXAxisA = y.clone(i.localAxisA) : y.isValid(i.localAxis) ? m.m_localXAxisA = y.clone(i.localAxis) : m.m_localXAxisA = y.neo(1, 0), m.m_localYAxisA = y.crossNumVec2(1, m.m_localXAxisA), m.m_mass = 0, m.m_impulse = 0, m.m_motorMass = 0, m.m_motorImpulse = 0, m.m_springMass = 0, m.m_springImpulse = 0, m.m_maxMotorTorque = i.maxMotorTorque, m.m_motorSpeed = i.motorSpeed, m.m_enableMotor = i.enableMotor, m.m_frequencyHz = i.frequencyHz, m.m_dampingRatio = i.dampingRatio, m.m_bias = 0, m.m_gamma = 0, m) : new e(i, o, n, r, a)
      }

      return i(e, t), e.prototype._serialize = function () {
        return {
          type: this.m_type,
          bodyA: this.m_bodyA,
          bodyB: this.m_bodyB,
          collideConnected: this.m_collideConnected,
          enableMotor: this.m_enableMotor,
          maxMotorTorque: this.m_maxMotorTorque,
          motorSpeed: this.m_motorSpeed,
          frequencyHz: this.m_frequencyHz,
          dampingRatio: this.m_dampingRatio,
          localAnchorA: this.m_localAnchorA,
          localAnchorB: this.m_localAnchorB,
          localAxisA: this.m_localXAxisA
        }
      }, e._deserialize = function (t, i, s) {
        return (t = o({}, t)).bodyA = s(Ot, t.bodyA, i), t.bodyB = s(Ot, t.bodyB, i), new e(t)
      }, e.prototype._setAnchors = function (t) {
        t.anchorA ? this.m_localAnchorA.setVec2(this.m_bodyA.getLocalPoint(t.anchorA)) : t.localAnchorA && this.m_localAnchorA.setVec2(t.localAnchorA), t.anchorB ? this.m_localAnchorB.setVec2(this.m_bodyB.getLocalPoint(t.anchorB)) : t.localAnchorB && this.m_localAnchorB.setVec2(t.localAnchorB), t.localAxisA && (this.m_localXAxisA.setVec2(t.localAxisA), this.m_localYAxisA.setVec2(y.crossNumVec2(1, t.localAxisA)))
      }, e.prototype.getLocalAnchorA = function () {
        return this.m_localAnchorA
      }, e.prototype.getLocalAnchorB = function () {
        return this.m_localAnchorB
      }, e.prototype.getLocalAxisA = function () {
        return this.m_localXAxisA
      }, e.prototype.getJointTranslation = function () {
        var t = this.m_bodyA, e = this.m_bodyB, i = t.getWorldPoint(this.m_localAnchorA),
          o = e.getWorldPoint(this.m_localAnchorB), s = y.sub(o, i), n = t.getWorldVector(this.m_localXAxisA)
        return y.dot(s, n)
      }, e.prototype.getJointSpeed = function () {
        var t = this.m_bodyA.m_angularVelocity
        return this.m_bodyB.m_angularVelocity - t
      }, e.prototype.isMotorEnabled = function () {
        return this.m_enableMotor
      }, e.prototype.enableMotor = function (t) {
        t != this.m_enableMotor && (this.m_bodyA.setAwake(!0), this.m_bodyB.setAwake(!0), this.m_enableMotor = t)
      }, e.prototype.setMotorSpeed = function (t) {
        t != this.m_motorSpeed && (this.m_bodyA.setAwake(!0), this.m_bodyB.setAwake(!0), this.m_motorSpeed = t)
      }, e.prototype.getMotorSpeed = function () {
        return this.m_motorSpeed
      }, e.prototype.setMaxMotorTorque = function (t) {
        t != this.m_maxMotorTorque && (this.m_bodyA.setAwake(!0), this.m_bodyB.setAwake(!0), this.m_maxMotorTorque = t)
      }, e.prototype.getMaxMotorTorque = function () {
        return this.m_maxMotorTorque
      }, e.prototype.getMotorTorque = function (t) {
        return t * this.m_motorImpulse
      }, e.prototype.setSpringFrequencyHz = function (t) {
        this.m_frequencyHz = t
      }, e.prototype.getSpringFrequencyHz = function () {
        return this.m_frequencyHz
      }, e.prototype.setSpringDampingRatio = function (t) {
        this.m_dampingRatio = t
      }, e.prototype.getSpringDampingRatio = function () {
        return this.m_dampingRatio
      }, e.prototype.getAnchorA = function () {
        return this.m_bodyA.getWorldPoint(this.m_localAnchorA)
      }, e.prototype.getAnchorB = function () {
        return this.m_bodyB.getWorldPoint(this.m_localAnchorB)
      }, e.prototype.getReactionForce = function (t) {
        return y.combine(this.m_impulse, this.m_ay, this.m_springImpulse, this.m_ax).mul(t)
      }, e.prototype.getReactionTorque = function (t) {
        return t * this.m_motorImpulse
      }, e.prototype.initVelocityConstraints = function (t) {
        this.m_localCenterA = this.m_bodyA.m_sweep.localCenter, this.m_localCenterB = this.m_bodyB.m_sweep.localCenter, this.m_invMassA = this.m_bodyA.m_invMass, this.m_invMassB = this.m_bodyB.m_invMass, this.m_invIA = this.m_bodyA.m_invI, this.m_invIB = this.m_bodyB.m_invI
        var e = this.m_invMassA, i = this.m_invMassB, o = this.m_invIA, s = this.m_invIB, n = this.m_bodyA.c_position.c,
          r = this.m_bodyA.c_position.a, a = this.m_bodyA.c_velocity.v, m = this.m_bodyA.c_velocity.w,
          h = this.m_bodyB.c_position.c, c = this.m_bodyB.c_position.a, _ = this.m_bodyB.c_velocity.v,
          l = this.m_bodyB.c_velocity.w, u = ut.neo(r), p = ut.neo(c),
          d = ut.mulVec2(u, y.sub(this.m_localAnchorA, this.m_localCenterA)),
          f = ut.mulVec2(p, y.sub(this.m_localAnchorB, this.m_localCenterB)), v = y.zero()
        if (v.addCombine(1, h, 1, f), v.subCombine(1, n, 1, d), this.m_ay = ut.mulVec2(u, this.m_localYAxisA), this.m_sAy = y.crossVec2Vec2(y.add(v, d), this.m_ay), this.m_sBy = y.crossVec2Vec2(f, this.m_ay), this.m_mass = e + i + o * this.m_sAy * this.m_sAy + s * this.m_sBy * this.m_sBy, this.m_mass > 0 && (this.m_mass = 1 / this.m_mass), this.m_springMass = 0, this.m_bias = 0, this.m_gamma = 0, this.m_frequencyHz > 0) {
          this.m_ax = ut.mulVec2(u, this.m_localXAxisA), this.m_sAx = y.crossVec2Vec2(y.add(v, d), this.m_ax), this.m_sBx = y.crossVec2Vec2(f, this.m_ax)
          var x = e + i + o * this.m_sAx * this.m_sAx + s * this.m_sBx * this.m_sBx
          if (x > 0) {
            this.m_springMass = 1 / x
            var A = y.dot(v, this.m_ax), g = 2 * xs * this.m_frequencyHz,
              b = 2 * this.m_springMass * this.m_dampingRatio * g, B = this.m_springMass * g * g, w = t.dt
            this.m_gamma = w * (b + w * B), this.m_gamma > 0 && (this.m_gamma = 1 / this.m_gamma), this.m_bias = A * w * B * this.m_gamma, this.m_springMass = x + this.m_gamma, this.m_springMass > 0 && (this.m_springMass = 1 / this.m_springMass)
          }
        } else {
          this.m_springImpulse = 0
        }
        if (this.m_enableMotor ? (this.m_motorMass = o + s, this.m_motorMass > 0 && (this.m_motorMass = 1 / this.m_motorMass)) : (this.m_motorMass = 0, this.m_motorImpulse = 0), t.warmStarting) {
          this.m_impulse *= t.dtRatio, this.m_springImpulse *= t.dtRatio, this.m_motorImpulse *= t.dtRatio
          var V = y.combine(this.m_impulse, this.m_ay, this.m_springImpulse, this.m_ax),
            C = this.m_impulse * this.m_sAy + this.m_springImpulse * this.m_sAx + this.m_motorImpulse,
            M = this.m_impulse * this.m_sBy + this.m_springImpulse * this.m_sBx + this.m_motorImpulse
          a.subMul(this.m_invMassA, V), m -= this.m_invIA * C, _.addMul(this.m_invMassB, V), l += this.m_invIB * M
        } else {
          this.m_impulse = 0, this.m_springImpulse = 0, this.m_motorImpulse = 0
        }
        this.m_bodyA.c_velocity.v.setVec2(a), this.m_bodyA.c_velocity.w = m, this.m_bodyB.c_velocity.v.setVec2(_), this.m_bodyB.c_velocity.w = l
      }, e.prototype.solveVelocityConstraints = function (t) {
        var e = this.m_invMassA, i = this.m_invMassB, o = this.m_invIA, s = this.m_invIB, n = this.m_bodyA.c_velocity.v,
          r = this.m_bodyA.c_velocity.w, a = this.m_bodyB.c_velocity.v, m = this.m_bodyB.c_velocity.w,
          c = y.dot(this.m_ax, a) - y.dot(this.m_ax, n) + this.m_sBx * m - this.m_sAx * r,
          _ = -this.m_springMass * (c + this.m_bias + this.m_gamma * this.m_springImpulse)
        this.m_springImpulse += _
        var l = y.mulNumVec2(_, this.m_ax), u = _ * this.m_sAx, p = _ * this.m_sBx
        n.subMul(e, l), r -= o * u, a.addMul(i, l)
        c = (m += s * p) - r - this.m_motorSpeed, _ = -this.m_motorMass * c
        var d = this.m_motorImpulse, f = t.dt * this.m_maxMotorTorque
        this.m_motorImpulse = h(this.m_motorImpulse + _, -f, f), r -= o * (_ = this.m_motorImpulse - d), m += s * _
        c = y.dot(this.m_ay, a) - y.dot(this.m_ay, n) + this.m_sBy * m - this.m_sAy * r, _ = -this.m_mass * c
        this.m_impulse += _
        l = y.mulNumVec2(_, this.m_ay), u = _ * this.m_sAy, p = _ * this.m_sBy
        n.subMul(e, l), r -= o * u, a.addMul(i, l), m += s * p, this.m_bodyA.c_velocity.v.setVec2(n), this.m_bodyA.c_velocity.w = r, this.m_bodyB.c_velocity.v.setVec2(a), this.m_bodyB.c_velocity.w = m
      }, e.prototype.solvePositionConstraints = function (t) {
        var e = this.m_bodyA.c_position.c, i = this.m_bodyA.c_position.a, o = this.m_bodyB.c_position.c,
          s = this.m_bodyB.c_position.a, n = ut.neo(i), r = ut.neo(s),
          a = ut.mulVec2(n, y.sub(this.m_localAnchorA, this.m_localCenterA)),
          m = ut.mulVec2(r, y.sub(this.m_localAnchorB, this.m_localCenterB)), h = y.zero()
        h.addCombine(1, o, 1, m), h.subCombine(1, e, 1, a)
        var c = ut.mulVec2(n, this.m_localYAxisA), _ = y.crossVec2Vec2(y.add(h, a), c), l = y.crossVec2Vec2(m, c),
          u = y.dot(h, c),
          p = this.m_invMassA + this.m_invMassB + this.m_invIA * this.m_sAy * this.m_sAy + this.m_invIB * this.m_sBy * this.m_sBy,
          d = 0 != p ? -u / p : 0, f = y.mulNumVec2(d, c), v = d * _, x = d * l
        return e.subMul(this.m_invMassA, f), i -= this.m_invIA * v, o.addMul(this.m_invMassB, f), s += this.m_invIB * x, this.m_bodyA.c_position.c.setVec2(e), this.m_bodyA.c_position.a = i, this.m_bodyB.c_position.c.setVec2(o), this.m_bodyB.c_position.a = s, vs(u) <= g.linearSlop
      }, e.TYPE = "wheel-joint", e
    }(Et), bs = 0;

  function Bs (t) {
    var e, i = (t = t || {}).rootClass || so, s = t.preSerialize || function (t) {
        return t
      }, n = t.postSerialize || function (t, e) {
        return t
      }, r = t.preDeserialize || function (t) {
        return t
      }, a = t.postDeserialize || function (t, e) {
        return t
      }, m = {World: so, Body: Ot, Joint: Et, Fixture: St, Shape: wt}, h = o({Vec2: y, Vec3: no}, m),
      c = ((e = {})[Ot.STATIC] = Ot, e[Ot.DYNAMIC] = Ot, e[Ot.KINEMATIC] = Ot, e[lo.TYPE] = lo, e[Co.TYPE] = Co, e[mo.TYPE] = mo, e[Bo.TYPE] = Bo, e[To.TYPE] = To, e[ko.TYPE] = ko, e[jo.TYPE] = jo, e[is.TYPE] = is, e[ss.TYPE] = ss, e[as.TYPE] = as, e[ts.TYPE] = ts, e[cs.TYPE] = cs, e[Zo.TYPE] = Zo, e[us.TYPE] = us, e[fs.TYPE] = fs, e[gs.TYPE] = gs, e);
    this.toJson = function (t) {
      var e = [], i = [t], o = {};

      function r (t, s) {
        if (t.__sid = t.__sid || ++bs, !o[t.__sid]) {
          i.push(t);
          var n = {refIndex: e.length + i.length, refType: s};
          o[t.__sid] = n
        }
        return o[t.__sid]
      }

      function a (t, e) {
        if ("object" != typeof t || null === t) return t;
        if ("function" == typeof t._serialize) {
          if (t !== e) for (var i in m) if (t instanceof m[i]) return r(t, i);
          t = function (t) {
            var e = (t = s(t))._serialize();
            return n(e, t)
          }(t)
        }
        if (Array.isArray(t)) {
          for (var o = [], h = 0; h < t.length; h++) o[h] = a(t[h]);
          t = o
        } else {
          o = {};
          for (var h in t) t.hasOwnProperty(h) && (o[h] = a(t[h]));
          t = o
        }
        return t
      }

      for (; i.length;) {
        var h = i.shift(), c = a(h, h);
        e.push(c)
      }
      return e
    }, this.fromJson = function (t) {
      var e = {};

      function o (t, e, i) {
        var o = function (t, e) {
          return e && e._deserialize || (e = c[t.type]), e && e._deserialize
        }(e, t);
        if (o) {
          var n = o(e = r(e), i, s);
          return n = a(n, e)
        }
      }

      function s (i, s, n) {
        if (!s.refIndex) return i && i._deserialize && o(i, s, n);
        i = h[s.refType] || i;
        var r = s.refIndex;
        if (!e[r]) {
          var a = o(i, t[r], n);
          e[r] = a
        }
        return e[r]
      }

      return i._deserialize(t[0], null, s)
    }
  }

  var ws = new Bs;
  Bs.toJson = ws.toJson, Bs.fromJson = ws.fromJson;
  var Vs = function () {
    function t () {
      this.width = 80, this.height = 60, this.x = 0, this.y = -10, this.scaleY = -1, this.hz = 60, this.speed = 1, this.ratio = 16, this.background = "#222222", this.activeKeys = {}, this.step = function (t, e) {
      }, this.keydown = function (t, e) {
      }, this.keyup = function (t, e) {
      }, this.statusText = "", this.statusMap = {}
    }

    return t.mount = function (t) {
      throw new Error("Not implemented")
    }, t.prototype.status = function (t, e) {
      if (void 0 !== e) {
        var i = t, o = e;
        "function" != typeof o && "object" != typeof o && (this.statusMap[i] = o)
      } else if (t && "object" == typeof t) {
        for (var s in t) {
          var n = t[s];
          "function" != typeof n && "object" != typeof n && (this.statusMap[s] = n)
        }
      } else {
        "string" == typeof t && (this.statusText = t);
      }
      var r = this.statusText || "";
      for (var a in this.statusMap) {
        var m = this.statusMap[a];
        "function" != typeof m && (r += (r && "\n") + a + ": " + m)
      }
      this._status(r)
    }, t.prototype.info = function (t) {
      this._info(t)
    }, t.prototype.color = function (t, e, i) {
      return "rgb(" + (t = 256 * t | 0) + ", " + (e = 256 * e | 0) + ", " + (i = 256 * i | 0) + ")"
    }, t
  }();

  function Cs (t, e) {
    var i, o;
    "function" == typeof t ? (i = t, o = e) : "function" == typeof e ? (i = e, o = t) : o = null != t ? t : e;
    var s = Vs.mount(o);
    if (!i) return s;
    var n = i(s) || s.world;
    s.start(n)
  }

  io.addType(To.TYPE, To.TYPE, (function (t, e, i, o, s, n, r) {
    Ps(t, i.getShape(), e, n.getShape(), s)
  }));
  var Ms = q(0, 0), Is = q(0, 0), Ps = function (e, i, o, s, n) {
    e.pointCount = 0, rt(Ms, o, i.m_p), rt(Is, n, s.m_p);
    var r = et(Is, Ms), a = i.m_radius + s.m_radius;
    r > a * a || (e.type = t.ManifoldType.e_circles, N(e.localPoint, i.m_p), j(e.localNormal), e.pointCount = 1, N(e.points[0].localPoint, s.m_p), e.points[0].id.setFeatures(0, t.ContactFeatureType.e_vertex, 0, t.ContactFeatureType.e_vertex))
  };
  io.addType(mo.TYPE, To.TYPE, (function (t, e, i, o, s, n, r) {
    var a = i.getShape(), m = n.getShape();
    ks(t, a, e, m, s)
  })), io.addType(lo.TYPE, To.TYPE, (function (t, e, i, o, s, n, r) {
    var a = i.getShape(), m = new mo;
    a.getChildEdge(m, o);
    var h = m, c = n.getShape();
    ks(t, h, e, c, s)
  }));
  var Ss = q(0, 0), Ts = q(0, 0), zs = q(0, 0), Fs = q(0, 0), Ls = q(0, 0), qs = q(0, 0),
    ks = function (e, i, o, s, n) {
      e.pointCount = 0, mt(Fs, n, o, s.m_p);
      var r = i.m_vertex1, a = i.m_vertex2;
      E(Ss, a, r);
      var m = Q(Ss, a) - Q(Ss, Fs), h = Q(Ss, Fs) - Q(Ss, r), c = i.m_radius + s.m_radius;
      if (h <= 0) {
        if (N(Ls, r), et(Fs, r) > c * c) return;
        if (i.m_hasVertex0) {
          var _ = i.m_vertex0, l = r;
          if (E(Ts, l, _), Q(Ts, l) - Q(Ts, Fs) > 0) return
        }
        return e.type = t.ManifoldType.e_circles, j(e.localNormal), N(e.localPoint, Ls), e.pointCount = 1, N(e.points[0].localPoint, s.m_p), void e.points[0].id.setFeatures(0, t.ContactFeatureType.e_vertex, 0, t.ContactFeatureType.e_vertex)
      }
      if (m <= 0) {
        if (N(Ls, a), et(Fs, Ls) > c * c) return;
        if (i.m_hasVertex3) {
          var u = i.m_vertex3, p = a;
          if (E(zs, u, p), Q(zs, Fs) - Q(zs, p) > 0) return
        }
        return e.type = t.ManifoldType.e_circles, j(e.localNormal), N(e.localPoint, Ls), e.pointCount = 1, N(e.points[0].localPoint, s.m_p), void e.points[0].id.setFeatures(1, t.ContactFeatureType.e_vertex, 0, t.ContactFeatureType.e_vertex)
      }
      var y = $(Ss);
      U(Ls, m / y, r, h / y, a), et(Fs, Ls) > c * c || (X(qs, 1, Ss), Q(qs, Fs) - Q(qs, r) < 0 && D(qs), Z(qs), e.type = t.ManifoldType.e_faceA, N(e.localNormal, qs), N(e.localPoint, r), e.pointCount = 1, N(e.points[0].localPoint, s.m_p), e.points[0].id.setFeatures(0, t.ContactFeatureType.e_face, 0, t.ContactFeatureType.e_vertex))
    }, Ns = [new li, new li], js = [new li, new li], Ds = [new li, new li], Os = q(0, 0), Rs = q(0, 0), Es = q(0, 0),
    Js = st(0, 0, 0), Ys = q(0, 0), Ws = q(0, 0), Hs = q(0, 0), Us = q(0, 0), Zs = q(0, 0), Ks = q(0, 0), Xs = q(0, 0),
    Gs = q(0, 0);

  function Qs (t, e, i, o, s) {
    var n = t.m_count, r = i.m_count, a = t.m_normals, m = t.m_vertices, h = i.m_vertices;
    ht(Js, o, e);
    for (var c = 0, _ = -1 / 0, l = 0; l < n; ++l) {
      it(Es, Js.q, a[l]), rt(Rs, Js, m[l]);
      for (var u = 1 / 0, p = 0; p < r; ++p) {
        var y = Q(Es, h[p]) - Q(Es, Rs);
        y < u && (u = y)
      }
      u > _ && (_ = u, c = l)
    }
    s.maxSeparation = _, s.bestIndex = c
  }

  io.addType(Bo.TYPE, Bo.TYPE, (function (t, e, i, o, s, n, r) {
    tn(t, i.getShape(), e, n.getShape(), s)
  }));
  var $s = {maxSeparation: 0, bestIndex: 0}, tn = function (e, i, o, s, n) {
    e.pointCount = 0;
    var r = i.m_radius + s.m_radius;
    Qs(i, o, s, n, $s);
    var a = $s.bestIndex, m = $s.maxSeparation;
    if (!(m > r)) {
      Qs(s, n, i, o, $s);
      var h = $s.bestIndex, c = $s.maxSeparation;
      if (!(c > r)) {
        var _, l, u, p, y, d;
        c > m + .1 * g.linearSlop ? (_ = s, l = i, u = n, p = o, y = h, e.type = t.ManifoldType.e_faceB, d = !0) : (_ = i, l = s, u = o, p = n, y = a, e.type = t.ManifoldType.e_faceA, d = !1), Ns[0].recycle(), Ns[1].recycle(), function (e, i, o, s, n, r) {
          var a = i.m_normals, m = n.m_count, h = n.m_vertices, c = n.m_normals;
          !function (t, e, i, o) {
            var s = e.c * o.x + e.s * o.y, n = -e.s * o.x + e.c * o.y, r = i.c * s - i.s * n, a = i.s * s + i.c * n;
            t.x = r, t.y = a
          }(Gs, r.q, o.q, a[s]);
          for (var _ = 0, l = 1 / 0, u = 0; u < m; ++u) {
            var p = Q(Gs, c[u]);
            p < l && (l = p, _ = u)
          }
          var y = _, d = y + 1 < m ? y + 1 : 0;
          rt(e[0].v, r, h[y]), e[0].id.setFeatures(s, t.ContactFeatureType.e_face, y, t.ContactFeatureType.e_vertex), rt(e[1].v, r, h[d]), e[1].id.setFeatures(s, t.ContactFeatureType.e_face, d, t.ContactFeatureType.e_vertex)
        }(Ns, _, u, y, l, p);
        var f = _.m_count, v = _.m_vertices, x = y, A = y + 1 < f ? y + 1 : 0;
        N(Ys, v[x]), N(Ws, v[A]), E(Hs, Ws, Ys), Z(Hs), K(Us, Hs, 1), U(Zs, .5, Ys, .5, Ws), it(Ks, u.q, Hs), K(Xs, Ks, 1), rt(Ys, u, Ys), rt(Ws, u, Ws);
        var b = Q(Xs, Ys), B = -Q(Ks, Ys) + r, w = Q(Ks, Ws) + r;
        if (js[0].recycle(), js[1].recycle(), Ds[0].recycle(), Ds[1].recycle(), k(Os, -Ks.x, -Ks.y), !(vi(js, Ns, Os, B, x) < 2)) {
          if (k(Os, Ks.x, Ks.y), !(vi(Ds, js, Os, w, A) < 2)) {
            N(e.localNormal, Us), N(e.localPoint, Zs);
            for (var V = 0, C = 0; C < Ds.length; ++C) {
              if (Q(Xs, Ds[C].v) - b <= r) {
                var M = e.points[V];
                at(M.localPoint, p, Ds[C].v), M.id.set(Ds[C].id), d && M.id.swapFeatures(), ++V
              }
            }
            e.pointCount = V
          }
        }
      }
    }
  };
  io.addType(Bo.TYPE, To.TYPE, (function (t, e, i, o, s, n, r) {
    sn(t, i.getShape(), e, n.getShape(), s)
  }));
  var en = q(0, 0), on = q(0, 0), sn = function (e, i, o, s, n) {
    e.pointCount = 0, mt(en, n, o, s.m_p);
    for (var a = 0, m = -1 / 0, h = i.m_radius + s.m_radius, c = i.m_count, _ = i.m_vertices, l = i.m_normals, u = 0; u < c; ++u) {
      var p = Q(l[u], en) - Q(l[u], _[u]);
      if (p > h) return;
      p > m && (m = p, a = u)
    }
    var y = a, d = y + 1 < c ? y + 1 : 0, f = _[y], v = _[d];
    if (m < r) return e.pointCount = 1, e.type = t.ManifoldType.e_faceA, N(e.localNormal, l[a]), U(e.localPoint, .5, f, .5, v), N(e.points[0].localPoint, s.m_p), void e.points[0].id.setFeatures(0, t.ContactFeatureType.e_vertex, 0, t.ContactFeatureType.e_vertex);
    var x = Q(en, v) - Q(en, f) - Q(f, v) + Q(f, f), A = Q(en, f) - Q(en, v) - Q(v, f) + Q(v, v);
    if (x <= 0) {
      if (et(en, f) > h * h) return;
      e.pointCount = 1, e.type = t.ManifoldType.e_faceA, E(e.localNormal, en, f), Z(e.localNormal), N(e.localPoint, f), N(e.points[0].localPoint, s.m_p), e.points[0].id.setFeatures(0, t.ContactFeatureType.e_vertex, 0, t.ContactFeatureType.e_vertex)
    } else if (A <= 0) {
      if (et(en, v) > h * h) return;
      e.pointCount = 1, e.type = t.ManifoldType.e_faceA, E(e.localNormal, en, v), Z(e.localNormal), N(e.localPoint, v), N(e.points[0].localPoint, s.m_p), e.points[0].id.setFeatures(0, t.ContactFeatureType.e_vertex, 0, t.ContactFeatureType.e_vertex)
    } else {
      if (U(on, .5, f, .5, v), Q(en, l[y]) - Q(on, l[y]) > h) return;
      e.pointCount = 1, e.type = t.ManifoldType.e_faceA, N(e.localNormal, l[y]), N(e.localPoint, on), N(e.points[0].localPoint, s.m_p), e.points[0].id.setFeatures(0, t.ContactFeatureType.e_vertex, 0, t.ContactFeatureType.e_vertex)
    }
  }, nn = Math.min;
  io.addType(mo.TYPE, Bo.TYPE, (function (t, e, i, o, s, n, r) {
    zn(t, i.getShape(), e, n.getShape(), s)
  })), io.addType(lo.TYPE, Bo.TYPE, (function (t, e, i, o, s, n, r) {
    i.getShape().getChildEdge(mn, o), zn(t, mn, e, n.getShape(), s)
  }));
  var rn, an, mn = new mo;
  !function (t) {
    t[t.e_unknown = -1] = "e_unknown", t[t.e_edgeA = 1] = "e_edgeA", t[t.e_edgeB = 2] = "e_edgeB"
  }(rn || (rn = {})), function (t) {
    t[t.e_isolated = 0] = "e_isolated", t[t.e_concave = 1] = "e_concave", t[t.e_convex = 2] = "e_convex"
  }(an || (an = {}));
  var hn = function () {
    }, cn = function () {
      this.vertices = [], this.normals = [], this.count = 0;
      for (var t = 0; t < g.maxPolygonVertices; t++) this.vertices.push(q(0, 0)), this.normals.push(q(0, 0))
    }, _n = function () {
      function t () {
        this.v1 = q(0, 0), this.v2 = q(0, 0), this.normal = q(0, 0), this.sideNormal1 = q(0, 0), this.sideNormal2 = q(0, 0)
      }

      return t.prototype.recycle = function () {
        j(this.v1), j(this.v2), j(this.normal), j(this.sideNormal1), j(this.sideNormal2)
      }, t
    }(), ln = [new li, new li], un = [new li, new li], pn = [new li, new li], yn = new hn, dn = new hn, fn = new cn,
    vn = new _n, xn = q(0, 0), An = q(0, 0), gn = q(0, 0), bn = q(0, 0), Bn = st(0, 0, 0), wn = q(0, 0), Vn = q(0, 0),
    Cn = q(0, 0), Mn = q(0, 0), In = q(0, 0), Pn = q(0, 0), Sn = q(0, 0), Tn = q(0, 0), zn = function (e, i, o, s, n) {
      ht(Bn, o, n), rt(xn, Bn, s.m_centroid);
      var r = i.m_vertex0, a = i.m_vertex1, m = i.m_vertex2, h = i.m_vertex3, c = i.m_hasVertex0, _ = i.m_hasVertex3;
      E(gn, m, a), Z(gn), k(Cn, gn.y, -gn.x);
      var l, u = Q(Cn, xn) - Q(Cn, a), p = 0, d = 0, f = !1, v = !1;
      j(Vn), j(Mn), c && (E(An, a, r), Z(An), k(Vn, An.y, -An.x), f = G(An, gn) >= 0, p = y.dot(Vn, xn) - y.dot(Vn, r)), _ && (E(bn, h, m), Z(bn), k(Mn, bn.y, -bn.x), v = y.crossVec2Vec2(gn, bn) > 0, d = y.dot(Mn, xn) - y.dot(Mn, m)), j(wn), j(In), j(Pn), c && _ ? f && v ? (l = p >= 0 || u >= 0 || d >= 0) ? (N(wn, Cn), N(In, Vn), N(Pn, Mn)) : (Y(wn, -1, Cn), Y(In, -1, Cn), Y(Pn, -1, Cn)) : f ? (l = p >= 0 || u >= 0 && d >= 0) ? (N(wn, Cn), N(In, Vn), N(Pn, Cn)) : (Y(wn, -1, Cn), Y(In, -1, Mn), Y(Pn, -1, Cn)) : v ? (l = d >= 0 || p >= 0 && u >= 0) ? (N(wn, Cn), N(In, Cn), N(Pn, Mn)) : (Y(wn, -1, Cn), Y(In, -1, Cn), Y(Pn, -1, Vn)) : (l = p >= 0 && u >= 0 && d >= 0) ? (N(wn, Cn), N(In, Cn), N(Pn, Cn)) : (Y(wn, -1, Cn), Y(In, -1, Mn), Y(Pn, -1, Vn)) : c ? f ? (l = p >= 0 || u >= 0) ? (N(wn, Cn), N(In, Vn), Y(Pn, -1, Cn)) : (Y(wn, -1, Cn), N(In, Cn), Y(Pn, -1, Cn)) : (l = p >= 0 && u >= 0) ? (N(wn, Cn), N(In, Cn), Y(Pn, -1, Cn)) : (Y(wn, -1, Cn), N(In, Cn), Y(Pn, -1, Vn)) : _ ? v ? (l = u >= 0 || d >= 0) ? (N(wn, Cn), Y(In, -1, Cn), N(Pn, Mn)) : (Y(wn, -1, Cn), Y(In, -1, Cn), N(Pn, Cn)) : (l = u >= 0 && d >= 0) ? (N(wn, Cn), Y(In, -1, Cn), N(Pn, Cn)) : (Y(wn, -1, Cn), Y(In, -1, Mn), N(Pn, Cn)) : (l = u >= 0) ? (N(wn, Cn), Y(In, -1, Cn), Y(Pn, -1, Cn)) : (Y(wn, -1, Cn), N(In, Cn), N(Pn, Cn)), fn.count = s.m_count;
      for (var x = 0; x < s.m_count; ++x) rt(fn.vertices[x], Bn, s.m_vertices[x]), it(fn.normals[x], Bn.q, s.m_normals[x]);
      var A = s.m_radius + i.m_radius;
      e.pointCount = 0, yn.type = rn.e_edgeA, yn.index = l ? 0 : 1, yn.separation = 1 / 0;
      for (x = 0; x < fn.count; ++x) {
        var b = fn.vertices[x];
        (B = Q(wn, b) - Q(wn, a)) < yn.separation && (yn.separation = B)
      }
      if (yn.type != rn.e_unknown && !(yn.separation > A)) {
        dn.type = rn.e_unknown, dn.index = -1, dn.separation = -1 / 0, k(Sn, -wn.y, wn.x);
        for (x = 0; x < fn.count; ++x) {
          Y(Tn, -1, fn.normals[x]);
          var B, w = Q(Tn, fn.vertices[x]) - Q(Tn, a), V = Q(Tn, fn.vertices[x]) - Q(Tn, m);
          if ((B = nn(w, V)) > A) {
            dn.type = rn.e_edgeB, dn.index = x, dn.separation = B;
            break
          }
          if (Q(Tn, Sn) >= 0) {
            if (Q(Tn, wn) - Q(Pn, wn) < -g.angularSlop) continue
          } else if (Q(Tn, wn) - Q(In, wn) < -g.angularSlop) continue;
          B > dn.separation && (dn.type = rn.e_edgeB, dn.index = x, dn.separation = B)
        }
        if (!(dn.type != rn.e_unknown && dn.separation > A)) {
          var C;
          if (C = dn.type == rn.e_unknown ? yn : dn.separation > .98 * yn.separation + .001 ? dn : yn, pn[0].recycle(), pn[1].recycle(), C.type == rn.e_edgeA) {
            e.type = t.ManifoldType.e_faceA;
            var M = 0, I = Q(wn, fn.normals[0]);
            for (x = 1; x < fn.count; ++x) {
              var P = Q(wn, fn.normals[x]);
              P < I && (I = P, M = x)
            }
            var S = M, T = S + 1 < fn.count ? S + 1 : 0;
            N(pn[0].v, fn.vertices[S]), pn[0].id.setFeatures(0, t.ContactFeatureType.e_face, S, t.ContactFeatureType.e_vertex), N(pn[1].v, fn.vertices[T]), pn[1].id.setFeatures(0, t.ContactFeatureType.e_face, T, t.ContactFeatureType.e_vertex), l ? (vn.i1 = 0, vn.i2 = 1, N(vn.v1, a), N(vn.v2, m), N(vn.normal, Cn)) : (vn.i1 = 1, vn.i2 = 0, N(vn.v1, m), N(vn.v2, a), Y(vn.normal, -1, Cn))
          } else {
            e.type = t.ManifoldType.e_faceB, N(pn[0].v, a), pn[0].id.setFeatures(0, t.ContactFeatureType.e_vertex, C.index, t.ContactFeatureType.e_face), N(pn[1].v, m), pn[1].id.setFeatures(0, t.ContactFeatureType.e_vertex, C.index, t.ContactFeatureType.e_face), vn.i1 = C.index, vn.i2 = vn.i1 + 1 < fn.count ? vn.i1 + 1 : 0, N(vn.v1, fn.vertices[vn.i1]), N(vn.v2, fn.vertices[vn.i2]), N(vn.normal, fn.normals[vn.i1]);
          }
          if (k(vn.sideNormal1, vn.normal.y, -vn.normal.x), k(vn.sideNormal2, -vn.sideNormal1.x, -vn.sideNormal1.y), vn.sideOffset1 = Q(vn.sideNormal1, vn.v1), vn.sideOffset2 = Q(vn.sideNormal2, vn.v2), ln[0].recycle(), ln[1].recycle(), un[0].recycle(), un[1].recycle(), !(vi(ln, pn, vn.sideNormal1, vn.sideOffset1, vn.i1) < g.maxManifoldPoints)) {
            if (!(vi(un, ln, vn.sideNormal2, vn.sideOffset2, vn.i2) < g.maxManifoldPoints)) {
              C.type == rn.e_edgeA ? (N(e.localNormal, vn.normal), N(e.localPoint, vn.v1)) : (N(e.localNormal, s.m_normals[vn.i1]), N(e.localPoint, s.m_vertices[vn.i1]));
              var z = 0;
              for (x = 0; x < g.maxManifoldPoints; ++x) {
                if (Q(vn.normal, un[x].v) - Q(vn.normal, vn.v1) <= A) {
                  var F = e.points[z];
                  C.type == rn.e_edgeA ? (at(F.localPoint, Bn, un[x].v), F.id.set(un[x].id)) : (N(F.localPoint, un[x].v), F.id.set(un[x].id), F.id.swapFeatures()), ++z
                }
              }
              e.pointCount = z
            }
          }
        }
      }
    }, Fn = {
      CollidePolygons: tn,
      Settings: g,
      Sweep: ft,
      Manifold: ui,
      Distance: oe,
      TimeOfImpact: ke,
      DynamicTree: M,
      stats: Jt
    }, Ln = Object.freeze({
      __proto__: null,
      Math: c,
      Serializer: Bs,
      Testbed: Vs,
      testbed: Cs,
      Vec2: y,
      Vec3: no,
      Mat22: ii,
      Mat33: Do,
      Transform: vt,
      Rot: ut,
      AABB: v,
      Shape: wt,
      FixtureProxy: Pt,
      Fixture: St,
      Body: Ot,
      ContactEdge: Vi,
      mixFriction: Ci,
      mixRestitution: Mi,
      VelocityConstraintPoint: Pi,
      Contact: io,
      JointEdge: Rt,
      Joint: Et,
      World: so,
      CircleShape: To,
      Circle: zo,
      EdgeShape: mo,
      Edge: ho,
      PolygonShape: Bo,
      Polygon: Vo,
      ChainShape: lo,
      Chain: uo,
      BoxShape: Co,
      Box: Mo,
      CollideCircles: Ps,
      CollideEdgeCircle: ks,
      CollidePolygons: tn,
      CollidePolygonCircle: sn,
      CollideEdgePolygon: zn,
      DistanceJoint: ko,
      FrictionJoint: jo,
      GearJoint: is,
      MotorJoint: ss,
      MouseJoint: as,
      PrismaticJoint: ts,
      PulleyJoint: cs,
      RevoluteJoint: Zo,
      RopeJoint: us,
      WeldJoint: fs,
      WheelJoint: gs,
      Settings: A,
      SettingsInternal: g,
      Sweep: ft,
      get ManifoldType () {
        return t.ManifoldType
      },
      get ContactFeatureType () {
        return t.ContactFeatureType
      },
      get PointState () {
        return t.PointState
      },
      ClipVertex: li,
      Manifold: ui,
      ManifoldPoint: pi,
      ContactID: yi,
      WorldManifold: di,
      getPointStates: fi,
      clipSegmentToLine: vi,
      DistanceInput: te,
      DistanceOutput: ee,
      SimplexCache: ie,
      Distance: oe,
      DistanceProxy: se,
      testOverlap: ue,
      ShapeCastInput: ye,
      ShapeCastOutput: de,
      ShapeCast: fe,
      TOIInput: Ae,
      get TOIOutputState () {
        return t.TOIOutputState
      },
      TOIOutput: ge,
      TimeOfImpact: ke,
      TreeNode: V,
      DynamicTree: M,
      stats: Jt,
      internal: Fn
    });
  t.AABB = v, t.Body = Ot, t.Box = Mo, t.BoxShape = Co, t.Chain = uo, t.ChainShape = lo, t.Circle = zo, t.CircleShape = To, t.ClipVertex = li, t.CollideCircles = Ps, t.CollideEdgeCircle = ks, t.CollideEdgePolygon = zn, t.CollidePolygonCircle = sn, t.CollidePolygons = tn, t.Contact = io, t.ContactEdge = Vi, t.ContactID = yi, t.Distance = oe, t.DistanceInput = te, t.DistanceJoint = ko, t.DistanceOutput = ee, t.DistanceProxy = se, t.DynamicTree = M, t.Edge = ho, t.EdgeShape = mo, t.Fixture = St, t.FixtureProxy = Pt, t.FrictionJoint = jo, t.GearJoint = is, t.Joint = Et, t.JointEdge = Rt, t.Manifold = ui, t.ManifoldPoint = pi, t.Mat22 = ii, t.Mat33 = Do, t.Math = c, t.MotorJoint = ss, t.MouseJoint = as, t.Polygon = Vo, t.PolygonShape = Bo, t.PrismaticJoint = ts, t.PulleyJoint = cs, t.RevoluteJoint = Zo, t.RopeJoint = us, t.Rot = ut, t.Serializer = Bs, t.Settings = A, t.SettingsInternal = g, t.Shape = wt, t.ShapeCast = fe, t.ShapeCastInput = ye, t.ShapeCastOutput = de, t.SimplexCache = ie, t.Sweep = ft, t.TOIInput = Ae, t.TOIOutput = ge, t.Testbed = Vs, t.TimeOfImpact = ke, t.Transform = vt, t.TreeNode = V, t.Vec2 = y, t.Vec3 = no, t.VelocityConstraintPoint = Pi, t.WeldJoint = fs, t.WheelJoint = gs, t.World = so, t.WorldManifold = di, t.clipSegmentToLine = vi, t.default = Ln, t.getPointStates = fi, t.internal = Fn, t.mixFriction = Ci, t.mixRestitution = Mi, t.stats = Jt, t.testOverlap = ue, t.testbed = Cs, Object.defineProperty(t, "__esModule", {value: !0})
}));
//# sourceMappingURL=planck.min.js.map
